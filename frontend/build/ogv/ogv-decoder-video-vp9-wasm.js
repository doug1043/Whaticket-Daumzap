var OGVDecoderVideoVP9W=(()=>{var e="undefined"!=typeof document?document.currentScript?.src:void 0;return"undefined"!=typeof __filename&&(e||=__filename),function(r={}){var t,n,o,i,a,c=r,f=new Promise((e,r)=>{t=e,n=r}),s=Object.assign({},c),u="object"==typeof window,d="function"==typeof importScripts,p="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,l="";if(p){var h=require("fs"),y=require("path");l=d?y.dirname(l)+"/":__dirname+"/",o=(e,r)=>(e=S(e)?new URL(e):y.normalize(e),h.readFileSync(e,r?void 0:"utf8")),a=e=>((e=o(e,!0)).buffer||(e=new Uint8Array(e)),e),i=(e,r,t,n=!0)=>{e=S(e)?new URL(e):y.normalize(e),h.readFile(e,n?void 0:"utf8",(e,o)=>{e?t(e):r(n?o.buffer:o)})},process.argv.slice(2)}else(u||d)&&(d?l=self.location.href:"undefined"!=typeof document&&document.currentScript&&(l=document.currentScript.src),e&&(l=e),l=l.startsWith("blob:")?"":l.substr(0,l.replace(/[?#].*/,"").lastIndexOf("/")+1),o=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},d&&(a=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),i=(e,r,t)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?r(n.response):t()},n.onerror=t,n.send(null)});c.print||function(){}.bind();var v,_=c.printErr||function(){}.bind();Object.assign(c,s),s=null,c.wasmBinary&&(v=c.wasmBinary);var m,g,w=!1;function b(){var e=m.buffer;c.HEAP8=new Int8Array(e),c.HEAP16=new Int16Array(e),c.HEAPU8=g=new Uint8Array(e),c.HEAPU16=new Uint16Array(e),c.HEAP32=new Int32Array(e),c.HEAPU32=new Uint32Array(e),c.HEAPF32=new Float32Array(e),c.HEAPF64=new Float64Array(e)}var A=[],R=[],W=[];function H(){var e=c.preRun.shift();A.unshift(e)}var U,F=0,P=null,E=null,I=e=>e.startsWith("data:application/octet-stream;base64,"),S=e=>e.startsWith("file://");if(!I(U="ogv-decoder-video-vp9-wasm.wasm")){var T=U;U=c.locateFile?c.locateFile(T,l):l+T}function L(e){if(e==U&&v)return new Uint8Array(v);if(a)return a(e);throw"both async and sync fetching of the wasm failed"}function j(e,r,t){return function(e){if(!v&&(u||d)){if("function"==typeof fetch&&!S(e))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw`failed to load wasm binary file at '${e}'`;return r.arrayBuffer()}).catch(()=>L(e));if(i)return new Promise((r,t)=>{i(e,e=>r(new Uint8Array(e)),t)})}return Promise.resolve().then(()=>L(e))}(e).then(e=>WebAssembly.instantiate(e,r)).then(t,e=>{throw _(`failed to asynchronously prepare wasm: ${e}`),c.onAbort?.(e),_(e="Aborted("+e+")"),w=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),n(e),e})}var V,M=e=>{for(;0<e.length;)e.shift()(c)},O=[],x=e=>{var r=O[e];return r||(e>=O.length&&(O.length=e+1),O[e]=r=V.get(e)),r},B={h:(e,r,t)=>g.copyWithin(e,r,r+t),j:()=>{throw 1/0},k:e=>{var r=g.length;if(2147483648<(e>>>=0))return!1;for(var t=1;4>=t;t*=2){var n=r*(1+.2/t);n=Math.min(n,e+100663296);var o=Math;n=Math.max(e,n);e:{o=(o.min.call(o,2147483648,n+(65536-n%65536)%65536)-m.buffer.byteLength+65535)/65536;try{m.grow(o),b();var i=1;break e}catch(e){}i=void 0}if(i)return!0}return!1},b:function(e,r,t){var n=N();try{return x(e)(r,t)}catch(e){if(X(n),e!==e+0)throw e;$(1,0)}},d:function(e,r,t,n){var o=N();try{return x(e)(r,t,n)}catch(e){if(X(o),e!==e+0)throw e;$(1,0)}},g:function(e,r,t,n,o){var i=N();try{return x(e)(r,t,n,o)}catch(e){if(X(i),e!==e+0)throw e;$(1,0)}},e:function(e,r,t,n,o,i){var a=N();try{return x(e)(r,t,n,o,i)}catch(e){if(X(a),e!==e+0)throw e;$(1,0)}},c:function(e,r){var t=N();try{x(e)(r)}catch(e){if(X(t),e!==e+0)throw e;$(1,0)}},a:function(e,r,t,n,o){var i=N();try{x(e)(r,t,n,o)}catch(e){if(X(i),e!==e+0)throw e;$(1,0)}},i:function(e,r,t,n,o,i,a){var c=N();try{x(e)(r,t,n,o,i,a)}catch(e){if(X(c),e!==e+0)throw e;$(1,0)}},f:function(e,r,t,n,o,i,a,c,f){var s=N();try{x(e)(r,t,n,o,i,a,c,f)}catch(e){if(X(s),e!==e+0)throw e;$(1,0)}},l:function(e,r,t,n,o,i,a,f,s,u,d,p,l,h,y,v){function _(e,r,t,n,o,i,a,c,f){var s,u;for(e.set(new Uint8Array(g,r,t*n)),s=u=0;s<i;s++,u+=t)for(r=0;r<t;r++)e[u+r]=f;for(;s<i+c;s++,u+=t){for(r=0;r<o;r++)e[u+r]=f;for(r=o+a;r<t;r++)e[u+r]=f}for(;s<n;s++,u+=t)for(r=0;r<t;r++)e[u+r]=f;return e}var g=m.buffer,w=c.videoFormat,b=(-2&l)*s/a,A=(-2&h)*u/f,R=d*s/a,W=p*u/f;d===w.cropWidth&&p===w.cropHeight&&(y=w.displayWidth,v=w.displayHeight);for(var H,U=c.recycledFrames,F=f*r,P=u*n,E=u*i;0<U.length;){var I=U.shift();if((w=I.format).width===a&&w.height===f&&w.chromaWidth===s&&w.chromaHeight===u&&w.cropLeft===l&&w.cropTop===h&&w.cropWidth===d&&w.cropHeight===p&&w.displayWidth===y&&w.displayHeight===v&&I.y.bytes.length===F&&I.u.bytes.length===P&&I.v.bytes.length===E){H=I;break}}H||={format:{width:a,height:f,chromaWidth:s,chromaHeight:u,cropLeft:l,cropTop:h,cropWidth:d,cropHeight:p,displayWidth:y,displayHeight:v},y:{bytes:new Uint8Array(F),stride:r},u:{bytes:new Uint8Array(P),stride:n},v:{bytes:new Uint8Array(E),stride:i}},_(H.y.bytes,e,r,f,l,h,d,p,0),_(H.u.bytes,t,n,u,b,A,R,W,128),_(H.v.bytes,o,i,u,b,A,R,W,128),c.frameBuffer=H}},k=function(){function e(e){return k=e.exports,m=k.m,b(),V=k.t,R.unshift(k.n),F--,c.monitorRunDependencies?.(F),0==F&&(null!==P&&(clearInterval(P),P=null),E&&(e=E,E=null,e())),k}var r={a:B};if(F++,c.monitorRunDependencies?.(F),c.instantiateWasm)try{return c.instantiateWasm(r,e)}catch(e){_(`Module.instantiateWasm callback failed with error: ${e}`),n(e)}return function(e,r){var t=U;return v||"function"!=typeof WebAssembly.instantiateStreaming||I(t)||S(t)||p||"function"!=typeof fetch?j(t,e,r):fetch(t,{credentials:"same-origin"}).then(n=>WebAssembly.instantiateStreaming(n,e).then(r,function(n){return _(`wasm streaming compile failed: ${n}`),_("falling back to ArrayBuffer instantiation"),j(t,e,r)}))}(r,function(r){e(r.instance)}).catch(n),{}}();c._ogv_video_decoder_init=()=>(c._ogv_video_decoder_init=k.o)(),c._ogv_video_decoder_async=()=>(c._ogv_video_decoder_async=k.p)(),c._ogv_video_decoder_destroy=()=>(c._ogv_video_decoder_destroy=k.q)(),c._ogv_video_decoder_process_header=(e,r)=>(c._ogv_video_decoder_process_header=k.r)(e,r),c._ogv_video_decoder_process_frame=(e,r)=>(c._ogv_video_decoder_process_frame=k.s)(e,r),c._malloc=e=>(c._malloc=k.u)(e),c._free=e=>(c._free=k.v)(e);var q,D,G,z,$=(e,r)=>($=k.w)(e,r),X=e=>(X=k.x)(e),N=()=>(N=k.y)();function C(){function e(){if(!q&&(q=!0,c.calledRun=!0,!w)){if(M(R),t(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;){var e=c.postRun.shift();W.unshift(e)}M(W)}}if(!(0<F)){if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)H();M(A),0<F||(c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),e()},1)):e())}}if(E=function e(){q||C(),q||(E=e)},c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();function J(e){var r=z();return e=e(),c.cpuTime+=z()-r,e}return C(),z="undefined"==typeof performance||void 0===performance.now?Date.now:performance.now.bind(performance),c.loadedMetadata=!!c.videoFormat,c.videoFormat=c.videoFormat||null,c.frameBuffer=null,c.cpuTime=0,Object.defineProperty(c,"processing",{get:function(){return!1}}),c.init=function(e){J(function(){c._ogv_video_decoder_init()}),e()},c.processHeader=function(e,r){r(J(function(){var r=e.byteLength;D&&G>=r||(D&&c._free(D),G=r,D=c._malloc(G));var t=D;return new Uint8Array(m.buffer,t,r).set(new Uint8Array(e)),c._ogv_video_decoder_process_header(t,r)}))},c.A=[],c.processFrame=function(e,r){function t(e){c._free(i),r(e)}var n=c._ogv_video_decoder_async(),o=e.byteLength,i=c._malloc(o);n&&c.A.push(t);var a=J(function(){return new Uint8Array(m.buffer,i,o).set(new Uint8Array(e)),c._ogv_video_decoder_process_frame(i,o)});n||t(a)},c.close=function(){},c.sync=function(){c._ogv_video_decoder_async()&&(c.A.push(function(){}),J(function(){c._ogv_video_decoder_process_frame(0,0)}))},c.recycledFrames=[],c.recycleFrame=function(e){var r=c.recycledFrames;r.push(e),16<r.length&&r.shift()},f}})();"object"==typeof exports&&"object"==typeof module?module.exports=OGVDecoderVideoVP9W:"function"==typeof define&&define.amd&&define([],()=>OGVDecoderVideoVP9W);