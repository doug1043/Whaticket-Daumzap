var OGVDecoderAudioOpusW=(()=>{var e="undefined"!=typeof document?document.currentScript?.src:void 0;return"undefined"!=typeof __filename&&(e||=__filename),function(n={}){var r,t,o,i,a,u=n,f=new Promise(((e,n)=>{r=e,t=n})),s=Object.assign({},u),c="object"==typeof window,d="function"==typeof importScripts,l="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,p="";if(l){var m=require("fs"),y=require("path");p=d?y.dirname(p)+"/":__dirname+"/",o=(e,n)=>(e=j(e)?new URL(e):y.normalize(e),m.readFileSync(e,n?void 0:"utf8")),a=e=>((e=o(e,!0)).buffer||(e=new Uint8Array(e)),e),i=(e,n,r,t=!0)=>{e=j(e)?new URL(e):y.normalize(e),m.readFile(e,t?void 0:"utf8",((e,o)=>{e?r(e):n(t?o.buffer:o)}))},process.argv.slice(2)}else(c||d)&&(d?p=self.location.href:"undefined"!=typeof document&&document.currentScript&&(p=document.currentScript.src),e&&(p=e),p=p.startsWith("blob:")?"":p.substr(0,p.replace(/[?#].*/,"").lastIndexOf("/")+1),o=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(null),n.responseText},d&&(a=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),i=(e,n,r)=>{var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=()=>{200==t.status||0==t.status&&t.response?n(t.response):r()},t.onerror=r,t.send(null)});var _,v=u.print||function(){}.bind(),h=u.printErr||function(){}.bind();Object.assign(u,s),s=null,u.wasmBinary&&(_=u.wasmBinary);var w,b,g,A=!1;function R(){var e=w.buffer;u.HEAP8=new Int8Array(e),u.HEAP16=new Int16Array(e),u.HEAPU8=b=new Uint8Array(e),u.HEAPU16=new Uint16Array(e),u.HEAP32=new Int32Array(e),u.HEAPU32=g=new Uint32Array(e),u.HEAPF32=new Float32Array(e),u.HEAPF64=new Float64Array(e)}var S=[],U=[],F=[];function E(){var e=u.preRun.shift();S.unshift(e)}var I=0,W=null,T=null;function H(e){throw u.onAbort?.(e),h(e="Aborted("+e+")"),A=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),t(e),e}var P,O=e=>e.startsWith("data:application/octet-stream;base64,"),j=e=>e.startsWith("file://");if(!O(P="ogv-decoder-audio-opus-wasm.wasm")){var M=P;P=u.locateFile?u.locateFile(M,p):p+M}function x(e){if(e==P&&_)return new Uint8Array(_);if(a)return a(e);throw"both async and sync fetching of the wasm failed"}function C(e,n,r){return function(e){if(!_&&(c||d)){if("function"==typeof fetch&&!j(e))return fetch(e,{credentials:"same-origin"}).then((n=>{if(!n.ok)throw`failed to load wasm binary file at '${e}'`;return n.arrayBuffer()})).catch((()=>x(e)));if(i)return new Promise(((n,r)=>{i(e,(e=>n(new Uint8Array(e))),r)}))}return Promise.resolve().then((()=>x(e)))}(e).then((e=>WebAssembly.instantiate(e,n))).then(r,(e=>{h(`failed to asynchronously prepare wasm: ${e}`),H(e)}))}var D,L,B,G,k=e=>{for(;0<e.length;)e.shift()(u)},q=[null,[],[]],z="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,$={e:(e,n,r)=>b.copyWithin(e,n,n+r),f:()=>{H("")},c:e=>{var n=b.length;if(2147483648<(e>>>=0))return!1;for(var r=1;4>=r;r*=2){var t=n*(1+.2/r);t=Math.min(t,e+100663296);var o=Math;t=Math.max(e,t);e:{o=(o.min.call(o,2147483648,t+(65536-t%65536)%65536)-w.buffer.byteLength+65535)/65536;try{w.grow(o),R();var i=1;break e}catch(e){}i=void 0}if(i)return!0}return!1},d:()=>52,b:function(){return 70},a:(e,n,r,t)=>{for(var o=0,i=0;i<r;i++){var a=g[n>>2],u=g[n+4>>2];n+=8;for(var f=0;f<u;f++){var s=b[a+f],c=q[e];if(0===s||10===s){s=c;for(var d=0,l=d+NaN,p=d;s[p]&&!(p>=l);)++p;if(16<p-d&&s.buffer&&z)s=z.decode(s.subarray(d,p));else{for(l="";d<p;){var m=s[d++];if(128&m){var y=63&s[d++];if(192==(224&m))l+=String.fromCharCode((31&m)<<6|y);else{var _=63&s[d++];65536>(m=224==(240&m)?(15&m)<<12|y<<6|_:(7&m)<<18|y<<12|_<<6|63&s[d++])?l+=String.fromCharCode(m):(m-=65536,l+=String.fromCharCode(55296|m>>10,56320|1023&m))}}else l+=String.fromCharCode(m)}s=l}(1===e?v:h)(s),c.length=0}else c.push(s)}o+=u}return g[t>>2]=o,0},g:function(e,n,r){var t=w.buffer,o=new Uint32Array(t,e,n),i=[];if(0!==e)for(e=0;e<n;e++){var a=o[e];t.slice?(a=t.slice(a,a+4*r),a=new Float32Array(a)):(a=new Float32Array(t,a,r),a=new Float32Array(a)),i.push(a)}u.audioBuffer=i},h:function(e,n){u.audioFormat={channels:e,rate:n},u.loadedMetadata=!0}},N=function(){function e(e){return N=e.exports,w=N.i,R(),U.unshift(N.j),I--,u.monitorRunDependencies?.(I),0==I&&(null!==W&&(clearInterval(W),W=null),T&&(e=T,T=null,e())),N}var n={a:$};if(I++,u.monitorRunDependencies?.(I),u.instantiateWasm)try{return u.instantiateWasm(n,e)}catch(e){h(`Module.instantiateWasm callback failed with error: ${e}`),t(e)}return function(e,n){var r=P;return _||"function"!=typeof WebAssembly.instantiateStreaming||O(r)||j(r)||l||"function"!=typeof fetch?C(r,e,n):fetch(r,{credentials:"same-origin"}).then((t=>WebAssembly.instantiateStreaming(t,e).then(n,(function(t){return h(`wasm streaming compile failed: ${t}`),h("falling back to ArrayBuffer instantiation"),C(r,e,n)}))))}(n,(function(n){e(n.instance)})).catch(t),{}}();function V(){function e(){if(!D&&(D=!0,u.calledRun=!0,!A)){if(k(U),r(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var e=u.postRun.shift();F.unshift(e)}k(F)}}if(!(0<I)){if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)E();k(S),0<I||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),e()}),1)):e())}}if(u._ogv_audio_decoder_init=()=>(u._ogv_audio_decoder_init=N.k)(),u._ogv_audio_decoder_process_header=(e,n)=>(u._ogv_audio_decoder_process_header=N.l)(e,n),u._ogv_audio_decoder_process_audio=(e,n)=>(u._ogv_audio_decoder_process_audio=N.m)(e,n),u._malloc=e=>(u._malloc=N.n)(e),u._free=e=>(u._free=N.o)(e),u._ogv_audio_decoder_destroy=()=>(u._ogv_audio_decoder_destroy=N.p)(),T=function e(){D||V(),D||(T=e)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();function X(e){return L&&B>=e?L:(L&&u._free(L),B=e,L=u._malloc(B))}function J(e){var n=G();return e=e(),u.cpuTime+=G()-n,e}return V(),G="undefined"==typeof performance||void 0===performance.now?Date.now:performance.now.bind(performance),u.loadedMetadata=!!u.audioFormat,u.audioFormat=u.audioFormat||null,u.audioBuffer=null,u.cpuTime=0,Object.defineProperty(u,"processing",{get:function(){return!1}}),u.init=function(e){J((function(){u._ogv_audio_decoder_init()})),e()},u.processHeader=function(e,n){n(J((function(){var n=e.byteLength,r=X(n);return new Uint8Array(w.buffer,r,n).set(new Uint8Array(e)),u._ogv_audio_decoder_process_header(r,n)})))},u.processAudio=function(e,n){n(J((function(){var n=e.byteLength,r=X(n);return new Uint8Array(w.buffer,r,n).set(new Uint8Array(e)),u._ogv_audio_decoder_process_audio(r,n)})))},u.close=function(){},f}})();"object"==typeof exports&&"object"==typeof module?module.exports=OGVDecoderAudioOpusW:"function"==typeof define&&define.amd&&define([],(()=>OGVDecoderAudioOpusW));