var OGVDecoderVideoVP9SIMDMTW=(()=>{var e="undefined"!=typeof document?document.currentScript?.src:void 0;return"undefined"!=typeof __filename&&(e||=__filename),function(r={}){function t(){return S.buffer!=I.buffer&&B(),U}function n(){return S.buffer!=I.buffer&&B(),H}function o(){return S.buffer!=I.buffer&&B(),F}function a(){return S.buffer!=I.buffer&&B(),O}var i,s,u,f,c,d=r,h=new Promise((e,r)=>{i=e,s=r}),l=d,p=Object.assign({},d),m=(e,r)=>{throw r},v="object"==typeof window,_="function"==typeof importScripts,y="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,g=d.ENVIRONMENT_IS_PTHREAD||!1,w="";function b(e){return d.locateFile?d.locateFile(e,w):w+e}if(y){var W=require("fs"),k=require("path");w=_?k.dirname(w)+"/":__dirname+"/",u=(e,r)=>(e=ee(e)?new URL(e):k.normalize(e),W.readFileSync(e,r?void 0:"utf8")),c=e=>{var r=u(e,!0);return r.buffer||(r=new Uint8Array(r)),r},f=(e,r,t,n=!0)=>{e=ee(e)?new URL(e):k.normalize(e),W.readFile(e,n?void 0:"utf8",(e,o)=>{e?t(e):r(n?o.buffer:o)})},!d.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),m=(e,r)=>{throw process.exitCode=e,r},global.Worker=require("worker_threads").Worker}else(v||_)&&(_?w=self.location.href:"undefined"!=typeof document&&document.currentScript&&(w=document.currentScript.src),e&&(w=e),w=w.startsWith("blob:")?"":w.substr(0,w.replace(/[?#].*/,"").lastIndexOf("/")+1),y||(u=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},_&&(c=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),f=(e,r,t)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?r(n.response):t()},n.onerror=t,n.send(null)}));y&&"undefined"==typeof performance&&(global.performance=require("perf_hooks").performance);var A=function(){}.bind(),T=function(){}.bind();y&&(A=(...e)=>W.writeSync(1,e.join(" ")+"\n"),T=(...e)=>W.writeSync(2,e.join(" ")+"\n"));var M,S,x,R=d.print||A,P=d.printErr||T;Object.assign(d,p),p=null,d.arguments&&d.arguments,d.thisProgram&&d.thisProgram,d.quit&&(m=d.quit),d.wasmBinary&&(M=d.wasmBinary);var E,I,U,H,F,O,L=!1;function B(){var e=S.buffer;d.HEAP8=I=new Int8Array(e),d.HEAP16=new Int16Array(e),d.HEAPU8=U=new Uint8Array(e),d.HEAPU16=new Uint16Array(e),d.HEAP32=H=new Int32Array(e),d.HEAPU32=F=new Uint32Array(e),d.HEAPF32=new Float32Array(e),d.HEAPF64=O=new Float64Array(e)}var C=d.INITIAL_MEMORY||16777216;if(g)S=d.wasmMemory;else if(d.wasmMemory)S=d.wasmMemory;else if(!((S=new WebAssembly.Memory({initial:C/65536,maximum:16384,shared:!0})).buffer instanceof SharedArrayBuffer))throw P("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),y&&P("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");B(),C=S.buffer.byteLength;var $=[],j=[],D=[];function q(){g||ve(j)}function V(e){$.unshift(e)}function N(e){D.unshift(e)}var G=0,z=null,X=null;function Y(e){G++,d.monitorRunDependencies?.(G)}function J(e){if(G--,d.monitorRunDependencies?.(G),0==G&&(null!==z&&(clearInterval(z),z=null),X)){var r=X;X=null,r()}}function K(e){d.onAbort?.(e),P(e="Aborted("+e+")"),L=!0,E=1,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw s(r),r}var Q,Z=e=>e.startsWith("data:application/octet-stream;base64,"),ee=e=>e.startsWith("file://");function re(e){if(e==Q&&M)return new Uint8Array(M);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}function te(e,r,t){return function(e){if(!M&&(v||_)){if("function"==typeof fetch&&!ee(e))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw`failed to load wasm binary file at '${e}'`;return r.arrayBuffer()}).catch(()=>re(e));if(f)return new Promise((r,t)=>{f(e,e=>r(new Uint8Array(e)),t)})}return Promise.resolve().then(()=>re(e))}(e).then(e=>WebAssembly.instantiate(e,r)).then(t,e=>{P(`failed to asynchronously prepare wasm: ${e}`),K(e)})}function ne(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}Z(Q="ogv-decoder-video-vp9-simd-mt-wasm.wasm")||(Q=b(Q));var oe=e=>{e.terminate(),e.onmessage=e=>{}},ae=e=>{var r=me.pthreads[e];me.returnWorkerToPool(r)},ie=e=>{var r=me.getNewWorker();if(!r)return 6;me.runningWorkers.push(r),me.pthreads[e.pthread_ptr]=r,r.pthread_ptr=e.pthread_ptr;var t={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return y&&r.unref(),r.postMessage(t,e.transferList),0},se=0,ue=()=>be||se>0,fe=()=>Qe(),ce=e=>Je(e),de=(e,r,t,...n)=>{return o=()=>{for(var o=n.length,i=Ke(8*o),s=i>>3,u=0;u<n.length;u++){var f=n[u];a()[s+u]=f}return Ve(e,r,o,i,t)},i=fe(),s=o(),ce(i),s;var o,i,s};function he(e){if(g)return de(0,0,1,e);E=e,ue()||(me.terminateAllThreads(),d.onExit?.(e),L=!0),m(e,new ne(e))}var le=(e,r)=>{if(E=e,g)throw _e(e),"unwind";he(e)},pe=e=>{if(e instanceof ne||"unwind"==e)return E;m(1,e)},me={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init(){g?me.initWorker():me.initMainThread()},initMainThread(){for(var e=1;e--;)me.allocateUnusedWorker();V(()=>{Y(),me.loadWasmModuleToAllWorkers(()=>J())})},initWorker(){be=!1},setExitStatus:e=>E=e,terminateAllThreads__deps:["$terminateWorker"],terminateAllThreads:()=>{for(var e of me.runningWorkers)oe(e);for(var e of me.unusedWorkers)oe(e);me.unusedWorkers=[],me.runningWorkers=[],me.pthreads=[]},returnWorkerToPool:e=>{var r=e.pthread_ptr;delete me.pthreads[r],me.unusedWorkers.push(e),me.runningWorkers.splice(me.runningWorkers.indexOf(e),1),e.pthread_ptr=0,Ne(r)},receiveObjectTransfer(e){},threadInitTLS(){me.tlsInitFunctions.forEach(e=>e())},loadWasmModuleToWorker:r=>new Promise(t=>{r.onmessage=e=>{var n=e.data,o=n.cmd;if(n.targetThread&&n.targetThread!=De()){var a=me.pthreads[n.targetThread];a?a.postMessage(n,n.transferList):P(`Internal error! Worker sent a message "${o}" to target pthread ${n.targetThread}, but that thread no longer exists!`)}else{var i;"checkMailbox"===o?Se():"spawnThread"===o?ie(n):"cleanupThread"===o?ae(n.thread):"killThread"===o?(e=>{var r=me.pthreads[e];delete me.pthreads[e],oe(r),Ne(e),me.runningWorkers.splice(me.runningWorkers.indexOf(r),1),r.pthread_ptr=0})(n.thread):"cancelThread"===o?(i=n.thread,me.pthreads[i].postMessage({cmd:"cancel"})):"loaded"===o?(r.loaded=!0,y&&!r.pthread_ptr&&r.unref(),t(r)):"alert"===o?alert(`Thread ${n.threadId}: ${n.text}`):"setimmediate"===n.target?r.postMessage(n):"callHandler"===o?d[n.handler](...n.args):o&&P(`worker sent an unknown command ${o}`)}},r.onerror=e=>{throw P(`worker sent an error! ${e.filename}:${e.lineno}: ${e.message}`),e},y&&(r.on("message",e=>r.onmessage({data:e})),r.on("error",e=>r.onerror(e)));var n=[];for(var o of["onExit","onAbort","print","printErr"])d.hasOwnProperty(o)&&n.push(o);r.postMessage({cmd:"load",handlers:n,urlOrBlob:d.mainScriptUrlOrBlob||e,wasmMemory:S,wasmModule:x})}),loadWasmModuleToAllWorkers(e){if(g)return e();Promise.all(me.unusedWorkers.map(me.loadWasmModuleToWorker)).then(e)},allocateUnusedWorker(){var e,r=b("ogv-decoder-video-vp9-simd-mt-wasm.worker.js");e=new Worker(r),me.unusedWorkers.push(e)},getNewWorker:()=>(0==me.unusedWorkers.length&&(me.allocateUnusedWorker(),me.loadWasmModuleToWorker(me.unusedWorkers[0])),me.unusedWorkers.pop())};d.PThread=me;var ve=e=>{for(;e.length>0;)e.shift()(d)};function _e(e){if(g)return de(1,0,0,e);le(e)}d.establishStackSpace=()=>{var e=De(),r=o()[e+52>>2],t=o()[e+56>>2];Ye(r,r-t),ce(r)};var ye,ge=[],we=e=>{var r=ge[e];return r||(e>=ge.length&&(ge.length=e+1),ge[e]=r=ye.get(e)),r};d.invokeEntryPoint=(e,r)=>{se=0,function(e){ue()?me.setExitStatus(e):Ge(e)}(we(e)(r))};var be=d.noExitRuntime||!0,We=e=>me.tlsInitFunctions.push(e);function ke(e,r,t,n){return g?de(2,0,1,e,r,t,n):Ae(e,r,t,n)}var Ae=(e,r,t,n)=>{if("undefined"==typeof SharedArrayBuffer)return P("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var o=[];if(g&&0===o.length)return ke(e,r,t,n);var a={startRoutine:t,pthread_ptr:e,arg:n,transferList:o};return g?(a.cmd="spawnThread",postMessage(a,o),0):ie(a)},Te=e=>{if(!L)try{e(),(()=>{if(!ue())try{g?Ge(E):le(E)}catch(e){pe(e)}})()}catch(e){pe(e)}},Me=e=>{if("function"==typeof Atomics.waitAsync){Atomics.waitAsync(n(),e>>2,e).value.then(Se);var r=e+128;Atomics.store(n(),r>>2,1)}};d.__emscripten_thread_mailbox_await=Me;var Se=()=>{var e=De();e&&(Me(e),Te(ze))};d.checkMailbox=Se;var xe,Re=[];xe=()=>performance.timeOrigin+performance.now();var Pe=e=>{var r=(e-S.buffer.byteLength+65535)/65536;try{return S.grow(r),B(),1}catch(e){}},Ee=[null,[],[]],Ie="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,Ue=(e,r)=>{var t=Ee[e];0===r||10===r?((1===e?R:P)(((e,r,t)=>{for(var n=r+t,o=r;e[o]&&!(o>=n);)++o;if(o-r>16&&e.buffer&&Ie)return Ie.decode(e.buffer instanceof SharedArrayBuffer?e.slice(r,o):e.subarray(r,o));for(var a="";r<o;){var i=e[r++];if(128&i){var s=63&e[r++];if(192!=(224&i)){var u=63&e[r++];if((i=224==(240&i)?(15&i)<<12|s<<6|u:(7&i)<<18|s<<12|u<<6|63&e[r++])<65536)a+=String.fromCharCode(i);else{var f=i-65536;a+=String.fromCharCode(55296|f>>10,56320|1023&f)}}else a+=String.fromCharCode((31&i)<<6|s)}else a+=String.fromCharCode(i)}return a})(t,0)),t.length=0):t.push(r)};function He(e,r,n,a){if(g)return de(3,0,1,e,r,n,a);for(var i=0,s=0;s<n;s++){var u=o()[r>>2],f=o()[r+4>>2];r+=8;for(var c=0;c<f;c++)Ue(e,t()[u+c]);i+=f}return o()[a>>2]=i,0}me.init();var Fe,Oe,Le,Be,Ce=[he,_e,ke,He],$e={z:e=>{qe(e,!_,1,!v,65536,!1),me.threadInitTLS()},l:e=>{g?postMessage({cmd:"cleanupThread",thread:e}):ae(e)},w:Ae,t:(e,r,t)=>{if(e==r)setTimeout(Se);else if(g)postMessage({targetThread:e,cmd:"checkMailbox"});else{var n=me.pthreads[e];if(!n)return;n.postMessage({cmd:"checkMailbox"})}},x:(e,r,t,n,o)=>{Re.length=n;for(var i=o>>3,s=0;s<n;s++)Re[s]=a()[i+s];var u=Ce[e];me.currentProxiedOperationCallerThread=t;var f=u(...Re);return me.currentProxiedOperationCallerThread=0,f},y:Me,B:e=>{y&&me.pthreads[e].ref()},r:()=>{throw 1/0},E:()=>{K("")},m:()=>{},A:()=>{throw se+=1,"unwind"},b:xe,D:()=>y?require("os").cpus().length:navigator.hardwareConcurrency,s:e=>{var r=t().length;if((e>>>=0)<=r)return!1;var n=1073741824;if(e>n)return!1;for(var o=(e,r)=>e+(r-e%r)%r,a=1;a<=4;a*=2){var i=r*(1+.2/a);i=Math.min(i,e+100663296);var s=Math.min(n,o(Math.max(e,i),65536));if(Pe(s))return!0}return!1},u:()=>{throw"unwind"},v:le,k:He,d:function(e,r){var t=fe();try{return we(e)(r)}catch(e){if(ce(t),e!==e+0)throw e;Xe(1,0)}},c:function(e,r,t){var n=fe();try{return we(e)(r,t)}catch(e){if(ce(n),e!==e+0)throw e;Xe(1,0)}},g:function(e,r,t,n){var o=fe();try{return we(e)(r,t,n)}catch(e){if(ce(o),e!==e+0)throw e;Xe(1,0)}},j:function(e,r,t,n,o){var a=fe();try{return we(e)(r,t,n,o)}catch(e){if(ce(a),e!==e+0)throw e;Xe(1,0)}},n:function(e,r,t,n,o,a){var i=fe();try{return we(e)(r,t,n,o,a)}catch(e){if(ce(i),e!==e+0)throw e;Xe(1,0)}},f:function(e,r){var t=fe();try{we(e)(r)}catch(e){if(ce(t),e!==e+0)throw e;Xe(1,0)}},i:function(e,r,t){var n=fe();try{we(e)(r,t)}catch(e){if(ce(n),e!==e+0)throw e;Xe(1,0)}},e:function(e,r,t,n,o){var a=fe();try{we(e)(r,t,n,o)}catch(e){if(ce(a),e!==e+0)throw e;Xe(1,0)}},h:function(e,r,t,n,o,a){var i=fe();try{we(e)(r,t,n,o,a)}catch(e){if(ce(i),e!==e+0)throw e;Xe(1,0)}},C:function(e,r,t,n,o,a,i){var s=fe();try{we(e)(r,t,n,o,a,i)}catch(e){if(ce(s),e!==e+0)throw e;Xe(1,0)}},o:function(e,r,t,n,o,a,i,s,u){var f=fe();try{we(e)(r,t,n,o,a,i,s,u)}catch(e){if(ce(f),e!==e+0)throw e;Xe(1,0)}},a:S||d.wasmMemory,p:function(e,r){var t=d.callbacks.shift();d.cpuTime+=r,t(e)},q:function(e,r,t,n,o,a,i,s,u,f,c,h,l,p,m,v){var _=S.buffer;function y(e,r,t,n,o,a,i,s,u){var f,c,d;for(e.set(new Uint8Array(_,r,t*n)),d=0,c=0;c<a;c++,d+=t)for(f=0;f<t;f++)e[d+f]=u;for(;c<a+s;c++,d+=t){for(f=0;f<o;f++)e[d+f]=u;for(f=o+i;f<t;f++)e[d+f]=u}for(;c<n;c++,d+=t)for(f=0;f<t;f++)e[d+f]=u;return e}var g=(-2&l)*u/i,w=(-2&p)*f/s,b=c*u/i,W=h*f/s;c===(R=d.videoFormat).cropWidth&&h===R.cropHeight&&(m=R.displayWidth,v=R.displayHeight);for(var k,A=d.recycledFrames,T=s*r,M=f*n,x=f*a;A.length>0;){var R,P=A.shift();if((R=P.format).width===i&&R.height===s&&R.chromaWidth===u&&R.chromaHeight===f&&R.cropLeft===l&&R.cropTop===p&&R.cropWidth===c&&R.cropHeight===h&&R.displayWidth===m&&R.displayHeight===v&&P.y.bytes.length===T&&P.u.bytes.length===M&&P.v.bytes.length===x){k=P;break}}k||(k={format:{width:i,height:s,chromaWidth:u,chromaHeight:f,cropLeft:l,cropTop:p,cropWidth:c,cropHeight:h,displayWidth:m,displayHeight:v},y:{bytes:new Uint8Array(T),stride:r},u:{bytes:new Uint8Array(M),stride:n},v:{bytes:new Uint8Array(x),stride:a}}),y(k.y.bytes,e,r,s,l,p,c,h,0),y(k.u.bytes,t,n,f,g,w,b,W,128),y(k.v.bytes,o,a,f,g,w,b,W,128),d.frameBuffer=k}},je=function(){var e,r,t,n,o={a:$e};function a(e,r){var t;return je=e.exports,We(je.O),ye=je.L,t=je.F,j.unshift(t),x=r,J(),je}if(Y(),d.instantiateWasm)try{return d.instantiateWasm(o,a)}catch(e){P(`Module.instantiateWasm callback failed with error: ${e}`),s(e)}return(e=M,r=Q,t=o,n=function(e){a(e.instance,e.module)},e||"function"!=typeof WebAssembly.instantiateStreaming||Z(r)||ee(r)||y||"function"!=typeof fetch?te(r,t,n):fetch(r,{credentials:"same-origin"}).then(e=>WebAssembly.instantiateStreaming(e,t).then(n,function(e){return P(`wasm streaming compile failed: ${e}`),P("falling back to ArrayBuffer instantiation"),te(r,t,n)}))).catch(s),{}}(),De=(d._ogv_video_decoder_init=()=>(d._ogv_video_decoder_init=je.G)(),d._ogv_video_decoder_async=()=>(d._ogv_video_decoder_async=je.H)(),d._ogv_video_decoder_destroy=()=>(d._ogv_video_decoder_destroy=je.I)(),d._ogv_video_decoder_process_header=(e,r)=>(d._ogv_video_decoder_process_header=je.J)(e,r),d._ogv_video_decoder_process_frame=(e,r)=>(d._ogv_video_decoder_process_frame=je.K)(e,r),d._free=e=>(d._free=je.M)(e),d._malloc=e=>(d._malloc=je.N)(e),d.__emscripten_tls_init=()=>(d.__emscripten_tls_init=je.O)(),d._pthread_self=()=>(De=d._pthread_self=je.P)()),qe=d.__emscripten_thread_init=(e,r,t,n,o,a)=>(qe=d.__emscripten_thread_init=je.Q)(e,r,t,n,o,a),Ve=(d.__emscripten_thread_crashed=()=>(d.__emscripten_thread_crashed=je.R)(),(e,r,t,n,o)=>(Ve=je.S)(e,r,t,n,o)),Ne=e=>(Ne=je.T)(e),Ge=d.__emscripten_thread_exit=e=>(Ge=d.__emscripten_thread_exit=je.U)(e),ze=()=>(ze=je.V)(),Xe=(e,r)=>(Xe=je.W)(e,r),Ye=(e,r)=>(Ye=je.X)(e,r),Je=e=>(Je=je.Y)(e),Ke=e=>(Ke=je.Z)(e),Qe=()=>(Qe=je._)();function Ze(){if(!(G>0)){if(g)return i(d),q(),void startWorker(d);!function(){if(d.preRun)for("function"==typeof d.preRun&&(d.preRun=[d.preRun]);d.preRun.length;)V(d.preRun.shift());ve($)}(),G>0||(d.setStatus?(d.setStatus("Running..."),setTimeout(function(){setTimeout(function(){d.setStatus("")},1),e()},1)):e())}function e(){Fe||(Fe=!0,d.calledRun=!0,L||(q(),i(d),d.onRuntimeInitialized&&d.onRuntimeInitialized(),function(){if(!g){if(d.postRun)for("function"==typeof d.postRun&&(d.postRun=[d.postRun]);d.postRun.length;)N(d.postRun.shift());ve(D)}}()))}}if(d.wasmMemory=S,d.keepRuntimeAlive=ue,d.ExitStatus=ne,d.PThread=me,X=function e(){Fe||Ze(),Fe||(X=e)},d.preInit)for("function"==typeof d.preInit&&(d.preInit=[d.preInit]);d.preInit.length>0;)d.preInit.pop()();function er(e){var r,t=Be();return r=e(),d.cpuTime+=Be()-t,r}return Ze(),Be="undefined"==typeof performance||void 0===performance.now?Date.now:performance.now.bind(performance),d.loadedMetadata=!!l.videoFormat,d.videoFormat=l.videoFormat||null,d.frameBuffer=null,d.cpuTime=0,Object.defineProperty(d,"processing",{get:function(){return!1}}),d.init=function(e){er(function(){d._ogv_video_decoder_init()}),e()},d.processHeader=function(e,r){r(er(function(){var r,t=e.byteLength,n=(r=t,Oe&&Le>=r?Oe:(Oe&&d._free(Oe),Le=r,Oe=d._malloc(Le)));return new Uint8Array(S.buffer,n,t).set(new Uint8Array(e)),d._ogv_video_decoder_process_header(n,t)}))},d.callbacks=[],d.processFrame=function(e,r){var t=d._ogv_video_decoder_async(),n=e.byteLength,o=d._malloc(n);function a(e){d._free(o),r(e)}t&&d.callbacks.push(a);var i=er(function(){return new Uint8Array(S.buffer,o,n).set(new Uint8Array(e)),d._ogv_video_decoder_process_frame(o,n)});t||a(i)},d.close=function(){},d.sync=function(){d._ogv_video_decoder_async()&&(d.callbacks.push(function(){}),er(function(){d._ogv_video_decoder_process_frame(0,0)}))},d.recycledFrames=[],d.recycleFrame=function(e){var r=d.recycledFrames;r.push(e),r.length>16&&r.shift()},h}})();"object"==typeof exports&&"object"==typeof module?module.exports=OGVDecoderVideoVP9SIMDMTW:"function"==typeof define&&define.amd&&define([],()=>OGVDecoderVideoVP9SIMDMTW);