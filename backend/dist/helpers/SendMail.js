const a284_0xb819eb=a284_0x29a2;function a284_0x55b0(){const _0x47721a=['SendMail','8mvlxSR','nodemailer','constructor','7942669befPdO','Message\x20sent:\x20%s','clientsecretsmtpauth','toString','(((.+)+)+)+$','174wvXqbw','value','all','default','2050414MJaSKD','createTransport','usersmtpauth','159215odQzJN','apply','20573343JFAoxB','log','__esModule','search','findOne','smtpauth','html','920057eatcfY','subject','defineProperty','4032584wxQxeN','4454733mjdEfc'];a284_0x55b0=function(){return _0x47721a;};return a284_0x55b0();}(function(_0x275cb7,_0x24b68b){const _0x12828d=a284_0x29a2,_0x236ae0=_0x275cb7();while(!![]){try{const _0x2c1248=-parseInt(_0x12828d(0x1cf))/0x1+-parseInt(_0x12828d(0x1c3))/0x2+parseInt(_0x12828d(0x1d3))/0x3+parseInt(_0x12828d(0x1d2))/0x4+parseInt(_0x12828d(0x1c6))/0x5*(-parseInt(_0x12828d(0x1dd))/0x6)+-parseInt(_0x12828d(0x1d8))/0x7+parseInt(_0x12828d(0x1d5))/0x8*(parseInt(_0x12828d(0x1c8))/0x9);if(_0x2c1248===_0x24b68b)break;else _0x236ae0['push'](_0x236ae0['shift']());}catch(_0x26b51e){_0x236ae0['push'](_0x236ae0['shift']());}}}(a284_0x55b0,0xbd5b6));const a284_0x36c024=(function(){let _0x10501d=!![];return function(_0x4f3481,_0x48ad81){const _0x2b1ad0=_0x10501d?function(){const _0xf56450=a284_0x29a2;if(_0x48ad81){const _0x494377=_0x48ad81[_0xf56450(0x1c7)](_0x4f3481,arguments);return _0x48ad81=null,_0x494377;}}:function(){};return _0x10501d=![],_0x2b1ad0;};}()),a284_0x3e6041=a284_0x36c024(this,function(){const _0x41b7b5=a284_0x29a2;return a284_0x3e6041[_0x41b7b5(0x1db)]()[_0x41b7b5(0x1cb)](_0x41b7b5(0x1dc))[_0x41b7b5(0x1db)]()[_0x41b7b5(0x1d7)](a284_0x3e6041)[_0x41b7b5(0x1cb)](_0x41b7b5(0x1dc));});function a284_0x29a2(_0x4dcbe5,_0x520da9){const _0x423eff=a284_0x55b0();return a284_0x29a2=function(_0x3e6041,_0x36c024){_0x3e6041=_0x3e6041-0x1c2;let _0x55b02a=_0x423eff[_0x3e6041];return _0x55b02a;},a284_0x29a2(_0x4dcbe5,_0x520da9);}a284_0x3e6041();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x11bdaa){return _0x11bdaa&&_0x11bdaa['__esModule']?_0x11bdaa:{'default':_0x11bdaa};};Object[a284_0xb819eb(0x1d1)](exports,a284_0xb819eb(0x1ca),{'value':!![]}),exports[a284_0xb819eb(0x1d4)]=SendMail;const nodemailer_1=__importDefault(require(a284_0xb819eb(0x1d6))),Setting_1=__importDefault(require('../models/Setting')),companyId=0x1;async function loadSmtpSettings(_0x1a66a6){const _0x4cc37e=a284_0xb819eb,[_0x3c7d73,_0x3a4f0a,_0x1758b5,_0x5241b8]=await Promise[_0x4cc37e(0x1df)]([Setting_1[_0x4cc37e(0x1c2)][_0x4cc37e(0x1cc)]({'where':{'companyId':_0x1a66a6,'key':_0x4cc37e(0x1cd)}}),Setting_1[_0x4cc37e(0x1c2)][_0x4cc37e(0x1cc)]({'where':{'companyId':_0x1a66a6,'key':_0x4cc37e(0x1c5)}}),Setting_1['default'][_0x4cc37e(0x1cc)]({'where':{'companyId':_0x1a66a6,'key':_0x4cc37e(0x1da)}}),Setting_1[_0x4cc37e(0x1c2)][_0x4cc37e(0x1cc)]({'where':{'companyId':_0x1a66a6,'key':'smtpport'}})]);return{'urlSmtp':_0x3c7d73?.['value'],'userSmtp':_0x3a4f0a?.[_0x4cc37e(0x1de)],'passwordSmtp':_0x1758b5?.[_0x4cc37e(0x1de)],'portSmtp':_0x5241b8?.[_0x4cc37e(0x1de)]};}async function SendMail(_0x11bad4){const _0x4055b0=a284_0xb819eb,{urlSmtp:_0x432360,userSmtp:_0x1c9288,passwordSmtp:_0x52b24e,portSmtp:_0x43b3b5}=await loadSmtpSettings(companyId),_0x53031e=nodemailer_1['default'][_0x4055b0(0x1c4)]({'host':_0x432360,'port':Number(_0x43b3b5),'secure':![],'auth':{'user':_0x1c9288,'pass':_0x52b24e}});let _0x2d5701=_0x53031e['sendMail']({'from':_0x1c9288,'to':_0x11bad4['to'],'subject':_0x11bad4[_0x4055b0(0x1d0)],'text':_0x11bad4['text'],'html':_0x11bad4[_0x4055b0(0x1ce)]||_0x11bad4['text']});console[_0x4055b0(0x1c9)](_0x4055b0(0x1d9),_0x2d5701);}