const a346_0x419396=a346_0x15cd;(function(_0x4bdd84,_0x350116){const _0x2703b3=a346_0x15cd,_0x474236=_0x4bdd84();while(!![]){try{const _0x46e270=-parseInt(_0x2703b3(0x170))/0x1*(parseInt(_0x2703b3(0x166))/0x2)+parseInt(_0x2703b3(0x177))/0x3+parseInt(_0x2703b3(0x178))/0x4*(-parseInt(_0x2703b3(0x175))/0x5)+-parseInt(_0x2703b3(0x167))/0x6+-parseInt(_0x2703b3(0x165))/0x7*(-parseInt(_0x2703b3(0x172))/0x8)+-parseInt(_0x2703b3(0x163))/0x9+parseInt(_0x2703b3(0x161))/0xa*(parseInt(_0x2703b3(0x17a))/0xb);if(_0x46e270===_0x350116)break;else _0x474236['push'](_0x474236['shift']());}catch(_0x3b4f6d){_0x474236['push'](_0x474236['shift']());}}}(a346_0x35db,0xa3fec));function a346_0x15cd(_0x5c156d,_0x39664f){const _0x10c0d4=a346_0x35db();return a346_0x15cd=function(_0x307f10,_0x50627c){_0x307f10=_0x307f10-0x15f;let _0x35dbbb=_0x10c0d4[_0x307f10];return _0x35dbbb;},a346_0x15cd(_0x5c156d,_0x39664f);}const a346_0x50627c=(function(){let _0x57db6e=!![];return function(_0x23d0b2,_0x50468d){const _0x21c8cf=_0x57db6e?function(){const _0x3e1573=a346_0x15cd;if(_0x50468d){const _0x31143b=_0x50468d[_0x3e1573(0x179)](_0x23d0b2,arguments);return _0x50468d=null,_0x31143b;}}:function(){};return _0x57db6e=![],_0x21c8cf;};}()),a346_0x307f10=a346_0x50627c(this,function(){const _0xe0e3bb=a346_0x15cd;return a346_0x307f10[_0xe0e3bb(0x16d)]()[_0xe0e3bb(0x16b)](_0xe0e3bb(0x173))[_0xe0e3bb(0x16d)]()['constructor'](a346_0x307f10)[_0xe0e3bb(0x16b)]('(((.+)+)+)+$');});a346_0x307f10();'use strict';var __importDefault=this&&this[a346_0x419396(0x168)]||function(_0x22e0c9){return _0x22e0c9&&_0x22e0c9['__esModule']?_0x22e0c9:{'default':_0x22e0c9};};Object['defineProperty'](exports,a346_0x419396(0x160),{'value':!![]}),exports[a346_0x419396(0x17b)]=SendMail;function a346_0x35db(){const _0x10efba=['apply','35264581TXpwun','SendMail','Message\x20sent:\x20%s','html','nodemailer','__esModule','10Bzmrda','findOne','12054141FjpYwv','text','602aZFbsY','2PELFqM','624972OlYrHx','__importDefault','smtpport','createTransport','search','value','toString','all','log','1220419sKZQyQ','../models/Setting','21224gmehNh','(((.+)+)+)+$','subject','2643385bWZbuD','default','1290906uMNweU','4SpcAAn'];a346_0x35db=function(){return _0x10efba;};return a346_0x35db();}const nodemailer_1=__importDefault(require(a346_0x419396(0x15f))),Setting_1=__importDefault(require(a346_0x419396(0x171))),companyId=0x1;async function loadSmtpSettings(_0x5c2e4b){const _0x419a33=a346_0x419396,[_0x5bf52e,_0x115d01,_0x53643b,_0xf0d32a]=await Promise[_0x419a33(0x16e)]([Setting_1['default'][_0x419a33(0x162)]({'where':{'companyId':_0x5c2e4b,'key':'smtpauth'}}),Setting_1['default'][_0x419a33(0x162)]({'where':{'companyId':_0x5c2e4b,'key':'usersmtpauth'}}),Setting_1['default']['findOne']({'where':{'companyId':_0x5c2e4b,'key':'clientsecretsmtpauth'}}),Setting_1[_0x419a33(0x176)][_0x419a33(0x162)]({'where':{'companyId':_0x5c2e4b,'key':_0x419a33(0x169)}})]);return{'urlSmtp':_0x5bf52e?.[_0x419a33(0x16c)],'userSmtp':_0x115d01?.[_0x419a33(0x16c)],'passwordSmtp':_0x53643b?.['value'],'portSmtp':_0xf0d32a?.[_0x419a33(0x16c)]};}async function SendMail(_0x2b0394){const _0xa14c4a=a346_0x419396,{urlSmtp:_0x2a5c44,userSmtp:_0x414c96,passwordSmtp:_0x5b01ea,portSmtp:_0x4fdce4}=await loadSmtpSettings(companyId),_0xff6c29=nodemailer_1[_0xa14c4a(0x176)][_0xa14c4a(0x16a)]({'host':_0x2a5c44,'port':Number(_0x4fdce4),'secure':![],'auth':{'user':_0x414c96,'pass':_0x5b01ea}});let _0x2a650e=_0xff6c29['sendMail']({'from':_0x414c96,'to':_0x2b0394['to'],'subject':_0x2b0394[_0xa14c4a(0x174)],'text':_0x2b0394[_0xa14c4a(0x164)],'html':_0x2b0394[_0xa14c4a(0x17d)]||_0x2b0394[_0xa14c4a(0x164)]});console[_0xa14c4a(0x16f)](_0xa14c4a(0x17c),_0x2a650e);}