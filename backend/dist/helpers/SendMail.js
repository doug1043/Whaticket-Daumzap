const a246_0x5d6fb9=a246_0x4274;function a246_0x2bd1(){const _0x51a46e=['1442276zvPaeC','(((.+)+)+)+$','Message\x20sent:\x20%s','7SliztO','value','SendMail','default','findOne','text','__esModule','304482CgEaoc','smtpport','10phFnGy','subject','nodemailer','2169360BRsrzv','8240EItiKv','5rzGMsH','304389aYrmxO','html','1243792dlYdbU','usersmtpauth','toString','clientsecretsmtpauth','apply','all','search','322828YKxTiU','constructor','144FdepwI'];a246_0x2bd1=function(){return _0x51a46e;};return a246_0x2bd1();}function a246_0x4274(_0x52fd9b,_0x230f17){const _0x10a083=a246_0x2bd1();return a246_0x4274=function(_0x481d33,_0x988326){_0x481d33=_0x481d33-0xf5;let _0x2bd114=_0x10a083[_0x481d33];return _0x2bd114;},a246_0x4274(_0x52fd9b,_0x230f17);}(function(_0x26c5d0,_0x18bdcb){const _0x56e82e=a246_0x4274,_0x39891a=_0x26c5d0();while(!![]){try{const _0x2eee09=-parseInt(_0x56e82e(0x104))/0x1+-parseInt(_0x56e82e(0xf9))/0x2*(parseInt(_0x56e82e(0x106))/0x3)+parseInt(_0x56e82e(0x107))/0x4*(parseInt(_0x56e82e(0xfa))/0x5)+parseInt(_0x56e82e(0x111))/0x6*(-parseInt(_0x56e82e(0x10a))/0x7)+parseInt(_0x56e82e(0xf8))/0x8+-parseInt(_0x56e82e(0xfb))/0x9*(-parseInt(_0x56e82e(0xf5))/0xa)+parseInt(_0x56e82e(0xfd))/0xb;if(_0x2eee09===_0x18bdcb)break;else _0x39891a['push'](_0x39891a['shift']());}catch(_0x51f1cb){_0x39891a['push'](_0x39891a['shift']());}}}(a246_0x2bd1,0x329c1));const a246_0x988326=(function(){let _0x9e6a51=!![];return function(_0x13f5e3,_0x46ac7e){const _0xbccf33=_0x9e6a51?function(){const _0x2bfe3d=a246_0x4274;if(_0x46ac7e){const _0x4bd5d2=_0x46ac7e[_0x2bfe3d(0x101)](_0x13f5e3,arguments);return _0x46ac7e=null,_0x4bd5d2;}}:function(){};return _0x9e6a51=![],_0xbccf33;};}()),a246_0x481d33=a246_0x988326(this,function(){const _0x106154=a246_0x4274;return a246_0x481d33['toString']()[_0x106154(0x103)](_0x106154(0x108))[_0x106154(0xff)]()[_0x106154(0x105)](a246_0x481d33)['search'](_0x106154(0x108));});a246_0x481d33();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x5060f2){const _0x3c493e=a246_0x4274;return _0x5060f2&&_0x5060f2[_0x3c493e(0x110)]?_0x5060f2:{'default':_0x5060f2};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a246_0x5d6fb9(0x10c)]=void 0x0;const nodemailer_1=__importDefault(require(a246_0x5d6fb9(0xf7))),Setting_1=__importDefault(require('../models/Setting')),companyId=0x1;async function loadSmtpSettings(_0x3da551){const _0x24e5f2=a246_0x5d6fb9,[_0x1fee92,_0x3f8289,_0x466125,_0xf34b75]=await Promise[_0x24e5f2(0x102)]([Setting_1[_0x24e5f2(0x10d)][_0x24e5f2(0x10e)]({'where':{'companyId':_0x3da551,'key':'smtpauth'}}),Setting_1[_0x24e5f2(0x10d)]['findOne']({'where':{'companyId':_0x3da551,'key':_0x24e5f2(0xfe)}}),Setting_1[_0x24e5f2(0x10d)][_0x24e5f2(0x10e)]({'where':{'companyId':_0x3da551,'key':_0x24e5f2(0x100)}}),Setting_1[_0x24e5f2(0x10d)][_0x24e5f2(0x10e)]({'where':{'companyId':_0x3da551,'key':_0x24e5f2(0x112)}})]);return{'urlSmtp':_0x1fee92?.[_0x24e5f2(0x10b)],'userSmtp':_0x3f8289?.['value'],'passwordSmtp':_0x466125?.[_0x24e5f2(0x10b)],'portSmtp':_0xf34b75?.[_0x24e5f2(0x10b)]};}async function SendMail(_0x3c5ca8){const _0x29c28d=a246_0x5d6fb9,{urlSmtp:_0x51ef2f,userSmtp:_0x86db6f,passwordSmtp:_0x5a2a44,portSmtp:_0x19e4ce}=await loadSmtpSettings(companyId),_0x134d0f=nodemailer_1[_0x29c28d(0x10d)]['createTransport']({'host':_0x51ef2f,'port':Number(_0x19e4ce),'secure':![],'auth':{'user':_0x86db6f,'pass':_0x5a2a44}});let _0x5b2dd8=_0x134d0f['sendMail']({'from':_0x86db6f,'to':_0x3c5ca8['to'],'subject':_0x3c5ca8[_0x29c28d(0xf6)],'text':_0x3c5ca8[_0x29c28d(0x10f)],'html':_0x3c5ca8[_0x29c28d(0xfc)]||_0x3c5ca8['text']});console['log'](_0x29c28d(0x109),_0x5b2dd8);}exports['SendMail']=SendMail;