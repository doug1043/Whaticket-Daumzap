const a281_0x3a77ec=a281_0x1971;(function(_0x22c7ef,_0x4b2ab8){const _0x49f425=a281_0x1971,_0x1ecb5a=_0x22c7ef();while(!![]){try{const _0x43a05e=-parseInt(_0x49f425(0x9d))/0x1+-parseInt(_0x49f425(0xb1))/0x2+-parseInt(_0x49f425(0x9c))/0x3*(parseInt(_0x49f425(0xa2))/0x4)+-parseInt(_0x49f425(0xa9))/0x5*(parseInt(_0x49f425(0x9f))/0x6)+parseInt(_0x49f425(0xaa))/0x7*(-parseInt(_0x49f425(0x9e))/0x8)+parseInt(_0x49f425(0xa4))/0x9+-parseInt(_0x49f425(0x9a))/0xa*(-parseInt(_0x49f425(0x98))/0xb);if(_0x43a05e===_0x4b2ab8)break;else _0x1ecb5a['push'](_0x1ecb5a['shift']());}catch(_0x2b0aa1){_0x1ecb5a['push'](_0x1ecb5a['shift']());}}}(a281_0x4e57,0xf0e21));const a281_0x163e80=(function(){let _0x3566c5=!![];return function(_0x2e9b8b,_0x1c8c37){const _0x4fddc4=_0x3566c5?function(){const _0x3854d6=a281_0x1971;if(_0x1c8c37){const _0x3ce11f=_0x1c8c37[_0x3854d6(0xb2)](_0x2e9b8b,arguments);return _0x1c8c37=null,_0x3ce11f;}}:function(){};return _0x3566c5=![],_0x4fddc4;};}()),a281_0x58a98c=a281_0x163e80(this,function(){const _0x52b056=a281_0x1971;return a281_0x58a98c[_0x52b056(0xa0)]()['search'](_0x52b056(0x99))[_0x52b056(0xa0)]()['constructor'](a281_0x58a98c)['search'](_0x52b056(0x99));});a281_0x58a98c();'use strict';var __importDefault=this&&this[a281_0x3a77ec(0x96)]||function(_0x21c262){const _0x1d570b=a281_0x3a77ec;return _0x21c262&&_0x21c262[_0x1d570b(0xa8)]?_0x21c262:{'default':_0x21c262};};function a281_0x4e57(){const _0x176ba6=['clientsecretsmtpauth','smtpport','__esModule','55hCZGil','7aIoAhb','html','../models/Setting','value','Message\x20sent:\x20%s','log','defineProperty','3183928SlAJsF','apply','findOne','__importDefault','smtpauth','22zQTcPI','(((.+)+)+)+$','21436010IChYHW','all','447dVSVxG','447864quCCHN','6240376JATqWe','572136WtvKlQ','toString','subject','20044YkEmKS','text','11833965BJxzNg','default'];a281_0x4e57=function(){return _0x176ba6;};return a281_0x4e57();}Object[a281_0x3a77ec(0xb0)](exports,a281_0x3a77ec(0xa8),{'value':!![]}),exports['SendMail']=SendMail;const nodemailer_1=__importDefault(require('nodemailer')),Setting_1=__importDefault(require(a281_0x3a77ec(0xac))),companyId=0x1;async function loadSmtpSettings(_0x3c8612){const _0x5abc63=a281_0x3a77ec,[_0x16ddc7,_0x26d5b6,_0x429242,_0x3e0496]=await Promise[_0x5abc63(0x9b)]([Setting_1[_0x5abc63(0xa5)][_0x5abc63(0x95)]({'where':{'companyId':_0x3c8612,'key':_0x5abc63(0x97)}}),Setting_1['default'][_0x5abc63(0x95)]({'where':{'companyId':_0x3c8612,'key':'usersmtpauth'}}),Setting_1[_0x5abc63(0xa5)][_0x5abc63(0x95)]({'where':{'companyId':_0x3c8612,'key':_0x5abc63(0xa6)}}),Setting_1[_0x5abc63(0xa5)]['findOne']({'where':{'companyId':_0x3c8612,'key':_0x5abc63(0xa7)}})]);return{'urlSmtp':_0x16ddc7?.['value'],'userSmtp':_0x26d5b6?.[_0x5abc63(0xad)],'passwordSmtp':_0x429242?.['value'],'portSmtp':_0x3e0496?.[_0x5abc63(0xad)]};}function a281_0x1971(_0x7e4fb,_0x5aa2c3){const _0x21b44e=a281_0x4e57();return a281_0x1971=function(_0x58a98c,_0x163e80){_0x58a98c=_0x58a98c-0x95;let _0x4e5739=_0x21b44e[_0x58a98c];return _0x4e5739;},a281_0x1971(_0x7e4fb,_0x5aa2c3);}async function SendMail(_0x2a0afa){const _0x213132=a281_0x3a77ec,{urlSmtp:_0x4e14c2,userSmtp:_0x26c003,passwordSmtp:_0x15d291,portSmtp:_0x140ca1}=await loadSmtpSettings(companyId),_0x119e36=nodemailer_1[_0x213132(0xa5)]['createTransport']({'host':_0x4e14c2,'port':Number(_0x140ca1),'secure':![],'auth':{'user':_0x26c003,'pass':_0x15d291}});let _0xe73ccc=_0x119e36['sendMail']({'from':_0x26c003,'to':_0x2a0afa['to'],'subject':_0x2a0afa[_0x213132(0xa1)],'text':_0x2a0afa['text'],'html':_0x2a0afa[_0x213132(0xab)]||_0x2a0afa[_0x213132(0xa3)]});console[_0x213132(0xaf)](_0x213132(0xae),_0xe73ccc);}