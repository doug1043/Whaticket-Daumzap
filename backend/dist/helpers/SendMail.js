const a347_0x309889=a347_0x5195;(function(_0x4575c0,_0x5c5a1e){const _0x3b73c3=a347_0x5195,_0xaf66db=_0x4575c0();while(!![]){try{const _0x3667aa=parseInt(_0x3b73c3(0x1f5))/0x1*(parseInt(_0x3b73c3(0x1dc))/0x2)+-parseInt(_0x3b73c3(0x1e7))/0x3*(-parseInt(_0x3b73c3(0x1fa))/0x4)+-parseInt(_0x3b73c3(0x1dd))/0x5+-parseInt(_0x3b73c3(0x1f0))/0x6*(-parseInt(_0x3b73c3(0x1fb))/0x7)+-parseInt(_0x3b73c3(0x1e8))/0x8+-parseInt(_0x3b73c3(0x1db))/0x9+-parseInt(_0x3b73c3(0x1ed))/0xa*(-parseInt(_0x3b73c3(0x1ea))/0xb);if(_0x3667aa===_0x5c5a1e)break;else _0xaf66db['push'](_0xaf66db['shift']());}catch(_0x2f20f1){_0xaf66db['push'](_0xaf66db['shift']());}}}(a347_0x456a,0x327e0));const a347_0x5774fb=(function(){let _0x526ba3=!![];return function(_0x4ce9e6,_0x43b3c3){const _0x3561d6=_0x526ba3?function(){const _0x330992=a347_0x5195;if(_0x43b3c3){const _0x45042f=_0x43b3c3[_0x330992(0x1f1)](_0x4ce9e6,arguments);return _0x43b3c3=null,_0x45042f;}}:function(){};return _0x526ba3=![],_0x3561d6;};}()),a347_0x1193b3=a347_0x5774fb(this,function(){const _0x38d748=a347_0x5195;return a347_0x1193b3[_0x38d748(0x1e1)]()[_0x38d748(0x1de)](_0x38d748(0x1fd))[_0x38d748(0x1e1)]()[_0x38d748(0x1fc)](a347_0x1193b3)['search'](_0x38d748(0x1fd));});a347_0x1193b3();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3a76b6){const _0x45ac23=a347_0x5195;return _0x3a76b6&&_0x3a76b6[_0x45ac23(0x1f9)]?_0x3a76b6:{'default':_0x3a76b6};};Object[a347_0x309889(0x1e2)](exports,a347_0x309889(0x1f9),{'value':!![]}),exports[a347_0x309889(0x1e6)]=SendMail;function a347_0x456a(){const _0xaf44c9=['2722689WACPIK','280114FKcaEX','26490pfDgkC','search','createTransport','text','toString','defineProperty','smtpport','usersmtpauth','subject','SendMail','6IQhlRP','3003584BHcAjg','default','3144834wfbuCa','all','clientsecretsmtpauth','10ztQmrH','html','findOne','6zDmvpv','apply','log','smtpauth','value','1CDfeTN','../models/Setting','nodemailer','sendMail','__esModule','339908JqsKOI','2059246dOqzlG','constructor','(((.+)+)+)+$'];a347_0x456a=function(){return _0xaf44c9;};return a347_0x456a();}const nodemailer_1=__importDefault(require(a347_0x309889(0x1f7))),Setting_1=__importDefault(require(a347_0x309889(0x1f6))),companyId=0x1;function a347_0x5195(_0x56e8c9,_0x23f7d2){const _0x32a32d=a347_0x456a();return a347_0x5195=function(_0x1193b3,_0x5774fb){_0x1193b3=_0x1193b3-0x1db;let _0x456a36=_0x32a32d[_0x1193b3];return _0x456a36;},a347_0x5195(_0x56e8c9,_0x23f7d2);}async function loadSmtpSettings(_0x21f7ab){const _0x4334b0=a347_0x309889,[_0x1a0c4d,_0x2f7e92,_0x3e2675,_0x4db929]=await Promise[_0x4334b0(0x1eb)]([Setting_1[_0x4334b0(0x1e9)][_0x4334b0(0x1ef)]({'where':{'companyId':_0x21f7ab,'key':_0x4334b0(0x1f3)}}),Setting_1[_0x4334b0(0x1e9)][_0x4334b0(0x1ef)]({'where':{'companyId':_0x21f7ab,'key':_0x4334b0(0x1e4)}}),Setting_1['default']['findOne']({'where':{'companyId':_0x21f7ab,'key':_0x4334b0(0x1ec)}}),Setting_1[_0x4334b0(0x1e9)]['findOne']({'where':{'companyId':_0x21f7ab,'key':_0x4334b0(0x1e3)}})]);return{'urlSmtp':_0x1a0c4d?.[_0x4334b0(0x1f4)],'userSmtp':_0x2f7e92?.[_0x4334b0(0x1f4)],'passwordSmtp':_0x3e2675?.['value'],'portSmtp':_0x4db929?.[_0x4334b0(0x1f4)]};}async function SendMail(_0x292185){const _0x357cad=a347_0x309889,{urlSmtp:_0x3f881c,userSmtp:_0xcfd5c2,passwordSmtp:_0x22c36b,portSmtp:_0x5bc9b8}=await loadSmtpSettings(companyId),_0x471ae8=nodemailer_1[_0x357cad(0x1e9)][_0x357cad(0x1df)]({'host':_0x3f881c,'port':Number(_0x5bc9b8),'secure':![],'auth':{'user':_0xcfd5c2,'pass':_0x22c36b}});let _0x5e42c=_0x471ae8[_0x357cad(0x1f8)]({'from':_0xcfd5c2,'to':_0x292185['to'],'subject':_0x292185[_0x357cad(0x1e5)],'text':_0x292185[_0x357cad(0x1e0)],'html':_0x292185[_0x357cad(0x1ee)]||_0x292185['text']});console[_0x357cad(0x1f2)]('Message\x20sent:\x20%s',_0x5e42c);}