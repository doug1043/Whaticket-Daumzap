const a280_0x5f4018=a280_0x290d;(function(_0x120a02,_0xe93064){const _0x5087c0=a280_0x290d,_0x2c24cf=_0x120a02();while(!![]){try{const _0x5661f4=-parseInt(_0x5087c0(0xcf))/0x1+-parseInt(_0x5087c0(0xd0))/0x2+parseInt(_0x5087c0(0xdd))/0x3*(-parseInt(_0x5087c0(0xe3))/0x4)+parseInt(_0x5087c0(0xdb))/0x5+-parseInt(_0x5087c0(0xd8))/0x6+parseInt(_0x5087c0(0xec))/0x7*(-parseInt(_0x5087c0(0xe8))/0x8)+parseInt(_0x5087c0(0xd6))/0x9*(parseInt(_0x5087c0(0xe1))/0xa);if(_0x5661f4===_0xe93064)break;else _0x2c24cf['push'](_0x2c24cf['shift']());}catch(_0x2f482e){_0x2c24cf['push'](_0x2c24cf['shift']());}}}(a280_0x520a,0x1fb79));const a280_0x217685=(function(){let _0x39b131=!![];return function(_0x1d8636,_0x2bd06f){const _0x29e9b9=_0x39b131?function(){const _0x3a050d=a280_0x290d;if(_0x2bd06f){const _0x5dc348=_0x2bd06f[_0x3a050d(0xea)](_0x1d8636,arguments);return _0x2bd06f=null,_0x5dc348;}}:function(){};return _0x39b131=![],_0x29e9b9;};}()),a280_0x15c7d5=a280_0x217685(this,function(){const _0x3f73fe=a280_0x290d;return a280_0x15c7d5['toString']()[_0x3f73fe(0xce)](_0x3f73fe(0xd7))[_0x3f73fe(0xd4)]()[_0x3f73fe(0xe2)](a280_0x15c7d5)[_0x3f73fe(0xce)]('(((.+)+)+)+$');});a280_0x15c7d5();'use strict';var __importDefault=this&&this[a280_0x5f4018(0xdf)]||function(_0x4a5e91){return _0x4a5e91&&_0x4a5e91['__esModule']?_0x4a5e91:{'default':_0x4a5e91};};function a280_0x520a(){const _0x48296f=['SendMail','532175YhhGrk','log','259458epBVNB','smtpauth','__importDefault','findOne','150YgoLeZ','constructor','4lJPmnO','sendMail','value','all','default','8yrJozU','createTransport','apply','text','1108751sdsSLf','html','search','172467PMlJhZ','437138BlooKW','smtpport','__esModule','Message\x20sent:\x20%s','toString','nodemailer','406053RljGNz','(((.+)+)+)+$','104172MuEsOg','defineProperty'];a280_0x520a=function(){return _0x48296f;};return a280_0x520a();}function a280_0x290d(_0xdfd834,_0x2813d9){const _0x436d7f=a280_0x520a();return a280_0x290d=function(_0x15c7d5,_0x217685){_0x15c7d5=_0x15c7d5-0xcd;let _0x520ae5=_0x436d7f[_0x15c7d5];return _0x520ae5;},a280_0x290d(_0xdfd834,_0x2813d9);}Object[a280_0x5f4018(0xd9)](exports,a280_0x5f4018(0xd2),{'value':!![]}),exports[a280_0x5f4018(0xda)]=SendMail;const nodemailer_1=__importDefault(require(a280_0x5f4018(0xd5))),Setting_1=__importDefault(require('../models/Setting')),companyId=0x1;async function loadSmtpSettings(_0x1ca7ec){const _0x2a5365=a280_0x5f4018,[_0x376f83,_0x3cb351,_0x176780,_0x111ded]=await Promise[_0x2a5365(0xe6)]([Setting_1[_0x2a5365(0xe7)][_0x2a5365(0xe0)]({'where':{'companyId':_0x1ca7ec,'key':_0x2a5365(0xde)}}),Setting_1[_0x2a5365(0xe7)][_0x2a5365(0xe0)]({'where':{'companyId':_0x1ca7ec,'key':'usersmtpauth'}}),Setting_1[_0x2a5365(0xe7)][_0x2a5365(0xe0)]({'where':{'companyId':_0x1ca7ec,'key':'clientsecretsmtpauth'}}),Setting_1[_0x2a5365(0xe7)][_0x2a5365(0xe0)]({'where':{'companyId':_0x1ca7ec,'key':_0x2a5365(0xd1)}})]);return{'urlSmtp':_0x376f83?.['value'],'userSmtp':_0x3cb351?.[_0x2a5365(0xe5)],'passwordSmtp':_0x176780?.['value'],'portSmtp':_0x111ded?.[_0x2a5365(0xe5)]};}async function SendMail(_0x21d5e2){const _0x36e453=a280_0x5f4018,{urlSmtp:_0xc76f96,userSmtp:_0x6e57e3,passwordSmtp:_0x39e77a,portSmtp:_0x503f70}=await loadSmtpSettings(companyId),_0x46138f=nodemailer_1['default'][_0x36e453(0xe9)]({'host':_0xc76f96,'port':Number(_0x503f70),'secure':![],'auth':{'user':_0x6e57e3,'pass':_0x39e77a}});let _0x5e398f=_0x46138f[_0x36e453(0xe4)]({'from':_0x6e57e3,'to':_0x21d5e2['to'],'subject':_0x21d5e2['subject'],'text':_0x21d5e2[_0x36e453(0xeb)],'html':_0x21d5e2[_0x36e453(0xcd)]||_0x21d5e2['text']});console[_0x36e453(0xdc)](_0x36e453(0xd3),_0x5e398f);}