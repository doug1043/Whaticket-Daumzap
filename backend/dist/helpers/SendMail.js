const a245_0x3fe00f=a245_0x1255;(function(_0x5296f2,_0xdc8b7){const _0x5c2427=a245_0x1255,_0x2c8b8c=_0x5296f2();while(!![]){try{const _0x4c07aa=-parseInt(_0x5c2427(0x17a))/0x1+parseInt(_0x5c2427(0x173))/0x2+parseInt(_0x5c2427(0x181))/0x3+-parseInt(_0x5c2427(0x16f))/0x4*(parseInt(_0x5c2427(0x17b))/0x5)+parseInt(_0x5c2427(0x18a))/0x6*(parseInt(_0x5c2427(0x174))/0x7)+parseInt(_0x5c2427(0x185))/0x8*(parseInt(_0x5c2427(0x177))/0x9)+-parseInt(_0x5c2427(0x16a))/0xa;if(_0x4c07aa===_0xdc8b7)break;else _0x2c8b8c['push'](_0x2c8b8c['shift']());}catch(_0x5a33d5){_0x2c8b8c['push'](_0x2c8b8c['shift']());}}}(a245_0x6fd8,0xf2927));const a245_0x8d4857=(function(){let _0x48df55=!![];return function(_0x11cbd1,_0x10e7da){const _0x45ea68=_0x48df55?function(){const _0x4b73a7=a245_0x1255;if(_0x10e7da){const _0x24127c=_0x10e7da[_0x4b73a7(0x18b)](_0x11cbd1,arguments);return _0x10e7da=null,_0x24127c;}}:function(){};return _0x48df55=![],_0x45ea68;};}()),a245_0x44f6a0=a245_0x8d4857(this,function(){const _0x5b022a=a245_0x1255;return a245_0x44f6a0[_0x5b022a(0x17f)]()['search'](_0x5b022a(0x184))[_0x5b022a(0x17f)]()[_0x5b022a(0x180)](a245_0x44f6a0)[_0x5b022a(0x178)](_0x5b022a(0x184));});function a245_0x1255(_0x1f1855,_0xd8ac18){const _0x4da08f=a245_0x6fd8();return a245_0x1255=function(_0x44f6a0,_0x8d4857){_0x44f6a0=_0x44f6a0-0x16a;let _0x6fd834=_0x4da08f[_0x44f6a0];return _0x6fd834;},a245_0x1255(_0x1f1855,_0xd8ac18);}a245_0x44f6a0();'use strict';var __importDefault=this&&this[a245_0x3fe00f(0x16b)]||function(_0x15ad29){const _0x103f57=a245_0x3fe00f;return _0x15ad29&&_0x15ad29[_0x103f57(0x171)]?_0x15ad29:{'default':_0x15ad29};};Object[a245_0x3fe00f(0x186)](exports,'__esModule',{'value':!![]}),exports[a245_0x3fe00f(0x189)]=void 0x0;function a245_0x6fd8(){const _0x4b3d5b=['text','subject','SendMail','468LpTIsX','apply','3850800QKIQDP','__importDefault','usersmtpauth','findOne','all','2091988jwCMJz','html','__esModule','smtpport','1634828JzvXKg','84063uWkPQI','default','createTransport','9jirMsx','search','clientsecretsmtpauth','1415348hsnpDj','10VviRPE','sendMail','smtpauth','value','toString','constructor','3359928ZYaTii','log','nodemailer','(((.+)+)+)+$','7727240XSUiJT','defineProperty'];a245_0x6fd8=function(){return _0x4b3d5b;};return a245_0x6fd8();}const nodemailer_1=__importDefault(require(a245_0x3fe00f(0x183))),Setting_1=__importDefault(require('../models/Setting')),companyId=0x1;async function loadSmtpSettings(_0x3c128b){const _0x1f9a65=a245_0x3fe00f,[_0x37da79,_0x11c8bc,_0x375806,_0x2c50e4]=await Promise[_0x1f9a65(0x16e)]([Setting_1[_0x1f9a65(0x175)][_0x1f9a65(0x16d)]({'where':{'companyId':_0x3c128b,'key':_0x1f9a65(0x17d)}}),Setting_1['default'][_0x1f9a65(0x16d)]({'where':{'companyId':_0x3c128b,'key':_0x1f9a65(0x16c)}}),Setting_1[_0x1f9a65(0x175)]['findOne']({'where':{'companyId':_0x3c128b,'key':_0x1f9a65(0x179)}}),Setting_1[_0x1f9a65(0x175)][_0x1f9a65(0x16d)]({'where':{'companyId':_0x3c128b,'key':_0x1f9a65(0x172)}})]);return{'urlSmtp':_0x37da79?.[_0x1f9a65(0x17e)],'userSmtp':_0x11c8bc?.[_0x1f9a65(0x17e)],'passwordSmtp':_0x375806?.[_0x1f9a65(0x17e)],'portSmtp':_0x2c50e4?.[_0x1f9a65(0x17e)]};}async function SendMail(_0x2a5a7e){const _0x3ef71e=a245_0x3fe00f,{urlSmtp:_0x30323e,userSmtp:_0x2c3a59,passwordSmtp:_0x356e32,portSmtp:_0x13bf24}=await loadSmtpSettings(companyId),_0x285dcd=nodemailer_1[_0x3ef71e(0x175)][_0x3ef71e(0x176)]({'host':_0x30323e,'port':Number(_0x13bf24),'secure':![],'auth':{'user':_0x2c3a59,'pass':_0x356e32}});let _0x18cd8e=_0x285dcd[_0x3ef71e(0x17c)]({'from':_0x2c3a59,'to':_0x2a5a7e['to'],'subject':_0x2a5a7e[_0x3ef71e(0x188)],'text':_0x2a5a7e[_0x3ef71e(0x187)],'html':_0x2a5a7e[_0x3ef71e(0x170)]||_0x2a5a7e['text']});console[_0x3ef71e(0x182)]('Message\x20sent:\x20%s',_0x18cd8e);}exports[a245_0x3fe00f(0x189)]=SendMail;