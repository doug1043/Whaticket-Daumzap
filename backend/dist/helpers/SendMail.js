function a285_0xfc24(){const _0x45bc21=['text','171sfGOal','SendMail','smtpauth','Message\x20sent:\x20%s','__importDefault','166740LQKUix','apply','(((.+)+)+)+$','search','clientsecretsmtpauth','1985967XzDcrr','smtpport','__esModule','../models/Setting','constructor','createTransport','log','5rgqeES','usersmtpauth','toString','nodemailer','subject','16084zrOjwc','sendMail','findOne','value','default','1446968WBMYex','514152oUfqAa','1713089lFTAOY','3179920YGyigr','defineProperty'];a285_0xfc24=function(){return _0x45bc21;};return a285_0xfc24();}const a285_0x48f687=a285_0x3b81;(function(_0x3ecea9,_0x290faa){const _0x3080bd=a285_0x3b81,_0x166560=_0x3ecea9();while(!![]){try{const _0x4bb4ff=-parseInt(_0x3080bd(0x1b1))/0x1+-parseInt(_0x3080bd(0x1ab))/0x2*(parseInt(_0x3080bd(0x1b6))/0x3)+-parseInt(_0x3080bd(0x1b0))/0x4*(-parseInt(_0x3080bd(0x1c7))/0x5)+parseInt(_0x3080bd(0x1bb))/0x6+parseInt(_0x3080bd(0x1b2))/0x7+parseInt(_0x3080bd(0x1b3))/0x8+parseInt(_0x3080bd(0x1c0))/0x9;if(_0x4bb4ff===_0x290faa)break;else _0x166560['push'](_0x166560['shift']());}catch(_0x2cd0f9){_0x166560['push'](_0x166560['shift']());}}}(a285_0xfc24,0x4453a));const a285_0x20fa7d=(function(){let _0x49233a=!![];return function(_0x3e5d40,_0x33d356){const _0x977a3e=_0x49233a?function(){const _0x5a8a63=a285_0x3b81;if(_0x33d356){const _0x1e9356=_0x33d356[_0x5a8a63(0x1bc)](_0x3e5d40,arguments);return _0x33d356=null,_0x1e9356;}}:function(){};return _0x49233a=![],_0x977a3e;};}()),a285_0x13f635=a285_0x20fa7d(this,function(){const _0x9a386=a285_0x3b81;return a285_0x13f635['toString']()[_0x9a386(0x1be)](_0x9a386(0x1bd))[_0x9a386(0x1a8)]()[_0x9a386(0x1c4)](a285_0x13f635)[_0x9a386(0x1be)](_0x9a386(0x1bd));});a285_0x13f635();'use strict';var __importDefault=this&&this[a285_0x48f687(0x1ba)]||function(_0x24b34b){return _0x24b34b&&_0x24b34b['__esModule']?_0x24b34b:{'default':_0x24b34b};};Object[a285_0x48f687(0x1b4)](exports,a285_0x48f687(0x1c2),{'value':!![]}),exports[a285_0x48f687(0x1b7)]=SendMail;function a285_0x3b81(_0x2ed83b,_0x9e9c47){const _0x42ee6e=a285_0xfc24();return a285_0x3b81=function(_0x13f635,_0x20fa7d){_0x13f635=_0x13f635-0x1a7;let _0xfc24a5=_0x42ee6e[_0x13f635];return _0xfc24a5;},a285_0x3b81(_0x2ed83b,_0x9e9c47);}const nodemailer_1=__importDefault(require(a285_0x48f687(0x1a9))),Setting_1=__importDefault(require(a285_0x48f687(0x1c3))),companyId=0x1;async function loadSmtpSettings(_0x5a44dc){const _0x258de6=a285_0x48f687,[_0x478f20,_0x474642,_0x17ae04,_0x138ee5]=await Promise['all']([Setting_1[_0x258de6(0x1af)][_0x258de6(0x1ad)]({'where':{'companyId':_0x5a44dc,'key':_0x258de6(0x1b8)}}),Setting_1[_0x258de6(0x1af)][_0x258de6(0x1ad)]({'where':{'companyId':_0x5a44dc,'key':_0x258de6(0x1a7)}}),Setting_1[_0x258de6(0x1af)][_0x258de6(0x1ad)]({'where':{'companyId':_0x5a44dc,'key':_0x258de6(0x1bf)}}),Setting_1[_0x258de6(0x1af)]['findOne']({'where':{'companyId':_0x5a44dc,'key':_0x258de6(0x1c1)}})]);return{'urlSmtp':_0x478f20?.[_0x258de6(0x1ae)],'userSmtp':_0x474642?.[_0x258de6(0x1ae)],'passwordSmtp':_0x17ae04?.[_0x258de6(0x1ae)],'portSmtp':_0x138ee5?.[_0x258de6(0x1ae)]};}async function SendMail(_0x2a5708){const _0x2d874a=a285_0x48f687,{urlSmtp:_0x47ebef,userSmtp:_0x160528,passwordSmtp:_0x2b87f1,portSmtp:_0xabf847}=await loadSmtpSettings(companyId),_0x26d822=nodemailer_1[_0x2d874a(0x1af)][_0x2d874a(0x1c5)]({'host':_0x47ebef,'port':Number(_0xabf847),'secure':![],'auth':{'user':_0x160528,'pass':_0x2b87f1}});let _0x34c2e5=_0x26d822[_0x2d874a(0x1ac)]({'from':_0x160528,'to':_0x2a5708['to'],'subject':_0x2a5708[_0x2d874a(0x1aa)],'text':_0x2a5708[_0x2d874a(0x1b5)],'html':_0x2a5708['html']||_0x2a5708[_0x2d874a(0x1b5)]});console[_0x2d874a(0x1c6)](_0x2d874a(0x1b9),_0x34c2e5);}