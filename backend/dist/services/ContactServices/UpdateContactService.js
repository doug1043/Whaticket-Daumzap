const a458_0x410c25=a458_0x4911;(function(_0x3fdbf9,_0x536b30){const _0x1a329e=a458_0x4911,_0x40e0a1=_0x3fdbf9();while(!![]){try{const _0x741153=parseInt(_0x1a329e(0xfb))/0x1+parseInt(_0x1a329e(0x101))/0x2*(parseInt(_0x1a329e(0xf9))/0x3)+parseInt(_0x1a329e(0xef))/0x4+-parseInt(_0x1a329e(0xe7))/0x5+parseInt(_0x1a329e(0x103))/0x6*(parseInt(_0x1a329e(0xfa))/0x7)+parseInt(_0x1a329e(0xf8))/0x8+-parseInt(_0x1a329e(0xe6))/0x9*(parseInt(_0x1a329e(0xff))/0xa);if(_0x741153===_0x536b30)break;else _0x40e0a1['push'](_0x40e0a1['shift']());}catch(_0x3030d7){_0x40e0a1['push'](_0x40e0a1['shift']());}}}(a458_0x4c9f,0x66f5c));const a458_0x51c934=(function(){let _0x1cf8b5=!![];return function(_0x402dad,_0x30976c){const _0x374171=_0x1cf8b5?function(){const _0x17ed66=a458_0x4911;if(_0x30976c){const _0x182f34=_0x30976c[_0x17ed66(0x106)](_0x402dad,arguments);return _0x30976c=null,_0x182f34;}}:function(){};return _0x1cf8b5=![],_0x374171;};}()),a458_0x2bbde3=a458_0x51c934(this,function(){const _0x1e83f2=a458_0x4911;return a458_0x2bbde3[_0x1e83f2(0xf7)]()[_0x1e83f2(0xf6)](_0x1e83f2(0xfd))[_0x1e83f2(0xf7)]()[_0x1e83f2(0x104)](a458_0x2bbde3)[_0x1e83f2(0xf6)](_0x1e83f2(0xfd));});function a458_0x4c9f(){const _0x45f717=['constructor','map','apply','all','name','4638987vWfcHv','2060930URMano','extraInfo','defineProperty','__esModule','number','findOne','update','Não\x20é\x20possível\x20alterar\x20registros\x20de\x20outra\x20empresa','2444164nohKHT','findIndex','default','reload','ERR_NO_CONTACT_FOUND','email','__importDefault','search','toString','3019192KHHjIw','506886xlASPx','1351PcTopZ','356819wwXQFD','profilePicUrl','(((.+)+)+)+$','../../models/Contact','20BBZawY','companyId','4qiTDdz','../../errors/AppError','5646APgBHd'];a458_0x4c9f=function(){return _0x45f717;};return a458_0x4c9f();}a458_0x2bbde3();function a458_0x4911(_0x4dac71,_0x41ee42){const _0x20736b=a458_0x4c9f();return a458_0x4911=function(_0x2bbde3,_0x51c934){_0x2bbde3=_0x2bbde3-0xe5;let _0x4c9f00=_0x20736b[_0x2bbde3];return _0x4c9f00;},a458_0x4911(_0x4dac71,_0x41ee42);}'use strict';var __importDefault=this&&this[a458_0x410c25(0xf5)]||function(_0x386c9d){return _0x386c9d&&_0x386c9d['__esModule']?_0x386c9d:{'default':_0x386c9d};};Object[a458_0x410c25(0xe9)](exports,a458_0x410c25(0xea),{'value':!![]});const AppError_1=__importDefault(require(a458_0x410c25(0x102))),Contact_1=__importDefault(require(a458_0x410c25(0xfe))),ContactCustomField_1=__importDefault(require('../../models/ContactCustomField')),UpdateContactService=async({contactData:_0x3c291f,contactId:_0x3f46f3,companyId:_0x41ab99})=>{const _0x5879ea=a458_0x410c25,{email:_0x39e8da,name:_0x2ba892,number:_0x5a9f63,extraInfo:_0x9a5711,disableBot:_0x4d16b1}=_0x3c291f,_0x4c69d2=await Contact_1[_0x5879ea(0xf1)][_0x5879ea(0xec)]({'where':{'id':_0x3f46f3},'attributes':['id',_0x5879ea(0xe5),_0x5879ea(0xeb),'email',_0x5879ea(0x100),_0x5879ea(0xfc)],'include':[_0x5879ea(0xe8)]});if(_0x4c69d2?.['companyId']!==_0x41ab99)throw new AppError_1['default'](_0x5879ea(0xee));if(!_0x4c69d2)throw new AppError_1[(_0x5879ea(0xf1))](_0x5879ea(0xf3),0x194);return _0x9a5711&&(await Promise[_0x5879ea(0x107)](_0x9a5711[_0x5879ea(0x105)](async _0x13610f=>{const _0x39e4e1=_0x5879ea;await ContactCustomField_1[_0x39e4e1(0xf1)]['upsert']({..._0x13610f,'contactId':_0x4c69d2['id']});})),await Promise['all'](_0x4c69d2[_0x5879ea(0xe8)]['map'](async _0x45aeaa=>{const _0x33ba88=_0x5879ea,_0xce05a3=_0x9a5711[_0x33ba88(0xf0)](_0x216b35=>_0x216b35['id']===_0x45aeaa['id']);_0xce05a3===-0x1&&await ContactCustomField_1[_0x33ba88(0xf1)]['destroy']({'where':{'id':_0x45aeaa['id']}});}))),await _0x4c69d2[_0x5879ea(0xed)]({'name':_0x2ba892,'number':_0x5a9f63,'email':_0x39e8da,'disableBot':_0x4d16b1}),await _0x4c69d2[_0x5879ea(0xf2)]({'attributes':['id','name','number',_0x5879ea(0xf4),'profilePicUrl'],'include':[_0x5879ea(0xe8)]}),_0x4c69d2;};exports[a458_0x410c25(0xf1)]=UpdateContactService;