const a530_0x67822c=a530_0x4652;(function(_0x4a8aaf,_0x1a59dd){const _0x5a0b3c=a530_0x4652,_0x2d919e=_0x4a8aaf();while(!![]){try{const _0x35449e=-parseInt(_0x5a0b3c(0xf2))/0x1+-parseInt(_0x5a0b3c(0x108))/0x2+-parseInt(_0x5a0b3c(0x10d))/0x3*(parseInt(_0x5a0b3c(0x119))/0x4)+parseInt(_0x5a0b3c(0x111))/0x5*(parseInt(_0x5a0b3c(0x10a))/0x6)+-parseInt(_0x5a0b3c(0x11a))/0x7*(parseInt(_0x5a0b3c(0xf3))/0x8)+parseInt(_0x5a0b3c(0xf1))/0x9*(-parseInt(_0x5a0b3c(0x100))/0xa)+parseInt(_0x5a0b3c(0x115))/0xb*(parseInt(_0x5a0b3c(0x113))/0xc);if(_0x35449e===_0x1a59dd)break;else _0x2d919e['push'](_0x2d919e['shift']());}catch(_0x3273fd){_0x2d919e['push'](_0x2d919e['shift']());}}}(a530_0x240f,0x32817));const a530_0xd94183=(function(){let _0x5d57c6=!![];return function(_0xfa388e,_0x2c63c2){const _0x2c0d50=_0x5d57c6?function(){const _0x4e31d2=a530_0x4652;if(_0x2c63c2){const _0x2d3429=_0x2c63c2[_0x4e31d2(0xff)](_0xfa388e,arguments);return _0x2c63c2=null,_0x2d3429;}}:function(){};return _0x5d57c6=![],_0x2c0d50;};}()),a530_0x335489=a530_0xd94183(this,function(){const _0x2730ae=a530_0x4652;return a530_0x335489['toString']()[_0x2730ae(0x10c)](_0x2730ae(0x107))['toString']()[_0x2730ae(0x103)](a530_0x335489)[_0x2730ae(0x10c)](_0x2730ae(0x107));});a530_0x335489();function a530_0x4652(_0xec5c79,_0x34d0be){const _0x295d8b=a530_0x240f();return a530_0x4652=function(_0x335489,_0xd94183){_0x335489=_0x335489-0xf0;let _0x240f82=_0x295d8b[_0x335489];return _0x240f82;},a530_0x4652(_0xec5c79,_0x34d0be);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x5d2779){const _0x331a75=a530_0x4652;return _0x5d2779&&_0x5d2779[_0x331a75(0x101)]?_0x5d2779:{'default':_0x5d2779};};Object['defineProperty'](exports,a530_0x67822c(0x101),{'value':!![]});function a530_0x240f(){const _0x5049e3=['whatsapp','search','1533QfROIF','FRONTEND_URL','env','profilePicUrl','401485kdXADm','error','60JldBSU','replace','1853863PctKGz','push','company-','emit','2316CRLzzG','7gZjTZk','getIO','sequelize','27XYnXeZ','164867TISGZZ','2820088fkCwKa','../../models/Contact','Error\x20creating\x20contact:','log','ASC','remoteJid','\x20(remoteJid:\x20','findOne','/nopicture.png','../../libs/socket','lid','update','apply','10900aGoNeT','__esModule','-mainchannel','constructor','create','name','-contact','(((.+)+)+)+$','120336UhCcpL','default','18dFVsTs'];a530_0x240f=function(){return _0x5049e3;};return a530_0x240f();}const socket_1=require(a530_0x67822c(0xfc)),Contact_1=__importDefault(require(a530_0x67822c(0xf4))),sequelize_1=require(a530_0x67822c(0xf0)),CreateOrUpdateContactService=async({name:_0x111cab,number:_0x2746d9,profilePicUrl:_0x22a5ec,isGroup:_0x43151e,email:email='',companyId:_0x2964ff,extraInfo:extraInfo=[],channel:channel=a530_0x67822c(0x10b),disableBot:disableBot=![],remoteJid:_0x5d7a7d,lid:_0x20cd9a})=>{const _0x45a062=a530_0x67822c,_0x57ecd5=_0x43151e?_0x2746d9:_0x2746d9[_0x45a062(0x114)](/[^0-9]/g,''),_0x190989=(0x0,socket_1[_0x45a062(0x11b)])();let _0x3173f1;if(_0x5d7a7d||_0x22a5ec&&_0x22a5ec!==process[_0x45a062(0x10f)][_0x45a062(0x10e)]+_0x45a062(0xfb)){const _0x47269c=[{'number':_0x57ecd5,'companyId':_0x2964ff}];_0x5d7a7d&&_0x47269c['push']({'remoteJid':_0x5d7a7d,'companyId':_0x2964ff});_0x22a5ec&&_0x22a5ec!==process[_0x45a062(0x10f)][_0x45a062(0x10e)]+_0x45a062(0xfb)&&_0x47269c[_0x45a062(0x116)]({'profilePicUrl':_0x22a5ec,'companyId':_0x2964ff,'isGroup':![]});const _0x34e087=await Contact_1[_0x45a062(0x109)][_0x45a062(0xfa)]({'where':{[sequelize_1['Op']['or']]:_0x47269c},'order':[['createdAt',_0x45a062(0xf7)]]});if(_0x34e087)return console[_0x45a062(0xf6)]('Found\x20existing\x20contact\x20'+_0x34e087['id']+'\x20for\x20number\x20'+_0x57ecd5+_0x45a062(0xf9)+_0x5d7a7d+')'),await _0x34e087[_0x45a062(0xfe)]({'name':_0x111cab||_0x34e087[_0x45a062(0x105)],'number':_0x57ecd5,'profilePicUrl':_0x22a5ec||_0x34e087[_0x45a062(0x110)],'remoteJid':_0x5d7a7d||_0x34e087[_0x45a062(0xf8)],'lid':_0x20cd9a||_0x34e087[_0x45a062(0xfd)]}),_0x190989['to'](_0x45a062(0x117)+_0x2964ff+_0x45a062(0x102))[_0x45a062(0x118)](_0x45a062(0x117)+_0x2964ff+_0x45a062(0x106),{'action':_0x45a062(0xfe),'contact':_0x34e087}),_0x34e087;}try{_0x3173f1=await Contact_1['default']['create']({'name':_0x111cab,'number':_0x57ecd5,'profilePicUrl':_0x22a5ec,'email':email,'isGroup':_0x43151e,'extraInfo':extraInfo,'companyId':_0x2964ff,'channel':channel,'disableBot':disableBot,'remoteJid':_0x5d7a7d,'lid':_0x20cd9a}),_0x190989['to']('company-'+_0x2964ff+_0x45a062(0x102))[_0x45a062(0x118)]('company-'+_0x2964ff+_0x45a062(0x106),{'action':_0x45a062(0x104),'contact':_0x3173f1});}catch(_0x82f966){if(_0x82f966[_0x45a062(0x105)]==='SequelizeUniqueConstraintError')_0x3173f1=await Contact_1[_0x45a062(0x109)][_0x45a062(0xfa)]({'where':{'number':_0x57ecd5,'companyId':_0x2964ff}}),_0x3173f1&&(_0x3173f1[_0x45a062(0xfe)]({'profilePicUrl':_0x22a5ec}),_0x190989['to'](_0x45a062(0x117)+_0x2964ff+_0x45a062(0x102))['emit'](_0x45a062(0x117)+_0x2964ff+_0x45a062(0x106),{'action':_0x45a062(0xfe),'contact':_0x3173f1}));else{console[_0x45a062(0x112)](_0x45a062(0xf5),_0x82f966);throw _0x82f966;}}return _0x3173f1;};exports[a530_0x67822c(0x109)]=CreateOrUpdateContactService;