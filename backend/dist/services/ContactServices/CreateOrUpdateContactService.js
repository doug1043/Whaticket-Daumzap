const a449_0x1a0ac4=a449_0xd623;(function(_0x1554c5,_0x344bc4){const _0x23f622=a449_0xd623,_0x54bdae=_0x1554c5();while(!![]){try{const _0x164a74=-parseInt(_0x23f622(0x18f))/0x1+-parseInt(_0x23f622(0x170))/0x2*(parseInt(_0x23f622(0x193))/0x3)+parseInt(_0x23f622(0x197))/0x4+parseInt(_0x23f622(0x18c))/0x5*(parseInt(_0x23f622(0x171))/0x6)+-parseInt(_0x23f622(0x18d))/0x7*(parseInt(_0x23f622(0x17d))/0x8)+parseInt(_0x23f622(0x172))/0x9+parseInt(_0x23f622(0x173))/0xa;if(_0x164a74===_0x344bc4)break;else _0x54bdae['push'](_0x54bdae['shift']());}catch(_0x5c4966){_0x54bdae['push'](_0x54bdae['shift']());}}}(a449_0x420b,0x26077));const a449_0x2ace83=(function(){let _0x481190=!![];return function(_0x281868,_0x239d0){const _0x34059f=_0x481190?function(){const _0x19a0fe=a449_0xd623;if(_0x239d0){const _0x148413=_0x239d0[_0x19a0fe(0x18a)](_0x281868,arguments);return _0x239d0=null,_0x148413;}}:function(){};return _0x481190=![],_0x34059f;};}()),a449_0xaf921b=a449_0x2ace83(this,function(){const _0x37ba1a=a449_0xd623;return a449_0xaf921b[_0x37ba1a(0x175)]()['search'](_0x37ba1a(0x17b))[_0x37ba1a(0x175)]()[_0x37ba1a(0x183)](a449_0xaf921b)[_0x37ba1a(0x179)](_0x37ba1a(0x17b));});a449_0xaf921b();'use strict';function a449_0xd623(_0x10462a,_0x4c65d0){const _0x4c60ce=a449_0x420b();return a449_0xd623=function(_0xaf921b,_0x2ace83){_0xaf921b=_0xaf921b-0x16f;let _0x420bb8=_0x4c60ce[_0xaf921b];return _0x420bb8;},a449_0xd623(_0x10462a,_0x4c65d0);}var __importDefault=this&&this[a449_0x1a0ac4(0x182)]||function(_0x3bf548){return _0x3bf548&&_0x3bf548['__esModule']?_0x3bf548:{'default':_0x3bf548};};Object[a449_0x1a0ac4(0x178)](exports,a449_0x1a0ac4(0x196),{'value':!![]});const socket_1=require(a449_0x1a0ac4(0x198)),Contact_1=__importDefault(require('../../models/Contact')),sequelize_1=require('sequelize'),CreateOrUpdateContactService=async({name:_0x31a6a9,number:_0x14e4af,profilePicUrl:_0x3d0c78,isGroup:_0x1ad2b7,email:email='',companyId:_0xfc18bd,extraInfo:extraInfo=[],channel:channel=a449_0x1a0ac4(0x17c),disableBot:disableBot=![],remoteJid:_0x4ae4ee,lid:_0x3d8381})=>{const _0x2a0b39=a449_0x1a0ac4,_0x3863d2=_0x1ad2b7?_0x14e4af:_0x14e4af[_0x2a0b39(0x17f)](/[^0-9]/g,''),_0x8fff10=(0x0,socket_1[_0x2a0b39(0x190)])();let _0x5aa808;if(_0x4ae4ee||_0x3d0c78&&_0x3d0c78!==process['env'][_0x2a0b39(0x192)]+_0x2a0b39(0x187)){const _0x3c3794=[{'number':_0x3863d2,'companyId':_0xfc18bd}];_0x4ae4ee&&_0x3c3794[_0x2a0b39(0x181)]({'remoteJid':_0x4ae4ee,'companyId':_0xfc18bd});_0x3d0c78&&_0x3d0c78!==process[_0x2a0b39(0x189)][_0x2a0b39(0x192)]+_0x2a0b39(0x187)&&_0x3c3794[_0x2a0b39(0x181)]({'profilePicUrl':_0x3d0c78,'companyId':_0xfc18bd,'isGroup':![]});const _0x131f03=await Contact_1['default']['findOne']({'where':{[sequelize_1['Op']['or']]:_0x3c3794},'order':[[_0x2a0b39(0x18e),'ASC']]});if(_0x131f03)return console[_0x2a0b39(0x184)]('Found\x20existing\x20contact\x20'+_0x131f03['id']+_0x2a0b39(0x177)+_0x3863d2+'\x20(remoteJid:\x20'+_0x4ae4ee+')'),await _0x131f03['update']({'name':_0x31a6a9||_0x131f03['name'],'number':_0x3863d2,'profilePicUrl':_0x3d0c78||_0x131f03[_0x2a0b39(0x18b)],'remoteJid':_0x4ae4ee||_0x131f03[_0x2a0b39(0x17a)],'lid':_0x3d8381||_0x131f03['lid']}),_0x8fff10['to'](_0x2a0b39(0x180)+_0xfc18bd+_0x2a0b39(0x194))[_0x2a0b39(0x16f)](_0x2a0b39(0x180)+_0xfc18bd+_0x2a0b39(0x188),{'action':'update','contact':_0x131f03}),_0x131f03;}try{_0x5aa808=await Contact_1[_0x2a0b39(0x195)]['create']({'name':_0x31a6a9,'number':_0x3863d2,'profilePicUrl':_0x3d0c78,'email':email,'isGroup':_0x1ad2b7,'extraInfo':extraInfo,'companyId':_0xfc18bd,'channel':channel,'disableBot':disableBot,'remoteJid':_0x4ae4ee,'lid':_0x3d8381}),_0x8fff10['to'](_0x2a0b39(0x180)+_0xfc18bd+_0x2a0b39(0x194))[_0x2a0b39(0x16f)](_0x2a0b39(0x180)+_0xfc18bd+_0x2a0b39(0x188),{'action':_0x2a0b39(0x186),'contact':_0x5aa808});}catch(_0xa1da34){if(_0xa1da34[_0x2a0b39(0x176)]===_0x2a0b39(0x185))_0x5aa808=await Contact_1[_0x2a0b39(0x195)][_0x2a0b39(0x17e)]({'where':{'number':_0x3863d2,'companyId':_0xfc18bd}}),_0x5aa808&&(_0x5aa808[_0x2a0b39(0x174)]({'profilePicUrl':_0x3d0c78}),_0x8fff10['to'](_0x2a0b39(0x180)+_0xfc18bd+_0x2a0b39(0x194))['emit'](_0x2a0b39(0x180)+_0xfc18bd+'-contact',{'action':_0x2a0b39(0x174),'contact':_0x5aa808}));else{console['error'](_0x2a0b39(0x191),_0xa1da34);throw _0xa1da34;}}return _0x5aa808;};exports['default']=CreateOrUpdateContactService;function a449_0x420b(){const _0x57517a=['-contact','env','apply','profilePicUrl','5Rqgrjk','84dgyobM','createdAt','209869NdXqhm','getIO','Error\x20creating\x20contact:','FRONTEND_URL','3DwQlar','-mainchannel','default','__esModule','757920vtxGhQ','../../libs/socket','emit','335004temqtv','719976vAEwxc','157230dzYyVk','3497480BXVjzw','update','toString','name','\x20for\x20number\x20','defineProperty','search','remoteJid','(((.+)+)+)+$','whatsapp','95704EmxlZS','findOne','replace','company-','push','__importDefault','constructor','log','SequelizeUniqueConstraintError','create','/nopicture.png'];a449_0x420b=function(){return _0x57517a;};return a449_0x420b();}