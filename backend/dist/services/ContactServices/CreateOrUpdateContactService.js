const a450_0x16c8f9=a450_0x4610;function a450_0x36ec(){const _0x8ec657=['emit','log','sequelize','env','company-','default','push','-contact','2505844FihtYx','FRONTEND_URL','remoteJid','constructor','ASC','replace','getIO','1616013xxEFtn','create','4229110Rbenvc','3NXMSjp','toString','defineProperty','(((.+)+)+)+$','Found\x20existing\x20contact\x20','2OfFQrH','../../models/Contact','search','\x20(remoteJid:\x20','2271780HkYLgO','-mainchannel','/nopicture.png','name','7784465KnmNuX','SequelizeUniqueConstraintError','Error\x20creating\x20contact:','error','createdAt','18ecPGaF','../../libs/socket','4187944RVgDdY','update','1348282QfxXrm'];a450_0x36ec=function(){return _0x8ec657;};return a450_0x36ec();}(function(_0x4fd305,_0x459696){const _0x4a004f=a450_0x4610,_0x39d391=_0x4fd305();while(!![]){try{const _0x1b8676=parseInt(_0x4a004f(0x185))/0x1*(-parseInt(_0x4a004f(0x16d))/0x2)+-parseInt(_0x4a004f(0x180))/0x3*(parseInt(_0x4a004f(0x176))/0x4)+parseInt(_0x4a004f(0x164))/0x5+parseInt(_0x4a004f(0x189))/0x6+parseInt(_0x4a004f(0x17d))/0x7+parseInt(_0x4a004f(0x16b))/0x8*(parseInt(_0x4a004f(0x169))/0x9)+-parseInt(_0x4a004f(0x17f))/0xa;if(_0x1b8676===_0x459696)break;else _0x39d391['push'](_0x39d391['shift']());}catch(_0x324830){_0x39d391['push'](_0x39d391['shift']());}}}(a450_0x36ec,0xc7262));const a450_0x31e8e6=(function(){let _0xc90b7d=!![];return function(_0x27a7c9,_0x2575c6){const _0x59aa9d=_0xc90b7d?function(){if(_0x2575c6){const _0xa7a93f=_0x2575c6['apply'](_0x27a7c9,arguments);return _0x2575c6=null,_0xa7a93f;}}:function(){};return _0xc90b7d=![],_0x59aa9d;};}()),a450_0x168b47=a450_0x31e8e6(this,function(){const _0x50cc71=a450_0x4610;return a450_0x168b47['toString']()[_0x50cc71(0x187)](_0x50cc71(0x183))[_0x50cc71(0x181)]()[_0x50cc71(0x179)](a450_0x168b47)[_0x50cc71(0x187)](_0x50cc71(0x183));});a450_0x168b47();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x495a1b){return _0x495a1b&&_0x495a1b['__esModule']?_0x495a1b:{'default':_0x495a1b};};Object[a450_0x16c8f9(0x182)](exports,'__esModule',{'value':!![]});function a450_0x4610(_0x2ea6c1,_0x8cc560){const _0x60dfcb=a450_0x36ec();return a450_0x4610=function(_0x168b47,_0x31e8e6){_0x168b47=_0x168b47-0x164;let _0x36ec88=_0x60dfcb[_0x168b47];return _0x36ec88;},a450_0x4610(_0x2ea6c1,_0x8cc560);}const socket_1=require(a450_0x16c8f9(0x16a)),Contact_1=__importDefault(require(a450_0x16c8f9(0x186))),sequelize_1=require(a450_0x16c8f9(0x170)),CreateOrUpdateContactService=async({name:_0x15a73e,number:_0x2a088a,profilePicUrl:_0x3d620e,isGroup:_0x584412,email:email='',companyId:_0x290064,extraInfo:extraInfo=[],channel:channel='whatsapp',disableBot:disableBot=![],remoteJid:_0x153848,lid:_0x5a4847})=>{const _0x5dace1=a450_0x16c8f9,_0x36060b=_0x584412?_0x2a088a:_0x2a088a[_0x5dace1(0x17b)](/[^0-9]/g,''),_0x3583a5=(0x0,socket_1[_0x5dace1(0x17c)])();let _0x1fac46;if(_0x153848||_0x3d620e&&_0x3d620e!==process[_0x5dace1(0x171)][_0x5dace1(0x177)]+_0x5dace1(0x18b)){const _0x19326e=[{'number':_0x36060b,'companyId':_0x290064}];_0x153848&&_0x19326e['push']({'remoteJid':_0x153848,'companyId':_0x290064});_0x3d620e&&_0x3d620e!==process[_0x5dace1(0x171)]['FRONTEND_URL']+_0x5dace1(0x18b)&&_0x19326e[_0x5dace1(0x174)]({'profilePicUrl':_0x3d620e,'companyId':_0x290064,'isGroup':![]});const _0x12fc92=await Contact_1[_0x5dace1(0x173)]['findOne']({'where':{[sequelize_1['Op']['or']]:_0x19326e},'order':[[_0x5dace1(0x168),_0x5dace1(0x17a)]]});if(_0x12fc92)return console[_0x5dace1(0x16f)](_0x5dace1(0x184)+_0x12fc92['id']+'\x20for\x20number\x20'+_0x36060b+_0x5dace1(0x188)+_0x153848+')'),await _0x12fc92[_0x5dace1(0x16c)]({'name':_0x15a73e||_0x12fc92[_0x5dace1(0x18c)],'number':_0x36060b,'profilePicUrl':_0x3d620e||_0x12fc92['profilePicUrl'],'remoteJid':_0x153848||_0x12fc92[_0x5dace1(0x178)],'lid':_0x5a4847||_0x12fc92['lid']}),_0x3583a5['to'](_0x5dace1(0x172)+_0x290064+'-mainchannel')[_0x5dace1(0x16e)](_0x5dace1(0x172)+_0x290064+_0x5dace1(0x175),{'action':'update','contact':_0x12fc92}),_0x12fc92;}try{_0x1fac46=await Contact_1[_0x5dace1(0x173)][_0x5dace1(0x17e)]({'name':_0x15a73e,'number':_0x36060b,'profilePicUrl':_0x3d620e,'email':email,'isGroup':_0x584412,'extraInfo':extraInfo,'companyId':_0x290064,'channel':channel,'disableBot':disableBot,'remoteJid':_0x153848,'lid':_0x5a4847}),_0x3583a5['to']('company-'+_0x290064+_0x5dace1(0x18a))[_0x5dace1(0x16e)](_0x5dace1(0x172)+_0x290064+'-contact',{'action':'create','contact':_0x1fac46});}catch(_0x45130e){if(_0x45130e[_0x5dace1(0x18c)]===_0x5dace1(0x165))_0x1fac46=await Contact_1[_0x5dace1(0x173)]['findOne']({'where':{'number':_0x36060b,'companyId':_0x290064}}),_0x1fac46&&(_0x1fac46[_0x5dace1(0x16c)]({'profilePicUrl':_0x3d620e}),_0x3583a5['to']('company-'+_0x290064+_0x5dace1(0x18a))[_0x5dace1(0x16e)]('company-'+_0x290064+_0x5dace1(0x175),{'action':_0x5dace1(0x16c),'contact':_0x1fac46}));else{console[_0x5dace1(0x167)](_0x5dace1(0x166),_0x45130e);throw _0x45130e;}}return _0x1fac46;};exports[a450_0x16c8f9(0x173)]=CreateOrUpdateContactService;