function a413_0x1791(_0x1715fd,_0x4e8400){const _0x1dc210=a413_0x3b18();return a413_0x1791=function(_0x61e3d6,_0x1e8ded){_0x61e3d6=_0x61e3d6-0x159;let _0x3b18f5=_0x1dc210[_0x61e3d6];return _0x3b18f5;},a413_0x1791(_0x1715fd,_0x4e8400);}const a413_0x53ae92=a413_0x1791;(function(_0x51c4e5,_0x4ba23c){const _0x1ca338=a413_0x1791,_0x51fe6e=_0x51c4e5();while(!![]){try{const _0x3dd361=parseInt(_0x1ca338(0x171))/0x1+parseInt(_0x1ca338(0x170))/0x2*(parseInt(_0x1ca338(0x181))/0x3)+-parseInt(_0x1ca338(0x15a))/0x4*(-parseInt(_0x1ca338(0x16e))/0x5)+-parseInt(_0x1ca338(0x166))/0x6*(parseInt(_0x1ca338(0x174))/0x7)+-parseInt(_0x1ca338(0x15b))/0x8+parseInt(_0x1ca338(0x161))/0x9+-parseInt(_0x1ca338(0x16b))/0xa;if(_0x3dd361===_0x4ba23c)break;else _0x51fe6e['push'](_0x51fe6e['shift']());}catch(_0x22cd40){_0x51fe6e['push'](_0x51fe6e['shift']());}}}(a413_0x3b18,0xc894c));const a413_0x1e8ded=(function(){let _0x516225=!![];return function(_0x53d887,_0x325cec){const _0x58f9f3=_0x516225?function(){const _0x2deee2=a413_0x1791;if(_0x325cec){const _0x5d52dc=_0x325cec[_0x2deee2(0x15f)](_0x53d887,arguments);return _0x325cec=null,_0x5d52dc;}}:function(){};return _0x516225=![],_0x58f9f3;};}()),a413_0x61e3d6=a413_0x1e8ded(this,function(){const _0x1181bd=a413_0x1791;return a413_0x61e3d6[_0x1181bd(0x16a)]()[_0x1181bd(0x167)](_0x1181bd(0x15e))[_0x1181bd(0x16a)]()['constructor'](a413_0x61e3d6)[_0x1181bd(0x167)](_0x1181bd(0x15e));});a413_0x61e3d6();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3bf718){const _0x547c62=a413_0x1791;return _0x3bf718&&_0x3bf718[_0x547c62(0x17a)]?_0x3bf718:{'default':_0x3bf718};};Object[a413_0x53ae92(0x160)](exports,'__esModule',{'value':!![]});const socket_1=require(a413_0x53ae92(0x163)),Contact_1=__importDefault(require(a413_0x53ae92(0x16f))),lodash_1=require(a413_0x53ae92(0x165)),GetProfilePicUrl_1=__importDefault(require(a413_0x53ae92(0x164))),CreateOrUpdateContactService=async({name:_0x13ef8f,number:_0xedc2e7,remoteJid:_0x4fa11a,isGroup:_0x5ea9f4,email:email='',companyId:_0x3a8532,extraInfo:extraInfo=[],disableBot:disableBot=![],whatsappId:_0x273167},_0x2c9a06,_0x11b39c)=>{const _0x578161=a413_0x53ae92,_0x2bdcdb=_0x5ea9f4?_0xedc2e7:_0xedc2e7[_0x578161(0x175)](/[^0-9]/g,''),_0x56eb92=(0x0,socket_1['getIO'])();let _0x208c67;_0x208c67=await Contact_1[_0x578161(0x169)][_0x578161(0x178)]({'where':{'number':_0x2bdcdb,'companyId':_0x3a8532}});if(_0x208c67){if(_0x13ef8f&&(!_0x208c67['name']||_0x208c67['name'][_0x578161(0x15d)](/^[0-9]*$/))&&!_0x13ef8f['match'](/^[0-9]*$/)){_0x208c67['changed'](_0x578161(0x17d),!![]),_0x208c67['changed'](_0x578161(0x180),!![]);let _0x3454f9;try{_0x3454f9=await(0x0,GetProfilePicUrl_1[_0x578161(0x169)])(_0xedc2e7,_0x3a8532);}catch(_0x419f64){console[_0x578161(0x183)](_0x578161(0x173)+_0x419f64);}_0x3454f9?.[_0x578161(0x159)]('nopicture.png')&&(_0x3454f9=_0x208c67[_0x578161(0x15c)]),_0x208c67[_0x578161(0x17b)]({'name':_0x13ef8f,'profilePicUrl':_0x3454f9});}const _0x2c4c92=new Date(_0x208c67[_0x578161(0x180)]),_0x5a1508=new Date(),_0x3692c0=_0x5a1508['getTime']()-_0x2c4c92[_0x578161(0x172)](),_0x499a71=Math[_0x578161(0x177)](_0x3692c0/(0x3e8*0xe10*0x18));if(_0x499a71>=0x3){let _0x5c51fa;try{_0x5c51fa=await(0x0,GetProfilePicUrl_1[_0x578161(0x169)])(_0xedc2e7,_0x3a8532);}catch(_0x8b2719){console[_0x578161(0x183)]('Error\x20getting\x20profile\x20picture:\x20'+_0x8b2719);}_0x208c67[_0x578161(0x17c)](_0x578161(0x180),!![]),!_0x5c51fa?.[_0x578161(0x159)](_0x578161(0x17f))?_0x208c67[_0x578161(0x17b)]({'profilePicUrl':_0x5c51fa,'updatedAt':new Date()}):_0x208c67['update']({'updatedAt':new Date()});}(0x0,lodash_1[_0x578161(0x16c)])(_0x208c67[_0x578161(0x162)]===null)&&_0x208c67[_0x578161(0x17b)]({'whatsappId':_0x273167}),_0x56eb92['to'](_0x578161(0x182)+_0x3a8532+'-mainchannel')['emit'](_0x578161(0x182)+_0x3a8532+_0x578161(0x184),{'action':_0x578161(0x17b),'contact':_0x208c67});}else{let _0xf4413d;try{_0xf4413d=await(0x0,GetProfilePicUrl_1[_0x578161(0x169)])(_0xedc2e7,_0x3a8532);}catch(_0x5bd2dc){_0xf4413d=process['env'][_0x578161(0x16d)]+_0x578161(0x168);}_0x208c67=await Contact_1[_0x578161(0x169)][_0x578161(0x176)]({'name':_0x13ef8f,'number':_0x2bdcdb,'profilePicUrl':_0xf4413d,'email':email,'isGroup':_0x5ea9f4,'extraInfo':extraInfo,'companyId':_0x3a8532,'disableBot':disableBot,'whatsappId':_0x273167}),_0x56eb92['to'](_0x578161(0x182)+_0x3a8532+_0x578161(0x179))[_0x578161(0x17e)](_0x578161(0x182)+_0x3a8532+_0x578161(0x184),{'action':_0x578161(0x176),'contact':_0x208c67});}return _0x208c67;};function a413_0x3b18(){const _0x5d3fea=['defineProperty','10516824xCRKzY','whatsappId','../../libs/socket','../WbotServices/GetProfilePicUrl','lodash','6249714HbJCjv','search','/nopicture.png','default','toString','21051860wqcLNL','isNil','FRONTEND_URL','5CqgnDF','../../models/Contact','6trcLnl','915851AqERSU','getTime','Error\x20getting\x20profile\x20picture\x202:\x20','7HbxoQe','replace','create','ceil','findOne','-mainchannel','__esModule','update','changed','name','emit','nopicture.png','updatedAt','1155003LBxssg','company-','log','-contact','endsWith','6113260RNdOPT','6394560fJbgZD','profilePicUrl','match','(((.+)+)+)+$','apply'];a413_0x3b18=function(){return _0x5d3fea;};return a413_0x3b18();}exports[a413_0x53ae92(0x169)]=CreateOrUpdateContactService;