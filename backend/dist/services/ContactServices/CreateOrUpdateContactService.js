function a415_0x503c(_0x209724,_0x2350a1){const _0x18a3fe=a415_0x3d7c();return a415_0x503c=function(_0x3cc73f,_0x5c6d8b){_0x3cc73f=_0x3cc73f-0x70;let _0x3d7c5d=_0x18a3fe[_0x3cc73f];return _0x3d7c5d;},a415_0x503c(_0x209724,_0x2350a1);}const a415_0x2c9123=a415_0x503c;(function(_0x700591,_0x30276d){const _0x5ae722=a415_0x503c,_0x4d510d=_0x700591();while(!![]){try{const _0x2d537c=parseInt(_0x5ae722(0x74))/0x1+-parseInt(_0x5ae722(0x88))/0x2+-parseInt(_0x5ae722(0x7d))/0x3+parseInt(_0x5ae722(0x90))/0x4*(parseInt(_0x5ae722(0x93))/0x5)+parseInt(_0x5ae722(0x97))/0x6*(-parseInt(_0x5ae722(0x79))/0x7)+parseInt(_0x5ae722(0x85))/0x8+parseInt(_0x5ae722(0x8a))/0x9;if(_0x2d537c===_0x30276d)break;else _0x4d510d['push'](_0x4d510d['shift']());}catch(_0x3f350b){_0x4d510d['push'](_0x4d510d['shift']());}}}(a415_0x3d7c,0x187fe));const a415_0x5c6d8b=(function(){let _0x51aac0=!![];return function(_0xc28669,_0xf299ef){const _0x2af9ac=_0x51aac0?function(){const _0x5cff2f=a415_0x503c;if(_0xf299ef){const _0x5529e8=_0xf299ef[_0x5cff2f(0x70)](_0xc28669,arguments);return _0xf299ef=null,_0x5529e8;}}:function(){};return _0x51aac0=![],_0x2af9ac;};}()),a415_0x3cc73f=a415_0x5c6d8b(this,function(){const _0x6c1cbe=a415_0x503c;return a415_0x3cc73f[_0x6c1cbe(0x91)]()['search'](_0x6c1cbe(0x83))[_0x6c1cbe(0x91)]()['constructor'](a415_0x3cc73f)[_0x6c1cbe(0x80)](_0x6c1cbe(0x83));});function a415_0x3d7c(){const _0x492d88=['44780GASBkq','toString','getTime','15YMunvz','changed','__esModule','../../models/Contact','6QYEXaB','getIO','updatedAt','-contact','env','Error\x20getting\x20profile\x20picture:\x20','apply','default','../WbotServices/GetProfilePicUrl','__importDefault','148501BFaBhl','Error\x20getting\x20profile\x20picture\x202:\x20','FRONTEND_URL','log','replace','181769cwSqDu','company-','profilePicUrl','create','598926YiYXnk','../../libs/socket','nopicture.png','search','emit','match','(((.+)+)+)+$','update','1481856loHtiy','-mainchannel','whatsappId','370770SegpyZ','lodash','1296234KMDTWE','findOne','endsWith','isNil','defineProperty','name'];a415_0x3d7c=function(){return _0x492d88;};return a415_0x3d7c();}a415_0x3cc73f();'use strict';var __importDefault=this&&this[a415_0x2c9123(0x73)]||function(_0x5697e6){const _0x103d94=a415_0x2c9123;return _0x5697e6&&_0x5697e6[_0x103d94(0x95)]?_0x5697e6:{'default':_0x5697e6};};Object[a415_0x2c9123(0x8e)](exports,a415_0x2c9123(0x95),{'value':!![]});const socket_1=require(a415_0x2c9123(0x7e)),Contact_1=__importDefault(require(a415_0x2c9123(0x96))),lodash_1=require(a415_0x2c9123(0x89)),GetProfilePicUrl_1=__importDefault(require(a415_0x2c9123(0x72))),CreateOrUpdateContactService=async({name:_0x249b72,number:_0x154cb5,remoteJid:_0x5cb807,isGroup:_0x3c2b26,email:email='',companyId:_0x5999d2,extraInfo:extraInfo=[],disableBot:disableBot=![],whatsappId:_0x4b7810},_0x11eac7,_0x3d9d9a)=>{const _0xee51c7=a415_0x2c9123,_0x19496e=_0x3c2b26?_0x154cb5:_0x154cb5[_0xee51c7(0x78)](/[^0-9]/g,''),_0x359d86=(0x0,socket_1[_0xee51c7(0x98)])();let _0x5a9955;_0x5a9955=await Contact_1[_0xee51c7(0x71)][_0xee51c7(0x8b)]({'where':{'number':_0x19496e,'companyId':_0x5999d2}});if(_0x5a9955){if(_0x249b72&&(!_0x5a9955[_0xee51c7(0x8f)]||_0x5a9955[_0xee51c7(0x8f)]['match'](/^[0-9]*$/))&&!_0x249b72[_0xee51c7(0x82)](/^[0-9]*$/)){_0x5a9955['changed']('name',!![]),_0x5a9955['changed'](_0xee51c7(0x99),!![]);let _0x12875a;try{_0x12875a=await(0x0,GetProfilePicUrl_1[_0xee51c7(0x71)])(_0x154cb5,_0x5999d2);}catch(_0x41ddbe){console[_0xee51c7(0x77)](_0xee51c7(0x75)+_0x41ddbe);}_0x12875a?.[_0xee51c7(0x8c)](_0xee51c7(0x7f))&&(_0x12875a=_0x5a9955[_0xee51c7(0x7b)]),_0x5a9955[_0xee51c7(0x84)]({'name':_0x249b72,'profilePicUrl':_0x12875a});}const _0x42940e=new Date(_0x5a9955['updatedAt']),_0x1ec2df=new Date(),_0x455faa=_0x1ec2df[_0xee51c7(0x92)]()-_0x42940e[_0xee51c7(0x92)](),_0x21382b=Math['ceil'](_0x455faa/(0x3e8*0xe10*0x18));if(_0x21382b>=0x3){let _0x5e6030;try{_0x5e6030=await(0x0,GetProfilePicUrl_1[_0xee51c7(0x71)])(_0x154cb5,_0x5999d2);}catch(_0x1b2b65){console[_0xee51c7(0x77)](_0xee51c7(0x9c)+_0x1b2b65);}_0x5a9955[_0xee51c7(0x94)](_0xee51c7(0x99),!![]),!_0x5e6030?.[_0xee51c7(0x8c)](_0xee51c7(0x7f))?_0x5a9955[_0xee51c7(0x84)]({'profilePicUrl':_0x5e6030,'updatedAt':new Date()}):_0x5a9955['update']({'updatedAt':new Date()});}(0x0,lodash_1[_0xee51c7(0x8d)])(_0x5a9955[_0xee51c7(0x87)]===null)&&_0x5a9955[_0xee51c7(0x84)]({'whatsappId':_0x4b7810}),_0x359d86['to']('company-'+_0x5999d2+_0xee51c7(0x86))[_0xee51c7(0x81)](_0xee51c7(0x7a)+_0x5999d2+_0xee51c7(0x9a),{'action':_0xee51c7(0x84),'contact':_0x5a9955});}else{let _0x3f9cce;try{_0x3f9cce=await(0x0,GetProfilePicUrl_1[_0xee51c7(0x71)])(_0x154cb5,_0x5999d2);}catch(_0x3f276d){_0x3f9cce=process[_0xee51c7(0x9b)][_0xee51c7(0x76)]+'/nopicture.png';}_0x5a9955=await Contact_1['default'][_0xee51c7(0x7c)]({'name':_0x249b72,'number':_0x19496e,'profilePicUrl':_0x3f9cce,'email':email,'isGroup':_0x3c2b26,'extraInfo':extraInfo,'companyId':_0x5999d2,'disableBot':disableBot,'whatsappId':_0x4b7810}),_0x359d86['to']('company-'+_0x5999d2+_0xee51c7(0x86))[_0xee51c7(0x81)]('company-'+_0x5999d2+_0xee51c7(0x9a),{'action':_0xee51c7(0x7c),'contact':_0x5a9955});}return _0x5a9955;};exports[a415_0x2c9123(0x71)]=CreateOrUpdateContactService;