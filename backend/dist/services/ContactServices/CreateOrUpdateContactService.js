const a531_0x1030f6=a531_0x2372;(function(_0x299179,_0xfb39c2){const _0x24dabf=a531_0x2372,_0x1f9df1=_0x299179();while(!![]){try{const _0x42ca15=-parseInt(_0x24dabf(0x1eb))/0x1+parseInt(_0x24dabf(0x1f5))/0x2+-parseInt(_0x24dabf(0x1dd))/0x3+parseInt(_0x24dabf(0x1e7))/0x4*(-parseInt(_0x24dabf(0x1f4))/0x5)+-parseInt(_0x24dabf(0x1df))/0x6+parseInt(_0x24dabf(0x1ef))/0x7*(parseInt(_0x24dabf(0x1d8))/0x8)+parseInt(_0x24dabf(0x1f1))/0x9;if(_0x42ca15===_0xfb39c2)break;else _0x1f9df1['push'](_0x1f9df1['shift']());}catch(_0x2fdb93){_0x1f9df1['push'](_0x1f9df1['shift']());}}}(a531_0x3d50,0x452fa));const a531_0x187040=(function(){let _0x5d2956=!![];return function(_0x35a0d3,_0x18582a){const _0x152dc1=_0x5d2956?function(){if(_0x18582a){const _0x290035=_0x18582a['apply'](_0x35a0d3,arguments);return _0x18582a=null,_0x290035;}}:function(){};return _0x5d2956=![],_0x152dc1;};}()),a531_0x2e40b6=a531_0x187040(this,function(){const _0x53896a=a531_0x2372;return a531_0x2e40b6[_0x53896a(0x1ea)]()[_0x53896a(0x1f9)](_0x53896a(0x1e2))[_0x53896a(0x1ea)]()[_0x53896a(0x1dc)](a531_0x2e40b6)['search'](_0x53896a(0x1e2));});a531_0x2e40b6();'use strict';var __importDefault=this&&this[a531_0x1030f6(0x200)]||function(_0x1039be){const _0x51fb8d=a531_0x1030f6;return _0x1039be&&_0x1039be[_0x51fb8d(0x1e6)]?_0x1039be:{'default':_0x1039be};};Object[a531_0x1030f6(0x1de)](exports,a531_0x1030f6(0x1e6),{'value':!![]});function a531_0x2372(_0x3384b4,_0x221af6){const _0x318845=a531_0x3d50();return a531_0x2372=function(_0x2e40b6,_0x187040){_0x2e40b6=_0x2e40b6-0x1d8;let _0x3d50fc=_0x318845[_0x2e40b6];return _0x3d50fc;},a531_0x2372(_0x3384b4,_0x221af6);}function a531_0x3d50(){const _0x4633c7=['Error\x20creating\x20contact:','__esModule','44YgiLXz','\x20for\x20number\x20','findOne','toString','559503CoIAuj','FRONTEND_URL','remoteJid','Found\x20existing\x20contact\x20','1010821oCQzrP','whatsapp','11015514Jflbao','createdAt','/nopicture.png','85025JorbEI','686370rhmccj','getIO','-contact','sequelize','search','push','name','-mainchannel','SequelizeUniqueConstraintError','update','create','__importDefault','log','company-','8ecgagQ','lid','emit','default','constructor','1337307VzfZRZ','defineProperty','1414926aQAMgJ','\x20(remoteJid:\x20','env','(((.+)+)+)+$','profilePicUrl','error'];a531_0x3d50=function(){return _0x4633c7;};return a531_0x3d50();}const socket_1=require('../../libs/socket'),Contact_1=__importDefault(require('../../models/Contact')),sequelize_1=require(a531_0x1030f6(0x1f8)),CreateOrUpdateContactService=async({name:_0x2e2b26,number:_0x4abf3b,profilePicUrl:_0x54735a,isGroup:_0x33b83f,email:email='',companyId:_0x573eea,extraInfo:extraInfo=[],channel:channel=a531_0x1030f6(0x1f0),disableBot:disableBot=![],remoteJid:_0x4fae04,lid:_0x858497})=>{const _0x49320c=a531_0x1030f6,_0x30346f=_0x33b83f?_0x4abf3b:_0x4abf3b['replace'](/[^0-9]/g,''),_0x55d526=(0x0,socket_1[_0x49320c(0x1f6)])();let _0x384470;if(_0x4fae04||_0x54735a&&_0x54735a!==process[_0x49320c(0x1e1)][_0x49320c(0x1ec)]+_0x49320c(0x1f3)){const _0x201870=[{'number':_0x30346f,'companyId':_0x573eea}];_0x4fae04&&_0x201870[_0x49320c(0x1fa)]({'remoteJid':_0x4fae04,'companyId':_0x573eea});_0x54735a&&_0x54735a!==process[_0x49320c(0x1e1)][_0x49320c(0x1ec)]+_0x49320c(0x1f3)&&_0x201870[_0x49320c(0x1fa)]({'profilePicUrl':_0x54735a,'companyId':_0x573eea,'isGroup':![]});const _0x4e6ffc=await Contact_1[_0x49320c(0x1db)]['findOne']({'where':{[sequelize_1['Op']['or']]:_0x201870},'order':[[_0x49320c(0x1f2),'ASC']]});if(_0x4e6ffc)return console[_0x49320c(0x201)](_0x49320c(0x1ee)+_0x4e6ffc['id']+_0x49320c(0x1e8)+_0x30346f+_0x49320c(0x1e0)+_0x4fae04+')'),await _0x4e6ffc[_0x49320c(0x1fe)]({'name':_0x2e2b26||_0x4e6ffc[_0x49320c(0x1fb)],'number':_0x30346f,'profilePicUrl':_0x54735a||_0x4e6ffc[_0x49320c(0x1e3)],'remoteJid':_0x4fae04||_0x4e6ffc[_0x49320c(0x1ed)],'lid':_0x858497||_0x4e6ffc[_0x49320c(0x1d9)]}),_0x55d526['to'](_0x49320c(0x202)+_0x573eea+_0x49320c(0x1fc))[_0x49320c(0x1da)](_0x49320c(0x202)+_0x573eea+_0x49320c(0x1f7),{'action':_0x49320c(0x1fe),'contact':_0x4e6ffc}),_0x4e6ffc;}try{_0x384470=await Contact_1['default'][_0x49320c(0x1ff)]({'name':_0x2e2b26,'number':_0x30346f,'profilePicUrl':_0x54735a,'email':email,'isGroup':_0x33b83f,'extraInfo':extraInfo,'companyId':_0x573eea,'channel':channel,'disableBot':disableBot,'remoteJid':_0x4fae04,'lid':_0x858497}),_0x55d526['to'](_0x49320c(0x202)+_0x573eea+_0x49320c(0x1fc))[_0x49320c(0x1da)](_0x49320c(0x202)+_0x573eea+_0x49320c(0x1f7),{'action':_0x49320c(0x1ff),'contact':_0x384470});}catch(_0x4d9195){if(_0x4d9195[_0x49320c(0x1fb)]===_0x49320c(0x1fd))_0x384470=await Contact_1['default'][_0x49320c(0x1e9)]({'where':{'number':_0x30346f,'companyId':_0x573eea}}),_0x384470&&(_0x384470['update']({'profilePicUrl':_0x54735a}),_0x55d526['to'](_0x49320c(0x202)+_0x573eea+'-mainchannel')['emit'](_0x49320c(0x202)+_0x573eea+_0x49320c(0x1f7),{'action':'update','contact':_0x384470}));else{console[_0x49320c(0x1e4)](_0x49320c(0x1e5),_0x4d9195);throw _0x4d9195;}}return _0x384470;};exports['default']=CreateOrUpdateContactService;