const a366_0x57150d=a366_0x434a;(function(_0x3ee96c,_0x3e1bb3){const _0x3caf02=a366_0x434a,_0x54637b=_0x3ee96c();while(!![]){try{const _0x1ac49a=parseInt(_0x3caf02(0x184))/0x1*(-parseInt(_0x3caf02(0x186))/0x2)+-parseInt(_0x3caf02(0x17b))/0x3+-parseInt(_0x3caf02(0x182))/0x4+parseInt(_0x3caf02(0x175))/0x5*(parseInt(_0x3caf02(0x188))/0x6)+parseInt(_0x3caf02(0x18c))/0x7+-parseInt(_0x3caf02(0x173))/0x8+-parseInt(_0x3caf02(0x17c))/0x9*(-parseInt(_0x3caf02(0x18d))/0xa);if(_0x1ac49a===_0x3e1bb3)break;else _0x54637b['push'](_0x54637b['shift']());}catch(_0x54a648){_0x54637b['push'](_0x54637b['shift']());}}}(a366_0x3c1c,0x93392));const a366_0x4e9343=(function(){let _0x406de6=!![];return function(_0x21365d,_0x46f9f0){const _0x115873=_0x406de6?function(){const _0x5f540d=a366_0x434a;if(_0x46f9f0){const _0x4826d9=_0x46f9f0[_0x5f540d(0x183)](_0x21365d,arguments);return _0x46f9f0=null,_0x4826d9;}}:function(){};return _0x406de6=![],_0x115873;};}()),a366_0xf3dd6b=a366_0x4e9343(this,function(){const _0x63528b=a366_0x434a;return a366_0xf3dd6b[_0x63528b(0x172)]()['search'](_0x63528b(0x17d))['toString']()[_0x63528b(0x189)](a366_0xf3dd6b)['search'](_0x63528b(0x17d));});a366_0xf3dd6b();function a366_0x3c1c(){const _0x3fe52d=['1984212BPsshI','175293nMUAFz','(((.+)+)+)+$','campaignQueue','getJob','not','remove','1205740qkCIkv','apply','4OxStQy','default','391778wBHhjz','update','30216BuVRse','constructor','CancelService','__esModule','8118971OCnMfJ','710vXOfxw','toString','4326264meYtjR','../../models/CampaignShipping','345nCmoIU','../../models/Campaign','findAll','push','../../queues','CANCELADA'];a366_0x3c1c=function(){return _0x3fe52d;};return a366_0x3c1c();}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x415f63){const _0x18cccd=a366_0x434a;return _0x415f63&&_0x415f63[_0x18cccd(0x18b)]?_0x415f63:{'default':_0x415f63};};Object['defineProperty'](exports,a366_0x57150d(0x18b),{'value':!![]}),exports[a366_0x57150d(0x18a)]=void 0x0;const sequelize_1=require('sequelize'),Campaign_1=__importDefault(require(a366_0x57150d(0x176))),CampaignShipping_1=__importDefault(require(a366_0x57150d(0x174))),queues_1=require(a366_0x57150d(0x179));function a366_0x434a(_0x25c11e,_0x5dbcf8){const _0x14b2df=a366_0x3c1c();return a366_0x434a=function(_0xf3dd6b,_0x4e9343){_0xf3dd6b=_0xf3dd6b-0x172;let _0x3c1cd7=_0x14b2df[_0xf3dd6b];return _0x3c1cd7;},a366_0x434a(_0x25c11e,_0x5dbcf8);}async function CancelService(_0x55d795){const _0x377b9d=a366_0x57150d,_0x51590b=await Campaign_1[_0x377b9d(0x185)]['findByPk'](_0x55d795);await _0x51590b[_0x377b9d(0x187)]({'status':_0x377b9d(0x17a)});const _0x5961b3=await CampaignShipping_1[_0x377b9d(0x185)][_0x377b9d(0x177)]({'where':{'campaignId':_0x51590b['id'],'jobId':{[sequelize_1['Op'][_0x377b9d(0x180)]]:null},'deliveredAt':null}}),_0x5084c5=[];for(let _0x2e34e2 of _0x5961b3){const _0x578e6e=await queues_1[_0x377b9d(0x17e)][_0x377b9d(0x17f)](_0x2e34e2['jobId']);_0x5084c5[_0x377b9d(0x178)](_0x578e6e?.[_0x377b9d(0x181)]());}await Promise['all'](_0x5084c5);}exports['CancelService']=CancelService;