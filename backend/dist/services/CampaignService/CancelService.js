const a397_0x581e09=a397_0xa192;(function(_0xe1307f,_0x1be8fe){const _0x3b7fe6=a397_0xa192,_0xe06a75=_0xe1307f();while(!![]){try{const _0x5710d3=-parseInt(_0x3b7fe6(0x83))/0x1*(parseInt(_0x3b7fe6(0x6c))/0x2)+-parseInt(_0x3b7fe6(0x72))/0x3*(parseInt(_0x3b7fe6(0x73))/0x4)+parseInt(_0x3b7fe6(0x74))/0x5+parseInt(_0x3b7fe6(0x7b))/0x6+-parseInt(_0x3b7fe6(0x78))/0x7*(-parseInt(_0x3b7fe6(0x85))/0x8)+parseInt(_0x3b7fe6(0x6d))/0x9+-parseInt(_0x3b7fe6(0x84))/0xa*(-parseInt(_0x3b7fe6(0x76))/0xb);if(_0x5710d3===_0x1be8fe)break;else _0xe06a75['push'](_0xe06a75['shift']());}catch(_0x457a14){_0xe06a75['push'](_0xe06a75['shift']());}}}(a397_0x8041,0x2674b));const a397_0x5d3ff6=(function(){let _0x386998=!![];return function(_0x51b08a,_0xa772bd){const _0x25b5b0=_0x386998?function(){const _0x4205aa=a397_0xa192;if(_0xa772bd){const _0x2df6c9=_0xa772bd[_0x4205aa(0x7f)](_0x51b08a,arguments);return _0xa772bd=null,_0x2df6c9;}}:function(){};return _0x386998=![],_0x25b5b0;};}()),a397_0x51843a=a397_0x5d3ff6(this,function(){const _0x151618=a397_0xa192;return a397_0x51843a[_0x151618(0x6e)]()[_0x151618(0x7c)](_0x151618(0x71))[_0x151618(0x6e)]()['constructor'](a397_0x51843a)['search'](_0x151618(0x71));});function a397_0x8041(){const _0x4fda18=['findAll','remove','apply','findByPk','defineProperty','CancelService','7IPGAfM','904880eVhXJz','200vRbopS','59698GuEmdr','511911vWCTlR','toString','sequelize','__esModule','(((.+)+)+)+$','169602iMRJox','12GLdfcZ','618225rzZlpi','jobId','11CuEUiR','update','28763jjKNhT','default','all','973938Sqgxxa','search'];a397_0x8041=function(){return _0x4fda18;};return a397_0x8041();}a397_0x51843a();'use strict';function a397_0xa192(_0x51aeff,_0x14b4b1){const _0x382884=a397_0x8041();return a397_0xa192=function(_0x51843a,_0x5d3ff6){_0x51843a=_0x51843a-0x6c;let _0x8041d=_0x382884[_0x51843a];return _0x8041d;},a397_0xa192(_0x51aeff,_0x14b4b1);}var __importDefault=this&&this['__importDefault']||function(_0x49aada){const _0x40c723=a397_0xa192;return _0x49aada&&_0x49aada[_0x40c723(0x70)]?_0x49aada:{'default':_0x49aada};};Object[a397_0x581e09(0x81)](exports,a397_0x581e09(0x70),{'value':!![]}),exports[a397_0x581e09(0x82)]=CancelService;const sequelize_1=require(a397_0x581e09(0x6f)),Campaign_1=__importDefault(require('../../models/Campaign')),CampaignShipping_1=__importDefault(require('../../models/CampaignShipping')),queues_1=require('../../queues');async function CancelService(_0x292d8c){const _0x1debd3=a397_0x581e09,_0x36435e=await Campaign_1[_0x1debd3(0x79)][_0x1debd3(0x80)](_0x292d8c);await _0x36435e[_0x1debd3(0x77)]({'status':'CANCELADA'});const _0x69dbe0=await CampaignShipping_1[_0x1debd3(0x79)][_0x1debd3(0x7d)]({'where':{'campaignId':_0x36435e['id'],'jobId':{[sequelize_1['Op']['not']]:null},'deliveredAt':null}}),_0x753695=[];for(let _0x562704 of _0x69dbe0){const _0x20bcd7=await queues_1['campaignQueue']['getJob'](+_0x562704[_0x1debd3(0x75)]);_0x753695['push'](_0x20bcd7[_0x1debd3(0x7e)]());}await Promise[_0x1debd3(0x7a)](_0x753695);}