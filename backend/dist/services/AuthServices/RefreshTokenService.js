const a392_0x150411=a392_0x103b;(function(_0x5b53bf,_0xbf2fa9){const _0x3c78c1=a392_0x103b,_0x19645c=_0x5b53bf();while(!![]){try{const _0x2583b8=parseInt(_0x3c78c1(0x198))/0x1+parseInt(_0x3c78c1(0x196))/0x2+parseInt(_0x3c78c1(0x19e))/0x3+parseInt(_0x3c78c1(0x1af))/0x4+-parseInt(_0x3c78c1(0x1b2))/0x5+parseInt(_0x3c78c1(0x1aa))/0x6+parseInt(_0x3c78c1(0x1a3))/0x7*(-parseInt(_0x3c78c1(0x1ac))/0x8);if(_0x2583b8===_0xbf2fa9)break;else _0x19645c['push'](_0x19645c['shift']());}catch(_0x2b6582){_0x19645c['push'](_0x19645c['shift']());}}}(a392_0x6f86,0x20129));const a392_0x2202a6=(function(){let _0x59c42a=!![];return function(_0x5cf3eb,_0xd11ab){const _0x1b61ae=_0x59c42a?function(){const _0x5a8ba1=a392_0x103b;if(_0xd11ab){const _0x4e3d2e=_0xd11ab[_0x5a8ba1(0x1a5)](_0x5cf3eb,arguments);return _0xd11ab=null,_0x4e3d2e;}}:function(){};return _0x59c42a=![],_0x1b61ae;};}()),a392_0x5d203b=a392_0x2202a6(this,function(){const _0x241945=a392_0x103b;return a392_0x5d203b['toString']()[_0x241945(0x1a8)](_0x241945(0x19a))[_0x241945(0x19d)]()[_0x241945(0x1a9)](a392_0x5d203b)['search'](_0x241945(0x19a));});function a392_0x6f86(){const _0x2f728a=['defineProperty','8DtHqta','jrt','refreshSecret','510616YZdgIk','clearCookie','../UserServices/ShowUserService','769195ZVxkSj','244334LtUWYp','jsonwebtoken','57231CGWejZ','company','(((.+)+)+)+$','dueDate','ERR_SUBSCRIPTION_EXPIRED','toString','10491TfhgVy','RefreshTokenService','ERR_SESSION_EXPIRED','../../config/auth','createRefreshToken','487501uRwUFW','default','apply','verify','../../errors/AppError','search','constructor','265812EEHeeV'];a392_0x6f86=function(){return _0x2f728a;};return a392_0x6f86();}function a392_0x103b(_0x5b38d1,_0xeb5c45){const _0x24757e=a392_0x6f86();return a392_0x103b=function(_0x5d203b,_0x2202a6){_0x5d203b=_0x5d203b-0x196;let _0x6f86e=_0x24757e[_0x5d203b];return _0x6f86e;},a392_0x103b(_0x5b38d1,_0xeb5c45);}a392_0x5d203b();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x394c04){return _0x394c04&&_0x394c04['__esModule']?_0x394c04:{'default':_0x394c04};};Object[a392_0x150411(0x1ab)](exports,'__esModule',{'value':!![]}),exports['RefreshTokenService']=void 0x0;const jsonwebtoken_1=require(a392_0x150411(0x197)),AppError_1=__importDefault(require(a392_0x150411(0x1a7))),ShowUserService_1=__importDefault(require(a392_0x150411(0x1b1))),auth_1=__importDefault(require(a392_0x150411(0x1a1))),CreateTokens_1=require('../../helpers/CreateTokens'),RefreshTokenService=async(_0x30fc1d,_0xb1af74)=>{const _0x17e095=a392_0x150411;try{const _0x2835ff=(0x0,jsonwebtoken_1[_0x17e095(0x1a6)])(_0xb1af74,auth_1['default'][_0x17e095(0x1ae)]),{id:_0x4aadad,tokenVersion:_0x48c84e}=_0x2835ff,_0x230bd8=await(0x0,ShowUserService_1['default'])(_0x4aadad);if(_0x230bd8['tokenVersion']!==_0x48c84e){_0x30fc1d['clearCookie'](_0x17e095(0x1ad));throw new AppError_1[(_0x17e095(0x1a4))](_0x17e095(0x1a0),0x191);}const _0x4f5e2f=new Date(_0x230bd8[_0x17e095(0x199)][_0x17e095(0x19b)]);if(new Date()>_0x4f5e2f)throw new AppError_1[(_0x17e095(0x1a4))](_0x17e095(0x19c),0x191);const _0x298bb9=(0x0,CreateTokens_1['createAccessToken'])(_0x230bd8),_0x14520c=(0x0,CreateTokens_1[_0x17e095(0x1a2)])(_0x230bd8);return{'user':_0x230bd8,'newToken':_0x298bb9,'refreshToken':_0x14520c};}catch(_0x107828){_0x30fc1d[_0x17e095(0x1b0)](_0x17e095(0x1ad));throw new AppError_1[(_0x17e095(0x1a4))](_0x17e095(0x1a0),0x191);}};exports[a392_0x150411(0x19f)]=RefreshTokenService;