const a397_0xd2b7ef=a397_0x82bc;(function(_0xa1a9b5,_0x2501d7){const _0x1e0673=a397_0x82bc,_0x3acb36=_0xa1a9b5();while(!![]){try{const _0x1d60a3=parseInt(_0x1e0673(0x1ad))/0x1+-parseInt(_0x1e0673(0x1c2))/0x2+parseInt(_0x1e0673(0x1b4))/0x3+-parseInt(_0x1e0673(0x1b0))/0x4*(-parseInt(_0x1e0673(0x1ae))/0x5)+-parseInt(_0x1e0673(0x1a7))/0x6*(parseInt(_0x1e0673(0x1ba))/0x7)+parseInt(_0x1e0673(0x1bf))/0x8+-parseInt(_0x1e0673(0x1bc))/0x9;if(_0x1d60a3===_0x2501d7)break;else _0x3acb36['push'](_0x3acb36['shift']());}catch(_0x5cccee){_0x3acb36['push'](_0x3acb36['shift']());}}}(a397_0x2056,0xe79b0));const a397_0x11ecb3=(function(){let _0x5cf90d=!![];return function(_0x55e915,_0x18dadd){const _0x4fe76f=_0x5cf90d?function(){const _0x34778e=a397_0x82bc;if(_0x18dadd){const _0x462fba=_0x18dadd[_0x34778e(0x1b7)](_0x55e915,arguments);return _0x18dadd=null,_0x462fba;}}:function(){};return _0x5cf90d=![],_0x4fe76f;};}()),a397_0x2bdd09=a397_0x11ecb3(this,function(){const _0x43a63e=a397_0x82bc;return a397_0x2bdd09[_0x43a63e(0x1a9)]()['search'](_0x43a63e(0x1af))[_0x43a63e(0x1a9)]()[_0x43a63e(0x1b5)](a397_0x2bdd09)[_0x43a63e(0x1b2)](_0x43a63e(0x1af));});function a397_0x2056(){const _0x1dd9ac=['(((.+)+)+)+$','4EFerif','defineProperty','search','../../errors/AppError','155340WnHpIq','constructor','dueDate','apply','clearCookie','../UserServices/ShowUserService','14819bSScQQ','default','10231299PsjORL','refreshSecret','ERR_SESSION_EXPIRED','14153000tuEzBj','verify','jrt','943656xaYlkr','company','createAccessToken','192LBbuqQ','jsonwebtoken','toString','__esModule','../../config/auth','RefreshTokenService','423311jhJgHH','1904115jAiUSV'];a397_0x2056=function(){return _0x1dd9ac;};return a397_0x2056();}a397_0x2bdd09();'use strict';function a397_0x82bc(_0x1d26c1,_0x4346c6){const _0x12caea=a397_0x2056();return a397_0x82bc=function(_0x2bdd09,_0x11ecb3){_0x2bdd09=_0x2bdd09-0x1a6;let _0x205665=_0x12caea[_0x2bdd09];return _0x205665;},a397_0x82bc(_0x1d26c1,_0x4346c6);}var __importDefault=this&&this['__importDefault']||function(_0x39be5b){const _0xe2c64d=a397_0x82bc;return _0x39be5b&&_0x39be5b[_0xe2c64d(0x1aa)]?_0x39be5b:{'default':_0x39be5b};};Object[a397_0xd2b7ef(0x1b1)](exports,a397_0xd2b7ef(0x1aa),{'value':!![]}),exports[a397_0xd2b7ef(0x1ac)]=void 0x0;const jsonwebtoken_1=require(a397_0xd2b7ef(0x1a8)),AppError_1=__importDefault(require(a397_0xd2b7ef(0x1b3))),ShowUserService_1=__importDefault(require(a397_0xd2b7ef(0x1b9))),auth_1=__importDefault(require(a397_0xd2b7ef(0x1ab))),CreateTokens_1=require('../../helpers/CreateTokens'),RefreshTokenService=async(_0x4ef02c,_0x4037d1)=>{const _0x150989=a397_0xd2b7ef;try{const _0xf26419=(0x0,jsonwebtoken_1[_0x150989(0x1c0)])(_0x4037d1,auth_1[_0x150989(0x1bb)][_0x150989(0x1bd)]),{id:_0xc2ec7d,tokenVersion:_0x32a1d9}=_0xf26419,_0x4dea1b=await(0x0,ShowUserService_1[_0x150989(0x1bb)])(_0xc2ec7d);if(_0x4dea1b['tokenVersion']!==_0x32a1d9){_0x4ef02c[_0x150989(0x1b8)](_0x150989(0x1c1));throw new AppError_1[(_0x150989(0x1bb))](_0x150989(0x1be),0x191);}const _0x16f390=new Date(_0x4dea1b[_0x150989(0x1c3)][_0x150989(0x1b6)]);if(new Date()>_0x16f390)throw new AppError_1[(_0x150989(0x1bb))]('ERR_SUBSCRIPTION_EXPIRED',0x191);const _0x8d1730=(0x0,CreateTokens_1[_0x150989(0x1a6)])(_0x4dea1b),_0x14d575=(0x0,CreateTokens_1['createRefreshToken'])(_0x4dea1b);return{'user':_0x4dea1b,'newToken':_0x8d1730,'refreshToken':_0x14d575};}catch(_0x3e21e7){_0x4ef02c[_0x150989(0x1b8)](_0x150989(0x1c1));throw new AppError_1[(_0x150989(0x1bb))]('ERR_SESSION_EXPIRED',0x191);}};exports[a397_0xd2b7ef(0x1ac)]=RefreshTokenService;