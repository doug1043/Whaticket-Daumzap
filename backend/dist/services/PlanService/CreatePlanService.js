const a451_0x3fe314=a451_0x13be;(function(_0x2d89a9,_0x1ec762){const _0x5afdcc=a451_0x13be,_0xd7270c=_0x2d89a9();while(!![]){try{const _0x597a5a=-parseInt(_0x5afdcc(0x216))/0x1+parseInt(_0x5afdcc(0x215))/0x2*(-parseInt(_0x5afdcc(0x207))/0x3)+parseInt(_0x5afdcc(0x1f9))/0x4*(-parseInt(_0x5afdcc(0x213))/0x5)+-parseInt(_0x5afdcc(0x201))/0x6*(parseInt(_0x5afdcc(0x203))/0x7)+parseInt(_0x5afdcc(0x1fe))/0x8+-parseInt(_0x5afdcc(0x1f6))/0x9+parseInt(_0x5afdcc(0x211))/0xa*(parseInt(_0x5afdcc(0x1f5))/0xb);if(_0x597a5a===_0x1ec762)break;else _0xd7270c['push'](_0xd7270c['shift']());}catch(_0x5ddff2){_0xd7270c['push'](_0xd7270c['shift']());}}}(a451_0x1239,0xcf610));function a451_0x1239(){const _0x4221d4=['test','5854595pqsQmz','__importStar','104890vSfZuL','15591hDlsFs','message','default','prototype','shape','22352QWqyCa','2401632TOZelu','__createBinding','(((.+)+)+)+$','4oYCxnJ','../../models/Plan','call','__importDefault','required','12932632ccJnhR','string','object','12AJnrcl','validate','2685739myPWkm','hasOwnProperty','__esModule','toString','21otBPdc','configurable','ERR_PLAN_INVALID_NAME','writable','Check-unique-name','ERR_PLAN_NAME_ALREADY_EXISTS','search','defineProperty','create','__setModuleDefault','8960OsUHzm'];a451_0x1239=function(){return _0x4221d4;};return a451_0x1239();}const a451_0x3f50c2=(function(){let _0x4e0947=!![];return function(_0x167794,_0x28dcd5){const _0x1d2734=_0x4e0947?function(){if(_0x28dcd5){const _0x1c014b=_0x28dcd5['apply'](_0x167794,arguments);return _0x28dcd5=null,_0x1c014b;}}:function(){};return _0x4e0947=![],_0x1d2734;};}()),a451_0x40b2b7=a451_0x3f50c2(this,function(){const _0x178a84=a451_0x13be;return a451_0x40b2b7[_0x178a84(0x206)]()[_0x178a84(0x20d)](_0x178a84(0x1f8))['toString']()['constructor'](a451_0x40b2b7)[_0x178a84(0x20d)]('(((.+)+)+)+$');});a451_0x40b2b7();'use strict';var __createBinding=this&&this[a451_0x3fe314(0x1f7)]||(Object['create']?function(_0x1bd316,_0x3f17ac,_0x248887,_0x3aa8db){const _0x108949=a451_0x3fe314;if(_0x3aa8db===undefined)_0x3aa8db=_0x248887;var _0x1d1d92=Object['getOwnPropertyDescriptor'](_0x3f17ac,_0x248887);(!_0x1d1d92||('get'in _0x1d1d92?!_0x3f17ac[_0x108949(0x205)]:_0x1d1d92[_0x108949(0x20a)]||_0x1d1d92[_0x108949(0x208)]))&&(_0x1d1d92={'enumerable':!![],'get':function(){return _0x3f17ac[_0x248887];}}),Object['defineProperty'](_0x1bd316,_0x3aa8db,_0x1d1d92);}:function(_0x2c0306,_0x52a85a,_0x2eca64,_0x32a51e){if(_0x32a51e===undefined)_0x32a51e=_0x2eca64;_0x2c0306[_0x32a51e]=_0x52a85a[_0x2eca64];}),__setModuleDefault=this&&this[a451_0x3fe314(0x210)]||(Object['create']?function(_0x91100c,_0x5e31c8){Object['defineProperty'](_0x91100c,'default',{'enumerable':!![],'value':_0x5e31c8});}:function(_0x52e402,_0x66bfcc){_0x52e402['default']=_0x66bfcc;}),__importStar=this&&this[a451_0x3fe314(0x214)]||function(_0x566faf){const _0x49338a=a451_0x3fe314;if(_0x566faf&&_0x566faf[_0x49338a(0x205)])return _0x566faf;var _0x5af55f={};if(_0x566faf!=null){for(var _0x5dfa77 in _0x566faf)if(_0x5dfa77!==_0x49338a(0x218)&&Object[_0x49338a(0x219)][_0x49338a(0x204)][_0x49338a(0x1fb)](_0x566faf,_0x5dfa77))__createBinding(_0x5af55f,_0x566faf,_0x5dfa77);}return __setModuleDefault(_0x5af55f,_0x566faf),_0x5af55f;},__importDefault=this&&this[a451_0x3fe314(0x1fc)]||function(_0x1a3968){return _0x1a3968&&_0x1a3968['__esModule']?_0x1a3968:{'default':_0x1a3968};};function a451_0x13be(_0x56fbc6,_0x172047){const _0x5132cb=a451_0x1239();return a451_0x13be=function(_0x40b2b7,_0x3f50c2){_0x40b2b7=_0x40b2b7-0x1f4;let _0x123945=_0x5132cb[_0x40b2b7];return _0x123945;},a451_0x13be(_0x56fbc6,_0x172047);}Object[a451_0x3fe314(0x20e)](exports,a451_0x3fe314(0x205),{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require('../../errors/AppError')),Plan_1=__importDefault(require(a451_0x3fe314(0x1fa))),CreatePlanService=async _0x3a4f6b=>{const _0x1baf9a=a451_0x3fe314,{name:_0x2ef27c}=_0x3a4f6b,_0x51993f=Yup[_0x1baf9a(0x200)]()[_0x1baf9a(0x1f4)]({'name':Yup[_0x1baf9a(0x1ff)]()['min'](0x2,'ERR_PLAN_INVALID_NAME')[_0x1baf9a(0x1fd)](_0x1baf9a(0x209))[_0x1baf9a(0x212)](_0x1baf9a(0x20b),_0x1baf9a(0x20c),async _0x1428d7=>{const _0x3476d2=_0x1baf9a;if(_0x1428d7){const _0x857fba=await Plan_1[_0x3476d2(0x218)]['findOne']({'where':{'name':_0x1428d7}});return!_0x857fba;}return![];})});try{await _0x51993f[_0x1baf9a(0x202)]({'name':_0x2ef27c});}catch(_0x33f39f){throw new AppError_1[(_0x1baf9a(0x218))](_0x33f39f[_0x1baf9a(0x217)]);}const _0x577919=await Plan_1['default'][_0x1baf9a(0x20f)](_0x3a4f6b);return _0x577919;};exports[a451_0x3fe314(0x218)]=CreatePlanService;