const a479_0x4dd74d=a479_0x2005;function a479_0x34d5(){const _0x2db510=['yup','validate','toString','call','__importDefault','8cyxYOA','449470dAQbJm','sequelize','default','message','get','create','2265642cQkkHo','update','min','1246518cCItCw','object','ERR_QUEUE_NAME_ALREADY_EXISTS','getOwnPropertyDescriptor','ERR_QUEUE_COLOR_ALREADY_EXISTS','search','__esModule','(((.+)+)+)+$','defineProperty','companyId','string','425628pUZgpH','1120158GRCTir','apply','./ShowQueueService','../../errors/AppError','findOne','constructor','prototype','Check-color-exists','ERR_QUEUE_INVALID_COLOR','2680344ZrVFEw','configurable','Check-color','__createBinding','54PYRWBE','2374910muGUqv','Check-unique-name','test','hasOwnProperty','ERR_QUEUE_INVALID_NAME','writable'];a479_0x34d5=function(){return _0x2db510;};return a479_0x34d5();}(function(_0x1d7361,_0x48e75a){const _0x390527=a479_0x2005,_0x3b0119=_0x1d7361();while(!![]){try{const _0xbdd0b9=-parseInt(_0x390527(0xc3))/0x1+parseInt(_0x390527(0xdd))/0x2+-parseInt(_0x390527(0xcf))/0x3+-parseInt(_0x390527(0xe8))/0x4*(parseInt(_0x390527(0xe9))/0x5)+-parseInt(_0x390527(0xc0))/0x6+-parseInt(_0x390527(0xce))/0x7+-parseInt(_0x390527(0xd8))/0x8*(-parseInt(_0x390527(0xdc))/0x9);if(_0xbdd0b9===_0x48e75a)break;else _0x3b0119['push'](_0x3b0119['shift']());}catch(_0x81d07b){_0x3b0119['push'](_0x3b0119['shift']());}}}(a479_0x34d5,0xea47a));const a479_0x287e46=(function(){let _0x281ec7=!![];return function(_0x44e009,_0x9fc88e){const _0xad853a=_0x281ec7?function(){const _0x2b22b9=a479_0x2005;if(_0x9fc88e){const _0x222cd6=_0x9fc88e[_0x2b22b9(0xd0)](_0x44e009,arguments);return _0x9fc88e=null,_0x222cd6;}}:function(){};return _0x281ec7=![],_0xad853a;};}()),a479_0x476d26=a479_0x287e46(this,function(){const _0x29301d=a479_0x2005;return a479_0x476d26[_0x29301d(0xe5)]()[_0x29301d(0xc8)](_0x29301d(0xca))[_0x29301d(0xe5)]()[_0x29301d(0xd4)](a479_0x476d26)[_0x29301d(0xc8)](_0x29301d(0xca));});a479_0x476d26();'use strict';var __createBinding=this&&this[a479_0x4dd74d(0xdb)]||(Object['create']?function(_0x1b192d,_0x397e3f,_0x2d1c3f,_0xce25f7){const _0x5981c3=a479_0x4dd74d;if(_0xce25f7===undefined)_0xce25f7=_0x2d1c3f;var _0x39cf0e=Object[_0x5981c3(0xc6)](_0x397e3f,_0x2d1c3f);(!_0x39cf0e||(_0x5981c3(0xed)in _0x39cf0e?!_0x397e3f[_0x5981c3(0xc9)]:_0x39cf0e[_0x5981c3(0xe2)]||_0x39cf0e[_0x5981c3(0xd9)]))&&(_0x39cf0e={'enumerable':!![],'get':function(){return _0x397e3f[_0x2d1c3f];}}),Object[_0x5981c3(0xcb)](_0x1b192d,_0xce25f7,_0x39cf0e);}:function(_0x295ff1,_0x146213,_0x4ed551,_0x30c92f){if(_0x30c92f===undefined)_0x30c92f=_0x4ed551;_0x295ff1[_0x30c92f]=_0x146213[_0x4ed551];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a479_0x4dd74d(0xee)]?function(_0x31c307,_0x208817){const _0x1d080e=a479_0x4dd74d;Object[_0x1d080e(0xcb)](_0x31c307,_0x1d080e(0xeb),{'enumerable':!![],'value':_0x208817});}:function(_0x2f61fa,_0x15b9a8){const _0x1e2659=a479_0x4dd74d;_0x2f61fa[_0x1e2659(0xeb)]=_0x15b9a8;}),__importStar=this&&this['__importStar']||function(_0x114d48){const _0x4fdc93=a479_0x4dd74d;if(_0x114d48&&_0x114d48[_0x4fdc93(0xc9)])return _0x114d48;var _0x31844a={};if(_0x114d48!=null){for(var _0x199fc5 in _0x114d48)if(_0x199fc5!==_0x4fdc93(0xeb)&&Object[_0x4fdc93(0xd5)][_0x4fdc93(0xe0)][_0x4fdc93(0xe6)](_0x114d48,_0x199fc5))__createBinding(_0x31844a,_0x114d48,_0x199fc5);}return __setModuleDefault(_0x31844a,_0x114d48),_0x31844a;},__importDefault=this&&this[a479_0x4dd74d(0xe7)]||function(_0xee3bcb){const _0x5a1b4a=a479_0x4dd74d;return _0xee3bcb&&_0xee3bcb[_0x5a1b4a(0xc9)]?_0xee3bcb:{'default':_0xee3bcb};};Object['defineProperty'](exports,a479_0x4dd74d(0xc9),{'value':!![]});function a479_0x2005(_0x53d812,_0x240c69){const _0x5a1379=a479_0x34d5();return a479_0x2005=function(_0x476d26,_0x287e46){_0x476d26=_0x476d26-0xc0;let _0x34d57d=_0x5a1379[_0x476d26];return _0x34d57d;},a479_0x2005(_0x53d812,_0x240c69);}const sequelize_1=require(a479_0x4dd74d(0xea)),Yup=__importStar(require(a479_0x4dd74d(0xe3))),AppError_1=__importDefault(require(a479_0x4dd74d(0xd2))),Queue_1=__importDefault(require('../../models/Queue')),ShowQueueService_1=__importDefault(require(a479_0x4dd74d(0xd1))),UpdateQueueService=async(_0x40253d,_0x3c7cb8,_0x2cab31)=>{const _0x60ceb5=a479_0x4dd74d,{color:_0x3c976a,name:_0x408b7f}=_0x3c7cb8,_0x20618c=Yup[_0x60ceb5(0xc4)]()['shape']({'name':Yup[_0x60ceb5(0xcd)]()[_0x60ceb5(0xc2)](0x2,_0x60ceb5(0xe1))['test'](_0x60ceb5(0xde),_0x60ceb5(0xc5),async _0x2153de=>{const _0x596f57=_0x60ceb5;if(_0x2153de){const _0x476711=await Queue_1[_0x596f57(0xeb)]['findOne']({'where':{'name':_0x2153de,'id':{[sequelize_1['Op']['ne']]:_0x40253d},'companyId':_0x2cab31}});return!_0x476711;}return!![];}),'color':Yup[_0x60ceb5(0xcd)]()['required'](_0x60ceb5(0xd7))[_0x60ceb5(0xdf)](_0x60ceb5(0xda),_0x60ceb5(0xd7),async _0x723ae2=>{const _0x3a9bc1=_0x60ceb5;if(_0x723ae2){const _0x18ca48=/^#[0-9a-f]{3,6}$/i;return _0x18ca48[_0x3a9bc1(0xdf)](_0x723ae2);}return!![];})[_0x60ceb5(0xdf)](_0x60ceb5(0xd6),_0x60ceb5(0xc7),async _0x3766a5=>{const _0x2b85d8=_0x60ceb5;if(_0x3766a5){const _0x3fdb6d=await Queue_1[_0x2b85d8(0xeb)][_0x2b85d8(0xd3)]({'where':{'color':_0x3766a5,'id':{[sequelize_1['Op']['ne']]:_0x40253d},'companyId':_0x2cab31}});return!_0x3fdb6d;}return!![];})});try{await _0x20618c[_0x60ceb5(0xe4)]({'color':_0x3c976a,'name':_0x408b7f});}catch(_0x4316f2){throw new AppError_1[(_0x60ceb5(0xeb))](_0x4316f2[_0x60ceb5(0xec)]);}const _0xf53b95=await(0x0,ShowQueueService_1[_0x60ceb5(0xeb)])(_0x40253d,_0x2cab31);if(_0xf53b95[_0x60ceb5(0xcc)]!==_0x2cab31)throw new AppError_1[(_0x60ceb5(0xeb))]('Não\x20é\x20permitido\x20alterar\x20registros\x20de\x20outra\x20empresa');return await _0xf53b95[_0x60ceb5(0xc1)](_0x3c7cb8),_0xf53b95;};exports[a479_0x4dd74d(0xeb)]=UpdateQueueService;