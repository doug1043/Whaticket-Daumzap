'use strict';const a617_0x15d316=a617_0x8daf;function a617_0x4f3d(){const _0x41d8dd=['ERR_QUEUE_NAME_ALREADY_EXISTS','__setModuleDefault','shape','min','integer','update','sequelize','ERR_QUEUE_INVALID_COLOR','ERR_QUEUE_COLOR_ALREADY_EXISTS','companyId','8720SkSYfW','426946gSikLA','apply','typeError','getOwnPropertyDescriptor','length','writable','(((.+)+)+)+$','validate','186335FsZdno','ERR_QUEUE_ORDER_INVALID','88YKjmEb','808542NhBWJo','__esModule','toString','prototype','call','test','./ShowQueueService','defineProperty','__createBinding','yup','6072TrxaGk','string','138637rRKQSH','__importStar','3249352nvQINF','object','search','__importDefault','26253vbEvaV','findOne','../../errors/AppError','transform','required','ERR_QUEUE_INVALID_NAME','ERR_QUEUE_ORDER_ALREADY_EXISTS','Check-unique-order','6XghoYJ','create','Check-unique-name','Não\x20é\x20permitido\x20alterar\x20registros\x20de\x20outra\x20empresa','ERR_QUEUE_ORDER_REQUIRED','default','get','15qxUWXi'];a617_0x4f3d=function(){return _0x41d8dd;};return a617_0x4f3d();}(function(_0xf5509d,_0x41be93){const _0x50dd80=a617_0x8daf,_0x38f6c3=_0xf5509d();while(!![]){try{const _0x4bc3e0=parseInt(_0x50dd80(0xdf))/0x1+-parseInt(_0x50dd80(0xc8))/0x2*(parseInt(_0x50dd80(0xf4))/0x3)+parseInt(_0x50dd80(0xe1))/0x4+-parseInt(_0x50dd80(0xd0))/0x5*(parseInt(_0x50dd80(0xed))/0x6)+-parseInt(_0x50dd80(0xd3))/0x7*(-parseInt(_0x50dd80(0xd2))/0x8)+parseInt(_0x50dd80(0xe5))/0x9+-parseInt(_0x50dd80(0xc7))/0xa*(parseInt(_0x50dd80(0xdd))/0xb);if(_0x4bc3e0===_0x41be93)break;else _0x38f6c3['push'](_0x38f6c3['shift']());}catch(_0x55053c){_0x38f6c3['push'](_0x38f6c3['shift']());}}}(a617_0x4f3d,0x9be12));var __createBinding=this&&this[a617_0x15d316(0xdb)]||(Object[a617_0x15d316(0xee)]?function(_0x17491d,_0x230667,_0x33d2cd,_0x55e4c6){const _0x3f7ea4=a617_0x15d316;if(_0x55e4c6===undefined)_0x55e4c6=_0x33d2cd;var _0x5bd7fb=Object[_0x3f7ea4(0xcb)](_0x230667,_0x33d2cd);(!_0x5bd7fb||(_0x3f7ea4(0xf3)in _0x5bd7fb?!_0x230667[_0x3f7ea4(0xd4)]:_0x5bd7fb[_0x3f7ea4(0xcd)]||_0x5bd7fb['configurable']))&&(_0x5bd7fb={'enumerable':!![],'get':function(){return _0x230667[_0x33d2cd];}}),Object[_0x3f7ea4(0xda)](_0x17491d,_0x55e4c6,_0x5bd7fb);}:function(_0x21a81a,_0x267277,_0x27de1c,_0x3d0310){if(_0x3d0310===undefined)_0x3d0310=_0x27de1c;_0x21a81a[_0x3d0310]=_0x267277[_0x27de1c];}),__setModuleDefault=this&&this[a617_0x15d316(0xf6)]||(Object[a617_0x15d316(0xee)]?function(_0x370ef4,_0x51a42c){const _0x381650=a617_0x15d316;Object[_0x381650(0xda)](_0x370ef4,'default',{'enumerable':!![],'value':_0x51a42c});}:function(_0x2e7c91,_0x57a5f5){const _0xb63b1=a617_0x15d316;_0x2e7c91[_0xb63b1(0xf2)]=_0x57a5f5;}),__importStar=this&&this[a617_0x15d316(0xe0)]||(function(){const _0x2e5277=(function(){let _0xe71781=!![];return function(_0x332395,_0x484919){const _0x1c1b4b=_0xe71781?function(){const _0x3e2714=a617_0x8daf;if(_0x484919){const _0x2f50c6=_0x484919[_0x3e2714(0xc9)](_0x332395,arguments);return _0x484919=null,_0x2f50c6;}}:function(){};return _0xe71781=![],_0x1c1b4b;};}()),_0x1ae76d=_0x2e5277(this,function(){const _0x41b589=a617_0x8daf;return _0x1ae76d['toString']()['search']('(((.+)+)+)+$')[_0x41b589(0xd5)]()['constructor'](_0x1ae76d)[_0x41b589(0xe3)](_0x41b589(0xce));});_0x1ae76d();var _0x4f285b=function(_0x4ed291){return _0x4f285b=Object['getOwnPropertyNames']||function(_0x27d58a){const _0x54d6b6=a617_0x8daf;var _0x1f7fee=[];for(var _0x49023f in _0x27d58a)if(Object[_0x54d6b6(0xd6)]['hasOwnProperty'][_0x54d6b6(0xd7)](_0x27d58a,_0x49023f))_0x1f7fee[_0x1f7fee[_0x54d6b6(0xcc)]]=_0x49023f;return _0x1f7fee;},_0x4f285b(_0x4ed291);};return function(_0x4909ee){const _0x545d8b=a617_0x8daf;if(_0x4909ee&&_0x4909ee['__esModule'])return _0x4909ee;var _0x28471e={};if(_0x4909ee!=null){for(var _0xf910fd=_0x4f285b(_0x4909ee),_0x1bb19e=0x0;_0x1bb19e<_0xf910fd[_0x545d8b(0xcc)];_0x1bb19e++)if(_0xf910fd[_0x1bb19e]!==_0x545d8b(0xf2))__createBinding(_0x28471e,_0x4909ee,_0xf910fd[_0x1bb19e]);}return __setModuleDefault(_0x28471e,_0x4909ee),_0x28471e;};}()),__importDefault=this&&this[a617_0x15d316(0xe4)]||function(_0x44faa3){return _0x44faa3&&_0x44faa3['__esModule']?_0x44faa3:{'default':_0x44faa3};};Object[a617_0x15d316(0xda)](exports,a617_0x15d316(0xd4),{'value':!![]});const sequelize_1=require(a617_0x15d316(0xfb)),Yup=__importStar(require(a617_0x15d316(0xdc))),AppError_1=__importDefault(require(a617_0x15d316(0xe7))),Queue_1=__importDefault(require('../../models/Queue')),ShowQueueService_1=__importDefault(require(a617_0x15d316(0xd9))),UpdateQueueService=async(_0x43c38d,_0x1ee1b1,_0x32f548)=>{const _0x1ae230=a617_0x15d316,{color:_0x557fe9,name:_0x5d1366,orderQueue:_0x3b2024}=_0x1ee1b1,_0x165afe=Yup[_0x1ae230(0xe2)]()[_0x1ae230(0xf7)]({'name':Yup['string']()[_0x1ae230(0xf8)](0x2,_0x1ae230(0xea))[_0x1ae230(0xd8)](_0x1ae230(0xef),_0x1ae230(0xf5),async _0x2f32a9=>{const _0x25c4bc=_0x1ae230;if(_0x2f32a9){const _0x4e8e69=await Queue_1[_0x25c4bc(0xf2)][_0x25c4bc(0xe6)]({'where':{'name':_0x2f32a9,'id':{[sequelize_1['Op']['ne']]:_0x43c38d},'companyId':_0x32f548}});return!_0x4e8e69;}return!![];}),'color':Yup[_0x1ae230(0xde)]()[_0x1ae230(0xe9)](_0x1ae230(0xfc))['test']('Check-color',_0x1ae230(0xfc),async _0x346eed=>{if(_0x346eed){const _0x50af37=/^#[0-9a-f]{3,6}$/i;return _0x50af37['test'](_0x346eed);}return!![];})[_0x1ae230(0xd8)]('Check-color-exists',_0x1ae230(0xc5),async _0x6f7258=>{if(_0x6f7258){const _0x2e3a2b=await Queue_1['default']['findOne']({'where':{'color':_0x6f7258,'id':{[sequelize_1['Op']['ne']]:_0x43c38d},'companyId':_0x32f548}});return!_0x2e3a2b;}return!![];}),'orderQueue':Yup['number']()[_0x1ae230(0xe8)]((_0x17c14e,_0x28dd6e)=>{return _0x28dd6e===''?undefined:_0x17c14e;})[_0x1ae230(0xca)]('ERR_QUEUE_ORDER_REQUIRED')['required'](_0x1ae230(0xf1))[_0x1ae230(0xf8)](0x1,_0x1ae230(0xd1))[_0x1ae230(0xf9)](_0x1ae230(0xd1))[_0x1ae230(0xd8)](_0x1ae230(0xec),_0x1ae230(0xeb),async _0x2728ba=>{const _0x22df96=_0x1ae230;if(_0x2728ba&&_0x2728ba>=0x1){const _0x1b2816=await Queue_1[_0x22df96(0xf2)]['findOne']({'where':{'orderQueue':_0x2728ba,'id':{[sequelize_1['Op']['ne']]:_0x43c38d},'companyId':_0x32f548}});return!_0x1b2816;}return!![];})});try{await _0x165afe[_0x1ae230(0xcf)]({'color':_0x557fe9,'name':_0x5d1366,'orderQueue':_0x3b2024});}catch(_0x22eccb){throw new AppError_1['default'](_0x22eccb['message']);}const _0x58a5a3=await(0x0,ShowQueueService_1[_0x1ae230(0xf2)])(_0x43c38d,_0x32f548);if(_0x58a5a3[_0x1ae230(0xc6)]!==_0x32f548)throw new AppError_1[(_0x1ae230(0xf2))](_0x1ae230(0xf0));return await _0x58a5a3[_0x1ae230(0xfa)](_0x1ee1b1),_0x58a5a3;};function a617_0x8daf(_0x3232b8,_0x542f4a){const _0x3ca661=a617_0x4f3d();return a617_0x8daf=function(_0xd8227e,_0x590a04){_0xd8227e=_0xd8227e-0xc5;let _0x4f3d2e=_0x3ca661[_0xd8227e];return _0x4f3d2e;},a617_0x8daf(_0x3232b8,_0x542f4a);}exports['default']=UpdateQueueService;