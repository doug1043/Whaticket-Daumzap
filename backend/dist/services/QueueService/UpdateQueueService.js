'use strict';const a512_0xf7d5b6=a512_0xc707;(function(_0x447255,_0x3544f9){const _0x4761bc=a512_0xc707,_0x288d78=_0x447255();while(!![]){try{const _0xb3c4e=-parseInt(_0x4761bc(0x20b))/0x1*(parseInt(_0x4761bc(0x20c))/0x2)+parseInt(_0x4761bc(0x211))/0x3+-parseInt(_0x4761bc(0x1f2))/0x4*(parseInt(_0x4761bc(0x1f0))/0x5)+parseInt(_0x4761bc(0x1fe))/0x6*(parseInt(_0x4761bc(0x205))/0x7)+parseInt(_0x4761bc(0x212))/0x8+parseInt(_0x4761bc(0x20d))/0x9*(parseInt(_0x4761bc(0x201))/0xa)+-parseInt(_0x4761bc(0x1fa))/0xb;if(_0xb3c4e===_0x3544f9)break;else _0x288d78['push'](_0x288d78['shift']());}catch(_0x3b36f4){_0x288d78['push'](_0x288d78['shift']());}}}(a512_0x5ace,0xce2c0));function a512_0xc707(_0x478e02,_0x5ec4eb){const _0x1bba9e=a512_0x5ace();return a512_0xc707=function(_0x5ccbbb,_0xf9f90f){_0x5ccbbb=_0x5ccbbb-0x1e6;let _0x5acefe=_0x1bba9e[_0x5ccbbb];return _0x5acefe;},a512_0xc707(_0x478e02,_0x5ec4eb);}var __createBinding=this&&this[a512_0xf7d5b6(0x204)]||(Object[a512_0xf7d5b6(0x202)]?function(_0x4804d8,_0x4851b1,_0x49a9a8,_0x464941){const _0xd579d9=a512_0xf7d5b6;if(_0x464941===undefined)_0x464941=_0x49a9a8;var _0x36ec90=Object['getOwnPropertyDescriptor'](_0x4851b1,_0x49a9a8);(!_0x36ec90||(_0xd579d9(0x1ee)in _0x36ec90?!_0x4851b1[_0xd579d9(0x1f9)]:_0x36ec90[_0xd579d9(0x1eb)]||_0x36ec90['configurable']))&&(_0x36ec90={'enumerable':!![],'get':function(){return _0x4851b1[_0x49a9a8];}}),Object[_0xd579d9(0x203)](_0x4804d8,_0x464941,_0x36ec90);}:function(_0x2e5a04,_0x115a45,_0x245df8,_0x247129){if(_0x247129===undefined)_0x247129=_0x245df8;_0x2e5a04[_0x247129]=_0x115a45[_0x245df8];}),__setModuleDefault=this&&this[a512_0xf7d5b6(0x214)]||(Object[a512_0xf7d5b6(0x202)]?function(_0x60d55d,_0x2b4751){const _0x54e99e=a512_0xf7d5b6;Object[_0x54e99e(0x203)](_0x60d55d,'default',{'enumerable':!![],'value':_0x2b4751});}:function(_0x543e9e,_0x1ce77c){_0x543e9e['default']=_0x1ce77c;}),__importStar=this&&this['__importStar']||(function(){const _0x59cb0b=(function(){let _0x19b46d=!![];return function(_0x209274,_0xed8480){const _0x48611e=_0x19b46d?function(){const _0x12bc15=a512_0xc707;if(_0xed8480){const _0x49c781=_0xed8480[_0x12bc15(0x1ed)](_0x209274,arguments);return _0xed8480=null,_0x49c781;}}:function(){};return _0x19b46d=![],_0x48611e;};}()),_0x136653=_0x59cb0b(this,function(){const _0x303361=a512_0xc707;return _0x136653[_0x303361(0x200)]()[_0x303361(0x1e7)]('(((.+)+)+)+$')[_0x303361(0x200)]()[_0x303361(0x20f)](_0x136653)[_0x303361(0x1e7)](_0x303361(0x1e9));});_0x136653();var _0x30dbb7=function(_0x4f164d){const _0xed6a52=a512_0xc707;return _0x30dbb7=Object[_0xed6a52(0x20e)]||function(_0x3fa141){const _0x5c865e=_0xed6a52;var _0x206586=[];for(var _0x377275 in _0x3fa141)if(Object[_0x5c865e(0x1fd)]['hasOwnProperty'][_0x5c865e(0x208)](_0x3fa141,_0x377275))_0x206586[_0x206586[_0x5c865e(0x1e8)]]=_0x377275;return _0x206586;},_0x30dbb7(_0x4f164d);};return function(_0x310705){const _0x25bc60=a512_0xc707;if(_0x310705&&_0x310705[_0x25bc60(0x1f9)])return _0x310705;var _0x307159={};if(_0x310705!=null){for(var _0x5cc819=_0x30dbb7(_0x310705),_0x12bfb0=0x0;_0x12bfb0<_0x5cc819[_0x25bc60(0x1e8)];_0x12bfb0++)if(_0x5cc819[_0x12bfb0]!==_0x25bc60(0x206))__createBinding(_0x307159,_0x310705,_0x5cc819[_0x12bfb0]);}return __setModuleDefault(_0x307159,_0x310705),_0x307159;};}()),__importDefault=this&&this[a512_0xf7d5b6(0x1f6)]||function(_0x4f5876){const _0x1a8aa8=a512_0xf7d5b6;return _0x4f5876&&_0x4f5876[_0x1a8aa8(0x1f9)]?_0x4f5876:{'default':_0x4f5876};};Object[a512_0xf7d5b6(0x203)](exports,a512_0xf7d5b6(0x1f9),{'value':!![]});function a512_0x5ace(){const _0x35bbf3=['writable','../../models/Queue','apply','get','required','5uAMfSM','object','580516zhDhgM','message','string','findOne','__importDefault','test','validate','__esModule','6942001fTxrCW','ERR_QUEUE_COLOR_ALREADY_EXISTS','ERR_QUEUE_NAME_ALREADY_EXISTS','prototype','1314MQcmHn','shape','toString','709210BgOJgR','create','defineProperty','__createBinding','749WSNOBj','default','../../errors/AppError','call','Check-color-exists','ERR_QUEUE_INVALID_COLOR','5zILmpj','232924FMSiBM','171AhaSJU','getOwnPropertyNames','constructor','yup','1337853VMjZue','3089016XvFeBC','companyId','__setModuleDefault','update','search','length','(((.+)+)+)+$','./ShowQueueService'];a512_0x5ace=function(){return _0x35bbf3;};return a512_0x5ace();}const sequelize_1=require('sequelize'),Yup=__importStar(require(a512_0xf7d5b6(0x210))),AppError_1=__importDefault(require(a512_0xf7d5b6(0x207))),Queue_1=__importDefault(require(a512_0xf7d5b6(0x1ec))),ShowQueueService_1=__importDefault(require(a512_0xf7d5b6(0x1ea))),UpdateQueueService=async(_0x10a1da,_0x346473,_0x1becff)=>{const _0x2ec185=a512_0xf7d5b6,{color:_0x110bba,name:_0x26275b}=_0x346473,_0x5536f0=Yup[_0x2ec185(0x1f1)]()[_0x2ec185(0x1ff)]({'name':Yup[_0x2ec185(0x1f4)]()['min'](0x2,'ERR_QUEUE_INVALID_NAME')['test']('Check-unique-name',_0x2ec185(0x1fc),async _0x5296a9=>{const _0x453104=_0x2ec185;if(_0x5296a9){const _0xc34178=await Queue_1[_0x453104(0x206)]['findOne']({'where':{'name':_0x5296a9,'id':{[sequelize_1['Op']['ne']]:_0x10a1da},'companyId':_0x1becff}});return!_0xc34178;}return!![];}),'color':Yup['string']()[_0x2ec185(0x1ef)](_0x2ec185(0x20a))[_0x2ec185(0x1f7)]('Check-color',_0x2ec185(0x20a),async _0x29eb2a=>{const _0x2a09ec=_0x2ec185;if(_0x29eb2a){const _0x1e11ca=/^#[0-9a-f]{3,6}$/i;return _0x1e11ca[_0x2a09ec(0x1f7)](_0x29eb2a);}return!![];})['test'](_0x2ec185(0x209),_0x2ec185(0x1fb),async _0x5d3005=>{const _0x256dd2=_0x2ec185;if(_0x5d3005){const _0x1b3390=await Queue_1['default'][_0x256dd2(0x1f5)]({'where':{'color':_0x5d3005,'id':{[sequelize_1['Op']['ne']]:_0x10a1da},'companyId':_0x1becff}});return!_0x1b3390;}return!![];})});try{await _0x5536f0[_0x2ec185(0x1f8)]({'color':_0x110bba,'name':_0x26275b});}catch(_0x33bfe1){throw new AppError_1[(_0x2ec185(0x206))](_0x33bfe1[_0x2ec185(0x1f3)]);}const _0x1085a2=await(0x0,ShowQueueService_1['default'])(_0x10a1da,_0x1becff);if(_0x1085a2[_0x2ec185(0x213)]!==_0x1becff)throw new AppError_1['default']('Não\x20é\x20permitido\x20alterar\x20registros\x20de\x20outra\x20empresa');return await _0x1085a2[_0x2ec185(0x1e6)](_0x346473),_0x1085a2;};exports[a512_0xf7d5b6(0x206)]=UpdateQueueService;