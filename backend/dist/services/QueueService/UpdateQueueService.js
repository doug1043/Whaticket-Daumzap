'use strict';function a618_0xaafb(_0x1def4c,_0x43c356){const _0x58df93=a618_0x2243();return a618_0xaafb=function(_0x1fa4c9,_0x50de61){_0x1fa4c9=_0x1fa4c9-0xb5;let _0x22435c=_0x58df93[_0x1fa4c9];return _0x22435c;},a618_0xaafb(_0x1def4c,_0x43c356);}const a618_0x28b384=a618_0xaafb;(function(_0x47f6b6,_0x1d4562){const _0x2979c6=a618_0xaafb,_0x1077f2=_0x47f6b6();while(!![]){try{const _0x17aaa6=parseInt(_0x2979c6(0xd6))/0x1+-parseInt(_0x2979c6(0xb9))/0x2*(-parseInt(_0x2979c6(0xd1))/0x3)+-parseInt(_0x2979c6(0xdf))/0x4+parseInt(_0x2979c6(0xda))/0x5*(-parseInt(_0x2979c6(0xd5))/0x6)+-parseInt(_0x2979c6(0xb8))/0x7*(-parseInt(_0x2979c6(0xe8))/0x8)+parseInt(_0x2979c6(0xde))/0x9+parseInt(_0x2979c6(0xc0))/0xa*(parseInt(_0x2979c6(0xe5))/0xb);if(_0x17aaa6===_0x1d4562)break;else _0x1077f2['push'](_0x1077f2['shift']());}catch(_0x279dc3){_0x1077f2['push'](_0x1077f2['shift']());}}}(a618_0x2243,0x592c2));var __createBinding=this&&this[a618_0x28b384(0xd0)]||(Object['create']?function(_0x3f8787,_0x38536b,_0x1780a2,_0x4962fc){const _0x8d5b03=a618_0x28b384;if(_0x4962fc===undefined)_0x4962fc=_0x1780a2;var _0x27a8bc=Object[_0x8d5b03(0xdc)](_0x38536b,_0x1780a2);(!_0x27a8bc||(_0x8d5b03(0xb7)in _0x27a8bc?!_0x38536b['__esModule']:_0x27a8bc['writable']||_0x27a8bc[_0x8d5b03(0xe4)]))&&(_0x27a8bc={'enumerable':!![],'get':function(){return _0x38536b[_0x1780a2];}}),Object[_0x8d5b03(0xbf)](_0x3f8787,_0x4962fc,_0x27a8bc);}:function(_0x3932fd,_0x351c74,_0x362187,_0x16d5c4){if(_0x16d5c4===undefined)_0x16d5c4=_0x362187;_0x3932fd[_0x16d5c4]=_0x351c74[_0x362187];}),__setModuleDefault=this&&this[a618_0x28b384(0xe3)]||(Object[a618_0x28b384(0xbd)]?function(_0x12dea0,_0x2b0812){const _0x4073d2=a618_0x28b384;Object[_0x4073d2(0xbf)](_0x12dea0,_0x4073d2(0xc5),{'enumerable':!![],'value':_0x2b0812});}:function(_0x497686,_0x184a4e){const _0x7a571d=a618_0x28b384;_0x497686[_0x7a571d(0xc5)]=_0x184a4e;}),__importStar=this&&this[a618_0x28b384(0xe7)]||(function(){const _0x2764ad=(function(){let _0x3471bb=!![];return function(_0x48e166,_0x3aa874){const _0x1767b9=_0x3471bb?function(){const _0x96f601=a618_0xaafb;if(_0x3aa874){const _0x4aad5b=_0x3aa874[_0x96f601(0xdd)](_0x48e166,arguments);return _0x3aa874=null,_0x4aad5b;}}:function(){};return _0x3471bb=![],_0x1767b9;};}()),_0x32c0b4=_0x2764ad(this,function(){const _0xff392f=a618_0xaafb;return _0x32c0b4['toString']()[_0xff392f(0xd2)](_0xff392f(0xe2))[_0xff392f(0xe1)]()['constructor'](_0x32c0b4)['search']('(((.+)+)+)+$');});_0x32c0b4();var _0x1acf38=function(_0x4765ed){return _0x1acf38=Object['getOwnPropertyNames']||function(_0x26a47e){const _0x3ef9b3=a618_0xaafb;var _0xe9d6b2=[];for(var _0x52d3e4 in _0x26a47e)if(Object['prototype'][_0x3ef9b3(0xca)]['call'](_0x26a47e,_0x52d3e4))_0xe9d6b2[_0xe9d6b2[_0x3ef9b3(0xd8)]]=_0x52d3e4;return _0xe9d6b2;},_0x1acf38(_0x4765ed);};return function(_0x9a3e30){const _0x34775d=a618_0xaafb;if(_0x9a3e30&&_0x9a3e30[_0x34775d(0xea)])return _0x9a3e30;var _0x47c4eb={};if(_0x9a3e30!=null){for(var _0x1de452=_0x1acf38(_0x9a3e30),_0x6dc924=0x0;_0x6dc924<_0x1de452['length'];_0x6dc924++)if(_0x1de452[_0x6dc924]!=='default')__createBinding(_0x47c4eb,_0x9a3e30,_0x1de452[_0x6dc924]);}return __setModuleDefault(_0x47c4eb,_0x9a3e30),_0x47c4eb;};}()),__importDefault=this&&this[a618_0x28b384(0xb6)]||function(_0x49b0d5){return _0x49b0d5&&_0x49b0d5['__esModule']?_0x49b0d5:{'default':_0x49b0d5};};function a618_0x2243(){const _0x5bc089=['303294HsVPNN','291837STIbID','sequelize','length','ERR_QUEUE_INVALID_COLOR','45UrsMiy','ERR_QUEUE_COLOR_ALREADY_EXISTS','getOwnPropertyDescriptor','apply','1492407lGfaqn','169956TfzBvL','string','toString','(((.+)+)+)+$','__setModuleDefault','configurable','1859vPeuhW','Check-unique-name','__importStar','32vlWCVs','Check-unique-order','__esModule','findOne','required','__importDefault','get','112000rzUBVl','13092hLyXpv','test','Check-color-exists','yup','create','ERR_QUEUE_INVALID_NAME','defineProperty','17080USIkBM','../../errors/AppError','Não\x20é\x20permitido\x20alterar\x20registros\x20de\x20outra\x20empresa','ERR_QUEUE_ORDER_ALREADY_EXISTS','min','default','typeError','validate','companyId','message','hasOwnProperty','transform','update','object','ERR_QUEUE_ORDER_REQUIRED','ERR_QUEUE_NAME_ALREADY_EXISTS','__createBinding','24mpVNFD','search','Check-color','./ShowQueueService'];a618_0x2243=function(){return _0x5bc089;};return a618_0x2243();}Object[a618_0x28b384(0xbf)](exports,a618_0x28b384(0xea),{'value':!![]});const sequelize_1=require(a618_0x28b384(0xd7)),Yup=__importStar(require(a618_0x28b384(0xbc))),AppError_1=__importDefault(require(a618_0x28b384(0xc1))),Queue_1=__importDefault(require('../../models/Queue')),ShowQueueService_1=__importDefault(require(a618_0x28b384(0xd4))),UpdateQueueService=async(_0x3d2f7c,_0x97f16e,_0x116caa)=>{const _0x22b710=a618_0x28b384,{color:_0x374f16,name:_0x2b8374,orderQueue:_0x3bf9d0}=_0x97f16e,_0x19cb4b=Yup[_0x22b710(0xcd)]()['shape']({'name':Yup[_0x22b710(0xe0)]()[_0x22b710(0xc4)](0x2,_0x22b710(0xbe))[_0x22b710(0xba)](_0x22b710(0xe6),_0x22b710(0xcf),async _0x455b97=>{const _0x3819b3=_0x22b710;if(_0x455b97){const _0x5cb000=await Queue_1[_0x3819b3(0xc5)][_0x3819b3(0xeb)]({'where':{'name':_0x455b97,'id':{[sequelize_1['Op']['ne']]:_0x3d2f7c},'companyId':_0x116caa}});return!_0x5cb000;}return!![];}),'color':Yup[_0x22b710(0xe0)]()[_0x22b710(0xb5)](_0x22b710(0xd9))['test'](_0x22b710(0xd3),_0x22b710(0xd9),async _0x38df3e=>{const _0x596167=_0x22b710;if(_0x38df3e){const _0x3099b3=/^#[0-9a-f]{3,6}$/i;return _0x3099b3[_0x596167(0xba)](_0x38df3e);}return!![];})[_0x22b710(0xba)](_0x22b710(0xbb),_0x22b710(0xdb),async _0x21614a=>{const _0x42bf82=_0x22b710;if(_0x21614a){const _0x3da69f=await Queue_1[_0x42bf82(0xc5)][_0x42bf82(0xeb)]({'where':{'color':_0x21614a,'id':{[sequelize_1['Op']['ne']]:_0x3d2f7c},'companyId':_0x116caa}});return!_0x3da69f;}return!![];}),'orderQueue':Yup['number']()[_0x22b710(0xcb)]((_0x43d7a0,_0x378e7e)=>{return _0x378e7e===''?undefined:_0x43d7a0;})[_0x22b710(0xc6)](_0x22b710(0xce))['required']('ERR_QUEUE_ORDER_REQUIRED')['min'](0x1,'ERR_QUEUE_ORDER_INVALID')['integer']('ERR_QUEUE_ORDER_INVALID')[_0x22b710(0xba)](_0x22b710(0xe9),_0x22b710(0xc3),async _0x21116a=>{const _0x16fe98=_0x22b710;if(_0x21116a&&_0x21116a>=0x1){const _0x438bd2=await Queue_1[_0x16fe98(0xc5)][_0x16fe98(0xeb)]({'where':{'orderQueue':_0x21116a,'id':{[sequelize_1['Op']['ne']]:_0x3d2f7c},'companyId':_0x116caa}});return!_0x438bd2;}return!![];})});try{await _0x19cb4b[_0x22b710(0xc7)]({'color':_0x374f16,'name':_0x2b8374,'orderQueue':_0x3bf9d0});}catch(_0x41506c){throw new AppError_1[(_0x22b710(0xc5))](_0x41506c[_0x22b710(0xc9)]);}const _0x224277=await(0x0,ShowQueueService_1['default'])(_0x3d2f7c,_0x116caa);if(_0x224277[_0x22b710(0xc8)]!==_0x116caa)throw new AppError_1[(_0x22b710(0xc5))](_0x22b710(0xc2));return await _0x224277[_0x22b710(0xcc)](_0x97f16e),_0x224277;};exports[a618_0x28b384(0xc5)]=UpdateQueueService;