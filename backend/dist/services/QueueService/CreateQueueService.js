'use strict';const a614_0x4dead7=a614_0x36ac;function a614_0xc40d(){const _0x4c5955=['toString','typeError','hasOwnProperty','413KavavQ','call','2024QWFMLU','ERR_QUEUE_INVALID_COLOR','862431zSNJsR','number','(((.+)+)+)+$','test','plan','Check-unique-order','object','defineProperty','ERR_QUEUE_ORDER_INVALID','ERR_QUEUE_INVALID_NAME','transform','5332182gGcbqo','5230539hRrFOa','Check-color-exists','queues','create','ERR_QUEUE_ORDER_ALREADY_EXISTS','428nziPrw','required','ERR_QUEUE_ORDER_REQUIRED','../../models/Queue','count','__esModule','findOne','constructor','645000UfBvYf','__importStar','get','configurable','ERR_QUEUE_COLOR_ALREADY_EXISTS','validate','__setModuleDefault','22095WJQkpP','18152xCVIKm','length','message','default','search','2052QQklMW','yup','ERR_QUEUE_NAME_ALREADY_EXISTS','min','writable','string','Check-unique-name','prototype','shape'];a614_0xc40d=function(){return _0x4c5955;};return a614_0xc40d();}(function(_0x51409c,_0x19505b){const _0x526ad1=a614_0x36ac,_0x4f0546=_0x51409c();while(!![]){try{const _0x31b7f0=-parseInt(_0x526ad1(0x186))/0x1+parseInt(_0x526ad1(0x184))/0x2*(parseInt(_0x526ad1(0x176))/0x3)+-parseInt(_0x526ad1(0x161))/0x4*(-parseInt(_0x526ad1(0x170))/0x5)+parseInt(_0x526ad1(0x15b))/0x6+parseInt(_0x526ad1(0x182))/0x7*(parseInt(_0x526ad1(0x171))/0x8)+-parseInt(_0x526ad1(0x15c))/0x9+parseInt(_0x526ad1(0x169))/0xa;if(_0x31b7f0===_0x19505b)break;else _0x4f0546['push'](_0x4f0546['shift']());}catch(_0x46ca95){_0x4f0546['push'](_0x4f0546['shift']());}}}(a614_0xc40d,0xc563b));var __createBinding=this&&this['__createBinding']||(Object[a614_0x4dead7(0x15f)]?function(_0x53c156,_0x5c7dfb,_0x53d235,_0x1774c1){const _0x31c51f=a614_0x4dead7;if(_0x1774c1===undefined)_0x1774c1=_0x53d235;var _0x9d212c=Object['getOwnPropertyDescriptor'](_0x5c7dfb,_0x53d235);(!_0x9d212c||(_0x31c51f(0x16b)in _0x9d212c?!_0x5c7dfb['__esModule']:_0x9d212c[_0x31c51f(0x17a)]||_0x9d212c[_0x31c51f(0x16c)]))&&(_0x9d212c={'enumerable':!![],'get':function(){return _0x5c7dfb[_0x53d235];}}),Object[_0x31c51f(0x18d)](_0x53c156,_0x1774c1,_0x9d212c);}:function(_0x4ae352,_0x5d85f9,_0x4b4522,_0x97b380){if(_0x97b380===undefined)_0x97b380=_0x4b4522;_0x4ae352[_0x97b380]=_0x5d85f9[_0x4b4522];}),__setModuleDefault=this&&this[a614_0x4dead7(0x16f)]||(Object[a614_0x4dead7(0x15f)]?function(_0xcb92d,_0x2d3ced){const _0x519995=a614_0x4dead7;Object[_0x519995(0x18d)](_0xcb92d,'default',{'enumerable':!![],'value':_0x2d3ced});}:function(_0x4eb240,_0x5691ab){_0x4eb240['default']=_0x5691ab;}),__importStar=this&&this[a614_0x4dead7(0x16a)]||(function(){const _0x14c86a=(function(){let _0x919016=!![];return function(_0x837c4,_0x36b646){const _0x1cca01=_0x919016?function(){if(_0x36b646){const _0x53b02f=_0x36b646['apply'](_0x837c4,arguments);return _0x36b646=null,_0x53b02f;}}:function(){};return _0x919016=![],_0x1cca01;};}()),_0x32b576=_0x14c86a(this,function(){const _0x404b65=a614_0x36ac;return _0x32b576['toString']()[_0x404b65(0x175)](_0x404b65(0x188))[_0x404b65(0x17f)]()[_0x404b65(0x168)](_0x32b576)[_0x404b65(0x175)](_0x404b65(0x188));});_0x32b576();var _0x185729=function(_0x4ee680){return _0x185729=Object['getOwnPropertyNames']||function(_0x3aefa6){const _0x104cf8=a614_0x36ac;var _0xa6506d=[];for(var _0x43ac10 in _0x3aefa6)if(Object[_0x104cf8(0x17d)][_0x104cf8(0x181)][_0x104cf8(0x183)](_0x3aefa6,_0x43ac10))_0xa6506d[_0xa6506d[_0x104cf8(0x172)]]=_0x43ac10;return _0xa6506d;},_0x185729(_0x4ee680);};return function(_0x1bef5f){const _0x57feb5=a614_0x36ac;if(_0x1bef5f&&_0x1bef5f[_0x57feb5(0x166)])return _0x1bef5f;var _0x9db2f4={};if(_0x1bef5f!=null){for(var _0x365945=_0x185729(_0x1bef5f),_0x1a1f71=0x0;_0x1a1f71<_0x365945['length'];_0x1a1f71++)if(_0x365945[_0x1a1f71]!==_0x57feb5(0x174))__createBinding(_0x9db2f4,_0x1bef5f,_0x365945[_0x1a1f71]);}return __setModuleDefault(_0x9db2f4,_0x1bef5f),_0x9db2f4;};}()),__importDefault=this&&this['__importDefault']||function(_0x7f2bc3){const _0x1337ea=a614_0x4dead7;return _0x7f2bc3&&_0x7f2bc3[_0x1337ea(0x166)]?_0x7f2bc3:{'default':_0x7f2bc3};};Object[a614_0x4dead7(0x18d)](exports,a614_0x4dead7(0x166),{'value':!![]});function a614_0x36ac(_0x3d92ae,_0x37628f){const _0x2e9032=a614_0xc40d();return a614_0x36ac=function(_0x143631,_0x1f9eba){_0x143631=_0x143631-0x15a;let _0xc40d6d=_0x2e9032[_0x143631];return _0xc40d6d;},a614_0x36ac(_0x3d92ae,_0x37628f);}const Yup=__importStar(require(a614_0x4dead7(0x177))),AppError_1=__importDefault(require('../../errors/AppError')),Queue_1=__importDefault(require(a614_0x4dead7(0x164))),Company_1=__importDefault(require('../../models/Company')),Plan_1=__importDefault(require('../../models/Plan')),CreateQueueService=async _0x30b0a3=>{const _0x513e69=a614_0x4dead7,{color:_0x5b7ccb,name:_0x45af35,companyId:_0x33c2fe,orderQueue:_0x518f76}=_0x30b0a3,_0x2a4649=await Company_1['default'][_0x513e69(0x167)]({'where':{'id':_0x33c2fe},'include':[{'model':Plan_1[_0x513e69(0x174)],'as':_0x513e69(0x18a)}]});if(_0x2a4649!==null){const _0x168d48=await Queue_1['default'][_0x513e69(0x165)]({'where':{'companyId':_0x33c2fe}});if(_0x168d48>=_0x2a4649[_0x513e69(0x18a)][_0x513e69(0x15e)])throw new AppError_1['default']('Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20'+_0x168d48);}const _0x1f06ce=Yup[_0x513e69(0x18c)]()[_0x513e69(0x17e)]({'name':Yup[_0x513e69(0x17b)]()[_0x513e69(0x179)](0x2,_0x513e69(0x18f))[_0x513e69(0x162)](_0x513e69(0x18f))['test'](_0x513e69(0x17c),_0x513e69(0x178),async _0x4baf1b=>{const _0x2d529f=_0x513e69;if(_0x4baf1b){const _0x9952fb=await Queue_1['default'][_0x2d529f(0x167)]({'where':{'name':_0x4baf1b,'companyId':_0x33c2fe}});return!_0x9952fb;}return![];}),'color':Yup[_0x513e69(0x17b)]()[_0x513e69(0x162)](_0x513e69(0x185))['test']('Check-color',_0x513e69(0x185),async _0x3a5188=>{const _0x588cd5=_0x513e69;if(_0x3a5188){const _0x36551b=/^#[0-9a-f]{3,6}$/i;return _0x36551b[_0x588cd5(0x189)](_0x3a5188);}return![];})['test'](_0x513e69(0x15d),_0x513e69(0x16d),async _0x580f93=>{const _0x55b6ec=_0x513e69;if(_0x580f93){const _0x372335=await Queue_1[_0x55b6ec(0x174)][_0x55b6ec(0x167)]({'where':{'color':_0x580f93,'companyId':_0x33c2fe}});return!_0x372335;}return![];}),'orderQueue':Yup[_0x513e69(0x187)]()[_0x513e69(0x15a)]((_0x32b48d,_0x453d65)=>{return _0x453d65===''?undefined:_0x32b48d;})[_0x513e69(0x180)](_0x513e69(0x163))[_0x513e69(0x162)](_0x513e69(0x163))[_0x513e69(0x179)](0x1,_0x513e69(0x18e))['integer'](_0x513e69(0x18e))[_0x513e69(0x189)](_0x513e69(0x18b),_0x513e69(0x160),async _0x5a974a=>{const _0x180d26=_0x513e69;if(_0x5a974a&&_0x5a974a>=0x1){const _0x1cb31d=await Queue_1[_0x180d26(0x174)]['findOne']({'where':{'orderQueue':_0x5a974a,'companyId':_0x33c2fe}});return!_0x1cb31d;}return!![];})});try{await _0x1f06ce[_0x513e69(0x16e)]({'color':_0x5b7ccb,'name':_0x45af35,'orderQueue':_0x518f76});}catch(_0x1b270e){throw new AppError_1['default'](_0x1b270e[_0x513e69(0x173)]);}const _0x48cf78=await Queue_1[_0x513e69(0x174)][_0x513e69(0x15f)](_0x30b0a3);return _0x48cf78;};exports[a614_0x4dead7(0x174)]=CreateQueueService;