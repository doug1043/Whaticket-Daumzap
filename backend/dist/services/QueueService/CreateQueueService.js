'use strict';function a504_0x39f4(_0x54fa49,_0x4ec759){const _0x48838d=a504_0x1eb9();return a504_0x39f4=function(_0x4900a1,_0x34be5e){_0x4900a1=_0x4900a1-0x78;let _0x1eb9e1=_0x48838d[_0x4900a1];return _0x1eb9e1;},a504_0x39f4(_0x54fa49,_0x4ec759);}function a504_0x1eb9(){const _0x13ff7f=['183468qgHgsv','ERR_QUEUE_INVALID_NAME','../../models/Company','call','constructor','390qbsETY','min','length','2056784itxtJd','required','test','Check-color-exists','Check-unique-name','__esModule','default','getOwnPropertyDescriptor','get','search','plan','configurable','shape','ERR_QUEUE_NAME_ALREADY_EXISTS','string','917Saalti','33608mBfDVX','yup','317052vRiECt','defineProperty','object','__setModuleDefault','ERR_QUEUE_COLOR_ALREADY_EXISTS','../../models/Plan','4540764dnncsN','hasOwnProperty','Check-color','(((.+)+)+)+$','110870zmpHOI','validate','findOne','ERR_QUEUE_INVALID_COLOR','Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','queues','count','create','getOwnPropertyNames','33981516sYljwC','__importStar','../../models/Queue','writable'];a504_0x1eb9=function(){return _0x13ff7f;};return a504_0x1eb9();}const a504_0x553d79=a504_0x39f4;(function(_0x18e478,_0x34fa3e){const _0x21a0c5=a504_0x39f4,_0x28b475=_0x18e478();while(!![]){try{const _0x344f48=parseInt(_0x21a0c5(0x81))/0x1+parseInt(_0x21a0c5(0xa0))/0x2+parseInt(_0x21a0c5(0x98))/0x3+parseInt(_0x21a0c5(0x87))/0x4+-parseInt(_0x21a0c5(0x8b))/0x5*(-parseInt(_0x21a0c5(0x9d))/0x6)+-parseInt(_0x21a0c5(0x7e))/0x7*(-parseInt(_0x21a0c5(0x7f))/0x8)+-parseInt(_0x21a0c5(0x94))/0x9;if(_0x344f48===_0x34fa3e)break;else _0x28b475['push'](_0x28b475['shift']());}catch(_0xcc4b96){_0x28b475['push'](_0x28b475['shift']());}}}(a504_0x1eb9,0xb8fcc));var __createBinding=this&&this['__createBinding']||(Object[a504_0x553d79(0x92)]?function(_0xf9d4ed,_0x4688dd,_0x12a7ee,_0x44c3ae){const _0x5b1cea=a504_0x553d79;if(_0x44c3ae===undefined)_0x44c3ae=_0x12a7ee;var _0x12dbd6=Object[_0x5b1cea(0xa7)](_0x4688dd,_0x12a7ee);(!_0x12dbd6||(_0x5b1cea(0xa8)in _0x12dbd6?!_0x4688dd[_0x5b1cea(0xa5)]:_0x12dbd6[_0x5b1cea(0x97)]||_0x12dbd6[_0x5b1cea(0x7a)]))&&(_0x12dbd6={'enumerable':!![],'get':function(){return _0x4688dd[_0x12a7ee];}}),Object['defineProperty'](_0xf9d4ed,_0x44c3ae,_0x12dbd6);}:function(_0x3a2c1c,_0xde2d75,_0xccbdaf,_0x8edc7b){if(_0x8edc7b===undefined)_0x8edc7b=_0xccbdaf;_0x3a2c1c[_0x8edc7b]=_0xde2d75[_0xccbdaf];}),__setModuleDefault=this&&this[a504_0x553d79(0x84)]||(Object[a504_0x553d79(0x92)]?function(_0x1ab1df,_0x4b0259){const _0x1166cd=a504_0x553d79;Object[_0x1166cd(0x82)](_0x1ab1df,_0x1166cd(0xa6),{'enumerable':!![],'value':_0x4b0259});}:function(_0x1eb179,_0x308493){const _0x19abf8=a504_0x553d79;_0x1eb179[_0x19abf8(0xa6)]=_0x308493;}),__importStar=this&&this[a504_0x553d79(0x95)]||(function(){const _0x4b260f=(function(){let _0x26bd4b=!![];return function(_0x4d0724,_0x5cc239){const _0x139b82=_0x26bd4b?function(){if(_0x5cc239){const _0x4eb798=_0x5cc239['apply'](_0x4d0724,arguments);return _0x5cc239=null,_0x4eb798;}}:function(){};return _0x26bd4b=![],_0x139b82;};}()),_0x441968=_0x4b260f(this,function(){const _0x5e7ac4=a504_0x39f4;return _0x441968['toString']()[_0x5e7ac4(0x78)](_0x5e7ac4(0x8a))['toString']()[_0x5e7ac4(0x9c)](_0x441968)[_0x5e7ac4(0x78)](_0x5e7ac4(0x8a));});_0x441968();var _0x498fa4=function(_0x2a431c){const _0x69aa3b=a504_0x39f4;return _0x498fa4=Object[_0x69aa3b(0x93)]||function(_0x45df60){const _0x113725=_0x69aa3b;var _0x30edc4=[];for(var _0x7900e2 in _0x45df60)if(Object['prototype'][_0x113725(0x88)][_0x113725(0x9b)](_0x45df60,_0x7900e2))_0x30edc4[_0x30edc4[_0x113725(0x9f)]]=_0x7900e2;return _0x30edc4;},_0x498fa4(_0x2a431c);};return function(_0x3dee6d){const _0x5ba33f=a504_0x39f4;if(_0x3dee6d&&_0x3dee6d[_0x5ba33f(0xa5)])return _0x3dee6d;var _0x4c3bda={};if(_0x3dee6d!=null){for(var _0x450927=_0x498fa4(_0x3dee6d),_0x292bff=0x0;_0x292bff<_0x450927[_0x5ba33f(0x9f)];_0x292bff++)if(_0x450927[_0x292bff]!==_0x5ba33f(0xa6))__createBinding(_0x4c3bda,_0x3dee6d,_0x450927[_0x292bff]);}return __setModuleDefault(_0x4c3bda,_0x3dee6d),_0x4c3bda;};}()),__importDefault=this&&this['__importDefault']||function(_0x17d63f){const _0x3ba392=a504_0x553d79;return _0x17d63f&&_0x17d63f[_0x3ba392(0xa5)]?_0x17d63f:{'default':_0x17d63f};};Object[a504_0x553d79(0x82)](exports,a504_0x553d79(0xa5),{'value':!![]});const Yup=__importStar(require(a504_0x553d79(0x80))),AppError_1=__importDefault(require('../../errors/AppError')),Queue_1=__importDefault(require(a504_0x553d79(0x96))),Company_1=__importDefault(require(a504_0x553d79(0x9a))),Plan_1=__importDefault(require(a504_0x553d79(0x86))),CreateQueueService=async _0x17ce0a=>{const _0x48031f=a504_0x553d79,{color:_0x36e903,name:_0x60f91c,companyId:_0x95bdb7}=_0x17ce0a,_0x15a4f4=await Company_1[_0x48031f(0xa6)][_0x48031f(0x8d)]({'where':{'id':_0x95bdb7},'include':[{'model':Plan_1[_0x48031f(0xa6)],'as':_0x48031f(0x79)}]});if(_0x15a4f4!==null){const _0x5a5ae9=await Queue_1[_0x48031f(0xa6)][_0x48031f(0x91)]({'where':{'companyId':_0x95bdb7}});if(_0x5a5ae9>=_0x15a4f4[_0x48031f(0x79)][_0x48031f(0x90)])throw new AppError_1['default'](_0x48031f(0x8f)+_0x5a5ae9);}const _0x336b1a=Yup[_0x48031f(0x83)]()[_0x48031f(0x7b)]({'name':Yup[_0x48031f(0x7d)]()[_0x48031f(0x9e)](0x2,_0x48031f(0x99))[_0x48031f(0xa1)](_0x48031f(0x99))[_0x48031f(0xa2)](_0x48031f(0xa4),_0x48031f(0x7c),async _0x40ff5f=>{const _0x1a2bee=_0x48031f;if(_0x40ff5f){const _0x73c5f6=await Queue_1[_0x1a2bee(0xa6)][_0x1a2bee(0x8d)]({'where':{'name':_0x40ff5f,'companyId':_0x95bdb7}});return!_0x73c5f6;}return![];}),'color':Yup[_0x48031f(0x7d)]()['required']('ERR_QUEUE_INVALID_COLOR')[_0x48031f(0xa2)](_0x48031f(0x89),_0x48031f(0x8e),async _0x7aa926=>{if(_0x7aa926){const _0x29c43a=/^#[0-9a-f]{3,6}$/i;return _0x29c43a['test'](_0x7aa926);}return![];})['test'](_0x48031f(0xa3),_0x48031f(0x85),async _0x2a4743=>{const _0x331c83=_0x48031f;if(_0x2a4743){const _0x341bd7=await Queue_1[_0x331c83(0xa6)][_0x331c83(0x8d)]({'where':{'color':_0x2a4743,'companyId':_0x95bdb7}});return!_0x341bd7;}return![];})});try{await _0x336b1a[_0x48031f(0x8c)]({'color':_0x36e903,'name':_0x60f91c});}catch(_0x208304){throw new AppError_1[(_0x48031f(0xa6))](_0x208304['message']);}const _0x6755e2=await Queue_1['default']['create'](_0x17ce0a);return _0x6755e2;};exports[a504_0x553d79(0xa6)]=CreateQueueService;