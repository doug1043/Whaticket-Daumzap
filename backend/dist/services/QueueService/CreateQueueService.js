function a474_0x420a(_0x5e1a1f,_0x31f103){const _0x14bd39=a474_0x526c();return a474_0x420a=function(_0x1ca36c,_0x39da53){_0x1ca36c=_0x1ca36c-0x1a0;let _0x526c9d=_0x14bd39[_0x1ca36c];return _0x526c9d;},a474_0x420a(_0x5e1a1f,_0x31f103);}const a474_0x42454e=a474_0x420a;(function(_0x10812f,_0x260445){const _0x59d7ca=a474_0x420a,_0x8de2ec=_0x10812f();while(!![]){try{const _0x1cbc8d=-parseInt(_0x59d7ca(0x1a2))/0x1*(-parseInt(_0x59d7ca(0x1bc))/0x2)+parseInt(_0x59d7ca(0x1c0))/0x3+-parseInt(_0x59d7ca(0x1b3))/0x4*(parseInt(_0x59d7ca(0x1c9))/0x5)+parseInt(_0x59d7ca(0x1c8))/0x6+-parseInt(_0x59d7ca(0x1b8))/0x7*(parseInt(_0x59d7ca(0x1c5))/0x8)+-parseInt(_0x59d7ca(0x1a8))/0x9+-parseInt(_0x59d7ca(0x1ac))/0xa*(-parseInt(_0x59d7ca(0x1ce))/0xb);if(_0x1cbc8d===_0x260445)break;else _0x8de2ec['push'](_0x8de2ec['shift']());}catch(_0xd7f08a){_0x8de2ec['push'](_0x8de2ec['shift']());}}}(a474_0x526c,0xa68c8));const a474_0x39da53=(function(){let _0x3068b2=!![];return function(_0x46be7f,_0x4d1a01){const _0x37fb5e=_0x3068b2?function(){const _0x5c87f0=a474_0x420a;if(_0x4d1a01){const _0x46230c=_0x4d1a01[_0x5c87f0(0x1a7)](_0x46be7f,arguments);return _0x4d1a01=null,_0x46230c;}}:function(){};return _0x3068b2=![],_0x37fb5e;};}()),a474_0x1ca36c=a474_0x39da53(this,function(){const _0x3bf176=a474_0x420a;return a474_0x1ca36c[_0x3bf176(0x1be)]()[_0x3bf176(0x1bb)]('(((.+)+)+)+$')[_0x3bf176(0x1be)]()['constructor'](a474_0x1ca36c)['search'](_0x3bf176(0x1c7));});function a474_0x526c(){const _0x35c359=['../../models/Company','352fpgKBs','required','findOne','configurable','1JDWyvB','shape','ERR_QUEUE_COLOR_ALREADY_EXISTS','min','getOwnPropertyDescriptor','apply','7734366tDqsNc','string','plan','ERR_QUEUE_INVALID_NAME','244810VTLzFc','writable','hasOwnProperty','create','call','test','defineProperty','4ALrKiL','queues','Check-color-exists','default','../../models/Queue','14pNVMLA','get','object','search','2304374VnXDgq','__importDefault','toString','__importStar','1292106oDvXqj','Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','validate','ERR_QUEUE_INVALID_COLOR','__createBinding','4443352HgNedx','__setModuleDefault','(((.+)+)+)+$','5715546mldVNJ','3332380hybOUR','__esModule','ERR_QUEUE_NAME_ALREADY_EXISTS','Check-unique-name'];a474_0x526c=function(){return _0x35c359;};return a474_0x526c();}a474_0x1ca36c();'use strict';var __createBinding=this&&this[a474_0x42454e(0x1c4)]||(Object['create']?function(_0x2b2cd7,_0x3b0aa9,_0x4e0c14,_0x6c5897){const _0x566773=a474_0x42454e;if(_0x6c5897===undefined)_0x6c5897=_0x4e0c14;var _0x51b89b=Object[_0x566773(0x1a6)](_0x3b0aa9,_0x4e0c14);(!_0x51b89b||(_0x566773(0x1b9)in _0x51b89b?!_0x3b0aa9['__esModule']:_0x51b89b[_0x566773(0x1ad)]||_0x51b89b[_0x566773(0x1a1)]))&&(_0x51b89b={'enumerable':!![],'get':function(){return _0x3b0aa9[_0x4e0c14];}}),Object[_0x566773(0x1b2)](_0x2b2cd7,_0x6c5897,_0x51b89b);}:function(_0x3d310c,_0x3a096c,_0x1470b7,_0xefd583){if(_0xefd583===undefined)_0xefd583=_0x1470b7;_0x3d310c[_0xefd583]=_0x3a096c[_0x1470b7];}),__setModuleDefault=this&&this[a474_0x42454e(0x1c6)]||(Object['create']?function(_0x211b90,_0x4d488a){const _0x30dd8c=a474_0x42454e;Object[_0x30dd8c(0x1b2)](_0x211b90,_0x30dd8c(0x1b6),{'enumerable':!![],'value':_0x4d488a});}:function(_0x2a4983,_0x264fc7){const _0xe43642=a474_0x42454e;_0x2a4983[_0xe43642(0x1b6)]=_0x264fc7;}),__importStar=this&&this[a474_0x42454e(0x1bf)]||function(_0x18eb99){const _0x197afb=a474_0x42454e;if(_0x18eb99&&_0x18eb99['__esModule'])return _0x18eb99;var _0x4d6358={};if(_0x18eb99!=null){for(var _0x1a12d1 in _0x18eb99)if(_0x1a12d1!==_0x197afb(0x1b6)&&Object['prototype'][_0x197afb(0x1ae)][_0x197afb(0x1b0)](_0x18eb99,_0x1a12d1))__createBinding(_0x4d6358,_0x18eb99,_0x1a12d1);}return __setModuleDefault(_0x4d6358,_0x18eb99),_0x4d6358;},__importDefault=this&&this[a474_0x42454e(0x1bd)]||function(_0x1ed868){const _0x577a47=a474_0x42454e;return _0x1ed868&&_0x1ed868[_0x577a47(0x1ca)]?_0x1ed868:{'default':_0x1ed868};};Object[a474_0x42454e(0x1b2)](exports,a474_0x42454e(0x1ca),{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require('../../errors/AppError')),Queue_1=__importDefault(require(a474_0x42454e(0x1b7))),Company_1=__importDefault(require(a474_0x42454e(0x1cd))),Plan_1=__importDefault(require('../../models/Plan')),CreateQueueService=async _0x164242=>{const _0xbda99d=a474_0x42454e,{color:_0x9bc45a,name:_0x3891a0,companyId:_0x56ff99}=_0x164242,_0x4ebf65=await Company_1['default'][_0xbda99d(0x1a0)]({'where':{'id':_0x56ff99},'include':[{'model':Plan_1['default'],'as':_0xbda99d(0x1aa)}]});if(_0x4ebf65!==null){const _0x4a72d2=await Queue_1['default']['count']({'where':{'companyId':_0x56ff99}});if(_0x4a72d2>=_0x4ebf65[_0xbda99d(0x1aa)][_0xbda99d(0x1b4)])throw new AppError_1[(_0xbda99d(0x1b6))](_0xbda99d(0x1c1)+_0x4a72d2);}const _0x1bb30d=Yup[_0xbda99d(0x1ba)]()[_0xbda99d(0x1a3)]({'name':Yup[_0xbda99d(0x1a9)]()[_0xbda99d(0x1a5)](0x2,_0xbda99d(0x1ab))[_0xbda99d(0x1cf)](_0xbda99d(0x1ab))[_0xbda99d(0x1b1)](_0xbda99d(0x1cc),_0xbda99d(0x1cb),async _0x4818b1=>{const _0x2442a4=_0xbda99d;if(_0x4818b1){const _0x2fc2f1=await Queue_1['default'][_0x2442a4(0x1a0)]({'where':{'name':_0x4818b1,'companyId':_0x56ff99}});return!_0x2fc2f1;}return![];}),'color':Yup[_0xbda99d(0x1a9)]()[_0xbda99d(0x1cf)](_0xbda99d(0x1c3))['test']('Check-color',_0xbda99d(0x1c3),async _0x479336=>{const _0x160b29=_0xbda99d;if(_0x479336){const _0x45fefe=/^#[0-9a-f]{3,6}$/i;return _0x45fefe[_0x160b29(0x1b1)](_0x479336);}return![];})['test'](_0xbda99d(0x1b5),_0xbda99d(0x1a4),async _0x20e257=>{const _0x19de07=_0xbda99d;if(_0x20e257){const _0x11e441=await Queue_1[_0x19de07(0x1b6)][_0x19de07(0x1a0)]({'where':{'color':_0x20e257,'companyId':_0x56ff99}});return!_0x11e441;}return![];})});try{await _0x1bb30d[_0xbda99d(0x1c2)]({'color':_0x9bc45a,'name':_0x3891a0});}catch(_0x232c92){throw new AppError_1[(_0xbda99d(0x1b6))](_0x232c92['message']);}const _0x3e46ed=await Queue_1['default'][_0xbda99d(0x1af)](_0x164242);return _0x3e46ed;};exports['default']=CreateQueueService;