'use strict';const a503_0x4b6e5d=a503_0x320a;(function(_0x448c64,_0x55e002){const _0x1b4583=a503_0x320a,_0x4cecb6=_0x448c64();while(!![]){try{const _0x3a3a74=parseInt(_0x1b4583(0xc4))/0x1+-parseInt(_0x1b4583(0xec))/0x2+parseInt(_0x1b4583(0xc5))/0x3*(parseInt(_0x1b4583(0xf4))/0x4)+-parseInt(_0x1b4583(0xdd))/0x5*(-parseInt(_0x1b4583(0xef))/0x6)+parseInt(_0x1b4583(0xf5))/0x7*(-parseInt(_0x1b4583(0xd7))/0x8)+parseInt(_0x1b4583(0xcf))/0x9*(parseInt(_0x1b4583(0xd2))/0xa)+-parseInt(_0x1b4583(0xc2))/0xb*(-parseInt(_0x1b4583(0xe7))/0xc);if(_0x3a3a74===_0x55e002)break;else _0x4cecb6['push'](_0x4cecb6['shift']());}catch(_0x217a76){_0x4cecb6['push'](_0x4cecb6['shift']());}}}(a503_0x49ff,0x3fba3));var __createBinding=this&&this[a503_0x4b6e5d(0xd6)]||(Object[a503_0x4b6e5d(0xe9)]?function(_0x5ac816,_0x558442,_0x18b4b1,_0x12c0d0){const _0xd27abf=a503_0x4b6e5d;if(_0x12c0d0===undefined)_0x12c0d0=_0x18b4b1;var _0x4e4c8e=Object[_0xd27abf(0xc6)](_0x558442,_0x18b4b1);(!_0x4e4c8e||(_0xd27abf(0xca)in _0x4e4c8e?!_0x558442[_0xd27abf(0xe5)]:_0x4e4c8e[_0xd27abf(0xda)]||_0x4e4c8e[_0xd27abf(0xdf)]))&&(_0x4e4c8e={'enumerable':!![],'get':function(){return _0x558442[_0x18b4b1];}}),Object[_0xd27abf(0xd9)](_0x5ac816,_0x12c0d0,_0x4e4c8e);}:function(_0x76affc,_0x1ee2bd,_0x3ae70a,_0x3e9d4f){if(_0x3e9d4f===undefined)_0x3e9d4f=_0x3ae70a;_0x76affc[_0x3e9d4f]=_0x1ee2bd[_0x3ae70a];}),__setModuleDefault=this&&this[a503_0x4b6e5d(0xeb)]||(Object[a503_0x4b6e5d(0xe9)]?function(_0x101b4a,_0x14b6b3){const _0x3506e8=a503_0x4b6e5d;Object[_0x3506e8(0xd9)](_0x101b4a,_0x3506e8(0xc7),{'enumerable':!![],'value':_0x14b6b3});}:function(_0x445024,_0x31588e){_0x445024['default']=_0x31588e;}),__importStar=this&&this[a503_0x4b6e5d(0xea)]||(function(){const _0x5f74d9=(function(){let _0x2d1cde=!![];return function(_0x5aebcc,_0x444e8f){const _0xea51b1=_0x2d1cde?function(){const _0xb585f5=a503_0x320a;if(_0x444e8f){const _0x4ba630=_0x444e8f[_0xb585f5(0xcc)](_0x5aebcc,arguments);return _0x444e8f=null,_0x4ba630;}}:function(){};return _0x2d1cde=![],_0xea51b1;};}()),_0x4df27d=_0x5f74d9(this,function(){const _0x44693=a503_0x320a;return _0x4df27d[_0x44693(0xf2)]()['search']('(((.+)+)+)+$')['toString']()[_0x44693(0xd5)](_0x4df27d)[_0x44693(0xe8)]('(((.+)+)+)+$');});_0x4df27d();var _0x494163=function(_0x1a1659){const _0x22ad17=a503_0x320a;return _0x494163=Object[_0x22ad17(0xed)]||function(_0x4ec15d){const _0x210561=_0x22ad17;var _0x4f4330=[];for(var _0x34465e in _0x4ec15d)if(Object['prototype'][_0x210561(0xcd)]['call'](_0x4ec15d,_0x34465e))_0x4f4330[_0x4f4330['length']]=_0x34465e;return _0x4f4330;},_0x494163(_0x1a1659);};return function(_0x1770a6){const _0x2284bd=a503_0x320a;if(_0x1770a6&&_0x1770a6['__esModule'])return _0x1770a6;var _0x440e3b={};if(_0x1770a6!=null){for(var _0x55b400=_0x494163(_0x1770a6),_0x2a5ef5=0x0;_0x2a5ef5<_0x55b400[_0x2284bd(0xf3)];_0x2a5ef5++)if(_0x55b400[_0x2a5ef5]!=='default')__createBinding(_0x440e3b,_0x1770a6,_0x55b400[_0x2a5ef5]);}return __setModuleDefault(_0x440e3b,_0x1770a6),_0x440e3b;};}()),__importDefault=this&&this[a503_0x4b6e5d(0xd8)]||function(_0x8a2717){const _0x1a8475=a503_0x4b6e5d;return _0x8a2717&&_0x8a2717[_0x1a8475(0xe5)]?_0x8a2717:{'default':_0x8a2717};};Object[a503_0x4b6e5d(0xd9)](exports,a503_0x4b6e5d(0xe5),{'value':!![]});function a503_0x320a(_0x89dcbd,_0x4d9bc4){const _0xee20f4=a503_0x49ff();return a503_0x320a=function(_0x4fca95,_0x3a0c67){_0x4fca95=_0x4fca95-0xc2;let _0x49ff55=_0xee20f4[_0x4fca95];return _0x49ff55;},a503_0x320a(_0x89dcbd,_0x4d9bc4);}const Yup=__importStar(require(a503_0x4b6e5d(0xee))),AppError_1=__importDefault(require('../../errors/AppError')),Queue_1=__importDefault(require(a503_0x4b6e5d(0xc9))),Company_1=__importDefault(require(a503_0x4b6e5d(0xe0))),Plan_1=__importDefault(require(a503_0x4b6e5d(0xe3))),CreateQueueService=async _0x43ba9c=>{const _0x632426=a503_0x4b6e5d,{color:_0x4146c8,name:_0x1c8e86,companyId:_0x106386}=_0x43ba9c,_0x4d6799=await Company_1[_0x632426(0xc7)][_0x632426(0xf6)]({'where':{'id':_0x106386},'include':[{'model':Plan_1['default'],'as':_0x632426(0xf1)}]});if(_0x4d6799!==null){const _0x43e312=await Queue_1[_0x632426(0xc7)][_0x632426(0xc8)]({'where':{'companyId':_0x106386}});if(_0x43e312>=_0x4d6799[_0x632426(0xf1)][_0x632426(0xc3)])throw new AppError_1[(_0x632426(0xc7))](_0x632426(0xd3)+_0x43e312);}const _0x474521=Yup[_0x632426(0xd0)]()['shape']({'name':Yup[_0x632426(0xce)]()[_0x632426(0xcb)](0x2,_0x632426(0xe4))[_0x632426(0xd4)](_0x632426(0xe4))['test'](_0x632426(0xdc),_0x632426(0xdb),async _0x59cc6d=>{const _0x1fce63=_0x632426;if(_0x59cc6d){const _0x9363f1=await Queue_1[_0x1fce63(0xc7)][_0x1fce63(0xf6)]({'where':{'name':_0x59cc6d,'companyId':_0x106386}});return!_0x9363f1;}return![];}),'color':Yup[_0x632426(0xce)]()[_0x632426(0xd4)](_0x632426(0xd1))[_0x632426(0xf0)]('Check-color',_0x632426(0xd1),async _0x4eab53=>{if(_0x4eab53){const _0xf18c37=/^#[0-9a-f]{3,6}$/i;return _0xf18c37['test'](_0x4eab53);}return![];})[_0x632426(0xf0)](_0x632426(0xde),_0x632426(0xe1),async _0x201eaf=>{const _0x18285a=_0x632426;if(_0x201eaf){const _0x59815f=await Queue_1[_0x18285a(0xc7)][_0x18285a(0xf6)]({'where':{'color':_0x201eaf,'companyId':_0x106386}});return!_0x59815f;}return![];})});try{await _0x474521[_0x632426(0xe6)]({'color':_0x4146c8,'name':_0x1c8e86});}catch(_0x241630){throw new AppError_1[(_0x632426(0xc7))](_0x241630[_0x632426(0xe2)]);}const _0x4cbcac=await Queue_1['default'][_0x632426(0xe9)](_0x43ba9c);return _0x4cbcac;};function a503_0x49ff(){const _0x4447c7=['getOwnPropertyNames','yup','1493124cXQtEr','test','plan','toString','length','8AUOFgg','392mxprZm','findOne','1017863svECyy','queues','190503XoHuua','301956TPiuqc','getOwnPropertyDescriptor','default','count','../../models/Queue','get','min','apply','hasOwnProperty','string','27UFPEaW','object','ERR_QUEUE_INVALID_COLOR','1008310EksvUz','Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','required','constructor','__createBinding','67168NYvjXs','__importDefault','defineProperty','writable','ERR_QUEUE_NAME_ALREADY_EXISTS','Check-unique-name','5KuwmCd','Check-color-exists','configurable','../../models/Company','ERR_QUEUE_COLOR_ALREADY_EXISTS','message','../../models/Plan','ERR_QUEUE_INVALID_NAME','__esModule','validate','12iQUmvl','search','create','__importStar','__setModuleDefault','608968zJJZun'];a503_0x49ff=function(){return _0x4447c7;};return a503_0x49ff();}exports[a503_0x4b6e5d(0xc7)]=CreateQueueService;