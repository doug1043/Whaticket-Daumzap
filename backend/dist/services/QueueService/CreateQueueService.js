const a475_0xd550b9=a475_0x4ce1;(function(_0x26fab1,_0x26246d){const _0x1232af=a475_0x4ce1,_0x1d7847=_0x26fab1();while(!![]){try{const _0x5e920c=-parseInt(_0x1232af(0xaf))/0x1*(parseInt(_0x1232af(0xc4))/0x2)+-parseInt(_0x1232af(0xab))/0x3+parseInt(_0x1232af(0xd0))/0x4+-parseInt(_0x1232af(0xa8))/0x5+parseInt(_0x1232af(0xb4))/0x6+-parseInt(_0x1232af(0xbb))/0x7+-parseInt(_0x1232af(0xb1))/0x8*(-parseInt(_0x1232af(0xcc))/0x9);if(_0x5e920c===_0x26246d)break;else _0x1d7847['push'](_0x1d7847['shift']());}catch(_0x5d3908){_0x1d7847['push'](_0x1d7847['shift']());}}}(a475_0x5637,0x3b3ee));function a475_0x5637(){const _0x3300e5=['139917iCGLNo','defineProperty','call','findOne','106vPpCYK','test','8xCWDwU','constructor','default','1852476RWMPXc','writable','__importStar','apply','../../models/Queue','__setModuleDefault','ERR_QUEUE_INVALID_NAME','665511zoMaXc','getOwnPropertyDescriptor','Check-color-exists','ERR_QUEUE_INVALID_COLOR','shape','Check-unique-name','Check-color','object','plan','7946vhnBLV','yup','message','ERR_QUEUE_COLOR_ALREADY_EXISTS','__esModule','get','validate','hasOwnProperty','3295683KWgrym','__createBinding','count','__importDefault','1619856cRxZlL','search','string','../../models/Company','create','configurable','toString','../../models/Plan','1371885zSLoyJ','(((.+)+)+)+$','required'];a475_0x5637=function(){return _0x3300e5;};return a475_0x5637();}const a475_0x45d67a=(function(){let _0xb28c79=!![];return function(_0x57f991,_0x62ee16){const _0x2cb670=_0xb28c79?function(){const _0x2d4d9c=a475_0x4ce1;if(_0x62ee16){const _0x49e52e=_0x62ee16[_0x2d4d9c(0xb7)](_0x57f991,arguments);return _0x62ee16=null,_0x49e52e;}}:function(){};return _0xb28c79=![],_0x2cb670;};}()),a475_0x52d9c3=a475_0x45d67a(this,function(){const _0x26380e=a475_0x4ce1;return a475_0x52d9c3[_0x26380e(0xa6)]()['search']('(((.+)+)+)+$')['toString']()[_0x26380e(0xb2)](a475_0x52d9c3)[_0x26380e(0xa1)](_0x26380e(0xa9));});a475_0x52d9c3();function a475_0x4ce1(_0x52272e,_0x452e28){const _0x25617f=a475_0x5637();return a475_0x4ce1=function(_0x52d9c3,_0x45d67a){_0x52d9c3=_0x52d9c3-0xa1;let _0x563741=_0x25617f[_0x52d9c3];return _0x563741;},a475_0x4ce1(_0x52272e,_0x452e28);}'use strict';var __createBinding=this&&this[a475_0xd550b9(0xcd)]||(Object[a475_0xd550b9(0xa4)]?function(_0x19d7bd,_0x53edca,_0xd0fabd,_0x56d8b4){const _0x17c4da=a475_0xd550b9;if(_0x56d8b4===undefined)_0x56d8b4=_0xd0fabd;var _0x180222=Object[_0x17c4da(0xbc)](_0x53edca,_0xd0fabd);(!_0x180222||(_0x17c4da(0xc9)in _0x180222?!_0x53edca[_0x17c4da(0xc8)]:_0x180222[_0x17c4da(0xb5)]||_0x180222[_0x17c4da(0xa5)]))&&(_0x180222={'enumerable':!![],'get':function(){return _0x53edca[_0xd0fabd];}}),Object[_0x17c4da(0xac)](_0x19d7bd,_0x56d8b4,_0x180222);}:function(_0x2c39df,_0x2cb66e,_0x1945c,_0x46a1c5){if(_0x46a1c5===undefined)_0x46a1c5=_0x1945c;_0x2c39df[_0x46a1c5]=_0x2cb66e[_0x1945c];}),__setModuleDefault=this&&this[a475_0xd550b9(0xb9)]||(Object['create']?function(_0x58e57b,_0x1c58f7){const _0x290397=a475_0xd550b9;Object[_0x290397(0xac)](_0x58e57b,_0x290397(0xb3),{'enumerable':!![],'value':_0x1c58f7});}:function(_0x73aef9,_0x3b1c2a){_0x73aef9['default']=_0x3b1c2a;}),__importStar=this&&this[a475_0xd550b9(0xb6)]||function(_0x2537a4){const _0x367c8b=a475_0xd550b9;if(_0x2537a4&&_0x2537a4[_0x367c8b(0xc8)])return _0x2537a4;var _0x110e78={};if(_0x2537a4!=null){for(var _0x3045bc in _0x2537a4)if(_0x3045bc!=='default'&&Object['prototype'][_0x367c8b(0xcb)][_0x367c8b(0xad)](_0x2537a4,_0x3045bc))__createBinding(_0x110e78,_0x2537a4,_0x3045bc);}return __setModuleDefault(_0x110e78,_0x2537a4),_0x110e78;},__importDefault=this&&this[a475_0xd550b9(0xcf)]||function(_0x238aa9){return _0x238aa9&&_0x238aa9['__esModule']?_0x238aa9:{'default':_0x238aa9};};Object[a475_0xd550b9(0xac)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a475_0xd550b9(0xc5))),AppError_1=__importDefault(require('../../errors/AppError')),Queue_1=__importDefault(require(a475_0xd550b9(0xb8))),Company_1=__importDefault(require(a475_0xd550b9(0xa3))),Plan_1=__importDefault(require(a475_0xd550b9(0xa7))),CreateQueueService=async _0x2b2d98=>{const _0x29e803=a475_0xd550b9,{color:_0x41ec52,name:_0x5e13aa,companyId:_0x1eceb0}=_0x2b2d98,_0x175624=await Company_1[_0x29e803(0xb3)]['findOne']({'where':{'id':_0x1eceb0},'include':[{'model':Plan_1['default'],'as':'plan'}]});if(_0x175624!==null){const _0xaefad9=await Queue_1[_0x29e803(0xb3)][_0x29e803(0xce)]({'where':{'companyId':_0x1eceb0}});if(_0xaefad9>=_0x175624[_0x29e803(0xc3)]['queues'])throw new AppError_1[(_0x29e803(0xb3))]('Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20'+_0xaefad9);}const _0x24e81f=Yup[_0x29e803(0xc2)]()[_0x29e803(0xbf)]({'name':Yup[_0x29e803(0xa2)]()['min'](0x2,_0x29e803(0xba))[_0x29e803(0xaa)](_0x29e803(0xba))[_0x29e803(0xb0)](_0x29e803(0xc0),'ERR_QUEUE_NAME_ALREADY_EXISTS',async _0x3797a5=>{const _0x1dc02c=_0x29e803;if(_0x3797a5){const _0x3f1a88=await Queue_1[_0x1dc02c(0xb3)]['findOne']({'where':{'name':_0x3797a5,'companyId':_0x1eceb0}});return!_0x3f1a88;}return![];}),'color':Yup['string']()[_0x29e803(0xaa)](_0x29e803(0xbe))[_0x29e803(0xb0)](_0x29e803(0xc1),_0x29e803(0xbe),async _0x20b7ab=>{if(_0x20b7ab){const _0x1ae766=/^#[0-9a-f]{3,6}$/i;return _0x1ae766['test'](_0x20b7ab);}return![];})[_0x29e803(0xb0)](_0x29e803(0xbd),_0x29e803(0xc7),async _0x46e0c1=>{const _0x2aa524=_0x29e803;if(_0x46e0c1){const _0x57d7a2=await Queue_1[_0x2aa524(0xb3)][_0x2aa524(0xae)]({'where':{'color':_0x46e0c1,'companyId':_0x1eceb0}});return!_0x57d7a2;}return![];})});try{await _0x24e81f[_0x29e803(0xca)]({'color':_0x41ec52,'name':_0x5e13aa});}catch(_0x529bcb){throw new AppError_1[(_0x29e803(0xb3))](_0x529bcb[_0x29e803(0xc6)]);}const _0x143087=await Queue_1[_0x29e803(0xb3)][_0x29e803(0xa4)](_0x2b2d98);return _0x143087;};exports[a475_0xd550b9(0xb3)]=CreateQueueService;