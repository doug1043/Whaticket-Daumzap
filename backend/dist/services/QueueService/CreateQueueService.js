const a476_0x46e505=a476_0x407b;(function(_0x4269f5,_0x149d6f){const _0x2f3dae=a476_0x407b,_0x17a805=_0x4269f5();while(!![]){try{const _0x370f44=parseInt(_0x2f3dae(0x1bd))/0x1*(-parseInt(_0x2f3dae(0x1e3))/0x2)+-parseInt(_0x2f3dae(0x1b9))/0x3*(parseInt(_0x2f3dae(0x1d4))/0x4)+-parseInt(_0x2f3dae(0x1c3))/0x5*(-parseInt(_0x2f3dae(0x1d6))/0x6)+-parseInt(_0x2f3dae(0x1da))/0x7+parseInt(_0x2f3dae(0x1be))/0x8+parseInt(_0x2f3dae(0x1d1))/0x9*(-parseInt(_0x2f3dae(0x1e9))/0xa)+parseInt(_0x2f3dae(0x1c9))/0xb;if(_0x370f44===_0x149d6f)break;else _0x17a805['push'](_0x17a805['shift']());}catch(_0x2fa7c1){_0x17a805['push'](_0x17a805['shift']());}}}(a476_0x3429,0xa00f5));function a476_0x407b(_0x9d37f2,_0x38bcca){const _0x55db38=a476_0x3429();return a476_0x407b=function(_0x1cc39e,_0x4604bf){_0x1cc39e=_0x1cc39e-0x1b9;let _0x34297e=_0x55db38[_0x1cc39e];return _0x34297e;},a476_0x407b(_0x9d37f2,_0x38bcca);}const a476_0x4604bf=(function(){let _0x2544dd=!![];return function(_0x336178,_0x6feade){const _0x2bc779=_0x2544dd?function(){const _0x12cef1=a476_0x407b;if(_0x6feade){const _0x5eae73=_0x6feade[_0x12cef1(0x1e6)](_0x336178,arguments);return _0x6feade=null,_0x5eae73;}}:function(){};return _0x2544dd=![],_0x2bc779;};}()),a476_0x1cc39e=a476_0x4604bf(this,function(){const _0x4a1abd=a476_0x407b;return a476_0x1cc39e['toString']()[_0x4a1abd(0x1cb)](_0x4a1abd(0x1d7))[_0x4a1abd(0x1cf)]()[_0x4a1abd(0x1dc)](a476_0x1cc39e)['search'](_0x4a1abd(0x1d7));});a476_0x1cc39e();'use strict';var __createBinding=this&&this[a476_0x46e505(0x1e2)]||(Object[a476_0x46e505(0x1c1)]?function(_0x2f9b00,_0x4dcbb6,_0x1125bf,_0x5714c6){const _0x44354f=a476_0x46e505;if(_0x5714c6===undefined)_0x5714c6=_0x1125bf;var _0x3e4ff0=Object[_0x44354f(0x1db)](_0x4dcbb6,_0x1125bf);(!_0x3e4ff0||(_0x44354f(0x1ca)in _0x3e4ff0?!_0x4dcbb6[_0x44354f(0x1dd)]:_0x3e4ff0[_0x44354f(0x1d9)]||_0x3e4ff0[_0x44354f(0x1de)]))&&(_0x3e4ff0={'enumerable':!![],'get':function(){return _0x4dcbb6[_0x1125bf];}}),Object[_0x44354f(0x1e4)](_0x2f9b00,_0x5714c6,_0x3e4ff0);}:function(_0x3f6a57,_0x47aa4f,_0xb6ce84,_0x1babf9){if(_0x1babf9===undefined)_0x1babf9=_0xb6ce84;_0x3f6a57[_0x1babf9]=_0x47aa4f[_0xb6ce84];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a476_0x46e505(0x1c1)]?function(_0x23e1a7,_0x2b97c3){const _0x429a9d=a476_0x46e505;Object[_0x429a9d(0x1e4)](_0x23e1a7,_0x429a9d(0x1d3),{'enumerable':!![],'value':_0x2b97c3});}:function(_0x510101,_0x59beb3){const _0x53c0e8=a476_0x46e505;_0x510101[_0x53c0e8(0x1d3)]=_0x59beb3;}),__importStar=this&&this[a476_0x46e505(0x1e5)]||function(_0x577883){const _0x3768e8=a476_0x46e505;if(_0x577883&&_0x577883[_0x3768e8(0x1dd)])return _0x577883;var _0xca0570={};if(_0x577883!=null){for(var _0x568fc5 in _0x577883)if(_0x568fc5!==_0x3768e8(0x1d3)&&Object['prototype'][_0x3768e8(0x1bf)][_0x3768e8(0x1d0)](_0x577883,_0x568fc5))__createBinding(_0xca0570,_0x577883,_0x568fc5);}return __setModuleDefault(_0xca0570,_0x577883),_0xca0570;},__importDefault=this&&this[a476_0x46e505(0x1ce)]||function(_0x337e8b){const _0x4720bf=a476_0x46e505;return _0x337e8b&&_0x337e8b[_0x4720bf(0x1dd)]?_0x337e8b:{'default':_0x337e8b};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a476_0x46e505(0x1c6))),AppError_1=__importDefault(require(a476_0x46e505(0x1ba))),Queue_1=__importDefault(require('../../models/Queue')),Company_1=__importDefault(require('../../models/Company')),Plan_1=__importDefault(require(a476_0x46e505(0x1c5))),CreateQueueService=async _0x44fc09=>{const _0x233271=a476_0x46e505,{color:_0x48f6f8,name:_0x2bb97c,companyId:_0x1f4355}=_0x44fc09,_0x199c0f=await Company_1['default'][_0x233271(0x1e0)]({'where':{'id':_0x1f4355},'include':[{'model':Plan_1[_0x233271(0x1d3)],'as':_0x233271(0x1df)}]});if(_0x199c0f!==null){const _0x5e6c4c=await Queue_1[_0x233271(0x1d3)][_0x233271(0x1c4)]({'where':{'companyId':_0x1f4355}});if(_0x5e6c4c>=_0x199c0f['plan'][_0x233271(0x1d5)])throw new AppError_1['default'](_0x233271(0x1cc)+_0x5e6c4c);}const _0x217b6c=Yup['object']()[_0x233271(0x1c0)]({'name':Yup[_0x233271(0x1e7)]()[_0x233271(0x1c2)](0x2,_0x233271(0x1cd))['required'](_0x233271(0x1cd))[_0x233271(0x1c7)](_0x233271(0x1c8),'ERR_QUEUE_NAME_ALREADY_EXISTS',async _0x50d456=>{const _0x538ca3=_0x233271;if(_0x50d456){const _0x106a34=await Queue_1[_0x538ca3(0x1d3)][_0x538ca3(0x1e0)]({'where':{'name':_0x50d456,'companyId':_0x1f4355}});return!_0x106a34;}return![];}),'color':Yup[_0x233271(0x1e7)]()[_0x233271(0x1ea)](_0x233271(0x1bc))[_0x233271(0x1c7)](_0x233271(0x1e8),_0x233271(0x1bc),async _0x3c34d2=>{const _0x806985=_0x233271;if(_0x3c34d2){const _0x2a73bc=/^#[0-9a-f]{3,6}$/i;return _0x2a73bc[_0x806985(0x1c7)](_0x3c34d2);}return![];})['test'](_0x233271(0x1d8),_0x233271(0x1d2),async _0x26a3f7=>{if(_0x26a3f7){const _0x2ad196=await Queue_1['default']['findOne']({'where':{'color':_0x26a3f7,'companyId':_0x1f4355}});return!_0x2ad196;}return![];})});try{await _0x217b6c[_0x233271(0x1bb)]({'color':_0x48f6f8,'name':_0x2bb97c});}catch(_0x5ac28a){throw new AppError_1['default'](_0x5ac28a[_0x233271(0x1e1)]);}const _0x4c7827=await Queue_1[_0x233271(0x1d3)][_0x233271(0x1c1)](_0x44fc09);return _0x4c7827;};exports[a476_0x46e505(0x1d3)]=CreateQueueService;function a476_0x3429(){const _0x198b18=['../../models/Plan','yup','test','Check-unique-name','31576919gMiErB','get','search','Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','ERR_QUEUE_INVALID_NAME','__importDefault','toString','call','7810713gODngr','ERR_QUEUE_COLOR_ALREADY_EXISTS','default','696YitnOG','queues','1160526rqIdpY','(((.+)+)+)+$','Check-color-exists','writable','1605275YJSMJd','getOwnPropertyDescriptor','constructor','__esModule','configurable','plan','findOne','message','__createBinding','15868jqPSTi','defineProperty','__importStar','apply','string','Check-color','10dxFCmJ','required','5547BrADwq','../../errors/AppError','validate','ERR_QUEUE_INVALID_COLOR','137uHPpjH','779368lqLXWo','hasOwnProperty','shape','create','min','5BBpyWk','count'];a476_0x3429=function(){return _0x198b18;};return a476_0x3429();}