'use strict';const a612_0x35dfe3=a612_0x325a;(function(_0x261e47,_0x2d31a7){const _0x520d02=a612_0x325a,_0xd8ff58=_0x261e47();while(!![]){try{const _0x2fe92e=parseInt(_0x520d02(0xbf))/0x1+parseInt(_0x520d02(0xd1))/0x2+parseInt(_0x520d02(0xab))/0x3+parseInt(_0x520d02(0xcc))/0x4*(parseInt(_0x520d02(0xe2))/0x5)+-parseInt(_0x520d02(0xd4))/0x6+-parseInt(_0x520d02(0xca))/0x7+parseInt(_0x520d02(0xd7))/0x8*(-parseInt(_0x520d02(0xc8))/0x9);if(_0x2fe92e===_0x2d31a7)break;else _0xd8ff58['push'](_0xd8ff58['shift']());}catch(_0x2828b6){_0xd8ff58['push'](_0xd8ff58['shift']());}}}(a612_0x3cd4,0x5e4b8));var __createBinding=this&&this[a612_0x35dfe3(0xd3)]||(Object[a612_0x35dfe3(0xdd)]?function(_0x15581b,_0x4081dc,_0x5f116f,_0x588582){const _0x51670=a612_0x35dfe3;if(_0x588582===undefined)_0x588582=_0x5f116f;var _0x58fa79=Object[_0x51670(0xb7)](_0x4081dc,_0x5f116f);(!_0x58fa79||('get'in _0x58fa79?!_0x4081dc['__esModule']:_0x58fa79[_0x51670(0xa9)]||_0x58fa79[_0x51670(0xbd)]))&&(_0x58fa79={'enumerable':!![],'get':function(){return _0x4081dc[_0x5f116f];}}),Object[_0x51670(0xad)](_0x15581b,_0x588582,_0x58fa79);}:function(_0x1c85eb,_0x26e34e,_0x32ac86,_0x5c3035){if(_0x5c3035===undefined)_0x5c3035=_0x32ac86;_0x1c85eb[_0x5c3035]=_0x26e34e[_0x32ac86];}),__setModuleDefault=this&&this[a612_0x35dfe3(0xaf)]||(Object[a612_0x35dfe3(0xdd)]?function(_0x2c7d12,_0xfb6092){const _0xc7540b=a612_0x35dfe3;Object[_0xc7540b(0xad)](_0x2c7d12,_0xc7540b(0xcf),{'enumerable':!![],'value':_0xfb6092});}:function(_0x39dfa1,_0x9f2c9c){const _0x5280c3=a612_0x35dfe3;_0x39dfa1[_0x5280c3(0xcf)]=_0x9f2c9c;}),__importStar=this&&this['__importStar']||(function(){const _0x31576d=(function(){let _0x202c93=!![];return function(_0x5d0245,_0x2580b9){const _0x2a03e9=_0x202c93?function(){if(_0x2580b9){const _0x1f1424=_0x2580b9['apply'](_0x5d0245,arguments);return _0x2580b9=null,_0x1f1424;}}:function(){};return _0x202c93=![],_0x2a03e9;};}()),_0x12e648=_0x31576d(this,function(){const _0x5ed2e8=a612_0x325a;return _0x12e648[_0x5ed2e8(0xda)]()[_0x5ed2e8(0xd8)](_0x5ed2e8(0xae))['toString']()[_0x5ed2e8(0xc6)](_0x12e648)[_0x5ed2e8(0xd8)](_0x5ed2e8(0xae));});_0x12e648();var _0x35a113=function(_0x125c01){const _0x48b26f=a612_0x325a;return _0x35a113=Object[_0x48b26f(0xb9)]||function(_0x1ef40e){const _0x5bea73=_0x48b26f;var _0x437f74=[];for(var _0x58e3ea in _0x1ef40e)if(Object[_0x5bea73(0xbe)][_0x5bea73(0xb4)][_0x5bea73(0xdb)](_0x1ef40e,_0x58e3ea))_0x437f74[_0x437f74[_0x5bea73(0xb5)]]=_0x58e3ea;return _0x437f74;},_0x35a113(_0x125c01);};return function(_0x3cb5ba){const _0x15a550=a612_0x325a;if(_0x3cb5ba&&_0x3cb5ba['__esModule'])return _0x3cb5ba;var _0x4ea6f2={};if(_0x3cb5ba!=null){for(var _0x2ff1d7=_0x35a113(_0x3cb5ba),_0x279903=0x0;_0x279903<_0x2ff1d7['length'];_0x279903++)if(_0x2ff1d7[_0x279903]!==_0x15a550(0xcf))__createBinding(_0x4ea6f2,_0x3cb5ba,_0x2ff1d7[_0x279903]);}return __setModuleDefault(_0x4ea6f2,_0x3cb5ba),_0x4ea6f2;};}()),__importDefault=this&&this[a612_0x35dfe3(0xd6)]||function(_0x25a03a){return _0x25a03a&&_0x25a03a['__esModule']?_0x25a03a:{'default':_0x25a03a};};function a612_0x325a(_0x278ac1,_0x7125bf){const _0x4c8525=a612_0x3cd4();return a612_0x325a=function(_0x523575,_0x516a3a){_0x523575=_0x523575-0xa9;let _0x3cd489=_0x4c8525[_0x523575];return _0x3cd489;},a612_0x325a(_0x278ac1,_0x7125bf);}Object[a612_0x35dfe3(0xad)](exports,a612_0x35dfe3(0xbb),{'value':!![]});const Yup=__importStar(require(a612_0x35dfe3(0xb6))),AppError_1=__importDefault(require(a612_0x35dfe3(0xc3))),Queue_1=__importDefault(require('../../models/Queue')),Company_1=__importDefault(require(a612_0x35dfe3(0xc2))),Plan_1=__importDefault(require(a612_0x35dfe3(0xd0))),CreateQueueService=async _0x227802=>{const _0x5ab84b=a612_0x35dfe3,{color:_0xf8aa2,name:_0xc32a5f,companyId:_0x201ff5,orderQueue:_0x51fc3a}=_0x227802,_0x224dcd=await Company_1[_0x5ab84b(0xcf)]['findOne']({'where':{'id':_0x201ff5},'include':[{'model':Plan_1[_0x5ab84b(0xcf)],'as':_0x5ab84b(0xc5)}]});if(_0x224dcd!==null){const _0x1a1b11=await Queue_1['default'][_0x5ab84b(0xbc)]({'where':{'companyId':_0x201ff5}});if(_0x1a1b11>=_0x224dcd[_0x5ab84b(0xc5)][_0x5ab84b(0xc1)])throw new AppError_1[(_0x5ab84b(0xcf))](_0x5ab84b(0xb2)+_0x1a1b11);}const _0x771b65=Yup[_0x5ab84b(0xc4)]()[_0x5ab84b(0xce)]({'name':Yup['string']()[_0x5ab84b(0xe1)](0x2,_0x5ab84b(0xde))[_0x5ab84b(0xcd)](_0x5ab84b(0xde))[_0x5ab84b(0xb1)](_0x5ab84b(0xba),_0x5ab84b(0xc0),async _0x49eb4a=>{const _0xbde239=_0x5ab84b;if(_0x49eb4a){const _0x274e81=await Queue_1[_0xbde239(0xcf)][_0xbde239(0xaa)]({'where':{'name':_0x49eb4a,'companyId':_0x201ff5}});return!_0x274e81;}return![];}),'color':Yup[_0x5ab84b(0xcb)]()[_0x5ab84b(0xcd)](_0x5ab84b(0xd5))['test'](_0x5ab84b(0xd2),_0x5ab84b(0xd5),async _0x3cf801=>{if(_0x3cf801){const _0x35d8e4=/^#[0-9a-f]{3,6}$/i;return _0x35d8e4['test'](_0x3cf801);}return![];})[_0x5ab84b(0xb1)](_0x5ab84b(0xe0),_0x5ab84b(0xb0),async _0x123064=>{const _0x485620=_0x5ab84b;if(_0x123064){const _0x2d82d4=await Queue_1[_0x485620(0xcf)][_0x485620(0xaa)]({'where':{'color':_0x123064,'companyId':_0x201ff5}});return!_0x2d82d4;}return![];}),'orderQueue':Yup[_0x5ab84b(0xb8)]()['transform']((_0x3cc43d,_0x490fdf)=>{return _0x490fdf===''?undefined:_0x3cc43d;})[_0x5ab84b(0xb3)]('ERR_QUEUE_ORDER_REQUIRED')[_0x5ab84b(0xcd)](_0x5ab84b(0xc9))[_0x5ab84b(0xe1)](0x1,_0x5ab84b(0xdf))[_0x5ab84b(0xc7)]('ERR_QUEUE_ORDER_INVALID')['test'](_0x5ab84b(0xac),_0x5ab84b(0xd9),async _0x2253f1=>{const _0x4625ed=_0x5ab84b;if(_0x2253f1&&_0x2253f1>=0x1){const _0x522cd7=await Queue_1[_0x4625ed(0xcf)][_0x4625ed(0xaa)]({'where':{'orderQueue':_0x2253f1,'companyId':_0x201ff5}});return!_0x522cd7;}return!![];})});try{await _0x771b65['validate']({'color':_0xf8aa2,'name':_0xc32a5f,'orderQueue':_0x51fc3a});}catch(_0x1e85cb){throw new AppError_1[(_0x5ab84b(0xcf))](_0x1e85cb[_0x5ab84b(0xdc)]);}const _0x46c28f=await Queue_1[_0x5ab84b(0xcf)][_0x5ab84b(0xdd)](_0x227802);return _0x46c28f;};exports[a612_0x35dfe3(0xcf)]=CreateQueueService;function a612_0x3cd4(){const _0x369ec7=['yup','getOwnPropertyDescriptor','number','getOwnPropertyNames','Check-unique-name','__esModule','count','configurable','prototype','532765BvwEdr','ERR_QUEUE_NAME_ALREADY_EXISTS','queues','../../models/Company','../../errors/AppError','object','plan','constructor','integer','2979693KoFSRW','ERR_QUEUE_ORDER_REQUIRED','218715NRPCOo','string','716RpALkA','required','shape','default','../../models/Plan','581052bclxqL','Check-color','__createBinding','493410ZZibyh','ERR_QUEUE_INVALID_COLOR','__importDefault','24uIbOVv','search','ERR_QUEUE_ORDER_ALREADY_EXISTS','toString','call','message','create','ERR_QUEUE_INVALID_NAME','ERR_QUEUE_ORDER_INVALID','Check-color-exists','min','3915tDkKoi','writable','findOne','1588485xINHSD','Check-unique-order','defineProperty','(((.+)+)+)+$','__setModuleDefault','ERR_QUEUE_COLOR_ALREADY_EXISTS','test','Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','typeError','hasOwnProperty','length'];a612_0x3cd4=function(){return _0x369ec7;};return a612_0x3cd4();}