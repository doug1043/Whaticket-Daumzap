'use strict';const a502_0x59c24c=a502_0x4ce8;(function(_0x530e5e,_0x516d7f){const _0x157099=a502_0x4ce8,_0x399b09=_0x530e5e();while(!![]){try{const _0x451102=parseInt(_0x157099(0xe5))/0x1+-parseInt(_0x157099(0xe8))/0x2+-parseInt(_0x157099(0xcc))/0x3+parseInt(_0x157099(0xde))/0x4*(-parseInt(_0x157099(0xcb))/0x5)+parseInt(_0x157099(0xe3))/0x6*(-parseInt(_0x157099(0xea))/0x7)+-parseInt(_0x157099(0xef))/0x8*(parseInt(_0x157099(0xf0))/0x9)+-parseInt(_0x157099(0xd1))/0xa*(-parseInt(_0x157099(0xd5))/0xb);if(_0x451102===_0x516d7f)break;else _0x399b09['push'](_0x399b09['shift']());}catch(_0x50e38c){_0x399b09['push'](_0x399b09['shift']());}}}(a502_0x3111,0x5d081));function a502_0x4ce8(_0x364048,_0xad295d){const _0x14cad0=a502_0x3111();return a502_0x4ce8=function(_0x16f4aa,_0x4b5ea6){_0x16f4aa=_0x16f4aa-0xc9;let _0x31112d=_0x14cad0[_0x16f4aa];return _0x31112d;},a502_0x4ce8(_0x364048,_0xad295d);}var __createBinding=this&&this[a502_0x59c24c(0xdc)]||(Object[a502_0x59c24c(0xf1)]?function(_0x274972,_0x55e7e6,_0x393226,_0x3045d2){const _0x580271=a502_0x59c24c;if(_0x3045d2===undefined)_0x3045d2=_0x393226;var _0x4d3a53=Object[_0x580271(0xd7)](_0x55e7e6,_0x393226);(!_0x4d3a53||(_0x580271(0xf5)in _0x4d3a53?!_0x55e7e6[_0x580271(0xe9)]:_0x4d3a53[_0x580271(0xcd)]||_0x4d3a53[_0x580271(0xd0)]))&&(_0x4d3a53={'enumerable':!![],'get':function(){return _0x55e7e6[_0x393226];}}),Object['defineProperty'](_0x274972,_0x3045d2,_0x4d3a53);}:function(_0x3c8389,_0x2396d7,_0x3cf2e6,_0x12467c){if(_0x12467c===undefined)_0x12467c=_0x3cf2e6;_0x3c8389[_0x12467c]=_0x2396d7[_0x3cf2e6];}),__setModuleDefault=this&&this[a502_0x59c24c(0xf8)]||(Object['create']?function(_0x28d0dd,_0x4b0d84){const _0x3ba325=a502_0x59c24c;Object[_0x3ba325(0xe2)](_0x28d0dd,_0x3ba325(0xfd),{'enumerable':!![],'value':_0x4b0d84});}:function(_0x593d61,_0x53f1ae){_0x593d61['default']=_0x53f1ae;}),__importStar=this&&this[a502_0x59c24c(0xf4)]||(function(){const _0x255f39=(function(){let _0x393e65=!![];return function(_0x7c8ac2,_0x2e19b5){const _0x29d21f=_0x393e65?function(){const _0x495c97=a502_0x4ce8;if(_0x2e19b5){const _0x4b09c5=_0x2e19b5[_0x495c97(0xd6)](_0x7c8ac2,arguments);return _0x2e19b5=null,_0x4b09c5;}}:function(){};return _0x393e65=![],_0x29d21f;};}()),_0x597df0=_0x255f39(this,function(){const _0x20be8f=a502_0x4ce8;return _0x597df0[_0x20be8f(0xf9)]()[_0x20be8f(0xdf)](_0x20be8f(0xe4))[_0x20be8f(0xf9)]()[_0x20be8f(0xf6)](_0x597df0)[_0x20be8f(0xdf)](_0x20be8f(0xe4));});_0x597df0();var _0x2fc157=function(_0x17a063){const _0xd329de=a502_0x4ce8;return _0x2fc157=Object[_0xd329de(0xda)]||function(_0x16256c){const _0x647117=_0xd329de;var _0x20af9c=[];for(var _0x5d4e18 in _0x16256c)if(Object[_0x647117(0xe0)][_0x647117(0xdb)][_0x647117(0xe7)](_0x16256c,_0x5d4e18))_0x20af9c[_0x20af9c[_0x647117(0xed)]]=_0x5d4e18;return _0x20af9c;},_0x2fc157(_0x17a063);};return function(_0x3bee7c){const _0x7df8ba=a502_0x4ce8;if(_0x3bee7c&&_0x3bee7c[_0x7df8ba(0xe9)])return _0x3bee7c;var _0x38fe1f={};if(_0x3bee7c!=null){for(var _0xa5bedf=_0x2fc157(_0x3bee7c),_0x141ac5=0x0;_0x141ac5<_0xa5bedf[_0x7df8ba(0xed)];_0x141ac5++)if(_0xa5bedf[_0x141ac5]!=='default')__createBinding(_0x38fe1f,_0x3bee7c,_0xa5bedf[_0x141ac5]);}return __setModuleDefault(_0x38fe1f,_0x3bee7c),_0x38fe1f;};}()),__importDefault=this&&this[a502_0x59c24c(0xfa)]||function(_0x3bda97){const _0x4372ab=a502_0x59c24c;return _0x3bda97&&_0x3bda97[_0x4372ab(0xe9)]?_0x3bda97:{'default':_0x3bda97};};Object[a502_0x59c24c(0xe2)](exports,'__esModule',{'value':!![]});function a502_0x3111(){const _0x573777=['615378XYlWbO','writable','string','Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','configurable','10vYoUVC','../../models/Company','../../models/Plan','count','27591047qUxgPb','apply','getOwnPropertyDescriptor','findOne','Check-color-exists','getOwnPropertyNames','hasOwnProperty','__createBinding','../../models/Queue','12aqqfjB','search','prototype','ERR_QUEUE_NAME_ALREADY_EXISTS','defineProperty','378264EzGfRQ','(((.+)+)+)+$','245362yuPkzw','message','call','1058118kjyiBM','__esModule','49UGPDeJ','ERR_QUEUE_INVALID_NAME','test','length','ERR_QUEUE_INVALID_COLOR','80xdOOPw','650529RrQSYs','create','yup','plan','__importStar','get','constructor','queues','__setModuleDefault','toString','__importDefault','validate','../../errors/AppError','default','Check-color','Check-unique-name','min','object','required','790465DFlPAi'];a502_0x3111=function(){return _0x573777;};return a502_0x3111();}const Yup=__importStar(require(a502_0x59c24c(0xf2))),AppError_1=__importDefault(require(a502_0x59c24c(0xfc))),Queue_1=__importDefault(require(a502_0x59c24c(0xdd))),Company_1=__importDefault(require(a502_0x59c24c(0xd2))),Plan_1=__importDefault(require(a502_0x59c24c(0xd3))),CreateQueueService=async _0x38442d=>{const _0xa08123=a502_0x59c24c,{color:_0x122dab,name:_0x5a05e2,companyId:_0x2d2cb9}=_0x38442d,_0x5d8db0=await Company_1[_0xa08123(0xfd)][_0xa08123(0xd8)]({'where':{'id':_0x2d2cb9},'include':[{'model':Plan_1[_0xa08123(0xfd)],'as':_0xa08123(0xf3)}]});if(_0x5d8db0!==null){const _0x38ea99=await Queue_1[_0xa08123(0xfd)][_0xa08123(0xd4)]({'where':{'companyId':_0x2d2cb9}});if(_0x38ea99>=_0x5d8db0[_0xa08123(0xf3)][_0xa08123(0xf7)])throw new AppError_1[(_0xa08123(0xfd))](_0xa08123(0xcf)+_0x38ea99);}const _0x12544b=Yup[_0xa08123(0xc9)]()['shape']({'name':Yup['string']()[_0xa08123(0x100)](0x2,_0xa08123(0xeb))[_0xa08123(0xca)](_0xa08123(0xeb))[_0xa08123(0xec)](_0xa08123(0xff),_0xa08123(0xe1),async _0x4c20ae=>{const _0xbfb759=_0xa08123;if(_0x4c20ae){const _0x4093cf=await Queue_1['default'][_0xbfb759(0xd8)]({'where':{'name':_0x4c20ae,'companyId':_0x2d2cb9}});return!_0x4093cf;}return![];}),'color':Yup[_0xa08123(0xce)]()['required'](_0xa08123(0xee))[_0xa08123(0xec)](_0xa08123(0xfe),_0xa08123(0xee),async _0x2e6288=>{const _0x2e6aa1=_0xa08123;if(_0x2e6288){const _0xc54f3b=/^#[0-9a-f]{3,6}$/i;return _0xc54f3b[_0x2e6aa1(0xec)](_0x2e6288);}return![];})[_0xa08123(0xec)](_0xa08123(0xd9),'ERR_QUEUE_COLOR_ALREADY_EXISTS',async _0x3be317=>{const _0x346080=_0xa08123;if(_0x3be317){const _0xbd2f0c=await Queue_1['default'][_0x346080(0xd8)]({'where':{'color':_0x3be317,'companyId':_0x2d2cb9}});return!_0xbd2f0c;}return![];})});try{await _0x12544b[_0xa08123(0xfb)]({'color':_0x122dab,'name':_0x5a05e2});}catch(_0xd01b93){throw new AppError_1[(_0xa08123(0xfd))](_0xd01b93[_0xa08123(0xe6)]);}const _0x305639=await Queue_1[_0xa08123(0xfd)][_0xa08123(0xf1)](_0x38442d);return _0x305639;};exports['default']=CreateQueueService;