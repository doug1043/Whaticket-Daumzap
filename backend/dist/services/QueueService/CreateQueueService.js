const a477_0x18127f=a477_0x2b2d;(function(_0x51d0e7,_0x18faa4){const _0x119e19=a477_0x2b2d,_0x5300a5=_0x51d0e7();while(!![]){try{const _0x4eee3e=parseInt(_0x119e19(0x103))/0x1+parseInt(_0x119e19(0xfd))/0x2+-parseInt(_0x119e19(0xdf))/0x3*(parseInt(_0x119e19(0xf8))/0x4)+parseInt(_0x119e19(0xe5))/0x5+-parseInt(_0x119e19(0xe6))/0x6+parseInt(_0x119e19(0x108))/0x7+-parseInt(_0x119e19(0xe3))/0x8;if(_0x4eee3e===_0x18faa4)break;else _0x5300a5['push'](_0x5300a5['shift']());}catch(_0x3ab376){_0x5300a5['push'](_0x5300a5['shift']());}}}(a477_0x9662,0xea740));const a477_0x18f985=(function(){let _0x25871d=!![];return function(_0x49d5d6,_0x3f4d40){const _0x3bb79c=_0x25871d?function(){const _0x490583=a477_0x2b2d;if(_0x3f4d40){const _0x5d2d2b=_0x3f4d40[_0x490583(0x101)](_0x49d5d6,arguments);return _0x3f4d40=null,_0x5d2d2b;}}:function(){};return _0x25871d=![],_0x3bb79c;};}()),a477_0x494588=a477_0x18f985(this,function(){const _0x3ead43=a477_0x2b2d;return a477_0x494588[_0x3ead43(0xe9)]()['search'](_0x3ead43(0xf1))[_0x3ead43(0xe9)]()[_0x3ead43(0xea)](a477_0x494588)[_0x3ead43(0xfa)]('(((.+)+)+)+$');});a477_0x494588();'use strict';var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x402044,_0x5c8b38,_0x495589,_0xcef9db){const _0x3e52ba=a477_0x2b2d;if(_0xcef9db===undefined)_0xcef9db=_0x495589;var _0x5c00b5=Object['getOwnPropertyDescriptor'](_0x5c8b38,_0x495589);(!_0x5c00b5||(_0x3e52ba(0xf9)in _0x5c00b5?!_0x5c8b38['__esModule']:_0x5c00b5[_0x3e52ba(0x106)]||_0x5c00b5[_0x3e52ba(0x10a)]))&&(_0x5c00b5={'enumerable':!![],'get':function(){return _0x5c8b38[_0x495589];}}),Object[_0x3e52ba(0xe0)](_0x402044,_0xcef9db,_0x5c00b5);}:function(_0x3516be,_0x53423f,_0x5679c1,_0xbcf5d){if(_0xbcf5d===undefined)_0xbcf5d=_0x5679c1;_0x3516be[_0xbcf5d]=_0x53423f[_0x5679c1];}),__setModuleDefault=this&&this[a477_0x18127f(0x109)]||(Object[a477_0x18127f(0xe7)]?function(_0x3483e5,_0x23e833){const _0x5b1d4b=a477_0x18127f;Object['defineProperty'](_0x3483e5,_0x5b1d4b(0xfc),{'enumerable':!![],'value':_0x23e833});}:function(_0x33e824,_0x1fc6c9){_0x33e824['default']=_0x1fc6c9;}),__importStar=this&&this[a477_0x18127f(0x104)]||function(_0x172dd){const _0x3121bb=a477_0x18127f;if(_0x172dd&&_0x172dd[_0x3121bb(0xe1)])return _0x172dd;var _0x19a36c={};if(_0x172dd!=null){for(var _0x1b6332 in _0x172dd)if(_0x1b6332!==_0x3121bb(0xfc)&&Object[_0x3121bb(0xf5)][_0x3121bb(0x10f)][_0x3121bb(0xe4)](_0x172dd,_0x1b6332))__createBinding(_0x19a36c,_0x172dd,_0x1b6332);}return __setModuleDefault(_0x19a36c,_0x172dd),_0x19a36c;},__importDefault=this&&this[a477_0x18127f(0xf2)]||function(_0x25d80c){const _0x25d570=a477_0x18127f;return _0x25d80c&&_0x25d80c[_0x25d570(0xe1)]?_0x25d80c:{'default':_0x25d80c};};Object['defineProperty'](exports,a477_0x18127f(0xe1),{'value':!![]});const Yup=__importStar(require(a477_0x18127f(0x100))),AppError_1=__importDefault(require(a477_0x18127f(0x107))),Queue_1=__importDefault(require(a477_0x18127f(0xfe))),Company_1=__importDefault(require(a477_0x18127f(0xed))),Plan_1=__importDefault(require(a477_0x18127f(0xf6))),CreateQueueService=async _0x27d399=>{const _0x193c3c=a477_0x18127f,{color:_0x307e56,name:_0x1a2aa2,companyId:_0x1e4866}=_0x27d399,_0xa70d56=await Company_1[_0x193c3c(0xfc)][_0x193c3c(0xfb)]({'where':{'id':_0x1e4866},'include':[{'model':Plan_1[_0x193c3c(0xfc)],'as':_0x193c3c(0xec)}]});if(_0xa70d56!==null){const _0x54ceaf=await Queue_1[_0x193c3c(0xfc)][_0x193c3c(0xf4)]({'where':{'companyId':_0x1e4866}});if(_0x54ceaf>=_0xa70d56[_0x193c3c(0xec)][_0x193c3c(0xe8)])throw new AppError_1['default'](_0x193c3c(0x10c)+_0x54ceaf);}const _0x5a237b=Yup[_0x193c3c(0x10d)]()[_0x193c3c(0xff)]({'name':Yup[_0x193c3c(0xf7)]()[_0x193c3c(0xee)](0x2,_0x193c3c(0x105))[_0x193c3c(0x10b)](_0x193c3c(0x105))[_0x193c3c(0xeb)](_0x193c3c(0xe2),'ERR_QUEUE_NAME_ALREADY_EXISTS',async _0x2516ad=>{if(_0x2516ad){const _0x28ea07=await Queue_1['default']['findOne']({'where':{'name':_0x2516ad,'companyId':_0x1e4866}});return!_0x28ea07;}return![];}),'color':Yup[_0x193c3c(0xf7)]()[_0x193c3c(0x10b)](_0x193c3c(0x110))['test'](_0x193c3c(0xef),_0x193c3c(0x110),async _0x552b10=>{const _0x15a7b5=_0x193c3c;if(_0x552b10){const _0x44771d=/^#[0-9a-f]{3,6}$/i;return _0x44771d[_0x15a7b5(0xeb)](_0x552b10);}return![];})[_0x193c3c(0xeb)](_0x193c3c(0x102),_0x193c3c(0x10e),async _0x18dd5c=>{const _0x49dd5f=_0x193c3c;if(_0x18dd5c){const _0x1f1402=await Queue_1[_0x49dd5f(0xfc)][_0x49dd5f(0xfb)]({'where':{'color':_0x18dd5c,'companyId':_0x1e4866}});return!_0x1f1402;}return![];})});try{await _0x5a237b[_0x193c3c(0xf3)]({'color':_0x307e56,'name':_0x1a2aa2});}catch(_0x18d84e){throw new AppError_1[(_0x193c3c(0xfc))](_0x18d84e[_0x193c3c(0xf0)]);}const _0x1d25ad=await Queue_1[_0x193c3c(0xfc)][_0x193c3c(0xe7)](_0x27d399);return _0x1d25ad;};function a477_0x2b2d(_0x4dce84,_0x220961){const _0x368cdb=a477_0x9662();return a477_0x2b2d=function(_0x494588,_0x18f985){_0x494588=_0x494588-0xdf;let _0x96621c=_0x368cdb[_0x494588];return _0x96621c;},a477_0x2b2d(_0x4dce84,_0x220961);}exports[a477_0x18127f(0xfc)]=CreateQueueService;function a477_0x9662(){const _0x263039=['default','1719972bgyYVJ','../../models/Queue','shape','yup','apply','Check-color-exists','1591227KJkIJY','__importStar','ERR_QUEUE_INVALID_NAME','writable','../../errors/AppError','1786218ZYoZFm','__setModuleDefault','configurable','required','Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','object','ERR_QUEUE_COLOR_ALREADY_EXISTS','hasOwnProperty','ERR_QUEUE_INVALID_COLOR','318UnkexZ','defineProperty','__esModule','Check-unique-name','14159600osisQY','call','9192920MlWjJm','5915322RcoaSE','create','queues','toString','constructor','test','plan','../../models/Company','min','Check-color','message','(((.+)+)+)+$','__importDefault','validate','count','prototype','../../models/Plan','string','31276gyyVjx','get','search','findOne'];a477_0x9662=function(){return _0x263039;};return a477_0x9662();}