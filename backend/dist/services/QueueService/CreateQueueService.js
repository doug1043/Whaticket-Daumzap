const a467_0x56ad0a=a467_0x4a4f;(function(_0x58ab96,_0x1c7159){const _0x4b248f=a467_0x4a4f,_0x1827a8=_0x58ab96();while(!![]){try{const _0x3bac1f=parseInt(_0x4b248f(0xa9))/0x1+-parseInt(_0x4b248f(0x9b))/0x2*(-parseInt(_0x4b248f(0x8e))/0x3)+-parseInt(_0x4b248f(0xa1))/0x4*(parseInt(_0x4b248f(0xaf))/0x5)+parseInt(_0x4b248f(0x95))/0x6*(-parseInt(_0x4b248f(0x90))/0x7)+parseInt(_0x4b248f(0x9e))/0x8*(-parseInt(_0x4b248f(0xb1))/0x9)+-parseInt(_0x4b248f(0x9a))/0xa*(parseInt(_0x4b248f(0x8a))/0xb)+parseInt(_0x4b248f(0xa4))/0xc;if(_0x3bac1f===_0x1c7159)break;else _0x1827a8['push'](_0x1827a8['shift']());}catch(_0x288e85){_0x1827a8['push'](_0x1827a8['shift']());}}}(a467_0x4fb9,0x474bd));function a467_0x4fb9(){const _0x33e307=['count','ERR_QUEUE_INVALID_NAME','132iAzoHd','default','test','writable','256929ELhypy','shape','14RlWpgo','apply','search','create','getOwnPropertyDescriptor','1635258TDBGeF','../../models/Plan','required','__importDefault','Check-color','229420NNujqc','4OuYTKg','configurable','object','5944paXKSu','__esModule','constructor','26796uLLjMl','hasOwnProperty','../../errors/AppError','7261032GqNuYL','defineProperty','(((.+)+)+)+$','toString','string','546400PGJORr','ERR_QUEUE_COLOR_ALREADY_EXISTS','Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','__setModuleDefault','validate','min','35ZcJMMk','Check-unique-name','1980UevPjq','findOne','yup','plan','prototype'];a467_0x4fb9=function(){return _0x33e307;};return a467_0x4fb9();}const a467_0x2fd98d=(function(){let _0x5e46cf=!![];return function(_0x541f4a,_0x116b04){const _0x240d7d=_0x5e46cf?function(){const _0x13ab38=a467_0x4a4f;if(_0x116b04){const _0x4f4403=_0x116b04[_0x13ab38(0x91)](_0x541f4a,arguments);return _0x116b04=null,_0x4f4403;}}:function(){};return _0x5e46cf=![],_0x240d7d;};}()),a467_0x2c530b=a467_0x2fd98d(this,function(){const _0x21f248=a467_0x4a4f;return a467_0x2c530b['toString']()[_0x21f248(0x92)](_0x21f248(0xa6))[_0x21f248(0xa7)]()[_0x21f248(0xa0)](a467_0x2c530b)['search'](_0x21f248(0xa6));});a467_0x2c530b();function a467_0x4a4f(_0x373023,_0x29ed9a){const _0x3935d8=a467_0x4fb9();return a467_0x4a4f=function(_0x2c530b,_0x2fd98d){_0x2c530b=_0x2c530b-0x85;let _0x4fb9dd=_0x3935d8[_0x2c530b];return _0x4fb9dd;},a467_0x4a4f(_0x373023,_0x29ed9a);}'use strict';var __createBinding=this&&this['__createBinding']||(Object[a467_0x56ad0a(0x93)]?function(_0x2dc438,_0x23aa1c,_0x467b9d,_0xb1691d){const _0x48b087=a467_0x56ad0a;if(_0xb1691d===undefined)_0xb1691d=_0x467b9d;var _0x3d9ecc=Object[_0x48b087(0x94)](_0x23aa1c,_0x467b9d);(!_0x3d9ecc||('get'in _0x3d9ecc?!_0x23aa1c[_0x48b087(0x9f)]:_0x3d9ecc[_0x48b087(0x8d)]||_0x3d9ecc[_0x48b087(0x9c)]))&&(_0x3d9ecc={'enumerable':!![],'get':function(){return _0x23aa1c[_0x467b9d];}}),Object[_0x48b087(0xa5)](_0x2dc438,_0xb1691d,_0x3d9ecc);}:function(_0x40f364,_0x143c0d,_0x2de6d8,_0x28be2d){if(_0x28be2d===undefined)_0x28be2d=_0x2de6d8;_0x40f364[_0x28be2d]=_0x143c0d[_0x2de6d8];}),__setModuleDefault=this&&this[a467_0x56ad0a(0xac)]||(Object[a467_0x56ad0a(0x93)]?function(_0xf58f80,_0x5afc8a){Object['defineProperty'](_0xf58f80,'default',{'enumerable':!![],'value':_0x5afc8a});}:function(_0x2b2bd6,_0xa981c8){_0x2b2bd6['default']=_0xa981c8;}),__importStar=this&&this['__importStar']||function(_0x2f0d34){const _0x2ac850=a467_0x56ad0a;if(_0x2f0d34&&_0x2f0d34[_0x2ac850(0x9f)])return _0x2f0d34;var _0x2e8184={};if(_0x2f0d34!=null){for(var _0x3b900c in _0x2f0d34)if(_0x3b900c!==_0x2ac850(0x8b)&&Object[_0x2ac850(0x87)][_0x2ac850(0xa2)]['call'](_0x2f0d34,_0x3b900c))__createBinding(_0x2e8184,_0x2f0d34,_0x3b900c);}return __setModuleDefault(_0x2e8184,_0x2f0d34),_0x2e8184;},__importDefault=this&&this[a467_0x56ad0a(0x98)]||function(_0x503f84){const _0x35f66f=a467_0x56ad0a;return _0x503f84&&_0x503f84[_0x35f66f(0x9f)]?_0x503f84:{'default':_0x503f84};};Object[a467_0x56ad0a(0xa5)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a467_0x56ad0a(0x85))),AppError_1=__importDefault(require(a467_0x56ad0a(0xa3))),Queue_1=__importDefault(require('../../models/Queue')),Company_1=__importDefault(require('../../models/Company')),Plan_1=__importDefault(require(a467_0x56ad0a(0x96))),CreateQueueService=async _0x1e4066=>{const _0xed5110=a467_0x56ad0a,{color:_0x4c41fd,name:_0x434eb1,companyId:_0x4413e0}=_0x1e4066,_0x2fb293=await Company_1[_0xed5110(0x8b)][_0xed5110(0xb2)]({'where':{'id':_0x4413e0},'include':[{'model':Plan_1['default'],'as':_0xed5110(0x86)}]});if(_0x2fb293!==null){const _0xa74cc5=await Queue_1['default'][_0xed5110(0x88)]({'where':{'companyId':_0x4413e0}});if(_0xa74cc5>=_0x2fb293[_0xed5110(0x86)]['queues'])throw new AppError_1['default'](_0xed5110(0xab)+_0xa74cc5);}const _0xb5344=Yup[_0xed5110(0x9d)]()[_0xed5110(0x8f)]({'name':Yup[_0xed5110(0xa8)]()[_0xed5110(0xae)](0x2,_0xed5110(0x89))[_0xed5110(0x97)](_0xed5110(0x89))['test'](_0xed5110(0xb0),'ERR_QUEUE_NAME_ALREADY_EXISTS',async _0x292bca=>{const _0xe478f4=_0xed5110;if(_0x292bca){const _0x4bdeda=await Queue_1['default'][_0xe478f4(0xb2)]({'where':{'name':_0x292bca,'companyId':_0x4413e0}});return!_0x4bdeda;}return![];}),'color':Yup[_0xed5110(0xa8)]()[_0xed5110(0x97)]('ERR_QUEUE_INVALID_COLOR')[_0xed5110(0x8c)](_0xed5110(0x99),'ERR_QUEUE_INVALID_COLOR',async _0x10f15b=>{const _0x690d2f=_0xed5110;if(_0x10f15b){const _0x4f7ab9=/^#[0-9a-f]{3,6}$/i;return _0x4f7ab9[_0x690d2f(0x8c)](_0x10f15b);}return![];})[_0xed5110(0x8c)]('Check-color-exists',_0xed5110(0xaa),async _0x1dd352=>{const _0x4e0598=_0xed5110;if(_0x1dd352){const _0x4f5617=await Queue_1['default'][_0x4e0598(0xb2)]({'where':{'color':_0x1dd352,'companyId':_0x4413e0}});return!_0x4f5617;}return![];})});try{await _0xb5344[_0xed5110(0xad)]({'color':_0x4c41fd,'name':_0x434eb1});}catch(_0x12c31c){throw new AppError_1[(_0xed5110(0x8b))](_0x12c31c['message']);}const _0x20a69c=await Queue_1['default'][_0xed5110(0x93)](_0x1e4066);return _0x20a69c;};exports[a467_0x56ad0a(0x8b)]=CreateQueueService;