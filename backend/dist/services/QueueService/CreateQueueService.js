'use strict';const a504_0x49c3bb=a504_0x359b;function a504_0x50c6(){const _0x229274=['ERR_QUEUE_NAME_ALREADY_EXISTS','../../models/Company','findOne','14PBhmBG','object','(((.+)+)+)+$','validate','required','min','Check-color-exists','__setModuleDefault','defineProperty','2934740mfnlAM','constructor','1530378uLccMW','Check-unique-name','1273029vupYaw','call','__importDefault','__importStar','86810bAhpYQ','24188PUwBFA','getOwnPropertyDescriptor','ERR_QUEUE_COLOR_ALREADY_EXISTS','../../errors/AppError','__esModule','default','yup','test','ERR_QUEUE_INVALID_NAME','ERR_QUEUE_INVALID_COLOR','1387062GDXPqu','create','hasOwnProperty','Check-color','8GgeiNa','length','2701692zsjvnn','string','configurable','../../models/Queue','message','../../models/Plan','search','56opFIAF','Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','prototype','get','shape','apply','plan','toString'];a504_0x50c6=function(){return _0x229274;};return a504_0x50c6();}(function(_0x367d2d,_0x10ec68){const _0x5b7928=a504_0x359b,_0x106575=_0x367d2d();while(!![]){try{const _0x497ccd=-parseInt(_0x5b7928(0x138))/0x1*(-parseInt(_0x5b7928(0x126))/0x2)+parseInt(_0x5b7928(0x133))/0x3+-parseInt(_0x5b7928(0x14f))/0x4*(-parseInt(_0x5b7928(0x137))/0x5)+parseInt(_0x5b7928(0x142))/0x6+-parseInt(_0x5b7928(0x148))/0x7+parseInt(_0x5b7928(0x146))/0x8*(-parseInt(_0x5b7928(0x131))/0x9)+-parseInt(_0x5b7928(0x12f))/0xa;if(_0x497ccd===_0x10ec68)break;else _0x106575['push'](_0x106575['shift']());}catch(_0x2cb4e6){_0x106575['push'](_0x106575['shift']());}}}(a504_0x50c6,0x35540));var __createBinding=this&&this['__createBinding']||(Object[a504_0x49c3bb(0x143)]?function(_0x2d9598,_0x12f689,_0x4b89fd,_0x1b6608){const _0xa5d979=a504_0x49c3bb;if(_0x1b6608===undefined)_0x1b6608=_0x4b89fd;var _0x590268=Object[_0xa5d979(0x139)](_0x12f689,_0x4b89fd);(!_0x590268||(_0xa5d979(0x152)in _0x590268?!_0x12f689[_0xa5d979(0x13c)]:_0x590268['writable']||_0x590268[_0xa5d979(0x14a)]))&&(_0x590268={'enumerable':!![],'get':function(){return _0x12f689[_0x4b89fd];}}),Object[_0xa5d979(0x12e)](_0x2d9598,_0x1b6608,_0x590268);}:function(_0x3bd2a9,_0x33b88e,_0x555361,_0x1ea4cc){if(_0x1ea4cc===undefined)_0x1ea4cc=_0x555361;_0x3bd2a9[_0x1ea4cc]=_0x33b88e[_0x555361];}),__setModuleDefault=this&&this[a504_0x49c3bb(0x12d)]||(Object['create']?function(_0x3b0ac2,_0x2906af){const _0x2bf136=a504_0x49c3bb;Object[_0x2bf136(0x12e)](_0x3b0ac2,_0x2bf136(0x13d),{'enumerable':!![],'value':_0x2906af});}:function(_0xc2ba76,_0x5c12d1){_0xc2ba76['default']=_0x5c12d1;}),__importStar=this&&this[a504_0x49c3bb(0x136)]||(function(){const _0x36f63c=(function(){let _0x51eb10=!![];return function(_0x120116,_0x105109){const _0x4e296c=_0x51eb10?function(){const _0x411be1=a504_0x359b;if(_0x105109){const _0x578d62=_0x105109[_0x411be1(0x154)](_0x120116,arguments);return _0x105109=null,_0x578d62;}}:function(){};return _0x51eb10=![],_0x4e296c;};}()),_0x174fa3=_0x36f63c(this,function(){const _0xfb3584=a504_0x359b;return _0x174fa3[_0xfb3584(0x156)]()[_0xfb3584(0x14e)](_0xfb3584(0x128))['toString']()[_0xfb3584(0x130)](_0x174fa3)[_0xfb3584(0x14e)](_0xfb3584(0x128));});_0x174fa3();var _0x2e3d07=function(_0x5a0bed){return _0x2e3d07=Object['getOwnPropertyNames']||function(_0x1bf21e){const _0x41c77b=a504_0x359b;var _0x386640=[];for(var _0x515de2 in _0x1bf21e)if(Object[_0x41c77b(0x151)][_0x41c77b(0x144)][_0x41c77b(0x134)](_0x1bf21e,_0x515de2))_0x386640[_0x386640[_0x41c77b(0x147)]]=_0x515de2;return _0x386640;},_0x2e3d07(_0x5a0bed);};return function(_0x2bd5a9){const _0x35f417=a504_0x359b;if(_0x2bd5a9&&_0x2bd5a9['__esModule'])return _0x2bd5a9;var _0x35b332={};if(_0x2bd5a9!=null){for(var _0x2ae998=_0x2e3d07(_0x2bd5a9),_0x57b146=0x0;_0x57b146<_0x2ae998['length'];_0x57b146++)if(_0x2ae998[_0x57b146]!==_0x35f417(0x13d))__createBinding(_0x35b332,_0x2bd5a9,_0x2ae998[_0x57b146]);}return __setModuleDefault(_0x35b332,_0x2bd5a9),_0x35b332;};}()),__importDefault=this&&this[a504_0x49c3bb(0x135)]||function(_0x5ac71b){const _0x59865e=a504_0x49c3bb;return _0x5ac71b&&_0x5ac71b[_0x59865e(0x13c)]?_0x5ac71b:{'default':_0x5ac71b};};function a504_0x359b(_0x15257d,_0x85987){const _0x13d7b2=a504_0x50c6();return a504_0x359b=function(_0x558a22,_0x123900){_0x558a22=_0x558a22-0x125;let _0x50c6d8=_0x13d7b2[_0x558a22];return _0x50c6d8;},a504_0x359b(_0x15257d,_0x85987);}Object[a504_0x49c3bb(0x12e)](exports,a504_0x49c3bb(0x13c),{'value':!![]});const Yup=__importStar(require(a504_0x49c3bb(0x13e))),AppError_1=__importDefault(require(a504_0x49c3bb(0x13b))),Queue_1=__importDefault(require(a504_0x49c3bb(0x14b))),Company_1=__importDefault(require(a504_0x49c3bb(0x158))),Plan_1=__importDefault(require(a504_0x49c3bb(0x14d))),CreateQueueService=async _0x431e64=>{const _0x41aa8c=a504_0x49c3bb,{color:_0x2a88aa,name:_0x5d83dc,companyId:_0x41f02c}=_0x431e64,_0x50b3f0=await Company_1['default'][_0x41aa8c(0x125)]({'where':{'id':_0x41f02c},'include':[{'model':Plan_1[_0x41aa8c(0x13d)],'as':_0x41aa8c(0x155)}]});if(_0x50b3f0!==null){const _0x51d403=await Queue_1[_0x41aa8c(0x13d)]['count']({'where':{'companyId':_0x41f02c}});if(_0x51d403>=_0x50b3f0[_0x41aa8c(0x155)]['queues'])throw new AppError_1[(_0x41aa8c(0x13d))](_0x41aa8c(0x150)+_0x51d403);}const _0x103b57=Yup[_0x41aa8c(0x127)]()[_0x41aa8c(0x153)]({'name':Yup[_0x41aa8c(0x149)]()[_0x41aa8c(0x12b)](0x2,_0x41aa8c(0x140))[_0x41aa8c(0x12a)](_0x41aa8c(0x140))[_0x41aa8c(0x13f)](_0x41aa8c(0x132),_0x41aa8c(0x157),async _0x3431a2=>{const _0x367c74=_0x41aa8c;if(_0x3431a2){const _0x59c81b=await Queue_1[_0x367c74(0x13d)][_0x367c74(0x125)]({'where':{'name':_0x3431a2,'companyId':_0x41f02c}});return!_0x59c81b;}return![];}),'color':Yup[_0x41aa8c(0x149)]()[_0x41aa8c(0x12a)](_0x41aa8c(0x141))[_0x41aa8c(0x13f)](_0x41aa8c(0x145),'ERR_QUEUE_INVALID_COLOR',async _0xf4137f=>{const _0x14b567=_0x41aa8c;if(_0xf4137f){const _0x5a371e=/^#[0-9a-f]{3,6}$/i;return _0x5a371e[_0x14b567(0x13f)](_0xf4137f);}return![];})[_0x41aa8c(0x13f)](_0x41aa8c(0x12c),_0x41aa8c(0x13a),async _0x31a539=>{const _0x20d766=_0x41aa8c;if(_0x31a539){const _0x206fdb=await Queue_1[_0x20d766(0x13d)][_0x20d766(0x125)]({'where':{'color':_0x31a539,'companyId':_0x41f02c}});return!_0x206fdb;}return![];})});try{await _0x103b57[_0x41aa8c(0x129)]({'color':_0x2a88aa,'name':_0x5d83dc});}catch(_0x911f0a){throw new AppError_1[(_0x41aa8c(0x13d))](_0x911f0a[_0x41aa8c(0x14c)]);}const _0x3aed16=await Queue_1['default'][_0x41aa8c(0x143)](_0x431e64);return _0x3aed16;};exports[a504_0x49c3bb(0x13d)]=CreateQueueService;