'use strict';const a507_0x1db562=a507_0x436a;(function(_0x260286,_0x244cb2){const _0x1d7300=a507_0x436a,_0x56ec77=_0x260286();while(!![]){try{const _0x136907=-parseInt(_0x1d7300(0x11f))/0x1+-parseInt(_0x1d7300(0x107))/0x2*(-parseInt(_0x1d7300(0x10b))/0x3)+-parseInt(_0x1d7300(0x126))/0x4+parseInt(_0x1d7300(0x10e))/0x5*(parseInt(_0x1d7300(0x11a))/0x6)+parseInt(_0x1d7300(0x11b))/0x7+parseInt(_0x1d7300(0x122))/0x8+-parseInt(_0x1d7300(0x129))/0x9;if(_0x136907===_0x244cb2)break;else _0x56ec77['push'](_0x56ec77['shift']());}catch(_0xaaad07){_0x56ec77['push'](_0x56ec77['shift']());}}}(a507_0x3d39,0x77048));var __createBinding=this&&this['__createBinding']||(Object[a507_0x1db562(0x127)]?function(_0x19afdd,_0x55526c,_0x3b2d1c,_0x2ea4ee){const _0x5d0c08=a507_0x1db562;if(_0x2ea4ee===undefined)_0x2ea4ee=_0x3b2d1c;var _0x3e671a=Object[_0x5d0c08(0x103)](_0x55526c,_0x3b2d1c);(!_0x3e671a||(_0x5d0c08(0x115)in _0x3e671a?!_0x55526c[_0x5d0c08(0x104)]:_0x3e671a[_0x5d0c08(0x123)]||_0x3e671a[_0x5d0c08(0x114)]))&&(_0x3e671a={'enumerable':!![],'get':function(){return _0x55526c[_0x3b2d1c];}}),Object[_0x5d0c08(0x110)](_0x19afdd,_0x2ea4ee,_0x3e671a);}:function(_0x15a0c5,_0x222d0b,_0x2910c0,_0x2ee84a){if(_0x2ee84a===undefined)_0x2ee84a=_0x2910c0;_0x15a0c5[_0x2ee84a]=_0x222d0b[_0x2910c0];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a507_0x1db562(0x127)]?function(_0xf5d6af,_0x20077c){const _0x54c1d4=a507_0x1db562;Object['defineProperty'](_0xf5d6af,_0x54c1d4(0x11c),{'enumerable':!![],'value':_0x20077c});}:function(_0x1dd37b,_0x34e25a){const _0x4e81d4=a507_0x1db562;_0x1dd37b[_0x4e81d4(0x11c)]=_0x34e25a;}),__importStar=this&&this['__importStar']||(function(){const _0x4762d6=(function(){let _0x1c216d=!![];return function(_0x3c1cb5,_0x4db7f1){const _0x36823b=_0x1c216d?function(){const _0x390207=a507_0x436a;if(_0x4db7f1){const _0x4188c6=_0x4db7f1[_0x390207(0x108)](_0x3c1cb5,arguments);return _0x4db7f1=null,_0x4188c6;}}:function(){};return _0x1c216d=![],_0x36823b;};}()),_0x54c5f4=_0x4762d6(this,function(){const _0x5752f7=a507_0x436a;return _0x54c5f4['toString']()[_0x5752f7(0x109)](_0x5752f7(0x10c))[_0x5752f7(0x128)]()[_0x5752f7(0x120)](_0x54c5f4)[_0x5752f7(0x109)](_0x5752f7(0x10c));});_0x54c5f4();var _0x5ce42f=function(_0x1ff443){const _0x27fde1=a507_0x436a;return _0x5ce42f=Object[_0x27fde1(0x112)]||function(_0x5e56ab){const _0x47af42=_0x27fde1;var _0x4cb702=[];for(var _0x2737d5 in _0x5e56ab)if(Object[_0x47af42(0x113)][_0x47af42(0x10d)][_0x47af42(0x118)](_0x5e56ab,_0x2737d5))_0x4cb702[_0x4cb702[_0x47af42(0x106)]]=_0x2737d5;return _0x4cb702;},_0x5ce42f(_0x1ff443);};return function(_0xba576f){const _0x331b40=a507_0x436a;if(_0xba576f&&_0xba576f[_0x331b40(0x104)])return _0xba576f;var _0x176573={};if(_0xba576f!=null){for(var _0x430db8=_0x5ce42f(_0xba576f),_0x33fddc=0x0;_0x33fddc<_0x430db8[_0x331b40(0x106)];_0x33fddc++)if(_0x430db8[_0x33fddc]!==_0x331b40(0x11c))__createBinding(_0x176573,_0xba576f,_0x430db8[_0x33fddc]);}return __setModuleDefault(_0x176573,_0xba576f),_0x176573;};}()),__importDefault=this&&this['__importDefault']||function(_0xcb9566){const _0x47f368=a507_0x1db562;return _0xcb9566&&_0xcb9566[_0x47f368(0x104)]?_0xcb9566:{'default':_0xcb9566};};Object[a507_0x1db562(0x110)](exports,a507_0x1db562(0x104),{'value':!![]});function a507_0x3d39(){const _0x23611a=['Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','../../models/Queue','queues','Check-unique-name','getOwnPropertyDescriptor','__esModule','findOne','length','16jigHTi','apply','search','min','306624Puikme','(((.+)+)+)+$','hasOwnProperty','806090YyeoJZ','shape','defineProperty','../../models/Plan','getOwnPropertyNames','prototype','configurable','get','plan','required','call','test','6ldSqEL','134995kxfrcL','default','../../models/Company','ERR_QUEUE_NAME_ALREADY_EXISTS','360375EuAAKq','constructor','../../errors/AppError','7241360TiOTSG','writable','object','yup','1006444RyiDDJ','create','toString','7234695pnFwTi','validate','ERR_QUEUE_INVALID_COLOR','ERR_QUEUE_INVALID_NAME'];a507_0x3d39=function(){return _0x23611a;};return a507_0x3d39();}function a507_0x436a(_0x22502e,_0x37d551){const _0x51635e=a507_0x3d39();return a507_0x436a=function(_0x426e11,_0x3bce7d){_0x426e11=_0x426e11-0x100;let _0x3d397e=_0x51635e[_0x426e11];return _0x3d397e;},a507_0x436a(_0x22502e,_0x37d551);}const Yup=__importStar(require(a507_0x1db562(0x125))),AppError_1=__importDefault(require(a507_0x1db562(0x121))),Queue_1=__importDefault(require(a507_0x1db562(0x100))),Company_1=__importDefault(require(a507_0x1db562(0x11d))),Plan_1=__importDefault(require(a507_0x1db562(0x111))),CreateQueueService=async _0x24bb23=>{const _0x13c101=a507_0x1db562,{color:_0x413102,name:_0x51cbb0,companyId:_0x2d5000}=_0x24bb23,_0x4f9520=await Company_1[_0x13c101(0x11c)][_0x13c101(0x105)]({'where':{'id':_0x2d5000},'include':[{'model':Plan_1[_0x13c101(0x11c)],'as':_0x13c101(0x116)}]});if(_0x4f9520!==null){const _0x2a5c64=await Queue_1[_0x13c101(0x11c)]['count']({'where':{'companyId':_0x2d5000}});if(_0x2a5c64>=_0x4f9520[_0x13c101(0x116)][_0x13c101(0x101)])throw new AppError_1['default'](_0x13c101(0x12d)+_0x2a5c64);}const _0x3ee83e=Yup[_0x13c101(0x124)]()[_0x13c101(0x10f)]({'name':Yup['string']()[_0x13c101(0x10a)](0x2,_0x13c101(0x12c))[_0x13c101(0x117)](_0x13c101(0x12c))[_0x13c101(0x119)](_0x13c101(0x102),_0x13c101(0x11e),async _0xdfc1d=>{const _0x4f045e=_0x13c101;if(_0xdfc1d){const _0x58098c=await Queue_1[_0x4f045e(0x11c)]['findOne']({'where':{'name':_0xdfc1d,'companyId':_0x2d5000}});return!_0x58098c;}return![];}),'color':Yup['string']()[_0x13c101(0x117)](_0x13c101(0x12b))[_0x13c101(0x119)]('Check-color',_0x13c101(0x12b),async _0x269c95=>{const _0x404b59=_0x13c101;if(_0x269c95){const _0x437a2f=/^#[0-9a-f]{3,6}$/i;return _0x437a2f[_0x404b59(0x119)](_0x269c95);}return![];})['test']('Check-color-exists','ERR_QUEUE_COLOR_ALREADY_EXISTS',async _0x15a7ab=>{const _0x4e6455=_0x13c101;if(_0x15a7ab){const _0x4c1c4b=await Queue_1[_0x4e6455(0x11c)]['findOne']({'where':{'color':_0x15a7ab,'companyId':_0x2d5000}});return!_0x4c1c4b;}return![];})});try{await _0x3ee83e[_0x13c101(0x12a)]({'color':_0x413102,'name':_0x51cbb0});}catch(_0x5e8f2d){throw new AppError_1[(_0x13c101(0x11c))](_0x5e8f2d['message']);}const _0x4229cb=await Queue_1[_0x13c101(0x11c)][_0x13c101(0x127)](_0x24bb23);return _0x4229cb;};exports[a507_0x1db562(0x11c)]=CreateQueueService;