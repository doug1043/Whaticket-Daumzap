'use strict';function a508_0x467c(){const _0x460897=['getOwnPropertyDescriptor','22QQtRRE','1887864wgrmKW','apply','../../models/Queue','11530IlsdJA','length','284itUWzC','__createBinding','test','ERR_QUEUE_NAME_ALREADY_EXISTS','plan','219xKtdIw','getOwnPropertyNames','__esModule','writable','default','shape','(((.+)+)+)+$','hasOwnProperty','__importStar','required','13102ZsOmeo','get','../../errors/AppError','Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','toString','create','749110cAqPcE','constructor','__setModuleDefault','ERR_QUEUE_INVALID_NAME','min','Check-color-exists','defineProperty','prototype','ERR_QUEUE_INVALID_COLOR','2421RqkKJe','7hsAGFD','11098140Xilvsr','6154168iXBfKK','findOne','call','validate','string','search','61010SCzJxb','../../models/Plan','__importDefault','ERR_QUEUE_COLOR_ALREADY_EXISTS','../../models/Company','queues'];a508_0x467c=function(){return _0x460897;};return a508_0x467c();}const a508_0x24fd9b=a508_0x5192;(function(_0x19b5ff,_0x4c5ab3){const _0x11f29d=a508_0x5192,_0x32e93b=_0x19b5ff();while(!![]){try{const _0x2385a2=parseInt(_0x11f29d(0xc2))/0x1+parseInt(_0x11f29d(0xbc))/0x2*(-parseInt(_0x11f29d(0xb2))/0x3)+-parseInt(_0x11f29d(0xad))/0x4*(parseInt(_0x11f29d(0xa0))/0x5)+-parseInt(_0x11f29d(0xa8))/0x6+-parseInt(_0x11f29d(0x98))/0x7*(parseInt(_0x11f29d(0x9a))/0x8)+parseInt(_0x11f29d(0x97))/0x9*(parseInt(_0x11f29d(0xab))/0xa)+parseInt(_0x11f29d(0xa7))/0xb*(parseInt(_0x11f29d(0x99))/0xc);if(_0x2385a2===_0x4c5ab3)break;else _0x32e93b['push'](_0x32e93b['shift']());}catch(_0x2065d4){_0x32e93b['push'](_0x32e93b['shift']());}}}(a508_0x467c,0x754dd));var __createBinding=this&&this[a508_0x24fd9b(0xae)]||(Object['create']?function(_0x33a69b,_0x5035b5,_0x3eb2f7,_0x4d9394){const _0x49541f=a508_0x24fd9b;if(_0x4d9394===undefined)_0x4d9394=_0x3eb2f7;var _0x2a1b5f=Object[_0x49541f(0xa6)](_0x5035b5,_0x3eb2f7);(!_0x2a1b5f||(_0x49541f(0xbd)in _0x2a1b5f?!_0x5035b5['__esModule']:_0x2a1b5f[_0x49541f(0xb5)]||_0x2a1b5f['configurable']))&&(_0x2a1b5f={'enumerable':!![],'get':function(){return _0x5035b5[_0x3eb2f7];}}),Object[_0x49541f(0x94)](_0x33a69b,_0x4d9394,_0x2a1b5f);}:function(_0x5cbc40,_0x204190,_0x2f1fba,_0x3581ae){if(_0x3581ae===undefined)_0x3581ae=_0x2f1fba;_0x5cbc40[_0x3581ae]=_0x204190[_0x2f1fba];}),__setModuleDefault=this&&this[a508_0x24fd9b(0xc4)]||(Object['create']?function(_0x11fa63,_0x556cb7){const _0x1c6dde=a508_0x24fd9b;Object[_0x1c6dde(0x94)](_0x11fa63,'default',{'enumerable':!![],'value':_0x556cb7});}:function(_0x58d139,_0xbaf52f){_0x58d139['default']=_0xbaf52f;}),__importStar=this&&this[a508_0x24fd9b(0xba)]||(function(){const _0x158323=(function(){let _0x17ac67=!![];return function(_0x4180a6,_0x229023){const _0x3c8c20=_0x17ac67?function(){const _0x27daef=a508_0x5192;if(_0x229023){const _0x11dd2c=_0x229023[_0x27daef(0xa9)](_0x4180a6,arguments);return _0x229023=null,_0x11dd2c;}}:function(){};return _0x17ac67=![],_0x3c8c20;};}()),_0x42a856=_0x158323(this,function(){const _0x48d8d6=a508_0x5192;return _0x42a856['toString']()[_0x48d8d6(0x9f)](_0x48d8d6(0xb8))[_0x48d8d6(0xc0)]()[_0x48d8d6(0xc3)](_0x42a856)[_0x48d8d6(0x9f)](_0x48d8d6(0xb8));});_0x42a856();var _0x376554=function(_0x40ae43){const _0x69db01=a508_0x5192;return _0x376554=Object[_0x69db01(0xb3)]||function(_0x24815d){const _0x2ba0b8=_0x69db01;var _0x29e041=[];for(var _0x3d1b25 in _0x24815d)if(Object[_0x2ba0b8(0x95)][_0x2ba0b8(0xb9)][_0x2ba0b8(0x9c)](_0x24815d,_0x3d1b25))_0x29e041[_0x29e041['length']]=_0x3d1b25;return _0x29e041;},_0x376554(_0x40ae43);};return function(_0x48d32f){const _0x54d867=a508_0x5192;if(_0x48d32f&&_0x48d32f[_0x54d867(0xb4)])return _0x48d32f;var _0x31d29e={};if(_0x48d32f!=null){for(var _0x4920f6=_0x376554(_0x48d32f),_0x3a9cfe=0x0;_0x3a9cfe<_0x4920f6[_0x54d867(0xac)];_0x3a9cfe++)if(_0x4920f6[_0x3a9cfe]!==_0x54d867(0xb6))__createBinding(_0x31d29e,_0x48d32f,_0x4920f6[_0x3a9cfe]);}return __setModuleDefault(_0x31d29e,_0x48d32f),_0x31d29e;};}()),__importDefault=this&&this[a508_0x24fd9b(0xa2)]||function(_0x52b487){const _0x33d25b=a508_0x24fd9b;return _0x52b487&&_0x52b487[_0x33d25b(0xb4)]?_0x52b487:{'default':_0x52b487};};function a508_0x5192(_0x33858f,_0x4cdc97){const _0x55f945=a508_0x467c();return a508_0x5192=function(_0x2d0fdb,_0x13b964){_0x2d0fdb=_0x2d0fdb-0x94;let _0x467c81=_0x55f945[_0x2d0fdb];return _0x467c81;},a508_0x5192(_0x33858f,_0x4cdc97);}Object[a508_0x24fd9b(0x94)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a508_0x24fd9b(0xbe))),Queue_1=__importDefault(require(a508_0x24fd9b(0xaa))),Company_1=__importDefault(require(a508_0x24fd9b(0xa4))),Plan_1=__importDefault(require(a508_0x24fd9b(0xa1))),CreateQueueService=async _0x4ba8b6=>{const _0x1758f2=a508_0x24fd9b,{color:_0x20f196,name:_0x1ac4a9,companyId:_0x39fcf4}=_0x4ba8b6,_0x14764e=await Company_1[_0x1758f2(0xb6)][_0x1758f2(0x9b)]({'where':{'id':_0x39fcf4},'include':[{'model':Plan_1['default'],'as':_0x1758f2(0xb1)}]});if(_0x14764e!==null){const _0x14652e=await Queue_1[_0x1758f2(0xb6)]['count']({'where':{'companyId':_0x39fcf4}});if(_0x14652e>=_0x14764e['plan'][_0x1758f2(0xa5)])throw new AppError_1[(_0x1758f2(0xb6))](_0x1758f2(0xbf)+_0x14652e);}const _0x33fd3c=Yup['object']()[_0x1758f2(0xb7)]({'name':Yup[_0x1758f2(0x9e)]()[_0x1758f2(0xc6)](0x2,_0x1758f2(0xc5))['required']('ERR_QUEUE_INVALID_NAME')[_0x1758f2(0xaf)]('Check-unique-name',_0x1758f2(0xb0),async _0x190b3d=>{const _0x2701ce=_0x1758f2;if(_0x190b3d){const _0x52141f=await Queue_1[_0x2701ce(0xb6)][_0x2701ce(0x9b)]({'where':{'name':_0x190b3d,'companyId':_0x39fcf4}});return!_0x52141f;}return![];}),'color':Yup[_0x1758f2(0x9e)]()[_0x1758f2(0xbb)](_0x1758f2(0x96))['test']('Check-color',_0x1758f2(0x96),async _0x402835=>{const _0x79ea02=_0x1758f2;if(_0x402835){const _0x59aca4=/^#[0-9a-f]{3,6}$/i;return _0x59aca4[_0x79ea02(0xaf)](_0x402835);}return![];})[_0x1758f2(0xaf)](_0x1758f2(0xc7),_0x1758f2(0xa3),async _0x42b21d=>{if(_0x42b21d){const _0x383841=await Queue_1['default']['findOne']({'where':{'color':_0x42b21d,'companyId':_0x39fcf4}});return!_0x383841;}return![];})});try{await _0x33fd3c[_0x1758f2(0x9d)]({'color':_0x20f196,'name':_0x1ac4a9});}catch(_0x24274b){throw new AppError_1[(_0x1758f2(0xb6))](_0x24274b['message']);}const _0xedb680=await Queue_1[_0x1758f2(0xb6)][_0x1758f2(0xc1)](_0x4ba8b6);return _0xedb680;};exports[a508_0x24fd9b(0xb6)]=CreateQueueService;