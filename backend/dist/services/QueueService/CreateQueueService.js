'use strict';const a507_0x325f2f=a507_0x3101;(function(_0x3c5931,_0x42093d){const _0x2a8ae6=a507_0x3101,_0xa54c6e=_0x3c5931();while(!![]){try{const _0x429aae=-parseInt(_0x2a8ae6(0x192))/0x1*(-parseInt(_0x2a8ae6(0x1b1))/0x2)+parseInt(_0x2a8ae6(0x18d))/0x3+parseInt(_0x2a8ae6(0x190))/0x4*(parseInt(_0x2a8ae6(0x196))/0x5)+-parseInt(_0x2a8ae6(0x19d))/0x6*(-parseInt(_0x2a8ae6(0x183))/0x7)+parseInt(_0x2a8ae6(0x1b4))/0x8*(-parseInt(_0x2a8ae6(0x1a5))/0x9)+parseInt(_0x2a8ae6(0x1b0))/0xa+parseInt(_0x2a8ae6(0x19e))/0xb*(-parseInt(_0x2a8ae6(0x18f))/0xc);if(_0x429aae===_0x42093d)break;else _0xa54c6e['push'](_0xa54c6e['shift']());}catch(_0x34fa22){_0xa54c6e['push'](_0xa54c6e['shift']());}}}(a507_0x402b,0x457a4));function a507_0x402b(){const _0x4a891b=['799024TOceBt','shape','default','min','196nTayPY','__setModuleDefault','search','__createBinding','ERR_QUEUE_NAME_ALREADY_EXISTS','create','findOne','__esModule','Check-color-exists','queues','1528473iPSxXx','apply','1523868dVJygg','160460ysQPUk','__importDefault','5UPcIvX','defineProperty','get','writable','20wbbxuk','prototype','plan','getOwnPropertyNames','../../models/Company','test','ERR_QUEUE_COLOR_ALREADY_EXISTS','28026RHkqOh','99jKrEdZ','Check-color','object','hasOwnProperty','validate','ERR_QUEUE_INVALID_NAME','required','9XfwVio','length','string','message','getOwnPropertyDescriptor','call','count','Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','toString','(((.+)+)+)+$','yup','4297050dBnPBa','118766pdcWSL','constructor','Check-unique-name'];a507_0x402b=function(){return _0x4a891b;};return a507_0x402b();}function a507_0x3101(_0x1d1e8d,_0x307c63){const _0x324ee1=a507_0x402b();return a507_0x3101=function(_0x37339a,_0x4283e0){_0x37339a=_0x37339a-0x183;let _0x402bea=_0x324ee1[_0x37339a];return _0x402bea;},a507_0x3101(_0x1d1e8d,_0x307c63);}var __createBinding=this&&this[a507_0x325f2f(0x186)]||(Object[a507_0x325f2f(0x188)]?function(_0xe0e3bf,_0x16a051,_0x1d1787,_0x317a98){const _0x47613b=a507_0x325f2f;if(_0x317a98===undefined)_0x317a98=_0x1d1787;var _0x14bfcc=Object[_0x47613b(0x1a9)](_0x16a051,_0x1d1787);(!_0x14bfcc||(_0x47613b(0x194)in _0x14bfcc?!_0x16a051[_0x47613b(0x18a)]:_0x14bfcc[_0x47613b(0x195)]||_0x14bfcc['configurable']))&&(_0x14bfcc={'enumerable':!![],'get':function(){return _0x16a051[_0x1d1787];}}),Object[_0x47613b(0x193)](_0xe0e3bf,_0x317a98,_0x14bfcc);}:function(_0x31ad47,_0x3a3eb1,_0x5bdb7d,_0x56207a){if(_0x56207a===undefined)_0x56207a=_0x5bdb7d;_0x31ad47[_0x56207a]=_0x3a3eb1[_0x5bdb7d];}),__setModuleDefault=this&&this[a507_0x325f2f(0x184)]||(Object[a507_0x325f2f(0x188)]?function(_0x4dcca2,_0x48447c){const _0x18fc64=a507_0x325f2f;Object[_0x18fc64(0x193)](_0x4dcca2,'default',{'enumerable':!![],'value':_0x48447c});}:function(_0x53417a,_0x1791e4){const _0x53a96a=a507_0x325f2f;_0x53417a[_0x53a96a(0x1b6)]=_0x1791e4;}),__importStar=this&&this['__importStar']||(function(){const _0x555c43=(function(){let _0x346620=!![];return function(_0x475271,_0x4cdae5){const _0x10a7f2=_0x346620?function(){const _0x75c1e9=a507_0x3101;if(_0x4cdae5){const _0x2071a6=_0x4cdae5[_0x75c1e9(0x18e)](_0x475271,arguments);return _0x4cdae5=null,_0x2071a6;}}:function(){};return _0x346620=![],_0x10a7f2;};}()),_0x2d76f3=_0x555c43(this,function(){const _0x5e6c42=a507_0x3101;return _0x2d76f3['toString']()[_0x5e6c42(0x185)](_0x5e6c42(0x1ae))[_0x5e6c42(0x1ad)]()[_0x5e6c42(0x1b2)](_0x2d76f3)['search']('(((.+)+)+)+$');});_0x2d76f3();var _0x319cbf=function(_0x405a5c){const _0x572acf=a507_0x3101;return _0x319cbf=Object[_0x572acf(0x199)]||function(_0x2a9c43){const _0x734cb8=_0x572acf;var _0x1926f6=[];for(var _0x31b278 in _0x2a9c43)if(Object[_0x734cb8(0x197)][_0x734cb8(0x1a1)][_0x734cb8(0x1aa)](_0x2a9c43,_0x31b278))_0x1926f6[_0x1926f6['length']]=_0x31b278;return _0x1926f6;},_0x319cbf(_0x405a5c);};return function(_0x2cbd79){const _0x4f66cd=a507_0x3101;if(_0x2cbd79&&_0x2cbd79[_0x4f66cd(0x18a)])return _0x2cbd79;var _0x40a55c={};if(_0x2cbd79!=null){for(var _0xb207e8=_0x319cbf(_0x2cbd79),_0x41a7a3=0x0;_0x41a7a3<_0xb207e8[_0x4f66cd(0x1a6)];_0x41a7a3++)if(_0xb207e8[_0x41a7a3]!==_0x4f66cd(0x1b6))__createBinding(_0x40a55c,_0x2cbd79,_0xb207e8[_0x41a7a3]);}return __setModuleDefault(_0x40a55c,_0x2cbd79),_0x40a55c;};}()),__importDefault=this&&this[a507_0x325f2f(0x191)]||function(_0x4b3595){return _0x4b3595&&_0x4b3595['__esModule']?_0x4b3595:{'default':_0x4b3595};};Object[a507_0x325f2f(0x193)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a507_0x325f2f(0x1af))),AppError_1=__importDefault(require('../../errors/AppError')),Queue_1=__importDefault(require('../../models/Queue')),Company_1=__importDefault(require(a507_0x325f2f(0x19a))),Plan_1=__importDefault(require('../../models/Plan')),CreateQueueService=async _0xe0f00=>{const _0x2689c6=a507_0x325f2f,{color:_0x9a586d,name:_0x41e389,companyId:_0x343abe}=_0xe0f00,_0xf4c4de=await Company_1['default']['findOne']({'where':{'id':_0x343abe},'include':[{'model':Plan_1['default'],'as':_0x2689c6(0x198)}]});if(_0xf4c4de!==null){const _0x3146ce=await Queue_1[_0x2689c6(0x1b6)][_0x2689c6(0x1ab)]({'where':{'companyId':_0x343abe}});if(_0x3146ce>=_0xf4c4de[_0x2689c6(0x198)][_0x2689c6(0x18c)])throw new AppError_1['default'](_0x2689c6(0x1ac)+_0x3146ce);}const _0x15d15f=Yup[_0x2689c6(0x1a0)]()[_0x2689c6(0x1b5)]({'name':Yup['string']()[_0x2689c6(0x1b7)](0x2,'ERR_QUEUE_INVALID_NAME')[_0x2689c6(0x1a4)](_0x2689c6(0x1a3))['test'](_0x2689c6(0x1b3),_0x2689c6(0x187),async _0x5d7900=>{const _0x2ea227=_0x2689c6;if(_0x5d7900){const _0x21002d=await Queue_1[_0x2ea227(0x1b6)]['findOne']({'where':{'name':_0x5d7900,'companyId':_0x343abe}});return!_0x21002d;}return![];}),'color':Yup[_0x2689c6(0x1a7)]()[_0x2689c6(0x1a4)]('ERR_QUEUE_INVALID_COLOR')[_0x2689c6(0x19b)](_0x2689c6(0x19f),'ERR_QUEUE_INVALID_COLOR',async _0x24a565=>{const _0x4d2c76=_0x2689c6;if(_0x24a565){const _0x6b4a2c=/^#[0-9a-f]{3,6}$/i;return _0x6b4a2c[_0x4d2c76(0x19b)](_0x24a565);}return![];})[_0x2689c6(0x19b)](_0x2689c6(0x18b),_0x2689c6(0x19c),async _0x2428c5=>{const _0x17ae79=_0x2689c6;if(_0x2428c5){const _0x289d03=await Queue_1[_0x17ae79(0x1b6)][_0x17ae79(0x189)]({'where':{'color':_0x2428c5,'companyId':_0x343abe}});return!_0x289d03;}return![];})});try{await _0x15d15f[_0x2689c6(0x1a2)]({'color':_0x9a586d,'name':_0x41e389});}catch(_0x5a02c8){throw new AppError_1[(_0x2689c6(0x1b6))](_0x5a02c8[_0x2689c6(0x1a8)]);}const _0x37f0b4=await Queue_1[_0x2689c6(0x1b6)][_0x2689c6(0x188)](_0xe0f00);return _0x37f0b4;};exports['default']=CreateQueueService;