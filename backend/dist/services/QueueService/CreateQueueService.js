const a476_0x5ed235=a476_0x3e94;(function(_0x3425c3,_0x74a79e){const _0x537346=a476_0x3e94,_0x107e67=_0x3425c3();while(!![]){try{const _0x2cceef=parseInt(_0x537346(0x85))/0x1*(parseInt(_0x537346(0x92))/0x2)+-parseInt(_0x537346(0x9c))/0x3*(-parseInt(_0x537346(0x8d))/0x4)+-parseInt(_0x537346(0x84))/0x5+parseInt(_0x537346(0x78))/0x6*(-parseInt(_0x537346(0x8e))/0x7)+parseInt(_0x537346(0xa3))/0x8+-parseInt(_0x537346(0x7d))/0x9*(-parseInt(_0x537346(0x80))/0xa)+-parseInt(_0x537346(0x7f))/0xb;if(_0x2cceef===_0x74a79e)break;else _0x107e67['push'](_0x107e67['shift']());}catch(_0xba2dc6){_0x107e67['push'](_0x107e67['shift']());}}}(a476_0x3dd8,0x9cff5));function a476_0x3e94(_0x192ec5,_0xd473cc){const _0x331b2c=a476_0x3dd8();return a476_0x3e94=function(_0x158ff2,_0x9c1710){_0x158ff2=_0x158ff2-0x75;let _0x3dd82f=_0x331b2c[_0x158ff2];return _0x3dd82f;},a476_0x3e94(_0x192ec5,_0xd473cc);}const a476_0x9c1710=(function(){let _0x50ed0a=!![];return function(_0x5c5f46,_0xd0b8af){const _0x491e69=_0x50ed0a?function(){const _0x54a6d4=a476_0x3e94;if(_0xd0b8af){const _0x4528e6=_0xd0b8af[_0x54a6d4(0x75)](_0x5c5f46,arguments);return _0xd0b8af=null,_0x4528e6;}}:function(){};return _0x50ed0a=![],_0x491e69;};}()),a476_0x158ff2=a476_0x9c1710(this,function(){const _0x3107f0=a476_0x3e94;return a476_0x158ff2[_0x3107f0(0x81)]()[_0x3107f0(0x91)]('(((.+)+)+)+$')[_0x3107f0(0x81)]()[_0x3107f0(0x94)](a476_0x158ff2)['search'](_0x3107f0(0x9d));});a476_0x158ff2();'use strict';var __createBinding=this&&this[a476_0x5ed235(0x89)]||(Object[a476_0x5ed235(0x97)]?function(_0xbcf735,_0x9a249c,_0x4d6a8b,_0x1bfa0e){const _0x36b6ea=a476_0x5ed235;if(_0x1bfa0e===undefined)_0x1bfa0e=_0x4d6a8b;var _0x5a980a=Object[_0x36b6ea(0x7e)](_0x9a249c,_0x4d6a8b);(!_0x5a980a||('get'in _0x5a980a?!_0x9a249c[_0x36b6ea(0x98)]:_0x5a980a['writable']||_0x5a980a['configurable']))&&(_0x5a980a={'enumerable':!![],'get':function(){return _0x9a249c[_0x4d6a8b];}}),Object[_0x36b6ea(0x7b)](_0xbcf735,_0x1bfa0e,_0x5a980a);}:function(_0x1efe22,_0x416cd6,_0x418796,_0x5e7d55){if(_0x5e7d55===undefined)_0x5e7d55=_0x418796;_0x1efe22[_0x5e7d55]=_0x416cd6[_0x418796];}),__setModuleDefault=this&&this[a476_0x5ed235(0x8b)]||(Object[a476_0x5ed235(0x97)]?function(_0x218bad,_0x3159ca){const _0x3a8fe5=a476_0x5ed235;Object[_0x3a8fe5(0x7b)](_0x218bad,_0x3a8fe5(0x95),{'enumerable':!![],'value':_0x3159ca});}:function(_0x4aee76,_0x4a732f){const _0x1097fa=a476_0x5ed235;_0x4aee76[_0x1097fa(0x95)]=_0x4a732f;}),__importStar=this&&this[a476_0x5ed235(0xa2)]||function(_0x593ba3){const _0x55afe4=a476_0x5ed235;if(_0x593ba3&&_0x593ba3['__esModule'])return _0x593ba3;var _0x19f16b={};if(_0x593ba3!=null){for(var _0x4530a0 in _0x593ba3)if(_0x4530a0!==_0x55afe4(0x95)&&Object[_0x55afe4(0x8a)]['hasOwnProperty']['call'](_0x593ba3,_0x4530a0))__createBinding(_0x19f16b,_0x593ba3,_0x4530a0);}return __setModuleDefault(_0x19f16b,_0x593ba3),_0x19f16b;},__importDefault=this&&this['__importDefault']||function(_0x439d2a){return _0x439d2a&&_0x439d2a['__esModule']?_0x439d2a:{'default':_0x439d2a};};Object['defineProperty'](exports,a476_0x5ed235(0x98),{'value':!![]});function a476_0x3dd8(){const _0x51d5c2=['3654985ShYMJB','35118DmunBb','yup','ERR_QUEUE_INVALID_COLOR','validate','__createBinding','prototype','__setModuleDefault','test','208332DDKjvn','107989vhGiTD','ERR_QUEUE_INVALID_NAME','min','search','58ktzmOl','object','constructor','default','../../models/Plan','create','__esModule','required','Check-color-exists','string','27OpAMkl','(((.+)+)+)+$','message','plan','Check-unique-name','queues','__importStar','8280296fOmwmL','apply','../../errors/AppError','count','96beXEdZ','Check-color','findOne','defineProperty','ERR_QUEUE_COLOR_ALREADY_EXISTS','9CAQMzP','getOwnPropertyDescriptor','21801659QSsAbS','10806530Afmpkl','toString','shape','../../models/Company'];a476_0x3dd8=function(){return _0x51d5c2;};return a476_0x3dd8();}const Yup=__importStar(require(a476_0x5ed235(0x86))),AppError_1=__importDefault(require(a476_0x5ed235(0x76))),Queue_1=__importDefault(require('../../models/Queue')),Company_1=__importDefault(require(a476_0x5ed235(0x83))),Plan_1=__importDefault(require(a476_0x5ed235(0x96))),CreateQueueService=async _0x3130a0=>{const _0x886a7f=a476_0x5ed235,{color:_0x580ecc,name:_0x353aac,companyId:_0x12e6fa}=_0x3130a0,_0x10385d=await Company_1[_0x886a7f(0x95)][_0x886a7f(0x7a)]({'where':{'id':_0x12e6fa},'include':[{'model':Plan_1['default'],'as':_0x886a7f(0x9f)}]});if(_0x10385d!==null){const _0x4fb580=await Queue_1[_0x886a7f(0x95)][_0x886a7f(0x77)]({'where':{'companyId':_0x12e6fa}});if(_0x4fb580>=_0x10385d[_0x886a7f(0x9f)][_0x886a7f(0xa1)])throw new AppError_1[(_0x886a7f(0x95))]('Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20'+_0x4fb580);}const _0x24e1d6=Yup[_0x886a7f(0x93)]()[_0x886a7f(0x82)]({'name':Yup['string']()[_0x886a7f(0x90)](0x2,_0x886a7f(0x8f))[_0x886a7f(0x99)]('ERR_QUEUE_INVALID_NAME')['test'](_0x886a7f(0xa0),'ERR_QUEUE_NAME_ALREADY_EXISTS',async _0x108817=>{const _0x22056c=_0x886a7f;if(_0x108817){const _0x9b588=await Queue_1[_0x22056c(0x95)][_0x22056c(0x7a)]({'where':{'name':_0x108817,'companyId':_0x12e6fa}});return!_0x9b588;}return![];}),'color':Yup[_0x886a7f(0x9b)]()[_0x886a7f(0x99)](_0x886a7f(0x87))[_0x886a7f(0x8c)](_0x886a7f(0x79),_0x886a7f(0x87),async _0x121002=>{if(_0x121002){const _0x180659=/^#[0-9a-f]{3,6}$/i;return _0x180659['test'](_0x121002);}return![];})[_0x886a7f(0x8c)](_0x886a7f(0x9a),_0x886a7f(0x7c),async _0x51e30f=>{const _0x41753c=_0x886a7f;if(_0x51e30f){const _0x88cab2=await Queue_1[_0x41753c(0x95)][_0x41753c(0x7a)]({'where':{'color':_0x51e30f,'companyId':_0x12e6fa}});return!_0x88cab2;}return![];})});try{await _0x24e1d6[_0x886a7f(0x88)]({'color':_0x580ecc,'name':_0x353aac});}catch(_0x5d94c1){throw new AppError_1[(_0x886a7f(0x95))](_0x5d94c1[_0x886a7f(0x9e)]);}const _0x5ed85e=await Queue_1['default'][_0x886a7f(0x97)](_0x3130a0);return _0x5ed85e;};exports[a476_0x5ed235(0x95)]=CreateQueueService;