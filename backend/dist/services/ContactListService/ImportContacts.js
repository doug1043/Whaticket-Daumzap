const a439_0x1b109b=a439_0xd555;(function(_0x330d73,_0xd574c7){const _0x42b555=a439_0xd555,_0x407108=_0x330d73();while(!![]){try{const _0x8c642=-parseInt(_0x42b555(0x1cb))/0x1+parseInt(_0x42b555(0x1da))/0x2+-parseInt(_0x42b555(0x1c7))/0x3+-parseInt(_0x42b555(0x1b0))/0x4+-parseInt(_0x42b555(0x1b1))/0x5+parseInt(_0x42b555(0x1bb))/0x6*(parseInt(_0x42b555(0x1c8))/0x7)+parseInt(_0x42b555(0x1b5))/0x8;if(_0x8c642===_0xd574c7)break;else _0x407108['push'](_0x407108['shift']());}catch(_0x34fb64){_0x407108['push'](_0x407108['shift']());}}}(a439_0xbf47,0x57aeb));const a439_0x45efa7=(function(){let _0x192255=!![];return function(_0xa70fbb,_0x32a5e6){const _0x40bd87=_0x192255?function(){if(_0x32a5e6){const _0x12ef88=_0x32a5e6['apply'](_0xa70fbb,arguments);return _0x32a5e6=null,_0x12ef88;}}:function(){};return _0x192255=![],_0x40bd87;};}()),a439_0x5db6be=a439_0x45efa7(this,function(){const _0x4a0a21=a439_0xd555;return a439_0x5db6be[_0x4a0a21(0x1d9)]()[_0x4a0a21(0x1d8)](_0x4a0a21(0x1ca))[_0x4a0a21(0x1d9)]()['constructor'](a439_0x5db6be)['search']('(((.+)+)+)+$');});a439_0x5db6be();function a439_0xbf47(){const _0x41230e=['companyId','email','has','número','readFile','1909440INpoIu','9387ygGioz','utils','(((.+)+)+)+$','384295zdpiLT','ImportContacts','xlsx','sheet_to_json','../../utils/logger','Nome','save','e-mail','number','values','path','Número','replace','search','toString','164206fBAVkL','Sheets','1149548SvbMun','1765720hqTkLa','__esModule','Número\x20de\x20contato\x20inválido:\x20','nome','10754296HWTHEa','jid','error','default','__importDefault','contactListId','2658JWBZlF','numero','E-mail','../WbotServices/CheckNumber','findOrCreate','Email','isWhatsappValid'];a439_0xbf47=function(){return _0x41230e;};return a439_0xbf47();}'use strict';var __importDefault=this&&this[a439_0x1b109b(0x1b9)]||function(_0x426aab){return _0x426aab&&_0x426aab['__esModule']?_0x426aab:{'default':_0x426aab};};Object['defineProperty'](exports,a439_0x1b109b(0x1b2),{'value':!![]}),exports[a439_0x1b109b(0x1cc)]=ImportContacts;function a439_0xd555(_0x3664b6,_0x3f6579){const _0x5bd67e=a439_0xbf47();return a439_0xd555=function(_0x5db6be,_0x45efa7){_0x5db6be=_0x5db6be-0x1af;let _0xbf47b=_0x5bd67e[_0x5db6be];return _0xbf47b;},a439_0xd555(_0x3664b6,_0x3f6579);}const lodash_1=require('lodash'),xlsx_1=__importDefault(require(a439_0x1b109b(0x1cd))),lodash_2=require('lodash'),ContactListItem_1=__importDefault(require('../../models/ContactListItem')),CheckNumber_1=__importDefault(require(a439_0x1b109b(0x1be))),logger_1=require(a439_0x1b109b(0x1cf));async function ImportContacts(_0x588ab2,_0x4e2813,_0x4bdf7c){const _0x10c4ee=a439_0x1b109b,_0x289efe=xlsx_1[_0x10c4ee(0x1b8)][_0x10c4ee(0x1c6)](_0x4bdf7c?.[_0x10c4ee(0x1d5)]),_0x3c637e=(0x0,lodash_1['head'])(Object[_0x10c4ee(0x1d4)](_0x289efe[_0x10c4ee(0x1af)])),_0xd02ad7=xlsx_1['default'][_0x10c4ee(0x1c9)][_0x10c4ee(0x1ce)](_0x3c637e,{'header':0x0}),_0x23ceff=_0xd02ad7['map'](_0x35b6a3=>{const _0x15305a=_0x10c4ee;let _0xc3ac06='',_0x8c176d='',_0x1ac4fe='';return((0x0,lodash_2[_0x15305a(0x1c4)])(_0x35b6a3,_0x15305a(0x1b4))||(0x0,lodash_2[_0x15305a(0x1c4)])(_0x35b6a3,'Nome'))&&(_0xc3ac06=_0x35b6a3[_0x15305a(0x1b4)]||_0x35b6a3[_0x15305a(0x1d0)]),((0x0,lodash_2[_0x15305a(0x1c4)])(_0x35b6a3,_0x15305a(0x1bc))||(0x0,lodash_2[_0x15305a(0x1c4)])(_0x35b6a3,_0x15305a(0x1c5))||(0x0,lodash_2[_0x15305a(0x1c4)])(_0x35b6a3,'Numero')||(0x0,lodash_2[_0x15305a(0x1c4)])(_0x35b6a3,_0x15305a(0x1d6)))&&(_0x8c176d=_0x35b6a3[_0x15305a(0x1bc)]||_0x35b6a3['número']||_0x35b6a3['Numero']||_0x35b6a3[_0x15305a(0x1d6)],_0x8c176d=(''+_0x8c176d)[_0x15305a(0x1d7)](/\D/g,'')),((0x0,lodash_2[_0x15305a(0x1c4)])(_0x35b6a3,_0x15305a(0x1c3))||(0x0,lodash_2['has'])(_0x35b6a3,_0x15305a(0x1d2))||(0x0,lodash_2[_0x15305a(0x1c4)])(_0x35b6a3,_0x15305a(0x1c0))||(0x0,lodash_2[_0x15305a(0x1c4)])(_0x35b6a3,_0x15305a(0x1bd)))&&(_0x1ac4fe=_0x35b6a3[_0x15305a(0x1c3)]||_0x35b6a3[_0x15305a(0x1d2)]||_0x35b6a3[_0x15305a(0x1c0)]||_0x35b6a3['E-mail']),{'name':_0xc3ac06,'number':_0x8c176d,'email':_0x1ac4fe,'contactListId':_0x588ab2,'companyId':_0x4e2813};}),_0x3c5bcc=[];for(const _0x2bcba6 of _0x23ceff){const [_0x3b2947,_0x11ca0f]=await ContactListItem_1[_0x10c4ee(0x1b8)][_0x10c4ee(0x1bf)]({'where':{'number':''+_0x2bcba6[_0x10c4ee(0x1d3)],'contactListId':_0x2bcba6[_0x10c4ee(0x1ba)],'companyId':_0x2bcba6[_0x10c4ee(0x1c2)]},'defaults':_0x2bcba6});_0x11ca0f&&_0x3c5bcc['push'](_0x3b2947);}if(_0x3c5bcc)for(let _0x24790c of _0x3c5bcc){try{const _0x1287eb=await(0x0,CheckNumber_1[_0x10c4ee(0x1b8)])(_0x24790c[_0x10c4ee(0x1d3)],_0x4e2813);_0x24790c[_0x10c4ee(0x1c1)]=_0x1287eb['exists'];const _0x672f51=_0x1287eb[_0x10c4ee(0x1b6)][_0x10c4ee(0x1d7)](/\D/g,'');_0x24790c[_0x10c4ee(0x1d3)]=_0x672f51,await _0x24790c[_0x10c4ee(0x1d1)]();}catch(_0x5e21e8){logger_1['logger'][_0x10c4ee(0x1b7)](_0x10c4ee(0x1b3)+_0x24790c[_0x10c4ee(0x1d3)]);}}return _0x3c5bcc;}