const a445_0x126548=a445_0x2412;(function(_0x3df602,_0x53235f){const _0x5e1e75=a445_0x2412,_0x26121a=_0x3df602();while(!![]){try{const _0x385482=parseInt(_0x5e1e75(0xfe))/0x1*(-parseInt(_0x5e1e75(0x110))/0x2)+parseInt(_0x5e1e75(0xf4))/0x3*(-parseInt(_0x5e1e75(0x111))/0x4)+parseInt(_0x5e1e75(0x10b))/0x5*(parseInt(_0x5e1e75(0xff))/0x6)+-parseInt(_0x5e1e75(0x114))/0x7*(-parseInt(_0x5e1e75(0xfd))/0x8)+-parseInt(_0x5e1e75(0x10d))/0x9*(parseInt(_0x5e1e75(0xed))/0xa)+parseInt(_0x5e1e75(0xf7))/0xb+parseInt(_0x5e1e75(0x109))/0xc;if(_0x385482===_0x53235f)break;else _0x26121a['push'](_0x26121a['shift']());}catch(_0x5ad88e){_0x26121a['push'](_0x26121a['shift']());}}}(a445_0x21e4,0xa0482));const a445_0x4c6854=(function(){let _0x16480d=!![];return function(_0x11fb72,_0x153954){const _0x5e40be=_0x16480d?function(){const _0x114800=a445_0x2412;if(_0x153954){const _0x286dd4=_0x153954[_0x114800(0x106)](_0x11fb72,arguments);return _0x153954=null,_0x286dd4;}}:function(){};return _0x16480d=![],_0x5e40be;};}()),a445_0x1c7522=a445_0x4c6854(this,function(){const _0x2c4bdb=a445_0x2412;return a445_0x1c7522[_0x2c4bdb(0xef)]()[_0x2c4bdb(0xf8)]('(((.+)+)+)+$')[_0x2c4bdb(0xef)]()['constructor'](a445_0x1c7522)[_0x2c4bdb(0xf8)](_0x2c4bdb(0x103));});function a445_0x21e4(){const _0x30c6e2=['Sheets','Email','default','Número\x20de\x20contato\x20inválido:\x20','defineProperty','exists','6550UrXhZM','nome','toString','__importDefault','has','number','Número','3hPrQHD','ImportContacts','E-mail','1757635DquORy','search','../../utils/logger','número','utils','replace','264ZadbWB','1gcWWFS','30zdmszP','Nome','__esModule','Numero','(((.+)+)+)+$','head','lodash','apply','path','email','5646888axwLYV','error','967485GlnYql','../WbotServices/CheckNumber','12105mZQNJf','e-mail','xlsx','781202LGaGHj','458508CMTzrH','values','numero','94367fnjbpB','push'];a445_0x21e4=function(){return _0x30c6e2;};return a445_0x21e4();}a445_0x1c7522();'use strict';var __importDefault=this&&this[a445_0x126548(0xf0)]||function(_0x859e05){const _0x47cf9a=a445_0x126548;return _0x859e05&&_0x859e05[_0x47cf9a(0x101)]?_0x859e05:{'default':_0x859e05};};Object[a445_0x126548(0xeb)](exports,a445_0x126548(0x101),{'value':!![]}),exports[a445_0x126548(0xf5)]=ImportContacts;const lodash_1=require(a445_0x126548(0x105)),xlsx_1=__importDefault(require(a445_0x126548(0x10f))),lodash_2=require(a445_0x126548(0x105)),ContactListItem_1=__importDefault(require('../../models/ContactListItem')),CheckNumber_1=__importDefault(require(a445_0x126548(0x10c))),logger_1=require(a445_0x126548(0xf9));function a445_0x2412(_0x12c8c9,_0x12b870){const _0x3d447c=a445_0x21e4();return a445_0x2412=function(_0x1c7522,_0x4c6854){_0x1c7522=_0x1c7522-0xeb;let _0x21e4cb=_0x3d447c[_0x1c7522];return _0x21e4cb;},a445_0x2412(_0x12c8c9,_0x12b870);}async function ImportContacts(_0x2636dc,_0x2cde3b,_0x3d997d){const _0x360e55=a445_0x126548,_0x216a3d=xlsx_1['default']['readFile'](_0x3d997d?.[_0x360e55(0x107)]),_0x59681e=(0x0,lodash_1[_0x360e55(0x104)])(Object[_0x360e55(0x112)](_0x216a3d[_0x360e55(0x116)])),_0x20a61d=xlsx_1['default'][_0x360e55(0xfb)]['sheet_to_json'](_0x59681e,{'header':0x0}),_0x3975d6=_0x20a61d['map'](_0x23392e=>{const _0x5cfebc=_0x360e55;let _0x108364='',_0x3fbd2d='',_0x2c0778='';return((0x0,lodash_2['has'])(_0x23392e,_0x5cfebc(0xee))||(0x0,lodash_2[_0x5cfebc(0xf1)])(_0x23392e,_0x5cfebc(0x100)))&&(_0x108364=_0x23392e[_0x5cfebc(0xee)]||_0x23392e[_0x5cfebc(0x100)]),((0x0,lodash_2[_0x5cfebc(0xf1)])(_0x23392e,_0x5cfebc(0x113))||(0x0,lodash_2[_0x5cfebc(0xf1)])(_0x23392e,_0x5cfebc(0xfa))||(0x0,lodash_2[_0x5cfebc(0xf1)])(_0x23392e,_0x5cfebc(0x102))||(0x0,lodash_2[_0x5cfebc(0xf1)])(_0x23392e,_0x5cfebc(0xf3)))&&(_0x3fbd2d=_0x23392e[_0x5cfebc(0x113)]||_0x23392e[_0x5cfebc(0xfa)]||_0x23392e[_0x5cfebc(0x102)]||_0x23392e[_0x5cfebc(0xf3)],_0x3fbd2d=(''+_0x3fbd2d)[_0x5cfebc(0xfc)](/\D/g,'')),((0x0,lodash_2[_0x5cfebc(0xf1)])(_0x23392e,_0x5cfebc(0x108))||(0x0,lodash_2[_0x5cfebc(0xf1)])(_0x23392e,_0x5cfebc(0x10e))||(0x0,lodash_2[_0x5cfebc(0xf1)])(_0x23392e,_0x5cfebc(0x117))||(0x0,lodash_2[_0x5cfebc(0xf1)])(_0x23392e,'E-mail'))&&(_0x2c0778=_0x23392e[_0x5cfebc(0x108)]||_0x23392e['e-mail']||_0x23392e['Email']||_0x23392e[_0x5cfebc(0xf6)]),{'name':_0x108364,'number':_0x3fbd2d,'email':_0x2c0778,'contactListId':_0x2636dc,'companyId':_0x2cde3b};}),_0x23af80=[];for(const _0x273253 of _0x3975d6){const [_0x47fb9b,_0x25f87a]=await ContactListItem_1[_0x360e55(0x118)]['findOrCreate']({'where':{'number':''+_0x273253[_0x360e55(0xf2)],'contactListId':_0x273253['contactListId'],'companyId':_0x273253['companyId']},'defaults':_0x273253});_0x25f87a&&_0x23af80[_0x360e55(0x115)](_0x47fb9b);}if(_0x23af80)for(let _0x2b9504 of _0x23af80){try{const _0x2fc5b7=await(0x0,CheckNumber_1[_0x360e55(0x118)])(_0x2b9504['number'],_0x2cde3b);_0x2b9504['isWhatsappValid']=_0x2fc5b7[_0x360e55(0xec)];const _0x3cd691=_0x2fc5b7['jid'][_0x360e55(0xfc)](/\D/g,'');_0x2b9504[_0x360e55(0xf2)]=_0x3cd691,await _0x2b9504['save']();}catch(_0x1e31b6){logger_1['logger'][_0x360e55(0x10a)](_0x360e55(0x119)+_0x2b9504[_0x360e55(0xf2)]);}}return _0x23af80;}