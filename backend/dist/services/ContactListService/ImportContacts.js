const a408_0x171b89=a408_0x2f4b;(function(_0x2227cd,_0x5882ac){const _0x2484b7=a408_0x2f4b,_0x264fa3=_0x2227cd();while(!![]){try{const _0x5be255=parseInt(_0x2484b7(0x81))/0x1+-parseInt(_0x2484b7(0xa7))/0x2*(-parseInt(_0x2484b7(0x87))/0x3)+parseInt(_0x2484b7(0x98))/0x4+-parseInt(_0x2484b7(0xaf))/0x5+-parseInt(_0x2484b7(0x84))/0x6*(parseInt(_0x2484b7(0x88))/0x7)+-parseInt(_0x2484b7(0x92))/0x8+-parseInt(_0x2484b7(0x8d))/0x9;if(_0x5be255===_0x5882ac)break;else _0x264fa3['push'](_0x264fa3['shift']());}catch(_0x710b04){_0x264fa3['push'](_0x264fa3['shift']());}}}(a408_0x53a5,0xc34ab));const a408_0x498c14=(function(){let _0x297922=!![];return function(_0x59b90a,_0x4233a8){const _0xfd6f51=_0x297922?function(){if(_0x4233a8){const _0x2177ce=_0x4233a8['apply'](_0x59b90a,arguments);return _0x4233a8=null,_0x2177ce;}}:function(){};return _0x297922=![],_0xfd6f51;};}()),a408_0x2aed19=a408_0x498c14(this,function(){const _0x570f95=a408_0x2f4b;return a408_0x2aed19['toString']()[_0x570f95(0xa5)](_0x570f95(0x83))['toString']()[_0x570f95(0x85)](a408_0x2aed19)[_0x570f95(0xa5)]('(((.+)+)+)+$');});a408_0x2aed19();'use strict';function a408_0x53a5(){const _0x42dcfb=['Numero','__esModule','map','__importDefault','readFile','nome','número','head','Nome','../../utils/logger','replace','companyId','search','path','2CRoBMF','numero','values','Email','push','lodash','utils','e-mail','1703380pioMws','616755vPwwHD','exists','(((.+)+)+)+$','172008uDWpsk','constructor','Sheets','2355303fVBxUR','7VYtdON','isWhatsappValid','default','error','number','13154625Wnempa','xlsx','contactListId','ImportContacts','jid','2730792gBauHp','email','defineProperty','E-mail','Número','has','6281508RyBPgG'];a408_0x53a5=function(){return _0x42dcfb;};return a408_0x53a5();}var __importDefault=this&&this[a408_0x171b89(0x9c)]||function(_0xfc0a87){const _0x3d3343=a408_0x171b89;return _0xfc0a87&&_0xfc0a87[_0x3d3343(0x9a)]?_0xfc0a87:{'default':_0xfc0a87};};Object[a408_0x171b89(0x94)](exports,a408_0x171b89(0x9a),{'value':!![]}),exports[a408_0x171b89(0x90)]=void 0x0;const lodash_1=require(a408_0x171b89(0xac)),xlsx_1=__importDefault(require(a408_0x171b89(0x8e))),lodash_2=require(a408_0x171b89(0xac)),ContactListItem_1=__importDefault(require('../../models/ContactListItem')),CheckNumber_1=__importDefault(require('../WbotServices/CheckNumber')),logger_1=require(a408_0x171b89(0xa2));function a408_0x2f4b(_0x242c11,_0x3c6a40){const _0x4bc5f8=a408_0x53a5();return a408_0x2f4b=function(_0x2aed19,_0x498c14){_0x2aed19=_0x2aed19-0x81;let _0x53a55f=_0x4bc5f8[_0x2aed19];return _0x53a55f;},a408_0x2f4b(_0x242c11,_0x3c6a40);}async function ImportContacts(_0x35b7a8,_0x5ddba8,_0x528328){const _0x5e5e05=a408_0x171b89,_0x4fae57=xlsx_1[_0x5e5e05(0x8a)][_0x5e5e05(0x9d)](_0x528328?.[_0x5e5e05(0xa6)]),_0x1127a0=(0x0,lodash_1[_0x5e5e05(0xa0)])(Object[_0x5e5e05(0xa9)](_0x4fae57[_0x5e5e05(0x86)])),_0x52360f=xlsx_1[_0x5e5e05(0x8a)][_0x5e5e05(0xad)]['sheet_to_json'](_0x1127a0,{'header':0x0}),_0x585924=_0x52360f[_0x5e5e05(0x9b)](_0x5605f2=>{const _0x5ad711=_0x5e5e05;let _0x6c1ea3='',_0xdc3863='',_0x4c83c2='';return((0x0,lodash_2['has'])(_0x5605f2,_0x5ad711(0x9e))||(0x0,lodash_2[_0x5ad711(0x97)])(_0x5605f2,_0x5ad711(0xa1)))&&(_0x6c1ea3=_0x5605f2[_0x5ad711(0x9e)]||_0x5605f2[_0x5ad711(0xa1)]),((0x0,lodash_2[_0x5ad711(0x97)])(_0x5605f2,_0x5ad711(0xa8))||(0x0,lodash_2[_0x5ad711(0x97)])(_0x5605f2,_0x5ad711(0x9f))||(0x0,lodash_2[_0x5ad711(0x97)])(_0x5605f2,_0x5ad711(0x99))||(0x0,lodash_2['has'])(_0x5605f2,_0x5ad711(0x96)))&&(_0xdc3863=_0x5605f2['numero']||_0x5605f2[_0x5ad711(0x9f)]||_0x5605f2['Numero']||_0x5605f2['Número'],_0xdc3863=(''+_0xdc3863)[_0x5ad711(0xa3)](/\D/g,'')),((0x0,lodash_2['has'])(_0x5605f2,'email')||(0x0,lodash_2[_0x5ad711(0x97)])(_0x5605f2,'e-mail')||(0x0,lodash_2[_0x5ad711(0x97)])(_0x5605f2,_0x5ad711(0xaa))||(0x0,lodash_2[_0x5ad711(0x97)])(_0x5605f2,_0x5ad711(0x95)))&&(_0x4c83c2=_0x5605f2[_0x5ad711(0x93)]||_0x5605f2[_0x5ad711(0xae)]||_0x5605f2['Email']||_0x5605f2[_0x5ad711(0x95)]),{'name':_0x6c1ea3,'number':_0xdc3863,'email':_0x4c83c2,'contactListId':_0x35b7a8,'companyId':_0x5ddba8};}),_0x57c221=[];for(const _0x45cc66 of _0x585924){const [_0x3cac02,_0x41ea14]=await ContactListItem_1[_0x5e5e05(0x8a)]['findOrCreate']({'where':{'number':''+_0x45cc66[_0x5e5e05(0x8c)],'contactListId':_0x45cc66[_0x5e5e05(0x8f)],'companyId':_0x45cc66[_0x5e5e05(0xa4)]},'defaults':_0x45cc66});_0x41ea14&&_0x57c221[_0x5e5e05(0xab)](_0x3cac02);}if(_0x57c221)for(let _0xc6d753 of _0x57c221){try{const _0x1fc00b=await(0x0,CheckNumber_1['default'])(_0xc6d753[_0x5e5e05(0x8c)],_0x5ddba8);_0xc6d753[_0x5e5e05(0x89)]=_0x1fc00b[_0x5e5e05(0x82)];const _0xe25d0=_0x1fc00b[_0x5e5e05(0x91)]['replace'](/\D/g,'');_0xc6d753[_0x5e5e05(0x8c)]=_0xe25d0,await _0xc6d753['save']();}catch(_0xe6026b){logger_1['logger'][_0x5e5e05(0x8b)]('Número\x20de\x20contato\x20inválido:\x20'+_0xc6d753[_0x5e5e05(0x8c)]);}}return _0x57c221;}exports[a408_0x171b89(0x90)]=ImportContacts;