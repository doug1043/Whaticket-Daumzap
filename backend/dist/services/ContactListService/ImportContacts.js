const a526_0xb82446=a526_0x1c85;(function(_0xea520b,_0x1321d4){const _0x15b258=a526_0x1c85,_0x43c080=_0xea520b();while(!![]){try{const _0x2f4ffd=-parseInt(_0x15b258(0x9f))/0x1*(parseInt(_0x15b258(0xa8))/0x2)+-parseInt(_0x15b258(0xba))/0x3*(parseInt(_0x15b258(0xad))/0x4)+parseInt(_0x15b258(0xab))/0x5+parseInt(_0x15b258(0xb1))/0x6+-parseInt(_0x15b258(0xc1))/0x7*(-parseInt(_0x15b258(0xaa))/0x8)+-parseInt(_0x15b258(0xaf))/0x9*(-parseInt(_0x15b258(0xb0))/0xa)+-parseInt(_0x15b258(0xbe))/0xb;if(_0x2f4ffd===_0x1321d4)break;else _0x43c080['push'](_0x43c080['shift']());}catch(_0x243cfb){_0x43c080['push'](_0x43c080['shift']());}}}(a526_0x3777,0x72313));function a526_0x1c85(_0x1db5a6,_0x5a19bc){const _0x3afa81=a526_0x3777();return a526_0x1c85=function(_0x22ec8f,_0x3b253a){_0x22ec8f=_0x22ec8f-0x9b;let _0x37777e=_0x3afa81[_0x22ec8f];return _0x37777e;},a526_0x1c85(_0x1db5a6,_0x5a19bc);}const a526_0x3b253a=(function(){let _0x2a85c2=!![];return function(_0x382e0a,_0x30991d){const _0x1d1273=_0x2a85c2?function(){const _0x5ec90a=a526_0x1c85;if(_0x30991d){const _0x49a34e=_0x30991d[_0x5ec90a(0xb8)](_0x382e0a,arguments);return _0x30991d=null,_0x49a34e;}}:function(){};return _0x2a85c2=![],_0x1d1273;};}()),a526_0x22ec8f=a526_0x3b253a(this,function(){const _0x101ec3=a526_0x1c85;return a526_0x22ec8f[_0x101ec3(0xb3)]()[_0x101ec3(0xa4)](_0x101ec3(0xb6))[_0x101ec3(0xb3)]()[_0x101ec3(0xc7)](a526_0x22ec8f)[_0x101ec3(0xa4)](_0x101ec3(0xb6));});a526_0x22ec8f();'use strict';function a526_0x3777(){const _0x1bfa01=['utils','map','2Qclicg','push','número','e-mail','has','search','defineProperty','Email','ImportContacts','56174eGkqtG','head','6745696KFeJJY','511435VLXprh','__esModule','175044qzerGn','xlsx','7860753teHJdW','10msOcAY','1292472frNLwI','isWhatsappValid','toString','../../utils/logger','numero','(((.+)+)+)+$','number','apply','default','15lRgwsS','__importDefault','logger','E-mail','14207798gLWCIw','Nome','findOrCreate','7EUdZMB','email','replace','Numero','jid','nome','constructor','lodash','Número','sheet_to_json','Número\x20de\x20contato\x20inválido:\x20','../WbotServices/CheckNumber'];a526_0x3777=function(){return _0x1bfa01;};return a526_0x3777();}var __importDefault=this&&this[a526_0xb82446(0xbb)]||function(_0x33821a){const _0xc419e7=a526_0xb82446;return _0x33821a&&_0x33821a[_0xc419e7(0xac)]?_0x33821a:{'default':_0x33821a};};Object[a526_0xb82446(0xa5)](exports,'__esModule',{'value':!![]}),exports[a526_0xb82446(0xa7)]=ImportContacts;const lodash_1=require(a526_0xb82446(0xc8)),xlsx_1=__importDefault(require(a526_0xb82446(0xae))),lodash_2=require(a526_0xb82446(0xc8)),ContactListItem_1=__importDefault(require('../../models/ContactListItem')),CheckNumber_1=__importDefault(require(a526_0xb82446(0x9c))),logger_1=require(a526_0xb82446(0xb4));async function ImportContacts(_0x5ebe13,_0x111fab,_0x11065b){const _0x25519a=a526_0xb82446,_0x4b64d9=xlsx_1[_0x25519a(0xb9)]['readFile'](_0x11065b?.['path']),_0x2ef907=(0x0,lodash_1[_0x25519a(0xa9)])(Object['values'](_0x4b64d9['Sheets'])),_0x4498c1=xlsx_1[_0x25519a(0xb9)][_0x25519a(0x9d)][_0x25519a(0xca)](_0x2ef907,{'header':0x0}),_0xaa70f1=_0x4498c1[_0x25519a(0x9e)](_0xfbedfd=>{const _0x25e14f=_0x25519a;let _0x2e68c8='',_0x3c4d75='',_0x376895='';return((0x0,lodash_2[_0x25e14f(0xa3)])(_0xfbedfd,_0x25e14f(0xc6))||(0x0,lodash_2['has'])(_0xfbedfd,_0x25e14f(0xbf)))&&(_0x2e68c8=_0xfbedfd[_0x25e14f(0xc6)]||_0xfbedfd[_0x25e14f(0xbf)]),((0x0,lodash_2[_0x25e14f(0xa3)])(_0xfbedfd,'numero')||(0x0,lodash_2['has'])(_0xfbedfd,_0x25e14f(0xa1))||(0x0,lodash_2[_0x25e14f(0xa3)])(_0xfbedfd,_0x25e14f(0xc4))||(0x0,lodash_2[_0x25e14f(0xa3)])(_0xfbedfd,'Número'))&&(_0x3c4d75=_0xfbedfd[_0x25e14f(0xb5)]||_0xfbedfd['número']||_0xfbedfd[_0x25e14f(0xc4)]||_0xfbedfd[_0x25e14f(0xc9)],_0x3c4d75=(''+_0x3c4d75)['replace'](/\D/g,'')),((0x0,lodash_2[_0x25e14f(0xa3)])(_0xfbedfd,_0x25e14f(0xc2))||(0x0,lodash_2[_0x25e14f(0xa3)])(_0xfbedfd,'e-mail')||(0x0,lodash_2[_0x25e14f(0xa3)])(_0xfbedfd,_0x25e14f(0xa6))||(0x0,lodash_2['has'])(_0xfbedfd,_0x25e14f(0xbd)))&&(_0x376895=_0xfbedfd[_0x25e14f(0xc2)]||_0xfbedfd[_0x25e14f(0xa2)]||_0xfbedfd[_0x25e14f(0xa6)]||_0xfbedfd['E-mail']),{'name':_0x2e68c8,'number':_0x3c4d75,'email':_0x376895,'contactListId':_0x5ebe13,'companyId':_0x111fab};}),_0x483890=[];for(const _0x4a9051 of _0xaa70f1){const [_0x57378a,_0x5c3aab]=await ContactListItem_1[_0x25519a(0xb9)][_0x25519a(0xc0)]({'where':{'number':''+_0x4a9051[_0x25519a(0xb7)],'contactListId':_0x4a9051['contactListId'],'companyId':_0x4a9051['companyId']},'defaults':_0x4a9051});_0x5c3aab&&_0x483890[_0x25519a(0xa0)](_0x57378a);}if(_0x483890)for(let _0x56cf03 of _0x483890){try{const _0x3d8e89=await(0x0,CheckNumber_1['default'])(_0x56cf03[_0x25519a(0xb7)],_0x111fab);_0x56cf03[_0x25519a(0xb2)]=_0x3d8e89['exists'];const _0x2e6cbd=_0x3d8e89[_0x25519a(0xc5)][_0x25519a(0xc3)](/\D/g,'');_0x56cf03[_0x25519a(0xb7)]=_0x2e6cbd,await _0x56cf03['save']();}catch(_0x26c598){logger_1[_0x25519a(0xbc)]['error'](_0x25519a(0x9b)+_0x56cf03[_0x25519a(0xb7)]);}}return _0x483890;}