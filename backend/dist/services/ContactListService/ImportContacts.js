const a410_0x4ca21a=a410_0x5c55;(function(_0x2fa1fd,_0x230682){const _0x1ade48=a410_0x5c55,_0x3967ab=_0x2fa1fd();while(!![]){try{const _0x2032b4=-parseInt(_0x1ade48(0xa3))/0x1*(parseInt(_0x1ade48(0xcd))/0x2)+parseInt(_0x1ade48(0xc9))/0x3*(parseInt(_0x1ade48(0xaf))/0x4)+-parseInt(_0x1ade48(0xba))/0x5*(-parseInt(_0x1ade48(0xb7))/0x6)+parseInt(_0x1ade48(0x9f))/0x7+-parseInt(_0x1ade48(0xcc))/0x8+parseInt(_0x1ade48(0xa0))/0x9+-parseInt(_0x1ade48(0xa9))/0xa;if(_0x2032b4===_0x230682)break;else _0x3967ab['push'](_0x3967ab['shift']());}catch(_0xa18ae){_0x3967ab['push'](_0x3967ab['shift']());}}}(a410_0x2558,0x7583d));const a410_0x36e7e6=(function(){let _0x51a1a9=!![];return function(_0x212d7c,_0x44bf9d){const _0x42714f=_0x51a1a9?function(){const _0x1be9b2=a410_0x5c55;if(_0x44bf9d){const _0xcd5d8e=_0x44bf9d[_0x1be9b2(0xca)](_0x212d7c,arguments);return _0x44bf9d=null,_0xcd5d8e;}}:function(){};return _0x51a1a9=![],_0x42714f;};}()),a410_0x5204fa=a410_0x36e7e6(this,function(){const _0x1fc85a=a410_0x5c55;return a410_0x5204fa[_0x1fc85a(0xb5)]()[_0x1fc85a(0xb3)]('(((.+)+)+)+$')[_0x1fc85a(0xb5)]()[_0x1fc85a(0xb8)](a410_0x5204fa)[_0x1fc85a(0xb3)]('(((.+)+)+)+$');});a410_0x5204fa();'use strict';var __importDefault=this&&this[a410_0x4ca21a(0xb9)]||function(_0x418c97){const _0x20d4ee=a410_0x4ca21a;return _0x418c97&&_0x418c97[_0x20d4ee(0xac)]?_0x418c97:{'default':_0x418c97};};function a410_0x5c55(_0x382c4b,_0x3fd6f2){const _0x2c7b10=a410_0x2558();return a410_0x5c55=function(_0x5204fa,_0x36e7e6){_0x5204fa=_0x5204fa-0x9f;let _0x2558f3=_0x2c7b10[_0x5204fa];return _0x2558f3;},a410_0x5c55(_0x382c4b,_0x3fd6f2);}Object[a410_0x4ca21a(0xce)](exports,a410_0x4ca21a(0xac),{'value':!![]}),exports['ImportContacts']=void 0x0;const lodash_1=require('lodash'),xlsx_1=__importDefault(require(a410_0x4ca21a(0xb0))),lodash_2=require('lodash'),ContactListItem_1=__importDefault(require(a410_0x4ca21a(0xc2))),CheckNumber_1=__importDefault(require(a410_0x4ca21a(0xa7))),logger_1=require('../../utils/logger');function a410_0x2558(){const _0x42ddf6=['6tHKkDC','constructor','__importDefault','769635bfGNzW','Nome','Número\x20de\x20contato\x20inválido:\x20','ImportContacts','nome','Número','readFile','jid','../../models/ContactListItem','número','Email','E-mail','e-mail','replace','exists','411DWaczI','apply','number','1864640AwVatu','62qNvysv','defineProperty','logger','4779089eQPXUM','787284ehuuhE','findOrCreate','push','4129ZBPmlE','head','numero','map','../WbotServices/CheckNumber','has','4185930QQrAlj','email','default','__esModule','error','save','9836uhIkEZ','xlsx','Numero','isWhatsappValid','search','path','toString','utils'];a410_0x2558=function(){return _0x42ddf6;};return a410_0x2558();}async function ImportContacts(_0x4de333,_0x9fede4,_0x505ffd){const _0x112f42=a410_0x4ca21a,_0x53e189=xlsx_1[_0x112f42(0xab)][_0x112f42(0xc0)](_0x505ffd?.[_0x112f42(0xb4)]),_0xd74895=(0x0,lodash_1[_0x112f42(0xa4)])(Object['values'](_0x53e189['Sheets'])),_0x4dfdeb=xlsx_1['default'][_0x112f42(0xb6)]['sheet_to_json'](_0xd74895,{'header':0x0}),_0x2e9cd9=_0x4dfdeb[_0x112f42(0xa6)](_0x10388c=>{const _0x2b3ac4=_0x112f42;let _0x1e4510='',_0x34e75b='',_0x410dd7='';return((0x0,lodash_2['has'])(_0x10388c,_0x2b3ac4(0xbe))||(0x0,lodash_2[_0x2b3ac4(0xa8)])(_0x10388c,_0x2b3ac4(0xbb)))&&(_0x1e4510=_0x10388c[_0x2b3ac4(0xbe)]||_0x10388c['Nome']),((0x0,lodash_2['has'])(_0x10388c,'numero')||(0x0,lodash_2['has'])(_0x10388c,_0x2b3ac4(0xc3))||(0x0,lodash_2['has'])(_0x10388c,_0x2b3ac4(0xb1))||(0x0,lodash_2[_0x2b3ac4(0xa8)])(_0x10388c,_0x2b3ac4(0xbf)))&&(_0x34e75b=_0x10388c[_0x2b3ac4(0xa5)]||_0x10388c[_0x2b3ac4(0xc3)]||_0x10388c['Numero']||_0x10388c[_0x2b3ac4(0xbf)],_0x34e75b=(''+_0x34e75b)[_0x2b3ac4(0xc7)](/\D/g,'')),((0x0,lodash_2[_0x2b3ac4(0xa8)])(_0x10388c,_0x2b3ac4(0xaa))||(0x0,lodash_2[_0x2b3ac4(0xa8)])(_0x10388c,_0x2b3ac4(0xc6))||(0x0,lodash_2[_0x2b3ac4(0xa8)])(_0x10388c,'Email')||(0x0,lodash_2[_0x2b3ac4(0xa8)])(_0x10388c,_0x2b3ac4(0xc5)))&&(_0x410dd7=_0x10388c[_0x2b3ac4(0xaa)]||_0x10388c[_0x2b3ac4(0xc6)]||_0x10388c[_0x2b3ac4(0xc4)]||_0x10388c['E-mail']),{'name':_0x1e4510,'number':_0x34e75b,'email':_0x410dd7,'contactListId':_0x4de333,'companyId':_0x9fede4};}),_0x52c1e2=[];for(const _0x1b28d8 of _0x2e9cd9){const [_0x27b297,_0x788719]=await ContactListItem_1[_0x112f42(0xab)][_0x112f42(0xa1)]({'where':{'number':''+_0x1b28d8[_0x112f42(0xcb)],'contactListId':_0x1b28d8['contactListId'],'companyId':_0x1b28d8['companyId']},'defaults':_0x1b28d8});_0x788719&&_0x52c1e2[_0x112f42(0xa2)](_0x27b297);}if(_0x52c1e2)for(let _0x41a932 of _0x52c1e2){try{const _0x12a3cc=await(0x0,CheckNumber_1[_0x112f42(0xab)])(_0x41a932[_0x112f42(0xcb)],_0x9fede4);_0x41a932[_0x112f42(0xb2)]=_0x12a3cc[_0x112f42(0xc8)];const _0x9732a7=_0x12a3cc[_0x112f42(0xc1)][_0x112f42(0xc7)](/\D/g,'');_0x41a932[_0x112f42(0xcb)]=_0x9732a7,await _0x41a932[_0x112f42(0xae)]();}catch(_0x1b30fd){logger_1[_0x112f42(0xcf)][_0x112f42(0xad)](_0x112f42(0xbc)+_0x41a932[_0x112f42(0xcb)]);}}return _0x52c1e2;}exports[a410_0x4ca21a(0xbd)]=ImportContacts;