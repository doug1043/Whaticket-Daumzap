const a408_0x1df580=a408_0x2ae3;function a408_0x5c88(){const _0x493378=['email','53KjWvqc','constructor','values','readFile','Numero','22jVetfX','toString','head','numero','map','has','número','7194159OJoikM','findOrCreate','utils','50822rqvdmr','defineProperty','lodash','exists','path','Email','__esModule','5205987YRdNyw','sheet_to_json','jid','error','push','xlsx','E-mail','5828305eEsPaP','replace','search','companyId','save','1639980pxqkDC','8PgBJjr','logger','../../models/ContactListItem','ImportContacts','189jXoFbz','default','../WbotServices/CheckNumber','Número','11524850iuUGDw','84076jaLvPs','Número\x20de\x20contato\x20inválido:\x20','(((.+)+)+)+$','number'];a408_0x5c88=function(){return _0x493378;};return a408_0x5c88();}(function(_0x3473ab,_0x10dbcb){const _0x480143=a408_0x2ae3,_0x33dcb3=_0x3473ab();while(!![]){try{const _0xd48dec=parseInt(_0x480143(0xbd))/0x1*(parseInt(_0x480143(0xcc))/0x2)+-parseInt(_0x480143(0xb3))/0x3*(-parseInt(_0x480143(0xb8))/0x4)+parseInt(_0x480143(0xda))/0x5+-parseInt(_0x480143(0xae))/0x6+-parseInt(_0x480143(0xc9))/0x7+-parseInt(_0x480143(0xaf))/0x8*(-parseInt(_0x480143(0xd3))/0x9)+parseInt(_0x480143(0xb7))/0xa*(-parseInt(_0x480143(0xc2))/0xb);if(_0xd48dec===_0x10dbcb)break;else _0x33dcb3['push'](_0x33dcb3['shift']());}catch(_0x5bd7bf){_0x33dcb3['push'](_0x33dcb3['shift']());}}}(a408_0x5c88,0xc5857));const a408_0x3e26e5=(function(){let _0x3cee58=!![];return function(_0x2278e9,_0x4f533e){const _0x47cd73=_0x3cee58?function(){if(_0x4f533e){const _0x551382=_0x4f533e['apply'](_0x2278e9,arguments);return _0x4f533e=null,_0x551382;}}:function(){};return _0x3cee58=![],_0x47cd73;};}()),a408_0x2a88e6=a408_0x3e26e5(this,function(){const _0x444eea=a408_0x2ae3;return a408_0x2a88e6[_0x444eea(0xc3)]()[_0x444eea(0xdc)](_0x444eea(0xba))['toString']()[_0x444eea(0xbe)](a408_0x2a88e6)[_0x444eea(0xdc)]('(((.+)+)+)+$');});a408_0x2a88e6();function a408_0x2ae3(_0x13dc0a,_0x38c0f9){const _0x41ab39=a408_0x5c88();return a408_0x2ae3=function(_0x2a88e6,_0x3e26e5){_0x2a88e6=_0x2a88e6-0xac;let _0x5c8879=_0x41ab39[_0x2a88e6];return _0x5c8879;},a408_0x2ae3(_0x13dc0a,_0x38c0f9);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4eed98){const _0x22a635=a408_0x2ae3;return _0x4eed98&&_0x4eed98[_0x22a635(0xd2)]?_0x4eed98:{'default':_0x4eed98};};Object[a408_0x1df580(0xcd)](exports,a408_0x1df580(0xd2),{'value':!![]}),exports[a408_0x1df580(0xb2)]=void 0x0;const lodash_1=require(a408_0x1df580(0xce)),xlsx_1=__importDefault(require(a408_0x1df580(0xd8))),lodash_2=require('lodash'),ContactListItem_1=__importDefault(require(a408_0x1df580(0xb1))),CheckNumber_1=__importDefault(require(a408_0x1df580(0xb5))),logger_1=require('../../utils/logger');async function ImportContacts(_0x160aa0,_0x54fec0,_0x3f4c2a){const _0x44fa49=a408_0x1df580,_0xa4c687=xlsx_1[_0x44fa49(0xb4)][_0x44fa49(0xc0)](_0x3f4c2a?.[_0x44fa49(0xd0)]),_0x309966=(0x0,lodash_1[_0x44fa49(0xc4)])(Object[_0x44fa49(0xbf)](_0xa4c687['Sheets'])),_0x1d6dd9=xlsx_1[_0x44fa49(0xb4)][_0x44fa49(0xcb)][_0x44fa49(0xd4)](_0x309966,{'header':0x0}),_0xe7c4f=_0x1d6dd9[_0x44fa49(0xc6)](_0x5b306d=>{const _0xe6348f=_0x44fa49;let _0x2876a6='',_0x206335='',_0x1358f7='';return((0x0,lodash_2['has'])(_0x5b306d,'nome')||(0x0,lodash_2['has'])(_0x5b306d,'Nome'))&&(_0x2876a6=_0x5b306d['nome']||_0x5b306d['Nome']),((0x0,lodash_2[_0xe6348f(0xc7)])(_0x5b306d,_0xe6348f(0xc5))||(0x0,lodash_2[_0xe6348f(0xc7)])(_0x5b306d,_0xe6348f(0xc8))||(0x0,lodash_2[_0xe6348f(0xc7)])(_0x5b306d,'Numero')||(0x0,lodash_2[_0xe6348f(0xc7)])(_0x5b306d,'Número'))&&(_0x206335=_0x5b306d[_0xe6348f(0xc5)]||_0x5b306d[_0xe6348f(0xc8)]||_0x5b306d[_0xe6348f(0xc1)]||_0x5b306d[_0xe6348f(0xb6)],_0x206335=(''+_0x206335)[_0xe6348f(0xdb)](/\D/g,'')),((0x0,lodash_2['has'])(_0x5b306d,_0xe6348f(0xbc))||(0x0,lodash_2[_0xe6348f(0xc7)])(_0x5b306d,'e-mail')||(0x0,lodash_2[_0xe6348f(0xc7)])(_0x5b306d,_0xe6348f(0xd1))||(0x0,lodash_2[_0xe6348f(0xc7)])(_0x5b306d,_0xe6348f(0xd9)))&&(_0x1358f7=_0x5b306d[_0xe6348f(0xbc)]||_0x5b306d['e-mail']||_0x5b306d['Email']||_0x5b306d[_0xe6348f(0xd9)]),{'name':_0x2876a6,'number':_0x206335,'email':_0x1358f7,'contactListId':_0x160aa0,'companyId':_0x54fec0};}),_0x438fc3=[];for(const _0x13885e of _0xe7c4f){const [_0xe48c91,_0x40998f]=await ContactListItem_1[_0x44fa49(0xb4)][_0x44fa49(0xca)]({'where':{'number':''+_0x13885e[_0x44fa49(0xbb)],'contactListId':_0x13885e['contactListId'],'companyId':_0x13885e[_0x44fa49(0xac)]},'defaults':_0x13885e});_0x40998f&&_0x438fc3[_0x44fa49(0xd7)](_0xe48c91);}if(_0x438fc3)for(let _0x464ae4 of _0x438fc3){try{const _0x2c9709=await(0x0,CheckNumber_1[_0x44fa49(0xb4)])(_0x464ae4[_0x44fa49(0xbb)],_0x54fec0);_0x464ae4['isWhatsappValid']=_0x2c9709[_0x44fa49(0xcf)];const _0x166d0b=_0x2c9709[_0x44fa49(0xd5)][_0x44fa49(0xdb)](/\D/g,'');_0x464ae4[_0x44fa49(0xbb)]=_0x166d0b,await _0x464ae4[_0x44fa49(0xad)]();}catch(_0x2e1efe){logger_1[_0x44fa49(0xb0)][_0x44fa49(0xd6)](_0x44fa49(0xb9)+_0x464ae4[_0x44fa49(0xbb)]);}}return _0x438fc3;}exports[a408_0x1df580(0xb2)]=ImportContacts;