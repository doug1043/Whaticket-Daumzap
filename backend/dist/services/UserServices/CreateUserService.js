const a533_0xd45760=a533_0x2704;(function(_0x37d66b,_0x3a78a0){const _0x3452c0=a533_0x2704,_0x58ac34=_0x37d66b();while(!![]){try{const _0x4f0fa5=parseInt(_0x3452c0(0x18f))/0x1*(parseInt(_0x3452c0(0x186))/0x2)+-parseInt(_0x3452c0(0x19a))/0x3+parseInt(_0x3452c0(0x18e))/0x4+-parseInt(_0x3452c0(0x189))/0x5*(-parseInt(_0x3452c0(0x197))/0x6)+-parseInt(_0x3452c0(0x1a4))/0x7*(-parseInt(_0x3452c0(0x1b2))/0x8)+parseInt(_0x3452c0(0x19c))/0x9*(-parseInt(_0x3452c0(0x1b6))/0xa)+-parseInt(_0x3452c0(0x184))/0xb;if(_0x4f0fa5===_0x3a78a0)break;else _0x58ac34['push'](_0x58ac34['shift']());}catch(_0x4d73b7){_0x58ac34['push'](_0x58ac34['shift']());}}}(a533_0x3f71,0xe4c75));const a533_0x4933af=(function(){let _0x57fe94=!![];return function(_0x4fdf4d,_0x40a948){const _0x2aaabe=_0x57fe94?function(){const _0x1395b2=a533_0x2704;if(_0x40a948){const _0x9a2d4b=_0x40a948[_0x1395b2(0x1ac)](_0x4fdf4d,arguments);return _0x40a948=null,_0x9a2d4b;}}:function(){};return _0x57fe94=![],_0x2aaabe;};}()),a533_0x51b9c9=a533_0x4933af(this,function(){const _0x229f22=a533_0x2704;return a533_0x51b9c9['toString']()['search'](_0x229f22(0x1a7))[_0x229f22(0x1a0)]()[_0x229f22(0x182)](a533_0x51b9c9)[_0x229f22(0x1b0)](_0x229f22(0x1a7));});function a533_0x2704(_0x425261,_0x1328f9){const _0x124f34=a533_0x3f71();return a533_0x2704=function(_0x51b9c9,_0x4933af){_0x51b9c9=_0x51b9c9-0x180;let _0x3f71c7=_0x124f34[_0x51b9c9];return _0x3f71c7;},a533_0x2704(_0x425261,_0x1328f9);}a533_0x51b9c9();'use strict';var __createBinding=this&&this[a533_0xd45760(0x19f)]||(Object['create']?function(_0x3a113e,_0x554ff6,_0x3b5aab,_0x611b10){const _0x98464b=a533_0xd45760;if(_0x611b10===undefined)_0x611b10=_0x3b5aab;var _0x909781=Object[_0x98464b(0x1a5)](_0x554ff6,_0x3b5aab);(!_0x909781||(_0x98464b(0x185)in _0x909781?!_0x554ff6[_0x98464b(0x18c)]:_0x909781[_0x98464b(0x1b5)]||_0x909781[_0x98464b(0x192)]))&&(_0x909781={'enumerable':!![],'get':function(){return _0x554ff6[_0x3b5aab];}}),Object[_0x98464b(0x1a9)](_0x3a113e,_0x611b10,_0x909781);}:function(_0xe7d829,_0x4aceae,_0x523ec3,_0x494a84){if(_0x494a84===undefined)_0x494a84=_0x523ec3;_0xe7d829[_0x494a84]=_0x4aceae[_0x523ec3];}),__setModuleDefault=this&&this[a533_0xd45760(0x183)]||(Object[a533_0xd45760(0x18b)]?function(_0xc3fe92,_0x497070){const _0x4250ba=a533_0xd45760;Object[_0x4250ba(0x1a9)](_0xc3fe92,_0x4250ba(0x1b4),{'enumerable':!![],'value':_0x497070});}:function(_0x26def8,_0x40888b){const _0xbaec36=a533_0xd45760;_0x26def8[_0xbaec36(0x1b4)]=_0x40888b;}),__importStar=this&&this[a533_0xd45760(0x19b)]||function(_0x19fc98){const _0x40f966=a533_0xd45760;if(_0x19fc98&&_0x19fc98[_0x40f966(0x18c)])return _0x19fc98;var _0x25d372={};if(_0x19fc98!=null){for(var _0x373c10 in _0x19fc98)if(_0x373c10!==_0x40f966(0x1b4)&&Object[_0x40f966(0x18d)]['hasOwnProperty'][_0x40f966(0x1a1)](_0x19fc98,_0x373c10))__createBinding(_0x25d372,_0x19fc98,_0x373c10);}return __setModuleDefault(_0x25d372,_0x19fc98),_0x25d372;},__importDefault=this&&this['__importDefault']||function(_0x5b7551){const _0x261f3d=a533_0xd45760;return _0x5b7551&&_0x5b7551[_0x261f3d(0x18c)]?_0x5b7551:{'default':_0x5b7551};};function a533_0x3f71(){const _0x3da328=['shape','apply','SerializeUser','An\x20user\x20with\x20this\x20email\x20already\x20exists.','plan','search','Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20','4644984UEWOkA','users','default','writable','970250PiuICf','string','min','constructor','__setModuleDefault','19551268tAHbpX','get','14682SeWTnA','reload','object','2601275vCMLkb','../../errors/AppError','create','__esModule','prototype','4620124XvfMJl','211OvwYWW','../../helpers/SerializeUser','count','configurable','Check-email','validate','findOne','../../models/User','6OdWFPZ','required','email','69360RCkOOX','__importStar','99CyjchM','$set','../../models/Company','__createBinding','toString','call','boolean','queues','7TMOJEe','getOwnPropertyDescriptor','../../models/Plan','(((.+)+)+)+$','admin','defineProperty','Company\x20not\x20found'];a533_0x3f71=function(){return _0x3da328;};return a533_0x3f71();}Object[a533_0xd45760(0x1a9)](exports,a533_0xd45760(0x18c),{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a533_0xd45760(0x18a))),SerializeUser_1=require(a533_0xd45760(0x190)),User_1=__importDefault(require(a533_0xd45760(0x196))),Plan_1=__importDefault(require(a533_0xd45760(0x1a6))),Company_1=__importDefault(require(a533_0xd45760(0x19e))),CreateUserService=async({email:_0x1e5589,password:_0x2be66b,name:_0x320353,queueIds:queueIds=[],companyId:_0x51e9a0,profile:profile=a533_0xd45760(0x1a8),allTicket:_0x37c78e,spy:_0x163804,whatsappId:_0x59fe7c,startWork:_0x19536b,endWork:_0xced5c4,isTricked:_0x413aed,super:_0x82f189,defaultMenu:_0x1dc28d})=>{const _0x5cb9af=a533_0xd45760;if(_0x51e9a0!==undefined){const _0x474f9d=await Company_1['default'][_0x5cb9af(0x195)]({'where':{'id':_0x51e9a0},'include':[{'model':Plan_1[_0x5cb9af(0x1b4)],'as':_0x5cb9af(0x1af)}]});if(_0x474f9d){const _0x1eb4be=await User_1[_0x5cb9af(0x1b4)][_0x5cb9af(0x191)]({'where':{'companyId':_0x51e9a0}});if(_0x1eb4be>=_0x474f9d['plan'][_0x5cb9af(0x1b3)])throw new AppError_1[(_0x5cb9af(0x1b4))](_0x5cb9af(0x1b1)+_0x1eb4be,0x190);}else throw new AppError_1[(_0x5cb9af(0x1b4))](_0x5cb9af(0x1aa),0x194);}const _0x4bab7e=Yup[_0x5cb9af(0x188)]()[_0x5cb9af(0x1ab)]({'name':Yup[_0x5cb9af(0x180)]()[_0x5cb9af(0x198)]()[_0x5cb9af(0x181)](0x2),'email':Yup['string']()[_0x5cb9af(0x199)]()[_0x5cb9af(0x198)]()['test'](_0x5cb9af(0x193),_0x5cb9af(0x1ae),async _0x2706cf=>{const _0x23d6d5=_0x5cb9af;if(!_0x2706cf)return![];const _0x200613=await User_1[_0x23d6d5(0x1b4)][_0x23d6d5(0x195)]({'where':{'email':_0x2706cf}});return!_0x200613;}),'password':Yup['string']()[_0x5cb9af(0x198)]()[_0x5cb9af(0x181)](0x5),'super':Yup[_0x5cb9af(0x1a2)]()[_0x5cb9af(0x198)]()});try{await _0x4bab7e[_0x5cb9af(0x194)]({'email':_0x1e5589,'password':_0x2be66b,'name':_0x320353,'super':_0x82f189});}catch(_0x17f836){throw new AppError_1[(_0x5cb9af(0x1b4))](_0x17f836['message'],0x190);}const _0x3d018b=await User_1[_0x5cb9af(0x1b4)][_0x5cb9af(0x18b)]({'email':_0x1e5589,'password':_0x2be66b,'name':_0x320353,'companyId':_0x51e9a0,'profile':profile,'allTicket':_0x37c78e,'whatsappId':_0x59fe7c||null,'startWork':_0x19536b,'endWork':_0xced5c4,'spy':_0x163804,'isTricked':_0x413aed,'super':_0x82f189,'defaultMenu':_0x1dc28d});queueIds['length']>0x0&&await _0x3d018b[_0x5cb9af(0x19d)](_0x5cb9af(0x1a3),queueIds);await _0x3d018b[_0x5cb9af(0x187)]();const _0x3f3e97=await(0x0,SerializeUser_1[_0x5cb9af(0x1ad)])(_0x3d018b);return _0x3f3e97;};exports['default']=CreateUserService;