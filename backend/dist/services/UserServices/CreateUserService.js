'use strict';const a567_0x2aa193=a567_0xd1a2;(function(_0x21fc6a,_0x179bf5){const _0x9993fd=a567_0xd1a2,_0x174715=_0x21fc6a();while(!![]){try{const _0x2ac870=parseInt(_0x9993fd(0x116))/0x1+-parseInt(_0x9993fd(0x11d))/0x2*(-parseInt(_0x9993fd(0x115))/0x3)+-parseInt(_0x9993fd(0xf2))/0x4+parseInt(_0x9993fd(0x11a))/0x5+-parseInt(_0x9993fd(0x114))/0x6+-parseInt(_0x9993fd(0x120))/0x7+parseInt(_0x9993fd(0x121))/0x8*(parseInt(_0x9993fd(0xfe))/0x9);if(_0x2ac870===_0x179bf5)break;else _0x174715['push'](_0x174715['shift']());}catch(_0x53c907){_0x174715['push'](_0x174715['shift']());}}}(a567_0x3589,0xb9c9b));var __createBinding=this&&this[a567_0x2aa193(0xf4)]||(Object['create']?function(_0x429073,_0x400252,_0x13d5fd,_0x496c18){const _0x3d5f77=a567_0x2aa193;if(_0x496c18===undefined)_0x496c18=_0x13d5fd;var _0x4bc461=Object[_0x3d5f77(0x10f)](_0x400252,_0x13d5fd);(!_0x4bc461||(_0x3d5f77(0x106)in _0x4bc461?!_0x400252[_0x3d5f77(0xf8)]:_0x4bc461['writable']||_0x4bc461[_0x3d5f77(0x10c)]))&&(_0x4bc461={'enumerable':!![],'get':function(){return _0x400252[_0x13d5fd];}}),Object[_0x3d5f77(0x11c)](_0x429073,_0x496c18,_0x4bc461);}:function(_0x845384,_0x33a01c,_0x4109e7,_0x7f4987){if(_0x7f4987===undefined)_0x7f4987=_0x4109e7;_0x845384[_0x7f4987]=_0x33a01c[_0x4109e7];}),__setModuleDefault=this&&this[a567_0x2aa193(0x111)]||(Object[a567_0x2aa193(0x11f)]?function(_0xf7d2e1,_0x48c57d){const _0x627f64=a567_0x2aa193;Object[_0x627f64(0x11c)](_0xf7d2e1,'default',{'enumerable':!![],'value':_0x48c57d});}:function(_0x363325,_0x1389bc){const _0x4cc7a8=a567_0x2aa193;_0x363325[_0x4cc7a8(0x112)]=_0x1389bc;}),__importStar=this&&this[a567_0x2aa193(0xf7)]||(function(){const _0x45251d=(function(){let _0x5237d5=!![];return function(_0x5acda0,_0x2bfbba){const _0x179f21=_0x5237d5?function(){if(_0x2bfbba){const _0x13193d=_0x2bfbba['apply'](_0x5acda0,arguments);return _0x2bfbba=null,_0x13193d;}}:function(){};return _0x5237d5=![],_0x179f21;};}()),_0x2d1261=_0x45251d(this,function(){const _0x3419d6=a567_0xd1a2;return _0x2d1261[_0x3419d6(0x103)]()[_0x3419d6(0xff)](_0x3419d6(0x11b))[_0x3419d6(0x103)]()[_0x3419d6(0x102)](_0x2d1261)['search'](_0x3419d6(0x11b));});_0x2d1261();var _0x552f0b=function(_0x5c2beb){return _0x552f0b=Object['getOwnPropertyNames']||function(_0x376d1a){const _0x93e837=a567_0xd1a2;var _0x5b5916=[];for(var _0x31f7d1 in _0x376d1a)if(Object[_0x93e837(0xfa)]['hasOwnProperty']['call'](_0x376d1a,_0x31f7d1))_0x5b5916[_0x5b5916[_0x93e837(0x118)]]=_0x31f7d1;return _0x5b5916;},_0x552f0b(_0x5c2beb);};return function(_0x1bf717){const _0x10d49a=a567_0xd1a2;if(_0x1bf717&&_0x1bf717[_0x10d49a(0xf8)])return _0x1bf717;var _0x400fef={};if(_0x1bf717!=null){for(var _0x3de37d=_0x552f0b(_0x1bf717),_0x1fbea0=0x0;_0x1fbea0<_0x3de37d['length'];_0x1fbea0++)if(_0x3de37d[_0x1fbea0]!=='default')__createBinding(_0x400fef,_0x1bf717,_0x3de37d[_0x1fbea0]);}return __setModuleDefault(_0x400fef,_0x1bf717),_0x400fef;};}()),__importDefault=this&&this[a567_0x2aa193(0x100)]||function(_0x321f1a){const _0x2e3a63=a567_0x2aa193;return _0x321f1a&&_0x321f1a[_0x2e3a63(0xf8)]?_0x321f1a:{'default':_0x321f1a};};Object['defineProperty'](exports,a567_0x2aa193(0xf8),{'value':!![]});const Yup=__importStar(require(a567_0x2aa193(0xf0))),AppError_1=__importDefault(require('../../errors/AppError')),SerializeUser_1=require(a567_0x2aa193(0x10a)),User_1=__importDefault(require('../../models/User')),Plan_1=__importDefault(require('../../models/Plan')),Company_1=__importDefault(require(a567_0x2aa193(0x104))),CreateUserService=async({email:_0x6439e9,password:_0x31791d,name:_0x4e065e,queueIds:queueIds=[],companyId:_0x271f72,profile:profile=a567_0x2aa193(0x122),isTricked:isTricked=a567_0x2aa193(0x110),spy:spy=a567_0x2aa193(0xfd),allTicket:allTicket=a567_0x2aa193(0xfd),whatsappId:_0x3af8aa,startWork:_0x24a1f7,endWork:_0x83fc65,defaultMenu:defaultMenu=a567_0x2aa193(0x113)})=>{const _0x49a771=a567_0x2aa193;if(_0x271f72!==undefined){const _0x54447e=await Company_1[_0x49a771(0x112)][_0x49a771(0x105)]({'where':{'id':_0x271f72},'include':[{'model':Plan_1[_0x49a771(0x112)],'as':'plan'}]});if(_0x54447e!==null){const _0xb281f1=await User_1['default'][_0x49a771(0x101)]({'where':{'companyId':_0x271f72}});if(_0xb281f1>=_0x54447e[_0x49a771(0xfb)][_0x49a771(0xf1)])throw new AppError_1[(_0x49a771(0x112))](_0x49a771(0x11e)+_0xb281f1);}}const _0x2eca5f=Yup['object']()[_0x49a771(0x10d)]({'name':Yup[_0x49a771(0xf6)]()['required']()['min'](0x2),'email':Yup[_0x49a771(0xf6)]()[_0x49a771(0x109)]()[_0x49a771(0x108)]()['test'](_0x49a771(0xfc),_0x49a771(0xf3),async _0x56aea5=>{const _0x3b4f03=_0x49a771;if(!_0x56aea5)return![];const _0x5392ce=await User_1['default'][_0x3b4f03(0x105)]({'where':{'email':_0x56aea5}});return!_0x5392ce;}),'password':Yup['string']()[_0x49a771(0x108)]()[_0x49a771(0x10e)](0x5)});try{await _0x2eca5f[_0x49a771(0xf9)]({'email':_0x6439e9,'password':_0x31791d,'name':_0x4e065e});}catch(_0x4b5450){throw new AppError_1[(_0x49a771(0x112))](_0x4b5450['message']);}const _0xb5fc7c=await User_1[_0x49a771(0x112)]['create']({'email':_0x6439e9,'password':_0x31791d,'name':_0x4e065e,'companyId':_0x271f72,'profile':profile,'isTricked':isTricked,'spy':spy,'allTicket':allTicket,'whatsappId':_0x3af8aa,'startWork':_0x24a1f7,'endWork':_0x83fc65,'defaultMenu':defaultMenu},{'include':[_0x49a771(0x107),_0x49a771(0xf5)]});await _0xb5fc7c[_0x49a771(0x10b)](_0x49a771(0x107),queueIds),await _0xb5fc7c[_0x49a771(0x119)]();const _0x39376f=(0x0,SerializeUser_1[_0x49a771(0x117)])(_0xb5fc7c);return _0x39376f;};function a567_0xd1a2(_0x3454a4,_0x50cf8d){const _0x461f4d=a567_0x3589();return a567_0xd1a2=function(_0x1e2dfc,_0x444245){_0x1e2dfc=_0x1e2dfc-0xf0;let _0x35897f=_0x461f4d[_0x1e2dfc];return _0x35897f;},a567_0xd1a2(_0x3454a4,_0x50cf8d);}function a567_0x3589(){const _0x169772=['shape','min','getOwnPropertyDescriptor','enabled','__setModuleDefault','default','open','6368178dUjkXA','3260127JHNRNT','1367338RCEpJP','SerializeUser','length','reload','3106870OIlzRQ','(((.+)+)+)+$','defineProperty','2LVZgfw','Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20','create','8752982RhNFeA','2260912sFjgex','admin','yup','users','2271492AIJthN','An\x20user\x20with\x20this\x20email\x20already\x20exists.','__createBinding','company','string','__importStar','__esModule','validate','prototype','plan','Check-email','disabled','18DJhtOd','search','__importDefault','count','constructor','toString','../../models/Company','findOne','get','queues','required','email','../../helpers/SerializeUser','$set','configurable'];a567_0x3589=function(){return _0x169772;};return a567_0x3589();}exports[a567_0x2aa193(0x112)]=CreateUserService;