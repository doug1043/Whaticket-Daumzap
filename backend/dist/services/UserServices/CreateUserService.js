const a535_0x153920=a535_0x4c0d;(function(_0x3356b,_0x102531){const _0x29e5b1=a535_0x4c0d,_0x370eb8=_0x3356b();while(!![]){try{const _0x5a5a9e=parseInt(_0x29e5b1(0xdb))/0x1+parseInt(_0x29e5b1(0xe8))/0x2*(parseInt(_0x29e5b1(0xe7))/0x3)+parseInt(_0x29e5b1(0xd0))/0x4*(-parseInt(_0x29e5b1(0xf2))/0x5)+parseInt(_0x29e5b1(0xcc))/0x6*(-parseInt(_0x29e5b1(0xd7))/0x7)+-parseInt(_0x29e5b1(0xdf))/0x8*(-parseInt(_0x29e5b1(0xd9))/0x9)+-parseInt(_0x29e5b1(0xe9))/0xa*(-parseInt(_0x29e5b1(0xea))/0xb)+-parseInt(_0x29e5b1(0xd3))/0xc;if(_0x5a5a9e===_0x102531)break;else _0x370eb8['push'](_0x370eb8['shift']());}catch(_0x6183cb){_0x370eb8['push'](_0x370eb8['shift']());}}}(a535_0x1f19,0xa3aaf));function a535_0x1f19(){const _0x5b8b2f=['apply','required','writable','validate','18NoMxQP','189146qydMYU','8722690MnxOlM','11AuvWCF','__importDefault','defineProperty','Company\x20not\x20found','users','boolean','toString','SerializeUser','165920ufGhFG','shape','(((.+)+)+)+$','../../errors/AppError','configurable','admin','18nCbkAi','__importStar','string','__esModule','148hWcUAC','call','../../models/User','2187924GgzHHB','yup','../../models/Plan','reload','2197671AzZtjr','getOwnPropertyDescriptor','10368738nxyRIb','min','430588oZLrCN','default','search','create','8gQeXCR','__createBinding','plan','findOne'];a535_0x1f19=function(){return _0x5b8b2f;};return a535_0x1f19();}const a535_0x289966=(function(){let _0x533a4c=!![];return function(_0x567993,_0x675243){const _0x51fd61=_0x533a4c?function(){const _0x404307=a535_0x4c0d;if(_0x675243){const _0x2b95eb=_0x675243[_0x404307(0xe3)](_0x567993,arguments);return _0x675243=null,_0x2b95eb;}}:function(){};return _0x533a4c=![],_0x51fd61;};}()),a535_0x307631=a535_0x289966(this,function(){const _0x371778=a535_0x4c0d;return a535_0x307631[_0x371778(0xf0)]()[_0x371778(0xdd)]('(((.+)+)+)+$')['toString']()['constructor'](a535_0x307631)[_0x371778(0xdd)](_0x371778(0xc8));});a535_0x307631();'use strict';var __createBinding=this&&this[a535_0x153920(0xe0)]||(Object[a535_0x153920(0xde)]?function(_0x1a970d,_0x292773,_0x7ce07e,_0x13f5f3){const _0x4cf0f0=a535_0x153920;if(_0x13f5f3===undefined)_0x13f5f3=_0x7ce07e;var _0x425ee2=Object[_0x4cf0f0(0xd8)](_0x292773,_0x7ce07e);(!_0x425ee2||('get'in _0x425ee2?!_0x292773[_0x4cf0f0(0xcf)]:_0x425ee2[_0x4cf0f0(0xe5)]||_0x425ee2[_0x4cf0f0(0xca)]))&&(_0x425ee2={'enumerable':!![],'get':function(){return _0x292773[_0x7ce07e];}}),Object[_0x4cf0f0(0xec)](_0x1a970d,_0x13f5f3,_0x425ee2);}:function(_0x2137df,_0x514579,_0x5e923c,_0x4e8db6){if(_0x4e8db6===undefined)_0x4e8db6=_0x5e923c;_0x2137df[_0x4e8db6]=_0x514579[_0x5e923c];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a535_0x153920(0xde)]?function(_0x4ce125,_0x3e0d00){const _0x35043a=a535_0x153920;Object[_0x35043a(0xec)](_0x4ce125,_0x35043a(0xdc),{'enumerable':!![],'value':_0x3e0d00});}:function(_0x1b617b,_0x185963){const _0x2bcc56=a535_0x153920;_0x1b617b[_0x2bcc56(0xdc)]=_0x185963;}),__importStar=this&&this[a535_0x153920(0xcd)]||function(_0x4d2ae5){const _0x52508a=a535_0x153920;if(_0x4d2ae5&&_0x4d2ae5['__esModule'])return _0x4d2ae5;var _0x13f066={};if(_0x4d2ae5!=null){for(var _0x1d8274 in _0x4d2ae5)if(_0x1d8274!==_0x52508a(0xdc)&&Object['prototype']['hasOwnProperty'][_0x52508a(0xd1)](_0x4d2ae5,_0x1d8274))__createBinding(_0x13f066,_0x4d2ae5,_0x1d8274);}return __setModuleDefault(_0x13f066,_0x4d2ae5),_0x13f066;},__importDefault=this&&this[a535_0x153920(0xeb)]||function(_0x3c0534){const _0x461ee4=a535_0x153920;return _0x3c0534&&_0x3c0534[_0x461ee4(0xcf)]?_0x3c0534:{'default':_0x3c0534};};Object[a535_0x153920(0xec)](exports,a535_0x153920(0xcf),{'value':!![]});const Yup=__importStar(require(a535_0x153920(0xd4))),AppError_1=__importDefault(require(a535_0x153920(0xc9))),SerializeUser_1=require('../../helpers/SerializeUser'),User_1=__importDefault(require(a535_0x153920(0xd2))),Plan_1=__importDefault(require(a535_0x153920(0xd5))),Company_1=__importDefault(require('../../models/Company')),CreateUserService=async({email:_0x5c5b90,password:_0x331f81,name:_0x51c8d6,queueIds:queueIds=[],companyId:_0x2b48a4,profile:profile=a535_0x153920(0xcb),allTicket:_0xc1a510,spy:_0x107d8d,whatsappId:_0x214c29,startWork:_0x356a43,endWork:_0x3ab9a8,isTricked:_0x440a66,super:_0x1d351f,defaultMenu:_0x108697})=>{const _0x583cff=a535_0x153920;if(_0x2b48a4!==undefined){const _0x417af5=await Company_1['default'][_0x583cff(0xe2)]({'where':{'id':_0x2b48a4},'include':[{'model':Plan_1[_0x583cff(0xdc)],'as':_0x583cff(0xe1)}]});if(_0x417af5){const _0x316d55=await User_1['default']['count']({'where':{'companyId':_0x2b48a4}});if(_0x316d55>=_0x417af5[_0x583cff(0xe1)][_0x583cff(0xee)])throw new AppError_1[(_0x583cff(0xdc))]('Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20'+_0x316d55,0x190);}else throw new AppError_1[(_0x583cff(0xdc))](_0x583cff(0xed),0x194);}const _0x4b183b=Yup['object']()[_0x583cff(0xf3)]({'name':Yup[_0x583cff(0xce)]()[_0x583cff(0xe4)]()['min'](0x2),'email':Yup[_0x583cff(0xce)]()['email']()[_0x583cff(0xe4)]()['test']('Check-email','An\x20user\x20with\x20this\x20email\x20already\x20exists.',async _0x40d045=>{const _0x1b2001=_0x583cff;if(!_0x40d045)return![];const _0x33a76a=await User_1[_0x1b2001(0xdc)][_0x1b2001(0xe2)]({'where':{'email':_0x40d045}});return!_0x33a76a;}),'password':Yup[_0x583cff(0xce)]()[_0x583cff(0xe4)]()[_0x583cff(0xda)](0x5),'super':Yup[_0x583cff(0xef)]()[_0x583cff(0xe4)]()});try{await _0x4b183b[_0x583cff(0xe6)]({'email':_0x5c5b90,'password':_0x331f81,'name':_0x51c8d6,'super':_0x1d351f});}catch(_0x3ef48a){throw new AppError_1[(_0x583cff(0xdc))](_0x3ef48a['message'],0x190);}const _0x3c5cac=await User_1['default'][_0x583cff(0xde)]({'email':_0x5c5b90,'password':_0x331f81,'name':_0x51c8d6,'companyId':_0x2b48a4,'profile':profile,'allTicket':_0xc1a510,'whatsappId':_0x214c29||null,'startWork':_0x356a43,'endWork':_0x3ab9a8,'spy':_0x107d8d,'isTricked':_0x440a66,'super':_0x1d351f,'defaultMenu':_0x108697});queueIds['length']>0x0&&await _0x3c5cac['$set']('queues',queueIds);await _0x3c5cac[_0x583cff(0xd6)]();const _0x1d6f95=await(0x0,SerializeUser_1[_0x583cff(0xf1)])(_0x3c5cac);return _0x1d6f95;};function a535_0x4c0d(_0x1dc6c4,_0x565735){const _0x1abccc=a535_0x1f19();return a535_0x4c0d=function(_0x307631,_0x289966){_0x307631=_0x307631-0xc8;let _0x1f199a=_0x1abccc[_0x307631];return _0x1f199a;},a535_0x4c0d(_0x1dc6c4,_0x565735);}exports[a535_0x153920(0xdc)]=CreateUserService;