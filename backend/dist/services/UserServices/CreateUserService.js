const a526_0x5505b1=a526_0x20ba;(function(_0x59b301,_0x560a38){const _0x3f125a=a526_0x20ba,_0x332a75=_0x59b301();while(!![]){try{const _0x18023c=-parseInt(_0x3f125a(0x9b))/0x1+-parseInt(_0x3f125a(0xa0))/0x2*(-parseInt(_0x3f125a(0x92))/0x3)+-parseInt(_0x3f125a(0xb0))/0x4*(parseInt(_0x3f125a(0x98))/0x5)+parseInt(_0x3f125a(0x87))/0x6*(-parseInt(_0x3f125a(0x9a))/0x7)+parseInt(_0x3f125a(0x97))/0x8*(parseInt(_0x3f125a(0xa1))/0x9)+-parseInt(_0x3f125a(0x9d))/0xa+parseInt(_0x3f125a(0x8a))/0xb;if(_0x18023c===_0x560a38)break;else _0x332a75['push'](_0x332a75['shift']());}catch(_0x5ebcbe){_0x332a75['push'](_0x332a75['shift']());}}}(a526_0x4edf,0x52066));const a526_0x8a610e=(function(){let _0x114bbe=!![];return function(_0x41ba36,_0x5e6f2a){const _0x31fae8=_0x114bbe?function(){const _0x2c4331=a526_0x20ba;if(_0x5e6f2a){const _0x5113b5=_0x5e6f2a[_0x2c4331(0x9c)](_0x41ba36,arguments);return _0x5e6f2a=null,_0x5113b5;}}:function(){};return _0x114bbe=![],_0x31fae8;};}()),a526_0xb28425=a526_0x8a610e(this,function(){const _0x44e4ed=a526_0x20ba;return a526_0xb28425['toString']()[_0x44e4ed(0xaf)](_0x44e4ed(0x95))[_0x44e4ed(0x8b)]()['constructor'](a526_0xb28425)['search'](_0x44e4ed(0x95));});function a526_0x4edf(){const _0x495a05=['validate','(((.+)+)+)+$','email','19192iasgVQ','3485rHvdgQ','SerializeUser','2681WaGWUv','295907RtFsis','apply','5789290AhvIhC','default','required','964616TwFLIU','1899UBxdSo','prototype','../../errors/AppError','users','Check-email','get','findOne','getOwnPropertyDescriptor','test','admin','Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20','configurable','plan','count','search','3488ieVstO','message','../../models/Company','../../models/Plan','defineProperty','writable','3432bTmbsg','__createBinding','An\x20user\x20with\x20this\x20email\x20already\x20exists.','11540903RFGPTG','toString','string','boolean','create','__esModule','__importDefault','$set','3duaPmr','hasOwnProperty'];a526_0x4edf=function(){return _0x495a05;};return a526_0x4edf();}a526_0xb28425();function a526_0x20ba(_0x4998b2,_0x33aa26){const _0xc10e62=a526_0x4edf();return a526_0x20ba=function(_0xb28425,_0x8a610e){_0xb28425=_0xb28425-0x87;let _0x4edf73=_0xc10e62[_0xb28425];return _0x4edf73;},a526_0x20ba(_0x4998b2,_0x33aa26);}'use strict';var __createBinding=this&&this[a526_0x5505b1(0x88)]||(Object[a526_0x5505b1(0x8e)]?function(_0x258bd7,_0x5ccb7a,_0xb36fb0,_0x5687a6){const _0xae8686=a526_0x5505b1;if(_0x5687a6===undefined)_0x5687a6=_0xb36fb0;var _0x4604c7=Object[_0xae8686(0xa8)](_0x5ccb7a,_0xb36fb0);(!_0x4604c7||(_0xae8686(0xa6)in _0x4604c7?!_0x5ccb7a[_0xae8686(0x8f)]:_0x4604c7[_0xae8686(0xb5)]||_0x4604c7[_0xae8686(0xac)]))&&(_0x4604c7={'enumerable':!![],'get':function(){return _0x5ccb7a[_0xb36fb0];}}),Object[_0xae8686(0xb4)](_0x258bd7,_0x5687a6,_0x4604c7);}:function(_0x4b6120,_0x3a4f58,_0xf8b9b,_0x519726){if(_0x519726===undefined)_0x519726=_0xf8b9b;_0x4b6120[_0x519726]=_0x3a4f58[_0xf8b9b];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a526_0x5505b1(0x8e)]?function(_0x59303a,_0x565b74){const _0x22eac2=a526_0x5505b1;Object[_0x22eac2(0xb4)](_0x59303a,_0x22eac2(0x9e),{'enumerable':!![],'value':_0x565b74});}:function(_0x8b6f59,_0x10778b){const _0x71fcf1=a526_0x5505b1;_0x8b6f59[_0x71fcf1(0x9e)]=_0x10778b;}),__importStar=this&&this['__importStar']||function(_0x3ba438){const _0x254782=a526_0x5505b1;if(_0x3ba438&&_0x3ba438[_0x254782(0x8f)])return _0x3ba438;var _0x2802a3={};if(_0x3ba438!=null){for(var _0x3933c5 in _0x3ba438)if(_0x3933c5!==_0x254782(0x9e)&&Object[_0x254782(0xa2)][_0x254782(0x93)]['call'](_0x3ba438,_0x3933c5))__createBinding(_0x2802a3,_0x3ba438,_0x3933c5);}return __setModuleDefault(_0x2802a3,_0x3ba438),_0x2802a3;},__importDefault=this&&this[a526_0x5505b1(0x90)]||function(_0x2a34b7){const _0x1040ba=a526_0x5505b1;return _0x2a34b7&&_0x2a34b7[_0x1040ba(0x8f)]?_0x2a34b7:{'default':_0x2a34b7};};Object[a526_0x5505b1(0xb4)](exports,a526_0x5505b1(0x8f),{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a526_0x5505b1(0xa3))),SerializeUser_1=require('../../helpers/SerializeUser'),User_1=__importDefault(require('../../models/User')),Plan_1=__importDefault(require(a526_0x5505b1(0xb3))),Company_1=__importDefault(require(a526_0x5505b1(0xb2))),CreateUserService=async({email:_0x9ec367,password:_0x206016,name:_0xab236,queueIds:queueIds=[],companyId:_0x4eb84a,profile:profile=a526_0x5505b1(0xaa),allTicket:_0x127dc8,spy:_0x877152,whatsappId:_0x34b4ea,startWork:_0x128b90,endWork:_0x4975ed,isTricked:_0x864f81,super:_0x536662,defaultMenu:_0x21f6ae})=>{const _0x275ab4=a526_0x5505b1;if(_0x4eb84a!==undefined){const _0x5eb323=await Company_1[_0x275ab4(0x9e)][_0x275ab4(0xa7)]({'where':{'id':_0x4eb84a},'include':[{'model':Plan_1[_0x275ab4(0x9e)],'as':_0x275ab4(0xad)}]});if(_0x5eb323){const _0x42eceb=await User_1['default'][_0x275ab4(0xae)]({'where':{'companyId':_0x4eb84a}});if(_0x42eceb>=_0x5eb323[_0x275ab4(0xad)][_0x275ab4(0xa4)])throw new AppError_1[(_0x275ab4(0x9e))](_0x275ab4(0xab)+_0x42eceb,0x190);}else throw new AppError_1[(_0x275ab4(0x9e))]('Company\x20not\x20found',0x194);}const _0x14c134=Yup['object']()['shape']({'name':Yup[_0x275ab4(0x8c)]()['required']()['min'](0x2),'email':Yup[_0x275ab4(0x8c)]()[_0x275ab4(0x96)]()[_0x275ab4(0x9f)]()[_0x275ab4(0xa9)](_0x275ab4(0xa5),_0x275ab4(0x89),async _0x6c4240=>{const _0x222191=_0x275ab4;if(!_0x6c4240)return![];const _0x18712c=await User_1[_0x222191(0x9e)][_0x222191(0xa7)]({'where':{'email':_0x6c4240}});return!_0x18712c;}),'password':Yup['string']()['required']()['min'](0x5),'super':Yup[_0x275ab4(0x8d)]()['required']()});try{await _0x14c134[_0x275ab4(0x94)]({'email':_0x9ec367,'password':_0x206016,'name':_0xab236,'super':_0x536662});}catch(_0x48b98d){throw new AppError_1[(_0x275ab4(0x9e))](_0x48b98d[_0x275ab4(0xb1)],0x190);}const _0x103933=await User_1[_0x275ab4(0x9e)][_0x275ab4(0x8e)]({'email':_0x9ec367,'password':_0x206016,'name':_0xab236,'companyId':_0x4eb84a,'profile':profile,'allTicket':_0x127dc8,'whatsappId':_0x34b4ea||null,'startWork':_0x128b90,'endWork':_0x4975ed,'spy':_0x877152,'isTricked':_0x864f81,'super':_0x536662,'defaultMenu':_0x21f6ae});queueIds['length']>0x0&&await _0x103933[_0x275ab4(0x91)]('queues',queueIds);await _0x103933['reload']();const _0x4cdc5f=await(0x0,SerializeUser_1[_0x275ab4(0x99)])(_0x103933);return _0x4cdc5f;};exports[a526_0x5505b1(0x9e)]=CreateUserService;