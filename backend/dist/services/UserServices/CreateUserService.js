const a536_0x517861=a536_0x3ec9;(function(_0x3bca84,_0x369a7d){const _0x142b23=a536_0x3ec9,_0x5a85c7=_0x3bca84();while(!![]){try{const _0x566987=-parseInt(_0x142b23(0x182))/0x1+-parseInt(_0x142b23(0x1a0))/0x2*(parseInt(_0x142b23(0x1a4))/0x3)+-parseInt(_0x142b23(0x1a3))/0x4*(parseInt(_0x142b23(0x18f))/0x5)+-parseInt(_0x142b23(0x19d))/0x6*(-parseInt(_0x142b23(0x184))/0x7)+parseInt(_0x142b23(0x1a6))/0x8*(parseInt(_0x142b23(0x1ab))/0x9)+-parseInt(_0x142b23(0x197))/0xa+parseInt(_0x142b23(0x19a))/0xb*(parseInt(_0x142b23(0x188))/0xc);if(_0x566987===_0x369a7d)break;else _0x5a85c7['push'](_0x5a85c7['shift']());}catch(_0x3ab687){_0x5a85c7['push'](_0x5a85c7['shift']());}}}(a536_0x4b6e,0xdfea3));const a536_0x45c4b9=(function(){let _0x17a674=!![];return function(_0x394baa,_0x81b5cd){const _0x78c807=_0x17a674?function(){const _0xb40f03=a536_0x3ec9;if(_0x81b5cd){const _0x3294cb=_0x81b5cd[_0xb40f03(0x193)](_0x394baa,arguments);return _0x81b5cd=null,_0x3294cb;}}:function(){};return _0x17a674=![],_0x78c807;};}()),a536_0x2ebafd=a536_0x45c4b9(this,function(){const _0x11ecfa=a536_0x3ec9;return a536_0x2ebafd[_0x11ecfa(0x196)]()['search']('(((.+)+)+)+$')['toString']()[_0x11ecfa(0x18b)](a536_0x2ebafd)[_0x11ecfa(0x18d)]('(((.+)+)+)+$');});a536_0x2ebafd();'use strict';var __createBinding=this&&this[a536_0x517861(0x185)]||(Object['create']?function(_0x44d038,_0xa431e4,_0x1dc7a1,_0x24a12e){const _0x16758a=a536_0x517861;if(_0x24a12e===undefined)_0x24a12e=_0x1dc7a1;var _0x4d6ffe=Object['getOwnPropertyDescriptor'](_0xa431e4,_0x1dc7a1);(!_0x4d6ffe||(_0x16758a(0x1a7)in _0x4d6ffe?!_0xa431e4[_0x16758a(0x1aa)]:_0x4d6ffe[_0x16758a(0x191)]||_0x4d6ffe[_0x16758a(0x19c)]))&&(_0x4d6ffe={'enumerable':!![],'get':function(){return _0xa431e4[_0x1dc7a1];}}),Object['defineProperty'](_0x44d038,_0x24a12e,_0x4d6ffe);}:function(_0x14a628,_0x538da3,_0x8495ff,_0x1ffd64){if(_0x1ffd64===undefined)_0x1ffd64=_0x8495ff;_0x14a628[_0x1ffd64]=_0x538da3[_0x8495ff];}),__setModuleDefault=this&&this[a536_0x517861(0x192)]||(Object[a536_0x517861(0x198)]?function(_0x235630,_0x4b51a9){Object['defineProperty'](_0x235630,'default',{'enumerable':!![],'value':_0x4b51a9});}:function(_0x1abf6b,_0xbfeabf){const _0x48a314=a536_0x517861;_0x1abf6b[_0x48a314(0x186)]=_0xbfeabf;}),__importStar=this&&this[a536_0x517861(0x199)]||function(_0x216836){const _0x5b6eb1=a536_0x517861;if(_0x216836&&_0x216836['__esModule'])return _0x216836;var _0xda9187={};if(_0x216836!=null){for(var _0x23ef1f in _0x216836)if(_0x23ef1f!==_0x5b6eb1(0x186)&&Object['prototype']['hasOwnProperty']['call'](_0x216836,_0x23ef1f))__createBinding(_0xda9187,_0x216836,_0x23ef1f);}return __setModuleDefault(_0xda9187,_0x216836),_0xda9187;},__importDefault=this&&this[a536_0x517861(0x18a)]||function(_0x4f95c6){const _0x5c4624=a536_0x517861;return _0x4f95c6&&_0x4f95c6[_0x5c4624(0x1aa)]?_0x4f95c6:{'default':_0x4f95c6};};Object[a536_0x517861(0x1a2)](exports,a536_0x517861(0x1aa),{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a536_0x517861(0x19e))),SerializeUser_1=require('../../helpers/SerializeUser'),User_1=__importDefault(require(a536_0x517861(0x183))),Plan_1=__importDefault(require(a536_0x517861(0x18e))),Company_1=__importDefault(require(a536_0x517861(0x18c))),CreateUserService=async({email:_0x231d78,password:_0x206421,name:_0x23a985,queueIds:queueIds=[],companyId:_0x1a2ae2,profile:profile='admin',allTicket:_0x4e9c03,spy:_0xbcfbe4,whatsappId:_0x322b47,startWork:_0x1a10cf,endWork:_0x2d5768,isTricked:_0x5a6659,super:_0x2ba57e,defaultMenu:_0x13f17a})=>{const _0x6576d1=a536_0x517861;if(_0x1a2ae2!==undefined){const _0x1c86fe=await Company_1['default'][_0x6576d1(0x1a8)]({'where':{'id':_0x1a2ae2},'include':[{'model':Plan_1[_0x6576d1(0x186)],'as':_0x6576d1(0x17f)}]});if(_0x1c86fe){const _0x35a54e=await User_1[_0x6576d1(0x186)][_0x6576d1(0x1a5)]({'where':{'companyId':_0x1a2ae2}});if(_0x35a54e>=_0x1c86fe[_0x6576d1(0x17f)]['users'])throw new AppError_1[(_0x6576d1(0x186))](_0x6576d1(0x190)+_0x35a54e,0x190);}else throw new AppError_1['default']('Company\x20not\x20found',0x194);}const _0x955cbc=Yup['object']()[_0x6576d1(0x189)]({'name':Yup['string']()['required']()[_0x6576d1(0x194)](0x2),'email':Yup['string']()['email']()[_0x6576d1(0x187)]()[_0x6576d1(0x195)]('Check-email',_0x6576d1(0x1a9),async _0x160f57=>{const _0x5698f7=_0x6576d1;if(!_0x160f57)return![];const _0x1747ec=await User_1[_0x5698f7(0x186)][_0x5698f7(0x1a8)]({'where':{'email':_0x160f57}});return!_0x1747ec;}),'password':Yup[_0x6576d1(0x1a1)]()[_0x6576d1(0x187)]()[_0x6576d1(0x194)](0x5),'super':Yup[_0x6576d1(0x181)]()[_0x6576d1(0x187)]()});try{await _0x955cbc['validate']({'email':_0x231d78,'password':_0x206421,'name':_0x23a985,'super':_0x2ba57e});}catch(_0x5f0493){throw new AppError_1[(_0x6576d1(0x186))](_0x5f0493[_0x6576d1(0x19b)],0x190);}const _0x5169cb=await User_1[_0x6576d1(0x186)][_0x6576d1(0x198)]({'email':_0x231d78,'password':_0x206421,'name':_0x23a985,'companyId':_0x1a2ae2,'profile':profile,'allTicket':_0x4e9c03,'whatsappId':_0x322b47||null,'startWork':_0x1a10cf,'endWork':_0x2d5768,'spy':_0xbcfbe4,'isTricked':_0x5a6659,'super':_0x2ba57e,'defaultMenu':_0x13f17a});queueIds['length']>0x0&&await _0x5169cb['$set'](_0x6576d1(0x180),queueIds);await _0x5169cb['reload']();const _0x1b40cd=await(0x0,SerializeUser_1[_0x6576d1(0x19f)])(_0x5169cb);return _0x1b40cd;};function a536_0x4b6e(){const _0x265612=['../../models/Company','search','../../models/Plan','76315DKSKqT','Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20','writable','__setModuleDefault','apply','min','test','toString','15340330VLOCSg','create','__importStar','422708yvHEXE','message','configurable','4482204kPpaGI','../../errors/AppError','SerializeUser','223324oduxYH','string','defineProperty','436qsEBrC','21pBazCX','count','71768rASnGb','get','findOne','An\x20user\x20with\x20this\x20email\x20already\x20exists.','__esModule','729hAqVka','plan','queues','boolean','957988hafOyt','../../models/User','7VCuAbn','__createBinding','default','required','1368zVtbto','shape','__importDefault','constructor'];a536_0x4b6e=function(){return _0x265612;};return a536_0x4b6e();}function a536_0x3ec9(_0xdaaa94,_0x5e21c7){const _0x4917fe=a536_0x4b6e();return a536_0x3ec9=function(_0x2ebafd,_0x45c4b9){_0x2ebafd=_0x2ebafd-0x17f;let _0x4b6e18=_0x4917fe[_0x2ebafd];return _0x4b6e18;},a536_0x3ec9(_0xdaaa94,_0x5e21c7);}exports['default']=CreateUserService;