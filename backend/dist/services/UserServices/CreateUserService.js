'use strict';const a674_0x2eb7b1=a674_0x3e97;function a674_0x395b(){const _0x4459de=['Check-email','724OzWKOu','3513324hGbCpA','SerializeUser','$set','open','users','validate','defineProperty','14yjVLMD','508544UUkwnw','enabled','../../models/User','message','Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20','shape','__createBinding','2045488nwJJUk','create','configurable','9615qBrpey','__importStar','object','string','__esModule','test','__setModuleDefault','752348lTpaGL','constructor','get','204417yfsDNF','company','search','plan','yup','../../models/Company','email','An\x20user\x20with\x20this\x20email\x20already\x20exists.','admin','prototype','queues','toString','getOwnPropertyNames','required','findOne','../../helpers/SerializeUser','131145UlCTDN','reload','hasOwnProperty','__importDefault','min','apply','default'];a674_0x395b=function(){return _0x4459de;};return a674_0x395b();}(function(_0x3b1edc,_0x46fd46){const _0x461522=a674_0x3e97,_0x147840=_0x3b1edc();while(!![]){try{const _0x19d78b=parseInt(_0x461522(0x1d2))/0x1+-parseInt(_0x461522(0x1c1))/0x2+-parseInt(_0x461522(0x1b0))/0x3+parseInt(_0x461522(0x1b8))/0x4*(parseInt(_0x461522(0x1cb))/0x5)+parseInt(_0x461522(0x1b9))/0x6+parseInt(_0x461522(0x1c0))/0x7*(-parseInt(_0x461522(0x1c8))/0x8)+parseInt(_0x461522(0x1d5))/0x9;if(_0x19d78b===_0x46fd46)break;else _0x147840['push'](_0x147840['shift']());}catch(_0xf32170){_0x147840['push'](_0x147840['shift']());}}}(a674_0x395b,0xdb8f7));var __createBinding=this&&this[a674_0x2eb7b1(0x1c7)]||(Object[a674_0x2eb7b1(0x1c9)]?function(_0x55b9e5,_0x258c79,_0x533d78,_0xe825c0){const _0x27f42e=a674_0x2eb7b1;if(_0xe825c0===undefined)_0xe825c0=_0x533d78;var _0x3d9c2d=Object['getOwnPropertyDescriptor'](_0x258c79,_0x533d78);(!_0x3d9c2d||(_0x27f42e(0x1d4)in _0x3d9c2d?!_0x258c79['__esModule']:_0x3d9c2d['writable']||_0x3d9c2d[_0x27f42e(0x1ca)]))&&(_0x3d9c2d={'enumerable':!![],'get':function(){return _0x258c79[_0x533d78];}}),Object[_0x27f42e(0x1bf)](_0x55b9e5,_0xe825c0,_0x3d9c2d);}:function(_0x3d7c7d,_0x594883,_0x1ab71b,_0x41da5c){if(_0x41da5c===undefined)_0x41da5c=_0x1ab71b;_0x3d7c7d[_0x41da5c]=_0x594883[_0x1ab71b];}),__setModuleDefault=this&&this[a674_0x2eb7b1(0x1d1)]||(Object[a674_0x2eb7b1(0x1c9)]?function(_0x4c2945,_0x243051){const _0x1b2199=a674_0x2eb7b1;Object['defineProperty'](_0x4c2945,_0x1b2199(0x1b6),{'enumerable':!![],'value':_0x243051});}:function(_0x3d9ab3,_0x34ee5d){const _0x3ec180=a674_0x2eb7b1;_0x3d9ab3[_0x3ec180(0x1b6)]=_0x34ee5d;}),__importStar=this&&this[a674_0x2eb7b1(0x1cc)]||(function(){const _0x4c2b46=(function(){let _0x2c574b=!![];return function(_0x353db5,_0x185303){const _0x6e556c=_0x2c574b?function(){const _0x26753d=a674_0x3e97;if(_0x185303){const _0x28d1d9=_0x185303[_0x26753d(0x1b5)](_0x353db5,arguments);return _0x185303=null,_0x28d1d9;}}:function(){};return _0x2c574b=![],_0x6e556c;};}()),_0x56f6f7=_0x4c2b46(this,function(){const _0x335ed0=a674_0x3e97;return _0x56f6f7['toString']()[_0x335ed0(0x1a2)]('(((.+)+)+)+$')[_0x335ed0(0x1ab)]()[_0x335ed0(0x1d3)](_0x56f6f7)[_0x335ed0(0x1a2)]('(((.+)+)+)+$');});_0x56f6f7();var _0x6a3361=function(_0x47f0c2){const _0xf62079=a674_0x3e97;return _0x6a3361=Object[_0xf62079(0x1ac)]||function(_0x261a96){const _0x4ac4b2=_0xf62079;var _0x3383f2=[];for(var _0x46436c in _0x261a96)if(Object[_0x4ac4b2(0x1a9)][_0x4ac4b2(0x1b2)]['call'](_0x261a96,_0x46436c))_0x3383f2[_0x3383f2['length']]=_0x46436c;return _0x3383f2;},_0x6a3361(_0x47f0c2);};return function(_0xc2621f){const _0x5f1418=a674_0x3e97;if(_0xc2621f&&_0xc2621f[_0x5f1418(0x1cf)])return _0xc2621f;var _0x489e66={};if(_0xc2621f!=null){for(var _0x193447=_0x6a3361(_0xc2621f),_0x4ecddd=0x0;_0x4ecddd<_0x193447['length'];_0x4ecddd++)if(_0x193447[_0x4ecddd]!==_0x5f1418(0x1b6))__createBinding(_0x489e66,_0xc2621f,_0x193447[_0x4ecddd]);}return __setModuleDefault(_0x489e66,_0xc2621f),_0x489e66;};}()),__importDefault=this&&this[a674_0x2eb7b1(0x1b3)]||function(_0x119bbf){return _0x119bbf&&_0x119bbf['__esModule']?_0x119bbf:{'default':_0x119bbf};};Object['defineProperty'](exports,a674_0x2eb7b1(0x1cf),{'value':!![]});const Yup=__importStar(require(a674_0x2eb7b1(0x1a4))),AppError_1=__importDefault(require('../../errors/AppError')),SerializeUser_1=require(a674_0x2eb7b1(0x1af)),User_1=__importDefault(require(a674_0x2eb7b1(0x1c3))),Plan_1=__importDefault(require('../../models/Plan')),Company_1=__importDefault(require(a674_0x2eb7b1(0x1a5))),CreateUserService=async({email:_0x1d81a4,password:_0x534885,name:_0x441274,queueIds:queueIds=[],companyId:_0x5c8daa,profile:profile=a674_0x2eb7b1(0x1a8),isTricked:isTricked=a674_0x2eb7b1(0x1c2),spy:spy='disabled',allTicket:allTicket='disabled',whatsappId:_0x4cfb22,startWork:_0x41f5ec,endWork:_0x4598e8,allowedWeekDays:_0x106300,defaultMenu:defaultMenu=a674_0x2eb7b1(0x1bc)})=>{const _0x10fa4a=a674_0x2eb7b1;if(_0x5c8daa!==undefined){const _0x3c99d4=await Company_1[_0x10fa4a(0x1b6)][_0x10fa4a(0x1ae)]({'where':{'id':_0x5c8daa},'include':[{'model':Plan_1[_0x10fa4a(0x1b6)],'as':_0x10fa4a(0x1a3)}]});if(_0x3c99d4!==null){const _0x12d513=await User_1[_0x10fa4a(0x1b6)]['count']({'where':{'companyId':_0x5c8daa}});if(_0x12d513>=_0x3c99d4[_0x10fa4a(0x1a3)][_0x10fa4a(0x1bd)])throw new AppError_1[(_0x10fa4a(0x1b6))](_0x10fa4a(0x1c5)+_0x12d513);}}const _0x4b37bb=Yup[_0x10fa4a(0x1cd)]()[_0x10fa4a(0x1c6)]({'name':Yup[_0x10fa4a(0x1ce)]()[_0x10fa4a(0x1ad)]()[_0x10fa4a(0x1b4)](0x2),'email':Yup[_0x10fa4a(0x1ce)]()[_0x10fa4a(0x1a6)]()['required']()[_0x10fa4a(0x1d0)](_0x10fa4a(0x1b7),_0x10fa4a(0x1a7),async _0x336567=>{if(!_0x336567)return![];const _0x2c9fb0=await User_1['default']['findOne']({'where':{'email':_0x336567}});return!_0x2c9fb0;}),'password':Yup[_0x10fa4a(0x1ce)]()[_0x10fa4a(0x1ad)]()[_0x10fa4a(0x1b4)](0x5)});try{await _0x4b37bb[_0x10fa4a(0x1be)]({'email':_0x1d81a4,'password':_0x534885,'name':_0x441274});}catch(_0x38e33){throw new AppError_1['default'](_0x38e33[_0x10fa4a(0x1c4)]);}const _0x597239=await User_1[_0x10fa4a(0x1b6)][_0x10fa4a(0x1c9)]({'email':_0x1d81a4,'password':_0x534885,'name':_0x441274,'companyId':_0x5c8daa,'profile':profile,'isTricked':isTricked,'spy':spy,'allTicket':allTicket,'whatsappId':_0x4cfb22,'startWork':_0x41f5ec,'endWork':_0x4598e8,'allowedWeekDays':_0x106300,'defaultMenu':defaultMenu},{'include':[_0x10fa4a(0x1aa),_0x10fa4a(0x1d6)]});await _0x597239[_0x10fa4a(0x1bb)](_0x10fa4a(0x1aa),queueIds),await _0x597239[_0x10fa4a(0x1b1)]();const _0x483243=(0x0,SerializeUser_1[_0x10fa4a(0x1ba)])(_0x597239);return _0x483243;};function a674_0x3e97(_0x40c704,_0x2a2280){const _0x254c2d=a674_0x395b();return a674_0x3e97=function(_0x54e647,_0x3a368a){_0x54e647=_0x54e647-0x1a2;let _0x395b69=_0x254c2d[_0x54e647];return _0x395b69;},a674_0x3e97(_0x40c704,_0x2a2280);}exports[a674_0x2eb7b1(0x1b6)]=CreateUserService;