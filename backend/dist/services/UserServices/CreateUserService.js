const a533_0x1e8bb7=a533_0x2fcf;(function(_0x141c69,_0x38b8d6){const _0x17ba98=a533_0x2fcf,_0x1394ca=_0x141c69();while(!![]){try{const _0x52266e=-parseInt(_0x17ba98(0x95))/0x1+-parseInt(_0x17ba98(0x84))/0x2+-parseInt(_0x17ba98(0x80))/0x3*(parseInt(_0x17ba98(0x8e))/0x4)+-parseInt(_0x17ba98(0x86))/0x5+parseInt(_0x17ba98(0x92))/0x6+parseInt(_0x17ba98(0x99))/0x7*(parseInt(_0x17ba98(0xa5))/0x8)+parseInt(_0x17ba98(0xa7))/0x9;if(_0x52266e===_0x38b8d6)break;else _0x1394ca['push'](_0x1394ca['shift']());}catch(_0x29a07c){_0x1394ca['push'](_0x1394ca['shift']());}}}(a533_0x4806,0x4e8fa));const a533_0x54a72f=(function(){let _0x21f6dd=!![];return function(_0x29354b,_0x13315c){const _0x5bfe6f=_0x21f6dd?function(){const _0xf0958f=a533_0x2fcf;if(_0x13315c){const _0x4392f9=_0x13315c[_0xf0958f(0x9f)](_0x29354b,arguments);return _0x13315c=null,_0x4392f9;}}:function(){};return _0x21f6dd=![],_0x5bfe6f;};}()),a533_0x4e1406=a533_0x54a72f(this,function(){const _0x48450b=a533_0x2fcf;return a533_0x4e1406[_0x48450b(0x9b)]()[_0x48450b(0x94)]('(((.+)+)+)+$')[_0x48450b(0x9b)]()[_0x48450b(0x98)](a533_0x4e1406)['search'](_0x48450b(0xa8));});a533_0x4e1406();function a533_0x4806(){const _0x1f4093=['641250WcgjlO','plan','1682945kjouJV','length','prototype','../../models/User','object','create','admin','findOne','52EUBNJQ','default','reload','email','1679976bfLwPP','required','search','165387fGIQWh','An\x20user\x20with\x20this\x20email\x20already\x20exists.','$set','constructor','194306mcGnBL','string','toString','test','writable','getOwnPropertyDescriptor','apply','../../errors/AppError','validate','../../models/Plan','Company\x20not\x20found','__esModule','136MMDGPC','configurable','7922034XhOTvA','(((.+)+)+)+$','min','call','message','Check-email','__setModuleDefault','defineProperty','__importStar','../../helpers/SerializeUser','../../models/Company','112551UMYVGp','users','shape','yup'];a533_0x4806=function(){return _0x1f4093;};return a533_0x4806();}'use strict';function a533_0x2fcf(_0xd7038a,_0x3b22ad){const _0x2d5a77=a533_0x4806();return a533_0x2fcf=function(_0x4e1406,_0x54a72f){_0x4e1406=_0x4e1406-0x7b;let _0x4806ea=_0x2d5a77[_0x4e1406];return _0x4806ea;},a533_0x2fcf(_0xd7038a,_0x3b22ad);}var __createBinding=this&&this['__createBinding']||(Object[a533_0x1e8bb7(0x8b)]?function(_0x430409,_0x235823,_0x5768f5,_0x571683){const _0x37979b=a533_0x1e8bb7;if(_0x571683===undefined)_0x571683=_0x5768f5;var _0x391f30=Object[_0x37979b(0x9e)](_0x235823,_0x5768f5);(!_0x391f30||('get'in _0x391f30?!_0x235823[_0x37979b(0xa4)]:_0x391f30[_0x37979b(0x9d)]||_0x391f30[_0x37979b(0xa6)]))&&(_0x391f30={'enumerable':!![],'get':function(){return _0x235823[_0x5768f5];}}),Object[_0x37979b(0x7c)](_0x430409,_0x571683,_0x391f30);}:function(_0x3b36a6,_0x587807,_0x5912e1,_0x254431){if(_0x254431===undefined)_0x254431=_0x5912e1;_0x3b36a6[_0x254431]=_0x587807[_0x5912e1];}),__setModuleDefault=this&&this[a533_0x1e8bb7(0x7b)]||(Object['create']?function(_0x4a1c76,_0xdf0e3){const _0xf6521f=a533_0x1e8bb7;Object[_0xf6521f(0x7c)](_0x4a1c76,_0xf6521f(0x8f),{'enumerable':!![],'value':_0xdf0e3});}:function(_0x5b7062,_0x248b17){const _0x479fc7=a533_0x1e8bb7;_0x5b7062[_0x479fc7(0x8f)]=_0x248b17;}),__importStar=this&&this[a533_0x1e8bb7(0x7d)]||function(_0x18fb0e){const _0x58885b=a533_0x1e8bb7;if(_0x18fb0e&&_0x18fb0e['__esModule'])return _0x18fb0e;var _0x318004={};if(_0x18fb0e!=null){for(var _0x223d66 in _0x18fb0e)if(_0x223d66!==_0x58885b(0x8f)&&Object[_0x58885b(0x88)]['hasOwnProperty'][_0x58885b(0xaa)](_0x18fb0e,_0x223d66))__createBinding(_0x318004,_0x18fb0e,_0x223d66);}return __setModuleDefault(_0x318004,_0x18fb0e),_0x318004;},__importDefault=this&&this['__importDefault']||function(_0x1a5039){const _0x197b9b=a533_0x1e8bb7;return _0x1a5039&&_0x1a5039[_0x197b9b(0xa4)]?_0x1a5039:{'default':_0x1a5039};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a533_0x1e8bb7(0x83))),AppError_1=__importDefault(require(a533_0x1e8bb7(0xa0))),SerializeUser_1=require(a533_0x1e8bb7(0x7e)),User_1=__importDefault(require(a533_0x1e8bb7(0x89))),Plan_1=__importDefault(require(a533_0x1e8bb7(0xa2))),Company_1=__importDefault(require(a533_0x1e8bb7(0x7f))),CreateUserService=async({email:_0x566ced,password:_0x455bd6,name:_0x164589,queueIds:queueIds=[],companyId:_0x4c9f22,profile:profile=a533_0x1e8bb7(0x8c),allTicket:_0x103d61,spy:_0x1032c7,whatsappId:_0x274651,startWork:_0x47eb57,endWork:_0x5d6690,isTricked:_0x35fbeb,super:_0x34e641,defaultMenu:_0x291a0c})=>{const _0x22e310=a533_0x1e8bb7;if(_0x4c9f22!==undefined){const _0x14dac8=await Company_1[_0x22e310(0x8f)][_0x22e310(0x8d)]({'where':{'id':_0x4c9f22},'include':[{'model':Plan_1[_0x22e310(0x8f)],'as':_0x22e310(0x85)}]});if(_0x14dac8){const _0x3fe98e=await User_1[_0x22e310(0x8f)]['count']({'where':{'companyId':_0x4c9f22}});if(_0x3fe98e>=_0x14dac8['plan'][_0x22e310(0x81)])throw new AppError_1[(_0x22e310(0x8f))]('Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20'+_0x3fe98e,0x190);}else throw new AppError_1[(_0x22e310(0x8f))](_0x22e310(0xa3),0x194);}const _0x267ef1=Yup[_0x22e310(0x8a)]()[_0x22e310(0x82)]({'name':Yup[_0x22e310(0x9a)]()[_0x22e310(0x93)]()[_0x22e310(0xa9)](0x2),'email':Yup[_0x22e310(0x9a)]()[_0x22e310(0x91)]()[_0x22e310(0x93)]()[_0x22e310(0x9c)](_0x22e310(0xac),_0x22e310(0x96),async _0x2b282a=>{const _0x3523d3=_0x22e310;if(!_0x2b282a)return![];const _0x228f55=await User_1[_0x3523d3(0x8f)][_0x3523d3(0x8d)]({'where':{'email':_0x2b282a}});return!_0x228f55;}),'password':Yup[_0x22e310(0x9a)]()['required']()[_0x22e310(0xa9)](0x5),'super':Yup['boolean']()['required']()});try{await _0x267ef1[_0x22e310(0xa1)]({'email':_0x566ced,'password':_0x455bd6,'name':_0x164589,'super':_0x34e641});}catch(_0x550a62){throw new AppError_1[(_0x22e310(0x8f))](_0x550a62[_0x22e310(0xab)],0x190);}const _0xb89b44=await User_1[_0x22e310(0x8f)][_0x22e310(0x8b)]({'email':_0x566ced,'password':_0x455bd6,'name':_0x164589,'companyId':_0x4c9f22,'profile':profile,'allTicket':_0x103d61,'whatsappId':_0x274651||null,'startWork':_0x47eb57,'endWork':_0x5d6690,'spy':_0x1032c7,'isTricked':_0x35fbeb,'super':_0x34e641,'defaultMenu':_0x291a0c});queueIds[_0x22e310(0x87)]>0x0&&await _0xb89b44[_0x22e310(0x97)]('queues',queueIds);await _0xb89b44[_0x22e310(0x90)]();const _0x435173=await(0x0,SerializeUser_1['SerializeUser'])(_0xb89b44);return _0x435173;};exports[a533_0x1e8bb7(0x8f)]=CreateUserService;