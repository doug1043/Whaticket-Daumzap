'use strict';const a563_0x40cdb7=a563_0x38e9;(function(_0x50bbce,_0x2a8be7){const _0x406e2f=a563_0x38e9,_0x166690=_0x50bbce();while(!![]){try{const _0xf5ffd4=-parseInt(_0x406e2f(0x14b))/0x1*(parseInt(_0x406e2f(0x143))/0x2)+parseInt(_0x406e2f(0x15c))/0x3+parseInt(_0x406e2f(0x15d))/0x4*(parseInt(_0x406e2f(0x14f))/0x5)+-parseInt(_0x406e2f(0x154))/0x6*(parseInt(_0x406e2f(0x153))/0x7)+-parseInt(_0x406e2f(0x13b))/0x8*(-parseInt(_0x406e2f(0x15e))/0x9)+-parseInt(_0x406e2f(0x164))/0xa*(parseInt(_0x406e2f(0x148))/0xb)+-parseInt(_0x406e2f(0x161))/0xc*(parseInt(_0x406e2f(0x156))/0xd);if(_0xf5ffd4===_0x2a8be7)break;else _0x166690['push'](_0x166690['shift']());}catch(_0x36481e){_0x166690['push'](_0x166690['shift']());}}}(a563_0x3ea1,0xf1a3f));function a563_0x38e9(_0x14cb4b,_0x20e822){const _0x33d3a4=a563_0x3ea1();return a563_0x38e9=function(_0xc86109,_0x4abac9){_0xc86109=_0xc86109-0x13a;let _0x3ea146=_0x33d3a4[_0xc86109];return _0x3ea146;},a563_0x38e9(_0x14cb4b,_0x20e822);}var __createBinding=this&&this[a563_0x40cdb7(0x16c)]||(Object['create']?function(_0x17111a,_0x59befa,_0x796fa6,_0x3ade06){const _0x396c77=a563_0x40cdb7;if(_0x3ade06===undefined)_0x3ade06=_0x796fa6;var _0x25163a=Object[_0x396c77(0x142)](_0x59befa,_0x796fa6);(!_0x25163a||(_0x396c77(0x14c)in _0x25163a?!_0x59befa[_0x396c77(0x166)]:_0x25163a[_0x396c77(0x155)]||_0x25163a[_0x396c77(0x16a)]))&&(_0x25163a={'enumerable':!![],'get':function(){return _0x59befa[_0x796fa6];}}),Object[_0x396c77(0x147)](_0x17111a,_0x3ade06,_0x25163a);}:function(_0x59158d,_0x192cf1,_0x543269,_0x2372fd){if(_0x2372fd===undefined)_0x2372fd=_0x543269;_0x59158d[_0x2372fd]=_0x192cf1[_0x543269];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0xe53d35,_0x22692f){const _0x1c32f5=a563_0x40cdb7;Object['defineProperty'](_0xe53d35,_0x1c32f5(0x13a),{'enumerable':!![],'value':_0x22692f});}:function(_0xf386ca,_0x23be0c){_0xf386ca['default']=_0x23be0c;}),__importStar=this&&this[a563_0x40cdb7(0x14e)]||(function(){const _0x23f4a3=(function(){let _0x75a85b=!![];return function(_0x845fae,_0x397c0b){const _0x164936=_0x75a85b?function(){const _0x437c66=a563_0x38e9;if(_0x397c0b){const _0x52a4b0=_0x397c0b[_0x437c66(0x140)](_0x845fae,arguments);return _0x397c0b=null,_0x52a4b0;}}:function(){};return _0x75a85b=![],_0x164936;};}()),_0x341cd9=_0x23f4a3(this,function(){const _0xdef4b=a563_0x38e9;return _0x341cd9[_0xdef4b(0x145)]()[_0xdef4b(0x15b)](_0xdef4b(0x157))[_0xdef4b(0x145)]()['constructor'](_0x341cd9)[_0xdef4b(0x15b)](_0xdef4b(0x157));});_0x341cd9();var _0x1ca1af=function(_0xe6b4ce){const _0x285705=a563_0x38e9;return _0x1ca1af=Object[_0x285705(0x15a)]||function(_0x45f564){const _0x2070fd=_0x285705;var _0x5ebf93=[];for(var _0x1fed13 in _0x45f564)if(Object[_0x2070fd(0x162)][_0x2070fd(0x14d)][_0x2070fd(0x160)](_0x45f564,_0x1fed13))_0x5ebf93[_0x5ebf93['length']]=_0x1fed13;return _0x5ebf93;},_0x1ca1af(_0xe6b4ce);};return function(_0x145cb2){const _0x2869e1=a563_0x38e9;if(_0x145cb2&&_0x145cb2[_0x2869e1(0x166)])return _0x145cb2;var _0x1061c9={};if(_0x145cb2!=null){for(var _0x3bc742=_0x1ca1af(_0x145cb2),_0x5c551e=0x0;_0x5c551e<_0x3bc742[_0x2869e1(0x159)];_0x5c551e++)if(_0x3bc742[_0x5c551e]!==_0x2869e1(0x13a))__createBinding(_0x1061c9,_0x145cb2,_0x3bc742[_0x5c551e]);}return __setModuleDefault(_0x1061c9,_0x145cb2),_0x1061c9;};}()),__importDefault=this&&this['__importDefault']||function(_0x147d44){const _0x1c3b9d=a563_0x40cdb7;return _0x147d44&&_0x147d44[_0x1c3b9d(0x166)]?_0x147d44:{'default':_0x147d44};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a563_0x40cdb7(0x16b))),AppError_1=__importDefault(require('../../errors/AppError')),SerializeUser_1=require('../../helpers/SerializeUser'),User_1=__importDefault(require(a563_0x40cdb7(0x13f))),Plan_1=__importDefault(require(a563_0x40cdb7(0x149))),Company_1=__importDefault(require('../../models/Company')),CreateUserService=async({email:_0x1562ec,password:_0x1bf0f9,name:_0x4b63e8,queueIds:queueIds=[],companyId:_0x25c90e,profile:profile='admin'})=>{const _0x1c7ebe=a563_0x40cdb7;if(_0x25c90e!==undefined){const _0x3ccd82=await Company_1[_0x1c7ebe(0x13a)][_0x1c7ebe(0x168)]({'where':{'id':_0x25c90e},'include':[{'model':Plan_1['default'],'as':_0x1c7ebe(0x158)}]});if(_0x3ccd82!==null){const _0x114297=await User_1[_0x1c7ebe(0x13a)][_0x1c7ebe(0x150)]({'where':{'companyId':_0x25c90e}});if(_0x114297>=_0x3ccd82[_0x1c7ebe(0x158)][_0x1c7ebe(0x13c)])throw new AppError_1[(_0x1c7ebe(0x13a))](_0x1c7ebe(0x141)+_0x114297);}}const _0x4e9b85=Yup['object']()['shape']({'name':Yup[_0x1c7ebe(0x144)]()[_0x1c7ebe(0x151)]()[_0x1c7ebe(0x165)](0x2),'email':Yup[_0x1c7ebe(0x144)]()['email']()[_0x1c7ebe(0x151)]()[_0x1c7ebe(0x15f)](_0x1c7ebe(0x169),_0x1c7ebe(0x146),async _0x2f5ba9=>{const _0x46b1ca=_0x1c7ebe;if(!_0x2f5ba9)return![];const _0x565878=await User_1[_0x46b1ca(0x13a)][_0x46b1ca(0x168)]({'where':{'email':_0x2f5ba9}});return!_0x565878;}),'password':Yup['string']()[_0x1c7ebe(0x151)]()[_0x1c7ebe(0x165)](0x5)});try{await _0x4e9b85[_0x1c7ebe(0x167)]({'email':_0x1562ec,'password':_0x1bf0f9,'name':_0x4b63e8});}catch(_0x335f7f){throw new AppError_1[(_0x1c7ebe(0x13a))](_0x335f7f[_0x1c7ebe(0x163)]);}const _0x5144f9=await User_1['default'][_0x1c7ebe(0x152)]({'email':_0x1562ec,'password':_0x1bf0f9,'name':_0x4b63e8,'companyId':_0x25c90e,'profile':profile},{'include':[_0x1c7ebe(0x14a),'company']});await _0x5144f9[_0x1c7ebe(0x13e)](_0x1c7ebe(0x14a),queueIds),await _0x5144f9['reload']();const _0x1a17db=(0x0,SerializeUser_1[_0x1c7ebe(0x13d)])(_0x5144f9);return _0x1a17db;};function a563_0x3ea1(){const _0x1d8776=['validate','findOne','Check-email','configurable','yup','__createBinding','default','2810296lmfNQE','users','SerializeUser','$set','../../models/User','apply','Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20','getOwnPropertyDescriptor','28QrxkDl','string','toString','An\x20user\x20with\x20this\x20email\x20already\x20exists.','defineProperty','2948JxEbJu','../../models/Plan','queues','5549EJxcTI','get','hasOwnProperty','__importStar','5XmRAET','count','required','create','21455jxxfcw','1524vAAISl','writable','65gGyDTW','(((.+)+)+)+$','plan','length','getOwnPropertyNames','search','1617402HpGcOg','5383516hXEkXT','18vPcrMl','test','call','291552GmjvcX','prototype','message','23140GbsTTK','min','__esModule'];a563_0x3ea1=function(){return _0x1d8776;};return a563_0x3ea1();}exports[a563_0x40cdb7(0x13a)]=CreateUserService;