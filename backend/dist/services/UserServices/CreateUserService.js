'use strict';const a676_0x221f77=a676_0x5c80;(function(_0x5816ba,_0x29077b){const _0x73d37=a676_0x5c80,_0x1addb1=_0x5816ba();while(!![]){try{const _0x126030=-parseInt(_0x73d37(0x1e2))/0x1*(-parseInt(_0x73d37(0x1ea))/0x2)+parseInt(_0x73d37(0x1d6))/0x3*(-parseInt(_0x73d37(0x1f9))/0x4)+-parseInt(_0x73d37(0x1de))/0x5*(parseInt(_0x73d37(0x1f3))/0x6)+-parseInt(_0x73d37(0x1ca))/0x7*(parseInt(_0x73d37(0x1e4))/0x8)+-parseInt(_0x73d37(0x1c9))/0x9+parseInt(_0x73d37(0x1e1))/0xa+parseInt(_0x73d37(0x1f7))/0xb*(parseInt(_0x73d37(0x1e0))/0xc);if(_0x126030===_0x29077b)break;else _0x1addb1['push'](_0x1addb1['shift']());}catch(_0xe9b513){_0x1addb1['push'](_0x1addb1['shift']());}}}(a676_0x1712,0xf23ee));function a676_0x5c80(_0x385cdc,_0x29be11){const _0x39802c=a676_0x1712();return a676_0x5c80=function(_0x29971c,_0x40ee9b){_0x29971c=_0x29971c-0x1c1;let _0x17126a=_0x39802c[_0x29971c];return _0x17126a;},a676_0x5c80(_0x385cdc,_0x29be11);}var __createBinding=this&&this[a676_0x221f77(0x1e3)]||(Object[a676_0x221f77(0x1e9)]?function(_0x3cc412,_0x33bfb4,_0x3630a5,_0x8b38e){const _0x4894be=a676_0x221f77;if(_0x8b38e===undefined)_0x8b38e=_0x3630a5;var _0x149f26=Object[_0x4894be(0x1ef)](_0x33bfb4,_0x3630a5);(!_0x149f26||(_0x4894be(0x1ee)in _0x149f26?!_0x33bfb4[_0x4894be(0x1f0)]:_0x149f26['writable']||_0x149f26['configurable']))&&(_0x149f26={'enumerable':!![],'get':function(){return _0x33bfb4[_0x3630a5];}}),Object[_0x4894be(0x1f4)](_0x3cc412,_0x8b38e,_0x149f26);}:function(_0x6e6507,_0x23e5f4,_0x490188,_0x973033){if(_0x973033===undefined)_0x973033=_0x490188;_0x6e6507[_0x973033]=_0x23e5f4[_0x490188];}),__setModuleDefault=this&&this[a676_0x221f77(0x1d2)]||(Object[a676_0x221f77(0x1e9)]?function(_0x493c09,_0x44e7d3){const _0x2fdedb=a676_0x221f77;Object[_0x2fdedb(0x1f4)](_0x493c09,_0x2fdedb(0x1ec),{'enumerable':!![],'value':_0x44e7d3});}:function(_0x561399,_0xbeba32){const _0x4df157=a676_0x221f77;_0x561399[_0x4df157(0x1ec)]=_0xbeba32;}),__importStar=this&&this[a676_0x221f77(0x1d8)]||(function(){const _0x1fa2b4=(function(){let _0x6cfb47=!![];return function(_0x541fc7,_0xcd64b3){const _0x4034a6=_0x6cfb47?function(){const _0x28402c=a676_0x5c80;if(_0xcd64b3){const _0x5694d9=_0xcd64b3[_0x28402c(0x1d3)](_0x541fc7,arguments);return _0xcd64b3=null,_0x5694d9;}}:function(){};return _0x6cfb47=![],_0x4034a6;};}()),_0x4a2283=_0x1fa2b4(this,function(){const _0x3eba05=a676_0x5c80;return _0x4a2283[_0x3eba05(0x1da)]()['search'](_0x3eba05(0x1d1))[_0x3eba05(0x1da)]()[_0x3eba05(0x1d5)](_0x4a2283)[_0x3eba05(0x1db)]('(((.+)+)+)+$');});_0x4a2283();var _0x5d7cab=function(_0x4711d4){const _0x25fa8d=a676_0x5c80;return _0x5d7cab=Object[_0x25fa8d(0x1df)]||function(_0x5c4726){const _0x5bffa9=_0x25fa8d;var _0x56dd36=[];for(var _0x3a1d64 in _0x5c4726)if(Object[_0x5bffa9(0x1c2)][_0x5bffa9(0x1ed)]['call'](_0x5c4726,_0x3a1d64))_0x56dd36[_0x56dd36['length']]=_0x3a1d64;return _0x56dd36;},_0x5d7cab(_0x4711d4);};return function(_0x283b96){const _0x56d5da=a676_0x5c80;if(_0x283b96&&_0x283b96[_0x56d5da(0x1f0)])return _0x283b96;var _0x2e1172={};if(_0x283b96!=null){for(var _0x3b719d=_0x5d7cab(_0x283b96),_0x514ec3=0x0;_0x514ec3<_0x3b719d[_0x56d5da(0x1f6)];_0x514ec3++)if(_0x3b719d[_0x514ec3]!==_0x56d5da(0x1ec))__createBinding(_0x2e1172,_0x283b96,_0x3b719d[_0x514ec3]);}return __setModuleDefault(_0x2e1172,_0x283b96),_0x2e1172;};}()),__importDefault=this&&this[a676_0x221f77(0x1d4)]||function(_0x30aaa7){const _0x142dc4=a676_0x221f77;return _0x30aaa7&&_0x30aaa7[_0x142dc4(0x1f0)]?_0x30aaa7:{'default':_0x30aaa7};};Object[a676_0x221f77(0x1f4)](exports,a676_0x221f77(0x1f0),{'value':!![]});const Yup=__importStar(require(a676_0x221f77(0x1f5))),AppError_1=__importDefault(require(a676_0x221f77(0x1eb))),SerializeUser_1=require(a676_0x221f77(0x1cb)),User_1=__importDefault(require(a676_0x221f77(0x1d9))),Plan_1=__importDefault(require(a676_0x221f77(0x1c6))),Company_1=__importDefault(require(a676_0x221f77(0x1cf))),CreateUserService=async({email:_0x467cda,password:_0x1274df,name:_0x255788,queueIds:queueIds=[],companyId:_0xf6b445,profile:profile=a676_0x221f77(0x1ce),isTricked:isTricked=a676_0x221f77(0x1cc),spy:spy=a676_0x221f77(0x1dd),allTicket:allTicket=a676_0x221f77(0x1dd),whatsappId:_0x1758eb,startWork:_0xd74723,endWork:_0x5e26dc,allowedWeekDays:_0x2774d9,defaultMenu:defaultMenu=a676_0x221f77(0x1cd)})=>{const _0x5db1eb=a676_0x221f77;if(_0xf6b445!==undefined){const _0x46c3ca=await Company_1[_0x5db1eb(0x1ec)][_0x5db1eb(0x1dc)]({'where':{'id':_0xf6b445},'include':[{'model':Plan_1['default'],'as':_0x5db1eb(0x1c5)}]});if(_0x46c3ca!==null){const _0x34a9df=await User_1[_0x5db1eb(0x1ec)][_0x5db1eb(0x1c3)]({'where':{'companyId':_0xf6b445}});if(_0x34a9df>=_0x46c3ca[_0x5db1eb(0x1c5)][_0x5db1eb(0x1f8)])throw new AppError_1[(_0x5db1eb(0x1ec))](_0x5db1eb(0x1c4)+_0x34a9df);}}const _0x2255cd=Yup['object']()['shape']({'name':Yup['string']()[_0x5db1eb(0x1f2)]()[_0x5db1eb(0x1e5)](0x2),'email':Yup['string']()['email']()[_0x5db1eb(0x1f2)]()['test'](_0x5db1eb(0x1c7),_0x5db1eb(0x1e7),async _0x4f0415=>{const _0xecd893=_0x5db1eb;if(!_0x4f0415)return![];const _0x6d0dd8=await User_1[_0xecd893(0x1ec)]['findOne']({'where':{'email':_0x4f0415}});return!_0x6d0dd8;}),'password':Yup[_0x5db1eb(0x1c1)]()[_0x5db1eb(0x1f2)]()[_0x5db1eb(0x1e5)](0x5)});try{await _0x2255cd[_0x5db1eb(0x1d7)]({'email':_0x467cda,'password':_0x1274df,'name':_0x255788});}catch(_0x46f75f){throw new AppError_1[(_0x5db1eb(0x1ec))](_0x46f75f[_0x5db1eb(0x1c8)]);}const _0x3922fc=await User_1[_0x5db1eb(0x1ec)][_0x5db1eb(0x1e9)]({'email':_0x467cda,'password':_0x1274df,'name':_0x255788,'companyId':_0xf6b445,'profile':profile,'isTricked':isTricked,'spy':spy,'allTicket':allTicket,'whatsappId':_0x1758eb,'startWork':_0xd74723,'endWork':_0x5e26dc,'allowedWeekDays':_0x2774d9,'defaultMenu':defaultMenu},{'include':['queues','company']});await _0x3922fc[_0x5db1eb(0x1f1)](_0x5db1eb(0x1e6),queueIds),await _0x3922fc[_0x5db1eb(0x1e8)]();const _0x2c0a68=(0x0,SerializeUser_1[_0x5db1eb(0x1d0)])(_0x3922fc);return _0x2c0a68;};function a676_0x1712(){const _0x2c48b5=['SerializeUser','(((.+)+)+)+$','__setModuleDefault','apply','__importDefault','constructor','2013WbDTcn','validate','__importStar','../../models/User','toString','search','findOne','disabled','7296840aHNcml','getOwnPropertyNames','1029228jMvYxg','11169700BWjCOE','1083947iCtsKk','__createBinding','536rMSdnc','min','queues','An\x20user\x20with\x20this\x20email\x20already\x20exists.','reload','create','2rbGKvz','../../errors/AppError','default','hasOwnProperty','get','getOwnPropertyDescriptor','__esModule','$set','required','6guSGMw','defineProperty','yup','length','572yrXZjO','users','4704PlVoBv','string','prototype','count','Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20','plan','../../models/Plan','Check-email','message','14459220OkItBQ','189483mcGPLy','../../helpers/SerializeUser','enabled','open','admin','../../models/Company'];a676_0x1712=function(){return _0x2c48b5;};return a676_0x1712();}exports[a676_0x221f77(0x1ec)]=CreateUserService;