const a534_0x85322c=a534_0x50dc;function a534_0x4819(){const _0x39925=['An\x20user\x20with\x20this\x20email\x20already\x20exists.','Company\x20not\x20found','test','53589778yJQLmO','get','length','validate','count','Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20','7272224ZdByLs','71976FUXcNs','search','17340fYfvLN','yup','findOne','email','boolean','../../models/Plan','$set','default','configurable','24bPdpqF','9oRXXfr','122041sfSoPH','shape','12344290vbherf','getOwnPropertyDescriptor','__importDefault','string','defineProperty','(((.+)+)+)+$','156PLeVcN','reload','plan','min','../../models/Company','../../models/User','__esModule','constructor','hasOwnProperty','object','__importStar','users','required','__createBinding','1236858JaafzC','message','create','toString','14IKwXsi','apply'];a534_0x4819=function(){return _0x39925;};return a534_0x4819();}(function(_0x13b274,_0x1a4d4f){const _0x4d804f=a534_0x50dc,_0x1d018e=_0x13b274();while(!![]){try{const _0x4fcee9=parseInt(_0x4d804f(0x177))/0x1*(-parseInt(_0x4d804f(0x175))/0x2)+-parseInt(_0x4d804f(0x17f))/0x3*(parseInt(_0x4d804f(0x16a))/0x4)+parseInt(_0x4d804f(0x16c))/0x5+-parseInt(_0x4d804f(0x18d))/0x6*(-parseInt(_0x4d804f(0x15e))/0x7)+parseInt(_0x4d804f(0x169))/0x8*(-parseInt(_0x4d804f(0x176))/0x9)+-parseInt(_0x4d804f(0x179))/0xa+parseInt(_0x4d804f(0x163))/0xb;if(_0x4fcee9===_0x1a4d4f)break;else _0x1d018e['push'](_0x1d018e['shift']());}catch(_0x4531cc){_0x1d018e['push'](_0x1d018e['shift']());}}}(a534_0x4819,0xb59eb));const a534_0x4fc7c4=(function(){let _0x127ef5=!![];return function(_0x373021,_0x4557d8){const _0x350c10=_0x127ef5?function(){const _0x560141=a534_0x50dc;if(_0x4557d8){const _0x3243ae=_0x4557d8[_0x560141(0x15f)](_0x373021,arguments);return _0x4557d8=null,_0x3243ae;}}:function(){};return _0x127ef5=![],_0x350c10;};}()),a534_0x572f83=a534_0x4fc7c4(this,function(){const _0x5448c3=a534_0x50dc;return a534_0x572f83['toString']()[_0x5448c3(0x16b)]('(((.+)+)+)+$')[_0x5448c3(0x15d)]()[_0x5448c3(0x186)](a534_0x572f83)[_0x5448c3(0x16b)](_0x5448c3(0x17e));});a534_0x572f83();function a534_0x50dc(_0x46b26a,_0x2bdcb7){const _0xa15e53=a534_0x4819();return a534_0x50dc=function(_0x572f83,_0x4fc7c4){_0x572f83=_0x572f83-0x15d;let _0x4819e3=_0xa15e53[_0x572f83];return _0x4819e3;},a534_0x50dc(_0x46b26a,_0x2bdcb7);}'use strict';var __createBinding=this&&this[a534_0x85322c(0x18c)]||(Object[a534_0x85322c(0x18f)]?function(_0x29bb4c,_0x3aa8cd,_0x4d9e50,_0x36ed29){const _0x63e9a4=a534_0x85322c;if(_0x36ed29===undefined)_0x36ed29=_0x4d9e50;var _0x4465c7=Object[_0x63e9a4(0x17a)](_0x3aa8cd,_0x4d9e50);(!_0x4465c7||(_0x63e9a4(0x164)in _0x4465c7?!_0x3aa8cd[_0x63e9a4(0x185)]:_0x4465c7['writable']||_0x4465c7[_0x63e9a4(0x174)]))&&(_0x4465c7={'enumerable':!![],'get':function(){return _0x3aa8cd[_0x4d9e50];}}),Object[_0x63e9a4(0x17d)](_0x29bb4c,_0x36ed29,_0x4465c7);}:function(_0x5274e5,_0x3a4355,_0x1cb171,_0x4604c4){if(_0x4604c4===undefined)_0x4604c4=_0x1cb171;_0x5274e5[_0x4604c4]=_0x3a4355[_0x1cb171];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a534_0x85322c(0x18f)]?function(_0x25a3ff,_0x54b7ca){const _0xb6fefe=a534_0x85322c;Object[_0xb6fefe(0x17d)](_0x25a3ff,_0xb6fefe(0x173),{'enumerable':!![],'value':_0x54b7ca});}:function(_0xe8d508,_0xdc014f){const _0x332f59=a534_0x85322c;_0xe8d508[_0x332f59(0x173)]=_0xdc014f;}),__importStar=this&&this[a534_0x85322c(0x189)]||function(_0x2e2fad){const _0x230799=a534_0x85322c;if(_0x2e2fad&&_0x2e2fad[_0x230799(0x185)])return _0x2e2fad;var _0x22fc98={};if(_0x2e2fad!=null){for(var _0x1d0881 in _0x2e2fad)if(_0x1d0881!==_0x230799(0x173)&&Object['prototype'][_0x230799(0x187)]['call'](_0x2e2fad,_0x1d0881))__createBinding(_0x22fc98,_0x2e2fad,_0x1d0881);}return __setModuleDefault(_0x22fc98,_0x2e2fad),_0x22fc98;},__importDefault=this&&this[a534_0x85322c(0x17b)]||function(_0x114c29){const _0x1c7e52=a534_0x85322c;return _0x114c29&&_0x114c29[_0x1c7e52(0x185)]?_0x114c29:{'default':_0x114c29};};Object[a534_0x85322c(0x17d)](exports,a534_0x85322c(0x185),{'value':!![]});const Yup=__importStar(require(a534_0x85322c(0x16d))),AppError_1=__importDefault(require('../../errors/AppError')),SerializeUser_1=require('../../helpers/SerializeUser'),User_1=__importDefault(require(a534_0x85322c(0x184))),Plan_1=__importDefault(require(a534_0x85322c(0x171))),Company_1=__importDefault(require(a534_0x85322c(0x183))),CreateUserService=async({email:_0xcfaa7a,password:_0x2fe80c,name:_0x2c95de,queueIds:queueIds=[],companyId:_0x1e5956,profile:profile='admin',allTicket:_0x510686,spy:_0x165cec,whatsappId:_0x2830d2,startWork:_0x2ab31c,endWork:_0x4883d6,isTricked:_0x2389c1,super:_0xde545f,defaultMenu:_0x5dc8e3})=>{const _0x4d71c3=a534_0x85322c;if(_0x1e5956!==undefined){const _0x30eed8=await Company_1[_0x4d71c3(0x173)]['findOne']({'where':{'id':_0x1e5956},'include':[{'model':Plan_1[_0x4d71c3(0x173)],'as':_0x4d71c3(0x181)}]});if(_0x30eed8){const _0x3fd6c1=await User_1[_0x4d71c3(0x173)][_0x4d71c3(0x167)]({'where':{'companyId':_0x1e5956}});if(_0x3fd6c1>=_0x30eed8[_0x4d71c3(0x181)][_0x4d71c3(0x18a)])throw new AppError_1[(_0x4d71c3(0x173))](_0x4d71c3(0x168)+_0x3fd6c1,0x190);}else throw new AppError_1['default'](_0x4d71c3(0x161),0x194);}const _0x4be33b=Yup[_0x4d71c3(0x188)]()[_0x4d71c3(0x178)]({'name':Yup[_0x4d71c3(0x17c)]()[_0x4d71c3(0x18b)]()[_0x4d71c3(0x182)](0x2),'email':Yup[_0x4d71c3(0x17c)]()[_0x4d71c3(0x16f)]()[_0x4d71c3(0x18b)]()[_0x4d71c3(0x162)]('Check-email',_0x4d71c3(0x160),async _0x2f3a34=>{const _0x33bacb=_0x4d71c3;if(!_0x2f3a34)return![];const _0x28aabf=await User_1['default'][_0x33bacb(0x16e)]({'where':{'email':_0x2f3a34}});return!_0x28aabf;}),'password':Yup['string']()['required']()['min'](0x5),'super':Yup[_0x4d71c3(0x170)]()[_0x4d71c3(0x18b)]()});try{await _0x4be33b[_0x4d71c3(0x166)]({'email':_0xcfaa7a,'password':_0x2fe80c,'name':_0x2c95de,'super':_0xde545f});}catch(_0x54a9bd){throw new AppError_1['default'](_0x54a9bd[_0x4d71c3(0x18e)],0x190);}const _0x1fdd4f=await User_1[_0x4d71c3(0x173)][_0x4d71c3(0x18f)]({'email':_0xcfaa7a,'password':_0x2fe80c,'name':_0x2c95de,'companyId':_0x1e5956,'profile':profile,'allTicket':_0x510686,'whatsappId':_0x2830d2||null,'startWork':_0x2ab31c,'endWork':_0x4883d6,'spy':_0x165cec,'isTricked':_0x2389c1,'super':_0xde545f,'defaultMenu':_0x5dc8e3});queueIds[_0x4d71c3(0x165)]>0x0&&await _0x1fdd4f[_0x4d71c3(0x172)]('queues',queueIds);await _0x1fdd4f[_0x4d71c3(0x180)]();const _0x222a04=await(0x0,SerializeUser_1['SerializeUser'])(_0x1fdd4f);return _0x222a04;};exports[a534_0x85322c(0x173)]=CreateUserService;