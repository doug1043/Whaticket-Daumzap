const a675_0x3bbd76=a675_0xd983;function a675_0x2241(){const _0x56f21f=['admin','../../models/User','findOne','SerializeUser','default','email','company','status','991794MxnxSC','startWork','Sequelize','getHours','checkPassword','../../helpers/SerializeUser','toString','whatsappId','col','-user','includes','padStart','24775NTECPi','ERR_DAY_NOT_ALLOWED','ERR_INVALID_CREDENTIALS','../../libs/socket','../../helpers/CreateTokens','(((.+)+)+)+$','apply','../../errors/AppError','ERR_COMPANY_BLOCKED','allTicket','createRefreshToken','where','isTricked','__esModule','../../models/Company','514415pHGuNV','constructor','202959ZtnSOe','1168272oIWlLV','profile','5468409KUgwHw','getIO','emit','update','companyId','24ZdYRjj','10VPycak','endWork','search','59728TdzDyr','getMinutes','ERR_OUT_OF_WORK_HOURS','defaultMenu','4KtqsaQ'];a675_0x2241=function(){return _0x56f21f;};return a675_0x2241();}(function(_0x464be2,_0x234560){const _0x5bb0a8=a675_0xd983,_0x34e4aa=_0x464be2();while(!![]){try{const _0x278bbc=-parseInt(_0x5bb0a8(0x15e))/0x1*(-parseInt(_0x5bb0a8(0x177))/0x2)+parseInt(_0x5bb0a8(0x16f))/0x3+-parseInt(_0x5bb0a8(0x17f))/0x4*(-parseInt(_0x5bb0a8(0x16d))/0x5)+parseInt(_0x5bb0a8(0x188))/0x6+parseInt(_0x5bb0a8(0x170))/0x7+-parseInt(_0x5bb0a8(0x17b))/0x8+parseInt(_0x5bb0a8(0x172))/0x9*(-parseInt(_0x5bb0a8(0x178))/0xa);if(_0x278bbc===_0x234560)break;else _0x34e4aa['push'](_0x34e4aa['shift']());}catch(_0x373d87){_0x34e4aa['push'](_0x34e4aa['shift']());}}}(a675_0x2241,0x2d284));const a675_0xbfb84e=(function(){let _0x381130=!![];return function(_0x5478dd,_0x567b89){const _0x3d8ac4=_0x381130?function(){const _0xa32838=a675_0xd983;if(_0x567b89){const _0x17a504=_0x567b89[_0xa32838(0x164)](_0x5478dd,arguments);return _0x567b89=null,_0x17a504;}}:function(){};return _0x381130=![],_0x3d8ac4;};}()),a675_0x53fe25=a675_0xbfb84e(this,function(){const _0x51725f=a675_0xd983;return a675_0x53fe25[_0x51725f(0x158)]()['search'](_0x51725f(0x163))[_0x51725f(0x158)]()[_0x51725f(0x16e)](a675_0x53fe25)[_0x51725f(0x17a)](_0x51725f(0x163));});function a675_0xd983(_0x4f6a65,_0x54d8ce){const _0x249aff=a675_0x2241();return a675_0xd983=function(_0x53fe25,_0xbfb84e){_0x53fe25=_0x53fe25-0x157;let _0x2241f6=_0x249aff[_0x53fe25];return _0x2241f6;},a675_0xd983(_0x4f6a65,_0x54d8ce);}a675_0x53fe25();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x467d47){return _0x467d47&&_0x467d47['__esModule']?_0x467d47:{'default':_0x467d47};};Object['defineProperty'](exports,a675_0x3bbd76(0x16b),{'value':!![]});const sequelize_1=require('sequelize'),User_1=__importDefault(require(a675_0x3bbd76(0x181))),AppError_1=__importDefault(require(a675_0x3bbd76(0x165))),CreateTokens_1=require(a675_0x3bbd76(0x162)),SerializeUser_1=require(a675_0x3bbd76(0x157)),Company_1=__importDefault(require(a675_0x3bbd76(0x16c))),Setting_1=__importDefault(require('../../models/Setting')),socket_1=require(a675_0x3bbd76(0x161)),AuthUserService=async({email:_0x40c2be,password:_0x133c46})=>{const _0x215b31=a675_0x3bbd76,_0x44e933=await User_1[_0x215b31(0x184)][_0x215b31(0x182)]({'where':sequelize_1[_0x215b31(0x18a)][_0x215b31(0x169)](sequelize_1['Sequelize']['fn']('LOWER',sequelize_1['Sequelize'][_0x215b31(0x15a)]('email')),_0x40c2be['toLowerCase']()),'include':['queues',{'model':Company_1[_0x215b31(0x184)],'include':[{'model':Setting_1[_0x215b31(0x184)]}]}]});if(!_0x44e933)throw new AppError_1['default'](_0x215b31(0x160),0x191);if(!await _0x44e933[_0x215b31(0x18c)](_0x133c46))throw new AppError_1[(_0x215b31(0x184))]('ERR_INVALID_CREDENTIALS',0x191);if(_0x44e933['company']&&_0x44e933[_0x215b31(0x186)][_0x215b31(0x187)]===![])throw new AppError_1[(_0x215b31(0x184))](_0x215b31(0x166),0x191);if(_0x44e933[_0x215b31(0x171)]!==_0x215b31(0x180)&&_0x44e933['allowedWeekDays']){const _0x11ecee=new Date(),_0xfef507=String(_0x11ecee['getDay']()),_0x1fd54c=_0x44e933['allowedWeekDays']['split'](',');if(!_0x1fd54c[_0x215b31(0x15c)](_0xfef507))throw new AppError_1[(_0x215b31(0x184))](_0x215b31(0x15f),0x191);}if(_0x44e933[_0x215b31(0x171)]!==_0x215b31(0x180)&&_0x44e933[_0x215b31(0x189)]&&_0x44e933[_0x215b31(0x179)]){const _0x101c09=new Date(),_0x5565bc=String(_0x101c09[_0x215b31(0x18b)]())[_0x215b31(0x15d)](0x2,'0')+':'+String(_0x101c09[_0x215b31(0x17c)]())['padStart'](0x2,'0');if(_0x5565bc<_0x44e933[_0x215b31(0x189)]||_0x5565bc>_0x44e933[_0x215b31(0x179)])throw new AppError_1['default'](_0x215b31(0x17d),0x191);}await _0x44e933[_0x215b31(0x175)]({'online':!![]});const _0x18f88b=(0x0,socket_1[_0x215b31(0x173)])();_0x18f88b[_0x215b31(0x174)]('company-'+_0x44e933[_0x215b31(0x176)]+_0x215b31(0x15b),{'action':_0x215b31(0x175),'user':{'id':_0x44e933['id'],'name':_0x44e933['name'],'email':_0x44e933[_0x215b31(0x185)],'profile':_0x44e933['profile'],'online':!![],'isTricked':_0x44e933[_0x215b31(0x16a)],'spy':_0x44e933['spy'],'allTicket':_0x44e933[_0x215b31(0x167)],'whatsappId':_0x44e933[_0x215b31(0x159)],'startWork':_0x44e933[_0x215b31(0x189)],'endWork':_0x44e933[_0x215b31(0x179)],'defaultMenu':_0x44e933[_0x215b31(0x17e)]}});const _0x2ed967=(0x0,CreateTokens_1['createAccessToken'])(_0x44e933),_0x32ee3c=(0x0,CreateTokens_1[_0x215b31(0x168)])(_0x44e933),_0x3a7a4e=await(0x0,SerializeUser_1[_0x215b31(0x183)])(_0x44e933);return{'serializedUser':_0x3a7a4e,'token':_0x2ed967,'refreshToken':_0x32ee3c};};exports['default']=AuthUserService;