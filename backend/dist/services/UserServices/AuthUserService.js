const a673_0x3cc59a=a673_0x27f9;(function(_0x5492c7,_0x41717f){const _0x6413ac=a673_0x27f9,_0x8abdfe=_0x5492c7();while(!![]){try{const _0x2325d6=-parseInt(_0x6413ac(0x1bb))/0x1*(parseInt(_0x6413ac(0x1ae))/0x2)+parseInt(_0x6413ac(0x1c2))/0x3+-parseInt(_0x6413ac(0x1bf))/0x4*(parseInt(_0x6413ac(0x1a9))/0x5)+parseInt(_0x6413ac(0x1d6))/0x6+parseInt(_0x6413ac(0x1c0))/0x7+-parseInt(_0x6413ac(0x1cc))/0x8+parseInt(_0x6413ac(0x1dc))/0x9;if(_0x2325d6===_0x41717f)break;else _0x8abdfe['push'](_0x8abdfe['shift']());}catch(_0x397158){_0x8abdfe['push'](_0x8abdfe['shift']());}}}(a673_0x1dbf,0xad2cc));const a673_0x2a7165=(function(){let _0x96827c=!![];return function(_0x5e7b8a,_0x3ae2bb){const _0x11ca37=_0x96827c?function(){const _0x2a4cff=a673_0x27f9;if(_0x3ae2bb){const _0x208fe3=_0x3ae2bb[_0x2a4cff(0x1c5)](_0x5e7b8a,arguments);return _0x3ae2bb=null,_0x208fe3;}}:function(){};return _0x96827c=![],_0x11ca37;};}()),a673_0x4859bc=a673_0x2a7165(this,function(){const _0x239ad4=a673_0x27f9;return a673_0x4859bc[_0x239ad4(0x1be)]()[_0x239ad4(0x1bd)](_0x239ad4(0x1c9))['toString']()[_0x239ad4(0x1d3)](a673_0x4859bc)['search'](_0x239ad4(0x1c9));});a673_0x4859bc();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1fd09d){return _0x1fd09d&&_0x1fd09d['__esModule']?_0x1fd09d:{'default':_0x1fd09d};};function a673_0x27f9(_0x2d04fe,_0x16a73c){const _0x514afb=a673_0x1dbf();return a673_0x27f9=function(_0x4859bc,_0x2a7165){_0x4859bc=_0x4859bc-0x1a4;let _0x1dbf99=_0x514afb[_0x4859bc];return _0x1dbf99;},a673_0x27f9(_0x2d04fe,_0x16a73c);}Object[a673_0x3cc59a(0x1b2)](exports,a673_0x3cc59a(0x1ac),{'value':!![]});const sequelize_1=require(a673_0x3cc59a(0x1b0)),User_1=__importDefault(require(a673_0x3cc59a(0x1ad))),AppError_1=__importDefault(require(a673_0x3cc59a(0x1ab))),CreateTokens_1=require(a673_0x3cc59a(0x1d9)),SerializeUser_1=require('../../helpers/SerializeUser'),Company_1=__importDefault(require(a673_0x3cc59a(0x1c8))),Setting_1=__importDefault(require(a673_0x3cc59a(0x1da))),socket_1=require(a673_0x3cc59a(0x1cd)),AuthUserService=async({email:_0x483a76,password:_0x430d05})=>{const _0x441e9f=a673_0x3cc59a,_0x29e37c=await User_1[_0x441e9f(0x1b4)]['findOne']({'where':sequelize_1[_0x441e9f(0x1d7)][_0x441e9f(0x1c1)](sequelize_1['Sequelize']['fn'](_0x441e9f(0x1af),sequelize_1[_0x441e9f(0x1d7)][_0x441e9f(0x1d5)](_0x441e9f(0x1dd))),_0x483a76[_0x441e9f(0x1aa)]()),'include':['queues',{'model':Company_1[_0x441e9f(0x1b4)],'include':[{'model':Setting_1['default']}]}]});if(!_0x29e37c)throw new AppError_1[(_0x441e9f(0x1b4))](_0x441e9f(0x1c4),0x191);if(!await _0x29e37c['checkPassword'](_0x430d05))throw new AppError_1[(_0x441e9f(0x1b4))](_0x441e9f(0x1c4),0x191);if(_0x29e37c['company']&&_0x29e37c[_0x441e9f(0x1b8)][_0x441e9f(0x1d8)]===![])throw new AppError_1[(_0x441e9f(0x1b4))](_0x441e9f(0x1ba),0x191);if(_0x29e37c[_0x441e9f(0x1d4)]!=='admin'&&_0x29e37c[_0x441e9f(0x1a8)]){const _0x1dc7aa=new Date(),_0x2cce9a=String(_0x1dc7aa['getDay']()),_0x144be1=_0x29e37c[_0x441e9f(0x1a8)][_0x441e9f(0x1c7)](',');if(!_0x144be1[_0x441e9f(0x1db)](_0x2cce9a))throw new AppError_1['default'](_0x441e9f(0x1b1),0x191);}if(_0x29e37c[_0x441e9f(0x1d4)]!==_0x441e9f(0x1a5)&&_0x29e37c[_0x441e9f(0x1a6)]&&_0x29e37c['endWork']){const _0x22e0ca=new Date(),_0x5b5198=String(_0x22e0ca[_0x441e9f(0x1a4)]())[_0x441e9f(0x1ca)](0x2,'0')+':'+String(_0x22e0ca[_0x441e9f(0x1ce)]())[_0x441e9f(0x1ca)](0x2,'0');if(_0x5b5198<_0x29e37c[_0x441e9f(0x1a6)]||_0x5b5198>_0x29e37c[_0x441e9f(0x1bc)])throw new AppError_1[(_0x441e9f(0x1b4))](_0x441e9f(0x1c6),0x191);}await _0x29e37c['update']({'online':!![]});const _0x22f010=(0x0,socket_1[_0x441e9f(0x1d1)])();_0x22f010[_0x441e9f(0x1b7)](_0x441e9f(0x1c3)+_0x29e37c[_0x441e9f(0x1d2)]+_0x441e9f(0x1d0),{'action':'update','user':{'id':_0x29e37c['id'],'name':_0x29e37c[_0x441e9f(0x1b9)],'email':_0x29e37c[_0x441e9f(0x1dd)],'profile':_0x29e37c[_0x441e9f(0x1d4)],'online':!![],'isTricked':_0x29e37c['isTricked'],'spy':_0x29e37c[_0x441e9f(0x1b5)],'allTicket':_0x29e37c['allTicket'],'whatsappId':_0x29e37c[_0x441e9f(0x1cf)],'startWork':_0x29e37c[_0x441e9f(0x1a6)],'endWork':_0x29e37c[_0x441e9f(0x1bc)],'defaultMenu':_0x29e37c[_0x441e9f(0x1cb)]}});const _0x4177a2=(0x0,CreateTokens_1[_0x441e9f(0x1b3)])(_0x29e37c),_0x4cfb28=(0x0,CreateTokens_1[_0x441e9f(0x1b6)])(_0x29e37c),_0x396436=await(0x0,SerializeUser_1[_0x441e9f(0x1a7)])(_0x29e37c);return{'serializedUser':_0x396436,'token':_0x4177a2,'refreshToken':_0x4cfb28};};function a673_0x1dbf(){const _0x47e86b=['(((.+)+)+)+$','padStart','defaultMenu','4134792bcCgCf','../../libs/socket','getMinutes','whatsappId','-user','getIO','companyId','constructor','profile','col','2092242ENOssu','Sequelize','status','../../helpers/CreateTokens','../../models/Setting','includes','5911083ihZbpY','email','getHours','admin','startWork','SerializeUser','allowedWeekDays','115dzGFHC','toLowerCase','../../errors/AppError','__esModule','../../models/User','204808WTwoUK','LOWER','sequelize','ERR_DAY_NOT_ALLOWED','defineProperty','createAccessToken','default','spy','createRefreshToken','emit','company','name','ERR_COMPANY_BLOCKED','8TAHilH','endWork','search','toString','136868WmirlS','9347730uCuREv','where','1474536kcfoqT','company-','ERR_INVALID_CREDENTIALS','apply','ERR_OUT_OF_WORK_HOURS','split','../../models/Company'];a673_0x1dbf=function(){return _0x47e86b;};return a673_0x1dbf();}exports[a673_0x3cc59a(0x1b4)]=AuthUserService;