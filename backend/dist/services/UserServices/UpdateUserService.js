'use strict';const a568_0x220595=a568_0x7bf4;function a568_0x7bf4(_0x419c06,_0x4a504d){const _0x4284bf=a568_0xe658();return a568_0x7bf4=function(_0x1fc94e,_0x4356bc){_0x1fc94e=_0x1fc94e-0x171;let _0xe658f4=_0x4284bf[_0x1fc94e];return _0xe658f4;},a568_0x7bf4(_0x419c06,_0x4a504d);}(function(_0x14e362,_0x5d15a2){const _0x2fd993=a568_0x7bf4,_0x455b87=_0x14e362();while(!![]){try{const _0x4b4203=parseInt(_0x2fd993(0x18c))/0x1*(parseInt(_0x2fd993(0x171))/0x2)+parseInt(_0x2fd993(0x184))/0x3*(parseInt(_0x2fd993(0x19c))/0x4)+parseInt(_0x2fd993(0x196))/0x5*(parseInt(_0x2fd993(0x186))/0x6)+-parseInt(_0x2fd993(0x174))/0x7+parseInt(_0x2fd993(0x18b))/0x8+parseInt(_0x2fd993(0x175))/0x9*(-parseInt(_0x2fd993(0x183))/0xa)+-parseInt(_0x2fd993(0x18f))/0xb*(parseInt(_0x2fd993(0x177))/0xc);if(_0x4b4203===_0x5d15a2)break;else _0x455b87['push'](_0x455b87['shift']());}catch(_0x1f70a4){_0x455b87['push'](_0x455b87['shift']());}}}(a568_0xe658,0x44cb3));var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x63904c,_0x41bfe2,_0x5841ea,_0x399a16){const _0x5f2ca1=a568_0x7bf4;if(_0x399a16===undefined)_0x399a16=_0x5841ea;var _0x83a5bd=Object['getOwnPropertyDescriptor'](_0x41bfe2,_0x5841ea);(!_0x83a5bd||(_0x5f2ca1(0x18e)in _0x83a5bd?!_0x41bfe2[_0x5f2ca1(0x179)]:_0x83a5bd[_0x5f2ca1(0x18a)]||_0x83a5bd['configurable']))&&(_0x83a5bd={'enumerable':!![],'get':function(){return _0x41bfe2[_0x5841ea];}}),Object['defineProperty'](_0x63904c,_0x399a16,_0x83a5bd);}:function(_0x368ed0,_0x167546,_0x3b0470,_0x3f3fba){if(_0x3f3fba===undefined)_0x3f3fba=_0x3b0470;_0x368ed0[_0x3f3fba]=_0x167546[_0x3b0470];}),__setModuleDefault=this&&this[a568_0x220595(0x181)]||(Object[a568_0x220595(0x189)]?function(_0x7bcb3d,_0x14c892){const _0x11ce04=a568_0x220595;Object[_0x11ce04(0x195)](_0x7bcb3d,'default',{'enumerable':!![],'value':_0x14c892});}:function(_0x4cfc98,_0x242a24){const _0x53d4b4=a568_0x220595;_0x4cfc98[_0x53d4b4(0x173)]=_0x242a24;}),__importStar=this&&this['__importStar']||(function(){const _0x2272bd=(function(){let _0x54f8b6=!![];return function(_0x12ef39,_0x1dc764){const _0x2ae884=_0x54f8b6?function(){if(_0x1dc764){const _0x3c015d=_0x1dc764['apply'](_0x12ef39,arguments);return _0x1dc764=null,_0x3c015d;}}:function(){};return _0x54f8b6=![],_0x2ae884;};}()),_0x39d281=_0x2272bd(this,function(){const _0x332e61=a568_0x7bf4;return _0x39d281[_0x332e61(0x178)]()[_0x332e61(0x17c)](_0x332e61(0x172))[_0x332e61(0x178)]()[_0x332e61(0x193)](_0x39d281)[_0x332e61(0x17c)]('(((.+)+)+)+$');});_0x39d281();var _0x23dc8e=function(_0x143480){const _0x22df3d=a568_0x7bf4;return _0x23dc8e=Object[_0x22df3d(0x17f)]||function(_0x5d6762){const _0x7ded77=_0x22df3d;var _0x42ed83=[];for(var _0x117375 in _0x5d6762)if(Object['prototype'][_0x7ded77(0x180)]['call'](_0x5d6762,_0x117375))_0x42ed83[_0x42ed83[_0x7ded77(0x187)]]=_0x117375;return _0x42ed83;},_0x23dc8e(_0x143480);};return function(_0x443c9e){const _0x491aec=a568_0x7bf4;if(_0x443c9e&&_0x443c9e[_0x491aec(0x179)])return _0x443c9e;var _0xeba8cc={};if(_0x443c9e!=null){for(var _0x47b962=_0x23dc8e(_0x443c9e),_0x55fa1f=0x0;_0x55fa1f<_0x47b962['length'];_0x55fa1f++)if(_0x47b962[_0x55fa1f]!==_0x491aec(0x173))__createBinding(_0xeba8cc,_0x443c9e,_0x47b962[_0x55fa1f]);}return __setModuleDefault(_0xeba8cc,_0x443c9e),_0xeba8cc;};}()),__importDefault=this&&this[a568_0x220595(0x190)]||function(_0x5ea158){const _0x20efc8=a568_0x220595;return _0x5ea158&&_0x5ea158[_0x20efc8(0x179)]?_0x5ea158:{'default':_0x5ea158};};Object[a568_0x220595(0x195)](exports,'__esModule',{'value':!![]});function a568_0xe658(){const _0x61cf18=['getOwnPropertyNames','hasOwnProperty','__setModuleDefault','ERR_FORBIDDEN','7490onYeWP','1651107yrlWga','string','154938XfXGeL','length','object','create','writable','2326488SUROHw','1CvXmJD','yup','get','85745suZaTc','__importDefault','email','admin','constructor','message','defineProperty','60XtAHMI','validate','findByPk','reload','$set','./ShowUserService','4xRkgyu','698568sMJpfX','(((.+)+)+)+$','default','54243xiNXoG','4527JGtpej','profile','1284tPPpdD','toString','__esModule','update','companyId','search','shape','super'];a568_0xe658=function(){return _0x61cf18;};return a568_0xe658();}const Yup=__importStar(require(a568_0x220595(0x18d))),AppError_1=__importDefault(require('../../errors/AppError')),ShowUserService_1=__importDefault(require(a568_0x220595(0x19b))),Company_1=__importDefault(require('../../models/Company')),User_1=__importDefault(require('../../models/User')),UpdateUserService=async({userData:_0x198d87,userId:_0x53ffc6,requestUserId:_0x2119f7})=>{const _0x30200a=a568_0x220595,_0x5f34a8=await(0x0,ShowUserService_1[_0x30200a(0x173)])(_0x53ffc6,_0x2119f7),_0x558ab7=await User_1['default'][_0x30200a(0x198)](_0x2119f7);if(!_0x558ab7[_0x30200a(0x17e)]&&+_0x53ffc6!==_0x558ab7['id']&&(_0x5f34a8[_0x30200a(0x17b)]!==_0x558ab7[_0x30200a(0x17b)]||_0x558ab7[_0x30200a(0x176)]!==_0x30200a(0x192)))throw new AppError_1[(_0x30200a(0x173))](_0x30200a(0x182),0x193);const _0x18033c=Yup[_0x30200a(0x188)]()[_0x30200a(0x17d)]({'name':Yup[_0x30200a(0x185)]()['min'](0x2),'email':Yup[_0x30200a(0x185)]()[_0x30200a(0x191)](),'profile':Yup[_0x30200a(0x185)](),'password':Yup['string']()}),{email:_0x6fd0f2,password:_0x480f9d,profile:_0x162e8e,name:_0x19b218,queueIds:queueIds=[]}=_0x198d87;try{await _0x18033c[_0x30200a(0x197)]({'email':_0x6fd0f2,'password':_0x480f9d,'profile':_0x162e8e,'name':_0x19b218});}catch(_0x1e77b4){throw new AppError_1[(_0x30200a(0x173))](_0x1e77b4[_0x30200a(0x194)]);}_0x558ab7['profile']===_0x30200a(0x192)?(await _0x5f34a8[_0x30200a(0x17a)]({'email':_0x6fd0f2,'password':_0x480f9d,'profile':_0x162e8e,'name':_0x19b218}),await _0x5f34a8[_0x30200a(0x19a)]('queues',queueIds)):await _0x5f34a8['update']({'email':_0x6fd0f2,'password':_0x480f9d,'name':_0x19b218});await _0x5f34a8[_0x30200a(0x199)]();const _0x4e7964=await Company_1[_0x30200a(0x173)][_0x30200a(0x198)](_0x5f34a8[_0x30200a(0x17b)]),_0x209303={'id':_0x5f34a8['id'],'name':_0x5f34a8['name'],'email':_0x5f34a8['email'],'profile':_0x5f34a8['profile'],'companyId':_0x5f34a8[_0x30200a(0x17b)],'company':_0x4e7964,'queues':_0x5f34a8['queues']};return _0x209303;};exports[a568_0x220595(0x173)]=UpdateUserService;