'use strict';const a571_0x29e53f=a571_0x3b4c;function a571_0x3b4c(_0xaa0053,_0x128e55){const _0x1567b4=a571_0x4eab();return a571_0x3b4c=function(_0x4d7e17,_0x1444f3){_0x4d7e17=_0x4d7e17-0x178;let _0x4eab54=_0x1567b4[_0x4d7e17];return _0x4eab54;},a571_0x3b4c(_0xaa0053,_0x128e55);}(function(_0x4c17ee,_0x14fe7b){const _0x40361c=a571_0x3b4c,_0x35aa2d=_0x4c17ee();while(!![]){try{const _0x3cf049=-parseInt(_0x40361c(0x18e))/0x1*(parseInt(_0x40361c(0x19c))/0x2)+parseInt(_0x40361c(0x1a9))/0x3*(-parseInt(_0x40361c(0x18a))/0x4)+parseInt(_0x40361c(0x196))/0x5*(parseInt(_0x40361c(0x1ac))/0x6)+-parseInt(_0x40361c(0x1a6))/0x7*(parseInt(_0x40361c(0x1a7))/0x8)+-parseInt(_0x40361c(0x1a3))/0x9*(parseInt(_0x40361c(0x197))/0xa)+-parseInt(_0x40361c(0x194))/0xb+parseInt(_0x40361c(0x1a4))/0xc;if(_0x3cf049===_0x14fe7b)break;else _0x35aa2d['push'](_0x35aa2d['shift']());}catch(_0x75091c){_0x35aa2d['push'](_0x35aa2d['shift']());}}}(a571_0x4eab,0xa341a));var __createBinding=this&&this['__createBinding']||(Object[a571_0x29e53f(0x18f)]?function(_0x33afe1,_0x4f41c6,_0x5f5de7,_0x163d1c){const _0x100c23=a571_0x29e53f;if(_0x163d1c===undefined)_0x163d1c=_0x5f5de7;var _0xade991=Object[_0x100c23(0x17b)](_0x4f41c6,_0x5f5de7);(!_0xade991||(_0x100c23(0x186)in _0xade991?!_0x4f41c6[_0x100c23(0x1a0)]:_0xade991['writable']||_0xade991[_0x100c23(0x183)]))&&(_0xade991={'enumerable':!![],'get':function(){return _0x4f41c6[_0x5f5de7];}}),Object[_0x100c23(0x17d)](_0x33afe1,_0x163d1c,_0xade991);}:function(_0x42cbd3,_0x4732f4,_0x43c9c2,_0x3352ed){if(_0x3352ed===undefined)_0x3352ed=_0x43c9c2;_0x42cbd3[_0x3352ed]=_0x4732f4[_0x43c9c2];}),__setModuleDefault=this&&this[a571_0x29e53f(0x19e)]||(Object['create']?function(_0x4814e4,_0x2398b2){const _0x272bdb=a571_0x29e53f;Object[_0x272bdb(0x17d)](_0x4814e4,_0x272bdb(0x1ab),{'enumerable':!![],'value':_0x2398b2});}:function(_0x42b318,_0x7ee76b){const _0x557538=a571_0x29e53f;_0x42b318[_0x557538(0x1ab)]=_0x7ee76b;}),__importStar=this&&this[a571_0x29e53f(0x189)]||(function(){const _0x37b731=(function(){let _0x430cd6=!![];return function(_0x485bf4,_0x3c4838){const _0x34b858=_0x430cd6?function(){if(_0x3c4838){const _0x37590a=_0x3c4838['apply'](_0x485bf4,arguments);return _0x3c4838=null,_0x37590a;}}:function(){};return _0x430cd6=![],_0x34b858;};}()),_0x19914d=_0x37b731(this,function(){const _0x290c3d=a571_0x3b4c;return _0x19914d[_0x290c3d(0x1aa)]()[_0x290c3d(0x182)](_0x290c3d(0x187))[_0x290c3d(0x1aa)]()[_0x290c3d(0x17e)](_0x19914d)['search']('(((.+)+)+)+$');});_0x19914d();var _0x3a54dd=function(_0x4cc081){const _0x49256c=a571_0x3b4c;return _0x3a54dd=Object[_0x49256c(0x17c)]||function(_0x2cc341){const _0x2510d2=_0x49256c;var _0xe95d0c=[];for(var _0x38ca8b in _0x2cc341)if(Object[_0x2510d2(0x193)][_0x2510d2(0x185)][_0x2510d2(0x19f)](_0x2cc341,_0x38ca8b))_0xe95d0c[_0xe95d0c['length']]=_0x38ca8b;return _0xe95d0c;},_0x3a54dd(_0x4cc081);};return function(_0xac0f6f){const _0x5af60b=a571_0x3b4c;if(_0xac0f6f&&_0xac0f6f['__esModule'])return _0xac0f6f;var _0x371a22={};if(_0xac0f6f!=null){for(var _0x476909=_0x3a54dd(_0xac0f6f),_0x95d6e3=0x0;_0x95d6e3<_0x476909[_0x5af60b(0x199)];_0x95d6e3++)if(_0x476909[_0x95d6e3]!=='default')__createBinding(_0x371a22,_0xac0f6f,_0x476909[_0x95d6e3]);}return __setModuleDefault(_0x371a22,_0xac0f6f),_0x371a22;};}()),__importDefault=this&&this[a571_0x29e53f(0x19b)]||function(_0x24e592){const _0x569ecc=a571_0x29e53f;return _0x24e592&&_0x24e592[_0x569ecc(0x1a0)]?_0x24e592:{'default':_0x24e592};};Object[a571_0x29e53f(0x17d)](exports,a571_0x29e53f(0x1a0),{'value':!![]});function a571_0x4eab(){const _0xcab41b=['search','configurable','companyId','hasOwnProperty','get','(((.+)+)+)+$','message','__importStar','8GqMMJe','admin','shape','profile','102854kApDRa','create','super','update','findByPk','prototype','4733685hziYaR','email','530305jmtJVp','1270idcXnN','min','length','queues','__importDefault','20QrWHJz','name','__setModuleDefault','call','__esModule','reload','../../models/User','76410wISYmu','30680844BuASGY','yup','2606723VLZNSS','8GIUfxg','string','217824vAduet','toString','default','66zgsVAx','ERR_FORBIDDEN','object','../../models/Company','getOwnPropertyDescriptor','getOwnPropertyNames','defineProperty','constructor','$set','./ShowUserService','validate'];a571_0x4eab=function(){return _0xcab41b;};return a571_0x4eab();}const Yup=__importStar(require(a571_0x29e53f(0x1a5))),AppError_1=__importDefault(require('../../errors/AppError')),ShowUserService_1=__importDefault(require(a571_0x29e53f(0x180))),Company_1=__importDefault(require(a571_0x29e53f(0x17a))),User_1=__importDefault(require(a571_0x29e53f(0x1a2))),UpdateUserService=async({userData:_0x45b47b,userId:_0x5df1ca,requestUserId:_0x59e3c5})=>{const _0x45d020=a571_0x29e53f,_0x242239=await(0x0,ShowUserService_1[_0x45d020(0x1ab)])(_0x5df1ca,_0x59e3c5),_0x3ab600=await User_1[_0x45d020(0x1ab)][_0x45d020(0x192)](_0x59e3c5);if(!_0x3ab600[_0x45d020(0x190)]&&+_0x5df1ca!==_0x3ab600['id']&&(_0x242239[_0x45d020(0x184)]!==_0x3ab600['companyId']||_0x3ab600[_0x45d020(0x18d)]!==_0x45d020(0x18b)))throw new AppError_1[(_0x45d020(0x1ab))](_0x45d020(0x178),0x193);const _0x7e0aa4=Yup[_0x45d020(0x179)]()[_0x45d020(0x18c)]({'name':Yup[_0x45d020(0x1a8)]()[_0x45d020(0x198)](0x2),'email':Yup[_0x45d020(0x1a8)]()[_0x45d020(0x195)](),'profile':Yup[_0x45d020(0x1a8)](),'password':Yup[_0x45d020(0x1a8)]()}),{email:_0x1da637,password:_0xe7e6d4,profile:_0x5e58f4,name:_0x32a8b2,queueIds:queueIds=[]}=_0x45b47b;try{await _0x7e0aa4[_0x45d020(0x181)]({'email':_0x1da637,'password':_0xe7e6d4,'profile':_0x5e58f4,'name':_0x32a8b2});}catch(_0x666c21){throw new AppError_1[(_0x45d020(0x1ab))](_0x666c21[_0x45d020(0x188)]);}_0x3ab600[_0x45d020(0x18d)]==='admin'?(await _0x242239[_0x45d020(0x191)]({'email':_0x1da637,'password':_0xe7e6d4,'profile':_0x5e58f4,'name':_0x32a8b2}),await _0x242239[_0x45d020(0x17f)]('queues',queueIds)):await _0x242239[_0x45d020(0x191)]({'email':_0x1da637,'password':_0xe7e6d4,'name':_0x32a8b2});await _0x242239[_0x45d020(0x1a1)]();const _0x5b5690=await Company_1[_0x45d020(0x1ab)][_0x45d020(0x192)](_0x242239[_0x45d020(0x184)]),_0x22ff93={'id':_0x242239['id'],'name':_0x242239[_0x45d020(0x19d)],'email':_0x242239[_0x45d020(0x195)],'profile':_0x242239[_0x45d020(0x18d)],'companyId':_0x242239['companyId'],'company':_0x5b5690,'queues':_0x242239[_0x45d020(0x19a)]};return _0x22ff93;};exports[a571_0x29e53f(0x1ab)]=UpdateUserService;