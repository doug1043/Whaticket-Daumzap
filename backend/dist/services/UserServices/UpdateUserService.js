'use strict';const a567_0x513e33=a567_0x5072;(function(_0xdd6d20,_0x55731b){const _0x33ad2e=a567_0x5072,_0x1bef33=_0xdd6d20();while(!![]){try{const _0x93a0e1=-parseInt(_0x33ad2e(0x1fd))/0x1*(-parseInt(_0x33ad2e(0x1f7))/0x2)+-parseInt(_0x33ad2e(0x1e6))/0x3*(-parseInt(_0x33ad2e(0x20e))/0x4)+-parseInt(_0x33ad2e(0x1ef))/0x5*(-parseInt(_0x33ad2e(0x20a))/0x6)+parseInt(_0x33ad2e(0x1f2))/0x7+parseInt(_0x33ad2e(0x204))/0x8*(parseInt(_0x33ad2e(0x202))/0x9)+parseInt(_0x33ad2e(0x1f1))/0xa*(-parseInt(_0x33ad2e(0x1f0))/0xb)+-parseInt(_0x33ad2e(0x1f3))/0xc*(parseInt(_0x33ad2e(0x205))/0xd);if(_0x93a0e1===_0x55731b)break;else _0x1bef33['push'](_0x1bef33['shift']());}catch(_0x3ec6e7){_0x1bef33['push'](_0x1bef33['shift']());}}}(a567_0x5ba5,0x4f402));var __createBinding=this&&this[a567_0x513e33(0x1ea)]||(Object[a567_0x513e33(0x215)]?function(_0x5933f8,_0x3bfd42,_0x2f6a34,_0x320e60){const _0x249b22=a567_0x513e33;if(_0x320e60===undefined)_0x320e60=_0x2f6a34;var _0x3ab3a4=Object[_0x249b22(0x213)](_0x3bfd42,_0x2f6a34);(!_0x3ab3a4||(_0x249b22(0x1e7)in _0x3ab3a4?!_0x3bfd42['__esModule']:_0x3ab3a4['writable']||_0x3ab3a4[_0x249b22(0x207)]))&&(_0x3ab3a4={'enumerable':!![],'get':function(){return _0x3bfd42[_0x2f6a34];}}),Object['defineProperty'](_0x5933f8,_0x320e60,_0x3ab3a4);}:function(_0xa0c139,_0x211c0f,_0x320bb1,_0x47f4cb){if(_0x47f4cb===undefined)_0x47f4cb=_0x320bb1;_0xa0c139[_0x47f4cb]=_0x211c0f[_0x320bb1];}),__setModuleDefault=this&&this[a567_0x513e33(0x1fe)]||(Object[a567_0x513e33(0x215)]?function(_0x30fca7,_0x1bd36c){const _0x32c716=a567_0x513e33;Object[_0x32c716(0x210)](_0x30fca7,_0x32c716(0x1ec),{'enumerable':!![],'value':_0x1bd36c});}:function(_0x4ed1cc,_0x1c27c3){_0x4ed1cc['default']=_0x1c27c3;}),__importStar=this&&this[a567_0x513e33(0x1e8)]||(function(){const _0x258bdf=(function(){let _0x2a979e=!![];return function(_0x426138,_0x16a078){const _0xb7d119=_0x2a979e?function(){const _0x43590c=a567_0x5072;if(_0x16a078){const _0xb94034=_0x16a078[_0x43590c(0x206)](_0x426138,arguments);return _0x16a078=null,_0xb94034;}}:function(){};return _0x2a979e=![],_0xb7d119;};}()),_0x3a9bcf=_0x258bdf(this,function(){const _0x28c559=a567_0x5072;return _0x3a9bcf[_0x28c559(0x211)]()[_0x28c559(0x1f5)]('(((.+)+)+)+$')[_0x28c559(0x211)]()['constructor'](_0x3a9bcf)[_0x28c559(0x1f5)](_0x28c559(0x1e5));});_0x3a9bcf();var _0x5ba1f1=function(_0x455896){const _0x5df5f5=a567_0x5072;return _0x5ba1f1=Object[_0x5df5f5(0x1ff)]||function(_0x41f3be){const _0x4aeada=_0x5df5f5;var _0x35b99f=[];for(var _0x3757f0 in _0x41f3be)if(Object['prototype'][_0x4aeada(0x1f6)][_0x4aeada(0x217)](_0x41f3be,_0x3757f0))_0x35b99f[_0x35b99f['length']]=_0x3757f0;return _0x35b99f;},_0x5ba1f1(_0x455896);};return function(_0x5b0526){const _0x571a6d=a567_0x5072;if(_0x5b0526&&_0x5b0526['__esModule'])return _0x5b0526;var _0x56af08={};if(_0x5b0526!=null){for(var _0x284648=_0x5ba1f1(_0x5b0526),_0x108b37=0x0;_0x108b37<_0x284648[_0x571a6d(0x1f4)];_0x108b37++)if(_0x284648[_0x108b37]!==_0x571a6d(0x1ec))__createBinding(_0x56af08,_0x5b0526,_0x284648[_0x108b37]);}return __setModuleDefault(_0x56af08,_0x5b0526),_0x56af08;};}()),__importDefault=this&&this[a567_0x513e33(0x20d)]||function(_0x498f61){return _0x498f61&&_0x498f61['__esModule']?_0x498f61:{'default':_0x498f61};};function a567_0x5072(_0x939385,_0x476a90){const _0x233f48=a567_0x5ba5();return a567_0x5072=function(_0x15ae19,_0x501aa3){_0x15ae19=_0x15ae19-0x1e3;let _0x5ba5a0=_0x233f48[_0x15ae19];return _0x5ba5a0;},a567_0x5072(_0x939385,_0x476a90);}function a567_0x5ba5(){const _0x2a854a=['validate','email','24sVdQKx','update','shape','__importDefault','52ngsnoA','admin','defineProperty','toString','object','getOwnPropertyDescriptor','name','create','string','call','queues','profile','(((.+)+)+)+$','85686TOffIK','get','__importStar','message','__createBinding','companyId','default','reload','$set','456865NGJWmF','312433pQOyky','170vRNlpz','437402eGPjPJ','48YteYfE','length','search','hasOwnProperty','974oHQzqB','yup','./ShowUserService','__esModule','../../models/User','min','881DXctuG','__setModuleDefault','getOwnPropertyNames','super','../../errors/AppError','5336694TfXdmI','findByPk','8wNVvfk','3294967awEySY','apply','configurable'];a567_0x5ba5=function(){return _0x2a854a;};return a567_0x5ba5();}Object[a567_0x513e33(0x210)](exports,a567_0x513e33(0x1fa),{'value':!![]});const Yup=__importStar(require(a567_0x513e33(0x1f8))),AppError_1=__importDefault(require(a567_0x513e33(0x201))),ShowUserService_1=__importDefault(require(a567_0x513e33(0x1f9))),Company_1=__importDefault(require('../../models/Company')),User_1=__importDefault(require(a567_0x513e33(0x1fb))),UpdateUserService=async({userData:_0x4da66e,userId:_0xce102c,requestUserId:_0xe52019})=>{const _0x86af09=a567_0x513e33,_0x3d0c51=await(0x0,ShowUserService_1[_0x86af09(0x1ec)])(_0xce102c,_0xe52019),_0x433924=await User_1[_0x86af09(0x1ec)][_0x86af09(0x203)](_0xe52019);if(!_0x433924[_0x86af09(0x200)]&&+_0xce102c!==_0x433924['id']&&(_0x3d0c51['companyId']!==_0x433924[_0x86af09(0x1eb)]||_0x433924[_0x86af09(0x1e4)]!==_0x86af09(0x20f)))throw new AppError_1['default']('ERR_FORBIDDEN',0x193);const _0x561e5d=Yup[_0x86af09(0x212)]()[_0x86af09(0x20c)]({'name':Yup[_0x86af09(0x216)]()[_0x86af09(0x1fc)](0x2),'email':Yup[_0x86af09(0x216)]()[_0x86af09(0x209)](),'profile':Yup[_0x86af09(0x216)](),'password':Yup[_0x86af09(0x216)]()}),{email:_0x2f1149,password:_0x3fe3b1,profile:_0x503c2a,name:_0x2e84f5,queueIds:queueIds=[]}=_0x4da66e;try{await _0x561e5d[_0x86af09(0x208)]({'email':_0x2f1149,'password':_0x3fe3b1,'profile':_0x503c2a,'name':_0x2e84f5});}catch(_0x4792fb){throw new AppError_1['default'](_0x4792fb[_0x86af09(0x1e9)]);}_0x433924[_0x86af09(0x1e4)]===_0x86af09(0x20f)?(await _0x3d0c51[_0x86af09(0x20b)]({'email':_0x2f1149,'password':_0x3fe3b1,'profile':_0x503c2a,'name':_0x2e84f5}),await _0x3d0c51[_0x86af09(0x1ee)]('queues',queueIds)):await _0x3d0c51[_0x86af09(0x20b)]({'email':_0x2f1149,'password':_0x3fe3b1,'name':_0x2e84f5});await _0x3d0c51[_0x86af09(0x1ed)]();const _0x4d0be4=await Company_1[_0x86af09(0x1ec)][_0x86af09(0x203)](_0x3d0c51[_0x86af09(0x1eb)]),_0x1206fc={'id':_0x3d0c51['id'],'name':_0x3d0c51[_0x86af09(0x214)],'email':_0x3d0c51[_0x86af09(0x209)],'profile':_0x3d0c51[_0x86af09(0x1e4)],'companyId':_0x3d0c51['companyId'],'company':_0x4d0be4,'queues':_0x3d0c51[_0x86af09(0x1e3)]};return _0x1206fc;};exports[a567_0x513e33(0x1ec)]=UpdateUserService;