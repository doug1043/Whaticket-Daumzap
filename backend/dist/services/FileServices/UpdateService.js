const a430_0x10c7dd=a430_0x4b58;function a430_0x4b58(_0x1367ac,_0x47db65){const _0x145d24=a430_0x1b03();return a430_0x4b58=function(_0x20e118,_0x477ba3){_0x20e118=_0x20e118-0x1e0;let _0x1b032b=_0x145d24[_0x20e118];return _0x1b032b;},a430_0x4b58(_0x1367ac,_0x47db65);}(function(_0x20317a,_0x573148){const _0x37c8fb=a430_0x4b58,_0x142fb5=_0x20317a();while(!![]){try{const _0x4193d1=parseInt(_0x37c8fb(0x1eb))/0x1*(-parseInt(_0x37c8fb(0x1ed))/0x2)+parseInt(_0x37c8fb(0x1e2))/0x3+parseInt(_0x37c8fb(0x1e9))/0x4*(-parseInt(_0x37c8fb(0x1e3))/0x5)+parseInt(_0x37c8fb(0x1fb))/0x6*(parseInt(_0x37c8fb(0x1f6))/0x7)+parseInt(_0x37c8fb(0x1e6))/0x8*(parseInt(_0x37c8fb(0x1f7))/0x9)+parseInt(_0x37c8fb(0x1ff))/0xa+parseInt(_0x37c8fb(0x1f9))/0xb*(-parseInt(_0x37c8fb(0x1f3))/0xc);if(_0x4193d1===_0x573148)break;else _0x142fb5['push'](_0x142fb5['shift']());}catch(_0x3715e9){_0x142fb5['push'](_0x142fb5['shift']());}}}(a430_0x1b03,0x8aa02));function a430_0x1b03(){const _0x4b2e2e=['toString','get','shape','configurable','destroy','__esModule','name','update','apply','678183xiLHhS','2435tVmKBZ','__importDefault','companyId','3992048BLRpbS','defineProperty','default','7336oSOCJF','map','1aUnDbv','reload','438976pslAaO','./ShowService','upsert','__createBinding','message','search','44028aWnNDw','constructor','hasOwnProperty','3114531ttvxXv','18UcBbTs','all','2827EkdoRx','../../models/FilesOptions','6NrOJYY','create','(((.+)+)+)+$','string','9543830RQsIZz','getOwnPropertyDescriptor','__importStar','min'];a430_0x1b03=function(){return _0x4b2e2e;};return a430_0x1b03();}const a430_0x477ba3=(function(){let _0xa18069=!![];return function(_0x44bb57,_0x3e46ac){const _0x3272c5=_0xa18069?function(){const _0x40a9c8=a430_0x4b58;if(_0x3e46ac){const _0x40401a=_0x3e46ac[_0x40a9c8(0x1e1)](_0x44bb57,arguments);return _0x3e46ac=null,_0x40401a;}}:function(){};return _0xa18069=![],_0x3272c5;};}()),a430_0x20e118=a430_0x477ba3(this,function(){const _0x587919=a430_0x4b58;return a430_0x20e118['toString']()['search'](_0x587919(0x1fd))[_0x587919(0x203)]()[_0x587919(0x1f4)](a430_0x20e118)[_0x587919(0x1f2)](_0x587919(0x1fd));});a430_0x20e118();'use strict';var __createBinding=this&&this[a430_0x10c7dd(0x1f0)]||(Object[a430_0x10c7dd(0x1fc)]?function(_0x26a669,_0x13c6d2,_0x39aa5b,_0x2d72c6){const _0x260042=a430_0x10c7dd;if(_0x2d72c6===undefined)_0x2d72c6=_0x39aa5b;var _0x21abd4=Object[_0x260042(0x200)](_0x13c6d2,_0x39aa5b);(!_0x21abd4||(_0x260042(0x204)in _0x21abd4?!_0x13c6d2[_0x260042(0x208)]:_0x21abd4['writable']||_0x21abd4[_0x260042(0x206)]))&&(_0x21abd4={'enumerable':!![],'get':function(){return _0x13c6d2[_0x39aa5b];}}),Object[_0x260042(0x1e7)](_0x26a669,_0x2d72c6,_0x21abd4);}:function(_0x4d41cb,_0x6e3d67,_0x2a9ad1,_0x2bc9ea){if(_0x2bc9ea===undefined)_0x2bc9ea=_0x2a9ad1;_0x4d41cb[_0x2bc9ea]=_0x6e3d67[_0x2a9ad1];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a430_0x10c7dd(0x1fc)]?function(_0x21a3ce,_0xe2c14a){const _0x174f40=a430_0x10c7dd;Object[_0x174f40(0x1e7)](_0x21a3ce,'default',{'enumerable':!![],'value':_0xe2c14a});}:function(_0x1e70fe,_0x56dfc7){const _0xf8e811=a430_0x10c7dd;_0x1e70fe[_0xf8e811(0x1e8)]=_0x56dfc7;}),__importStar=this&&this[a430_0x10c7dd(0x201)]||function(_0x5319bd){const _0x2d6b36=a430_0x10c7dd;if(_0x5319bd&&_0x5319bd[_0x2d6b36(0x208)])return _0x5319bd;var _0x47ef8c={};if(_0x5319bd!=null){for(var _0x378508 in _0x5319bd)if(_0x378508!=='default'&&Object['prototype'][_0x2d6b36(0x1f5)]['call'](_0x5319bd,_0x378508))__createBinding(_0x47ef8c,_0x5319bd,_0x378508);}return __setModuleDefault(_0x47ef8c,_0x5319bd),_0x47ef8c;},__importDefault=this&&this[a430_0x10c7dd(0x1e4)]||function(_0x2bfad8){const _0x5d0e34=a430_0x10c7dd;return _0x2bfad8&&_0x2bfad8[_0x5d0e34(0x208)]?_0x2bfad8:{'default':_0x2bfad8};};Object[a430_0x10c7dd(0x1e7)](exports,a430_0x10c7dd(0x208),{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require('../../errors/AppError')),FilesOptions_1=__importDefault(require(a430_0x10c7dd(0x1fa))),ShowService_1=__importDefault(require(a430_0x10c7dd(0x1ee))),UpdateService=async({fileData:_0x426d67,id:_0x587fb7,companyId:_0x1985e0})=>{const _0x46927a=a430_0x10c7dd,_0xe1cebe=await(0x0,ShowService_1[_0x46927a(0x1e8)])(_0x587fb7,_0x1985e0),_0x278479=Yup['object']()[_0x46927a(0x205)]({'name':Yup[_0x46927a(0x1fe)]()[_0x46927a(0x202)](0x3)}),{name:_0x5431da,message:_0x4fc830,options:_0x3c6521}=_0x426d67;try{await _0x278479['validate']({'name':_0x5431da});}catch(_0x58276a){throw new AppError_1[(_0x46927a(0x1e8))](_0x58276a[_0x46927a(0x1f1)]);}return _0x3c6521&&(await Promise['all'](_0x3c6521[_0x46927a(0x1ea)](async _0x10b1bb=>{const _0x1b1622=_0x46927a;await FilesOptions_1[_0x1b1622(0x1e8)][_0x1b1622(0x1ef)]({..._0x10b1bb,'fileId':_0xe1cebe['id']});})),await Promise[_0x46927a(0x1f8)](_0xe1cebe['options'][_0x46927a(0x1ea)](async _0x3387af=>{const _0x4981d9=_0x46927a,_0x3b218f=_0x3c6521['findIndex'](_0x6689c5=>_0x6689c5['id']===_0x3387af['id']);_0x3b218f===-0x1&&await FilesOptions_1[_0x4981d9(0x1e8)][_0x4981d9(0x207)]({'where':{'id':_0x3387af['id']}});}))),await _0xe1cebe[_0x46927a(0x1e0)]({'name':_0x5431da,'message':_0x4fc830}),await _0xe1cebe[_0x46927a(0x1ec)]({'attributes':['id',_0x46927a(0x209),_0x46927a(0x1f1),_0x46927a(0x1e5)],'include':['options']}),_0xe1cebe;};exports['default']=UpdateService;