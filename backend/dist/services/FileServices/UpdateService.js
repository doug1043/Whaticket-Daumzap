const a430_0xa03b09=a430_0x93c3;(function(_0x2f0f3d,_0x481207){const _0x1c93c2=a430_0x93c3,_0x9ef4f=_0x2f0f3d();while(!![]){try{const _0x3ac891=parseInt(_0x1c93c2(0x11a))/0x1+-parseInt(_0x1c93c2(0x124))/0x2+parseInt(_0x1c93c2(0x11d))/0x3*(parseInt(_0x1c93c2(0x131))/0x4)+-parseInt(_0x1c93c2(0x127))/0x5*(-parseInt(_0x1c93c2(0x10c))/0x6)+-parseInt(_0x1c93c2(0x10d))/0x7+parseInt(_0x1c93c2(0x12f))/0x8+parseInt(_0x1c93c2(0x12a))/0x9*(-parseInt(_0x1c93c2(0x129))/0xa);if(_0x3ac891===_0x481207)break;else _0x9ef4f['push'](_0x9ef4f['shift']());}catch(_0x4f1899){_0x9ef4f['push'](_0x9ef4f['shift']());}}}(a430_0x205b,0x55829));const a430_0x30b23d=(function(){let _0x340c28=!![];return function(_0x2c6011,_0x2d07b4){const _0x1f9bd1=_0x340c28?function(){const _0x23a36b=a430_0x93c3;if(_0x2d07b4){const _0x4b1ea6=_0x2d07b4[_0x23a36b(0x11f)](_0x2c6011,arguments);return _0x2d07b4=null,_0x4b1ea6;}}:function(){};return _0x340c28=![],_0x1f9bd1;};}()),a430_0x1e1a49=a430_0x30b23d(this,function(){const _0xf569cf=a430_0x93c3;return a430_0x1e1a49[_0xf569cf(0x114)]()[_0xf569cf(0x10b)](_0xf569cf(0x120))[_0xf569cf(0x114)]()[_0xf569cf(0x10f)](a430_0x1e1a49)[_0xf569cf(0x10b)](_0xf569cf(0x120));});a430_0x1e1a49();function a430_0x205b(){const _0x489fe0=['companyId','min','call','validate','361788ZRGnkq','configurable','__setModuleDefault','15bCNiDX','__importStar','apply','(((.+)+)+)+$','map','string','shape','431778dhtWyo','update','defineProperty','5SFkmZI','create','700AlVRKB','11763apXYjw','prototype','__createBinding','hasOwnProperty','__esModule','2248176lkNbvF','destroy','210572VydGjk','reload','get','message','search','1460406cByqDe','3442586zhFPmv','all','constructor','upsert','object','yup','options','toString','default'];a430_0x205b=function(){return _0x489fe0;};return a430_0x205b();}'use strict';var __createBinding=this&&this[a430_0xa03b09(0x12c)]||(Object['create']?function(_0x506b76,_0x49ab9f,_0x288485,_0x5ca464){const _0x12022f=a430_0xa03b09;if(_0x5ca464===undefined)_0x5ca464=_0x288485;var _0x415dd9=Object['getOwnPropertyDescriptor'](_0x49ab9f,_0x288485);(!_0x415dd9||(_0x12022f(0x109)in _0x415dd9?!_0x49ab9f[_0x12022f(0x12e)]:_0x415dd9['writable']||_0x415dd9[_0x12022f(0x11b)]))&&(_0x415dd9={'enumerable':!![],'get':function(){return _0x49ab9f[_0x288485];}}),Object[_0x12022f(0x126)](_0x506b76,_0x5ca464,_0x415dd9);}:function(_0x2164f1,_0x45a65c,_0x3b3e90,_0x3e7c8b){if(_0x3e7c8b===undefined)_0x3e7c8b=_0x3b3e90;_0x2164f1[_0x3e7c8b]=_0x45a65c[_0x3b3e90];}),__setModuleDefault=this&&this[a430_0xa03b09(0x11c)]||(Object[a430_0xa03b09(0x128)]?function(_0xc7c75f,_0x4f9ebd){const _0x5250ca=a430_0xa03b09;Object['defineProperty'](_0xc7c75f,_0x5250ca(0x115),{'enumerable':!![],'value':_0x4f9ebd});}:function(_0x26ef0d,_0x11f47f){const _0x4f9398=a430_0xa03b09;_0x26ef0d[_0x4f9398(0x115)]=_0x11f47f;}),__importStar=this&&this[a430_0xa03b09(0x11e)]||function(_0xd0af60){const _0x103f27=a430_0xa03b09;if(_0xd0af60&&_0xd0af60[_0x103f27(0x12e)])return _0xd0af60;var _0xdb420c={};if(_0xd0af60!=null){for(var _0x23d29b in _0xd0af60)if(_0x23d29b!==_0x103f27(0x115)&&Object[_0x103f27(0x12b)][_0x103f27(0x12d)][_0x103f27(0x118)](_0xd0af60,_0x23d29b))__createBinding(_0xdb420c,_0xd0af60,_0x23d29b);}return __setModuleDefault(_0xdb420c,_0xd0af60),_0xdb420c;},__importDefault=this&&this['__importDefault']||function(_0x49f48e){const _0x54a5db=a430_0xa03b09;return _0x49f48e&&_0x49f48e[_0x54a5db(0x12e)]?_0x49f48e:{'default':_0x49f48e};};Object[a430_0xa03b09(0x126)](exports,a430_0xa03b09(0x12e),{'value':!![]});function a430_0x93c3(_0x55f7bd,_0x58b09e){const _0x171d06=a430_0x205b();return a430_0x93c3=function(_0x1e1a49,_0x30b23d){_0x1e1a49=_0x1e1a49-0x109;let _0x205b0d=_0x171d06[_0x1e1a49];return _0x205b0d;},a430_0x93c3(_0x55f7bd,_0x58b09e);}const Yup=__importStar(require(a430_0xa03b09(0x112))),AppError_1=__importDefault(require('../../errors/AppError')),FilesOptions_1=__importDefault(require('../../models/FilesOptions')),ShowService_1=__importDefault(require('./ShowService')),UpdateService=async({fileData:_0x53d116,id:_0x4d405a,companyId:_0x53b7b1})=>{const _0x5118cf=a430_0xa03b09,_0x3c830f=await(0x0,ShowService_1[_0x5118cf(0x115)])(_0x4d405a,_0x53b7b1),_0x40efb2=Yup[_0x5118cf(0x111)]()[_0x5118cf(0x123)]({'name':Yup[_0x5118cf(0x122)]()[_0x5118cf(0x117)](0x3)}),{name:_0x5870ee,message:_0x465ecc,options:_0x5e7c05}=_0x53d116;try{await _0x40efb2[_0x5118cf(0x119)]({'name':_0x5870ee});}catch(_0x510eec){throw new AppError_1[(_0x5118cf(0x115))](_0x510eec[_0x5118cf(0x10a)]);}return _0x5e7c05&&(await Promise['all'](_0x5e7c05[_0x5118cf(0x121)](async _0x232444=>{const _0x93fa5=_0x5118cf;await FilesOptions_1['default'][_0x93fa5(0x110)]({..._0x232444,'fileId':_0x3c830f['id']});})),await Promise[_0x5118cf(0x10e)](_0x3c830f[_0x5118cf(0x113)][_0x5118cf(0x121)](async _0x132334=>{const _0x1803a3=_0x5118cf,_0x12318b=_0x5e7c05['findIndex'](_0x26ae6e=>_0x26ae6e['id']===_0x132334['id']);_0x12318b===-0x1&&await FilesOptions_1[_0x1803a3(0x115)][_0x1803a3(0x130)]({'where':{'id':_0x132334['id']}});}))),await _0x3c830f[_0x5118cf(0x125)]({'name':_0x5870ee,'message':_0x465ecc}),await _0x3c830f[_0x5118cf(0x132)]({'attributes':['id','name',_0x5118cf(0x10a),_0x5118cf(0x116)],'include':['options']}),_0x3c830f;};exports[a430_0xa03b09(0x115)]=UpdateService;