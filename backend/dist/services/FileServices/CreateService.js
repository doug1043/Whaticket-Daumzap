const a427_0x58a053=a427_0x4a5a;(function(_0x1f6e05,_0xc04d84){const _0x43c58f=a427_0x4a5a,_0x328a3f=_0x1f6e05();while(!![]){try{const _0x5a4a3f=-parseInt(_0x43c58f(0x1a4))/0x1*(parseInt(_0x43c58f(0x1b6))/0x2)+-parseInt(_0x43c58f(0x1b2))/0x3+-parseInt(_0x43c58f(0x1a9))/0x4+parseInt(_0x43c58f(0x1a3))/0x5*(-parseInt(_0x43c58f(0x1bc))/0x6)+-parseInt(_0x43c58f(0x1bf))/0x7*(parseInt(_0x43c58f(0x1a5))/0x8)+parseInt(_0x43c58f(0x1af))/0x9+parseInt(_0x43c58f(0x1be))/0xa;if(_0x5a4a3f===_0xc04d84)break;else _0x328a3f['push'](_0x328a3f['shift']());}catch(_0xfc84f8){_0x328a3f['push'](_0x328a3f['shift']());}}}(a427_0x2b18,0x69f2b));function a427_0x2b18(){const _0x4e4db7=['../../errors/AppError','__createBinding','ERR_RATING_NAME_ALREADY_EXISTS','__esModule','696sngPAK','default','17800310htLqsA','4088xcAAgd','__setModuleDefault','test','apply','defineProperty','length','writable','Check-unique-name','14585xOBwlx','1338nbwusB','4480JSbqUu','upsert','shape','call','1584792wyoDVW','yup','../../models/Files','__importDefault','configurable','create','7746813ljMGMA','toString','./ShowService','1264071nxawVD','required','min','getOwnPropertyDescriptor','1082vekFZN','map'];a427_0x2b18=function(){return _0x4e4db7;};return a427_0x2b18();}const a427_0x57b34c=(function(){let _0x406184=!![];return function(_0x2a4a40,_0x347414){const _0x115eed=_0x406184?function(){const _0x528744=a427_0x4a5a;if(_0x347414){const _0x1e6a4b=_0x347414[_0x528744(0x1c2)](_0x2a4a40,arguments);return _0x347414=null,_0x1e6a4b;}}:function(){};return _0x406184=![],_0x115eed;};}()),a427_0x77b5f0=a427_0x57b34c(this,function(){const _0x4b6f6d=a427_0x4a5a;return a427_0x77b5f0[_0x4b6f6d(0x1b0)]()['search']('(((.+)+)+)+$')[_0x4b6f6d(0x1b0)]()['constructor'](a427_0x77b5f0)['search']('(((.+)+)+)+$');});function a427_0x4a5a(_0x476160,_0xb6b4a5){const _0x4597f6=a427_0x2b18();return a427_0x4a5a=function(_0x77b5f0,_0x57b34c){_0x77b5f0=_0x77b5f0-0x1a3;let _0x2b1890=_0x4597f6[_0x77b5f0];return _0x2b1890;},a427_0x4a5a(_0x476160,_0xb6b4a5);}a427_0x77b5f0();'use strict';var __createBinding=this&&this[a427_0x58a053(0x1b9)]||(Object['create']?function(_0x370e6d,_0x3886ff,_0x102644,_0xe75786){const _0x476f95=a427_0x58a053;if(_0xe75786===undefined)_0xe75786=_0x102644;var _0x1e918b=Object[_0x476f95(0x1b5)](_0x3886ff,_0x102644);(!_0x1e918b||('get'in _0x1e918b?!_0x3886ff[_0x476f95(0x1bb)]:_0x1e918b[_0x476f95(0x1c5)]||_0x1e918b[_0x476f95(0x1ad)]))&&(_0x1e918b={'enumerable':!![],'get':function(){return _0x3886ff[_0x102644];}}),Object[_0x476f95(0x1c3)](_0x370e6d,_0xe75786,_0x1e918b);}:function(_0x460541,_0x1e06bc,_0x2bc146,_0x1e2345){if(_0x1e2345===undefined)_0x1e2345=_0x2bc146;_0x460541[_0x1e2345]=_0x1e06bc[_0x2bc146];}),__setModuleDefault=this&&this[a427_0x58a053(0x1c0)]||(Object[a427_0x58a053(0x1ae)]?function(_0x186a10,_0x5003e6){const _0x1b9e0d=a427_0x58a053;Object[_0x1b9e0d(0x1c3)](_0x186a10,_0x1b9e0d(0x1bd),{'enumerable':!![],'value':_0x5003e6});}:function(_0x12080d,_0x180d40){const _0x446480=a427_0x58a053;_0x12080d[_0x446480(0x1bd)]=_0x180d40;}),__importStar=this&&this['__importStar']||function(_0x5c6770){const _0x43786b=a427_0x58a053;if(_0x5c6770&&_0x5c6770[_0x43786b(0x1bb)])return _0x5c6770;var _0x34f213={};if(_0x5c6770!=null){for(var _0x35e2d0 in _0x5c6770)if(_0x35e2d0!==_0x43786b(0x1bd)&&Object['prototype']['hasOwnProperty'][_0x43786b(0x1a8)](_0x5c6770,_0x35e2d0))__createBinding(_0x34f213,_0x5c6770,_0x35e2d0);}return __setModuleDefault(_0x34f213,_0x5c6770),_0x34f213;},__importDefault=this&&this[a427_0x58a053(0x1ac)]||function(_0x5c42a2){const _0x59f1ae=a427_0x58a053;return _0x5c42a2&&_0x5c42a2[_0x59f1ae(0x1bb)]?_0x5c42a2:{'default':_0x5c42a2};};Object[a427_0x58a053(0x1c3)](exports,a427_0x58a053(0x1bb),{'value':!![]});const Yup=__importStar(require(a427_0x58a053(0x1aa))),AppError_1=__importDefault(require(a427_0x58a053(0x1b8))),Files_1=__importDefault(require(a427_0x58a053(0x1ab))),FilesOptions_1=__importDefault(require('../../models/FilesOptions')),ShowService_1=__importDefault(require(a427_0x58a053(0x1b1))),CreateService=async({name:_0x560b4f,message:_0x15ead5,companyId:_0x49fdb3,options:_0x5920a5})=>{const _0x53c6d1=a427_0x58a053,_0x5c9c2d=Yup['object']()[_0x53c6d1(0x1a7)]({'name':Yup['string']()[_0x53c6d1(0x1b3)]()[_0x53c6d1(0x1b4)](0x3)[_0x53c6d1(0x1c1)](_0x53c6d1(0x1c6),_0x53c6d1(0x1ba),async _0x3d068e=>{const _0x4e27f0=_0x53c6d1;if(_0x3d068e){const _0x2930f5=await Files_1[_0x4e27f0(0x1bd)]['findOne']({'where':{'name':_0x3d068e,'companyId':_0x49fdb3}});return!_0x2930f5;}return![];})});try{await _0x5c9c2d['validate']({'name':_0x560b4f});}catch(_0x54db4c){throw new AppError_1[(_0x53c6d1(0x1bd))](_0x54db4c['message']);}let _0x20c520=await Files_1['default'][_0x53c6d1(0x1ae)]({'name':_0x560b4f,'message':_0x15ead5,'companyId':_0x49fdb3});return _0x5920a5&&_0x5920a5[_0x53c6d1(0x1c4)]>0x0&&await Promise['all'](_0x5920a5[_0x53c6d1(0x1b7)](async _0x1f811c=>{const _0x449a49=_0x53c6d1;await FilesOptions_1[_0x449a49(0x1bd)][_0x449a49(0x1a6)]({..._0x1f811c,'fileId':_0x20c520['id']});})),_0x20c520=await(0x0,ShowService_1['default'])(_0x20c520['id'],_0x49fdb3),_0x20c520;};exports[a427_0x58a053(0x1bd)]=CreateService;