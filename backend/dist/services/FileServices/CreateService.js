'use strict';function a459_0x5d4e(_0x151354,_0xa733ce){var _0x3670fb=a459_0x2d6c();return a459_0x5d4e=function(_0x3ffc00,_0x184899){_0x3ffc00=_0x3ffc00-0x9b;var _0x2d6cdc=_0x3670fb[_0x3ffc00];return _0x2d6cdc;},a459_0x5d4e(_0x151354,_0xa733ce);}var a459_0x433dad=a459_0x5d4e;(function(_0x4ea0bf,_0x180bf6){var _0x324770=a459_0x5d4e,_0x5161f3=_0x4ea0bf();while(!![]){try{var _0x143e55=-parseInt(_0x324770(0xa9))/0x1*(parseInt(_0x324770(0xb0))/0x2)+parseInt(_0x324770(0xbe))/0x3+parseInt(_0x324770(0xa7))/0x4+-parseInt(_0x324770(0xaa))/0x5+parseInt(_0x324770(0x9d))/0x6*(-parseInt(_0x324770(0xad))/0x7)+parseInt(_0x324770(0xc4))/0x8+parseInt(_0x324770(0xae))/0x9*(parseInt(_0x324770(0x9e))/0xa);if(_0x143e55===_0x180bf6)break;else _0x5161f3['push'](_0x5161f3['shift']());}catch(_0x5ca83e){_0x5161f3['push'](_0x5161f3['shift']());}}}(a459_0x2d6c,0x37595));var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x1a9a76,_0x2d7fd1,_0x1c9228,_0x2c7d7c){var _0x29e7f6=a459_0x5d4e;if(_0x2c7d7c===undefined)_0x2c7d7c=_0x1c9228;var _0x20aa59=Object['getOwnPropertyDescriptor'](_0x2d7fd1,_0x1c9228);(!_0x20aa59||(_0x29e7f6(0xb9)in _0x20aa59?!_0x2d7fd1[_0x29e7f6(0xa4)]:_0x20aa59[_0x29e7f6(0xb1)]||_0x20aa59[_0x29e7f6(0xb2)]))&&(_0x20aa59={'enumerable':!![],'get':function(){return _0x2d7fd1[_0x1c9228];}}),Object[_0x29e7f6(0xac)](_0x1a9a76,_0x2c7d7c,_0x20aa59);}:function(_0x33190b,_0x494ccd,_0x89d1b5,_0x2320f5){if(_0x2320f5===undefined)_0x2320f5=_0x89d1b5;_0x33190b[_0x2320f5]=_0x494ccd[_0x89d1b5];}),__setModuleDefault=this&&this[a459_0x433dad(0xbd)]||(Object[a459_0x433dad(0xbf)]?function(_0x5313a3,_0xb345de){var _0x1e346c=a459_0x433dad;Object['defineProperty'](_0x5313a3,_0x1e346c(0xa8),{'enumerable':!![],'value':_0xb345de});}:function(_0x5d033e,_0x6ef347){var _0x5d85c6=a459_0x433dad;_0x5d033e[_0x5d85c6(0xa8)]=_0x6ef347;}),__importStar=this&&this[a459_0x433dad(0xbb)]||(function(){var _0x1aef39=(function(){var _0x17f0c4=!![];return function(_0x565d99,_0x1913f4){var _0x1145bc=_0x17f0c4?function(){var _0x46e281=a459_0x5d4e;if(_0x1913f4){var _0x347a5a=_0x1913f4[_0x46e281(0xc0)](_0x565d99,arguments);return _0x1913f4=null,_0x347a5a;}}:function(){};return _0x17f0c4=![],_0x1145bc;};}()),_0x2f749b=_0x1aef39(this,function(){var _0x27b596=a459_0x5d4e;return _0x2f749b['toString']()[_0x27b596(0xc2)](_0x27b596(0x9f))[_0x27b596(0xb5)]()['constructor'](_0x2f749b)[_0x27b596(0xc2)](_0x27b596(0x9f));});_0x2f749b();var _0x451c98=function(_0x2d916f){var _0x22fcb7=a459_0x5d4e;return _0x451c98=Object[_0x22fcb7(0xa2)]||function(_0x4d4429){var _0x10b72b=_0x22fcb7,_0xbfeb33=[];for(var _0x2c2b10 in _0x4d4429)if(Object[_0x10b72b(0xa6)][_0x10b72b(0xa5)][_0x10b72b(0xa0)](_0x4d4429,_0x2c2b10))_0xbfeb33[_0xbfeb33[_0x10b72b(0x9c)]]=_0x2c2b10;return _0xbfeb33;},_0x451c98(_0x2d916f);};return function(_0x28b5be){var _0x37750a=a459_0x5d4e;if(_0x28b5be&&_0x28b5be['__esModule'])return _0x28b5be;var _0x1e88aa={};if(_0x28b5be!=null){for(var _0x2a05aa=_0x451c98(_0x28b5be),_0x5c8aa2=0x0;_0x5c8aa2<_0x2a05aa[_0x37750a(0x9c)];_0x5c8aa2++)if(_0x2a05aa[_0x5c8aa2]!=='default')__createBinding(_0x1e88aa,_0x28b5be,_0x2a05aa[_0x5c8aa2]);}return __setModuleDefault(_0x1e88aa,_0x28b5be),_0x1e88aa;};}()),__importDefault=this&&this[a459_0x433dad(0xb8)]||function(_0x3f371e){var _0x40b8bc=a459_0x433dad;return _0x3f371e&&_0x3f371e[_0x40b8bc(0xa4)]?_0x3f371e:{'default':_0x3f371e};};Object[a459_0x433dad(0xac)](exports,a459_0x433dad(0xa4),{'value':!![]});function a459_0x2d6c(){var _0x55c943=['./ShowService','message','toString','string','object','__importDefault','get','Check-unique-name','__importStar','../../models/Files','__setModuleDefault','697263VQgjaU','create','apply','ERR_RATING_NAME_ALREADY_EXISTS','search','findOne','1504240rqSXnT','../../models/FilesOptions','length','1945950dytqNb','575480PtfeSR','(((.+)+)+)+$','call','all','getOwnPropertyNames','yup','__esModule','hasOwnProperty','prototype','942364lEdhfs','default','23PIdQsE','989730CkgweJ','map','defineProperty','7OVqMBX','81LLywjJ','test','36956NcuQBt','writable','configurable'];a459_0x2d6c=function(){return _0x55c943;};return a459_0x2d6c();}const Yup=__importStar(require(a459_0x433dad(0xa3))),AppError_1=__importDefault(require('../../errors/AppError')),Files_1=__importDefault(require(a459_0x433dad(0xbc))),FilesOptions_1=__importDefault(require(a459_0x433dad(0x9b))),ShowService_1=__importDefault(require(a459_0x433dad(0xb3))),CreateService=async({name:_0x3fe94d,message:_0xa0ed41,companyId:_0x16673f,options:_0x3e0013})=>{var _0x189316=a459_0x433dad;const _0x5683cc=Yup[_0x189316(0xb7)]()['shape']({'name':Yup[_0x189316(0xb6)]()['required']()['min'](0x3)[_0x189316(0xaf)](_0x189316(0xba),_0x189316(0xc1),async _0x1ecc00=>{var _0x51e95e=_0x189316;if(_0x1ecc00){const _0x447130=await Files_1[_0x51e95e(0xa8)][_0x51e95e(0xc3)]({'where':{'name':_0x1ecc00,'companyId':_0x16673f}});return!_0x447130;}return![];})});try{await _0x5683cc['validate']({'name':_0x3fe94d});}catch(_0x44eeb4){throw new AppError_1[(_0x189316(0xa8))](_0x44eeb4[_0x189316(0xb4)]);}let _0x527ab4=await Files_1['default']['create']({'name':_0x3fe94d,'message':_0xa0ed41,'companyId':_0x16673f});return _0x3e0013&&_0x3e0013['length']>0x0&&await Promise[_0x189316(0xa1)](_0x3e0013[_0x189316(0xab)](async _0x59afa9=>{await FilesOptions_1['default']['upsert']({..._0x59afa9,'fileId':_0x527ab4['id']});})),_0x527ab4=await(0x0,ShowService_1[_0x189316(0xa8)])(_0x527ab4['id'],_0x16673f),_0x527ab4;};exports[a459_0x433dad(0xa8)]=CreateService;