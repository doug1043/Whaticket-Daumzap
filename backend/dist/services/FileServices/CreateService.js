'use strict';var a456_0x5f5261=a456_0xd8d3;(function(_0x5522f4,_0x1a0f32){var _0x1dd482=a456_0xd8d3,_0x5108dc=_0x5522f4();while(!![]){try{var _0x3b5cfc=parseInt(_0x1dd482(0x195))/0x1*(-parseInt(_0x1dd482(0x184))/0x2)+parseInt(_0x1dd482(0x186))/0x3+parseInt(_0x1dd482(0x19b))/0x4+-parseInt(_0x1dd482(0x182))/0x5+-parseInt(_0x1dd482(0x17f))/0x6+-parseInt(_0x1dd482(0x199))/0x7+parseInt(_0x1dd482(0x18e))/0x8;if(_0x3b5cfc===_0x1a0f32)break;else _0x5108dc['push'](_0x5108dc['shift']());}catch(_0x37d96e){_0x5108dc['push'](_0x5108dc['shift']());}}}(a456_0x4c75,0x98f31));var __createBinding=this&&this[a456_0x5f5261(0x197)]||(Object[a456_0x5f5261(0x188)]?function(_0x1060ff,_0x30a649,_0x293989,_0x14cd88){var _0x4c9e37=a456_0x5f5261;if(_0x14cd88===undefined)_0x14cd88=_0x293989;var _0x4e34e9=Object[_0x4c9e37(0x190)](_0x30a649,_0x293989);(!_0x4e34e9||('get'in _0x4e34e9?!_0x30a649[_0x4c9e37(0x183)]:_0x4e34e9[_0x4c9e37(0x18b)]||_0x4e34e9[_0x4c9e37(0x194)]))&&(_0x4e34e9={'enumerable':!![],'get':function(){return _0x30a649[_0x293989];}}),Object[_0x4c9e37(0x17e)](_0x1060ff,_0x14cd88,_0x4e34e9);}:function(_0x3b9582,_0x203e97,_0x4f3b97,_0x2a0600){if(_0x2a0600===undefined)_0x2a0600=_0x4f3b97;_0x3b9582[_0x2a0600]=_0x203e97[_0x4f3b97];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a456_0x5f5261(0x188)]?function(_0x49e598,_0x2042d1){var _0x42c4b2=a456_0x5f5261;Object['defineProperty'](_0x49e598,_0x42c4b2(0x198),{'enumerable':!![],'value':_0x2042d1});}:function(_0x5b333e,_0x4f269c){var _0x2c9c06=a456_0x5f5261;_0x5b333e[_0x2c9c06(0x198)]=_0x4f269c;}),__importStar=this&&this[a456_0x5f5261(0x193)]||(function(){var _0x3948a4=(function(){var _0xa05911=!![];return function(_0x427f54,_0x29fa8d){var _0x486973=_0xa05911?function(){if(_0x29fa8d){var _0xd98c78=_0x29fa8d['apply'](_0x427f54,arguments);return _0x29fa8d=null,_0xd98c78;}}:function(){};return _0xa05911=![],_0x486973;};}()),_0x2ce1de=_0x3948a4(this,function(){var _0xca18c1=a456_0xd8d3;return _0x2ce1de['toString']()[_0xca18c1(0x18d)](_0xca18c1(0x19f))[_0xca18c1(0x19e)]()[_0xca18c1(0x180)](_0x2ce1de)[_0xca18c1(0x18d)](_0xca18c1(0x19f));});_0x2ce1de();var _0x34e180=function(_0x2920f7){var _0x4b1c10=a456_0xd8d3;return _0x34e180=Object[_0x4b1c10(0x18a)]||function(_0xdf56f1){var _0x2eef35=_0x4b1c10,_0x347b54=[];for(var _0x372100 in _0xdf56f1)if(Object[_0x2eef35(0x19d)][_0x2eef35(0x192)][_0x2eef35(0x181)](_0xdf56f1,_0x372100))_0x347b54[_0x347b54[_0x2eef35(0x191)]]=_0x372100;return _0x347b54;},_0x34e180(_0x2920f7);};return function(_0x42ca54){var _0x3a4df9=a456_0xd8d3;if(_0x42ca54&&_0x42ca54[_0x3a4df9(0x183)])return _0x42ca54;var _0x49db17={};if(_0x42ca54!=null){for(var _0x1393b0=_0x34e180(_0x42ca54),_0x14ef87=0x0;_0x14ef87<_0x1393b0['length'];_0x14ef87++)if(_0x1393b0[_0x14ef87]!==_0x3a4df9(0x198))__createBinding(_0x49db17,_0x42ca54,_0x1393b0[_0x14ef87]);}return __setModuleDefault(_0x49db17,_0x42ca54),_0x49db17;};}()),__importDefault=this&&this['__importDefault']||function(_0x4dd746){var _0x3c7c37=a456_0x5f5261;return _0x4dd746&&_0x4dd746[_0x3c7c37(0x183)]?_0x4dd746:{'default':_0x4dd746};};Object['defineProperty'](exports,a456_0x5f5261(0x183),{'value':!![]});function a456_0xd8d3(_0x1baccc,_0xc79685){var _0x5aa55b=a456_0x4c75();return a456_0xd8d3=function(_0x165243,_0x93072d){_0x165243=_0x165243-0x17e;var _0x4c7510=_0x5aa55b[_0x165243];return _0x4c7510;},a456_0xd8d3(_0x1baccc,_0xc79685);}function a456_0x4c75(){var _0x10b9e1=['search','12962232Zrpdjf','../../models/Files','getOwnPropertyDescriptor','length','hasOwnProperty','__importStar','configurable','31jPGjFY','required','__createBinding','default','6306258acNcea','min','3185552tGsNAu','message','prototype','toString','(((.+)+)+)+$','Check-unique-name','../../errors/AppError','defineProperty','6213864dtwEJX','constructor','call','638435QdSTbl','__esModule','11058mnlAtU','findOne','1336314rcfULS','object','create','test','getOwnPropertyNames','writable','all'];a456_0x4c75=function(){return _0x10b9e1;};return a456_0x4c75();}const Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a456_0x5f5261(0x1a1))),Files_1=__importDefault(require(a456_0x5f5261(0x18f))),FilesOptions_1=__importDefault(require('../../models/FilesOptions')),ShowService_1=__importDefault(require('./ShowService')),CreateService=async({name:_0x1e53e0,message:_0x34b6c0,companyId:_0x493794,options:_0x23885c})=>{var _0x5c802d=a456_0x5f5261;const _0x2f0ac0=Yup[_0x5c802d(0x187)]()['shape']({'name':Yup['string']()[_0x5c802d(0x196)]()[_0x5c802d(0x19a)](0x3)[_0x5c802d(0x189)](_0x5c802d(0x1a0),'ERR_RATING_NAME_ALREADY_EXISTS',async _0x528332=>{var _0x434c13=_0x5c802d;if(_0x528332){const _0x348d01=await Files_1[_0x434c13(0x198)][_0x434c13(0x185)]({'where':{'name':_0x528332,'companyId':_0x493794}});return!_0x348d01;}return![];})});try{await _0x2f0ac0['validate']({'name':_0x1e53e0});}catch(_0x389a83){throw new AppError_1[(_0x5c802d(0x198))](_0x389a83[_0x5c802d(0x19c)]);}let _0x155de5=await Files_1[_0x5c802d(0x198)][_0x5c802d(0x188)]({'name':_0x1e53e0,'message':_0x34b6c0,'companyId':_0x493794});return _0x23885c&&_0x23885c[_0x5c802d(0x191)]>0x0&&await Promise[_0x5c802d(0x18c)](_0x23885c['map'](async _0xae625a=>{var _0x7e5bd9=_0x5c802d;await FilesOptions_1[_0x7e5bd9(0x198)]['upsert']({..._0xae625a,'fileId':_0x155de5['id']});})),_0x155de5=await(0x0,ShowService_1[_0x5c802d(0x198)])(_0x155de5['id'],_0x493794),_0x155de5;};exports[a456_0x5f5261(0x198)]=CreateService;