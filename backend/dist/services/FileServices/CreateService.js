'use strict';var a454_0x102775=a454_0x68cc;function a454_0x5524(){var _0x2ebab7=['call','./ShowService','4bufuUR','14976863EvthZX','(((.+)+)+)+$','default','writable','apply','288KfcFOn','9WEKUca','string','required','__esModule','4729990fBGCOJ','1yrdwYI','search','object','prototype','2318005SIeYiY','create','toString','get','hasOwnProperty','Check-unique-name','789846yZjJDg','map','defineProperty','1010728jqrLos','__setModuleDefault','../../models/Files','yup','721qJGjbV','ERR_RATING_NAME_ALREADY_EXISTS','upsert','__importStar','findOne','message','length','5641232QsVLTI'];a454_0x5524=function(){return _0x2ebab7;};return a454_0x5524();}(function(_0x22a55d,_0x3fc47e){var _0x460d5a=a454_0x68cc,_0xd24794=_0x22a55d();while(!![]){try{var _0x492fab=parseInt(_0x460d5a(0x1fc))/0x1*(-parseInt(_0x460d5a(0x209))/0x2)+parseInt(_0x460d5a(0x206))/0x3+-parseInt(_0x460d5a(0x1f0))/0x4*(parseInt(_0x460d5a(0x200))/0x5)+parseInt(_0x460d5a(0x1f6))/0x6*(parseInt(_0x460d5a(0x20d))/0x7)+-parseInt(_0x460d5a(0x1ed))/0x8+-parseInt(_0x460d5a(0x1f7))/0x9*(-parseInt(_0x460d5a(0x1fb))/0xa)+parseInt(_0x460d5a(0x1f1))/0xb;if(_0x492fab===_0x3fc47e)break;else _0xd24794['push'](_0xd24794['shift']());}catch(_0x4d8105){_0xd24794['push'](_0xd24794['shift']());}}}(a454_0x5524,0x68a5f));function a454_0x68cc(_0x26b708,_0x38ce41){var _0x207103=a454_0x5524();return a454_0x68cc=function(_0x3dd640,_0x25bb8f){_0x3dd640=_0x3dd640-0x1e9;var _0x552403=_0x207103[_0x3dd640];return _0x552403;},a454_0x68cc(_0x26b708,_0x38ce41);}var __createBinding=this&&this['__createBinding']||(Object[a454_0x102775(0x201)]?function(_0x245a12,_0x5be997,_0x21afd3,_0x3a1cfc){var _0x3baef3=a454_0x102775;if(_0x3a1cfc===undefined)_0x3a1cfc=_0x21afd3;var _0x3c602a=Object['getOwnPropertyDescriptor'](_0x5be997,_0x21afd3);(!_0x3c602a||(_0x3baef3(0x203)in _0x3c602a?!_0x5be997[_0x3baef3(0x1fa)]:_0x3c602a[_0x3baef3(0x1f4)]||_0x3c602a['configurable']))&&(_0x3c602a={'enumerable':!![],'get':function(){return _0x5be997[_0x21afd3];}}),Object[_0x3baef3(0x208)](_0x245a12,_0x3a1cfc,_0x3c602a);}:function(_0x26c460,_0x1d223c,_0x1ba122,_0x51ae5d){if(_0x51ae5d===undefined)_0x51ae5d=_0x1ba122;_0x26c460[_0x51ae5d]=_0x1d223c[_0x1ba122];}),__setModuleDefault=this&&this[a454_0x102775(0x20a)]||(Object['create']?function(_0x317980,_0x47a17f){Object['defineProperty'](_0x317980,'default',{'enumerable':!![],'value':_0x47a17f});}:function(_0x5d6e1d,_0x768229){var _0x493c7c=a454_0x102775;_0x5d6e1d[_0x493c7c(0x1f3)]=_0x768229;}),__importStar=this&&this[a454_0x102775(0x1e9)]||(function(){var _0x1120c1=(function(){var _0x5e3a13=!![];return function(_0x1518bf,_0x4434e9){var _0x2680ab=_0x5e3a13?function(){var _0x433a97=a454_0x68cc;if(_0x4434e9){var _0x13c0e5=_0x4434e9[_0x433a97(0x1f5)](_0x1518bf,arguments);return _0x4434e9=null,_0x13c0e5;}}:function(){};return _0x5e3a13=![],_0x2680ab;};}()),_0xa64070=_0x1120c1(this,function(){var _0x5696fd=a454_0x68cc;return _0xa64070['toString']()[_0x5696fd(0x1fd)](_0x5696fd(0x1f2))[_0x5696fd(0x202)]()['constructor'](_0xa64070)[_0x5696fd(0x1fd)](_0x5696fd(0x1f2));});_0xa64070();var _0xd42c85=function(_0x384f95){return _0xd42c85=Object['getOwnPropertyNames']||function(_0x21cee5){var _0x25e1ee=a454_0x68cc,_0x42d9f5=[];for(var _0x488d79 in _0x21cee5)if(Object[_0x25e1ee(0x1ff)][_0x25e1ee(0x204)][_0x25e1ee(0x1ee)](_0x21cee5,_0x488d79))_0x42d9f5[_0x42d9f5['length']]=_0x488d79;return _0x42d9f5;},_0xd42c85(_0x384f95);};return function(_0x141cbd){var _0x5125a0=a454_0x68cc;if(_0x141cbd&&_0x141cbd[_0x5125a0(0x1fa)])return _0x141cbd;var _0x55419e={};if(_0x141cbd!=null){for(var _0x47419f=_0xd42c85(_0x141cbd),_0x5df16f=0x0;_0x5df16f<_0x47419f[_0x5125a0(0x1ec)];_0x5df16f++)if(_0x47419f[_0x5df16f]!==_0x5125a0(0x1f3))__createBinding(_0x55419e,_0x141cbd,_0x47419f[_0x5df16f]);}return __setModuleDefault(_0x55419e,_0x141cbd),_0x55419e;};}()),__importDefault=this&&this['__importDefault']||function(_0x2ab48e){return _0x2ab48e&&_0x2ab48e['__esModule']?_0x2ab48e:{'default':_0x2ab48e};};Object[a454_0x102775(0x208)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a454_0x102775(0x20c))),AppError_1=__importDefault(require('../../errors/AppError')),Files_1=__importDefault(require(a454_0x102775(0x20b))),FilesOptions_1=__importDefault(require('../../models/FilesOptions')),ShowService_1=__importDefault(require(a454_0x102775(0x1ef))),CreateService=async({name:_0x3b9f49,message:_0x337e4e,companyId:_0x4b393c,options:_0x51e362})=>{var _0xc861b9=a454_0x102775;const _0x3a9041=Yup[_0xc861b9(0x1fe)]()['shape']({'name':Yup[_0xc861b9(0x1f8)]()[_0xc861b9(0x1f9)]()['min'](0x3)['test'](_0xc861b9(0x205),_0xc861b9(0x20e),async _0x553f84=>{var _0x3033ed=_0xc861b9;if(_0x553f84){const _0x31566c=await Files_1[_0x3033ed(0x1f3)][_0x3033ed(0x1ea)]({'where':{'name':_0x553f84,'companyId':_0x4b393c}});return!_0x31566c;}return![];})});try{await _0x3a9041['validate']({'name':_0x3b9f49});}catch(_0x3f29e9){throw new AppError_1['default'](_0x3f29e9[_0xc861b9(0x1eb)]);}let _0x656ce9=await Files_1[_0xc861b9(0x1f3)][_0xc861b9(0x201)]({'name':_0x3b9f49,'message':_0x337e4e,'companyId':_0x4b393c});return _0x51e362&&_0x51e362['length']>0x0&&await Promise['all'](_0x51e362[_0xc861b9(0x207)](async _0x2444d1=>{var _0x2826ac=_0xc861b9;await FilesOptions_1[_0x2826ac(0x1f3)][_0x2826ac(0x20f)]({..._0x2444d1,'fileId':_0x656ce9['id']});})),_0x656ce9=await(0x0,ShowService_1[_0xc861b9(0x1f3)])(_0x656ce9['id'],_0x4b393c),_0x656ce9;};exports['default']=CreateService;