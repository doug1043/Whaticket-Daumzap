const a424_0x32eb32=a424_0x2544;function a424_0x3f79(){const _0x456e4c=['__setModuleDefault','62840JpFLlZ','__createBinding','__importStar','map','call','findOne','20IhDgUj','prototype','../../models/FilesOptions','validate','(((.+)+)+)+$','__importDefault','hasOwnProperty','45fDNdKB','required','15789630eAYrDe','apply','configurable','string','785344CIqumN','__esModule','min','create','default','9aLetSa','481628HZaJNt','toString','2969994hyIzEw','defineProperty','yup','test','../../errors/AppError','constructor','upsert','809384ngBGrb','search','get','2118550rgTJwS','./ShowService','shape','all'];a424_0x3f79=function(){return _0x456e4c;};return a424_0x3f79();}(function(_0x2010ef,_0x6bcb91){const _0x8f16c3=a424_0x2544,_0x3b62c1=_0x2010ef();while(!![]){try{const _0x58e78d=-parseInt(_0x8f16c3(0x185))/0x1+-parseInt(_0x8f16c3(0x196))/0x2*(parseInt(_0x8f16c3(0x184))/0x3)+-parseInt(_0x8f16c3(0x17f))/0x4*(parseInt(_0x8f16c3(0x19c))/0x5)+-parseInt(_0x8f16c3(0x187))/0x6+parseInt(_0x8f16c3(0x191))/0x7+-parseInt(_0x8f16c3(0x18e))/0x8*(-parseInt(_0x8f16c3(0x1a3))/0x9)+parseInt(_0x8f16c3(0x1a5))/0xa;if(_0x58e78d===_0x6bcb91)break;else _0x3b62c1['push'](_0x3b62c1['shift']());}catch(_0x2a28e0){_0x3b62c1['push'](_0x3b62c1['shift']());}}}(a424_0x3f79,0x81b2f));const a424_0x28abff=(function(){let _0x595061=!![];return function(_0x2db7a8,_0x2408ba){const _0x5493b7=_0x595061?function(){const _0x24d3f1=a424_0x2544;if(_0x2408ba){const _0x2687ac=_0x2408ba[_0x24d3f1(0x17c)](_0x2db7a8,arguments);return _0x2408ba=null,_0x2687ac;}}:function(){};return _0x595061=![],_0x5493b7;};}()),a424_0x483b58=a424_0x28abff(this,function(){const _0x28a157=a424_0x2544;return a424_0x483b58[_0x28a157(0x186)]()['search'](_0x28a157(0x1a0))[_0x28a157(0x186)]()[_0x28a157(0x18c)](a424_0x483b58)[_0x28a157(0x18f)](_0x28a157(0x1a0));});a424_0x483b58();'use strict';var __createBinding=this&&this[a424_0x32eb32(0x197)]||(Object['create']?function(_0x2af352,_0x1e2713,_0x363cbe,_0x9603b0){const _0x2e37c0=a424_0x32eb32;if(_0x9603b0===undefined)_0x9603b0=_0x363cbe;var _0x3a7f00=Object['getOwnPropertyDescriptor'](_0x1e2713,_0x363cbe);(!_0x3a7f00||(_0x2e37c0(0x190)in _0x3a7f00?!_0x1e2713[_0x2e37c0(0x180)]:_0x3a7f00['writable']||_0x3a7f00[_0x2e37c0(0x17d)]))&&(_0x3a7f00={'enumerable':!![],'get':function(){return _0x1e2713[_0x363cbe];}}),Object[_0x2e37c0(0x188)](_0x2af352,_0x9603b0,_0x3a7f00);}:function(_0x285ade,_0x460488,_0x1ebf96,_0xe2a84f){if(_0xe2a84f===undefined)_0xe2a84f=_0x1ebf96;_0x285ade[_0xe2a84f]=_0x460488[_0x1ebf96];}),__setModuleDefault=this&&this[a424_0x32eb32(0x195)]||(Object[a424_0x32eb32(0x182)]?function(_0x3433af,_0xb02b52){const _0x168200=a424_0x32eb32;Object['defineProperty'](_0x3433af,_0x168200(0x183),{'enumerable':!![],'value':_0xb02b52});}:function(_0x221aa9,_0x318865){const _0x32533b=a424_0x32eb32;_0x221aa9[_0x32533b(0x183)]=_0x318865;}),__importStar=this&&this[a424_0x32eb32(0x198)]||function(_0x3ef574){const _0x4edcc0=a424_0x32eb32;if(_0x3ef574&&_0x3ef574[_0x4edcc0(0x180)])return _0x3ef574;var _0x33a99d={};if(_0x3ef574!=null){for(var _0x16c49f in _0x3ef574)if(_0x16c49f!=='default'&&Object[_0x4edcc0(0x19d)][_0x4edcc0(0x1a2)][_0x4edcc0(0x19a)](_0x3ef574,_0x16c49f))__createBinding(_0x33a99d,_0x3ef574,_0x16c49f);}return __setModuleDefault(_0x33a99d,_0x3ef574),_0x33a99d;},__importDefault=this&&this[a424_0x32eb32(0x1a1)]||function(_0x53e4ef){const _0x273a7c=a424_0x32eb32;return _0x53e4ef&&_0x53e4ef[_0x273a7c(0x180)]?_0x53e4ef:{'default':_0x53e4ef};};function a424_0x2544(_0x5b9067,_0x4f4092){const _0x54cbaf=a424_0x3f79();return a424_0x2544=function(_0x483b58,_0x28abff){_0x483b58=_0x483b58-0x17c;let _0x3f7967=_0x54cbaf[_0x483b58];return _0x3f7967;},a424_0x2544(_0x5b9067,_0x4f4092);}Object[a424_0x32eb32(0x188)](exports,a424_0x32eb32(0x180),{'value':!![]});const Yup=__importStar(require(a424_0x32eb32(0x189))),AppError_1=__importDefault(require(a424_0x32eb32(0x18b))),Files_1=__importDefault(require('../../models/Files')),FilesOptions_1=__importDefault(require(a424_0x32eb32(0x19e))),ShowService_1=__importDefault(require(a424_0x32eb32(0x192))),CreateService=async({name:_0xd2ad93,message:_0x1ec6ff,companyId:_0x2e592a,options:_0xcafb10})=>{const _0x5f17ed=a424_0x32eb32,_0x394200=Yup['object']()[_0x5f17ed(0x193)]({'name':Yup[_0x5f17ed(0x17e)]()[_0x5f17ed(0x1a4)]()[_0x5f17ed(0x181)](0x3)[_0x5f17ed(0x18a)]('Check-unique-name','ERR_RATING_NAME_ALREADY_EXISTS',async _0x1561d1=>{const _0x270330=_0x5f17ed;if(_0x1561d1){const _0xad3713=await Files_1[_0x270330(0x183)][_0x270330(0x19b)]({'where':{'name':_0x1561d1,'companyId':_0x2e592a}});return!_0xad3713;}return![];})});try{await _0x394200[_0x5f17ed(0x19f)]({'name':_0xd2ad93});}catch(_0x44b81a){throw new AppError_1[(_0x5f17ed(0x183))](_0x44b81a['message']);}let _0x5d3379=await Files_1['default'][_0x5f17ed(0x182)]({'name':_0xd2ad93,'message':_0x1ec6ff,'companyId':_0x2e592a});return _0xcafb10&&_0xcafb10['length']>0x0&&await Promise[_0x5f17ed(0x194)](_0xcafb10[_0x5f17ed(0x199)](async _0x27f690=>{const _0x7b1557=_0x5f17ed;await FilesOptions_1[_0x7b1557(0x183)][_0x7b1557(0x18d)]({..._0x27f690,'fileId':_0x5d3379['id']});})),_0x5d3379=await(0x0,ShowService_1[_0x5f17ed(0x183)])(_0x5d3379['id'],_0x2e592a),_0x5d3379;};exports['default']=CreateService;