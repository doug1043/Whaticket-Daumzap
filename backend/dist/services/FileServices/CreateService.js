'use strict';var a455_0x51d6e7=a455_0x418a;(function(_0x3c8889,_0x3a7e35){var _0x3b2389=a455_0x418a,_0x384526=_0x3c8889();while(!![]){try{var _0x3565f2=parseInt(_0x3b2389(0xff))/0x1+-parseInt(_0x3b2389(0xfe))/0x2*(parseInt(_0x3b2389(0x108))/0x3)+-parseInt(_0x3b2389(0x100))/0x4+parseInt(_0x3b2389(0x103))/0x5*(parseInt(_0x3b2389(0x10d))/0x6)+-parseInt(_0x3b2389(0xfd))/0x7+parseInt(_0x3b2389(0x10c))/0x8+-parseInt(_0x3b2389(0xf3))/0x9*(parseInt(_0x3b2389(0x10f))/0xa);if(_0x3565f2===_0x3a7e35)break;else _0x384526['push'](_0x384526['shift']());}catch(_0x2f7d54){_0x384526['push'](_0x384526['shift']());}}}(a455_0x102a,0xb9572));var __createBinding=this&&this[a455_0x51d6e7(0x112)]||(Object[a455_0x51d6e7(0x110)]?function(_0x2fef96,_0x837993,_0x12b631,_0x521629){var _0x290ef6=a455_0x51d6e7;if(_0x521629===undefined)_0x521629=_0x12b631;var _0x47f222=Object[_0x290ef6(0x107)](_0x837993,_0x12b631);(!_0x47f222||('get'in _0x47f222?!_0x837993[_0x290ef6(0xfa)]:_0x47f222['writable']||_0x47f222[_0x290ef6(0x102)]))&&(_0x47f222={'enumerable':!![],'get':function(){return _0x837993[_0x12b631];}}),Object[_0x290ef6(0xf6)](_0x2fef96,_0x521629,_0x47f222);}:function(_0x4b7ce4,_0x5b0c15,_0x4c28c6,_0x251e4b){if(_0x251e4b===undefined)_0x251e4b=_0x4c28c6;_0x4b7ce4[_0x251e4b]=_0x5b0c15[_0x4c28c6];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a455_0x51d6e7(0x110)]?function(_0x316020,_0x3f50f5){var _0x38ca7d=a455_0x51d6e7;Object['defineProperty'](_0x316020,_0x38ca7d(0xf4),{'enumerable':!![],'value':_0x3f50f5});}:function(_0x56d4c9,_0x497b21){var _0x49f5d0=a455_0x51d6e7;_0x56d4c9[_0x49f5d0(0xf4)]=_0x497b21;}),__importStar=this&&this[a455_0x51d6e7(0x113)]||(function(){var _0x9e0f78=(function(){var _0x44de98=!![];return function(_0x43de13,_0xb3d25c){var _0x13530f=_0x44de98?function(){var _0x3b10c9=a455_0x418a;if(_0xb3d25c){var _0x364789=_0xb3d25c[_0x3b10c9(0xfc)](_0x43de13,arguments);return _0xb3d25c=null,_0x364789;}}:function(){};return _0x44de98=![],_0x13530f;};}()),_0x36433=_0x9e0f78(this,function(){var _0x3c3039=a455_0x418a;return _0x36433[_0x3c3039(0xf5)]()[_0x3c3039(0x109)](_0x3c3039(0x111))['toString']()['constructor'](_0x36433)[_0x3c3039(0x109)]('(((.+)+)+)+$');});_0x36433();var _0x4feba9=function(_0x4c6197){return _0x4feba9=Object['getOwnPropertyNames']||function(_0x295a13){var _0x19d5d7=a455_0x418a,_0x1eb775=[];for(var _0x19618a in _0x295a13)if(Object[_0x19d5d7(0x105)]['hasOwnProperty'][_0x19d5d7(0x104)](_0x295a13,_0x19618a))_0x1eb775[_0x1eb775['length']]=_0x19618a;return _0x1eb775;},_0x4feba9(_0x4c6197);};return function(_0x504e33){var _0x1acdef=a455_0x418a;if(_0x504e33&&_0x504e33['__esModule'])return _0x504e33;var _0x192b18={};if(_0x504e33!=null){for(var _0x6b1ee5=_0x4feba9(_0x504e33),_0x42e9ae=0x0;_0x42e9ae<_0x6b1ee5[_0x1acdef(0x10a)];_0x42e9ae++)if(_0x6b1ee5[_0x42e9ae]!==_0x1acdef(0xf4))__createBinding(_0x192b18,_0x504e33,_0x6b1ee5[_0x42e9ae]);}return __setModuleDefault(_0x192b18,_0x504e33),_0x192b18;};}()),__importDefault=this&&this['__importDefault']||function(_0x5918eb){var _0x531a58=a455_0x51d6e7;return _0x5918eb&&_0x5918eb[_0x531a58(0xfa)]?_0x5918eb:{'default':_0x5918eb};};Object['defineProperty'](exports,a455_0x51d6e7(0xfa),{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require('../../errors/AppError')),Files_1=__importDefault(require(a455_0x51d6e7(0xfb))),FilesOptions_1=__importDefault(require(a455_0x51d6e7(0xf2))),ShowService_1=__importDefault(require(a455_0x51d6e7(0x114))),CreateService=async({name:_0x3e0db0,message:_0x559001,companyId:_0x4496d6,options:_0x144caf})=>{var _0x1a65a1=a455_0x51d6e7;const _0x4eceee=Yup['object']()[_0x1a65a1(0x10b)]({'name':Yup[_0x1a65a1(0x106)]()['required']()['min'](0x3)['test'](_0x1a65a1(0x10e),_0x1a65a1(0xf8),async _0x413260=>{var _0x7ec246=_0x1a65a1;if(_0x413260){const _0x5ebaba=await Files_1[_0x7ec246(0xf4)][_0x7ec246(0x101)]({'where':{'name':_0x413260,'companyId':_0x4496d6}});return!_0x5ebaba;}return![];})});try{await _0x4eceee['validate']({'name':_0x3e0db0});}catch(_0x210472){throw new AppError_1[(_0x1a65a1(0xf4))](_0x210472[_0x1a65a1(0xf1)]);}let _0x3b6eb0=await Files_1['default']['create']({'name':_0x3e0db0,'message':_0x559001,'companyId':_0x4496d6});return _0x144caf&&_0x144caf['length']>0x0&&await Promise['all'](_0x144caf[_0x1a65a1(0xf9)](async _0x31a9c1=>{var _0xc7e151=_0x1a65a1;await FilesOptions_1['default'][_0xc7e151(0xf7)]({..._0x31a9c1,'fileId':_0x3b6eb0['id']});})),_0x3b6eb0=await(0x0,ShowService_1[_0x1a65a1(0xf4)])(_0x3b6eb0['id'],_0x4496d6),_0x3b6eb0;};exports['default']=CreateService;function a455_0x418a(_0x5f2f27,_0x2f0423){var _0x4063cb=a455_0x102a();return a455_0x418a=function(_0x34ddd1,_0x46b2a9){_0x34ddd1=_0x34ddd1-0xf1;var _0x102aa1=_0x4063cb[_0x34ddd1];return _0x102aa1;},a455_0x418a(_0x5f2f27,_0x2f0423);}function a455_0x102a(){var _0x2981dd=['prototype','string','getOwnPropertyDescriptor','63esCmOb','search','length','shape','8071424MKsmLy','42fkfYBH','Check-unique-name','6810sVBptX','create','(((.+)+)+)+$','__createBinding','__importStar','./ShowService','message','../../models/FilesOptions','3141SgNItD','default','toString','defineProperty','upsert','ERR_RATING_NAME_ALREADY_EXISTS','map','__esModule','../../models/Files','apply','5093452ppEWVw','40354VPpDYB','1215823ruSdFU','2854832RcFoOC','findOne','configurable','455095vwbmIe','call'];a455_0x102a=function(){return _0x2981dd;};return a455_0x102a();}