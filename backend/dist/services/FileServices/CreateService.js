'use strict';function a541_0x1148(){var _0x240054=['../../errors/AppError','384575TduodK','prototype','required','1590615kGNBlC','yup','ERR_RATING_NAME_ALREADY_EXISTS','get','search','6zRzgzZ','configurable','validate','20VlQnhF','getOwnPropertyNames','347192GdwMWc','1291972rvYAVy','defineProperty','352713nRpUfa','all','length','string','upsert','create','485816eEUZKB','__setModuleDefault','findOne','3RwLJIY','apply','getOwnPropertyDescriptor','__importDefault','default','test','3228269AHcYLT','__createBinding','toString','__esModule','35ZjhCWq','constructor','__importStar','(((.+)+)+)+$'];a541_0x1148=function(){return _0x240054;};return a541_0x1148();}var a541_0x35b2d4=a541_0x1f83;(function(_0x197137,_0x227bcd){var _0x49a746=a541_0x1f83,_0xdd6dbd=_0x197137();while(!![]){try{var _0x43f321=-parseInt(_0x49a746(0x1f0))/0x1+parseInt(_0x49a746(0x1f6))/0x2*(parseInt(_0x49a746(0x1f9))/0x3)+-parseInt(_0x49a746(0x1ee))/0x4+parseInt(_0x49a746(0x1e0))/0x5*(parseInt(_0x49a746(0x1e8))/0x6)+parseInt(_0x49a746(0x1db))/0x7*(-parseInt(_0x49a746(0x1ed))/0x8)+parseInt(_0x49a746(0x1e3))/0x9+-parseInt(_0x49a746(0x1eb))/0xa*(-parseInt(_0x49a746(0x1d7))/0xb);if(_0x43f321===_0x227bcd)break;else _0xdd6dbd['push'](_0xdd6dbd['shift']());}catch(_0xa1b8f){_0xdd6dbd['push'](_0xdd6dbd['shift']());}}}(a541_0x1148,0x2e95f));function a541_0x1f83(_0xf3206e,_0x406a61){var _0x547894=a541_0x1148();return a541_0x1f83=function(_0x323b22,_0x4ff110){_0x323b22=_0x323b22-0x1d7;var _0x11488d=_0x547894[_0x323b22];return _0x11488d;},a541_0x1f83(_0xf3206e,_0x406a61);}var __createBinding=this&&this[a541_0x35b2d4(0x1d8)]||(Object[a541_0x35b2d4(0x1f5)]?function(_0x325498,_0x145920,_0x140715,_0x34445b){var _0x1cb683=a541_0x35b2d4;if(_0x34445b===undefined)_0x34445b=_0x140715;var _0x3e5ff9=Object[_0x1cb683(0x1fb)](_0x145920,_0x140715);(!_0x3e5ff9||(_0x1cb683(0x1e6)in _0x3e5ff9?!_0x145920[_0x1cb683(0x1da)]:_0x3e5ff9['writable']||_0x3e5ff9[_0x1cb683(0x1e9)]))&&(_0x3e5ff9={'enumerable':!![],'get':function(){return _0x145920[_0x140715];}}),Object['defineProperty'](_0x325498,_0x34445b,_0x3e5ff9);}:function(_0x25da9d,_0x49e7a2,_0x538246,_0x27313d){if(_0x27313d===undefined)_0x27313d=_0x538246;_0x25da9d[_0x27313d]=_0x49e7a2[_0x538246];}),__setModuleDefault=this&&this[a541_0x35b2d4(0x1f7)]||(Object['create']?function(_0x4c389f,_0x3fd84e){var _0x557256=a541_0x35b2d4;Object[_0x557256(0x1ef)](_0x4c389f,'default',{'enumerable':!![],'value':_0x3fd84e});}:function(_0x3fb9e5,_0x2d3038){var _0x876526=a541_0x35b2d4;_0x3fb9e5[_0x876526(0x1fd)]=_0x2d3038;}),__importStar=this&&this[a541_0x35b2d4(0x1dd)]||(function(){var _0x3d278e=(function(){var _0x2c015d=!![];return function(_0x4e9ffa,_0x13ecd7){var _0x534a51=_0x2c015d?function(){var _0x539f0e=a541_0x1f83;if(_0x13ecd7){var _0xc252e7=_0x13ecd7[_0x539f0e(0x1fa)](_0x4e9ffa,arguments);return _0x13ecd7=null,_0xc252e7;}}:function(){};return _0x2c015d=![],_0x534a51;};}()),_0xfa11f8=_0x3d278e(this,function(){var _0x1c70eb=a541_0x1f83;return _0xfa11f8[_0x1c70eb(0x1d9)]()[_0x1c70eb(0x1e7)]('(((.+)+)+)+$')[_0x1c70eb(0x1d9)]()[_0x1c70eb(0x1dc)](_0xfa11f8)['search'](_0x1c70eb(0x1de));});_0xfa11f8();var _0x5a40a7=function(_0x22f298){var _0x40d771=a541_0x1f83;return _0x5a40a7=Object[_0x40d771(0x1ec)]||function(_0xb30be8){var _0x2ebc42=_0x40d771,_0x4949d1=[];for(var _0x3702fc in _0xb30be8)if(Object[_0x2ebc42(0x1e1)]['hasOwnProperty']['call'](_0xb30be8,_0x3702fc))_0x4949d1[_0x4949d1[_0x2ebc42(0x1f2)]]=_0x3702fc;return _0x4949d1;},_0x5a40a7(_0x22f298);};return function(_0x229324){var _0x1b619a=a541_0x1f83;if(_0x229324&&_0x229324[_0x1b619a(0x1da)])return _0x229324;var _0x5cf69f={};if(_0x229324!=null){for(var _0x3c7267=_0x5a40a7(_0x229324),_0x417cbb=0x0;_0x417cbb<_0x3c7267[_0x1b619a(0x1f2)];_0x417cbb++)if(_0x3c7267[_0x417cbb]!==_0x1b619a(0x1fd))__createBinding(_0x5cf69f,_0x229324,_0x3c7267[_0x417cbb]);}return __setModuleDefault(_0x5cf69f,_0x229324),_0x5cf69f;};}()),__importDefault=this&&this[a541_0x35b2d4(0x1fc)]||function(_0x100b9c){var _0x6fc941=a541_0x35b2d4;return _0x100b9c&&_0x100b9c[_0x6fc941(0x1da)]?_0x100b9c:{'default':_0x100b9c};};Object['defineProperty'](exports,a541_0x35b2d4(0x1da),{'value':!![]});const Yup=__importStar(require(a541_0x35b2d4(0x1e4))),AppError_1=__importDefault(require(a541_0x35b2d4(0x1df))),Files_1=__importDefault(require('../../models/Files')),FilesOptions_1=__importDefault(require('../../models/FilesOptions')),ShowService_1=__importDefault(require('./ShowService')),CreateService=async({name:_0x550aad,message:_0x5b4526,companyId:_0xcf6641,options:_0x428e05})=>{var _0xefc84d=a541_0x35b2d4;const _0x3fb0fb=Yup['object']()['shape']({'name':Yup[_0xefc84d(0x1f3)]()[_0xefc84d(0x1e2)]()['min'](0x3)[_0xefc84d(0x1fe)]('Check-unique-name',_0xefc84d(0x1e5),async _0x1ed568=>{var _0x257b9c=_0xefc84d;if(_0x1ed568){const _0x3a1c3b=await Files_1['default'][_0x257b9c(0x1f8)]({'where':{'name':_0x1ed568,'companyId':_0xcf6641}});return!_0x3a1c3b;}return![];})});try{await _0x3fb0fb[_0xefc84d(0x1ea)]({'name':_0x550aad});}catch(_0x1343b4){throw new AppError_1[(_0xefc84d(0x1fd))](_0x1343b4['message']);}let _0x14242a=await Files_1['default']['create']({'name':_0x550aad,'message':_0x5b4526,'companyId':_0xcf6641});return _0x428e05&&_0x428e05[_0xefc84d(0x1f2)]>0x0&&await Promise[_0xefc84d(0x1f1)](_0x428e05['map'](async _0x35bcf8=>{var _0x13a849=_0xefc84d;await FilesOptions_1['default'][_0x13a849(0x1f4)]({..._0x35bcf8,'fileId':_0x14242a['id']});})),_0x14242a=await(0x0,ShowService_1[_0xefc84d(0x1fd)])(_0x14242a['id'],_0xcf6641),_0x14242a;};exports[a541_0x35b2d4(0x1fd)]=CreateService;