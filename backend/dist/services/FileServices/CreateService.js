'use strict';var a460_0xb7c1d0=a460_0x3aff;function a460_0x4ef2(){var _0xbfc892=['1209055mZjOaK','yup','__setModuleDefault','32AUXLDJ','1uAtkkW','(((.+)+)+)+$','toString','findOne','3731840crKTvi','./ShowService','__esModule','__createBinding','message','758412BZxiEU','get','Check-unique-name','268172JmmKUc','writable','getOwnPropertyNames','length','../../models/FilesOptions','configurable','call','min','defineProperty','shape','../../errors/AppError','12SQnsgM','test','apply','getOwnPropertyDescriptor','constructor','search','523323xtsmeC','default','736646psANVH','map','970530TmCYVR','__importDefault','create','../../models/Files'];a460_0x4ef2=function(){return _0xbfc892;};return a460_0x4ef2();}function a460_0x3aff(_0xfe0e55,_0x4d5f73){var _0x31a236=a460_0x4ef2();return a460_0x3aff=function(_0x271a10,_0x3e1a8a){_0x271a10=_0x271a10-0x197;var _0x4ef294=_0x31a236[_0x271a10];return _0x4ef294;},a460_0x3aff(_0xfe0e55,_0x4d5f73);}(function(_0x61138f,_0x449d92){var _0x1f0eb2=a460_0x3aff,_0x1376c1=_0x61138f();while(!![]){try{var _0x100d2f=parseInt(_0x1f0eb2(0x1b4))/0x1*(parseInt(_0x1f0eb2(0x1aa))/0x2)+parseInt(_0x1f0eb2(0x1a8))/0x3+parseInt(_0x1f0eb2(0x197))/0x4+parseInt(_0x1f0eb2(0x1b0))/0x5*(parseInt(_0x1f0eb2(0x1a2))/0x6)+-parseInt(_0x1f0eb2(0x1b8))/0x7+-parseInt(_0x1f0eb2(0x1b3))/0x8*(parseInt(_0x1f0eb2(0x1bd))/0x9)+parseInt(_0x1f0eb2(0x1ac))/0xa;if(_0x100d2f===_0x449d92)break;else _0x1376c1['push'](_0x1376c1['shift']());}catch(_0x2bfc58){_0x1376c1['push'](_0x1376c1['shift']());}}}(a460_0x4ef2,0x4e322));var __createBinding=this&&this[a460_0xb7c1d0(0x1bb)]||(Object['create']?function(_0x3ce9f4,_0x18f841,_0x3e7c4e,_0xd7fa5){var _0x5d1f2c=a460_0xb7c1d0;if(_0xd7fa5===undefined)_0xd7fa5=_0x3e7c4e;var _0x18f09d=Object[_0x5d1f2c(0x1a5)](_0x18f841,_0x3e7c4e);(!_0x18f09d||(_0x5d1f2c(0x1be)in _0x18f09d?!_0x18f841[_0x5d1f2c(0x1ba)]:_0x18f09d[_0x5d1f2c(0x198)]||_0x18f09d[_0x5d1f2c(0x19c)]))&&(_0x18f09d={'enumerable':!![],'get':function(){return _0x18f841[_0x3e7c4e];}}),Object[_0x5d1f2c(0x19f)](_0x3ce9f4,_0xd7fa5,_0x18f09d);}:function(_0x46df70,_0x47f987,_0x4e8d76,_0x19c923){if(_0x19c923===undefined)_0x19c923=_0x4e8d76;_0x46df70[_0x19c923]=_0x47f987[_0x4e8d76];}),__setModuleDefault=this&&this[a460_0xb7c1d0(0x1b2)]||(Object['create']?function(_0x147a21,_0x397354){var _0x1fb7de=a460_0xb7c1d0;Object[_0x1fb7de(0x19f)](_0x147a21,'default',{'enumerable':!![],'value':_0x397354});}:function(_0x2ef3c7,_0xd06ea3){var _0x5a6548=a460_0xb7c1d0;_0x2ef3c7[_0x5a6548(0x1a9)]=_0xd06ea3;}),__importStar=this&&this['__importStar']||(function(){var _0x15eb5b=(function(){var _0x1529ec=!![];return function(_0x1b20cc,_0x2f7744){var _0x2e5d60=_0x1529ec?function(){var _0x4427e5=a460_0x3aff;if(_0x2f7744){var _0xb62614=_0x2f7744[_0x4427e5(0x1a4)](_0x1b20cc,arguments);return _0x2f7744=null,_0xb62614;}}:function(){};return _0x1529ec=![],_0x2e5d60;};}()),_0x13f9f3=_0x15eb5b(this,function(){var _0x3e3027=a460_0x3aff;return _0x13f9f3[_0x3e3027(0x1b6)]()[_0x3e3027(0x1a7)](_0x3e3027(0x1b5))[_0x3e3027(0x1b6)]()[_0x3e3027(0x1a6)](_0x13f9f3)['search'](_0x3e3027(0x1b5));});_0x13f9f3();var _0xc12067=function(_0x582814){var _0x55c7dd=a460_0x3aff;return _0xc12067=Object[_0x55c7dd(0x199)]||function(_0x3a2358){var _0x3d7be0=_0x55c7dd,_0x14919e=[];for(var _0x470eaf in _0x3a2358)if(Object['prototype']['hasOwnProperty'][_0x3d7be0(0x19d)](_0x3a2358,_0x470eaf))_0x14919e[_0x14919e['length']]=_0x470eaf;return _0x14919e;},_0xc12067(_0x582814);};return function(_0x273158){var _0x29b3d5=a460_0x3aff;if(_0x273158&&_0x273158['__esModule'])return _0x273158;var _0x5e2206={};if(_0x273158!=null){for(var _0x2349d7=_0xc12067(_0x273158),_0x882373=0x0;_0x882373<_0x2349d7[_0x29b3d5(0x19a)];_0x882373++)if(_0x2349d7[_0x882373]!==_0x29b3d5(0x1a9))__createBinding(_0x5e2206,_0x273158,_0x2349d7[_0x882373]);}return __setModuleDefault(_0x5e2206,_0x273158),_0x5e2206;};}()),__importDefault=this&&this[a460_0xb7c1d0(0x1ad)]||function(_0x1f9f2c){var _0x1d6765=a460_0xb7c1d0;return _0x1f9f2c&&_0x1f9f2c[_0x1d6765(0x1ba)]?_0x1f9f2c:{'default':_0x1f9f2c};};Object['defineProperty'](exports,a460_0xb7c1d0(0x1ba),{'value':!![]});const Yup=__importStar(require(a460_0xb7c1d0(0x1b1))),AppError_1=__importDefault(require(a460_0xb7c1d0(0x1a1))),Files_1=__importDefault(require(a460_0xb7c1d0(0x1af))),FilesOptions_1=__importDefault(require(a460_0xb7c1d0(0x19b))),ShowService_1=__importDefault(require(a460_0xb7c1d0(0x1b9))),CreateService=async({name:_0xabcb70,message:_0x59a71c,companyId:_0x5eef68,options:_0x438176})=>{var _0x3d75f5=a460_0xb7c1d0;const _0x3b8fdc=Yup['object']()[_0x3d75f5(0x1a0)]({'name':Yup['string']()['required']()[_0x3d75f5(0x19e)](0x3)[_0x3d75f5(0x1a3)](_0x3d75f5(0x1bf),'ERR_RATING_NAME_ALREADY_EXISTS',async _0x196ee4=>{var _0x208766=_0x3d75f5;if(_0x196ee4){const _0x1fe658=await Files_1[_0x208766(0x1a9)][_0x208766(0x1b7)]({'where':{'name':_0x196ee4,'companyId':_0x5eef68}});return!_0x1fe658;}return![];})});try{await _0x3b8fdc['validate']({'name':_0xabcb70});}catch(_0x45d508){throw new AppError_1[(_0x3d75f5(0x1a9))](_0x45d508[_0x3d75f5(0x1bc)]);}let _0x3fc10d=await Files_1[_0x3d75f5(0x1a9)][_0x3d75f5(0x1ae)]({'name':_0xabcb70,'message':_0x59a71c,'companyId':_0x5eef68});return _0x438176&&_0x438176['length']>0x0&&await Promise['all'](_0x438176[_0x3d75f5(0x1ab)](async _0xe9bb4c=>{await FilesOptions_1['default']['upsert']({..._0xe9bb4c,'fileId':_0x3fc10d['id']});})),_0x3fc10d=await(0x0,ShowService_1['default'])(_0x3fc10d['id'],_0x5eef68),_0x3fc10d;};exports['default']=CreateService;