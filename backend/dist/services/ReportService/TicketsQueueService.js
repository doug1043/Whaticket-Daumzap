const a520_0x52919e=a520_0x2f4b;(function(_0xa18544,_0x53b45c){const _0x1d77a2=a520_0x2f4b,_0x2f0f02=_0xa18544();while(!![]){try{const _0x23db8c=-parseInt(_0x1d77a2(0xd2))/0x1+-parseInt(_0x1d77a2(0xa9))/0x2+parseInt(_0x1d77a2(0xab))/0x3+-parseInt(_0x1d77a2(0xc4))/0x4*(-parseInt(_0x1d77a2(0xd3))/0x5)+-parseInt(_0x1d77a2(0xcd))/0x6*(-parseInt(_0x1d77a2(0xd0))/0x7)+-parseInt(_0x1d77a2(0xcb))/0x8+parseInt(_0x1d77a2(0xd1))/0x9*(parseInt(_0x1d77a2(0xad))/0xa);if(_0x23db8c===_0x53b45c)break;else _0x2f0f02['push'](_0x2f0f02['shift']());}catch(_0x28fd35){_0x2f0f02['push'](_0x2f0f02['shift']());}}}(a520_0x5c85,0xceccf));const a520_0x18e5f9=(function(){let _0x4a33a9=!![];return function(_0x2daf73,_0x459f0b){const _0x1a9d2c=_0x4a33a9?function(){const _0x203176=a520_0x2f4b;if(_0x459f0b){const _0x2e8cba=_0x459f0b[_0x203176(0xb9)](_0x2daf73,arguments);return _0x459f0b=null,_0x2e8cba;}}:function(){};return _0x4a33a9=![],_0x1a9d2c;};}()),a520_0x5dc59c=a520_0x18e5f9(this,function(){const _0x4ce68c=a520_0x2f4b;return a520_0x5dc59c[_0x4ce68c(0xcf)]()[_0x4ce68c(0xbe)](_0x4ce68c(0xbf))[_0x4ce68c(0xcf)]()['constructor'](a520_0x5dc59c)[_0x4ce68c(0xbe)](_0x4ce68c(0xbf));});a520_0x5dc59c();'use strict';function a520_0x5c85(){const _0x104ea0=['search','(((.+)+)+)+$','filter','max','endOf','sequelize','68lRANVJ','updatedAt','companyId','__importDefault','contactId','user','../../models/Ticket','1941728gSepgg','map','66bQresT','includes','toString','1000867bnQClx','18NZVzTq','1564389Swduko','252685Huimiq','2649148HsAkts','sequelize-typescript','2256276anURzx','Sequelize','3973610JVKpsJ','../../models/Queue','day','../../models/User','default','whatsappId','open','defineProperty','col','toDate','findAll','queueId','apply','startOf','reduce','__esModule','DESC'];a520_0x5c85=function(){return _0x104ea0;};return a520_0x5c85();}var __importDefault=this&&this[a520_0x52919e(0xc7)]||function(_0x88856e){return _0x88856e&&_0x88856e['__esModule']?_0x88856e:{'default':_0x88856e};};Object[a520_0x52919e(0xb4)](exports,a520_0x52919e(0xbc),{'value':!![]});function a520_0x2f4b(_0x24617a,_0x31e6b6){const _0x23d338=a520_0x5c85();return a520_0x2f4b=function(_0x5dc59c,_0x18e5f9){_0x5dc59c=_0x5dc59c-0xa9;let _0x5c85c1=_0x23d338[_0x5dc59c];return _0x5c85c1;},a520_0x2f4b(_0x24617a,_0x31e6b6);}const sequelize_1=require(a520_0x52919e(0xc3)),moment_1=__importDefault(require('moment')),Ticket_1=__importDefault(require(a520_0x52919e(0xca))),Queue_1=__importDefault(require(a520_0x52919e(0xae))),User_1=__importDefault(require(a520_0x52919e(0xb0))),sequelize_typescript_1=require(a520_0x52919e(0xaa)),TicketsQueueService=async({dateStart:_0x23fbb9,dateEnd:_0x146188,status:_0x4cba08,userId:_0x286e50,companyId:_0x237e78,profile:_0x23b534})=>{const _0x1ccc57=a520_0x52919e;let _0x4679c1={};const _0x47f86c=[{'model':User_1[_0x1ccc57(0xb1)],'as':_0x1ccc57(0xc9),'attributes':['id','name','profile']},{'model':Queue_1[_0x1ccc57(0xb1)],'as':'queue'}];if(_0x4cba08){const _0x165230=[],_0x5b4901=await Ticket_1[_0x1ccc57(0xb1)][_0x1ccc57(0xb7)]({'where':{'status':_0x1ccc57(0xb3)},'group':[_0x1ccc57(0xc6),_0x1ccc57(0xc8),_0x1ccc57(0xb8),_0x1ccc57(0xb2)],'attributes':[_0x1ccc57(0xc6),_0x1ccc57(0xc8),_0x1ccc57(0xb8),_0x1ccc57(0xb2),[sequelize_typescript_1[_0x1ccc57(0xac)]['fn'](_0x1ccc57(0xc1),sequelize_typescript_1[_0x1ccc57(0xac)][_0x1ccc57(0xb5)]('id')),'id']]});_0x5b4901&&_0x165230['push'](_0x5b4901[_0x1ccc57(0xcc)](_0x4ff00e=>_0x4ff00e['id']));const _0x510592=_0x165230[_0x1ccc57(0xbb)]((_0x448a33,_0x414283)=>_0x448a33[_0x1ccc57(0xc0)](_0x1e7891=>_0x414283[_0x1ccc57(0xce)](_0x1e7891)));_0x4679c1={..._0x4679c1,'id':{[sequelize_1['Op']['in']]:_0x510592}};}_0x23b534===_0x1ccc57(0xc9)&&(_0x4679c1={..._0x4679c1,'userId':_0x286e50});_0x23fbb9&&_0x146188&&(_0x4679c1={..._0x4679c1,'createdAt':{[sequelize_1['Op']['between']]:[(0x0,moment_1[_0x1ccc57(0xb1)])(_0x23fbb9)[_0x1ccc57(0xba)]('day')[_0x1ccc57(0xb6)](),(0x0,moment_1[_0x1ccc57(0xb1)])(_0x146188)[_0x1ccc57(0xc2)](_0x1ccc57(0xaf))[_0x1ccc57(0xb6)]()]}});const _0x268308=await Ticket_1['default'][_0x1ccc57(0xb7)]({'where':{..._0x4679c1,'companyId':_0x237e78},'include':_0x47f86c,'order':[[_0x1ccc57(0xc5),_0x1ccc57(0xbd)]]});return{'data':_0x268308};};exports['default']=TicketsQueueService;