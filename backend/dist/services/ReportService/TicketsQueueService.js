const a514_0x433e3f=a514_0xf1ab;(function(_0x349d8c,_0x1fe3d0){const _0x2a75fd=a514_0xf1ab,_0x21e0b0=_0x349d8c();while(!![]){try{const _0x342962=parseInt(_0x2a75fd(0x197))/0x1+parseInt(_0x2a75fd(0x181))/0x2+-parseInt(_0x2a75fd(0x177))/0x3*(parseInt(_0x2a75fd(0x18b))/0x4)+parseInt(_0x2a75fd(0x186))/0x5+-parseInt(_0x2a75fd(0x174))/0x6*(parseInt(_0x2a75fd(0x180))/0x7)+-parseInt(_0x2a75fd(0x175))/0x8+parseInt(_0x2a75fd(0x194))/0x9;if(_0x342962===_0x1fe3d0)break;else _0x21e0b0['push'](_0x21e0b0['shift']());}catch(_0x34a500){_0x21e0b0['push'](_0x21e0b0['shift']());}}}(a514_0x13c0,0xbfb54));const a514_0x40a5a7=(function(){let _0x44e907=!![];return function(_0x3cbfb8,_0x247d8a){const _0x1be3f6=_0x44e907?function(){if(_0x247d8a){const _0x137db3=_0x247d8a['apply'](_0x3cbfb8,arguments);return _0x247d8a=null,_0x137db3;}}:function(){};return _0x44e907=![],_0x1be3f6;};}()),a514_0x29fc4a=a514_0x40a5a7(this,function(){const _0x1f22cb=a514_0xf1ab;return a514_0x29fc4a['toString']()[_0x1f22cb(0x187)](_0x1f22cb(0x196))[_0x1f22cb(0x198)]()[_0x1f22cb(0x193)](a514_0x29fc4a)['search'](_0x1f22cb(0x196));});a514_0x29fc4a();function a514_0x13c0(){const _0xb591bd=['constructor','1693413YAavCA','endOf','(((.+)+)+)+$','1201959zwWVQz','toString','sequelize','Sequelize','whatsappId','queue','defineProperty','102156MTOAZc','934840KoVfoI','open','4278327RAnIBR','toDate','includes','../../models/Ticket','between','default','filter','moment','../../models/User','119ykOoSi','1299484YyQJrs','push','startOf','profile','updatedAt','2888920CEbjhP','search','max','user','col','4ozNruG','day','DESC','__esModule','name','queueId','contactId','findAll'];a514_0x13c0=function(){return _0xb591bd;};return a514_0x13c0();}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x5b9dfd){const _0x2eb356=a514_0xf1ab;return _0x5b9dfd&&_0x5b9dfd[_0x2eb356(0x18e)]?_0x5b9dfd:{'default':_0x5b9dfd};};function a514_0xf1ab(_0x41a8a5,_0x1c784d){const _0x1b490a=a514_0x13c0();return a514_0xf1ab=function(_0x29fc4a,_0x40a5a7){_0x29fc4a=_0x29fc4a-0x170;let _0x13c064=_0x1b490a[_0x29fc4a];return _0x13c064;},a514_0xf1ab(_0x41a8a5,_0x1c784d);}Object[a514_0x433e3f(0x173)](exports,a514_0x433e3f(0x18e),{'value':!![]});const sequelize_1=require(a514_0x433e3f(0x199)),moment_1=__importDefault(require(a514_0x433e3f(0x17e))),Ticket_1=__importDefault(require(a514_0x433e3f(0x17a))),Queue_1=__importDefault(require('../../models/Queue')),User_1=__importDefault(require(a514_0x433e3f(0x17f))),sequelize_typescript_1=require('sequelize-typescript'),TicketsQueueService=async({dateStart:_0x5d7c9b,dateEnd:_0x857d5b,status:_0x150a55,userId:_0x4d9627,companyId:_0x486eda,profile:_0x46e0ee})=>{const _0x18201c=a514_0x433e3f;let _0x5d1d55={};const _0x166975=[{'model':User_1[_0x18201c(0x17c)],'as':_0x18201c(0x189),'attributes':['id',_0x18201c(0x18f),_0x18201c(0x184)]},{'model':Queue_1['default'],'as':_0x18201c(0x172)}];if(_0x150a55){const _0x368738=[],_0x4f2dd3=await Ticket_1['default']['findAll']({'where':{'status':_0x18201c(0x176)},'group':['companyId',_0x18201c(0x191),_0x18201c(0x190),_0x18201c(0x171)],'attributes':['companyId','contactId',_0x18201c(0x190),_0x18201c(0x171),[sequelize_typescript_1[_0x18201c(0x170)]['fn'](_0x18201c(0x188),sequelize_typescript_1[_0x18201c(0x170)][_0x18201c(0x18a)]('id')),'id']]});_0x4f2dd3&&_0x368738[_0x18201c(0x182)](_0x4f2dd3['map'](_0x232b97=>_0x232b97['id']));const _0x11632e=_0x368738['reduce']((_0x47e924,_0x590951)=>_0x47e924[_0x18201c(0x17d)](_0x4a6bb0=>_0x590951[_0x18201c(0x179)](_0x4a6bb0)));_0x5d1d55={..._0x5d1d55,'id':{[sequelize_1['Op']['in']]:_0x11632e}};}_0x46e0ee==='user'&&(_0x5d1d55={..._0x5d1d55,'userId':_0x4d9627});_0x5d7c9b&&_0x857d5b&&(_0x5d1d55={..._0x5d1d55,'createdAt':{[sequelize_1['Op'][_0x18201c(0x17b)]]:[(0x0,moment_1['default'])(_0x5d7c9b)[_0x18201c(0x183)]('day')[_0x18201c(0x178)](),(0x0,moment_1['default'])(_0x857d5b)[_0x18201c(0x195)](_0x18201c(0x18c))['toDate']()]}});const _0x56a1e7=await Ticket_1[_0x18201c(0x17c)][_0x18201c(0x192)]({'where':{..._0x5d1d55,'companyId':_0x486eda},'include':_0x166975,'order':[[_0x18201c(0x185),_0x18201c(0x18d)]]});return{'data':_0x56a1e7};};exports[a514_0x433e3f(0x17c)]=TicketsQueueService;