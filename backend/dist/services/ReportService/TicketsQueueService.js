const a523_0x47240a=a523_0x530e;(function(_0x4d0574,_0x1ec3b5){const _0x380427=a523_0x530e,_0x4e347f=_0x4d0574();while(!![]){try{const _0x55e8d3=-parseInt(_0x380427(0xd9))/0x1+-parseInt(_0x380427(0xec))/0x2+-parseInt(_0x380427(0xe0))/0x3+-parseInt(_0x380427(0xe6))/0x4*(parseInt(_0x380427(0xe9))/0x5)+parseInt(_0x380427(0xf3))/0x6*(parseInt(_0x380427(0xff))/0x7)+-parseInt(_0x380427(0xda))/0x8+parseInt(_0x380427(0xd8))/0x9;if(_0x55e8d3===_0x1ec3b5)break;else _0x4e347f['push'](_0x4e347f['shift']());}catch(_0x2e93d7){_0x4e347f['push'](_0x4e347f['shift']());}}}(a523_0x225f,0x41c42));const a523_0x3ec696=(function(){let _0x3044ce=!![];return function(_0x31b259,_0x37a705){const _0x46c9e0=_0x3044ce?function(){const _0x19e621=a523_0x530e;if(_0x37a705){const _0x1624f8=_0x37a705[_0x19e621(0xdc)](_0x31b259,arguments);return _0x37a705=null,_0x1624f8;}}:function(){};return _0x3044ce=![],_0x46c9e0;};}()),a523_0x5758b7=a523_0x3ec696(this,function(){const _0x15f9b0=a523_0x530e;return a523_0x5758b7[_0x15f9b0(0xe4)]()[_0x15f9b0(0xdb)](_0x15f9b0(0xef))[_0x15f9b0(0xe4)]()['constructor'](a523_0x5758b7)['search'](_0x15f9b0(0xef));});a523_0x5758b7();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x31b47e){const _0x30a8d0=a523_0x530e;return _0x31b47e&&_0x31b47e[_0x30a8d0(0xe5)]?_0x31b47e:{'default':_0x31b47e};};function a523_0x530e(_0x85bac2,_0x50afac){const _0x32035e=a523_0x225f();return a523_0x530e=function(_0x5758b7,_0x3ec696){_0x5758b7=_0x5758b7-0xd7;let _0x225f59=_0x32035e[_0x5758b7];return _0x225f59;},a523_0x530e(_0x85bac2,_0x50afac);}Object['defineProperty'](exports,a523_0x47240a(0xe5),{'value':!![]});function a523_0x225f(){const _0x41c992=['Sequelize','includes','between','162SyXRYu','user','sequelize','default','filter','col','moment','companyId','toDate','day','map','../../models/Ticket','51163fdgRAE','updatedAt','reduce','../../models/Queue','12062700UkOKPN','489206JpanKp','3536920VXcuAe','search','apply','sequelize-typescript','open','DESC','374217yXGetn','endOf','name','whatsappId','toString','__esModule','2572qejjmU','../../models/User','push','575hXVUse','findAll','profile','276520CyCRkK','queueId','contactId','(((.+)+)+)+$'];a523_0x225f=function(){return _0x41c992;};return a523_0x225f();}const sequelize_1=require(a523_0x47240a(0xf5)),moment_1=__importDefault(require(a523_0x47240a(0xf9))),Ticket_1=__importDefault(require(a523_0x47240a(0xfe))),Queue_1=__importDefault(require(a523_0x47240a(0xd7))),User_1=__importDefault(require(a523_0x47240a(0xe7))),sequelize_typescript_1=require(a523_0x47240a(0xdd)),TicketsQueueService=async({dateStart:_0xd99975,dateEnd:_0xc9b891,status:_0x40edcb,userId:_0x697116,companyId:_0x359d4e,profile:_0x25b69a})=>{const _0x4f13d0=a523_0x47240a;let _0x468e85={};const _0x2dc59d=[{'model':User_1['default'],'as':'user','attributes':['id',_0x4f13d0(0xe2),_0x4f13d0(0xeb)]},{'model':Queue_1['default'],'as':'queue'}];if(_0x40edcb){const _0x3a563f=[],_0x32b0bc=await Ticket_1[_0x4f13d0(0xf6)][_0x4f13d0(0xea)]({'where':{'status':_0x4f13d0(0xde)},'group':[_0x4f13d0(0xfa),'contactId',_0x4f13d0(0xed),_0x4f13d0(0xe3)],'attributes':[_0x4f13d0(0xfa),_0x4f13d0(0xee),_0x4f13d0(0xed),_0x4f13d0(0xe3),[sequelize_typescript_1['Sequelize']['fn']('max',sequelize_typescript_1[_0x4f13d0(0xf0)][_0x4f13d0(0xf8)]('id')),'id']]});_0x32b0bc&&_0x3a563f[_0x4f13d0(0xe8)](_0x32b0bc[_0x4f13d0(0xfd)](_0x2c1d7d=>_0x2c1d7d['id']));const _0x47b883=_0x3a563f[_0x4f13d0(0x101)]((_0x3f85ae,_0x10ba28)=>_0x3f85ae[_0x4f13d0(0xf7)](_0x3086c7=>_0x10ba28[_0x4f13d0(0xf1)](_0x3086c7)));_0x468e85={..._0x468e85,'id':{[sequelize_1['Op']['in']]:_0x47b883}};}_0x25b69a===_0x4f13d0(0xf4)&&(_0x468e85={..._0x468e85,'userId':_0x697116});_0xd99975&&_0xc9b891&&(_0x468e85={..._0x468e85,'createdAt':{[sequelize_1['Op'][_0x4f13d0(0xf2)]]:[(0x0,moment_1[_0x4f13d0(0xf6)])(_0xd99975)['startOf'](_0x4f13d0(0xfc))[_0x4f13d0(0xfb)](),(0x0,moment_1['default'])(_0xc9b891)[_0x4f13d0(0xe1)](_0x4f13d0(0xfc))['toDate']()]}});const _0x2f5f29=await Ticket_1[_0x4f13d0(0xf6)]['findAll']({'where':{..._0x468e85,'companyId':_0x359d4e},'include':_0x2dc59d,'order':[[_0x4f13d0(0x100),_0x4f13d0(0xdf)]]});return{'data':_0x2f5f29};};exports['default']=TicketsQueueService;