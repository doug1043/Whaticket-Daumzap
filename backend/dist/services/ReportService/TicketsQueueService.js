const a492_0x110f4d=a492_0x5806;(function(_0x661477,_0x33c772){const _0x25813e=a492_0x5806,_0x530508=_0x661477();while(!![]){try{const _0x5cad82=parseInt(_0x25813e(0x112))/0x1+-parseInt(_0x25813e(0x105))/0x2+-parseInt(_0x25813e(0xf4))/0x3+parseInt(_0x25813e(0x103))/0x4*(-parseInt(_0x25813e(0xee))/0x5)+parseInt(_0x25813e(0x114))/0x6+-parseInt(_0x25813e(0xf8))/0x7+parseInt(_0x25813e(0x10d))/0x8*(parseInt(_0x25813e(0x109))/0x9);if(_0x5cad82===_0x33c772)break;else _0x530508['push'](_0x530508['shift']());}catch(_0x508e20){_0x530508['push'](_0x530508['shift']());}}}(a492_0x2127,0x72b33));const a492_0x325151=(function(){let _0xf8643e=!![];return function(_0x5ea447,_0x12db88){const _0x4dee78=_0xf8643e?function(){const _0x135c31=a492_0x5806;if(_0x12db88){const _0x53224e=_0x12db88[_0x135c31(0x107)](_0x5ea447,arguments);return _0x12db88=null,_0x53224e;}}:function(){};return _0xf8643e=![],_0x4dee78;};}()),a492_0x2c7876=a492_0x325151(this,function(){const _0x77f1a=a492_0x5806;return a492_0x2c7876['toString']()[_0x77f1a(0xec)](_0x77f1a(0xed))[_0x77f1a(0xef)]()[_0x77f1a(0xfa)](a492_0x2c7876)['search'](_0x77f1a(0xed));});a492_0x2c7876();function a492_0x5806(_0x1ac0ed,_0x5af722){const _0x2277ac=a492_0x2127();return a492_0x5806=function(_0x2c7876,_0x325151){_0x2c7876=_0x2c7876-0xeb;let _0x21279d=_0x2277ac[_0x2c7876];return _0x21279d;},a492_0x5806(_0x1ac0ed,_0x5af722);}function a492_0x2127(){const _0x679934=['filter','defineProperty','between','4827305mfhXmB','default','constructor','name','queueId','findAll','user','push','reduce','sequelize','day','1637504wQSyHi','whatsappId','686770zvfJYY','max','apply','Sequelize','207OQZphm','__importDefault','moment','updatedAt','585048gPZwMP','queue','profile','companyId','DESC','1449xYAlmb','sequelize-typescript','4742184AhPhtg','contactId','search','(((.+)+)+)+$','10mIGDgp','toString','map','startOf','__esModule','toDate','456789WWQjIy'];a492_0x2127=function(){return _0x679934;};return a492_0x2127();}'use strict';var __importDefault=this&&this[a492_0x110f4d(0x10a)]||function(_0x5d15ad){return _0x5d15ad&&_0x5d15ad['__esModule']?_0x5d15ad:{'default':_0x5d15ad};};Object[a492_0x110f4d(0xf6)](exports,a492_0x110f4d(0xf2),{'value':!![]});const sequelize_1=require(a492_0x110f4d(0x101)),moment_1=__importDefault(require(a492_0x110f4d(0x10b))),Ticket_1=__importDefault(require('../../models/Ticket')),Queue_1=__importDefault(require('../../models/Queue')),User_1=__importDefault(require('../../models/User')),sequelize_typescript_1=require(a492_0x110f4d(0x113)),TicketsQueueService=async({dateStart:_0x752844,dateEnd:_0x280fe0,status:_0x5d10b6,userId:_0x4f73f2,companyId:_0x28388f,profile:_0xd45cb})=>{const _0x42efbe=a492_0x110f4d;let _0x2cfd93={};const _0x1cc5e2=[{'model':User_1[_0x42efbe(0xf9)],'as':'user','attributes':['id',_0x42efbe(0xfb),_0x42efbe(0x10f)]},{'model':Queue_1[_0x42efbe(0xf9)],'as':_0x42efbe(0x10e)}];if(_0x5d10b6){const _0x4b68ee=[],_0xd0249b=await Ticket_1[_0x42efbe(0xf9)][_0x42efbe(0xfd)]({'where':{'status':'open'},'group':[_0x42efbe(0x110),_0x42efbe(0xeb),_0x42efbe(0xfc),_0x42efbe(0x104)],'attributes':['companyId',_0x42efbe(0xeb),_0x42efbe(0xfc),'whatsappId',[sequelize_typescript_1[_0x42efbe(0x108)]['fn'](_0x42efbe(0x106),sequelize_typescript_1[_0x42efbe(0x108)]['col']('id')),'id']]});_0xd0249b&&_0x4b68ee[_0x42efbe(0xff)](_0xd0249b[_0x42efbe(0xf0)](_0x538839=>_0x538839['id']));const _0x475c94=_0x4b68ee[_0x42efbe(0x100)]((_0x4f51b2,_0x2eaa18)=>_0x4f51b2[_0x42efbe(0xf5)](_0x3c8211=>_0x2eaa18['includes'](_0x3c8211)));_0x2cfd93={..._0x2cfd93,'id':{[sequelize_1['Op']['in']]:_0x475c94}};}_0xd45cb===_0x42efbe(0xfe)&&(_0x2cfd93={..._0x2cfd93,'userId':_0x4f73f2});_0x752844&&_0x280fe0&&(_0x2cfd93={..._0x2cfd93,'createdAt':{[sequelize_1['Op'][_0x42efbe(0xf7)]]:[(0x0,moment_1[_0x42efbe(0xf9)])(_0x752844)[_0x42efbe(0xf1)]('day')[_0x42efbe(0xf3)](),(0x0,moment_1[_0x42efbe(0xf9)])(_0x280fe0)['endOf'](_0x42efbe(0x102))['toDate']()]}});const _0x44764b=await Ticket_1['default']['findAll']({'where':{..._0x2cfd93,'companyId':_0x28388f},'include':_0x1cc5e2,'order':[[_0x42efbe(0x10c),_0x42efbe(0x111)]]});return{'data':_0x44764b};};exports[a492_0x110f4d(0xf9)]=TicketsQueueService;