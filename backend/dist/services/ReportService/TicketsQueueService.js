const a493_0x5c083d=a493_0x84bf;function a493_0x129a(){const _0x2b8e8e=['sequelize-typescript','__importDefault','__esModule','sequelize','2490012RTHQrD','open','defineProperty','queueId','whatsappId','2KieWhX','4oQUEbQ','10524gxnBbD','moment','(((.+)+)+)+$','toString','toDate','push','includes','Sequelize','../../models/User','endOf','apply','contactId','day','3967015TZrJfu','3095379QbYcFU','2292110hMaYQc','6577576pPNGjH','between','updatedAt','default','constructor','name','col','../../models/Queue','max','filter','queue','findAll','DESC','679OxzdVi','277028JVLiUe','map'];a493_0x129a=function(){return _0x2b8e8e;};return a493_0x129a();}(function(_0x5d2916,_0x3e03b0){const _0x3d44d6=a493_0x84bf,_0x3e635d=_0x5d2916();while(!![]){try{const _0x34a70a=-parseInt(_0x3d44d6(0x1b7))/0x1*(parseInt(_0x3d44d6(0x1d7))/0x2)+parseInt(_0x3d44d6(0x1c7))/0x3+parseInt(_0x3d44d6(0x1b8))/0x4*(parseInt(_0x3d44d6(0x1c6))/0x5)+-parseInt(_0x3d44d6(0x1b9))/0x6*(parseInt(_0x3d44d6(0x1d6))/0x7)+-parseInt(_0x3d44d6(0x1c9))/0x8+parseInt(_0x3d44d6(0x1dd))/0x9+-parseInt(_0x3d44d6(0x1c8))/0xa;if(_0x34a70a===_0x3e03b0)break;else _0x3e635d['push'](_0x3e635d['shift']());}catch(_0x4fb674){_0x3e635d['push'](_0x3e635d['shift']());}}}(a493_0x129a,0x9349a));function a493_0x84bf(_0x2035b0,_0x22a5e6){const _0x1082f5=a493_0x129a();return a493_0x84bf=function(_0x38805a,_0x111011){_0x38805a=_0x38805a-0x1b4;let _0x129a83=_0x1082f5[_0x38805a];return _0x129a83;},a493_0x84bf(_0x2035b0,_0x22a5e6);}const a493_0x111011=(function(){let _0x29a778=!![];return function(_0x36efbf,_0x25b599){const _0x2a1676=_0x29a778?function(){const _0x3117d9=a493_0x84bf;if(_0x25b599){const _0x13bf04=_0x25b599[_0x3117d9(0x1c3)](_0x36efbf,arguments);return _0x25b599=null,_0x13bf04;}}:function(){};return _0x29a778=![],_0x2a1676;};}()),a493_0x38805a=a493_0x111011(this,function(){const _0x21d8ba=a493_0x84bf;return a493_0x38805a[_0x21d8ba(0x1bc)]()['search']('(((.+)+)+)+$')['toString']()[_0x21d8ba(0x1cd)](a493_0x38805a)['search'](_0x21d8ba(0x1bb));});a493_0x38805a();'use strict';var __importDefault=this&&this[a493_0x5c083d(0x1da)]||function(_0x5ca032){const _0x585be4=a493_0x5c083d;return _0x5ca032&&_0x5ca032[_0x585be4(0x1db)]?_0x5ca032:{'default':_0x5ca032};};Object[a493_0x5c083d(0x1b4)](exports,a493_0x5c083d(0x1db),{'value':!![]});const sequelize_1=require(a493_0x5c083d(0x1dc)),moment_1=__importDefault(require(a493_0x5c083d(0x1ba))),Ticket_1=__importDefault(require('../../models/Ticket')),Queue_1=__importDefault(require(a493_0x5c083d(0x1d0))),User_1=__importDefault(require(a493_0x5c083d(0x1c1))),sequelize_typescript_1=require(a493_0x5c083d(0x1d9)),TicketsQueueService=async({dateStart:_0x52b9d7,dateEnd:_0x347c3b,status:_0x3fe2a0,userId:_0x316ec5,companyId:_0x343213,profile:_0x2de886})=>{const _0x4a93d6=a493_0x5c083d;let _0x515c16={};const _0x50baa8=[{'model':User_1[_0x4a93d6(0x1cc)],'as':'user','attributes':['id',_0x4a93d6(0x1ce),'profile']},{'model':Queue_1[_0x4a93d6(0x1cc)],'as':_0x4a93d6(0x1d3)}];if(_0x3fe2a0){const _0xbdbd03=[],_0x18920c=await Ticket_1[_0x4a93d6(0x1cc)][_0x4a93d6(0x1d4)]({'where':{'status':_0x4a93d6(0x1de)},'group':['companyId',_0x4a93d6(0x1c4),_0x4a93d6(0x1b5),'whatsappId'],'attributes':['companyId',_0x4a93d6(0x1c4),_0x4a93d6(0x1b5),_0x4a93d6(0x1b6),[sequelize_typescript_1[_0x4a93d6(0x1c0)]['fn'](_0x4a93d6(0x1d1),sequelize_typescript_1[_0x4a93d6(0x1c0)][_0x4a93d6(0x1cf)]('id')),'id']]});_0x18920c&&_0xbdbd03[_0x4a93d6(0x1be)](_0x18920c[_0x4a93d6(0x1d8)](_0x4eb216=>_0x4eb216['id']));const _0x4da33c=_0xbdbd03['reduce']((_0x4494e5,_0xd2b64a)=>_0x4494e5[_0x4a93d6(0x1d2)](_0x3b2b39=>_0xd2b64a[_0x4a93d6(0x1bf)](_0x3b2b39)));_0x515c16={..._0x515c16,'id':{[sequelize_1['Op']['in']]:_0x4da33c}};}_0x2de886==='user'&&(_0x515c16={..._0x515c16,'userId':_0x316ec5});_0x52b9d7&&_0x347c3b&&(_0x515c16={..._0x515c16,'createdAt':{[sequelize_1['Op'][_0x4a93d6(0x1ca)]]:[(0x0,moment_1[_0x4a93d6(0x1cc)])(_0x52b9d7)['startOf']('day')[_0x4a93d6(0x1bd)](),(0x0,moment_1[_0x4a93d6(0x1cc)])(_0x347c3b)[_0x4a93d6(0x1c2)](_0x4a93d6(0x1c5))['toDate']()]}});const _0x3dc3f0=await Ticket_1[_0x4a93d6(0x1cc)][_0x4a93d6(0x1d4)]({'where':{..._0x515c16,'companyId':_0x343213},'include':_0x50baa8,'order':[[_0x4a93d6(0x1cb),_0x4a93d6(0x1d5)]]});return{'data':_0x3dc3f0};};exports[a493_0x5c083d(0x1cc)]=TicketsQueueService;