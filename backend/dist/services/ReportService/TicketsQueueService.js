const a520_0x3e7055=a520_0x28a0;(function(_0x4dea1a,_0x6b5fb){const _0x33d053=a520_0x28a0,_0x43245c=_0x4dea1a();while(!![]){try{const _0x40937d=-parseInt(_0x33d053(0x13e))/0x1+-parseInt(_0x33d053(0x14a))/0x2*(-parseInt(_0x33d053(0x133))/0x3)+parseInt(_0x33d053(0x13f))/0x4+parseInt(_0x33d053(0x12e))/0x5+-parseInt(_0x33d053(0x12d))/0x6+parseInt(_0x33d053(0x12a))/0x7*(-parseInt(_0x33d053(0x138))/0x8)+parseInt(_0x33d053(0x137))/0x9*(-parseInt(_0x33d053(0x12b))/0xa);if(_0x40937d===_0x6b5fb)break;else _0x43245c['push'](_0x43245c['shift']());}catch(_0x3a94ef){_0x43245c['push'](_0x43245c['shift']());}}}(a520_0x3e85,0xde197));const a520_0x38bcd4=(function(){let _0x395b5b=!![];return function(_0x404cfb,_0x4687c4){const _0x23ea9d=_0x395b5b?function(){const _0x346851=a520_0x28a0;if(_0x4687c4){const _0x50867b=_0x4687c4[_0x346851(0x134)](_0x404cfb,arguments);return _0x4687c4=null,_0x50867b;}}:function(){};return _0x395b5b=![],_0x23ea9d;};}()),a520_0x2917e4=a520_0x38bcd4(this,function(){const _0x3bdff5=a520_0x28a0;return a520_0x2917e4[_0x3bdff5(0x132)]()[_0x3bdff5(0x128)]('(((.+)+)+)+$')[_0x3bdff5(0x132)]()[_0x3bdff5(0x149)](a520_0x2917e4)[_0x3bdff5(0x128)](_0x3bdff5(0x127));});a520_0x2917e4();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x339b95){const _0x39ec10=a520_0x28a0;return _0x339b95&&_0x339b95[_0x39ec10(0x147)]?_0x339b95:{'default':_0x339b95};};function a520_0x28a0(_0xb0b7a5,_0x3269db){const _0xb1b5f3=a520_0x3e85();return a520_0x28a0=function(_0x2917e4,_0x38bcd4){_0x2917e4=_0x2917e4-0x126;let _0x3e852b=_0xb1b5f3[_0x2917e4];return _0x3e852b;},a520_0x28a0(_0xb0b7a5,_0x3269db);}Object[a520_0x3e7055(0x13b)](exports,a520_0x3e7055(0x147),{'value':!![]});function a520_0x3e85(){const _0x8867fa=['user','constructor','2bVLTjg','day','contactId','reduce','sequelize-typescript','default','max','companyId','(((.+)+)+)+$','search','findAll','888909NwFlhX','10nJfzwU','queueId','5543196XDdaQQ','4502190zjIoOI','open','moment','includes','toString','4814328yLPrcD','apply','between','toDate','1094553EPiIhp','8gcySGv','filter','sequelize','defineProperty','updatedAt','whatsappId','721131InovNF','1192424bMgnfN','../../models/User','startOf','profile','../../models/Queue','Sequelize','map','DESC','__esModule'];a520_0x3e85=function(){return _0x8867fa;};return a520_0x3e85();}const sequelize_1=require(a520_0x3e7055(0x13a)),moment_1=__importDefault(require(a520_0x3e7055(0x130))),Ticket_1=__importDefault(require('../../models/Ticket')),Queue_1=__importDefault(require(a520_0x3e7055(0x143))),User_1=__importDefault(require(a520_0x3e7055(0x140))),sequelize_typescript_1=require(a520_0x3e7055(0x14e)),TicketsQueueService=async({dateStart:_0x1d843a,dateEnd:_0xb7555a,status:_0x30cd60,userId:_0xc56f03,companyId:_0x2f1f33,profile:_0x2add7c})=>{const _0x45362c=a520_0x3e7055;let _0x54f28f={};const _0xddb50e=[{'model':User_1[_0x45362c(0x14f)],'as':_0x45362c(0x148),'attributes':['id','name',_0x45362c(0x142)]},{'model':Queue_1[_0x45362c(0x14f)],'as':'queue'}];if(_0x30cd60){const _0x3601b3=[],_0x28737f=await Ticket_1[_0x45362c(0x14f)][_0x45362c(0x129)]({'where':{'status':_0x45362c(0x12f)},'group':[_0x45362c(0x126),_0x45362c(0x14c),_0x45362c(0x12c),_0x45362c(0x13d)],'attributes':['companyId',_0x45362c(0x14c),'queueId',_0x45362c(0x13d),[sequelize_typescript_1['Sequelize']['fn'](_0x45362c(0x150),sequelize_typescript_1[_0x45362c(0x144)]['col']('id')),'id']]});_0x28737f&&_0x3601b3['push'](_0x28737f[_0x45362c(0x145)](_0x2fe7f6=>_0x2fe7f6['id']));const _0x4234aa=_0x3601b3[_0x45362c(0x14d)]((_0x1bd30d,_0x275dd5)=>_0x1bd30d[_0x45362c(0x139)](_0x461d9a=>_0x275dd5[_0x45362c(0x131)](_0x461d9a)));_0x54f28f={..._0x54f28f,'id':{[sequelize_1['Op']['in']]:_0x4234aa}};}_0x2add7c==='user'&&(_0x54f28f={..._0x54f28f,'userId':_0xc56f03});_0x1d843a&&_0xb7555a&&(_0x54f28f={..._0x54f28f,'createdAt':{[sequelize_1['Op'][_0x45362c(0x135)]]:[(0x0,moment_1[_0x45362c(0x14f)])(_0x1d843a)[_0x45362c(0x141)](_0x45362c(0x14b))['toDate'](),(0x0,moment_1[_0x45362c(0x14f)])(_0xb7555a)['endOf'](_0x45362c(0x14b))[_0x45362c(0x136)]()]}});const _0x49cb4a=await Ticket_1['default'][_0x45362c(0x129)]({'where':{..._0x54f28f,'companyId':_0x2f1f33},'include':_0xddb50e,'order':[[_0x45362c(0x13c),_0x45362c(0x146)]]});return{'data':_0x49cb4a};};exports[a520_0x3e7055(0x14f)]=TicketsQueueService;