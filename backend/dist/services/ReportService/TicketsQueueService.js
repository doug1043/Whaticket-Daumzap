const a491_0x2c53a2=a491_0x5d9d;(function(_0x1b3f45,_0x52b98b){const _0x290d89=a491_0x5d9d,_0x3aac8b=_0x1b3f45();while(!![]){try{const _0x371e5b=parseInt(_0x290d89(0xae))/0x1*(-parseInt(_0x290d89(0xc2))/0x2)+parseInt(_0x290d89(0xaf))/0x3*(-parseInt(_0x290d89(0xad))/0x4)+-parseInt(_0x290d89(0xa7))/0x5*(parseInt(_0x290d89(0xc6))/0x6)+parseInt(_0x290d89(0xa1))/0x7*(-parseInt(_0x290d89(0xc1))/0x8)+parseInt(_0x290d89(0xc4))/0x9*(parseInt(_0x290d89(0xb8))/0xa)+parseInt(_0x290d89(0xaa))/0xb*(-parseInt(_0x290d89(0xb0))/0xc)+parseInt(_0x290d89(0xb5))/0xd;if(_0x371e5b===_0x52b98b)break;else _0x3aac8b['push'](_0x3aac8b['shift']());}catch(_0x2919c4){_0x3aac8b['push'](_0x3aac8b['shift']());}}}(a491_0x4de8,0xac5bd));const a491_0xc12b74=(function(){let _0x436fc2=!![];return function(_0x4a6373,_0x57d7f2){const _0x4d6724=_0x436fc2?function(){if(_0x57d7f2){const _0x10035d=_0x57d7f2['apply'](_0x4a6373,arguments);return _0x57d7f2=null,_0x10035d;}}:function(){};return _0x436fc2=![],_0x4d6724;};}()),a491_0x47d8f6=a491_0xc12b74(this,function(){const _0x214024=a491_0x5d9d;return a491_0x47d8f6['toString']()[_0x214024(0xba)](_0x214024(0xa9))[_0x214024(0xab)]()[_0x214024(0x9e)](a491_0x47d8f6)[_0x214024(0xba)](_0x214024(0xa9));});a491_0x47d8f6();'use strict';var __importDefault=this&&this[a491_0x2c53a2(0xb9)]||function(_0x3f5142){const _0x436779=a491_0x2c53a2;return _0x3f5142&&_0x3f5142[_0x436779(0xb3)]?_0x3f5142:{'default':_0x3f5142};};function a491_0x5d9d(_0x30b804,_0x5cb82f){const _0x2e31f9=a491_0x4de8();return a491_0x5d9d=function(_0x47d8f6,_0xc12b74){_0x47d8f6=_0x47d8f6-0x9c;let _0x4de8e1=_0x2e31f9[_0x47d8f6];return _0x4de8e1;},a491_0x5d9d(_0x30b804,_0x5cb82f);}function a491_0x4de8(){const _0x2e709e=['filter','startOf','map','sequelize','15wGQHSj','push','(((.+)+)+)+$','25927PXogOI','toString','default','95836LiuoFO','54163lypMJC','129bLbxVs','1032RHCDun','profile','../../models/Queue','__esModule','whatsappId','38009309MQmnTk','name','Sequelize','7330QZQYgc','__importDefault','search','col','queueId','updatedAt','user','../../models/Ticket','findAll','8qBzcmy','10seGFBx','queue','4383ebgWsf','between','1988244gdPUtP','toDate','companyId','constructor','reduce','moment','538349DAJbRp','day'];a491_0x4de8=function(){return _0x2e709e;};return a491_0x4de8();}Object['defineProperty'](exports,a491_0x2c53a2(0xb3),{'value':!![]});const sequelize_1=require(a491_0x2c53a2(0xa6)),moment_1=__importDefault(require(a491_0x2c53a2(0xa0))),Ticket_1=__importDefault(require(a491_0x2c53a2(0xbf))),Queue_1=__importDefault(require(a491_0x2c53a2(0xb2))),User_1=__importDefault(require('../../models/User')),sequelize_typescript_1=require('sequelize-typescript'),TicketsQueueService=async({dateStart:_0x5c2b83,dateEnd:_0x230e12,status:_0x50d7c3,userId:_0x25d9d6,companyId:_0x59ca7f,profile:_0x3e63fd})=>{const _0x393872=a491_0x2c53a2;let _0x118570={};const _0x222309=[{'model':User_1[_0x393872(0xac)],'as':_0x393872(0xbe),'attributes':['id',_0x393872(0xb6),_0x393872(0xb1)]},{'model':Queue_1[_0x393872(0xac)],'as':_0x393872(0xc3)}];if(_0x50d7c3){const _0x14f05f=[],_0x37e908=await Ticket_1['default'][_0x393872(0xc0)]({'where':{'status':'open'},'group':['companyId','contactId',_0x393872(0xbc),'whatsappId'],'attributes':[_0x393872(0x9d),'contactId',_0x393872(0xbc),_0x393872(0xb4),[sequelize_typescript_1[_0x393872(0xb7)]['fn']('max',sequelize_typescript_1[_0x393872(0xb7)][_0x393872(0xbb)]('id')),'id']]});_0x37e908&&_0x14f05f[_0x393872(0xa8)](_0x37e908[_0x393872(0xa5)](_0x102dc6=>_0x102dc6['id']));const _0x5bb557=_0x14f05f[_0x393872(0x9f)]((_0x594f88,_0x137973)=>_0x594f88[_0x393872(0xa3)](_0x5760fc=>_0x137973['includes'](_0x5760fc)));_0x118570={..._0x118570,'id':{[sequelize_1['Op']['in']]:_0x5bb557}};}_0x3e63fd===_0x393872(0xbe)&&(_0x118570={..._0x118570,'userId':_0x25d9d6});_0x5c2b83&&_0x230e12&&(_0x118570={..._0x118570,'createdAt':{[sequelize_1['Op'][_0x393872(0xc5)]]:[(0x0,moment_1[_0x393872(0xac)])(_0x5c2b83)[_0x393872(0xa4)](_0x393872(0xa2))[_0x393872(0x9c)](),(0x0,moment_1[_0x393872(0xac)])(_0x230e12)['endOf'](_0x393872(0xa2))[_0x393872(0x9c)]()]}});const _0x240224=await Ticket_1[_0x393872(0xac)][_0x393872(0xc0)]({'where':{..._0x118570,'companyId':_0x59ca7f},'include':_0x222309,'order':[[_0x393872(0xbd),'DESC']]});return{'data':_0x240224};};exports[a491_0x2c53a2(0xac)]=TicketsQueueService;