const a490_0x483e34=a490_0x50d7;(function(_0x22b0d6,_0x20e4a0){const _0x1e1e79=a490_0x50d7,_0x302b9c=_0x22b0d6();while(!![]){try{const _0x638e46=-parseInt(_0x1e1e79(0x12e))/0x1*(-parseInt(_0x1e1e79(0x136))/0x2)+parseInt(_0x1e1e79(0x12a))/0x3*(-parseInt(_0x1e1e79(0x140))/0x4)+-parseInt(_0x1e1e79(0x133))/0x5*(-parseInt(_0x1e1e79(0x144))/0x6)+parseInt(_0x1e1e79(0x13b))/0x7+parseInt(_0x1e1e79(0x11f))/0x8+-parseInt(_0x1e1e79(0x147))/0x9+-parseInt(_0x1e1e79(0x122))/0xa;if(_0x638e46===_0x20e4a0)break;else _0x302b9c['push'](_0x302b9c['shift']());}catch(_0x2cfb62){_0x302b9c['push'](_0x302b9c['shift']());}}}(a490_0x2976,0x691a6));const a490_0x123b4c=(function(){let _0x271cf9=!![];return function(_0x3946e3,_0xdeb3d7){const _0x455055=_0x271cf9?function(){const _0x89e4e1=a490_0x50d7;if(_0xdeb3d7){const _0x11866d=_0xdeb3d7[_0x89e4e1(0x134)](_0x3946e3,arguments);return _0xdeb3d7=null,_0x11866d;}}:function(){};return _0x271cf9=![],_0x455055;};}()),a490_0x398ed1=a490_0x123b4c(this,function(){const _0x19695f=a490_0x50d7;return a490_0x398ed1[_0x19695f(0x126)]()[_0x19695f(0x123)](_0x19695f(0x138))[_0x19695f(0x126)]()[_0x19695f(0x12b)](a490_0x398ed1)['search'](_0x19695f(0x138));});function a490_0x2976(){const _0x2ac22c=['day','max','whatsappId','3628pNrwMp','sequelize-typescript','filter','includes','1128HzUcKH','updatedAt','endOf','3178773iAIHMd','../../models/User','sequelize','Sequelize','queueId','findAll','queue','4026352XqsWMC','reduce','name','11661660JMeajk','search','defineProperty','push','toString','../../models/Ticket','profile','col','69rLMAMc','constructor','__importDefault','../../models/Queue','2pAeiVU','toDate','user','default','map','10265pBlQUx','apply','companyId','582138RRVnDs','DESC','(((.+)+)+)+$','between','__esModule','3495310oWEYJd','moment'];a490_0x2976=function(){return _0x2ac22c;};return a490_0x2976();}a490_0x398ed1();'use strict';var __importDefault=this&&this[a490_0x483e34(0x12c)]||function(_0x5bba6e){const _0x44518a=a490_0x483e34;return _0x5bba6e&&_0x5bba6e[_0x44518a(0x13a)]?_0x5bba6e:{'default':_0x5bba6e};};Object[a490_0x483e34(0x124)](exports,a490_0x483e34(0x13a),{'value':!![]});function a490_0x50d7(_0x8c158e,_0xf05bd8){const _0xa02460=a490_0x2976();return a490_0x50d7=function(_0x398ed1,_0x123b4c){_0x398ed1=_0x398ed1-0x11d;let _0x29760f=_0xa02460[_0x398ed1];return _0x29760f;},a490_0x50d7(_0x8c158e,_0xf05bd8);}const sequelize_1=require(a490_0x483e34(0x149)),moment_1=__importDefault(require(a490_0x483e34(0x13c))),Ticket_1=__importDefault(require(a490_0x483e34(0x127))),Queue_1=__importDefault(require(a490_0x483e34(0x12d))),User_1=__importDefault(require(a490_0x483e34(0x148))),sequelize_typescript_1=require(a490_0x483e34(0x141)),TicketsQueueService=async({dateStart:_0x26cbb7,dateEnd:_0xb6da18,status:_0x508d3f,userId:_0x163bc2,companyId:_0x2d57f5,profile:_0x49569a})=>{const _0x510fbe=a490_0x483e34;let _0x47934a={};const _0x48b053=[{'model':User_1[_0x510fbe(0x131)],'as':_0x510fbe(0x130),'attributes':['id',_0x510fbe(0x121),_0x510fbe(0x128)]},{'model':Queue_1[_0x510fbe(0x131)],'as':_0x510fbe(0x11e)}];if(_0x508d3f){const _0x5924b7=[],_0x5a1096=await Ticket_1[_0x510fbe(0x131)][_0x510fbe(0x11d)]({'where':{'status':'open'},'group':[_0x510fbe(0x135),'contactId',_0x510fbe(0x14b),_0x510fbe(0x13f)],'attributes':[_0x510fbe(0x135),'contactId','queueId',_0x510fbe(0x13f),[sequelize_typescript_1[_0x510fbe(0x14a)]['fn'](_0x510fbe(0x13e),sequelize_typescript_1[_0x510fbe(0x14a)][_0x510fbe(0x129)]('id')),'id']]});_0x5a1096&&_0x5924b7[_0x510fbe(0x125)](_0x5a1096[_0x510fbe(0x132)](_0x1edc6e=>_0x1edc6e['id']));const _0x485ad5=_0x5924b7[_0x510fbe(0x120)]((_0x13c2ce,_0x2ab9b6)=>_0x13c2ce[_0x510fbe(0x142)](_0x4701f0=>_0x2ab9b6[_0x510fbe(0x143)](_0x4701f0)));_0x47934a={..._0x47934a,'id':{[sequelize_1['Op']['in']]:_0x485ad5}};}_0x49569a===_0x510fbe(0x130)&&(_0x47934a={..._0x47934a,'userId':_0x163bc2});_0x26cbb7&&_0xb6da18&&(_0x47934a={..._0x47934a,'createdAt':{[sequelize_1['Op'][_0x510fbe(0x139)]]:[(0x0,moment_1[_0x510fbe(0x131)])(_0x26cbb7)['startOf'](_0x510fbe(0x13d))[_0x510fbe(0x12f)](),(0x0,moment_1['default'])(_0xb6da18)[_0x510fbe(0x146)](_0x510fbe(0x13d))['toDate']()]}});const _0x3a2203=await Ticket_1[_0x510fbe(0x131)][_0x510fbe(0x11d)]({'where':{..._0x47934a,'companyId':_0x2d57f5},'include':_0x48b053,'order':[[_0x510fbe(0x145),_0x510fbe(0x137)]]});return{'data':_0x3a2203};};exports[a490_0x483e34(0x131)]=TicketsQueueService;