const a628_0x366a88=a628_0x5930;(function(_0x23dc88,_0x4d2d19){const _0x176b13=a628_0x5930,_0x209ad7=_0x23dc88();while(!![]){try{const _0x7f3b8b=-parseInt(_0x176b13(0x185))/0x1+-parseInt(_0x176b13(0x172))/0x2+parseInt(_0x176b13(0x160))/0x3+-parseInt(_0x176b13(0x171))/0x4*(parseInt(_0x176b13(0x164))/0x5)+-parseInt(_0x176b13(0x169))/0x6+parseInt(_0x176b13(0x187))/0x7+parseInt(_0x176b13(0x16f))/0x8*(parseInt(_0x176b13(0x184))/0x9);if(_0x7f3b8b===_0x4d2d19)break;else _0x209ad7['push'](_0x209ad7['shift']());}catch(_0x325a18){_0x209ad7['push'](_0x209ad7['shift']());}}}(a628_0x9086,0x2040b));function a628_0x5930(_0x58cd02,_0x4ec5db){const _0x5a812d=a628_0x9086();return a628_0x5930=function(_0x43fe53,_0x16d33b){_0x43fe53=_0x43fe53-0x15f;let _0x908661=_0x5a812d[_0x43fe53];return _0x908661;},a628_0x5930(_0x58cd02,_0x4ec5db);}const a628_0x16d33b=(function(){let _0x1f9048=!![];return function(_0x237ea0,_0xa69284){const _0xccfecf=_0x1f9048?function(){if(_0xa69284){const _0x16803d=_0xa69284['apply'](_0x237ea0,arguments);return _0xa69284=null,_0x16803d;}}:function(){};return _0x1f9048=![],_0xccfecf;};}()),a628_0x43fe53=a628_0x16d33b(this,function(){const _0x53ec67=a628_0x5930;return a628_0x43fe53[_0x53ec67(0x173)]()[_0x53ec67(0x182)](_0x53ec67(0x165))[_0x53ec67(0x173)]()[_0x53ec67(0x170)](a628_0x43fe53)[_0x53ec67(0x182)]('(((.+)+)+)+$');});a628_0x43fe53();function a628_0x9086(){const _0x810485=['toDate','914312tjaALG','queue','356850rWXGhP','findAll','name','default','15eSdrES','(((.+)+)+)+$','DESC','queueId','endOf','338976nNJrxM','defineProperty','../../models/User','moment','../../models/Ticket','sequelize-typescript','153944vfAFSD','constructor','68008pldaVj','419256GoHxxN','toString','profile','__importDefault','whatsappId','col','day','__esModule','between','includes','Sequelize','companyId','max','updatedAt','user','contactId','search','../../models/Queue','171tiobJp','165946bXDQOp'];a628_0x9086=function(){return _0x810485;};return a628_0x9086();}'use strict';var __importDefault=this&&this[a628_0x366a88(0x175)]||function(_0x44e6bc){const _0x84279e=a628_0x366a88;return _0x44e6bc&&_0x44e6bc[_0x84279e(0x179)]?_0x44e6bc:{'default':_0x44e6bc};};Object[a628_0x366a88(0x16a)](exports,a628_0x366a88(0x179),{'value':!![]});const sequelize_1=require('sequelize'),moment_1=__importDefault(require(a628_0x366a88(0x16c))),Ticket_1=__importDefault(require(a628_0x366a88(0x16d))),Queue_1=__importDefault(require(a628_0x366a88(0x183))),User_1=__importDefault(require(a628_0x366a88(0x16b))),sequelize_typescript_1=require(a628_0x366a88(0x16e)),TicketsQueueService=async({dateStart:_0x35ec2f,dateEnd:_0x334189,status:_0x5a19b9,userId:_0xbea2fd,companyId:_0x5d0c9b,profile:_0x2ca7ef})=>{const _0x1aadae=a628_0x366a88;let _0x3bc648={};const _0x227c3e=[{'model':User_1[_0x1aadae(0x163)],'as':'user','attributes':['id',_0x1aadae(0x162),_0x1aadae(0x174)]},{'model':Queue_1[_0x1aadae(0x163)],'as':_0x1aadae(0x15f)}];if(_0x5a19b9){const _0x17b1a2=[],_0xd5c054=await Ticket_1[_0x1aadae(0x163)]['findAll']({'where':{'status':'open'},'group':['companyId','contactId',_0x1aadae(0x167),_0x1aadae(0x176)],'attributes':[_0x1aadae(0x17d),_0x1aadae(0x181),_0x1aadae(0x167),_0x1aadae(0x176),[sequelize_typescript_1[_0x1aadae(0x17c)]['fn'](_0x1aadae(0x17e),sequelize_typescript_1[_0x1aadae(0x17c)][_0x1aadae(0x177)]('id')),'id']]});_0xd5c054&&_0x17b1a2['push'](_0xd5c054['map'](_0x4594a0=>_0x4594a0['id']));const _0x1d5252=_0x17b1a2['reduce']((_0xc8c1a3,_0x533405)=>_0xc8c1a3['filter'](_0x18d5b3=>_0x533405[_0x1aadae(0x17b)](_0x18d5b3)));_0x3bc648={..._0x3bc648,'id':{[sequelize_1['Op']['in']]:_0x1d5252}};}_0x2ca7ef===_0x1aadae(0x180)&&(_0x3bc648={..._0x3bc648,'userId':_0xbea2fd});_0x35ec2f&&_0x334189&&(_0x3bc648={..._0x3bc648,'createdAt':{[sequelize_1['Op'][_0x1aadae(0x17a)]]:[(0x0,moment_1['default'])(_0x35ec2f)['startOf'](_0x1aadae(0x178))['toDate'](),(0x0,moment_1[_0x1aadae(0x163)])(_0x334189)[_0x1aadae(0x168)](_0x1aadae(0x178))[_0x1aadae(0x186)]()]}});const _0x1d8806=await Ticket_1[_0x1aadae(0x163)][_0x1aadae(0x161)]({'where':{..._0x3bc648,'companyId':_0x5d0c9b},'include':_0x227c3e,'order':[[_0x1aadae(0x17f),_0x1aadae(0x166)]]});return{'data':_0x1d8806};};exports[a628_0x366a88(0x163)]=TicketsQueueService;