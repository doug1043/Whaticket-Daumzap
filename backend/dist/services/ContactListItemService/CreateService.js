'use strict';function a514_0x3221(){const _0x1de63f=['(((.+)+)+)+$','save','message','4127430Usofxb','29313slHnsC','length','create','exists','configurable','error','apply','../../utils/logger','1VaAijn','validate','string','number','ERR_CONTACTLISTITEM_REQUIRED','2312blDrFj','search','prototype','companyId','min','__esModule','14REQQHk','__importDefault','toString','logger','jid','hasOwnProperty','__createBinding','4650810xXEkiV','yup','3239966ilswdH','12123nRbXgO','Número\x20de\x20contato\x20inválido:\x20','writable','required','10KmyKDk','default','ERR_CONTACTLISTITEM_INVALID_NAME','552GjCIzw','__setModuleDefault','defineProperty','contactListId','../../models/ContactListItem','646824carYzi','replace','599731uWeEdO','shape'];a514_0x3221=function(){return _0x1de63f;};return a514_0x3221();}const a514_0xa049f2=a514_0x2aa3;function a514_0x2aa3(_0xb148fc,_0x405b6a){const _0x5f5aa1=a514_0x3221();return a514_0x2aa3=function(_0x36eb6f,_0x23b8c){_0x36eb6f=_0x36eb6f-0x1e8;let _0x322166=_0x5f5aa1[_0x36eb6f];return _0x322166;},a514_0x2aa3(_0xb148fc,_0x405b6a);}(function(_0x1ae852,_0x5273e5){const _0x187e89=a514_0x2aa3,_0x2fa53f=_0x1ae852();while(!![]){try{const _0x281d8b=-parseInt(_0x187e89(0x20e))/0x1*(-parseInt(_0x187e89(0x1f1))/0x2)+-parseInt(_0x187e89(0x1f2))/0x3*(-parseInt(_0x187e89(0x1f9))/0x4)+-parseInt(_0x187e89(0x205))/0x5+-parseInt(_0x187e89(0x1ef))/0x6*(parseInt(_0x187e89(0x1e8))/0x7)+parseInt(_0x187e89(0x213))/0x8*(parseInt(_0x187e89(0x206))/0x9)+parseInt(_0x187e89(0x1f6))/0xa*(parseInt(_0x187e89(0x200))/0xb)+parseInt(_0x187e89(0x1fe))/0xc;if(_0x281d8b===_0x5273e5)break;else _0x2fa53f['push'](_0x2fa53f['shift']());}catch(_0x512df6){_0x2fa53f['push'](_0x2fa53f['shift']());}}}(a514_0x3221,0xcfe7d));var __createBinding=this&&this[a514_0xa049f2(0x1ee)]||(Object[a514_0xa049f2(0x208)]?function(_0x496b16,_0x27d386,_0xb2b4c8,_0x19b90a){const _0x3d85d2=a514_0xa049f2;if(_0x19b90a===undefined)_0x19b90a=_0xb2b4c8;var _0xba2cac=Object['getOwnPropertyDescriptor'](_0x27d386,_0xb2b4c8);(!_0xba2cac||('get'in _0xba2cac?!_0x27d386[_0x3d85d2(0x218)]:_0xba2cac[_0x3d85d2(0x1f4)]||_0xba2cac[_0x3d85d2(0x20a)]))&&(_0xba2cac={'enumerable':!![],'get':function(){return _0x27d386[_0xb2b4c8];}}),Object[_0x3d85d2(0x1fb)](_0x496b16,_0x19b90a,_0xba2cac);}:function(_0x181bef,_0x4fb47f,_0x255a34,_0x34c2ed){if(_0x34c2ed===undefined)_0x34c2ed=_0x255a34;_0x181bef[_0x34c2ed]=_0x4fb47f[_0x255a34];}),__setModuleDefault=this&&this[a514_0xa049f2(0x1fa)]||(Object[a514_0xa049f2(0x208)]?function(_0x32296a,_0x4eb04d){const _0x2bdb39=a514_0xa049f2;Object[_0x2bdb39(0x1fb)](_0x32296a,_0x2bdb39(0x1f7),{'enumerable':!![],'value':_0x4eb04d});}:function(_0x446002,_0x35c96b){const _0x3832e3=a514_0xa049f2;_0x446002[_0x3832e3(0x1f7)]=_0x35c96b;}),__importStar=this&&this['__importStar']||(function(){const _0x354e10=(function(){let _0x4cae6a=!![];return function(_0x51db51,_0x276b30){const _0x490d9=_0x4cae6a?function(){const _0x3a3989=a514_0x2aa3;if(_0x276b30){const _0x489a50=_0x276b30[_0x3a3989(0x20c)](_0x51db51,arguments);return _0x276b30=null,_0x489a50;}}:function(){};return _0x4cae6a=![],_0x490d9;};}()),_0x4762d5=_0x354e10(this,function(){const _0x2ddef9=a514_0x2aa3;return _0x4762d5[_0x2ddef9(0x1ea)]()[_0x2ddef9(0x214)](_0x2ddef9(0x202))[_0x2ddef9(0x1ea)]()['constructor'](_0x4762d5)[_0x2ddef9(0x214)](_0x2ddef9(0x202));});_0x4762d5();var _0x1d9275=function(_0x26dbd8){return _0x1d9275=Object['getOwnPropertyNames']||function(_0x1e2732){const _0x22ccee=a514_0x2aa3;var _0x2d47e1=[];for(var _0x2988c4 in _0x1e2732)if(Object[_0x22ccee(0x215)][_0x22ccee(0x1ed)]['call'](_0x1e2732,_0x2988c4))_0x2d47e1[_0x2d47e1[_0x22ccee(0x207)]]=_0x2988c4;return _0x2d47e1;},_0x1d9275(_0x26dbd8);};return function(_0x231149){const _0x1b16de=a514_0x2aa3;if(_0x231149&&_0x231149['__esModule'])return _0x231149;var _0x583101={};if(_0x231149!=null){for(var _0x2318f6=_0x1d9275(_0x231149),_0x11a386=0x0;_0x11a386<_0x2318f6[_0x1b16de(0x207)];_0x11a386++)if(_0x2318f6[_0x11a386]!==_0x1b16de(0x1f7))__createBinding(_0x583101,_0x231149,_0x2318f6[_0x11a386]);}return __setModuleDefault(_0x583101,_0x231149),_0x583101;};}()),__importDefault=this&&this[a514_0xa049f2(0x1e9)]||function(_0x4ad80f){return _0x4ad80f&&_0x4ad80f['__esModule']?_0x4ad80f:{'default':_0x4ad80f};};Object[a514_0xa049f2(0x1fb)](exports,a514_0xa049f2(0x218),{'value':!![]});const Yup=__importStar(require(a514_0xa049f2(0x1f0))),AppError_1=__importDefault(require('../../errors/AppError')),ContactListItem_1=__importDefault(require(a514_0xa049f2(0x1fd))),logger_1=require(a514_0xa049f2(0x20d)),CheckNumber_1=__importDefault(require('../WbotServices/CheckNumber')),CreateService=async _0x12f514=>{const _0x1d0007=a514_0xa049f2,{name:_0x8c374f}=_0x12f514,_0x3e6ee9=Yup['object']()[_0x1d0007(0x201)]({'name':Yup[_0x1d0007(0x210)]()[_0x1d0007(0x217)](0x3,_0x1d0007(0x1f8))[_0x1d0007(0x1f5)](_0x1d0007(0x212))});try{await _0x3e6ee9[_0x1d0007(0x20f)]({'name':_0x8c374f});}catch(_0x2110a5){throw new AppError_1[(_0x1d0007(0x1f7))](_0x2110a5[_0x1d0007(0x204)]);}const [_0x3015d9]=await ContactListItem_1[_0x1d0007(0x1f7)]['findOrCreate']({'where':{'number':_0x12f514[_0x1d0007(0x211)],'companyId':_0x12f514['companyId'],'contactListId':_0x12f514[_0x1d0007(0x1fc)]},'defaults':_0x12f514});try{const _0x867732=await(0x0,CheckNumber_1['default'])(_0x3015d9['number'],_0x3015d9[_0x1d0007(0x216)]);_0x3015d9['isWhatsappValid']=_0x867732[_0x1d0007(0x209)];const _0xf770df=_0x867732[_0x1d0007(0x1ec)][_0x1d0007(0x1ff)](/\D/g,'');_0x3015d9['number']=_0xf770df,await _0x3015d9[_0x1d0007(0x203)]();}catch(_0x1dd73e){logger_1[_0x1d0007(0x1eb)][_0x1d0007(0x20b)](_0x1d0007(0x1f3)+_0x3015d9[_0x1d0007(0x211)]);}return _0x3015d9;};exports[a514_0xa049f2(0x1f7)]=CreateService;