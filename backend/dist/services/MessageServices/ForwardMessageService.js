const a477_0x10aeea=a477_0x1fbf;function a477_0x2e65(){const _0x525199=['75057ZXBSDc','9896574ijalLX','__importDefault','error','../../libs/wbot','logger','ERR_SENDING_WAPP_MSG','channel','../WbotServices/VerifyHandlers','number','ERR_OTHER_OPEN_TICKET','userId','5552721rPuITi','@g.us','search','constructor','../../utils/logger','contact','50narEAX','(((.+)+)+)+$','1285326VhAsBc','../TicketServices/CreateTicketService','getWbot','ERR_CREATING_TICKET','sendMessage','toString','whatsapp','ticket','136ADFCgw','dataJson','7970895pyuSoV','defineProperty','companyId','4AueIrS','../../helpers/GetDefaultWhatsApp','../../errors/AppError','default','verifyMessage','ERR_NO_DEF_WAPP_FOUND','@s.whatsapp.net','1223709TCEZry','__esModule','10553672gZxrYi','isGroup'];a477_0x2e65=function(){return _0x525199;};return a477_0x2e65();}(function(_0x4bb8c1,_0xf6c5c8){const _0x19ddc1=a477_0x1fbf,_0x282b77=_0x4bb8c1();while(!![]){try{const _0x53a47c=parseInt(_0x19ddc1(0x209))/0x1+parseInt(_0x19ddc1(0x1fd))/0x2*(-parseInt(_0x19ddc1(0x20d))/0x3)+-parseInt(_0x19ddc1(0x202))/0x4*(parseInt(_0x19ddc1(0x1ff))/0x5)+-parseInt(_0x19ddc1(0x20e))/0x6+parseInt(_0x19ddc1(0x1f5))/0x7+parseInt(_0x19ddc1(0x20b))/0x8+-parseInt(_0x19ddc1(0x219))/0x9*(-parseInt(_0x19ddc1(0x21f))/0xa);if(_0x53a47c===_0xf6c5c8)break;else _0x282b77['push'](_0x282b77['shift']());}catch(_0x42b7a2){_0x282b77['push'](_0x282b77['shift']());}}}(a477_0x2e65,0xd38b1));const a477_0x2f312a=(function(){let _0x211eee=!![];return function(_0x21117f,_0x3c4323){const _0x3f8424=_0x211eee?function(){if(_0x3c4323){const _0x3d3d26=_0x3c4323['apply'](_0x21117f,arguments);return _0x3c4323=null,_0x3d3d26;}}:function(){};return _0x211eee=![],_0x3f8424;};}()),a477_0x515f86=a477_0x2f312a(this,function(){const _0x45d14c=a477_0x1fbf;return a477_0x515f86['toString']()[_0x45d14c(0x21b)](_0x45d14c(0x1f4))[_0x45d14c(0x1fa)]()[_0x45d14c(0x21c)](a477_0x515f86)[_0x45d14c(0x21b)](_0x45d14c(0x1f4));});a477_0x515f86();'use strict';var __importDefault=this&&this[a477_0x10aeea(0x20f)]||function(_0x49770c){const _0x9a93f8=a477_0x10aeea;return _0x49770c&&_0x49770c[_0x9a93f8(0x20a)]?_0x49770c:{'default':_0x49770c};};Object[a477_0x10aeea(0x200)](exports,a477_0x10aeea(0x20a),{'value':!![]});const logger_1=require(a477_0x10aeea(0x21d)),GetDefaultWhatsApp_1=__importDefault(require(a477_0x10aeea(0x203))),AppError_1=__importDefault(require(a477_0x10aeea(0x204))),wbot_1=require(a477_0x10aeea(0x211)),VerifyHandlers_1=require(a477_0x10aeea(0x215)),CheckContactOpenTickets_1=__importDefault(require('../../helpers/CheckContactOpenTickets')),CreateTicketService_1=__importDefault(require(a477_0x10aeea(0x1f6))),ForwardMessageService=async(_0x58a576,_0x3e4c3a,_0x12c526,_0x33592f)=>{const _0x1652d8=a477_0x10aeea,_0x18d148=_0x3e4c3a[_0x1652d8(0x1fc)][_0x1652d8(0x1fb)]||await(0x0,GetDefaultWhatsApp_1['default'])(_0x12c526[_0x1652d8(0x201)]);if(!_0x18d148)throw new AppError_1[(_0x1652d8(0x205))](_0x1652d8(0x207),0x194);if(_0x18d148[_0x1652d8(0x214)]!==_0x1652d8(0x1fb))throw new AppError_1[(_0x1652d8(0x205))]('ERR_INVALID_CHANNEL',0x190);let _0x41b61f=await(0x0,CheckContactOpenTickets_1[_0x1652d8(0x205)])(_0x12c526['id'],_0x18d148['id'],!![]);if(_0x41b61f&&_0x41b61f[_0x1652d8(0x218)]!==_0x58a576['id'])throw new AppError_1['default'](_0x1652d8(0x217),0x190);!_0x41b61f&&(_0x41b61f=await(0x0,CreateTicketService_1[_0x1652d8(0x205)])({'contactId':_0x12c526['id'],'userId':_0x58a576['id'],'companyId':_0x12c526[_0x1652d8(0x201)],'queueId':_0x33592f?.['id']}));if(!_0x41b61f)throw new AppError_1[(_0x1652d8(0x205))](_0x1652d8(0x1f8),0x1f4);if(_0x18d148[_0x1652d8(0x214)]==='whatsapp')try{const _0x3eb41b=(0x0,wbot_1[_0x1652d8(0x1f7)])(_0x18d148['id']),_0x2ea820=JSON['parse'](_0x3e4c3a[_0x1652d8(0x1fe)]),_0x465c05=_0x12c526[_0x1652d8(0x20c)]?_0x12c526['number']+_0x1652d8(0x21a):_0x12c526[_0x1652d8(0x216)]+_0x1652d8(0x208),_0x4f1a76=await _0x3eb41b[_0x1652d8(0x1f9)](_0x465c05,{'forward':_0x2ea820}),_0x29904c=_0x3e4c3a['mediaUrl']?await(0x0,VerifyHandlers_1['verifyMediaMessage'])(_0x4f1a76,_0x41b61f,_0x41b61f[_0x1652d8(0x21e)],_0x3eb41b,null,_0x58a576['id']):await(0x0,VerifyHandlers_1[_0x1652d8(0x206)])(_0x4f1a76,_0x41b61f,_0x41b61f['contact'],_0x58a576['id']);return _0x29904c;}catch(_0x3af175){logger_1[_0x1652d8(0x212)][_0x1652d8(0x210)](_0x3af175);throw new AppError_1[(_0x1652d8(0x205))](_0x1652d8(0x213),0x1f4);}return null;};function a477_0x1fbf(_0x4e6398,_0x40ace7){const _0x398850=a477_0x2e65();return a477_0x1fbf=function(_0x515f86,_0x2f312a){_0x515f86=_0x515f86-0x1f4;let _0x2e6512=_0x398850[_0x515f86];return _0x2e6512;},a477_0x1fbf(_0x4e6398,_0x40ace7);}exports[a477_0x10aeea(0x205)]=ForwardMessageService;