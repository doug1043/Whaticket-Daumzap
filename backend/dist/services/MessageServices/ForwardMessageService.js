function a480_0x6980(){const _0x544c21=['592758jWBXRO','verifyMessage','257745pRbHwK','companyId','ERR_INVALID_CHANNEL','ERR_OTHER_OPEN_TICKET','__importDefault','24vYicKR','../TicketServices/CreateTicketService','error','20DwHBMu','length','sendMessage','remoteJid','../../helpers/GetDefaultWhatsApp','contact','default','isGroup','whatsapp','../WbotServices/VerifyHandlers','5165844IwNppk','2YQVToT','verifyMediaMessage','201981FaQBMR','number','dataJson','493361UbhCSC','parse','__esModule','ERR_NO_DEF_WAPP_FOUND','392ibJBxu','21623UspjYY','@g.us','../../utils/logger','s.whatsapp.net','logger','mediaUrl','search','42EfJihH','50092oZJwgj','toString','channel','defineProperty','(((.+)+)+)+$'];a480_0x6980=function(){return _0x544c21;};return a480_0x6980();}const a480_0x1282a5=a480_0x4a56;(function(_0x5e019b,_0x34bbb7){const _0x57874a=a480_0x4a56,_0x2f1406=_0x5e019b();while(!![]){try{const _0x6ff4de=parseInt(_0x57874a(0x11a))/0x1*(parseInt(_0x57874a(0x118))/0x2)+-parseInt(_0x57874a(0x129))/0x3*(-parseInt(_0x57874a(0x12a))/0x4)+-parseInt(_0x57874a(0x131))/0x5*(-parseInt(_0x57874a(0x136))/0x6)+-parseInt(_0x57874a(0x122))/0x7*(parseInt(_0x57874a(0x121))/0x8)+parseInt(_0x57874a(0x12f))/0x9+parseInt(_0x57874a(0x10d))/0xa*(parseInt(_0x57874a(0x11d))/0xb)+-parseInt(_0x57874a(0x117))/0xc;if(_0x6ff4de===_0x34bbb7)break;else _0x2f1406['push'](_0x2f1406['shift']());}catch(_0x8f7cbd){_0x2f1406['push'](_0x2f1406['shift']());}}}(a480_0x6980,0x2661f));const a480_0x5e6626=(function(){let _0x5aaee2=!![];return function(_0x475d78,_0x1dc31b){const _0x18cc45=_0x5aaee2?function(){if(_0x1dc31b){const _0xff699d=_0x1dc31b['apply'](_0x475d78,arguments);return _0x1dc31b=null,_0xff699d;}}:function(){};return _0x5aaee2=![],_0x18cc45;};}()),a480_0x3e33ec=a480_0x5e6626(this,function(){const _0x110b4c=a480_0x4a56;return a480_0x3e33ec[_0x110b4c(0x12b)]()[_0x110b4c(0x128)](_0x110b4c(0x12e))[_0x110b4c(0x12b)]()['constructor'](a480_0x3e33ec)['search'](_0x110b4c(0x12e));});a480_0x3e33ec();'use strict';var __importDefault=this&&this[a480_0x1282a5(0x135)]||function(_0x4da509){const _0x41deba=a480_0x1282a5;return _0x4da509&&_0x4da509[_0x41deba(0x11f)]?_0x4da509:{'default':_0x4da509};};Object[a480_0x1282a5(0x12d)](exports,a480_0x1282a5(0x11f),{'value':!![]});const logger_1=require(a480_0x1282a5(0x124)),GetDefaultWhatsApp_1=__importDefault(require(a480_0x1282a5(0x111))),AppError_1=__importDefault(require('../../errors/AppError')),wbot_1=require('../../libs/wbot'),VerifyHandlers_1=require(a480_0x1282a5(0x116)),CheckContactOpenTickets_1=__importDefault(require('../../helpers/CheckContactOpenTickets')),CreateTicketService_1=__importDefault(require(a480_0x1282a5(0x137))),ForwardMessageService=async(_0x169dd7,_0x36457a,_0x47b465,_0x406127)=>{const _0x34926d=a480_0x1282a5,_0xa7d917=_0x36457a['ticket']['whatsapp']||await(0x0,GetDefaultWhatsApp_1[_0x34926d(0x113)])(_0x47b465[_0x34926d(0x132)]);if(!_0xa7d917)throw new AppError_1['default'](_0x34926d(0x120),0x194);if(_0xa7d917[_0x34926d(0x12c)]!==_0x34926d(0x115))throw new AppError_1[(_0x34926d(0x113))](_0x34926d(0x133),0x190);let _0xa22546=await(0x0,CheckContactOpenTickets_1[_0x34926d(0x113)])(_0x47b465['id'],_0xa7d917['id'],!![]);if(_0xa22546&&_0xa22546['userId']!==_0x169dd7['id'])throw new AppError_1[(_0x34926d(0x113))](_0x34926d(0x134),0x190);!_0xa22546&&(_0xa22546=await(0x0,CreateTicketService_1['default'])({'contactId':_0x47b465['id'],'userId':_0x169dd7['id'],'companyId':_0x47b465['companyId'],'queueId':_0x406127?.['id']}));if(!_0xa22546)throw new AppError_1['default']('ERR_CREATING_TICKET',0x1f4);if(_0xa7d917[_0x34926d(0x12c)]===_0x34926d(0x115))try{const _0x11a5e6=(0x0,wbot_1['getWbot'])(_0xa7d917['id']),_0x4b6e5f=JSON[_0x34926d(0x11e)](_0x36457a[_0x34926d(0x11c)]),_0xeb60a8=_0x47b465[_0x34926d(0x114)]?_0x47b465[_0x34926d(0x11b)]+_0x34926d(0x123):_0x47b465[_0x34926d(0x110)]||_0x47b465[_0x34926d(0x11b)]+'@'+(_0x47b465[_0x34926d(0x11b)][_0x34926d(0x10e)]>0xd?'lid':_0x34926d(0x125)),_0x3a7dc2=await _0x11a5e6[_0x34926d(0x10f)](_0xeb60a8,{'forward':_0x4b6e5f}),_0x19df1d=_0x36457a[_0x34926d(0x127)]?await(0x0,VerifyHandlers_1[_0x34926d(0x119)])(_0x3a7dc2,_0xa22546,_0xa22546[_0x34926d(0x112)],_0x11a5e6,null,_0x169dd7['id']):await(0x0,VerifyHandlers_1[_0x34926d(0x130)])(_0x3a7dc2,_0xa22546,_0xa22546[_0x34926d(0x112)],_0x169dd7['id']);return _0x19df1d;}catch(_0x3851a9){logger_1[_0x34926d(0x126)][_0x34926d(0x138)](_0x3851a9);throw new AppError_1[(_0x34926d(0x113))]('ERR_SENDING_WAPP_MSG',0x1f4);}return null;};function a480_0x4a56(_0x1b889d,_0x3cf939){const _0x35e8cc=a480_0x6980();return a480_0x4a56=function(_0x3e33ec,_0x5e6626){_0x3e33ec=_0x3e33ec-0x10d;let _0x6980b9=_0x35e8cc[_0x3e33ec];return _0x6980b9;},a480_0x4a56(_0x1b889d,_0x3cf939);}exports[a480_0x1282a5(0x113)]=ForwardMessageService;