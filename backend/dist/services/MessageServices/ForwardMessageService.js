function a580_0xccea(_0x1c67d4,_0x33a57a){const _0x4413ac=a580_0x1dc2();return a580_0xccea=function(_0x56944b,_0x1f150c){_0x56944b=_0x56944b-0x66;let _0x1dc2ed=_0x4413ac[_0x56944b];return _0x1dc2ed;},a580_0xccea(_0x1c67d4,_0x33a57a);}const a580_0x192d65=a580_0xccea;(function(_0x43d644,_0x46d133){const _0x2babf2=a580_0xccea,_0xe4898=_0x43d644();while(!![]){try{const _0x3f8b72=-parseInt(_0x2babf2(0x90))/0x1+-parseInt(_0x2babf2(0x7f))/0x2*(parseInt(_0x2babf2(0x8f))/0x3)+-parseInt(_0x2babf2(0x7d))/0x4+parseInt(_0x2babf2(0x67))/0x5+-parseInt(_0x2babf2(0x78))/0x6*(parseInt(_0x2babf2(0x8e))/0x7)+parseInt(_0x2babf2(0x91))/0x8+parseInt(_0x2babf2(0x88))/0x9;if(_0x3f8b72===_0x46d133)break;else _0xe4898['push'](_0xe4898['shift']());}catch(_0x287912){_0xe4898['push'](_0xe4898['shift']());}}}(a580_0x1dc2,0xab3f9));const a580_0x1f150c=(function(){let _0x207cb7=!![];return function(_0x1810d9,_0x48da18){const _0x19350e=_0x207cb7?function(){const _0x24d286=a580_0xccea;if(_0x48da18){const _0x159e4b=_0x48da18[_0x24d286(0x6c)](_0x1810d9,arguments);return _0x48da18=null,_0x159e4b;}}:function(){};return _0x207cb7=![],_0x19350e;};}()),a580_0x56944b=a580_0x1f150c(this,function(){const _0x178ffd=a580_0xccea;return a580_0x56944b[_0x178ffd(0x68)]()[_0x178ffd(0x7a)](_0x178ffd(0x79))[_0x178ffd(0x68)]()[_0x178ffd(0x66)](a580_0x56944b)[_0x178ffd(0x7a)](_0x178ffd(0x79));});a580_0x56944b();'use strict';function a580_0x1dc2(){const _0x139f97=['../../helpers/CheckContactOpenTickets','20830203yaZSeA','ERR_SENDING_WAPP_MSG','number','parse','__esModule','verifyMessage','106302OgDHxO','1168689hSoToO','506245jeDaKF','10166168CJeAUe','../WbotServices/VerifyHandlers','remoteJid','../../helpers/GetDefaultWhatsApp','constructor','3626530kamFWB','toString','sendMessage','ERR_INVALID_CHANNEL','__importDefault','apply','../../errors/AppError','dataJson','../../libs/wbot','ERR_CREATING_TICKET','whatsapp','contact','ERR_NO_DEF_WAPP_FOUND','@g.us','channel','lid','verifyMediaMessage','276ebXbiw','(((.+)+)+)+$','search','defineProperty','ticket','4942484jZvTqK','getWbot','6ubFJNj','logger','default','s.whatsapp.net','ERR_OTHER_OPEN_TICKET','length','companyId','userId'];a580_0x1dc2=function(){return _0x139f97;};return a580_0x1dc2();}var __importDefault=this&&this[a580_0x192d65(0x6b)]||function(_0x63ef73){const _0x5117e2=a580_0x192d65;return _0x63ef73&&_0x63ef73[_0x5117e2(0x8c)]?_0x63ef73:{'default':_0x63ef73};};Object[a580_0x192d65(0x7b)](exports,'__esModule',{'value':!![]});const logger_1=require('../../utils/logger'),GetDefaultWhatsApp_1=__importDefault(require(a580_0x192d65(0x94))),AppError_1=__importDefault(require(a580_0x192d65(0x6d))),wbot_1=require(a580_0x192d65(0x6f)),VerifyHandlers_1=require(a580_0x192d65(0x92)),CheckContactOpenTickets_1=__importDefault(require(a580_0x192d65(0x87))),CreateTicketService_1=__importDefault(require('../TicketServices/CreateTicketService')),ForwardMessageService=async(_0x46accf,_0x574a1f,_0x37cb0d,_0x321229)=>{const _0x5eddea=a580_0x192d65,_0x3f558e=_0x574a1f[_0x5eddea(0x7c)][_0x5eddea(0x71)]||await(0x0,GetDefaultWhatsApp_1[_0x5eddea(0x81)])(_0x37cb0d['companyId']);if(!_0x3f558e)throw new AppError_1[(_0x5eddea(0x81))](_0x5eddea(0x73),0x194);if(_0x3f558e[_0x5eddea(0x75)]!==_0x5eddea(0x71))throw new AppError_1['default'](_0x5eddea(0x6a),0x190);let _0xca4fad=await(0x0,CheckContactOpenTickets_1[_0x5eddea(0x81)])(_0x37cb0d['id'],_0x3f558e['id'],!![]);if(_0xca4fad&&_0xca4fad[_0x5eddea(0x86)]!==_0x46accf['id'])throw new AppError_1['default'](_0x5eddea(0x83),0x190);!_0xca4fad&&(_0xca4fad=await(0x0,CreateTicketService_1[_0x5eddea(0x81)])({'contactId':_0x37cb0d['id'],'userId':_0x46accf['id'],'companyId':_0x37cb0d[_0x5eddea(0x85)],'queueId':_0x321229?.['id']}));if(!_0xca4fad)throw new AppError_1['default'](_0x5eddea(0x70),0x1f4);if(_0x3f558e[_0x5eddea(0x75)]===_0x5eddea(0x71))try{const _0x2dae53=(0x0,wbot_1[_0x5eddea(0x7e)])(_0x3f558e['id']),_0xfa3ea8=JSON[_0x5eddea(0x8b)](_0x574a1f[_0x5eddea(0x6e)]),_0x25b71f=_0x37cb0d['isGroup']?_0x37cb0d[_0x5eddea(0x8a)]+_0x5eddea(0x74):_0x37cb0d[_0x5eddea(0x93)]||_0x37cb0d[_0x5eddea(0x8a)]+'@'+(_0x37cb0d[_0x5eddea(0x8a)][_0x5eddea(0x84)]>0xd?_0x5eddea(0x76):_0x5eddea(0x82)),_0x4224ab=await _0x2dae53[_0x5eddea(0x69)](_0x25b71f,{'forward':_0xfa3ea8}),_0x5d83d0=_0x574a1f['mediaUrl']?await(0x0,VerifyHandlers_1[_0x5eddea(0x77)])(_0x4224ab,_0xca4fad,_0xca4fad[_0x5eddea(0x72)],_0x2dae53,null,_0x46accf['id']):await(0x0,VerifyHandlers_1[_0x5eddea(0x8d)])(_0x4224ab,_0xca4fad,_0xca4fad[_0x5eddea(0x72)],_0x46accf['id']);return _0x5d83d0;}catch(_0x2b5614){logger_1[_0x5eddea(0x80)]['error'](_0x2b5614);throw new AppError_1['default'](_0x5eddea(0x89),0x1f4);}return null;};exports[a580_0x192d65(0x81)]=ForwardMessageService;