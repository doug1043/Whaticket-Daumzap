const a581_0x349836=a581_0x2788;function a581_0x2788(_0x4c16d8,_0x55d094){const _0x17a7e4=a581_0x250a();return a581_0x2788=function(_0xc66149,_0x1687e6){_0xc66149=_0xc66149-0x16f;let _0x250ad6=_0x17a7e4[_0xc66149];return _0x250ad6;},a581_0x2788(_0x4c16d8,_0x55d094);}(function(_0x6f4781,_0x6d74ba){const _0x25af39=a581_0x2788,_0x1b4576=_0x6f4781();while(!![]){try{const _0x372426=parseInt(_0x25af39(0x171))/0x1*(-parseInt(_0x25af39(0x194))/0x2)+-parseInt(_0x25af39(0x199))/0x3*(-parseInt(_0x25af39(0x170))/0x4)+parseInt(_0x25af39(0x189))/0x5+-parseInt(_0x25af39(0x185))/0x6*(parseInt(_0x25af39(0x198))/0x7)+-parseInt(_0x25af39(0x182))/0x8*(-parseInt(_0x25af39(0x17f))/0x9)+-parseInt(_0x25af39(0x192))/0xa+parseInt(_0x25af39(0x186))/0xb;if(_0x372426===_0x6d74ba)break;else _0x1b4576['push'](_0x1b4576['shift']());}catch(_0x500ce7){_0x1b4576['push'](_0x1b4576['shift']());}}}(a581_0x250a,0x6a7fa));const a581_0x1687e6=(function(){let _0x636f79=!![];return function(_0x1608e1,_0x35ef41){const _0x53a4ca=_0x636f79?function(){const _0x235d27=a581_0x2788;if(_0x35ef41){const _0x458b24=_0x35ef41[_0x235d27(0x175)](_0x1608e1,arguments);return _0x35ef41=null,_0x458b24;}}:function(){};return _0x636f79=![],_0x53a4ca;};}()),a581_0xc66149=a581_0x1687e6(this,function(){const _0xfbd8f7=a581_0x2788;return a581_0xc66149['toString']()['search'](_0xfbd8f7(0x18c))[_0xfbd8f7(0x177)]()[_0xfbd8f7(0x193)](a581_0xc66149)['search'](_0xfbd8f7(0x18c));});a581_0xc66149();'use strict';function a581_0x250a(){const _0x18ae11=['sendMessage','dataJson','9OBxOpv','mediaUrl','userId','4625624WUTGtO','s.whatsapp.net','remoteJid','84KsyEAO','5633826XSjLWf','companyId','ERR_CREATING_TICKET','239515iLQZZG','default','ticket','(((.+)+)+)+$','../../helpers/CheckContactOpenTickets','number','verifyMediaMessage','logger','channel','7000790pOsgId','constructor','112OgvNej','error','getWbot','parse','239281BZCqAD','1689825AJoHxE','contact','../../libs/wbot','ERR_SENDING_WAPP_MSG','4OvzChN','1548WIbsdR','__esModule','isGroup','ERR_INVALID_CHANNEL','apply','../TicketServices/CreateTicketService','toString','__importDefault','../WbotServices/VerifyHandlers','ERR_NO_DEF_WAPP_FOUND','@g.us','whatsapp'];a581_0x250a=function(){return _0x18ae11;};return a581_0x250a();}var __importDefault=this&&this[a581_0x349836(0x178)]||function(_0x3414ec){const _0xc151d2=a581_0x349836;return _0x3414ec&&_0x3414ec[_0xc151d2(0x172)]?_0x3414ec:{'default':_0x3414ec};};Object['defineProperty'](exports,a581_0x349836(0x172),{'value':!![]});const logger_1=require('../../utils/logger'),GetDefaultWhatsApp_1=__importDefault(require('../../helpers/GetDefaultWhatsApp')),AppError_1=__importDefault(require('../../errors/AppError')),wbot_1=require(a581_0x349836(0x19b)),VerifyHandlers_1=require(a581_0x349836(0x179)),CheckContactOpenTickets_1=__importDefault(require(a581_0x349836(0x18d))),CreateTicketService_1=__importDefault(require(a581_0x349836(0x176))),ForwardMessageService=async(_0xfd9543,_0x386a49,_0x4716de,_0x3a5c74)=>{const _0x126590=a581_0x349836,_0x11d2c9=_0x386a49[_0x126590(0x18b)][_0x126590(0x17c)]||await(0x0,GetDefaultWhatsApp_1['default'])(_0x4716de[_0x126590(0x187)]);if(!_0x11d2c9)throw new AppError_1['default'](_0x126590(0x17a),0x194);if(_0x11d2c9['channel']!==_0x126590(0x17c))throw new AppError_1[(_0x126590(0x18a))](_0x126590(0x174),0x190);let _0x430cd9=await(0x0,CheckContactOpenTickets_1['default'])(_0x4716de['id'],_0x11d2c9['id'],!![]);if(_0x430cd9&&_0x430cd9[_0x126590(0x181)]!==_0xfd9543['id'])throw new AppError_1['default']('ERR_OTHER_OPEN_TICKET',0x190);!_0x430cd9&&(_0x430cd9=await(0x0,CreateTicketService_1[_0x126590(0x18a)])({'contactId':_0x4716de['id'],'userId':_0xfd9543['id'],'companyId':_0x4716de[_0x126590(0x187)],'queueId':_0x3a5c74?.['id']}));if(!_0x430cd9)throw new AppError_1[(_0x126590(0x18a))](_0x126590(0x188),0x1f4);if(_0x11d2c9[_0x126590(0x191)]==='whatsapp')try{const _0x4abba4=(0x0,wbot_1[_0x126590(0x196)])(_0x11d2c9['id']),_0x3d56cb=JSON[_0x126590(0x197)](_0x386a49[_0x126590(0x17e)]),_0x4c7d78=_0x4716de[_0x126590(0x173)]?_0x4716de[_0x126590(0x18e)]+_0x126590(0x17b):_0x4716de[_0x126590(0x184)]||_0x4716de[_0x126590(0x18e)]+'@'+(_0x4716de[_0x126590(0x18e)]['length']>0xd?'lid':_0x126590(0x183)),_0x5b38ae=await _0x4abba4[_0x126590(0x17d)](_0x4c7d78,{'forward':_0x3d56cb}),_0x1e0f2b=_0x386a49[_0x126590(0x180)]?await(0x0,VerifyHandlers_1[_0x126590(0x18f)])(_0x5b38ae,_0x430cd9,_0x430cd9[_0x126590(0x19a)],_0x4abba4,null,_0xfd9543['id']):await(0x0,VerifyHandlers_1['verifyMessage'])(_0x5b38ae,_0x430cd9,_0x430cd9[_0x126590(0x19a)],_0xfd9543['id']);return _0x1e0f2b;}catch(_0x60b759){logger_1[_0x126590(0x190)][_0x126590(0x195)](_0x60b759);throw new AppError_1[(_0x126590(0x18a))](_0x126590(0x16f),0x1f4);}return null;};exports[a581_0x349836(0x18a)]=ForwardMessageService;