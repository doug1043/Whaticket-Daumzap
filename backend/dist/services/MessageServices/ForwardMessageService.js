const a477_0x164572=a477_0x39b4;(function(_0x3f277b,_0x1804c2){const _0x3fa11f=a477_0x39b4,_0x308a65=_0x3f277b();while(!![]){try{const _0xcc8d7c=-parseInt(_0x3fa11f(0x1eb))/0x1+parseInt(_0x3fa11f(0x206))/0x2+-parseInt(_0x3fa11f(0x20d))/0x3+parseInt(_0x3fa11f(0x209))/0x4*(parseInt(_0x3fa11f(0x1ee))/0x5)+parseInt(_0x3fa11f(0x1fa))/0x6*(parseInt(_0x3fa11f(0x1ef))/0x7)+parseInt(_0x3fa11f(0x1ff))/0x8*(parseInt(_0x3fa11f(0x1e9))/0x9)+-parseInt(_0x3fa11f(0x1f4))/0xa*(-parseInt(_0x3fa11f(0x1f9))/0xb);if(_0xcc8d7c===_0x1804c2)break;else _0x308a65['push'](_0x308a65['shift']());}catch(_0x3ebf41){_0x308a65['push'](_0x308a65['shift']());}}}(a477_0x2f8f,0x8bfc9));const a477_0x40db4d=(function(){let _0x4d7a3a=!![];return function(_0x4e056b,_0x2b289c){const _0x108c04=_0x4d7a3a?function(){const _0xe361ad=a477_0x39b4;if(_0x2b289c){const _0x585fa0=_0x2b289c[_0xe361ad(0x1f0)](_0x4e056b,arguments);return _0x2b289c=null,_0x585fa0;}}:function(){};return _0x4d7a3a=![],_0x108c04;};}()),a477_0x326d38=a477_0x40db4d(this,function(){const _0x438af7=a477_0x39b4;return a477_0x326d38['toString']()[_0x438af7(0x1f2)](_0x438af7(0x1f7))[_0x438af7(0x20b)]()[_0x438af7(0x1f8)](a477_0x326d38)['search'](_0x438af7(0x1f7));});function a477_0x39b4(_0x289fa6,_0x2c715b){const _0x5f0c28=a477_0x2f8f();return a477_0x39b4=function(_0x326d38,_0x40db4d){_0x326d38=_0x326d38-0x1e8;let _0x2f8fc6=_0x5f0c28[_0x326d38];return _0x2f8fc6;},a477_0x39b4(_0x289fa6,_0x2c715b);}a477_0x326d38();function a477_0x2f8f(){const _0x47fb6e=['275202ooCMpD','__importDefault','ERR_INVALID_CHANNEL','@g.us','default','8lYXXHZ','../../helpers/GetDefaultWhatsApp','parse','channel','../../libs/wbot','mediaUrl','ERR_CREATING_TICKET','97446XmjdnF','../WbotServices/VerifyHandlers','defineProperty','12640EGskPH','ticket','toString','userId','2697165iKceIR','getWbot','contact','number','companyId','logger','4412421kWRDvb','../../errors/AppError','1080130tBQMqI','ERR_OTHER_OPEN_TICKET','sendMessage','445OQRFPB','84wAmjXE','apply','../../helpers/CheckContactOpenTickets','search','__esModule','30lvFsVa','isGroup','whatsapp','(((.+)+)+)+$','constructor','4333758VymGGk'];a477_0x2f8f=function(){return _0x47fb6e;};return a477_0x2f8f();}'use strict';var __importDefault=this&&this[a477_0x164572(0x1fb)]||function(_0x854089){const _0xfe1f18=a477_0x164572;return _0x854089&&_0x854089[_0xfe1f18(0x1f3)]?_0x854089:{'default':_0x854089};};Object[a477_0x164572(0x208)](exports,a477_0x164572(0x1f3),{'value':!![]});const logger_1=require('../../utils/logger'),GetDefaultWhatsApp_1=__importDefault(require(a477_0x164572(0x200))),AppError_1=__importDefault(require(a477_0x164572(0x1ea))),wbot_1=require(a477_0x164572(0x203)),VerifyHandlers_1=require(a477_0x164572(0x207)),CheckContactOpenTickets_1=__importDefault(require(a477_0x164572(0x1f1))),CreateTicketService_1=__importDefault(require('../TicketServices/CreateTicketService')),ForwardMessageService=async(_0x603163,_0x8874b,_0x560bce,_0x3cd47f)=>{const _0x5c7d45=a477_0x164572,_0x539969=_0x8874b[_0x5c7d45(0x20a)][_0x5c7d45(0x1f6)]||await(0x0,GetDefaultWhatsApp_1[_0x5c7d45(0x1fe)])(_0x560bce[_0x5c7d45(0x211)]);if(!_0x539969)throw new AppError_1[(_0x5c7d45(0x1fe))]('ERR_NO_DEF_WAPP_FOUND',0x194);if(_0x539969[_0x5c7d45(0x202)]!==_0x5c7d45(0x1f6))throw new AppError_1[(_0x5c7d45(0x1fe))](_0x5c7d45(0x1fc),0x190);let _0x43f787=await(0x0,CheckContactOpenTickets_1['default'])(_0x560bce['id'],_0x539969['id'],!![]);if(_0x43f787&&_0x43f787[_0x5c7d45(0x20c)]!==_0x603163['id'])throw new AppError_1[(_0x5c7d45(0x1fe))](_0x5c7d45(0x1ec),0x190);!_0x43f787&&(_0x43f787=await(0x0,CreateTicketService_1[_0x5c7d45(0x1fe)])({'contactId':_0x560bce['id'],'userId':_0x603163['id'],'companyId':_0x560bce['companyId'],'queueId':_0x3cd47f?.['id']}));if(!_0x43f787)throw new AppError_1[(_0x5c7d45(0x1fe))](_0x5c7d45(0x205),0x1f4);if(_0x539969[_0x5c7d45(0x202)]==='whatsapp')try{const _0x3409e4=(0x0,wbot_1[_0x5c7d45(0x20e)])(_0x539969['id']),_0x1141b5=JSON[_0x5c7d45(0x201)](_0x8874b['dataJson']),_0x4199c9=_0x560bce[_0x5c7d45(0x1f5)]?_0x560bce[_0x5c7d45(0x210)]+_0x5c7d45(0x1fd):_0x560bce['number']+'@s.whatsapp.net',_0x705cf2=await _0x3409e4[_0x5c7d45(0x1ed)](_0x4199c9,{'forward':_0x1141b5}),_0x3edd7e=_0x8874b[_0x5c7d45(0x204)]?await(0x0,VerifyHandlers_1['verifyMediaMessage'])(_0x705cf2,_0x43f787,_0x43f787[_0x5c7d45(0x20f)],_0x3409e4,null,_0x603163['id']):await(0x0,VerifyHandlers_1['verifyMessage'])(_0x705cf2,_0x43f787,_0x43f787[_0x5c7d45(0x20f)],_0x603163['id']);return _0x3edd7e;}catch(_0x635ca1){logger_1[_0x5c7d45(0x1e8)]['error'](_0x635ca1);throw new AppError_1[(_0x5c7d45(0x1fe))]('ERR_SENDING_WAPP_MSG',0x1f4);}return null;};exports['default']=ForwardMessageService;