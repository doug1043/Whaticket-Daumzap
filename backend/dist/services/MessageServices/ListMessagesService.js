const a448_0x3032e5=a448_0x1b62;(function(_0x361318,_0x1c3687){const _0x39b56c=a448_0x1b62,_0x314b03=_0x361318();while(!![]){try{const _0x5b6806=-parseInt(_0x39b56c(0x17b))/0x1+-parseInt(_0x39b56c(0x16a))/0x2*(-parseInt(_0x39b56c(0x17d))/0x3)+-parseInt(_0x39b56c(0x16e))/0x4+-parseInt(_0x39b56c(0x166))/0x5+parseInt(_0x39b56c(0x172))/0x6+-parseInt(_0x39b56c(0x179))/0x7+parseInt(_0x39b56c(0x165))/0x8;if(_0x5b6806===_0x1c3687)break;else _0x314b03['push'](_0x314b03['shift']());}catch(_0x40d453){_0x314b03['push'](_0x314b03['shift']());}}}(a448_0x1c31,0x8900d));const a448_0xcc6189=(function(){let _0x15667e=!![];return function(_0x2886eb,_0x5c83e3){const _0x4cbe0f=_0x15667e?function(){const _0x15d434=a448_0x1b62;if(_0x5c83e3){const _0x4ce51e=_0x5c83e3[_0x15d434(0x169)](_0x2886eb,arguments);return _0x5c83e3=null,_0x4ce51e;}}:function(){};return _0x15667e=![],_0x4cbe0f;};}()),a448_0x1eae50=a448_0xcc6189(this,function(){const _0x18cfa0=a448_0x1b62;return a448_0x1eae50[_0x18cfa0(0x16c)]()[_0x18cfa0(0x17a)]('(((.+)+)+)+$')[_0x18cfa0(0x16c)]()[_0x18cfa0(0x171)](a448_0x1eae50)[_0x18cfa0(0x17a)](_0x18cfa0(0x175));});function a448_0x1c31(){const _0x289af5=['constructor','2684784OsWFvc','reverse','defineProperty','(((.+)+)+)+$','queue','DESC','default','4365809bAieVJ','search','146207cmaccz','findAndCountAll','618384XiqGcn','../../models/Message','queueId','../../errors/AppError','length','oldMessages','contact','14727224oZGXnm','5571080hDnCeY','../../models/Queue','ERR_NO_TICKET_FOUND','apply','2dzcBZu','sequelize','toString','createdAt','196880votboN','../TicketServices/ShowTicketService','__esModule'];a448_0x1c31=function(){return _0x289af5;};return a448_0x1c31();}a448_0x1eae50();function a448_0x1b62(_0x5d49bb,_0x13f6ba){const _0x119135=a448_0x1c31();return a448_0x1b62=function(_0x1eae50,_0xcc6189){_0x1eae50=_0x1eae50-0x164;let _0x1c31eb=_0x119135[_0x1eae50];return _0x1c31eb;},a448_0x1b62(_0x5d49bb,_0x13f6ba);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1539f4){return _0x1539f4&&_0x1539f4['__esModule']?_0x1539f4:{'default':_0x1539f4};};Object[a448_0x3032e5(0x174)](exports,a448_0x3032e5(0x170),{'value':!![]});const sequelize_1=require(a448_0x3032e5(0x16b)),AppError_1=__importDefault(require(a448_0x3032e5(0x180))),Message_1=__importDefault(require(a448_0x3032e5(0x17e))),ShowTicketService_1=__importDefault(require(a448_0x3032e5(0x16f))),Queue_1=__importDefault(require(a448_0x3032e5(0x167))),OldMessage_1=__importDefault(require('../../models/OldMessage')),ListMessagesService=async({pageNumber:pageNumber='1',ticketId:_0x2e90bd,companyId:_0x555793,queues:queues=[]})=>{const _0x361bf8=a448_0x3032e5,_0x2a1380=await(0x0,ShowTicketService_1['default'])(_0x2e90bd,_0x555793);if(!_0x2a1380)throw new AppError_1[(_0x361bf8(0x178))](_0x361bf8(0x168),0x194);const _0x5ea9a2=0x14,_0x1caddf=_0x5ea9a2*(+pageNumber-0x1),_0x2180d8={'where':{'ticketId':_0x2e90bd,'companyId':_0x555793}};queues[_0x361bf8(0x181)]>0x0&&(_0x2180d8['where'][_0x361bf8(0x17f)]={[sequelize_1['Op']['or']]:{[sequelize_1['Op']['in']]:queues,[sequelize_1['Op']['eq']]:null}});const {count:_0x176ea2,rows:_0xc7ba33}=await Message_1['default'][_0x361bf8(0x17c)]({..._0x2180d8,'limit':_0x5ea9a2,'include':['contact',{'model':Message_1[_0x361bf8(0x178)],'as':'quotedMsg','include':[_0x361bf8(0x164)]},{'model':OldMessage_1[_0x361bf8(0x178)],'as':_0x361bf8(0x182)},{'model':Queue_1[_0x361bf8(0x178)],'as':_0x361bf8(0x176)}],'offset':_0x1caddf,'order':[[_0x361bf8(0x16d),_0x361bf8(0x177)]]}),_0x40152c=_0x176ea2>_0x1caddf+_0xc7ba33[_0x361bf8(0x181)];return{'messages':_0xc7ba33[_0x361bf8(0x173)](),'ticket':_0x2a1380,'count':_0x176ea2,'hasMore':_0x40152c};};exports[a448_0x3032e5(0x178)]=ListMessagesService;