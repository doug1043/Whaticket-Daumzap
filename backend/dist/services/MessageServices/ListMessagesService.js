const a447_0x13549d=a447_0x579d;(function(_0x14f629,_0x16c940){const _0x2153a7=a447_0x579d,_0x54960b=_0x14f629();while(!![]){try{const _0x20b67a=-parseInt(_0x2153a7(0x10f))/0x1*(-parseInt(_0x2153a7(0x11a))/0x2)+parseInt(_0x2153a7(0x117))/0x3*(parseInt(_0x2153a7(0x113))/0x4)+parseInt(_0x2153a7(0x109))/0x5+parseInt(_0x2153a7(0x123))/0x6*(parseInt(_0x2153a7(0x105))/0x7)+-parseInt(_0x2153a7(0x110))/0x8*(parseInt(_0x2153a7(0x101))/0x9)+-parseInt(_0x2153a7(0x108))/0xa+-parseInt(_0x2153a7(0x10a))/0xb;if(_0x20b67a===_0x16c940)break;else _0x54960b['push'](_0x54960b['shift']());}catch(_0x6a0141){_0x54960b['push'](_0x54960b['shift']());}}}(a447_0x3832,0xc85b7));function a447_0x3832(){const _0x2601db=['createdAt','toString','queueId','1375329qvBAmA','sequelize','contact','1774vWUXfo','../../errors/AppError','search','defineProperty','(((.+)+)+)+$','DESC','quotedMsg','ERR_NO_TICKET_FOUND','constructor','63474oZZWtw','findAndCountAll','61416bCzSrE','queue','where','../../models/OldMessage','21NVXeVX','../../models/Message','__esModule','2115540JBpBwb','1803950xVJPVB','2177450bGtcbm','oldMessages','__importDefault','apply','default','1243Jpmrrm','848wznDrO','../TicketServices/ShowTicketService','length','4AVfudU'];a447_0x3832=function(){return _0x2601db;};return a447_0x3832();}function a447_0x579d(_0x2369f6,_0x918c04){const _0xcb6dd2=a447_0x3832();return a447_0x579d=function(_0x212093,_0x1adbeb){_0x212093=_0x212093-0x100;let _0x3832f9=_0xcb6dd2[_0x212093];return _0x3832f9;},a447_0x579d(_0x2369f6,_0x918c04);}const a447_0x1adbeb=(function(){let _0x3ab470=!![];return function(_0x26ad09,_0x50db63){const _0x5c9d5f=_0x3ab470?function(){const _0x556ea1=a447_0x579d;if(_0x50db63){const _0x1e03bc=_0x50db63[_0x556ea1(0x10d)](_0x26ad09,arguments);return _0x50db63=null,_0x1e03bc;}}:function(){};return _0x3ab470=![],_0x5c9d5f;};}()),a447_0x212093=a447_0x1adbeb(this,function(){const _0x382aa5=a447_0x579d;return a447_0x212093[_0x382aa5(0x115)]()[_0x382aa5(0x11c)](_0x382aa5(0x11e))[_0x382aa5(0x115)]()[_0x382aa5(0x122)](a447_0x212093)[_0x382aa5(0x11c)](_0x382aa5(0x11e));});a447_0x212093();'use strict';var __importDefault=this&&this[a447_0x13549d(0x10c)]||function(_0x563f87){const _0x1e723=a447_0x13549d;return _0x563f87&&_0x563f87[_0x1e723(0x107)]?_0x563f87:{'default':_0x563f87};};Object[a447_0x13549d(0x11d)](exports,'__esModule',{'value':!![]});const sequelize_1=require(a447_0x13549d(0x118)),AppError_1=__importDefault(require(a447_0x13549d(0x11b))),Message_1=__importDefault(require(a447_0x13549d(0x106))),ShowTicketService_1=__importDefault(require(a447_0x13549d(0x111))),Queue_1=__importDefault(require('../../models/Queue')),OldMessage_1=__importDefault(require(a447_0x13549d(0x104))),ListMessagesService=async({pageNumber:pageNumber='1',ticketId:_0x3858f7,companyId:_0x469c77,queues:queues=[]})=>{const _0x5b98bf=a447_0x13549d,_0x353732=await(0x0,ShowTicketService_1['default'])(_0x3858f7,_0x469c77);if(!_0x353732)throw new AppError_1[(_0x5b98bf(0x10e))](_0x5b98bf(0x121),0x194);const _0x1cf6d3=0x14,_0x5c5be8=_0x1cf6d3*(+pageNumber-0x1),_0x2a7d22={'where':{'ticketId':_0x3858f7,'companyId':_0x469c77}};queues['length']>0x0&&(_0x2a7d22[_0x5b98bf(0x103)][_0x5b98bf(0x116)]={[sequelize_1['Op']['or']]:{[sequelize_1['Op']['in']]:queues,[sequelize_1['Op']['eq']]:null}});const {count:_0x195ae5,rows:_0x47318e}=await Message_1[_0x5b98bf(0x10e)][_0x5b98bf(0x100)]({..._0x2a7d22,'limit':_0x1cf6d3,'include':[_0x5b98bf(0x119),{'model':Message_1[_0x5b98bf(0x10e)],'as':_0x5b98bf(0x120),'include':[_0x5b98bf(0x119)]},{'model':OldMessage_1['default'],'as':_0x5b98bf(0x10b)},{'model':Queue_1[_0x5b98bf(0x10e)],'as':_0x5b98bf(0x102)}],'offset':_0x5c5be8,'order':[[_0x5b98bf(0x114),_0x5b98bf(0x11f)]]}),_0x212321=_0x195ae5>_0x5c5be8+_0x47318e[_0x5b98bf(0x112)];return{'messages':_0x47318e['reverse'](),'ticket':_0x353732,'count':_0x195ae5,'hasMore':_0x212321};};exports[a447_0x13549d(0x10e)]=ListMessagesService;