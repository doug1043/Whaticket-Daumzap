function a447_0x427e(){const _0x15fd56=['532472MRKUbw','828869VpQMOc','quotedMsg','default','__esModule','../../models/OldMessage','findAndCountAll','search','reverse','DESC','289186FSLRou','../../models/Queue','21835KariHA','37143MLuTJu','../../models/Message','contact','18CofTGd','(((.+)+)+)+$','queueId','3282MjqGat','createdAt','apply','where','constructor','__importDefault','1208IPOtjo','defineProperty','6433pwmDQX','2165200fGFaFh','5050YWGwRO','length','toString','oldMessages'];a447_0x427e=function(){return _0x15fd56;};return a447_0x427e();}const a447_0x5b2064=a447_0x3bae;function a447_0x3bae(_0x56ad2f,_0x17f028){const _0x2975da=a447_0x427e();return a447_0x3bae=function(_0x4a7dd0,_0x7b6ca4){_0x4a7dd0=_0x4a7dd0-0xe0;let _0x427ea7=_0x2975da[_0x4a7dd0];return _0x427ea7;},a447_0x3bae(_0x56ad2f,_0x17f028);}(function(_0x1f8640,_0x2a3e34){const _0x42a840=a447_0x3bae,_0x2b437a=_0x1f8640();while(!![]){try{const _0x692e9c=parseInt(_0x42a840(0xea))/0x1+parseInt(_0x42a840(0xf3))/0x2+parseInt(_0x42a840(0xf9))/0x3*(-parseInt(_0x42a840(0xe9))/0x4)+parseInt(_0x42a840(0xe4))/0x5+parseInt(_0x42a840(0xfc))/0x6*(-parseInt(_0x42a840(0xe3))/0x7)+-parseInt(_0x42a840(0xe1))/0x8*(parseInt(_0x42a840(0xf6))/0x9)+parseInt(_0x42a840(0xe5))/0xa*(parseInt(_0x42a840(0xf5))/0xb);if(_0x692e9c===_0x2a3e34)break;else _0x2b437a['push'](_0x2b437a['shift']());}catch(_0x380be2){_0x2b437a['push'](_0x2b437a['shift']());}}}(a447_0x427e,0x763fd));const a447_0x7b6ca4=(function(){let _0xafaed5=!![];return function(_0x20315b,_0x30209e){const _0xc20ab3=_0xafaed5?function(){const _0x461332=a447_0x3bae;if(_0x30209e){const _0x494faa=_0x30209e[_0x461332(0xfe)](_0x20315b,arguments);return _0x30209e=null,_0x494faa;}}:function(){};return _0xafaed5=![],_0xc20ab3;};}()),a447_0x4a7dd0=a447_0x7b6ca4(this,function(){const _0x21b17d=a447_0x3bae;return a447_0x4a7dd0[_0x21b17d(0xe7)]()[_0x21b17d(0xf0)](_0x21b17d(0xfa))[_0x21b17d(0xe7)]()[_0x21b17d(0x100)](a447_0x4a7dd0)[_0x21b17d(0xf0)]('(((.+)+)+)+$');});a447_0x4a7dd0();'use strict';var __importDefault=this&&this[a447_0x5b2064(0xe0)]||function(_0x53549e){const _0x23a8be=a447_0x5b2064;return _0x53549e&&_0x53549e[_0x23a8be(0xed)]?_0x53549e:{'default':_0x53549e};};Object[a447_0x5b2064(0xe2)](exports,a447_0x5b2064(0xed),{'value':!![]});const sequelize_1=require('sequelize'),AppError_1=__importDefault(require('../../errors/AppError')),Message_1=__importDefault(require(a447_0x5b2064(0xf7))),ShowTicketService_1=__importDefault(require('../TicketServices/ShowTicketService')),Queue_1=__importDefault(require(a447_0x5b2064(0xf4))),OldMessage_1=__importDefault(require(a447_0x5b2064(0xee))),ListMessagesService=async({pageNumber:pageNumber='1',ticketId:_0x3fe785,companyId:_0x224d8e,queues:queues=[]})=>{const _0x521fa2=a447_0x5b2064,_0x107662=await(0x0,ShowTicketService_1[_0x521fa2(0xec)])(_0x3fe785,_0x224d8e);if(!_0x107662)throw new AppError_1[(_0x521fa2(0xec))]('ERR_NO_TICKET_FOUND',0x194);const _0x325bbf=0x14,_0x242946=_0x325bbf*(+pageNumber-0x1),_0x55ec0d={'where':{'ticketId':_0x3fe785,'companyId':_0x224d8e}};queues[_0x521fa2(0xe6)]>0x0&&(_0x55ec0d[_0x521fa2(0xff)][_0x521fa2(0xfb)]={[sequelize_1['Op']['or']]:{[sequelize_1['Op']['in']]:queues,[sequelize_1['Op']['eq']]:null}});const {count:_0x427508,rows:_0x351d6e}=await Message_1['default'][_0x521fa2(0xef)]({..._0x55ec0d,'limit':_0x325bbf,'include':[_0x521fa2(0xf8),{'model':Message_1['default'],'as':_0x521fa2(0xeb),'include':[_0x521fa2(0xf8)]},{'model':OldMessage_1[_0x521fa2(0xec)],'as':_0x521fa2(0xe8)},{'model':Queue_1[_0x521fa2(0xec)],'as':'queue'}],'offset':_0x242946,'order':[[_0x521fa2(0xfd),_0x521fa2(0xf2)]]}),_0x3dba30=_0x427508>_0x242946+_0x351d6e[_0x521fa2(0xe6)];return{'messages':_0x351d6e[_0x521fa2(0xf1)](),'ticket':_0x107662,'count':_0x427508,'hasMore':_0x3dba30};};exports[a447_0x5b2064(0xec)]=ListMessagesService;