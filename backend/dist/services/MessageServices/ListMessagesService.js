const a447_0x24328e=a447_0x5b7a;(function(_0x278d15,_0x8f0f11){const _0x264f6c=a447_0x5b7a,_0x386134=_0x278d15();while(!![]){try{const _0x4d2c51=-parseInt(_0x264f6c(0xbd))/0x1*(parseInt(_0x264f6c(0xb5))/0x2)+parseInt(_0x264f6c(0xb3))/0x3+parseInt(_0x264f6c(0xb6))/0x4+parseInt(_0x264f6c(0xc5))/0x5+parseInt(_0x264f6c(0xcd))/0x6+parseInt(_0x264f6c(0xbc))/0x7+parseInt(_0x264f6c(0xca))/0x8*(-parseInt(_0x264f6c(0xb0))/0x9);if(_0x4d2c51===_0x8f0f11)break;else _0x386134['push'](_0x386134['shift']());}catch(_0x3a1fbb){_0x386134['push'](_0x386134['shift']());}}}(a447_0x3f3a,0x9e4d7));const a447_0x578529=(function(){let _0x406986=!![];return function(_0x48970a,_0x16b06c){const _0x24a64e=_0x406986?function(){const _0x4e6886=a447_0x5b7a;if(_0x16b06c){const _0x5a6237=_0x16b06c[_0x4e6886(0xb7)](_0x48970a,arguments);return _0x16b06c=null,_0x5a6237;}}:function(){};return _0x406986=![],_0x24a64e;};}()),a447_0x2fb84e=a447_0x578529(this,function(){const _0x4bb703=a447_0x5b7a;return a447_0x2fb84e[_0x4bb703(0xb4)]()[_0x4bb703(0xc2)](_0x4bb703(0xb8))['toString']()[_0x4bb703(0xc3)](a447_0x2fb84e)[_0x4bb703(0xc2)](_0x4bb703(0xb8));});a447_0x2fb84e();'use strict';function a447_0x5b7a(_0x1732f9,_0x486d66){const _0x2e935b=a447_0x3f3a();return a447_0x5b7a=function(_0x2fb84e,_0x578529){_0x2fb84e=_0x2fb84e-0xb0;let _0x3f3ae0=_0x2e935b[_0x2fb84e];return _0x3f3ae0;},a447_0x5b7a(_0x1732f9,_0x486d66);}function a447_0x3f3a(){const _0x13ef0=['../../models/Queue','quotedMsg','where','8vvAXjY','sequelize','__esModule','2213256MegkeX','4001184IVIQPT','length','defineProperty','1288236DgTCDV','toString','6sfzRdt','820060NhalsD','apply','(((.+)+)+)+$','queue','queueId','default','3771565Vejjnx','154501bdbEjR','../../errors/AppError','contact','reverse','findAndCountAll','search','constructor','ERR_NO_TICKET_FOUND','71940sxeIkg','DESC'];a447_0x3f3a=function(){return _0x13ef0;};return a447_0x3f3a();}var __importDefault=this&&this['__importDefault']||function(_0x2f37ea){const _0x20be1c=a447_0x5b7a;return _0x2f37ea&&_0x2f37ea[_0x20be1c(0xcc)]?_0x2f37ea:{'default':_0x2f37ea};};Object[a447_0x24328e(0xb2)](exports,a447_0x24328e(0xcc),{'value':!![]});const sequelize_1=require(a447_0x24328e(0xcb)),AppError_1=__importDefault(require(a447_0x24328e(0xbe))),Message_1=__importDefault(require('../../models/Message')),ShowTicketService_1=__importDefault(require('../TicketServices/ShowTicketService')),Queue_1=__importDefault(require(a447_0x24328e(0xc7))),OldMessage_1=__importDefault(require('../../models/OldMessage')),ListMessagesService=async({pageNumber:pageNumber='1',ticketId:_0x1ef8fd,companyId:_0x1f0f9f,queues:queues=[]})=>{const _0x37b5cc=a447_0x24328e,_0x327929=await(0x0,ShowTicketService_1['default'])(_0x1ef8fd,_0x1f0f9f);if(!_0x327929)throw new AppError_1['default'](_0x37b5cc(0xc4),0x194);const _0x46aeba=0x14,_0x1eeaf3=_0x46aeba*(+pageNumber-0x1),_0x39a09f={'where':{'ticketId':_0x1ef8fd,'companyId':_0x1f0f9f}};queues[_0x37b5cc(0xb1)]>0x0&&(_0x39a09f[_0x37b5cc(0xc9)][_0x37b5cc(0xba)]={[sequelize_1['Op']['or']]:{[sequelize_1['Op']['in']]:queues,[sequelize_1['Op']['eq']]:null}});const {count:_0x35126d,rows:_0x43c630}=await Message_1[_0x37b5cc(0xbb)][_0x37b5cc(0xc1)]({..._0x39a09f,'limit':_0x46aeba,'include':[_0x37b5cc(0xbf),{'model':Message_1[_0x37b5cc(0xbb)],'as':_0x37b5cc(0xc8),'include':[_0x37b5cc(0xbf)]},{'model':OldMessage_1[_0x37b5cc(0xbb)],'as':'oldMessages'},{'model':Queue_1['default'],'as':_0x37b5cc(0xb9)}],'offset':_0x1eeaf3,'order':[['createdAt',_0x37b5cc(0xc6)]]}),_0x1fc206=_0x35126d>_0x1eeaf3+_0x43c630[_0x37b5cc(0xb1)];return{'messages':_0x43c630[_0x37b5cc(0xc0)](),'ticket':_0x327929,'count':_0x35126d,'hasMore':_0x1fc206};};exports[a447_0x24328e(0xbb)]=ListMessagesService;