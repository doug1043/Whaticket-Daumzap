function a445_0x2065(_0xca32f8,_0x1891c0){const _0x3aff33=a445_0x1969();return a445_0x2065=function(_0x244821,_0x18141e){_0x244821=_0x244821-0x9b;let _0x19692a=_0x3aff33[_0x244821];return _0x19692a;},a445_0x2065(_0xca32f8,_0x1891c0);}function a445_0x1969(){const _0x927009=['../../models/OldMessage','quotedMsg','oldMessages','defineProperty','1011564vgQbgI','__importDefault','queue','1121528ShFsmw','739730RcCJGp','toString','contact','DESC','../TicketServices/ShowTicketService','../../errors/AppError','77220GNcCcq','ERR_NO_TICKET_FOUND','apply','reverse','length','../../models/Queue','default','where','queueId','7HSuHIx','createdAt','search','(((.+)+)+)+$','constructor','752118RUBUAG','1204164JxUKDv','1375395dBhzWk'];a445_0x1969=function(){return _0x927009;};return a445_0x1969();}const a445_0x16e082=a445_0x2065;(function(_0x3c795d,_0x349d55){const _0x31367b=a445_0x2065,_0x532cf8=_0x3c795d();while(!![]){try{const _0x383445=parseInt(_0x31367b(0xb6))/0x1+parseInt(_0x31367b(0xb0))/0x2+parseInt(_0x31367b(0xac))/0x3+-parseInt(_0x31367b(0xa6))/0x4+-parseInt(_0x31367b(0xa7))/0x5+-parseInt(_0x31367b(0xa5))/0x6*(-parseInt(_0x31367b(0xa0))/0x7)+-parseInt(_0x31367b(0xaf))/0x8;if(_0x383445===_0x349d55)break;else _0x532cf8['push'](_0x532cf8['shift']());}catch(_0x3771f8){_0x532cf8['push'](_0x532cf8['shift']());}}}(a445_0x1969,0x2f323));const a445_0x18141e=(function(){let _0x20bb7c=!![];return function(_0x3fb7d0,_0x73b8cc){const _0x5d9d25=_0x20bb7c?function(){const _0x145f54=a445_0x2065;if(_0x73b8cc){const _0x54bf4d=_0x73b8cc[_0x145f54(0xb8)](_0x3fb7d0,arguments);return _0x73b8cc=null,_0x54bf4d;}}:function(){};return _0x20bb7c=![],_0x5d9d25;};}()),a445_0x244821=a445_0x18141e(this,function(){const _0x511897=a445_0x2065;return a445_0x244821[_0x511897(0xb1)]()['search'](_0x511897(0xa3))['toString']()[_0x511897(0xa4)](a445_0x244821)[_0x511897(0xa2)]('(((.+)+)+)+$');});a445_0x244821();'use strict';var __importDefault=this&&this[a445_0x16e082(0xad)]||function(_0x4f3716){return _0x4f3716&&_0x4f3716['__esModule']?_0x4f3716:{'default':_0x4f3716};};Object[a445_0x16e082(0xab)](exports,'__esModule',{'value':!![]});const sequelize_1=require('sequelize'),AppError_1=__importDefault(require(a445_0x16e082(0xb5))),Message_1=__importDefault(require('../../models/Message')),ShowTicketService_1=__importDefault(require(a445_0x16e082(0xb4))),Queue_1=__importDefault(require(a445_0x16e082(0x9c))),OldMessage_1=__importDefault(require(a445_0x16e082(0xa8))),ListMessagesService=async({pageNumber:pageNumber='1',ticketId:_0xf6287b,companyId:_0x1a74ba,queues:queues=[]})=>{const _0x5f3ef7=a445_0x16e082,_0x42b413=await(0x0,ShowTicketService_1[_0x5f3ef7(0x9d)])(_0xf6287b,_0x1a74ba);if(!_0x42b413)throw new AppError_1[(_0x5f3ef7(0x9d))](_0x5f3ef7(0xb7),0x194);const _0x4cc718=0x14,_0x11d853=_0x4cc718*(+pageNumber-0x1),_0x900b42={'where':{'ticketId':_0xf6287b,'companyId':_0x1a74ba}};queues[_0x5f3ef7(0x9b)]>0x0&&(_0x900b42[_0x5f3ef7(0x9e)][_0x5f3ef7(0x9f)]={[sequelize_1['Op']['or']]:{[sequelize_1['Op']['in']]:queues,[sequelize_1['Op']['eq']]:null}});const {count:_0x447896,rows:_0x2885cf}=await Message_1[_0x5f3ef7(0x9d)]['findAndCountAll']({..._0x900b42,'limit':_0x4cc718,'include':[_0x5f3ef7(0xb2),{'model':Message_1[_0x5f3ef7(0x9d)],'as':_0x5f3ef7(0xa9),'include':[_0x5f3ef7(0xb2)]},{'model':OldMessage_1[_0x5f3ef7(0x9d)],'as':_0x5f3ef7(0xaa)},{'model':Queue_1[_0x5f3ef7(0x9d)],'as':_0x5f3ef7(0xae)}],'offset':_0x11d853,'order':[[_0x5f3ef7(0xa1),_0x5f3ef7(0xb3)]]}),_0x482299=_0x447896>_0x11d853+_0x2885cf[_0x5f3ef7(0x9b)];return{'messages':_0x2885cf[_0x5f3ef7(0xb9)](),'ticket':_0x42b413,'count':_0x447896,'hasMore':_0x482299};};exports['default']=ListMessagesService;