const a449_0x2b56a9=a449_0x13d8;(function(_0x367ff6,_0x4403c8){const _0x5c404e=a449_0x13d8,_0x1ac3c5=_0x367ff6();while(!![]){try{const _0x4041d1=-parseInt(_0x5c404e(0x17b))/0x1+-parseInt(_0x5c404e(0x184))/0x2+-parseInt(_0x5c404e(0x178))/0x3*(parseInt(_0x5c404e(0x17d))/0x4)+-parseInt(_0x5c404e(0x172))/0x5+-parseInt(_0x5c404e(0x189))/0x6*(-parseInt(_0x5c404e(0x18c))/0x7)+-parseInt(_0x5c404e(0x17e))/0x8+parseInt(_0x5c404e(0x18e))/0x9;if(_0x4041d1===_0x4403c8)break;else _0x1ac3c5['push'](_0x1ac3c5['shift']());}catch(_0x24ed91){_0x1ac3c5['push'](_0x1ac3c5['shift']());}}}(a449_0x40c7,0x1a2ad));function a449_0x13d8(_0x2b9fbc,_0x42c77c){const _0x386534=a449_0x40c7();return a449_0x13d8=function(_0x4eaf73,_0x8ab164){_0x4eaf73=_0x4eaf73-0x172;let _0x40c769=_0x386534[_0x4eaf73];return _0x40c769;},a449_0x13d8(_0x2b9fbc,_0x42c77c);}const a449_0x8ab164=(function(){let _0x16dc50=!![];return function(_0x202f4d,_0x2afa7f){const _0x24d040=_0x16dc50?function(){const _0x13fc9d=a449_0x13d8;if(_0x2afa7f){const _0x524710=_0x2afa7f[_0x13fc9d(0x181)](_0x202f4d,arguments);return _0x2afa7f=null,_0x524710;}}:function(){};return _0x16dc50=![],_0x24d040;};}()),a449_0x4eaf73=a449_0x8ab164(this,function(){const _0x596c19=a449_0x13d8;return a449_0x4eaf73[_0x596c19(0x18a)]()[_0x596c19(0x17f)](_0x596c19(0x17c))['toString']()[_0x596c19(0x187)](a449_0x4eaf73)[_0x596c19(0x17f)](_0x596c19(0x17c));});a449_0x4eaf73();'use strict';var __importDefault=this&&this[a449_0x2b56a9(0x173)]||function(_0x3a7284){return _0x3a7284&&_0x3a7284['__esModule']?_0x3a7284:{'default':_0x3a7284};};Object[a449_0x2b56a9(0x176)](exports,a449_0x2b56a9(0x179),{'value':!![]});const sequelize_1=require(a449_0x2b56a9(0x177)),AppError_1=__importDefault(require(a449_0x2b56a9(0x18f))),Message_1=__importDefault(require(a449_0x2b56a9(0x17a))),ShowTicketService_1=__importDefault(require('../TicketServices/ShowTicketService')),Queue_1=__importDefault(require(a449_0x2b56a9(0x174))),OldMessage_1=__importDefault(require(a449_0x2b56a9(0x188))),ListMessagesService=async({pageNumber:pageNumber='1',ticketId:_0x3eb881,companyId:_0x5005b3,queues:queues=[]})=>{const _0x2a9176=a449_0x2b56a9,_0x47e8a4=await(0x0,ShowTicketService_1[_0x2a9176(0x18b)])(_0x3eb881,_0x5005b3);if(!_0x47e8a4)throw new AppError_1[(_0x2a9176(0x18b))]('ERR_NO_TICKET_FOUND',0x194);const _0xa50059=0x14,_0x61ac55=_0xa50059*(+pageNumber-0x1),_0x183aa7={'where':{'ticketId':_0x3eb881,'companyId':_0x5005b3}};queues[_0x2a9176(0x180)]>0x0&&(_0x183aa7[_0x2a9176(0x182)][_0x2a9176(0x185)]={[sequelize_1['Op']['or']]:{[sequelize_1['Op']['in']]:queues,[sequelize_1['Op']['eq']]:null}});const {count:_0x239c10,rows:_0x4c2c22}=await Message_1[_0x2a9176(0x18b)][_0x2a9176(0x186)]({..._0x183aa7,'limit':_0xa50059,'include':['contact',{'model':Message_1[_0x2a9176(0x18b)],'as':_0x2a9176(0x175),'include':['contact']},{'model':OldMessage_1['default'],'as':_0x2a9176(0x18d)},{'model':Queue_1[_0x2a9176(0x18b)],'as':'queue'}],'offset':_0x61ac55,'order':[['createdAt',_0x2a9176(0x183)]]}),_0x1fd9b9=_0x239c10>_0x61ac55+_0x4c2c22[_0x2a9176(0x180)];return{'messages':_0x4c2c22['reverse'](),'ticket':_0x47e8a4,'count':_0x239c10,'hasMore':_0x1fd9b9};};function a449_0x40c7(){const _0x22d5ad=['6Vpbaai','toString','default','563878zWgBVz','oldMessages','6612120baIwKY','../../errors/AppError','368440xRzTsl','__importDefault','../../models/Queue','quotedMsg','defineProperty','sequelize','431571zsPMkh','__esModule','../../models/Message','166450wacIhs','(((.+)+)+)+$','4eWWwPM','1265048eAwlRZ','search','length','apply','where','DESC','331854rDGYYa','queueId','findAndCountAll','constructor','../../models/OldMessage'];a449_0x40c7=function(){return _0x22d5ad;};return a449_0x40c7();}exports[a449_0x2b56a9(0x18b)]=ListMessagesService;