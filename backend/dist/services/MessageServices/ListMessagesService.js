function a448_0x1722(){const _0x4af7b1=['contact','../../errors/AppError','length','ERR_NO_TICKET_FOUND','findAndCountAll','../../models/Queue','DESC','search','toString','2fqJPNo','45361YHLgcF','queueId','27291mdRchI','1462705QZBIWj','219402uAnxaH','1715816QNyKPb','constructor','12yvspMQ','apply','defineProperty','2064mPWJRT','../../models/OldMessage','sequelize','../TicketServices/ShowTicketService','../../models/Message','default','420430ujsWuG','queue','2710788lZOqNa','21YryhPD','__importDefault','63GmItPj'];a448_0x1722=function(){return _0x4af7b1;};return a448_0x1722();}const a448_0x13cf0e=a448_0x3398;(function(_0x12c5d2,_0x24182a){const _0x29d88f=a448_0x3398,_0x50f7d4=_0x12c5d2();while(!![]){try{const _0x3ac389=parseInt(_0x29d88f(0xd2))/0x1*(parseInt(_0x29d88f(0xd1))/0x2)+-parseInt(_0x29d88f(0xd6))/0x3+-parseInt(_0x29d88f(0xb9))/0x4*(-parseInt(_0x29d88f(0xd5))/0x5)+-parseInt(_0x29d88f(0xc4))/0x6+parseInt(_0x29d88f(0xc5))/0x7*(-parseInt(_0x29d88f(0xb7))/0x8)+parseInt(_0x29d88f(0xc7))/0x9*(parseInt(_0x29d88f(0xc2))/0xa)+-parseInt(_0x29d88f(0xd4))/0xb*(-parseInt(_0x29d88f(0xbc))/0xc);if(_0x3ac389===_0x24182a)break;else _0x50f7d4['push'](_0x50f7d4['shift']());}catch(_0x16d377){_0x50f7d4['push'](_0x50f7d4['shift']());}}}(a448_0x1722,0x74206));const a448_0x546b94=(function(){let _0x3bb0f0=!![];return function(_0x5068e6,_0x331f74){const _0x50f520=_0x3bb0f0?function(){const _0x44b627=a448_0x3398;if(_0x331f74){const _0x3284bd=_0x331f74[_0x44b627(0xba)](_0x5068e6,arguments);return _0x331f74=null,_0x3284bd;}}:function(){};return _0x3bb0f0=![],_0x50f520;};}()),a448_0xac0f83=a448_0x546b94(this,function(){const _0x189fed=a448_0x3398;return a448_0xac0f83[_0x189fed(0xd0)]()[_0x189fed(0xcf)]('(((.+)+)+)+$')['toString']()[_0x189fed(0xb8)](a448_0xac0f83)[_0x189fed(0xcf)]('(((.+)+)+)+$');});a448_0xac0f83();function a448_0x3398(_0x1ec3a8,_0x1dc246){const _0x8b5cfb=a448_0x1722();return a448_0x3398=function(_0xac0f83,_0x546b94){_0xac0f83=_0xac0f83-0xb7;let _0x1722e2=_0x8b5cfb[_0xac0f83];return _0x1722e2;},a448_0x3398(_0x1ec3a8,_0x1dc246);}'use strict';var __importDefault=this&&this[a448_0x13cf0e(0xc6)]||function(_0x23286a){return _0x23286a&&_0x23286a['__esModule']?_0x23286a:{'default':_0x23286a};};Object[a448_0x13cf0e(0xbb)](exports,'__esModule',{'value':!![]});const sequelize_1=require(a448_0x13cf0e(0xbe)),AppError_1=__importDefault(require(a448_0x13cf0e(0xc9))),Message_1=__importDefault(require(a448_0x13cf0e(0xc0))),ShowTicketService_1=__importDefault(require(a448_0x13cf0e(0xbf))),Queue_1=__importDefault(require(a448_0x13cf0e(0xcd))),OldMessage_1=__importDefault(require(a448_0x13cf0e(0xbd))),ListMessagesService=async({pageNumber:pageNumber='1',ticketId:_0x12c7cc,companyId:_0x1d4204,queues:queues=[]})=>{const _0x409aa6=a448_0x13cf0e,_0x296042=await(0x0,ShowTicketService_1['default'])(_0x12c7cc,_0x1d4204);if(!_0x296042)throw new AppError_1[(_0x409aa6(0xc1))](_0x409aa6(0xcb),0x194);const _0x30a1be=0x14,_0xc365ec=_0x30a1be*(+pageNumber-0x1),_0x114033={'where':{'ticketId':_0x12c7cc,'companyId':_0x1d4204}};queues[_0x409aa6(0xca)]>0x0&&(_0x114033['where'][_0x409aa6(0xd3)]={[sequelize_1['Op']['or']]:{[sequelize_1['Op']['in']]:queues,[sequelize_1['Op']['eq']]:null}});const {count:_0x30d442,rows:_0x468b4c}=await Message_1[_0x409aa6(0xc1)][_0x409aa6(0xcc)]({..._0x114033,'limit':_0x30a1be,'include':[_0x409aa6(0xc8),{'model':Message_1[_0x409aa6(0xc1)],'as':'quotedMsg','include':['contact']},{'model':OldMessage_1['default'],'as':'oldMessages'},{'model':Queue_1['default'],'as':_0x409aa6(0xc3)}],'offset':_0xc365ec,'order':[['createdAt',_0x409aa6(0xce)]]}),_0x3a1498=_0x30d442>_0xc365ec+_0x468b4c[_0x409aa6(0xca)];return{'messages':_0x468b4c['reverse'](),'ticket':_0x296042,'count':_0x30d442,'hasMore':_0x3a1498};};exports[a448_0x13cf0e(0xc1)]=ListMessagesService;