const a478_0x2338c2=a478_0xa63c;(function(_0xff4147,_0x106134){const _0x1cfe17=a478_0xa63c,_0x5389fe=_0xff4147();while(!![]){try{const _0x3f7d22=parseInt(_0x1cfe17(0x17f))/0x1+parseInt(_0x1cfe17(0x17b))/0x2+-parseInt(_0x1cfe17(0x18e))/0x3*(parseInt(_0x1cfe17(0x190))/0x4)+-parseInt(_0x1cfe17(0x173))/0x5+parseInt(_0x1cfe17(0x197))/0x6+parseInt(_0x1cfe17(0x185))/0x7*(parseInt(_0x1cfe17(0x180))/0x8)+parseInt(_0x1cfe17(0x174))/0x9;if(_0x3f7d22===_0x106134)break;else _0x5389fe['push'](_0x5389fe['shift']());}catch(_0x8db0f8){_0x5389fe['push'](_0x5389fe['shift']());}}}(a478_0x3fc8,0xa3563));const a478_0x16eb95=(function(){let _0x503e96=!![];return function(_0x1588b8,_0x41a05d){const _0x205238=_0x503e96?function(){const _0x48281a=a478_0xa63c;if(_0x41a05d){const _0x5ac05d=_0x41a05d[_0x48281a(0x18a)](_0x1588b8,arguments);return _0x41a05d=null,_0x5ac05d;}}:function(){};return _0x503e96=![],_0x205238;};}()),a478_0x2571af=a478_0x16eb95(this,function(){const _0x185964=a478_0xa63c;return a478_0x2571af[_0x185964(0x186)]()[_0x185964(0x194)](_0x185964(0x193))[_0x185964(0x186)]()['constructor'](a478_0x2571af)[_0x185964(0x194)]('(((.+)+)+)+$');});function a478_0xa63c(_0x33c199,_0x4baf5e){const _0x23249a=a478_0x3fc8();return a478_0xa63c=function(_0x2571af,_0x16eb95){_0x2571af=_0x2571af-0x172;let _0x3fc88a=_0x23249a[_0x2571af];return _0x3fc88a;},a478_0xa63c(_0x33c199,_0x4baf5e);}a478_0x2571af();'use strict';var __importDefault=this&&this[a478_0x2338c2(0x17a)]||function(_0x2f030a){return _0x2f030a&&_0x2f030a['__esModule']?_0x2f030a:{'default':_0x2f030a};};Object[a478_0x2338c2(0x17c)](exports,a478_0x2338c2(0x175),{'value':!![]});const sequelize_1=require(a478_0x2338c2(0x17e)),AppError_1=__importDefault(require(a478_0x2338c2(0x196))),Message_1=__importDefault(require(a478_0x2338c2(0x189))),OldMessage_1=__importDefault(require(a478_0x2338c2(0x188))),ShowTicketService_1=__importDefault(require(a478_0x2338c2(0x195))),Queue_1=__importDefault(require(a478_0x2338c2(0x191))),CheckSettings_1=require(a478_0x2338c2(0x176)),ListMessagesService=async({pageNumber:pageNumber='1',ticketId:_0x2d61d9,companyId:_0x17ddfe,queues:queues=[]})=>{const _0x33a0d1=a478_0x2338c2,_0x105bf1=await(0x0,ShowTicketService_1[_0x33a0d1(0x177)])(_0x2d61d9,_0x17ddfe);if(!_0x105bf1)throw new AppError_1['default'](_0x33a0d1(0x18b),0x194);const _0x17da9c=0x64,_0x20efc9=_0x17da9c*(+pageNumber-0x1),_0x279d00={'where':{'ticketId':_0x2d61d9,'companyId':_0x17ddfe,'mediaType':{[sequelize_1['Op']['or']]:{[sequelize_1['Op']['ne']]:_0x33a0d1(0x172),[sequelize_1['Op']['is']]:null}}}};queues['length']>0x0&&await(0x0,CheckSettings_1['GetCompanySetting'])(_0x17ddfe,_0x33a0d1(0x17d),_0x33a0d1(0x18c))===_0x33a0d1(0x18c)&&(_0x279d00[_0x33a0d1(0x182)]['queueId']={[sequelize_1['Op']['or']]:{[sequelize_1['Op']['in']]:queues,[sequelize_1['Op']['eq']]:null}});const {count:_0x44351a,rows:_0x3b09af}=await Message_1[_0x33a0d1(0x177)][_0x33a0d1(0x18f)]({..._0x279d00,'limit':_0x17da9c,'include':[_0x33a0d1(0x178),{'model':Message_1['default'],'as':_0x33a0d1(0x179),'include':[_0x33a0d1(0x178)],'where':{'companyId':_0x105bf1[_0x33a0d1(0x192)]},'required':![]},{'model':OldMessage_1[_0x33a0d1(0x177)],'as':_0x33a0d1(0x187),'where':{'ticketId':_0x105bf1['id']},'required':![]},{'model':Message_1[_0x33a0d1(0x177)],'as':_0x33a0d1(0x184),'where':{'ticketId':_0x105bf1['id']},'include':[_0x33a0d1(0x178)],'required':![]},{'model':Queue_1[_0x33a0d1(0x177)],'as':_0x33a0d1(0x18d)}],'offset':_0x20efc9,'order':[[_0x33a0d1(0x183),_0x33a0d1(0x181)]]}),_0x149b70=_0x44351a>_0x20efc9+_0x3b09af['length'];return{'messages':_0x3b09af['reverse'](),'ticket':_0x105bf1,'count':_0x44351a,'hasMore':_0x149b70};};exports[a478_0x2338c2(0x177)]=ListMessagesService;function a478_0x3fc8(){const _0x14e052=['318969ZCEsuo','__esModule','../../helpers/CheckSettings','default','contact','quotedMsg','__importDefault','2318936CUASsU','defineProperty','messageVisibility','sequelize','104432lDQyuq','17872uSDVKf','DESC','where','createdAt','replies','203vrQtJG','toString','oldMessages','../../models/OldMessage','../../models/Message','apply','ERR_NO_TICKET_FOUND','message','queue','670590cvTpsc','findAndCountAll','4yENfMU','../../models/Queue','companyId','(((.+)+)+)+$','search','../TicketServices/ShowTicketService','../../errors/AppError','3642060RSdonP','reactionMessage','5392900HAeSCs'];a478_0x3fc8=function(){return _0x14e052;};return a478_0x3fc8();}