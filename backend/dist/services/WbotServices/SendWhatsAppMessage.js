'use strict';const a581_0x24012e=a581_0x78f9;(function(_0x32eb48,_0x1cfee2){const _0x29de21=a581_0x78f9,_0x57c38f=_0x32eb48();while(!![]){try{const _0x1acd05=parseInt(_0x29de21(0x13b))/0x1+parseInt(_0x29de21(0x12c))/0x2+-parseInt(_0x29de21(0x114))/0x3*(parseInt(_0x29de21(0x123))/0x4)+-parseInt(_0x29de21(0x121))/0x5*(-parseInt(_0x29de21(0x12a))/0x6)+-parseInt(_0x29de21(0x13a))/0x7+parseInt(_0x29de21(0x11f))/0x8*(-parseInt(_0x29de21(0x130))/0x9)+parseInt(_0x29de21(0x11d))/0xa;if(_0x1acd05===_0x1cfee2)break;else _0x57c38f['push'](_0x57c38f['shift']());}catch(_0x1d7307){_0x57c38f['push'](_0x57c38f['shift']());}}}(a581_0x5302,0xea042));function a581_0x5302(){const _0x2fb0c4=['extendedTextMessage','prototype','configurable','../../models/Message','../../models/User','sendMessage','getOwnPropertyNames','isGroup','hasOwnProperty','getOwnPropertyDescriptor','captureException','verifyMediaMessage','3hDzOpm','message','__esModule','userId','lid','../../helpers/GetTicketWbot','default','toString','log','27337530NguZNr','get','88DMtRBF','remoteJid','462685ectYLY','../../errors/AppError','7304708arrxIw','user','search','create','cacheMessage','__importStar','contact','108oTMxmL','__importDefault','813680IKhUSE','(((.+)+)+)+$','defineProperty','@s.whatsapp.net','535257SfMqYO','@g.us','number','@sentry/node','length','@lid','findOne','__createBinding','findByPk','dataJson','11447618JWOHgl','268025tjxTfr','ERR_SENDING_WAPP_MSG','User\x20found\x20by\x20ID:','call','name'];a581_0x5302=function(){return _0x2fb0c4;};return a581_0x5302();}var __createBinding=this&&this[a581_0x24012e(0x137)]||(Object[a581_0x24012e(0x126)]?function(_0x473e9f,_0x2889c5,_0xe093c5,_0x111ea2){const _0x3c682f=a581_0x24012e;if(_0x111ea2===undefined)_0x111ea2=_0xe093c5;var _0x23f192=Object[_0x3c682f(0x149)](_0x2889c5,_0xe093c5);(!_0x23f192||(_0x3c682f(0x11e)in _0x23f192?!_0x2889c5['__esModule']:_0x23f192['writable']||_0x23f192[_0x3c682f(0x142)]))&&(_0x23f192={'enumerable':!![],'get':function(){return _0x2889c5[_0xe093c5];}}),Object['defineProperty'](_0x473e9f,_0x111ea2,_0x23f192);}:function(_0x1375df,_0x321b83,_0x4dcbd0,_0x1fba85){if(_0x1fba85===undefined)_0x1fba85=_0x4dcbd0;_0x1375df[_0x1fba85]=_0x321b83[_0x4dcbd0];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a581_0x24012e(0x126)]?function(_0x122565,_0x45589a){const _0xbb38c9=a581_0x24012e;Object[_0xbb38c9(0x12e)](_0x122565,_0xbb38c9(0x11a),{'enumerable':!![],'value':_0x45589a});}:function(_0x5c0013,_0x38833d){const _0x26eb26=a581_0x24012e;_0x5c0013[_0x26eb26(0x11a)]=_0x38833d;}),__importStar=this&&this[a581_0x24012e(0x128)]||(function(){const _0x728ea2=(function(){let _0x4be02a=!![];return function(_0x91200e,_0x1af40f){const _0x16f298=_0x4be02a?function(){if(_0x1af40f){const _0x3f6f27=_0x1af40f['apply'](_0x91200e,arguments);return _0x1af40f=null,_0x3f6f27;}}:function(){};return _0x4be02a=![],_0x16f298;};}()),_0x452d67=_0x728ea2(this,function(){const _0xd74c5a=a581_0x78f9;return _0x452d67['toString']()[_0xd74c5a(0x125)](_0xd74c5a(0x12d))[_0xd74c5a(0x11b)]()['constructor'](_0x452d67)[_0xd74c5a(0x125)](_0xd74c5a(0x12d));});_0x452d67();var _0x18bdba=function(_0x394bac){const _0x547060=a581_0x78f9;return _0x18bdba=Object[_0x547060(0x146)]||function(_0x5a9356){const _0x215f6a=_0x547060;var _0x2c5ec4=[];for(var _0x15875a in _0x5a9356)if(Object[_0x215f6a(0x141)][_0x215f6a(0x148)][_0x215f6a(0x13e)](_0x5a9356,_0x15875a))_0x2c5ec4[_0x2c5ec4[_0x215f6a(0x134)]]=_0x15875a;return _0x2c5ec4;},_0x18bdba(_0x394bac);};return function(_0x58cf91){const _0x30fef9=a581_0x78f9;if(_0x58cf91&&_0x58cf91['__esModule'])return _0x58cf91;var _0xfaec2e={};if(_0x58cf91!=null){for(var _0x1447b4=_0x18bdba(_0x58cf91),_0x4dae20=0x0;_0x4dae20<_0x1447b4[_0x30fef9(0x134)];_0x4dae20++)if(_0x1447b4[_0x4dae20]!=='default')__createBinding(_0xfaec2e,_0x58cf91,_0x1447b4[_0x4dae20]);}return __setModuleDefault(_0xfaec2e,_0x58cf91),_0xfaec2e;};}()),__importDefault=this&&this[a581_0x24012e(0x12b)]||function(_0x15b9de){const _0x3d7b6e=a581_0x24012e;return _0x15b9de&&_0x15b9de[_0x3d7b6e(0x116)]?_0x15b9de:{'default':_0x15b9de};};Object[a581_0x24012e(0x12e)](exports,a581_0x24012e(0x116),{'value':!![]});const Sentry=__importStar(require(a581_0x24012e(0x133))),AppError_1=__importDefault(require(a581_0x24012e(0x122))),GetTicketWbot_1=__importDefault(require(a581_0x24012e(0x119))),Message_1=__importDefault(require(a581_0x24012e(0x143))),Mustache_1=__importDefault(require('../../helpers/Mustache')),VerifyHandlers_1=require('./VerifyHandlers'),User_1=__importDefault(require(a581_0x24012e(0x144))),SendWhatsAppMessage=async({body:_0x2843cc,ticket:_0x15dcda,userId:_0xa0a64e,quotedMsg:_0x3dd9f3})=>{const _0x146dc1=a581_0x24012e;let _0x57be48={};const _0x21f560=await(0x0,GetTicketWbot_1[_0x146dc1(0x11a)])(_0x15dcda);let _0x3b4c2f;if(_0x15dcda[_0x146dc1(0x147)])_0x3b4c2f=_0x15dcda['contact']['number']+_0x146dc1(0x131);else{if(_0x15dcda['contact'][_0x146dc1(0x120)])_0x3b4c2f=_0x15dcda['contact'][_0x146dc1(0x120)];else _0x15dcda['contact'][_0x146dc1(0x118)]?_0x3b4c2f=_0x15dcda[_0x146dc1(0x129)][_0x146dc1(0x118)]+_0x146dc1(0x135):_0x3b4c2f=_0x15dcda[_0x146dc1(0x129)][_0x146dc1(0x132)]+_0x146dc1(0x12f);}if(_0x3dd9f3){const _0x1748ad=await Message_1[_0x146dc1(0x11a)][_0x146dc1(0x136)]({'where':{'id':_0x3dd9f3['id']}});if(_0x1748ad){const _0x259e4f=JSON['parse'](_0x1748ad[_0x146dc1(0x139)]);_0x57be48={'quoted':{'key':_0x259e4f?.['key']||_0x1748ad['id'],'message':_0x259e4f?.[_0x146dc1(0x115)]}};}}try{let _0x2981f3=undefined;_0xa0a64e&&(!_0x15dcda[_0x146dc1(0x124)]||_0x15dcda[_0x146dc1(0x124)]['id']!==_0xa0a64e)&&(_0x2981f3=await User_1[_0x146dc1(0x11a)]['findByPk'](_0xa0a64e),console['log'](_0x146dc1(0x13d),_0x2981f3?.[_0x146dc1(0x13f)]));!_0x2981f3&&_0x15dcda[_0x146dc1(0x124)]&&(_0x2981f3=_0x15dcda[_0x146dc1(0x124)]);!_0x2981f3&&_0x15dcda['userId']&&(_0x2981f3=await User_1[_0x146dc1(0x11a)][_0x146dc1(0x138)](_0x15dcda[_0x146dc1(0x117)]));const _0x5af8dc=(0x0,Mustache_1[_0x146dc1(0x11a)])(_0x2843cc,_0x15dcda,_0x2981f3),_0x5a9474={..._0x3dd9f3&&{'quoted':{'key':_0x3dd9f3['id'],'message':JSON['parse'](_0x3dd9f3[_0x146dc1(0x139)])?.['message']}}},_0x584aae=await _0x21f560[_0x146dc1(0x145)](_0x3b4c2f,{'text':_0x5af8dc,..._0x5a9474});return _0x21f560[_0x146dc1(0x127)](_0x584aae),_0x584aae?.['message']?.[_0x146dc1(0x140)]?.['thumbnailDirectPath']?await(0x0,VerifyHandlers_1[_0x146dc1(0x113)])(_0x584aae,_0x15dcda,_0x15dcda[_0x146dc1(0x129)],_0x21f560):await(0x0,VerifyHandlers_1['verifyMessage'])(_0x584aae,_0x15dcda,_0x15dcda['contact']),_0x584aae;}catch(_0x1db1df){Sentry[_0x146dc1(0x14a)](_0x1db1df),console[_0x146dc1(0x11c)](_0x1db1df);throw new AppError_1['default'](_0x146dc1(0x13c));}};function a581_0x78f9(_0x313c3d,_0x184729){const _0x3288aa=a581_0x5302();return a581_0x78f9=function(_0x2c4dc7,_0xbba74d){_0x2c4dc7=_0x2c4dc7-0x113;let _0x5302c7=_0x3288aa[_0x2c4dc7];return _0x5302c7;},a581_0x78f9(_0x313c3d,_0x184729);}exports[a581_0x24012e(0x11a)]=SendWhatsAppMessage;