'use strict';const a578_0x10169d=a578_0x57be;(function(_0x17edb1,_0x142e63){const _0x1f49b7=a578_0x57be,_0xfdffa3=_0x17edb1();while(!![]){try{const _0x3ed046=-parseInt(_0x1f49b7(0x17c))/0x1+parseInt(_0x1f49b7(0x154))/0x2+-parseInt(_0x1f49b7(0x161))/0x3*(parseInt(_0x1f49b7(0x179))/0x4)+-parseInt(_0x1f49b7(0x155))/0x5+parseInt(_0x1f49b7(0x18d))/0x6*(-parseInt(_0x1f49b7(0x165))/0x7)+parseInt(_0x1f49b7(0x16d))/0x8*(parseInt(_0x1f49b7(0x16c))/0x9)+-parseInt(_0x1f49b7(0x16b))/0xa*(-parseInt(_0x1f49b7(0x169))/0xb);if(_0x3ed046===_0x142e63)break;else _0xfdffa3['push'](_0xfdffa3['shift']());}catch(_0x4040f8){_0xfdffa3['push'](_0xfdffa3['shift']());}}}(a578_0x1b78,0xf05fa));var __createBinding=this&&this[a578_0x10169d(0x17e)]||(Object[a578_0x10169d(0x157)]?function(_0x4c14a6,_0x7bb976,_0x4e21a1,_0x126e34){const _0x223012=a578_0x10169d;if(_0x126e34===undefined)_0x126e34=_0x4e21a1;var _0x3c756d=Object[_0x223012(0x17a)](_0x7bb976,_0x4e21a1);(!_0x3c756d||('get'in _0x3c756d?!_0x7bb976[_0x223012(0x17f)]:_0x3c756d[_0x223012(0x180)]||_0x3c756d['configurable']))&&(_0x3c756d={'enumerable':!![],'get':function(){return _0x7bb976[_0x4e21a1];}}),Object[_0x223012(0x18e)](_0x4c14a6,_0x126e34,_0x3c756d);}:function(_0x2a3977,_0xefde88,_0x3e604c,_0x260c6c){if(_0x260c6c===undefined)_0x260c6c=_0x3e604c;_0x2a3977[_0x260c6c]=_0xefde88[_0x3e604c];}),__setModuleDefault=this&&this[a578_0x10169d(0x171)]||(Object[a578_0x10169d(0x157)]?function(_0x2d2c1e,_0x5b861e){const _0x15f4d0=a578_0x10169d;Object[_0x15f4d0(0x18e)](_0x2d2c1e,'default',{'enumerable':!![],'value':_0x5b861e});}:function(_0x36b993,_0x1bf340){const _0x91af32=a578_0x10169d;_0x36b993[_0x91af32(0x183)]=_0x1bf340;}),__importStar=this&&this[a578_0x10169d(0x181)]||(function(){const _0x53551c=(function(){let _0x9122dc=!![];return function(_0x1351d0,_0x2ed622){const _0x17f10c=_0x9122dc?function(){const _0x438dc6=a578_0x57be;if(_0x2ed622){const _0x169ba5=_0x2ed622[_0x438dc6(0x176)](_0x1351d0,arguments);return _0x2ed622=null,_0x169ba5;}}:function(){};return _0x9122dc=![],_0x17f10c;};}()),_0x1b3f2b=_0x53551c(this,function(){const _0x346d71=a578_0x57be;return _0x1b3f2b[_0x346d71(0x172)]()[_0x346d71(0x186)](_0x346d71(0x175))[_0x346d71(0x172)]()[_0x346d71(0x18a)](_0x1b3f2b)[_0x346d71(0x186)](_0x346d71(0x175));});_0x1b3f2b();var _0x30f878=function(_0x6f8aec){const _0x48be9d=a578_0x57be;return _0x30f878=Object[_0x48be9d(0x178)]||function(_0x57570b){const _0x5c444e=_0x48be9d;var _0x4131c2=[];for(var _0x2bc6fc in _0x57570b)if(Object[_0x5c444e(0x16a)][_0x5c444e(0x189)][_0x5c444e(0x17d)](_0x57570b,_0x2bc6fc))_0x4131c2[_0x4131c2[_0x5c444e(0x16f)]]=_0x2bc6fc;return _0x4131c2;},_0x30f878(_0x6f8aec);};return function(_0x4bc42f){const _0x460125=a578_0x57be;if(_0x4bc42f&&_0x4bc42f[_0x460125(0x17f)])return _0x4bc42f;var _0x54f807={};if(_0x4bc42f!=null){for(var _0x50eba2=_0x30f878(_0x4bc42f),_0xdd19c5=0x0;_0xdd19c5<_0x50eba2[_0x460125(0x16f)];_0xdd19c5++)if(_0x50eba2[_0xdd19c5]!=='default')__createBinding(_0x54f807,_0x4bc42f,_0x50eba2[_0xdd19c5]);}return __setModuleDefault(_0x54f807,_0x4bc42f),_0x54f807;};}()),__importDefault=this&&this['__importDefault']||function(_0x3530fb){return _0x3530fb&&_0x3530fb['__esModule']?_0x3530fb:{'default':_0x3530fb};};Object['defineProperty'](exports,'__esModule',{'value':!![]});function a578_0x57be(_0x3dacef,_0x174d9f){const _0x2740af=a578_0x1b78();return a578_0x57be=function(_0x480ac4,_0x3987e0){_0x480ac4=_0x480ac4-0x154;let _0x1b7830=_0x2740af[_0x480ac4];return _0x1b7830;},a578_0x57be(_0x3dacef,_0x174d9f);}const Sentry=__importStar(require(a578_0x10169d(0x15f))),AppError_1=__importDefault(require(a578_0x10169d(0x174))),GetTicketWbot_1=__importDefault(require(a578_0x10169d(0x185))),Message_1=__importDefault(require(a578_0x10169d(0x15e))),Mustache_1=__importDefault(require(a578_0x10169d(0x16e))),VerifyHandlers_1=require(a578_0x10169d(0x187)),User_1=__importDefault(require('../../models/User')),SendWhatsAppMessage=async({body:_0x310383,ticket:_0xe9186c,userId:_0x113037,quotedMsg:_0x4bb9c2})=>{const _0x4dd860=a578_0x10169d;let _0x3a5df1={};const _0x24ccf1=await(0x0,GetTicketWbot_1[_0x4dd860(0x183)])(_0xe9186c),_0x4f7413=_0xe9186c['isGroup']?_0xe9186c['contact'][_0x4dd860(0x182)]+_0x4dd860(0x158):_0xe9186c[_0x4dd860(0x177)][_0x4dd860(0x182)]+_0x4dd860(0x17b);if(_0x4bb9c2){const _0x43d168=await Message_1[_0x4dd860(0x183)][_0x4dd860(0x160)]({'where':{'id':_0x4bb9c2['id']}});if(_0x43d168){const _0xa96232=JSON[_0x4dd860(0x173)](_0x43d168[_0x4dd860(0x159)]);_0x3a5df1={'quoted':{'key':_0xa96232?.[_0x4dd860(0x167)]||_0x43d168['id'],'message':_0xa96232?.[_0x4dd860(0x163)]}};}}try{let _0x4af4a3=undefined;_0x113037&&(!_0xe9186c[_0x4dd860(0x168)]||_0xe9186c[_0x4dd860(0x168)]['id']!==_0x113037)&&(_0x4af4a3=await User_1[_0x4dd860(0x183)][_0x4dd860(0x15a)](_0x113037),console[_0x4dd860(0x18f)](_0x4dd860(0x18b),_0x4af4a3?.[_0x4dd860(0x15c)]));!_0x4af4a3&&_0xe9186c[_0x4dd860(0x168)]&&(_0x4af4a3=_0xe9186c['user'],console[_0x4dd860(0x18f)](_0x4dd860(0x170),_0xe9186c[_0x4dd860(0x168)]?.[_0x4dd860(0x15c)]));!_0x4af4a3&&_0xe9186c[_0x4dd860(0x164)]&&(_0x4af4a3=await User_1[_0x4dd860(0x183)]['findByPk'](_0xe9186c[_0x4dd860(0x164)]),console[_0x4dd860(0x18f)](_0x4dd860(0x156),_0x4af4a3?.[_0x4dd860(0x15c)]));const _0x46687b=(0x0,Mustache_1[_0x4dd860(0x183)])(_0x310383,_0xe9186c,_0x4af4a3),_0x26d7d9={..._0x4bb9c2&&{'quoted':{'key':_0x4bb9c2['id'],'message':JSON[_0x4dd860(0x173)](_0x4bb9c2[_0x4dd860(0x159)])?.['message']}}},_0x33053f=await _0x24ccf1[_0x4dd860(0x18c)](_0x4f7413,{'text':_0x46687b,..._0x26d7d9});return _0x24ccf1[_0x4dd860(0x166)](_0x33053f),_0x33053f?.['message']?.[_0x4dd860(0x15d)]?.[_0x4dd860(0x15b)]?await(0x0,VerifyHandlers_1['verifyMediaMessage'])(_0x33053f,_0xe9186c,_0xe9186c[_0x4dd860(0x177)],_0x24ccf1):await(0x0,VerifyHandlers_1[_0x4dd860(0x162)])(_0x33053f,_0xe9186c,_0xe9186c[_0x4dd860(0x177)]),_0x33053f;}catch(_0x140528){Sentry[_0x4dd860(0x188)](_0x140528),console[_0x4dd860(0x18f)](_0x140528);throw new AppError_1[(_0x4dd860(0x183))](_0x4dd860(0x184));}};exports[a578_0x10169d(0x183)]=SendWhatsAppMessage;function a578_0x1b78(){const _0x3a2f77=['1781626mSaLHE','call','__createBinding','__esModule','writable','__importStar','number','default','ERR_SENDING_WAPP_MSG','../../helpers/GetTicketWbot','search','./VerifyHandlers','captureException','hasOwnProperty','constructor','User\x20found\x20by\x20ID:','sendMessage','120378GzoKJf','defineProperty','log','626474WWUObq','8559320cWosmJ','Using\x20user\x20from\x20ticket.userId:','create','@g.us','dataJson','findByPk','thumbnailDirectPath','name','extendedTextMessage','../../models/Message','@sentry/node','findOne','2169333TlAauu','verifyMessage','message','userId','287IwokDZ','cacheMessage','key','user','208076UtcxoM','prototype','2410qsOIrU','171ljLXCP','484952KfSOTU','../../helpers/Mustache','length','Using\x20ticket.user:','__setModuleDefault','toString','parse','../../errors/AppError','(((.+)+)+)+$','apply','contact','getOwnPropertyNames','4PDQjoD','getOwnPropertyDescriptor','@s.whatsapp.net'];a578_0x1b78=function(){return _0x3a2f77;};return a578_0x1b78();}