'use strict';const a692_0x5ba491=a692_0x1edf;function a692_0x1edf(_0x5d283a,_0x4aba67){const _0x1ee27f=a692_0x42f4();return a692_0x1edf=function(_0xcbea91,_0x469358){_0xcbea91=_0xcbea91-0x8d;let _0x42f440=_0x1ee27f[_0xcbea91];return _0x42f440;},a692_0x1edf(_0x5d283a,_0x4aba67);}function a692_0x42f4(){const _0xcf85b9=['3173064KvfpEt','dataJson','@sentry/node','8828526ZtqJCu','1813355hebVEB','60sYSTfA','getOwnPropertyNames','log','__importStar','constructor','create','../../models/User','2863770UtFwRN','prototype','length','15442BhMCvf','isGroup','number','userId','hasOwnProperty','findOne','lid','../../helpers/Mustache','(((.+)+)+)+$','writable','search','__createBinding','../../models/Message','@s.whatsapp.net','./VerifyHandlers','call','default','cacheMessage','__setModuleDefault','365824vnInHo','key','../../helpers/GetTicketWbot','contact','../../errors/AppError','@g.us','message','@lid','toString','verifyMessage','verifyMediaMessage','defineProperty','remoteJid','findByPk','user','__esModule','5533424ApZYVE'];a692_0x42f4=function(){return _0xcf85b9;};return a692_0x42f4();}(function(_0x3f338e,_0x2fd4a9){const _0x285f0b=a692_0x1edf,_0x3a77c3=_0x3f338e();while(!![]){try{const _0x2c88a8=-parseInt(_0x285f0b(0xaa))/0x1*(-parseInt(_0x285f0b(0xa0))/0x2)+-parseInt(_0x285f0b(0x9b))/0x3+-parseInt(_0x285f0b(0xbd))/0x4+parseInt(_0x285f0b(0x9f))/0x5+parseInt(_0x285f0b(0xa7))/0x6+parseInt(_0x285f0b(0x9e))/0x7+-parseInt(_0x285f0b(0x9a))/0x8;if(_0x2c88a8===_0x2fd4a9)break;else _0x3a77c3['push'](_0x3a77c3['shift']());}catch(_0x367e09){_0x3a77c3['push'](_0x3a77c3['shift']());}}}(a692_0x42f4,0xb0aa6));var __createBinding=this&&this[a692_0x5ba491(0xb5)]||(Object[a692_0x5ba491(0xa5)]?function(_0x545b7d,_0x4e2668,_0x3e385f,_0x3cae1f){const _0x1c918d=a692_0x5ba491;if(_0x3cae1f===undefined)_0x3cae1f=_0x3e385f;var _0x588b24=Object['getOwnPropertyDescriptor'](_0x4e2668,_0x3e385f);(!_0x588b24||('get'in _0x588b24?!_0x4e2668[_0x1c918d(0x99)]:_0x588b24[_0x1c918d(0xb3)]||_0x588b24['configurable']))&&(_0x588b24={'enumerable':!![],'get':function(){return _0x4e2668[_0x3e385f];}}),Object[_0x1c918d(0x95)](_0x545b7d,_0x3cae1f,_0x588b24);}:function(_0x48ad43,_0x15a903,_0x2d4b4b,_0xab743f){if(_0xab743f===undefined)_0xab743f=_0x2d4b4b;_0x48ad43[_0xab743f]=_0x15a903[_0x2d4b4b];}),__setModuleDefault=this&&this[a692_0x5ba491(0xbc)]||(Object[a692_0x5ba491(0xa5)]?function(_0x3f9f72,_0x5f300f){const _0x53da08=a692_0x5ba491;Object[_0x53da08(0x95)](_0x3f9f72,'default',{'enumerable':!![],'value':_0x5f300f});}:function(_0x3f4c2d,_0x3a6e53){const _0x60ccd8=a692_0x5ba491;_0x3f4c2d[_0x60ccd8(0xba)]=_0x3a6e53;}),__importStar=this&&this[a692_0x5ba491(0xa3)]||(function(){const _0x37de36=(function(){let _0x25561b=!![];return function(_0x4e9e65,_0x15a327){const _0x25ce77=_0x25561b?function(){if(_0x15a327){const _0x14f57b=_0x15a327['apply'](_0x4e9e65,arguments);return _0x15a327=null,_0x14f57b;}}:function(){};return _0x25561b=![],_0x25ce77;};}()),_0x2298ab=_0x37de36(this,function(){const _0x4e8e2d=a692_0x1edf;return _0x2298ab[_0x4e8e2d(0x92)]()[_0x4e8e2d(0xb4)](_0x4e8e2d(0xb2))[_0x4e8e2d(0x92)]()[_0x4e8e2d(0xa4)](_0x2298ab)[_0x4e8e2d(0xb4)](_0x4e8e2d(0xb2));});_0x2298ab();var _0x4777cb=function(_0x24aee9){const _0x45309f=a692_0x1edf;return _0x4777cb=Object[_0x45309f(0xa1)]||function(_0xfb5708){const _0x5e74b0=_0x45309f;var _0x53aed1=[];for(var _0x56d831 in _0xfb5708)if(Object[_0x5e74b0(0xa8)][_0x5e74b0(0xae)][_0x5e74b0(0xb9)](_0xfb5708,_0x56d831))_0x53aed1[_0x53aed1['length']]=_0x56d831;return _0x53aed1;},_0x4777cb(_0x24aee9);};return function(_0x51cab0){const _0x3c49f8=a692_0x1edf;if(_0x51cab0&&_0x51cab0[_0x3c49f8(0x99)])return _0x51cab0;var _0x3a7494={};if(_0x51cab0!=null){for(var _0x521792=_0x4777cb(_0x51cab0),_0x3369c5=0x0;_0x3369c5<_0x521792[_0x3c49f8(0xa9)];_0x3369c5++)if(_0x521792[_0x3369c5]!==_0x3c49f8(0xba))__createBinding(_0x3a7494,_0x51cab0,_0x521792[_0x3369c5]);}return __setModuleDefault(_0x3a7494,_0x51cab0),_0x3a7494;};}()),__importDefault=this&&this['__importDefault']||function(_0x5d535b){const _0x1ef626=a692_0x5ba491;return _0x5d535b&&_0x5d535b[_0x1ef626(0x99)]?_0x5d535b:{'default':_0x5d535b};};Object[a692_0x5ba491(0x95)](exports,a692_0x5ba491(0x99),{'value':!![]});const Sentry=__importStar(require(a692_0x5ba491(0x9d))),AppError_1=__importDefault(require(a692_0x5ba491(0x8e))),GetTicketWbot_1=__importDefault(require(a692_0x5ba491(0xbf))),Message_1=__importDefault(require(a692_0x5ba491(0xb6))),Mustache_1=__importDefault(require(a692_0x5ba491(0xb1))),VerifyHandlers_1=require(a692_0x5ba491(0xb8)),User_1=__importDefault(require(a692_0x5ba491(0xa6))),SendWhatsAppMessage=async({body:_0x43d125,ticket:_0x24cae0,userId:_0x5599cf,quotedMsg:_0x4ee64d})=>{const _0x34fa04=a692_0x5ba491;let _0x488b5e={};const _0x596c50=await(0x0,GetTicketWbot_1[_0x34fa04(0xba)])(_0x24cae0);let _0x322030;if(_0x24cae0[_0x34fa04(0xab)])_0x322030=_0x24cae0[_0x34fa04(0x8d)][_0x34fa04(0xac)]+_0x34fa04(0x8f);else{if(_0x24cae0['contact'][_0x34fa04(0x96)])_0x322030=_0x24cae0[_0x34fa04(0x8d)][_0x34fa04(0x96)];else _0x24cae0[_0x34fa04(0x8d)][_0x34fa04(0xb0)]?_0x322030=_0x24cae0[_0x34fa04(0x8d)]['lid']+_0x34fa04(0x91):_0x322030=_0x24cae0[_0x34fa04(0x8d)][_0x34fa04(0xac)]+_0x34fa04(0xb7);}if(_0x4ee64d){const _0xe4e2e8=await Message_1[_0x34fa04(0xba)][_0x34fa04(0xaf)]({'where':{'id':_0x4ee64d['id']}});if(_0xe4e2e8){const _0x1677de=JSON['parse'](_0xe4e2e8[_0x34fa04(0x9c)]);_0x488b5e={'quoted':{'key':_0x1677de?.[_0x34fa04(0xbe)]||_0xe4e2e8['id'],'message':_0x1677de?.['message']}};}}try{let _0x5c3a4f=undefined;_0x5599cf&&(!_0x24cae0[_0x34fa04(0x98)]||_0x24cae0[_0x34fa04(0x98)]['id']!==_0x5599cf)&&(_0x5c3a4f=await User_1[_0x34fa04(0xba)]['findByPk'](_0x5599cf),console[_0x34fa04(0xa2)]('User\x20found\x20by\x20ID:',_0x5c3a4f?.['name']));!_0x5c3a4f&&_0x24cae0[_0x34fa04(0x98)]&&(_0x5c3a4f=_0x24cae0[_0x34fa04(0x98)]);!_0x5c3a4f&&_0x24cae0[_0x34fa04(0xad)]&&(_0x5c3a4f=await User_1[_0x34fa04(0xba)][_0x34fa04(0x97)](_0x24cae0[_0x34fa04(0xad)]));const _0x51318f=(0x0,Mustache_1[_0x34fa04(0xba)])(_0x43d125,_0x24cae0,_0x5c3a4f),_0x3d03f2=await _0x596c50['sendMessage'](_0x322030,{'text':_0x51318f},_0x488b5e);return _0x596c50[_0x34fa04(0xbb)](_0x3d03f2),_0x3d03f2?.[_0x34fa04(0x90)]?.['extendedTextMessage']?.['thumbnailDirectPath']?await(0x0,VerifyHandlers_1[_0x34fa04(0x94)])(_0x3d03f2,_0x24cae0,_0x24cae0['contact'],_0x596c50):await(0x0,VerifyHandlers_1[_0x34fa04(0x93)])(_0x3d03f2,_0x24cae0,_0x24cae0[_0x34fa04(0x8d)]),_0x3d03f2;}catch(_0x23172d){Sentry['captureException'](_0x23172d),console[_0x34fa04(0xa2)](_0x23172d);throw new AppError_1[(_0x34fa04(0xba))]('ERR_SENDING_WAPP_MSG');}};exports[a692_0x5ba491(0xba)]=SendWhatsAppMessage;