'use strict';const a690_0x1e638a=a690_0xc724;(function(_0x132225,_0x498444){const _0x17c9dc=a690_0xc724,_0x1f9754=_0x132225();while(!![]){try{const _0x23cbd8=parseInt(_0x17c9dc(0x1cc))/0x1*(-parseInt(_0x17c9dc(0x1ce))/0x2)+-parseInt(_0x17c9dc(0x1d9))/0x3*(parseInt(_0x17c9dc(0x1cf))/0x4)+parseInt(_0x17c9dc(0x1b5))/0x5*(-parseInt(_0x17c9dc(0x1c6))/0x6)+parseInt(_0x17c9dc(0x1a6))/0x7+parseInt(_0x17c9dc(0x1ac))/0x8*(parseInt(_0x17c9dc(0x1bf))/0x9)+parseInt(_0x17c9dc(0x1b3))/0xa*(-parseInt(_0x17c9dc(0x1d6))/0xb)+parseInt(_0x17c9dc(0x1ba))/0xc;if(_0x23cbd8===_0x498444)break;else _0x1f9754['push'](_0x1f9754['shift']());}catch(_0x6556cf){_0x1f9754['push'](_0x1f9754['shift']());}}}(a690_0x39da,0x8c8d2));var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x1f105f,_0x2cc869,_0x31c8af,_0x4f9298){const _0x5d4e47=a690_0xc724;if(_0x4f9298===undefined)_0x4f9298=_0x31c8af;var _0x1245a0=Object['getOwnPropertyDescriptor'](_0x2cc869,_0x31c8af);(!_0x1245a0||(_0x5d4e47(0x1a1)in _0x1245a0?!_0x2cc869[_0x5d4e47(0x1a5)]:_0x1245a0[_0x5d4e47(0x1bc)]||_0x1245a0[_0x5d4e47(0x1b7)]))&&(_0x1245a0={'enumerable':!![],'get':function(){return _0x2cc869[_0x31c8af];}}),Object[_0x5d4e47(0x1c9)](_0x1f105f,_0x4f9298,_0x1245a0);}:function(_0x4ec0c3,_0x2ab4dc,_0x349683,_0x2655c9){if(_0x2655c9===undefined)_0x2655c9=_0x349683;_0x4ec0c3[_0x2655c9]=_0x2ab4dc[_0x349683];}),__setModuleDefault=this&&this[a690_0x1e638a(0x1c0)]||(Object[a690_0x1e638a(0x1b8)]?function(_0x5c0a4f,_0x1d31be){const _0x4c8769=a690_0x1e638a;Object[_0x4c8769(0x1c9)](_0x5c0a4f,'default',{'enumerable':!![],'value':_0x1d31be});}:function(_0x5f1023,_0x215203){const _0xe02bae=a690_0x1e638a;_0x5f1023[_0xe02bae(0x1a3)]=_0x215203;}),__importStar=this&&this[a690_0x1e638a(0x1b6)]||(function(){const _0xf09da1=(function(){let _0x15a08=!![];return function(_0x3feea8,_0xa9cb7){const _0x181d6f=_0x15a08?function(){const _0x2ed3fb=a690_0xc724;if(_0xa9cb7){const _0x30793e=_0xa9cb7[_0x2ed3fb(0x1cb)](_0x3feea8,arguments);return _0xa9cb7=null,_0x30793e;}}:function(){};return _0x15a08=![],_0x181d6f;};}()),_0x4dafd4=_0xf09da1(this,function(){const _0x565003=a690_0xc724;return _0x4dafd4[_0x565003(0x1b4)]()[_0x565003(0x1ca)](_0x565003(0x1b0))[_0x565003(0x1b4)]()[_0x565003(0x1cd)](_0x4dafd4)['search']('(((.+)+)+)+$');});_0x4dafd4();var _0x16393c=function(_0x28f187){const _0x35c60e=a690_0xc724;return _0x16393c=Object[_0x35c60e(0x1ae)]||function(_0x23f280){const _0x17bf79=_0x35c60e;var _0x1c9908=[];for(var _0x28c270 in _0x23f280)if(Object[_0x17bf79(0x1a7)]['hasOwnProperty'][_0x17bf79(0x1b9)](_0x23f280,_0x28c270))_0x1c9908[_0x1c9908[_0x17bf79(0x1c2)]]=_0x28c270;return _0x1c9908;},_0x16393c(_0x28f187);};return function(_0x724856){const _0x44c6b0=a690_0xc724;if(_0x724856&&_0x724856['__esModule'])return _0x724856;var _0x5452dc={};if(_0x724856!=null){for(var _0x3a915a=_0x16393c(_0x724856),_0xc1af9e=0x0;_0xc1af9e<_0x3a915a[_0x44c6b0(0x1c2)];_0xc1af9e++)if(_0x3a915a[_0xc1af9e]!==_0x44c6b0(0x1a3))__createBinding(_0x5452dc,_0x724856,_0x3a915a[_0xc1af9e]);}return __setModuleDefault(_0x5452dc,_0x724856),_0x5452dc;};}()),__importDefault=this&&this[a690_0x1e638a(0x1b1)]||function(_0x468a45){return _0x468a45&&_0x468a45['__esModule']?_0x468a45:{'default':_0x468a45};};Object[a690_0x1e638a(0x1c9)](exports,a690_0x1e638a(0x1a5),{'value':!![]});const Sentry=__importStar(require(a690_0x1e638a(0x1a4))),AppError_1=__importDefault(require(a690_0x1e638a(0x1ab))),GetTicketWbot_1=__importDefault(require(a690_0x1e638a(0x1c7))),Message_1=__importDefault(require(a690_0x1e638a(0x1bb))),Mustache_1=__importDefault(require(a690_0x1e638a(0x1c1))),VerifyHandlers_1=require(a690_0x1e638a(0x1a2)),User_1=__importDefault(require(a690_0x1e638a(0x1d2))),SendWhatsAppMessage=async({body:_0x2d7857,ticket:_0x37119b,userId:_0x299aa6,quotedMsg:_0x190047})=>{const _0x3b775f=a690_0x1e638a;let _0x359891={};const _0x460e5c=await(0x0,GetTicketWbot_1['default'])(_0x37119b);let _0x312cc3;if(_0x37119b['isGroup'])_0x312cc3=_0x37119b[_0x3b775f(0x1c4)][_0x3b775f(0x1d7)]+_0x3b775f(0x1ad);else{if(_0x37119b[_0x3b775f(0x1c4)][_0x3b775f(0x1bd)])_0x312cc3=_0x37119b['contact'][_0x3b775f(0x1bd)];else _0x37119b[_0x3b775f(0x1c4)][_0x3b775f(0x1d8)]?_0x312cc3=_0x37119b[_0x3b775f(0x1c4)]['lid']+_0x3b775f(0x1c5):_0x312cc3=_0x37119b['contact'][_0x3b775f(0x1d7)]+_0x3b775f(0x1c8);}if(_0x190047){const _0x26e37f=await Message_1[_0x3b775f(0x1a3)]['findOne']({'where':{'id':_0x190047['id']}});if(_0x26e37f){const _0x199e5c=JSON[_0x3b775f(0x1af)](_0x26e37f['dataJson']);_0x359891={'quoted':{'key':_0x199e5c?.[_0x3b775f(0x1aa)]||_0x26e37f['id'],'message':_0x199e5c?.['message']}};}}try{let _0x19dc7e=undefined;_0x299aa6&&(!_0x37119b[_0x3b775f(0x1be)]||_0x37119b['user']['id']!==_0x299aa6)&&(_0x19dc7e=await User_1[_0x3b775f(0x1a3)]['findByPk'](_0x299aa6),console['log']('User\x20found\x20by\x20ID:',_0x19dc7e?.[_0x3b775f(0x1d1)]));!_0x19dc7e&&_0x37119b[_0x3b775f(0x1be)]&&(_0x19dc7e=_0x37119b[_0x3b775f(0x1be)]);!_0x19dc7e&&_0x37119b['userId']&&(_0x19dc7e=await User_1[_0x3b775f(0x1a3)][_0x3b775f(0x1a9)](_0x37119b[_0x3b775f(0x1da)]));const _0x9fab6a=(0x0,Mustache_1[_0x3b775f(0x1a3)])(_0x2d7857,_0x37119b,_0x19dc7e),_0x4b8e45={..._0x190047&&{'quoted':{'key':_0x190047['id'],'message':JSON['parse'](_0x190047[_0x3b775f(0x1d3)])?.[_0x3b775f(0x1d4)]}}},_0x124b1e=await _0x460e5c[_0x3b775f(0x1c3)](_0x312cc3,{'text':_0x9fab6a,..._0x4b8e45});return _0x460e5c[_0x3b775f(0x1d5)](_0x124b1e),_0x124b1e?.[_0x3b775f(0x1d4)]?.['extendedTextMessage']?.['thumbnailDirectPath']?await(0x0,VerifyHandlers_1['verifyMediaMessage'])(_0x124b1e,_0x37119b,_0x37119b[_0x3b775f(0x1c4)],_0x460e5c):await(0x0,VerifyHandlers_1[_0x3b775f(0x1a8)])(_0x124b1e,_0x37119b,_0x37119b[_0x3b775f(0x1c4)]),_0x124b1e;}catch(_0x5080b1){Sentry[_0x3b775f(0x1b2)](_0x5080b1),console[_0x3b775f(0x1d0)](_0x5080b1);throw new AppError_1['default'](_0x3b775f(0x1a0));}};exports[a690_0x1e638a(0x1a3)]=SendWhatsAppMessage;function a690_0xc724(_0x7ab3ee,_0x368eed){const _0x279e4d=a690_0x39da();return a690_0xc724=function(_0x7411e4,_0x16a2a2){_0x7411e4=_0x7411e4-0x1a0;let _0x39da4c=_0x279e4d[_0x7411e4];return _0x39da4c;},a690_0xc724(_0x7ab3ee,_0x368eed);}function a690_0x39da(){const _0x4be55c=['sendMessage','contact','@lid','6rnzrvh','../../helpers/GetTicketWbot','@s.whatsapp.net','defineProperty','search','apply','1dAVLZL','constructor','1601914ZeIiHf','772ynnpTz','log','name','../../models/User','dataJson','message','cacheMessage','11pTELfg','number','lid','17520RpMWrn','userId','ERR_SENDING_WAPP_MSG','get','./VerifyHandlers','default','@sentry/node','__esModule','7780941EdmdXB','prototype','verifyMessage','findByPk','key','../../errors/AppError','2776frjZyU','@g.us','getOwnPropertyNames','parse','(((.+)+)+)+$','__importDefault','captureException','4417780yirKAL','toString','4045985pucfbi','__importStar','configurable','create','call','18243540eNbCMh','../../models/Message','writable','remoteJid','user','29124cnGOAP','__setModuleDefault','../../helpers/Mustache','length'];a690_0x39da=function(){return _0x4be55c;};return a690_0x39da();}