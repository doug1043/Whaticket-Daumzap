const a550_0x71438=a550_0x1ce3;(function(_0x495af2,_0x23967b){const _0x22b127=a550_0x1ce3,_0x256053=_0x495af2();while(!![]){try{const _0x484559=parseInt(_0x22b127(0x1a7))/0x1+parseInt(_0x22b127(0x1c5))/0x2*(-parseInt(_0x22b127(0x1be))/0x3)+parseInt(_0x22b127(0x19a))/0x4*(-parseInt(_0x22b127(0x198))/0x5)+-parseInt(_0x22b127(0x19c))/0x6+-parseInt(_0x22b127(0x1a4))/0x7*(parseInt(_0x22b127(0x197))/0x8)+parseInt(_0x22b127(0x195))/0x9+-parseInt(_0x22b127(0x1ba))/0xa*(-parseInt(_0x22b127(0x1b5))/0xb);if(_0x484559===_0x23967b)break;else _0x256053['push'](_0x256053['shift']());}catch(_0x269044){_0x256053['push'](_0x256053['shift']());}}}(a550_0x4219,0xad44a));const a550_0x2540e3=(function(){let _0x2b611e=!![];return function(_0x49deea,_0x37683d){const _0x2c8970=_0x2b611e?function(){if(_0x37683d){const _0x34b942=_0x37683d['apply'](_0x49deea,arguments);return _0x37683d=null,_0x34b942;}}:function(){};return _0x2b611e=![],_0x2c8970;};}()),a550_0xf159cf=a550_0x2540e3(this,function(){const _0x4c675e=a550_0x1ce3;return a550_0xf159cf[_0x4c675e(0x1c3)]()['search'](_0x4c675e(0x1a0))[_0x4c675e(0x1c3)]()[_0x4c675e(0x1bb)](a550_0xf159cf)[_0x4c675e(0x1a1)]('(((.+)+)+)+$');});a550_0xf159cf();'use strict';var __createBinding=this&&this[a550_0x71438(0x191)]||(Object[a550_0x71438(0x1a5)]?function(_0x1a3e8d,_0x50efe9,_0x5c5c8f,_0xfa4728){const _0x1a7d61=a550_0x71438;if(_0xfa4728===undefined)_0xfa4728=_0x5c5c8f;var _0x8126d6=Object[_0x1a7d61(0x1bf)](_0x50efe9,_0x5c5c8f);(!_0x8126d6||(_0x1a7d61(0x18e)in _0x8126d6?!_0x50efe9[_0x1a7d61(0x1b2)]:_0x8126d6[_0x1a7d61(0x1a2)]||_0x8126d6[_0x1a7d61(0x196)]))&&(_0x8126d6={'enumerable':!![],'get':function(){return _0x50efe9[_0x5c5c8f];}}),Object[_0x1a7d61(0x19b)](_0x1a3e8d,_0xfa4728,_0x8126d6);}:function(_0x51b305,_0x3dd779,_0x37ab6a,_0x4eca8b){if(_0x4eca8b===undefined)_0x4eca8b=_0x37ab6a;_0x51b305[_0x4eca8b]=_0x3dd779[_0x37ab6a];}),__setModuleDefault=this&&this[a550_0x71438(0x192)]||(Object[a550_0x71438(0x1a5)]?function(_0x28e4ee,_0x2072d6){const _0x467cb1=a550_0x71438;Object[_0x467cb1(0x19b)](_0x28e4ee,_0x467cb1(0x193),{'enumerable':!![],'value':_0x2072d6});}:function(_0x3cdfbb,_0x431da8){const _0x4c4fcc=a550_0x71438;_0x3cdfbb[_0x4c4fcc(0x193)]=_0x431da8;}),__importStar=this&&this['__importStar']||function(_0x1895af){const _0x654d=a550_0x71438;if(_0x1895af&&_0x1895af[_0x654d(0x1b2)])return _0x1895af;var _0x1a0107={};if(_0x1895af!=null){for(var _0xbb1067 in _0x1895af)if(_0xbb1067!==_0x654d(0x193)&&Object[_0x654d(0x1b9)]['hasOwnProperty'][_0x654d(0x1b1)](_0x1895af,_0xbb1067))__createBinding(_0x1a0107,_0x1895af,_0xbb1067);}return __setModuleDefault(_0x1a0107,_0x1895af),_0x1a0107;},__importDefault=this&&this[a550_0x71438(0x1c1)]||function(_0x23ba95){const _0x48a37a=a550_0x71438;return _0x23ba95&&_0x23ba95[_0x48a37a(0x1b2)]?_0x23ba95:{'default':_0x23ba95};};function a550_0x4219(){const _0x47de7c=['configurable','24TUnZKK','55IgDxnF','ERR_WBOT_NOT_FOUND','501628tTfEdY','defineProperty','555252EXYuti','replace','number',';;;\x0a','(((.+)+)+)+$','search','writable','../../errors/AppError','1753773UDLKHp','create','lodash','1343815Pfwgsy','ERR_SENDING_WAPP_MSG','TEL;type=CELL;waid=','extendedTextMessage','key','split','s.whatsapp.net','@sentry/node','update','name','call','__esModule','captureException','BEGIN:VCARD\x0aVERSION:3.0\x0a','10915069POLZnV','isGroup','isNil','../../helpers/GetTicketWbot','prototype','10QXOTqZ','constructor','log','trace','1712037SQxRlP','getOwnPropertyDescriptor','../../helpers/Mustache','__importDefault','dataJson','toString','message','2DcgJGM','../../models/Message','sendMessage','get','parse','findOne','__createBinding','__setModuleDefault','default','g.us','10511343YBfUfc'];a550_0x4219=function(){return _0x47de7c;};return a550_0x4219();}Object[a550_0x71438(0x19b)](exports,'__esModule',{'value':!![]});function a550_0x1ce3(_0x202afd,_0x5db030){const _0x5ae158=a550_0x4219();return a550_0x1ce3=function(_0xf159cf,_0x2540e3){_0xf159cf=_0xf159cf-0x18d;let _0x42199e=_0x5ae158[_0xf159cf];return _0x42199e;},a550_0x1ce3(_0x202afd,_0x5db030);}const Sentry=__importStar(require(a550_0x71438(0x1ae))),AppError_1=__importDefault(require(a550_0x71438(0x1a3))),GetTicketWbot_1=__importDefault(require(a550_0x71438(0x1b8))),Message_1=__importDefault(require(a550_0x71438(0x1c6))),lodash_1=__importDefault(require(a550_0x71438(0x1a6))),Mustache_1=__importDefault(require(a550_0x71438(0x1c0))),SendWhatsAppMessage=async({body:_0x24f7da,ticket:_0x26d64a,quotedMsg:_0x5072b8,vCard:_0x48c7e1})=>{const _0x18b92f=a550_0x71438;let _0x19acf1={};const _0x166bba=await(0x0,GetTicketWbot_1[_0x18b92f(0x193)])(_0x26d64a);if(!_0x166bba)throw new AppError_1[(_0x18b92f(0x193))](_0x18b92f(0x199));const _0x5e5c67=_0x26d64a['contact']['number']+'@'+(_0x26d64a[_0x18b92f(0x1b6)]?_0x18b92f(0x194):_0x18b92f(0x1ad));if(_0x5072b8){const _0x26b5c4=await Message_1[_0x18b92f(0x193)][_0x18b92f(0x190)]({'where':{'id':_0x5072b8['id']}});if(_0x26b5c4){const _0x40b660=JSON[_0x18b92f(0x18f)](_0x26b5c4[_0x18b92f(0x1c2)]);_0x19acf1={'quoted':{'key':_0x40b660[_0x18b92f(0x1ab)]||_0x26b5c4['id'],'message':{'extendedTextMessage':_0x40b660?.[_0x18b92f(0x1c4)][_0x18b92f(0x1aa)]}}};}}if(!lodash_1[_0x18b92f(0x193)][_0x18b92f(0x1b7)](_0x48c7e1)){const _0x26b592=_0x48c7e1[_0x18b92f(0x19e)],_0x3d0d0e=_0x48c7e1['name'][_0x18b92f(0x1ac)]('\x20')[0x0],_0x297772=String(_0x48c7e1[_0x18b92f(0x1b0)])[_0x18b92f(0x19d)](_0x48c7e1['name']['split']('\x20')[0x0],''),_0x38159c=_0x18b92f(0x1b4)+('N:'+_0x297772+';'+_0x3d0d0e+_0x18b92f(0x19f))+('FN:'+_0x48c7e1['name']+'\x0a')+(_0x18b92f(0x1a9)+_0x26b592+':+'+_0x26b592+'\x0a')+'END:VCARD';try{const _0x21cdbc=await _0x166bba['sendMessage'](_0x5e5c67,{'contacts':{'displayName':''+_0x48c7e1[_0x18b92f(0x1b0)],'contacts':[{'vcard':_0x38159c}]}});return await _0x26d64a[_0x18b92f(0x1af)]({'lastMessage':(0x0,Mustache_1[_0x18b92f(0x193)])(_0x38159c,_0x26d64a),'imported':null}),_0x21cdbc;}catch(_0x411a69){Sentry[_0x18b92f(0x1b3)](_0x411a69),console[_0x18b92f(0x1bd)](_0x411a69);throw new AppError_1['default'](_0x18b92f(0x1a8));}}try{const _0x1d1724=await _0x166bba[_0x18b92f(0x18d)](_0x5e5c67,{'text':(0x0,Mustache_1['default'])(_0x24f7da,_0x26d64a)},{..._0x19acf1});return await _0x26d64a[_0x18b92f(0x1af)]({'lastMessage':(0x0,Mustache_1[_0x18b92f(0x193)])(_0x24f7da,_0x26d64a)}),_0x1d1724;}catch(_0x50faae){Sentry[_0x18b92f(0x1b3)](_0x50faae),console[_0x18b92f(0x1bc)](_0x50faae);throw new AppError_1[(_0x18b92f(0x193))](_0x18b92f(0x1a8));}};exports[a550_0x71438(0x193)]=SendWhatsAppMessage;