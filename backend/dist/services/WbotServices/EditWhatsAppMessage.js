const a543_0x667766=a543_0x62c0;(function(_0x267a81,_0x18dc61){const _0x2b7312=a543_0x62c0,_0x2c351c=_0x267a81();while(!![]){try{const _0x18d56c=parseInt(_0x2b7312(0x1c2))/0x1*(-parseInt(_0x2b7312(0x1c5))/0x2)+parseInt(_0x2b7312(0x1ba))/0x3*(-parseInt(_0x2b7312(0x1be))/0x4)+-parseInt(_0x2b7312(0x1cd))/0x5+-parseInt(_0x2b7312(0x1c0))/0x6+parseInt(_0x2b7312(0x1c1))/0x7*(parseInt(_0x2b7312(0x1c9))/0x8)+-parseInt(_0x2b7312(0x1ce))/0x9*(parseInt(_0x2b7312(0x1c6))/0xa)+parseInt(_0x2b7312(0x1b3))/0xb;if(_0x18d56c===_0x18dc61)break;else _0x2c351c['push'](_0x2c351c['shift']());}catch(_0x27de3d){_0x2c351c['push'](_0x2c351c['shift']());}}}(a543_0x4fa7,0xd7a59));const a543_0xc6739b=(function(){let _0x51b606=!![];return function(_0x4c4e69,_0x4824fe){const _0xd1d4b8=_0x51b606?function(){const _0x335339=a543_0x62c0;if(_0x4824fe){const _0x487364=_0x4824fe[_0x335339(0x1bd)](_0x4c4e69,arguments);return _0x4824fe=null,_0x487364;}}:function(){};return _0x51b606=![],_0xd1d4b8;};}()),a543_0x201bd8=a543_0xc6739b(this,function(){const _0xd68ee3=a543_0x62c0;return a543_0x201bd8[_0xd68ee3(0x1bc)]()[_0xd68ee3(0x1b0)](_0xd68ee3(0x1b7))[_0xd68ee3(0x1bc)]()['constructor'](a543_0x201bd8)['search']('(((.+)+)+)+$');});a543_0x201bd8();'use strict';var __importDefault=this&&this[a543_0x667766(0x1af)]||function(_0x5e608f){const _0x5132c5=a543_0x667766;return _0x5e608f&&_0x5e608f[_0x5132c5(0x1b1)]?_0x5e608f:{'default':_0x5e608f};};function a543_0x62c0(_0x356acb,_0x15097b){const _0x3add32=a543_0x4fa7();return a543_0x62c0=function(_0x201bd8,_0xc6739b){_0x201bd8=_0x201bd8-0x1ae;let _0x4fa7e0=_0x3add32[_0x201bd8];return _0x4fa7e0;},a543_0x62c0(_0x356acb,_0x15097b);}function a543_0x4fa7(){const _0x4b5a01=['sendMessage','__importDefault','search','__esModule','update','26768236gXgjLE','log','ERR_EDITING_WAPP_MSG','findByPk','(((.+)+)+)+$','contact','../../errors/AppError','714747wVqvpa','body','toString','apply','12AYiUXh','default','3721830rugEhK','168UlzOxC','22193EcsGWr','ticketId','upsert','42xqplZk','1486810GtitKZ','defineProperty','../../models/Ticket','349120KMjKxH','ticket','../../helpers/GetTicketWbot','dataJson','2495400kMKHXu','18krNmZi','key'];a543_0x4fa7=function(){return _0x4b5a01;};return a543_0x4fa7();}Object[a543_0x667766(0x1c7)](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require(a543_0x667766(0x1b9))),GetTicketWbot_1=__importDefault(require(a543_0x667766(0x1cb))),Message_1=__importDefault(require('../../models/Message')),OldMessage_1=__importDefault(require('../../models/OldMessage')),Ticket_1=__importDefault(require(a543_0x667766(0x1c8))),EditWhatsAppMessage=async({messageId:_0x2fbb71,companyId:_0x3b3af4,body:_0x510c22})=>{const _0x1959d5=a543_0x667766,_0x3eba1a=await Message_1[_0x1959d5(0x1bf)][_0x1959d5(0x1b6)](_0x2fbb71,{'include':[{'model':Ticket_1[_0x1959d5(0x1bf)],'as':_0x1959d5(0x1ca),'include':[_0x1959d5(0x1b8)]}]});if(!_0x3eba1a)throw new AppError_1[(_0x1959d5(0x1bf))]('No\x20message\x20found\x20with\x20this\x20ID.');const {ticket:_0x16fdb0}=_0x3eba1a,_0x57b0d2=await(0x0,GetTicketWbot_1[_0x1959d5(0x1bf)])(_0x16fdb0),_0x584a38=JSON['parse'](_0x3eba1a[_0x1959d5(0x1cc)]);try{await _0x57b0d2[_0x1959d5(0x1ae)](_0x3eba1a['remoteJid'],{'text':_0x510c22,'edit':_0x584a38[_0x1959d5(0x1cf)]},{});const _0x1d7f24={'messageId':_0x2fbb71,'body':_0x3eba1a[_0x1959d5(0x1bb)]};return await OldMessage_1[_0x1959d5(0x1bf)][_0x1959d5(0x1c4)](_0x1d7f24),_0x3eba1a[_0x1959d5(0x1b2)]({'body':_0x510c22,'isEdited':!![]}),{'ticketId':_0x3eba1a[_0x1959d5(0x1c3)],'companyId':_0x3b3af4,'message':_0x3eba1a};}catch(_0x100712){console[_0x1959d5(0x1b4)](_0x100712);throw new AppError_1[(_0x1959d5(0x1bf))](_0x1959d5(0x1b5));}};exports['default']=EditWhatsAppMessage;