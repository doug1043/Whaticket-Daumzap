const a542_0x41853e=a542_0x5c79;(function(_0x152d34,_0x574247){const _0x476342=a542_0x5c79,_0x42c76b=_0x152d34();while(!![]){try{const _0x1dd663=-parseInt(_0x476342(0xa1))/0x1+-parseInt(_0x476342(0xb5))/0x2*(parseInt(_0x476342(0xb7))/0x3)+parseInt(_0x476342(0xaa))/0x4+parseInt(_0x476342(0xb3))/0x5+-parseInt(_0x476342(0xb0))/0x6+parseInt(_0x476342(0xb9))/0x7+parseInt(_0x476342(0xbe))/0x8;if(_0x1dd663===_0x574247)break;else _0x42c76b['push'](_0x42c76b['shift']());}catch(_0x54e418){_0x42c76b['push'](_0x42c76b['shift']());}}}(a542_0x21d2,0x39050));const a542_0x3de313=(function(){let _0x2ba66b=!![];return function(_0x56853b,_0x5b7ee0){const _0x539b27=_0x2ba66b?function(){if(_0x5b7ee0){const _0x35f27=_0x5b7ee0['apply'](_0x56853b,arguments);return _0x5b7ee0=null,_0x35f27;}}:function(){};return _0x2ba66b=![],_0x539b27;};}()),a542_0x5f39b6=a542_0x3de313(this,function(){const _0x330d88=a542_0x5c79;return a542_0x5f39b6['toString']()[_0x330d88(0xbd)](_0x330d88(0xa8))[_0x330d88(0xa6)]()[_0x330d88(0xb2)](a542_0x5f39b6)[_0x330d88(0xbd)](_0x330d88(0xa8));});a542_0x5f39b6();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x300a1b){const _0xa7767b=a542_0x5c79;return _0x300a1b&&_0x300a1b[_0xa7767b(0xb4)]?_0x300a1b:{'default':_0x300a1b};};function a542_0x5c79(_0x2e9468,_0x5c26a4){const _0x5c0ca4=a542_0x21d2();return a542_0x5c79=function(_0x5f39b6,_0x3de313){_0x5f39b6=_0x5f39b6-0xa1;let _0x21d2f5=_0x5c0ca4[_0x5f39b6];return _0x21d2f5;},a542_0x5c79(_0x2e9468,_0x5c26a4);}Object[a542_0x41853e(0xb8)](exports,a542_0x41853e(0xb4),{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),GetTicketWbot_1=__importDefault(require(a542_0x41853e(0xa9))),Message_1=__importDefault(require(a542_0x41853e(0xa3))),OldMessage_1=__importDefault(require(a542_0x41853e(0xb6))),Ticket_1=__importDefault(require(a542_0x41853e(0xb1))),EditWhatsAppMessage=async({messageId:_0x39688f,companyId:_0x3a0ff3,body:_0x375ff4})=>{const _0x114f60=a542_0x41853e,_0x2484ee=await Message_1['default'][_0x114f60(0xa2)](_0x39688f,{'include':[{'model':Ticket_1[_0x114f60(0xaf)],'as':_0x114f60(0xad),'include':[_0x114f60(0xac)]}]});if(!_0x2484ee)throw new AppError_1[(_0x114f60(0xaf))](_0x114f60(0xa4));const {ticket:_0xb93c6b}=_0x2484ee,_0x31cd53=await(0x0,GetTicketWbot_1['default'])(_0xb93c6b),_0x49a943=JSON[_0x114f60(0xae)](_0x2484ee[_0x114f60(0xab)]);try{await _0x31cd53['sendMessage'](_0x2484ee[_0x114f60(0xba)],{'text':_0x375ff4,'edit':_0x49a943[_0x114f60(0xbb)]},{});const _0x477a74={'messageId':_0x39688f,'body':_0x2484ee['body']};return await OldMessage_1[_0x114f60(0xaf)][_0x114f60(0xa7)](_0x477a74),_0x2484ee['update']({'body':_0x375ff4,'isEdited':!![]}),{'ticketId':_0x2484ee[_0x114f60(0xbc)],'companyId':_0x3a0ff3,'message':_0x2484ee};}catch(_0x2349a3){console['log'](_0x2349a3);throw new AppError_1[(_0x114f60(0xaf))](_0x114f60(0xa5));}};function a542_0x21d2(){const _0x1bda48=['__esModule','6JrVSph','../../models/OldMessage','408450NoLKTu','defineProperty','427672jUHnma','remoteJid','key','ticketId','search','4646120rYnouK','372451FDbepm','findByPk','../../models/Message','No\x20message\x20found\x20with\x20this\x20ID.','ERR_EDITING_WAPP_MSG','toString','upsert','(((.+)+)+)+$','../../helpers/GetTicketWbot','1516280wfbZaa','dataJson','contact','ticket','parse','default','1055016MRiJwt','../../models/Ticket','constructor','846790LTvVDK'];a542_0x21d2=function(){return _0x1bda48;};return a542_0x21d2();}exports[a542_0x41853e(0xaf)]=EditWhatsAppMessage;