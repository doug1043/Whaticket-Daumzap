const a535_0x569501=a535_0x5ed3;(function(_0x1a9e82,_0x1c2a7d){const _0x127ced=a535_0x5ed3,_0x2f66a2=_0x1a9e82();while(!![]){try{const _0x22673e=-parseInt(_0x127ced(0x165))/0x1+parseInt(_0x127ced(0x15c))/0x2+-parseInt(_0x127ced(0x152))/0x3+-parseInt(_0x127ced(0x14f))/0x4*(-parseInt(_0x127ced(0x162))/0x5)+-parseInt(_0x127ced(0x159))/0x6+-parseInt(_0x127ced(0x14e))/0x7*(parseInt(_0x127ced(0x15d))/0x8)+parseInt(_0x127ced(0x164))/0x9;if(_0x22673e===_0x1c2a7d)break;else _0x2f66a2['push'](_0x2f66a2['shift']());}catch(_0x53fd7d){_0x2f66a2['push'](_0x2f66a2['shift']());}}}(a535_0x1fe2,0xd8e6b));const a535_0x320274=(function(){let _0x3f5711=!![];return function(_0x5f2143,_0x5365ed){const _0x3f66fd=_0x3f5711?function(){const _0x186cb1=a535_0x5ed3;if(_0x5365ed){const _0x4215e5=_0x5365ed[_0x186cb1(0x151)](_0x5f2143,arguments);return _0x5365ed=null,_0x4215e5;}}:function(){};return _0x3f5711=![],_0x3f66fd;};}()),a535_0x55ec0e=a535_0x320274(this,function(){const _0xb1e745=a535_0x5ed3;return a535_0x55ec0e['toString']()[_0xb1e745(0x14b)](_0xb1e745(0x14c))[_0xb1e745(0x163)]()[_0xb1e745(0x160)](a535_0x55ec0e)[_0xb1e745(0x14b)](_0xb1e745(0x14c));});function a535_0x5ed3(_0x539db3,_0x12d7ad){const _0x1f905d=a535_0x1fe2();return a535_0x5ed3=function(_0x55ec0e,_0x320274){_0x55ec0e=_0x55ec0e-0x147;let _0x1fe22d=_0x1f905d[_0x55ec0e];return _0x1fe22d;},a535_0x5ed3(_0x539db3,_0x12d7ad);}function a535_0x1fe2(){const _0x62b7a7=['20hNmdvV','sendMessage','apply','5313621jgXPJM','__importDefault','contact','../../models/Message','../../models/OldMessage','../../models/Ticket','../../errors/AppError','3584592NdNEXY','default','log','2164692QvQMpC','10328080VoxwWO','findByPk','../../helpers/GetTicketWbot','constructor','parse','509115KFemOP','toString','40732812QiEkNu','1569253vANAJm','__esModule','dataJson','upsert','key','search','(((.+)+)+)+$','update','7HcGOod'];a535_0x1fe2=function(){return _0x62b7a7;};return a535_0x1fe2();}a535_0x55ec0e();'use strict';var __importDefault=this&&this[a535_0x569501(0x153)]||function(_0x4c817f){const _0x172baa=a535_0x569501;return _0x4c817f&&_0x4c817f[_0x172baa(0x147)]?_0x4c817f:{'default':_0x4c817f};};Object['defineProperty'](exports,a535_0x569501(0x147),{'value':!![]});const AppError_1=__importDefault(require(a535_0x569501(0x158))),GetTicketWbot_1=__importDefault(require(a535_0x569501(0x15f))),Message_1=__importDefault(require(a535_0x569501(0x155))),OldMessage_1=__importDefault(require(a535_0x569501(0x156))),Ticket_1=__importDefault(require(a535_0x569501(0x157))),EditWhatsAppMessage=async({messageId:_0x4c7db8,companyId:_0xaaf97f,body:_0x53b743})=>{const _0x31e2a2=a535_0x569501,_0x37ed55=await Message_1[_0x31e2a2(0x15a)][_0x31e2a2(0x15e)](_0x4c7db8,{'include':[{'model':Ticket_1[_0x31e2a2(0x15a)],'as':'ticket','include':[_0x31e2a2(0x154)]}]});if(!_0x37ed55)throw new AppError_1['default']('No\x20message\x20found\x20with\x20this\x20ID.');const {ticket:_0x305c2c}=_0x37ed55,_0x38e702=await(0x0,GetTicketWbot_1[_0x31e2a2(0x15a)])(_0x305c2c),_0x2d3337=JSON[_0x31e2a2(0x161)](_0x37ed55[_0x31e2a2(0x148)]);try{await _0x38e702[_0x31e2a2(0x150)](_0x37ed55['remoteJid'],{'text':_0x53b743,'edit':_0x2d3337[_0x31e2a2(0x14a)]},{});const _0x3ba4e3={'messageId':_0x4c7db8,'body':_0x37ed55['body']};return await OldMessage_1['default'][_0x31e2a2(0x149)](_0x3ba4e3),_0x37ed55[_0x31e2a2(0x14d)]({'body':_0x53b743,'isEdited':!![]}),{'ticketId':_0x37ed55['ticketId'],'companyId':_0xaaf97f,'message':_0x37ed55};}catch(_0xa60bfd){console[_0x31e2a2(0x15b)](_0xa60bfd);throw new AppError_1['default']('ERR_EDITING_WAPP_MSG');}};exports['default']=EditWhatsAppMessage;