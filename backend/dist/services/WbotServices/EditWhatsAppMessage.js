const a542_0xcc61aa=a542_0x3de1;function a542_0x5f12(){const _0x55ee87=['__esModule','(((.+)+)+)+$','parse','ticketId','toString','update','../../models/Message','ticket','log','14nGXXwR','8302854QGNAnT','upsert','default','../../models/Ticket','apply','defineProperty','dataJson','No\x20message\x20found\x20with\x20this\x20ID.','../../helpers/GetTicketWbot','../../models/OldMessage','108344KEzegF','body','constructor','ERR_EDITING_WAPP_MSG','__importDefault','key','1499726dMzvMe','../../errors/AppError','33KIqGil','remoteJid','34695369IJvhVJ','791875LmDRbi','search','187137QLjpJE','3867576HYvVOF'];a542_0x5f12=function(){return _0x55ee87;};return a542_0x5f12();}(function(_0x113c71,_0x1b4352){const _0x508277=a542_0x3de1,_0x566bde=_0x113c71();while(!![]){try{const _0x1b78e0=-parseInt(_0x508277(0xfa))/0x1+-parseInt(_0x508277(0xf3))/0x2+parseInt(_0x508277(0xf5))/0x3*(parseInt(_0x508277(0xed))/0x4)+-parseInt(_0x508277(0xf8))/0x5+-parseInt(_0x508277(0x106))/0x6+-parseInt(_0x508277(0x105))/0x7*(parseInt(_0x508277(0xfb))/0x8)+parseInt(_0x508277(0xf7))/0x9;if(_0x1b78e0===_0x1b4352)break;else _0x566bde['push'](_0x566bde['shift']());}catch(_0x155e9d){_0x566bde['push'](_0x566bde['shift']());}}}(a542_0x5f12,0xac95d));const a542_0x3582f4=(function(){let _0x1b3d72=!![];return function(_0x23da00,_0x336352){const _0x6a0577=_0x1b3d72?function(){const _0x1de5cc=a542_0x3de1;if(_0x336352){const _0x4f4516=_0x336352[_0x1de5cc(0x10a)](_0x23da00,arguments);return _0x336352=null,_0x4f4516;}}:function(){};return _0x1b3d72=![],_0x6a0577;};}()),a542_0x5a5e4a=a542_0x3582f4(this,function(){const _0x447624=a542_0x3de1;return a542_0x5a5e4a[_0x447624(0x100)]()[_0x447624(0xf9)](_0x447624(0xfd))[_0x447624(0x100)]()[_0x447624(0xef)](a542_0x5a5e4a)[_0x447624(0xf9)](_0x447624(0xfd));});function a542_0x3de1(_0x455961,_0x191b4a){const _0x1d4221=a542_0x5f12();return a542_0x3de1=function(_0x5a5e4a,_0x3582f4){_0x5a5e4a=_0x5a5e4a-0xe8;let _0x5f12b6=_0x1d4221[_0x5a5e4a];return _0x5f12b6;},a542_0x3de1(_0x455961,_0x191b4a);}a542_0x5a5e4a();'use strict';var __importDefault=this&&this[a542_0xcc61aa(0xf1)]||function(_0x461afc){const _0x49fa8f=a542_0xcc61aa;return _0x461afc&&_0x461afc[_0x49fa8f(0xfc)]?_0x461afc:{'default':_0x461afc};};Object[a542_0xcc61aa(0xe8)](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require(a542_0xcc61aa(0xf4))),GetTicketWbot_1=__importDefault(require(a542_0xcc61aa(0xeb))),Message_1=__importDefault(require(a542_0xcc61aa(0x102))),OldMessage_1=__importDefault(require(a542_0xcc61aa(0xec))),Ticket_1=__importDefault(require(a542_0xcc61aa(0x109))),EditWhatsAppMessage=async({messageId:_0x36165a,companyId:_0x54257f,body:_0x2b99c5})=>{const _0x45002f=a542_0xcc61aa,_0x5acc19=await Message_1[_0x45002f(0x108)]['findByPk'](_0x36165a,{'include':[{'model':Ticket_1[_0x45002f(0x108)],'as':_0x45002f(0x103),'include':['contact']}]});if(!_0x5acc19)throw new AppError_1['default'](_0x45002f(0xea));const {ticket:_0x4998da}=_0x5acc19,_0x4833b3=await(0x0,GetTicketWbot_1[_0x45002f(0x108)])(_0x4998da),_0x211bb9=JSON[_0x45002f(0xfe)](_0x5acc19[_0x45002f(0xe9)]);try{await _0x4833b3['sendMessage'](_0x5acc19[_0x45002f(0xf6)],{'text':_0x2b99c5,'edit':_0x211bb9[_0x45002f(0xf2)]},{});const _0x581e98={'messageId':_0x36165a,'body':_0x5acc19[_0x45002f(0xee)]};return await OldMessage_1[_0x45002f(0x108)][_0x45002f(0x107)](_0x581e98),_0x5acc19[_0x45002f(0x101)]({'body':_0x2b99c5,'isEdited':!![]}),{'ticketId':_0x5acc19[_0x45002f(0xff)],'companyId':_0x54257f,'message':_0x5acc19};}catch(_0x541f9e){console[_0x45002f(0x104)](_0x541f9e);throw new AppError_1[(_0x45002f(0x108))](_0x45002f(0xf0));}};exports[a542_0xcc61aa(0x108)]=EditWhatsAppMessage;