const a544_0xc1fac0=a544_0x548c;(function(_0x4ed4a9,_0xcb5902){const _0xcc05f=a544_0x548c,_0x3a8b28=_0x4ed4a9();while(!![]){try{const _0x5ebf80=-parseInt(_0xcc05f(0x1b6))/0x1*(-parseInt(_0xcc05f(0x1a1))/0x2)+-parseInt(_0xcc05f(0x19d))/0x3+-parseInt(_0xcc05f(0x1c0))/0x4+-parseInt(_0xcc05f(0x1af))/0x5*(-parseInt(_0xcc05f(0x1a4))/0x6)+-parseInt(_0xcc05f(0x1b7))/0x7*(-parseInt(_0xcc05f(0x1bc))/0x8)+parseInt(_0xcc05f(0x1bf))/0x9+-parseInt(_0xcc05f(0x1b2))/0xa*(parseInt(_0xcc05f(0x1ad))/0xb);if(_0x5ebf80===_0xcb5902)break;else _0x3a8b28['push'](_0x3a8b28['shift']());}catch(_0x56c095){_0x3a8b28['push'](_0x3a8b28['shift']());}}}(a544_0x1264,0x75dc8));const a544_0x454361=(function(){let _0x463d31=!![];return function(_0x2e943d,_0x2e00c4){const _0x281757=_0x463d31?function(){const _0x4e0d1c=a544_0x548c;if(_0x2e00c4){const _0x3fdcd8=_0x2e00c4[_0x4e0d1c(0x1a9)](_0x2e943d,arguments);return _0x2e00c4=null,_0x3fdcd8;}}:function(){};return _0x463d31=![],_0x281757;};}()),a544_0x363119=a544_0x454361(this,function(){const _0x5acc3a=a544_0x548c;return a544_0x363119[_0x5acc3a(0x19e)]()[_0x5acc3a(0x1a3)](_0x5acc3a(0x1a2))[_0x5acc3a(0x19e)]()[_0x5acc3a(0x1b4)](a544_0x363119)[_0x5acc3a(0x1a3)](_0x5acc3a(0x1a2));});a544_0x363119();'use strict';function a544_0x1264(){const _0x2b92c5=['upsert','body','update','2054400zulzZr','../../errors/AppError','__esModule','2228022lXfWQd','13804bAtcGD','remoteJid','1823694SMmPZs','toString','ticketId','sendMessage','144LIGRgD','(((.+)+)+)+$','search','2955714RoRMtG','defineProperty','key','dataJson','../../models/Ticket','apply','../../models/Message','findByPk','parse','11RbOxOu','No\x20message\x20found\x20with\x20this\x20ID.','5HmwbYW','__importDefault','ticket','5732120iRpXfq','default','constructor','log','2177ljJoTq','21atYoJp','../../models/OldMessage'];a544_0x1264=function(){return _0x2b92c5;};return a544_0x1264();}var __importDefault=this&&this[a544_0xc1fac0(0x1b0)]||function(_0x233c60){const _0x372959=a544_0xc1fac0;return _0x233c60&&_0x233c60[_0x372959(0x1be)]?_0x233c60:{'default':_0x233c60};};function a544_0x548c(_0x520596,_0x5b8de5){const _0x6319a5=a544_0x1264();return a544_0x548c=function(_0x363119,_0x454361){_0x363119=_0x363119-0x19d;let _0x126480=_0x6319a5[_0x363119];return _0x126480;},a544_0x548c(_0x520596,_0x5b8de5);}Object[a544_0xc1fac0(0x1a5)](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require(a544_0xc1fac0(0x1bd))),GetTicketWbot_1=__importDefault(require('../../helpers/GetTicketWbot')),Message_1=__importDefault(require(a544_0xc1fac0(0x1aa))),OldMessage_1=__importDefault(require(a544_0xc1fac0(0x1b8))),Ticket_1=__importDefault(require(a544_0xc1fac0(0x1a8))),EditWhatsAppMessage=async({messageId:_0x89ab50,companyId:_0x3e63a9,body:_0xcb90e7})=>{const _0x5819a2=a544_0xc1fac0,_0x26ad79=await Message_1[_0x5819a2(0x1b3)][_0x5819a2(0x1ab)](_0x89ab50,{'include':[{'model':Ticket_1[_0x5819a2(0x1b3)],'as':_0x5819a2(0x1b1),'include':['contact']}]});if(!_0x26ad79)throw new AppError_1[(_0x5819a2(0x1b3))](_0x5819a2(0x1ae));const {ticket:_0x407c36}=_0x26ad79,_0x568bd4=await(0x0,GetTicketWbot_1[_0x5819a2(0x1b3)])(_0x407c36),_0xac4aff=JSON[_0x5819a2(0x1ac)](_0x26ad79[_0x5819a2(0x1a7)]);try{await _0x568bd4[_0x5819a2(0x1a0)](_0x26ad79[_0x5819a2(0x1c1)],{'text':_0xcb90e7,'edit':_0xac4aff[_0x5819a2(0x1a6)]},{});const _0x52532c={'messageId':_0x89ab50,'body':_0x26ad79[_0x5819a2(0x1ba)]};return await OldMessage_1['default'][_0x5819a2(0x1b9)](_0x52532c),_0x26ad79[_0x5819a2(0x1bb)]({'body':_0xcb90e7,'isEdited':!![]}),{'ticketId':_0x26ad79[_0x5819a2(0x19f)],'companyId':_0x3e63a9,'message':_0x26ad79};}catch(_0x34c0d6){console[_0x5819a2(0x1b5)](_0x34c0d6);throw new AppError_1[(_0x5819a2(0x1b3))]('ERR_EDITING_WAPP_MSG');}};exports[a544_0xc1fac0(0x1b3)]=EditWhatsAppMessage;