const a688_0x41d618=a688_0x4a6e;(function(_0x5911d5,_0x250650){const _0x1c9646=a688_0x4a6e,_0x4cf43b=_0x5911d5();while(!![]){try{const _0x3eee12=-parseInt(_0x1c9646(0x8b))/0x1*(parseInt(_0x1c9646(0x97))/0x2)+parseInt(_0x1c9646(0xa4))/0x3+-parseInt(_0x1c9646(0xa6))/0x4*(parseInt(_0x1c9646(0xa1))/0x5)+parseInt(_0x1c9646(0xb0))/0x6*(-parseInt(_0x1c9646(0x96))/0x7)+-parseInt(_0x1c9646(0x92))/0x8*(-parseInt(_0x1c9646(0xac))/0x9)+parseInt(_0x1c9646(0xa7))/0xa+-parseInt(_0x1c9646(0x88))/0xb*(-parseInt(_0x1c9646(0x99))/0xc);if(_0x3eee12===_0x250650)break;else _0x4cf43b['push'](_0x4cf43b['shift']());}catch(_0x15e248){_0x4cf43b['push'](_0x4cf43b['shift']());}}}(a688_0x56e4,0xf259d));const a688_0x28be0d=(function(){let _0x4b53a5=!![];return function(_0x5afd35,_0x1763d1){const _0x1f1337=_0x4b53a5?function(){const _0x515121=a688_0x4a6e;if(_0x1763d1){const _0x37be2e=_0x1763d1[_0x515121(0xaa)](_0x5afd35,arguments);return _0x1763d1=null,_0x37be2e;}}:function(){};return _0x4b53a5=![],_0x1f1337;};}()),a688_0x32d4f1=a688_0x28be0d(this,function(){const _0x5e12d0=a688_0x4a6e;return a688_0x32d4f1[_0x5e12d0(0x90)]()[_0x5e12d0(0x9a)]('(((.+)+)+)+$')[_0x5e12d0(0x90)]()[_0x5e12d0(0x8e)](a688_0x32d4f1)[_0x5e12d0(0x9a)](_0x5e12d0(0x94));});a688_0x32d4f1();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x41b64a){const _0x6ad107=a688_0x4a6e;return _0x41b64a&&_0x41b64a[_0x6ad107(0xa3)]?_0x41b64a:{'default':_0x41b64a};};Object['defineProperty'](exports,a688_0x41d618(0xa3),{'value':!![]});const wbot_1=require(a688_0x41d618(0x9c)),Contact_1=__importDefault(require(a688_0x41d618(0x8f))),logger_1=require(a688_0x41d618(0xae)),ShowBaileysService_1=__importDefault(require('../BaileysServices/ShowBaileysService')),CreateContactService_1=__importDefault(require('../ContactServices/CreateContactService')),AppError_1=__importDefault(require(a688_0x41d618(0x9f))),Whatsapp_1=__importDefault(require('../../models/Whatsapp')),ImportContactsService=async(_0x5e51e8,_0x3d4585)=>{const _0x5aaaca=a688_0x41d618,_0x18beb9=await Whatsapp_1[_0x5aaaca(0xaf)][_0x5aaaca(0x91)]({'where':{'id':_0x3d4585,'companyId':_0x5e51e8,'channel':_0x5aaaca(0xab),'status':'CONNECTED'}});if(!_0x18beb9)throw new AppError_1[(_0x5aaaca(0xaf))]('ERR_NO_WAPP_FOUND',0x194);const _0x19aaf5=(0x0,wbot_1['getWbot'])(_0x18beb9['id']),_0x4bd4aa=await(0x0,ShowBaileysService_1[_0x5aaaca(0xaf)])(_0x19aaf5['id']);let _0x1d6fc6=null;try{_0x1d6fc6=_0x4bd4aa[_0x5aaaca(0x86)]&&JSON[_0x5aaaca(0x89)](_0x4bd4aa[_0x5aaaca(0x86)]);}catch(_0x3ce801){logger_1[_0x5aaaca(0x98)][_0x5aaaca(0x8c)]({'baileys':_0x4bd4aa},_0x5aaaca(0x95)+_0x3ce801);throw new AppError_1[(_0x5aaaca(0xaf))](_0x5aaaca(0x8d),0x1f4);}if(Array['isArray'](_0x1d6fc6)){const _0x5951a2=async _0x46569d=>{const _0x25cf6b=_0x5aaaca;_0x46569d[_0x25cf6b(0xa9)](async({id:_0x3c8cb5,name:_0x44f157,notify:_0xcad76e})=>{const _0x1c1ed1=_0x25cf6b;if(_0x3c8cb5==='status@broadcast'||_0x3c8cb5[_0x1c1ed1(0x9b)](_0x1c1ed1(0xa2)))return;const _0x239103=_0x3c8cb5[_0x1c1ed1(0x9d)](/\D/g,''),_0x311814=await Contact_1[_0x1c1ed1(0xaf)]['findOne']({'where':{'number':_0x239103,'companyId':_0x5e51e8}});if(_0x311814)_0x311814[_0x1c1ed1(0xb1)]=_0x44f157||_0xcad76e||_0x239103,await _0x311814[_0x1c1ed1(0x87)]();else try{await(0x0,CreateContactService_1[_0x1c1ed1(0xaf)])({'number':_0x239103,'name':_0x44f157||_0xcad76e||_0x239103,'companyId':_0x5e51e8});}catch(_0x4a25fd){logger_1[_0x1c1ed1(0x98)]['error']({'name':_0x44f157,'number':_0x239103,'companyId':_0x5e51e8},_0x1c1ed1(0xad)+_0x4a25fd);}});};_0x5951a2(_0x1d6fc6)[_0x5aaaca(0x8a)](()=>{const _0x561c4f=_0x5aaaca;logger_1[_0x561c4f(0x98)][_0x561c4f(0xa8)](_0x561c4f(0xa5)+_0x5e51e8);},_0x92e5c7=>{const _0x376c3=_0x5aaaca;logger_1[_0x376c3(0x98)]['error'](_0x376c3(0x9e)+_0x5e51e8+_0x376c3(0xa0)+_0x92e5c7[_0x376c3(0x93)]);});}};function a688_0x56e4(){const _0x2745eb=['11xyhARf','parse','then','376882anvhNP','warn','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20database.','constructor','../../models/Contact','toString','findOne','8CMDWHh','message','(((.+)+)+)+$','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20database.\x20Err:\x20','1201403Dcnrvn','8lJbthN','logger','6493596QofkOI','search','includes','../../libs/wbot','replace','Error\x20importing\x20contacts\x20from\x20WhatsApp\x20for\x20company\x20ID:\x20','../../errors/AppError','\x20-\x20','362975pGLDXc','g.us','__esModule','5164884wPgMnb','Contacts\x20imported\x20successfully\x20from\x20WhatsApp\x20for\x20company\x20ID:\x20','4LkTHKv','7529450NgPksP','debug','forEach','apply','whatsapp','6826401GjfkTS','Could\x20not\x20save\x20contact.\x20Err:\x20','../../utils/logger','default','42kqNOCJ','name','contacts','save'];a688_0x56e4=function(){return _0x2745eb;};return a688_0x56e4();}function a688_0x4a6e(_0x77fd6d,_0x4add8a){const _0x1ea4b8=a688_0x56e4();return a688_0x4a6e=function(_0x32d4f1,_0x28be0d){_0x32d4f1=_0x32d4f1-0x86;let _0x56e45f=_0x1ea4b8[_0x32d4f1];return _0x56e45f;},a688_0x4a6e(_0x77fd6d,_0x4add8a);}exports[a688_0x41d618(0xaf)]=ImportContactsService;