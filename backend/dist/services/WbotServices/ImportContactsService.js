const a578_0x380849=a578_0x2dd1;(function(_0x32830b,_0x5e6a6e){const _0x335b41=a578_0x2dd1,_0x493ac0=_0x32830b();while(!![]){try{const _0x52d14f=-parseInt(_0x335b41(0x1bd))/0x1+parseInt(_0x335b41(0x1b2))/0x2+parseInt(_0x335b41(0x1cc))/0x3+-parseInt(_0x335b41(0x1b0))/0x4+-parseInt(_0x335b41(0x1b7))/0x5*(parseInt(_0x335b41(0x1c6))/0x6)+parseInt(_0x335b41(0x1ba))/0x7*(-parseInt(_0x335b41(0x1bb))/0x8)+parseInt(_0x335b41(0x1c8))/0x9;if(_0x52d14f===_0x5e6a6e)break;else _0x493ac0['push'](_0x493ac0['shift']());}catch(_0x4fc4bc){_0x493ac0['push'](_0x493ac0['shift']());}}}(a578_0x1bf4,0x8d6ee));const a578_0x360e6b=(function(){let _0x1ce4d2=!![];return function(_0x1bcdd6,_0x3bcce3){const _0x5e1120=_0x1ce4d2?function(){const _0x2a2fb7=a578_0x2dd1;if(_0x3bcce3){const _0x34d7a8=_0x3bcce3[_0x2a2fb7(0x1c5)](_0x1bcdd6,arguments);return _0x3bcce3=null,_0x34d7a8;}}:function(){};return _0x1ce4d2=![],_0x5e1120;};}()),a578_0x21736e=a578_0x360e6b(this,function(){const _0x3d9fad=a578_0x2dd1;return a578_0x21736e[_0x3d9fad(0x1b5)]()['search'](_0x3d9fad(0x1b1))['toString']()['constructor'](a578_0x21736e)[_0x3d9fad(0x1c9)](_0x3d9fad(0x1b1));});a578_0x21736e();'use strict';var __importDefault=this&&this[a578_0x380849(0x1cf)]||function(_0x1b01cd){const _0x3564e9=a578_0x380849;return _0x1b01cd&&_0x1b01cd[_0x3564e9(0x1c1)]?_0x1b01cd:{'default':_0x1b01cd};};function a578_0x2dd1(_0x455b7f,_0x2cac4d){const _0x171d27=a578_0x1bf4();return a578_0x2dd1=function(_0x21736e,_0x360e6b){_0x21736e=_0x21736e-0x1aa;let _0x1bf405=_0x171d27[_0x21736e];return _0x1bf405;},a578_0x2dd1(_0x455b7f,_0x2cac4d);}Object[a578_0x380849(0x1cb)](exports,'__esModule',{'value':!![]});const wbot_1=require(a578_0x380849(0x1c2)),Contact_1=__importDefault(require(a578_0x380849(0x1d2))),logger_1=require('../../utils/logger'),ShowBaileysService_1=__importDefault(require('../BaileysServices/ShowBaileysService')),CreateContactService_1=__importDefault(require(a578_0x380849(0x1ac))),AppError_1=__importDefault(require(a578_0x380849(0x1af))),Whatsapp_1=__importDefault(require(a578_0x380849(0x1b4))),ImportContactsService=async(_0x1ca0a0,_0x4f6978)=>{const _0x3c4f34=a578_0x380849,_0x40548a=await Whatsapp_1[_0x3c4f34(0x1d1)][_0x3c4f34(0x1ad)]({'where':{'id':_0x4f6978,'companyId':_0x1ca0a0,'channel':_0x3c4f34(0x1c0),'status':_0x3c4f34(0x1aa)}});if(!_0x40548a)throw new AppError_1['default'](_0x3c4f34(0x1ca),0x194);const _0x1f1763=(0x0,wbot_1['getWbot'])(_0x40548a['id']),_0x302e52=await(0x0,ShowBaileysService_1[_0x3c4f34(0x1d1)])(_0x1f1763['id']);let _0xc84370=null;try{_0xc84370=_0x302e52[_0x3c4f34(0x1c4)]&&JSON[_0x3c4f34(0x1b6)](_0x302e52[_0x3c4f34(0x1c4)]);}catch(_0x3a7fc2){logger_1[_0x3c4f34(0x1cd)][_0x3c4f34(0x1c7)]({'baileys':_0x302e52},_0x3c4f34(0x1d0)+_0x3a7fc2);throw new AppError_1[(_0x3c4f34(0x1d1))]('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20database.',0x1f4);}if(Array[_0x3c4f34(0x1b9)](_0xc84370)){const _0x272174=async _0x41eed0=>{_0x41eed0['forEach'](async({id:_0x57b183,name:_0x41f368,notify:_0x311b82})=>{const _0x2dc5c3=a578_0x2dd1;if(_0x57b183===_0x2dc5c3(0x1ae)||_0x57b183['includes'](_0x2dc5c3(0x1c3)))return;const _0x2e24cd=_0x57b183['replace'](/\D/g,''),_0x115392=await Contact_1[_0x2dc5c3(0x1d1)][_0x2dc5c3(0x1ad)]({'where':{'number':_0x2e24cd,'companyId':_0x1ca0a0}});if(_0x115392)_0x115392[_0x2dc5c3(0x1bc)]=_0x41f368||_0x311b82||_0x2e24cd,await _0x115392[_0x2dc5c3(0x1ab)]();else try{await(0x0,CreateContactService_1['default'])({'number':_0x2e24cd,'name':_0x41f368||_0x311b82||_0x2e24cd,'companyId':_0x1ca0a0});}catch(_0x202ea8){logger_1[_0x2dc5c3(0x1cd)][_0x2dc5c3(0x1b3)]({'name':_0x41f368,'number':_0x2e24cd,'companyId':_0x1ca0a0},_0x2dc5c3(0x1bf)+_0x202ea8);}});};_0x272174(_0xc84370)['then'](()=>{const _0x39d383=_0x3c4f34;logger_1['logger']['debug'](_0x39d383(0x1be)+_0x1ca0a0);},_0x459917=>{const _0x3a0218=_0x3c4f34;logger_1['logger'][_0x3a0218(0x1b3)](_0x3a0218(0x1ce)+_0x1ca0a0+_0x3a0218(0x1b8)+_0x459917['message']);});}};function a578_0x1bf4(){const _0x40a15e=['Error\x20importing\x20contacts\x20from\x20WhatsApp\x20for\x20company\x20ID:\x20','__importDefault','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20database.\x20Err:\x20','default','../../models/Contact','CONNECTED','save','../ContactServices/CreateContactService','findOne','status@broadcast','../../errors/AppError','732996JrBfJi','(((.+)+)+)+$','327418EfcmRH','error','../../models/Whatsapp','toString','parse','10TutFbn','\x20-\x20','isArray','82964ByPhmu','392kbyrUT','name','905152ibKPdr','Contacts\x20imported\x20successfully\x20from\x20WhatsApp\x20for\x20company\x20ID:\x20','Could\x20not\x20save\x20contact.\x20Err:\x20','whatsapp','__esModule','../../libs/wbot','g.us','contacts','apply','1344078OAyEGo','warn','15695217TuNKnF','search','ERR_NO_WAPP_FOUND','defineProperty','2366589nJmbLl','logger'];a578_0x1bf4=function(){return _0x40a15e;};return a578_0x1bf4();}exports['default']=ImportContactsService;