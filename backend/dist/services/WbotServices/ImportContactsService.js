const a546_0x1cf094=a546_0x3c5b;(function(_0x242446,_0x9d1858){const _0x48f034=a546_0x3c5b,_0x4650f2=_0x242446();while(!![]){try{const _0x2e4b35=parseInt(_0x48f034(0x158))/0x1+parseInt(_0x48f034(0x183))/0x2*(-parseInt(_0x48f034(0x181))/0x3)+parseInt(_0x48f034(0x153))/0x4+parseInt(_0x48f034(0x15c))/0x5*(-parseInt(_0x48f034(0x180))/0x6)+-parseInt(_0x48f034(0x17d))/0x7+-parseInt(_0x48f034(0x186))/0x8+-parseInt(_0x48f034(0x16f))/0x9*(-parseInt(_0x48f034(0x16c))/0xa);if(_0x2e4b35===_0x9d1858)break;else _0x4650f2['push'](_0x4650f2['shift']());}catch(_0x3b7cc9){_0x4650f2['push'](_0x4650f2['shift']());}}}(a546_0x4539,0x8edc2));function a546_0x4539(){const _0x3ecabb=['hasOwnProperty','search','status@broadcast','name','4392248VmawZO','contatos_depois.txt','isArray','46464uyqPOf','33RHzLOX','public','136126KRVhWa','../../utils/logger','g.us','7846384KjscEL','call','prototype','../../models/Contact','writeFile','__importDefault','4384136CMevGP','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','company','@sentry/node','replace','227563XbPkFn','contatos_antes.txt','toString','../BaileysServices/ShowBaileysService','425qtmAAg','get','save','parse','constructor','create','configurable','default','includes','writable','../../libs/wbot','contacts','(((.+)+)+)+$','__createBinding','captureException','error','20CKPAVK','warn','path','10245384ddSwpq','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20','__esModule','logger','lodash','companyId','defineProperty','join','__setModuleDefault','stringify'];a546_0x4539=function(){return _0x3ecabb;};return a546_0x4539();}const a546_0x2cc054=(function(){let _0xe20787=!![];return function(_0x51f7ce,_0x32c4cf){const _0x1fdff5=_0xe20787?function(){if(_0x32c4cf){const _0x35ea2e=_0x32c4cf['apply'](_0x51f7ce,arguments);return _0x32c4cf=null,_0x35ea2e;}}:function(){};return _0xe20787=![],_0x1fdff5;};}()),a546_0x32cbd0=a546_0x2cc054(this,function(){const _0x1b0fb6=a546_0x3c5b;return a546_0x32cbd0[_0x1b0fb6(0x15a)]()[_0x1b0fb6(0x17a)](_0x1b0fb6(0x168))['toString']()[_0x1b0fb6(0x160)](a546_0x32cbd0)['search']('(((.+)+)+)+$');});a546_0x32cbd0();'use strict';var __createBinding=this&&this[a546_0x1cf094(0x169)]||(Object['create']?function(_0x1fe81f,_0x1e091d,_0x4bd1b8,_0x574c10){const _0x494e6f=a546_0x1cf094;if(_0x574c10===undefined)_0x574c10=_0x4bd1b8;var _0x28f1db=Object['getOwnPropertyDescriptor'](_0x1e091d,_0x4bd1b8);(!_0x28f1db||(_0x494e6f(0x15d)in _0x28f1db?!_0x1e091d['__esModule']:_0x28f1db[_0x494e6f(0x165)]||_0x28f1db[_0x494e6f(0x162)]))&&(_0x28f1db={'enumerable':!![],'get':function(){return _0x1e091d[_0x4bd1b8];}}),Object[_0x494e6f(0x175)](_0x1fe81f,_0x574c10,_0x28f1db);}:function(_0x3af6de,_0x574bf1,_0x2c9ca1,_0xbe2fbe){if(_0xbe2fbe===undefined)_0xbe2fbe=_0x2c9ca1;_0x3af6de[_0xbe2fbe]=_0x574bf1[_0x2c9ca1];}),__setModuleDefault=this&&this[a546_0x1cf094(0x177)]||(Object[a546_0x1cf094(0x161)]?function(_0x3c97cb,_0x5a3840){const _0x316f70=a546_0x1cf094;Object[_0x316f70(0x175)](_0x3c97cb,_0x316f70(0x163),{'enumerable':!![],'value':_0x5a3840});}:function(_0x343261,_0x5c851d){const _0x20d81a=a546_0x1cf094;_0x343261[_0x20d81a(0x163)]=_0x5c851d;}),__importStar=this&&this['__importStar']||function(_0x2d556f){const _0x3cf703=a546_0x1cf094;if(_0x2d556f&&_0x2d556f[_0x3cf703(0x171)])return _0x2d556f;var _0x6b1480={};if(_0x2d556f!=null){for(var _0x140891 in _0x2d556f)if(_0x140891!==_0x3cf703(0x163)&&Object[_0x3cf703(0x14f)][_0x3cf703(0x179)][_0x3cf703(0x187)](_0x2d556f,_0x140891))__createBinding(_0x6b1480,_0x2d556f,_0x140891);}return __setModuleDefault(_0x6b1480,_0x2d556f),_0x6b1480;},__importDefault=this&&this[a546_0x1cf094(0x152)]||function(_0x57bc22){const _0xcb8d39=a546_0x1cf094;return _0x57bc22&&_0x57bc22[_0xcb8d39(0x171)]?_0x57bc22:{'default':_0x57bc22};};function a546_0x3c5b(_0x1bc807,_0x225742){const _0x258dca=a546_0x4539();return a546_0x3c5b=function(_0x32cbd0,_0x2cc054){_0x32cbd0=_0x32cbd0-0x14f;let _0x4539b6=_0x258dca[_0x32cbd0];return _0x4539b6;},a546_0x3c5b(_0x1bc807,_0x225742);}Object['defineProperty'](exports,a546_0x1cf094(0x171),{'value':!![]});const Sentry=__importStar(require(a546_0x1cf094(0x156))),GetDefaultWhatsApp_1=__importDefault(require('../../helpers/GetDefaultWhatsApp')),wbot_1=require(a546_0x1cf094(0x166)),Contact_1=__importDefault(require(a546_0x1cf094(0x150))),logger_1=require(a546_0x1cf094(0x184)),ShowBaileysService_1=__importDefault(require(a546_0x1cf094(0x15b))),CreateContactService_1=__importDefault(require('../ContactServices/CreateContactService')),lodash_1=require(a546_0x1cf094(0x173)),path_1=__importDefault(require(a546_0x1cf094(0x16e))),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x3e092c=>{const _0x325ac7=a546_0x1cf094,_0x4290fa=await(0x0,GetDefaultWhatsApp_1[_0x325ac7(0x163)])(_0x3e092c),_0x1344dd=(0x0,wbot_1['getWbot'])(_0x4290fa['id']);let _0x1ca3a6;try{const _0x167451=await(0x0,ShowBaileysService_1['default'])(_0x1344dd['id']);_0x1ca3a6=JSON[_0x325ac7(0x15f)](_0x167451[_0x325ac7(0x167)]);const _0x5c8f99=path_1[_0x325ac7(0x163)]['resolve'](__dirname,'..','..','..',_0x325ac7(0x182),_0x325ac7(0x155)+_0x4290fa[_0x325ac7(0x174)]),_0x4738a7=path_1['default']['join'](_0x5c8f99,_0x325ac7(0x159));fs_1[_0x325ac7(0x163)][_0x325ac7(0x151)](_0x4738a7,JSON[_0x325ac7(0x178)](_0x1ca3a6,null,0x2),_0xb844e=>{const _0x54d259=_0x325ac7;if(_0xb844e){logger_1[_0x54d259(0x172)][_0x54d259(0x16b)](_0x54d259(0x154)+_0xb844e);throw _0xb844e;}});}catch(_0x1055cf){Sentry[_0x325ac7(0x16a)](_0x1055cf),logger_1['logger'][_0x325ac7(0x16b)](_0x325ac7(0x170)+_0x1055cf);}const _0x140456=path_1['default']['resolve'](__dirname,'..','..','..',_0x325ac7(0x182),'company'+_0x4290fa['companyId']),_0x6a26c3=path_1[_0x325ac7(0x163)][_0x325ac7(0x176)](_0x140456,_0x325ac7(0x17e));fs_1[_0x325ac7(0x163)][_0x325ac7(0x151)](_0x6a26c3,JSON[_0x325ac7(0x178)](_0x1ca3a6,null,0x2),_0x457b6d=>{const _0x18db23=_0x325ac7;if(_0x457b6d){logger_1['logger'][_0x18db23(0x16b)](_0x18db23(0x154)+_0x457b6d);throw _0x457b6d;}});const _0x393ad7=(0x0,lodash_1['isString'])(_0x1ca3a6)?JSON['parse'](_0x1ca3a6):_0x1ca3a6;if((0x0,lodash_1[_0x325ac7(0x17f)])(_0x393ad7))for(const {id:_0x19c9a1,name:_0x3235a3,notify:_0x2c3c99}of _0x393ad7){if(_0x19c9a1===_0x325ac7(0x17b)||_0x19c9a1[_0x325ac7(0x164)](_0x325ac7(0x185)))continue;const _0x5e4ac2=_0x19c9a1[_0x325ac7(0x157)](/\D/g,''),_0x4bcdc8=await Contact_1[_0x325ac7(0x163)]['findOne']({'where':{'number':_0x5e4ac2,'companyId':_0x3e092c}});if(_0x4bcdc8)_0x4bcdc8[_0x325ac7(0x17c)]=_0x3235a3||_0x2c3c99,await _0x4bcdc8[_0x325ac7(0x15e)]();else try{await(0x0,CreateContactService_1[_0x325ac7(0x163)])({'number':_0x5e4ac2,'name':_0x3235a3||_0x2c3c99,'companyId':_0x3e092c});}catch(_0x2a5201){Sentry[_0x325ac7(0x16a)](_0x2a5201),logger_1[_0x325ac7(0x172)][_0x325ac7(0x16d)](_0x325ac7(0x170)+_0x2a5201);}}};exports[a546_0x1cf094(0x163)]=ImportContactsService;