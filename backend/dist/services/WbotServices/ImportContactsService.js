function a578_0x28e2(){const _0x4cb9ff=['whatsapp','249310hEeSad','CONNECTED','debug','644764zAynlC','warn','Could\x20not\x20save\x20contact.\x20Err:\x20','logger','653870IeZlFT','../ContactServices/CreateContactService','apply','8535204Bfhgod','__importDefault','../../libs/wbot','../BaileysServices/ShowBaileysService','error','save','findOne','replace','getWbot','defineProperty','10VyxiGS','contacts','\x20-\x20','name','../../models/Whatsapp','1494903JCvQdN','constructor','default','(((.+)+)+)+$','Contacts\x20imported\x20successfully\x20from\x20WhatsApp\x20for\x20company\x20ID:\x20','16dbAnpG','18frwlwd','__esModule','isArray','../../utils/logger','then','../../errors/AppError','2329845AMrbCq','2541156KdAtUZ','../../models/Contact','toString','status@broadcast','includes','search','message','parse'];a578_0x28e2=function(){return _0x4cb9ff;};return a578_0x28e2();}const a578_0x1714de=a578_0xe2d8;(function(_0x5d5c72,_0x2e4187){const _0xf23572=a578_0xe2d8,_0x2f26f6=_0x5d5c72();while(!![]){try{const _0x203f7b=parseInt(_0xf23572(0x88))/0x1+parseInt(_0xf23572(0x85))/0x2+parseInt(_0xf23572(0x9e))/0x3+parseInt(_0xf23572(0xab))/0x4+parseInt(_0xf23572(0x8c))/0x5*(parseInt(_0xf23572(0xa4))/0x6)+-parseInt(_0xf23572(0xaa))/0x7*(parseInt(_0xf23572(0xa3))/0x8)+-parseInt(_0xf23572(0x8f))/0x9*(parseInt(_0xf23572(0x99))/0xa);if(_0x203f7b===_0x2e4187)break;else _0x2f26f6['push'](_0x2f26f6['shift']());}catch(_0x45586d){_0x2f26f6['push'](_0x2f26f6['shift']());}}}(a578_0x28e2,0xa6559));const a578_0x4481ad=(function(){let _0x405922=!![];return function(_0xfdd18c,_0x325840){const _0x3d90b2=_0x405922?function(){const _0x46d35c=a578_0xe2d8;if(_0x325840){const _0x4c90e5=_0x325840[_0x46d35c(0x8e)](_0xfdd18c,arguments);return _0x325840=null,_0x4c90e5;}}:function(){};return _0x405922=![],_0x3d90b2;};}()),a578_0x43b8d5=a578_0x4481ad(this,function(){const _0xfcea1f=a578_0xe2d8;return a578_0x43b8d5[_0xfcea1f(0xad)]()[_0xfcea1f(0x81)](_0xfcea1f(0xa1))['toString']()[_0xfcea1f(0x9f)](a578_0x43b8d5)['search'](_0xfcea1f(0xa1));});a578_0x43b8d5();function a578_0xe2d8(_0x1488a1,_0x11fbc5){const _0x467a08=a578_0x28e2();return a578_0xe2d8=function(_0x43b8d5,_0x4481ad){_0x43b8d5=_0x43b8d5-0x80;let _0x28e219=_0x467a08[_0x43b8d5];return _0x28e219;},a578_0xe2d8(_0x1488a1,_0x11fbc5);}'use strict';var __importDefault=this&&this[a578_0x1714de(0x90)]||function(_0x2cab44){const _0x5347f1=a578_0x1714de;return _0x2cab44&&_0x2cab44[_0x5347f1(0xa5)]?_0x2cab44:{'default':_0x2cab44};};Object[a578_0x1714de(0x98)](exports,a578_0x1714de(0xa5),{'value':!![]});const wbot_1=require(a578_0x1714de(0x91)),Contact_1=__importDefault(require(a578_0x1714de(0xac))),logger_1=require(a578_0x1714de(0xa7)),ShowBaileysService_1=__importDefault(require(a578_0x1714de(0x92))),CreateContactService_1=__importDefault(require(a578_0x1714de(0x8d))),AppError_1=__importDefault(require(a578_0x1714de(0xa9))),Whatsapp_1=__importDefault(require(a578_0x1714de(0x9d))),ImportContactsService=async(_0x1f21f2,_0x325c1e)=>{const _0x373348=a578_0x1714de,_0x3511d3=await Whatsapp_1[_0x373348(0xa0)]['findOne']({'where':{'id':_0x325c1e,'companyId':_0x1f21f2,'channel':_0x373348(0x84),'status':_0x373348(0x86)}});if(!_0x3511d3)throw new AppError_1['default']('ERR_NO_WAPP_FOUND',0x194);const _0x268fc3=(0x0,wbot_1[_0x373348(0x97)])(_0x3511d3['id']),_0x2a83bb=await(0x0,ShowBaileysService_1['default'])(_0x268fc3['id']);let _0x2b6332=null;try{_0x2b6332=_0x2a83bb[_0x373348(0x9a)]&&JSON[_0x373348(0x83)](_0x2a83bb[_0x373348(0x9a)]);}catch(_0x266b63){logger_1[_0x373348(0x8b)][_0x373348(0x89)]({'baileys':_0x2a83bb},'Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20database.\x20Err:\x20'+_0x266b63);throw new AppError_1[(_0x373348(0xa0))]('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20database.',0x1f4);}if(Array[_0x373348(0xa6)](_0x2b6332)){const _0x24f769=async _0x1a7a71=>{_0x1a7a71['forEach'](async({id:_0x3f027c,name:_0x177341,notify:_0x56b443})=>{const _0xc3510b=a578_0xe2d8;if(_0x3f027c===_0xc3510b(0xae)||_0x3f027c[_0xc3510b(0x80)]('g.us'))return;const _0x470c9d=_0x3f027c[_0xc3510b(0x96)](/\D/g,''),_0x7e9c2c=await Contact_1[_0xc3510b(0xa0)][_0xc3510b(0x95)]({'where':{'number':_0x470c9d,'companyId':_0x1f21f2}});if(_0x7e9c2c)_0x7e9c2c[_0xc3510b(0x9c)]=_0x177341||_0x56b443||_0x470c9d,await _0x7e9c2c[_0xc3510b(0x94)]();else try{await(0x0,CreateContactService_1[_0xc3510b(0xa0)])({'number':_0x470c9d,'name':_0x177341||_0x56b443||_0x470c9d,'companyId':_0x1f21f2});}catch(_0x129e64){logger_1[_0xc3510b(0x8b)][_0xc3510b(0x93)]({'name':_0x177341,'number':_0x470c9d,'companyId':_0x1f21f2},_0xc3510b(0x8a)+_0x129e64);}});};_0x24f769(_0x2b6332)[_0x373348(0xa8)](()=>{const _0x1a7809=_0x373348;logger_1[_0x1a7809(0x8b)][_0x1a7809(0x87)](_0x1a7809(0xa2)+_0x1f21f2);},_0x46c1db=>{const _0x1e6900=_0x373348;logger_1[_0x1e6900(0x8b)][_0x1e6900(0x93)]('Error\x20importing\x20contacts\x20from\x20WhatsApp\x20for\x20company\x20ID:\x20'+_0x1f21f2+_0x1e6900(0x9b)+_0x46c1db[_0x1e6900(0x82)]);});}};exports['default']=ImportContactsService;