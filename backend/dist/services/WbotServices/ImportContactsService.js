const a574_0x2103e8=a574_0x25d9;function a574_0x91e9(){const _0x4337bb=['../../libs/wbot','Could\x20not\x20save\x20contact.\x20Err:\x20','607680aYDOvX','372684BBaIGD','message','__importDefault','2006kfFYJx','debug','ERR_NO_WAPP_FOUND','../../utils/logger','230LDgcQG','toString','../../errors/AppError','3000536YbVHGh','../BaileysServices/ShowBaileysService','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20database.','forEach','12169928dnhJVJ','defineProperty','findOne','search','logger','../ContactServices/CreateContactService','__esModule','../../models/Contact','default','replace','../../models/Whatsapp','Error\x20importing\x20contacts\x20from\x20WhatsApp\x20for\x20company\x20ID:\x20','getWbot','apply','then','isArray','1751937AVZkrG','constructor','name','warn','4671600kktSgZ','status@broadcast','save','whatsapp','error','contacts','9DTDlll'];a574_0x91e9=function(){return _0x4337bb;};return a574_0x91e9();}(function(_0x47c07c,_0x52a154){const _0x15b993=a574_0x25d9,_0x37f408=_0x47c07c();while(!![]){try{const _0x41937e=parseInt(_0x15b993(0x95))/0x1*(parseInt(_0x15b993(0x99))/0x2)+-parseInt(_0x15b993(0xb0))/0x3+-parseInt(_0x15b993(0x92))/0x4+-parseInt(_0x15b993(0xb4))/0x5+-parseInt(_0x15b993(0x91))/0x6+parseInt(_0x15b993(0x9c))/0x7+-parseInt(_0x15b993(0xa0))/0x8*(-parseInt(_0x15b993(0x8e))/0x9);if(_0x41937e===_0x52a154)break;else _0x37f408['push'](_0x37f408['shift']());}catch(_0x2dc977){_0x37f408['push'](_0x37f408['shift']());}}}(a574_0x91e9,0x72375));const a574_0x5d6286=(function(){let _0xb78b7a=!![];return function(_0x1ae8e2,_0x16c475){const _0xae9601=_0xb78b7a?function(){const _0x5d08a3=a574_0x25d9;if(_0x16c475){const _0x17ec58=_0x16c475[_0x5d08a3(0xad)](_0x1ae8e2,arguments);return _0x16c475=null,_0x17ec58;}}:function(){};return _0xb78b7a=![],_0xae9601;};}()),a574_0x588b7d=a574_0x5d6286(this,function(){const _0x30887d=a574_0x25d9;return a574_0x588b7d['toString']()['search']('(((.+)+)+)+$')[_0x30887d(0x9a)]()[_0x30887d(0xb1)](a574_0x588b7d)[_0x30887d(0xa3)]('(((.+)+)+)+$');});function a574_0x25d9(_0x304f37,_0x257ed5){const _0x205923=a574_0x91e9();return a574_0x25d9=function(_0x588b7d,_0x5d6286){_0x588b7d=_0x588b7d-0x8b;let _0x91e999=_0x205923[_0x588b7d];return _0x91e999;},a574_0x25d9(_0x304f37,_0x257ed5);}a574_0x588b7d();'use strict';var __importDefault=this&&this[a574_0x2103e8(0x94)]||function(_0x42666a){const _0x8f23d2=a574_0x2103e8;return _0x42666a&&_0x42666a[_0x8f23d2(0xa6)]?_0x42666a:{'default':_0x42666a};};Object[a574_0x2103e8(0xa1)](exports,a574_0x2103e8(0xa6),{'value':!![]});const wbot_1=require(a574_0x2103e8(0x8f)),Contact_1=__importDefault(require(a574_0x2103e8(0xa7))),logger_1=require(a574_0x2103e8(0x98)),ShowBaileysService_1=__importDefault(require(a574_0x2103e8(0x9d))),CreateContactService_1=__importDefault(require(a574_0x2103e8(0xa5))),AppError_1=__importDefault(require(a574_0x2103e8(0x9b))),Whatsapp_1=__importDefault(require(a574_0x2103e8(0xaa))),ImportContactsService=async(_0x5828cf,_0x20a625)=>{const _0x1c0338=a574_0x2103e8,_0x385bfa=await Whatsapp_1[_0x1c0338(0xa8)][_0x1c0338(0xa2)]({'where':{'id':_0x20a625,'companyId':_0x5828cf,'channel':_0x1c0338(0x8b),'status':'CONNECTED'}});if(!_0x385bfa)throw new AppError_1[(_0x1c0338(0xa8))](_0x1c0338(0x97),0x194);const _0xdde57a=(0x0,wbot_1[_0x1c0338(0xac)])(_0x385bfa['id']),_0x3b8368=await(0x0,ShowBaileysService_1[_0x1c0338(0xa8)])(_0xdde57a['id']);let _0x3b114a=null;try{_0x3b114a=_0x3b8368['contacts']&&JSON['parse'](_0x3b8368[_0x1c0338(0x8d)]);}catch(_0x89a578){logger_1[_0x1c0338(0xa4)][_0x1c0338(0xb3)]({'baileys':_0x3b8368},'Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20database.\x20Err:\x20'+_0x89a578);throw new AppError_1['default'](_0x1c0338(0x9e),0x1f4);}if(Array[_0x1c0338(0xaf)](_0x3b114a)){const _0x23f4f3=async _0x2d9358=>{const _0x39a30d=_0x1c0338;_0x2d9358[_0x39a30d(0x9f)](async({id:_0x5f44f1,name:_0x3931a6,notify:_0x41fac3})=>{const _0x2012b8=_0x39a30d;if(_0x5f44f1===_0x2012b8(0xb5)||_0x5f44f1['includes']('g.us'))return;const _0xf656c1=_0x5f44f1[_0x2012b8(0xa9)](/\D/g,''),_0xedf19c=await Contact_1['default']['findOne']({'where':{'number':_0xf656c1,'companyId':_0x5828cf}});if(_0xedf19c)_0xedf19c[_0x2012b8(0xb2)]=_0x3931a6||_0x41fac3||_0xf656c1,await _0xedf19c[_0x2012b8(0xb6)]();else try{await(0x0,CreateContactService_1[_0x2012b8(0xa8)])({'number':_0xf656c1,'name':_0x3931a6||_0x41fac3||_0xf656c1,'companyId':_0x5828cf});}catch(_0x162675){logger_1[_0x2012b8(0xa4)][_0x2012b8(0x8c)]({'name':_0x3931a6,'number':_0xf656c1,'companyId':_0x5828cf},_0x2012b8(0x90)+_0x162675);}});};_0x23f4f3(_0x3b114a)[_0x1c0338(0xae)](()=>{const _0x30ac03=_0x1c0338;logger_1[_0x30ac03(0xa4)][_0x30ac03(0x96)]('Contacts\x20imported\x20successfully\x20from\x20WhatsApp\x20for\x20company\x20ID:\x20'+_0x5828cf);},_0x250ab2=>{const _0x14013a=_0x1c0338;logger_1['logger'][_0x14013a(0x8c)](_0x14013a(0xab)+_0x5828cf+'\x20-\x20'+_0x250ab2[_0x14013a(0x93)]);});}};exports[a574_0x2103e8(0xa8)]=ImportContactsService;