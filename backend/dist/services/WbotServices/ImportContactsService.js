const a537_0xd3f9eb=a537_0x595d;(function(_0x3b27e8,_0x2c4bb7){const _0x45c7a3=a537_0x595d,_0x7d41d=_0x3b27e8();while(!![]){try{const _0x13b8f6=-parseInt(_0x45c7a3(0x130))/0x1+parseInt(_0x45c7a3(0x10d))/0x2+parseInt(_0x45c7a3(0x110))/0x3*(-parseInt(_0x45c7a3(0x132))/0x4)+-parseInt(_0x45c7a3(0x120))/0x5*(-parseInt(_0x45c7a3(0x12a))/0x6)+parseInt(_0x45c7a3(0x108))/0x7*(-parseInt(_0x45c7a3(0x128))/0x8)+-parseInt(_0x45c7a3(0x105))/0x9+-parseInt(_0x45c7a3(0x12b))/0xa*(-parseInt(_0x45c7a3(0x101))/0xb);if(_0x13b8f6===_0x2c4bb7)break;else _0x7d41d['push'](_0x7d41d['shift']());}catch(_0x43b0f2){_0x7d41d['push'](_0x7d41d['shift']());}}}(a537_0x1d57,0x5d6a9));const a537_0x3f9894=(function(){let _0x5a4e1c=!![];return function(_0x5de4f3,_0x3a4edb){const _0x56757a=_0x5a4e1c?function(){if(_0x3a4edb){const _0x17e464=_0x3a4edb['apply'](_0x5de4f3,arguments);return _0x3a4edb=null,_0x17e464;}}:function(){};return _0x5a4e1c=![],_0x56757a;};}()),a537_0x2d416a=a537_0x3f9894(this,function(){const _0x485fa4=a537_0x595d;return a537_0x2d416a[_0x485fa4(0x113)]()[_0x485fa4(0x12d)](_0x485fa4(0x131))[_0x485fa4(0x113)]()['constructor'](a537_0x2d416a)[_0x485fa4(0x12d)](_0x485fa4(0x131));});a537_0x2d416a();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a537_0xd3f9eb(0x10e)]?function(_0x251ccf,_0x3242ef,_0x1ed35d,_0x208019){const _0x3b421d=a537_0xd3f9eb;if(_0x208019===undefined)_0x208019=_0x1ed35d;var _0x2d7cf8=Object[_0x3b421d(0x12c)](_0x3242ef,_0x1ed35d);(!_0x2d7cf8||(_0x3b421d(0x134)in _0x2d7cf8?!_0x3242ef['__esModule']:_0x2d7cf8[_0x3b421d(0x12e)]||_0x2d7cf8[_0x3b421d(0x11d)]))&&(_0x2d7cf8={'enumerable':!![],'get':function(){return _0x3242ef[_0x1ed35d];}}),Object[_0x3b421d(0x114)](_0x251ccf,_0x208019,_0x2d7cf8);}:function(_0x44beb8,_0x50f043,_0x25a1ad,_0x40020e){if(_0x40020e===undefined)_0x40020e=_0x25a1ad;_0x44beb8[_0x40020e]=_0x50f043[_0x25a1ad];}),__setModuleDefault=this&&this[a537_0xd3f9eb(0x11a)]||(Object['create']?function(_0x636328,_0x45da95){const _0x572ad1=a537_0xd3f9eb;Object[_0x572ad1(0x114)](_0x636328,_0x572ad1(0x10c),{'enumerable':!![],'value':_0x45da95});}:function(_0x27aa8d,_0xd5ac45){const _0x230340=a537_0xd3f9eb;_0x27aa8d[_0x230340(0x10c)]=_0xd5ac45;}),__importStar=this&&this[a537_0xd3f9eb(0x10f)]||function(_0x382630){const _0x1c9a30=a537_0xd3f9eb;if(_0x382630&&_0x382630[_0x1c9a30(0x123)])return _0x382630;var _0x8f24a1={};if(_0x382630!=null){for(var _0x5936e4 in _0x382630)if(_0x5936e4!=='default'&&Object[_0x1c9a30(0x109)]['hasOwnProperty'][_0x1c9a30(0x127)](_0x382630,_0x5936e4))__createBinding(_0x8f24a1,_0x382630,_0x5936e4);}return __setModuleDefault(_0x8f24a1,_0x382630),_0x8f24a1;},__importDefault=this&&this[a537_0xd3f9eb(0x129)]||function(_0x4b2c4c){return _0x4b2c4c&&_0x4b2c4c['__esModule']?_0x4b2c4c:{'default':_0x4b2c4c};};function a537_0x595d(_0x3b77e5,_0x2289a1){const _0x4d11ea=a537_0x1d57();return a537_0x595d=function(_0x2d416a,_0x3f9894){_0x2d416a=_0x2d416a-0xff;let _0x1d57df=_0x4d11ea[_0x2d416a];return _0x1d57df;},a537_0x595d(_0x3b77e5,_0x2289a1);}Object['defineProperty'](exports,a537_0xd3f9eb(0x123),{'value':!![]});const Sentry=__importStar(require(a537_0xd3f9eb(0x11b))),GetDefaultWhatsApp_1=__importDefault(require(a537_0xd3f9eb(0x122))),wbot_1=require('../../libs/wbot'),Contact_1=__importDefault(require(a537_0xd3f9eb(0x100))),logger_1=require(a537_0xd3f9eb(0x103)),ShowBaileysService_1=__importDefault(require(a537_0xd3f9eb(0x137))),CreateContactService_1=__importDefault(require(a537_0xd3f9eb(0x107))),lodash_1=require(a537_0xd3f9eb(0x116)),path_1=__importDefault(require(a537_0xd3f9eb(0x11e))),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x16ebad=>{const _0x865b63=a537_0xd3f9eb,_0x1c73ed=await(0x0,GetDefaultWhatsApp_1[_0x865b63(0x10c)])(_0x16ebad),_0x1c867a=(0x0,wbot_1[_0x865b63(0x111)])(_0x1c73ed['id']);let _0xf19ebd;try{const _0x1a0c47=await(0x0,ShowBaileysService_1[_0x865b63(0x10c)])(_0x1c867a['id']);_0xf19ebd=JSON['parse'](_0x1a0c47[_0x865b63(0x104)]);const _0x450960=path_1[_0x865b63(0x10c)][_0x865b63(0x125)](__dirname,'..','..','..','public','company'+_0x1c73ed[_0x865b63(0x106)]),_0xa4980d=path_1[_0x865b63(0x10c)][_0x865b63(0x118)](_0x450960,'contatos_antes.txt');fs_1[_0x865b63(0x10c)]['writeFile'](_0xa4980d,JSON[_0x865b63(0x121)](_0xf19ebd,null,0x2),_0x5f35a5=>{const _0x4bb9d3=_0x865b63;if(_0x5f35a5){logger_1['logger']['error'](_0x4bb9d3(0xff)+_0x5f35a5);throw _0x5f35a5;}});}catch(_0x4f1f5b){Sentry['captureException'](_0x4f1f5b),logger_1[_0x865b63(0x115)]['error'](_0x865b63(0x102)+_0x4f1f5b);}const _0x7ae00c=path_1[_0x865b63(0x10c)]['resolve'](__dirname,'..','..','..',_0x865b63(0x112),_0x865b63(0x10a)+_0x1c73ed['companyId']),_0x34b250=path_1[_0x865b63(0x10c)][_0x865b63(0x118)](_0x7ae00c,_0x865b63(0x124));fs_1['default']['writeFile'](_0x34b250,JSON[_0x865b63(0x121)](_0xf19ebd,null,0x2),_0x3b0ceb=>{const _0x502964=_0x865b63;if(_0x3b0ceb){logger_1['logger'][_0x502964(0x12f)]('Failed\x20to\x20write\x20contacts\x20to\x20file:\x20'+_0x3b0ceb);throw _0x3b0ceb;}});const _0x4a6268=(0x0,lodash_1[_0x865b63(0x117)])(_0xf19ebd)?JSON[_0x865b63(0x10b)](_0xf19ebd):_0xf19ebd;if((0x0,lodash_1[_0x865b63(0x135)])(_0x4a6268))for(const {id:_0x3fbf3d,name:_0x7338eb,notify:_0x3f806}of _0x4a6268){if(_0x3fbf3d===_0x865b63(0x133)||_0x3fbf3d['includes']('g.us'))continue;const _0x5acd79=_0x3fbf3d[_0x865b63(0x11c)](/\D/g,''),_0x459c3f=await Contact_1[_0x865b63(0x10c)][_0x865b63(0x136)]({'where':{'number':_0x5acd79,'companyId':_0x16ebad}});if(_0x459c3f)_0x459c3f[_0x865b63(0x119)]=_0x7338eb||_0x3f806,await _0x459c3f['save']();else try{await(0x0,CreateContactService_1[_0x865b63(0x10c)])({'number':_0x5acd79,'name':_0x7338eb||_0x3f806,'companyId':_0x16ebad});}catch(_0x29eadb){Sentry[_0x865b63(0x126)](_0x29eadb),logger_1['logger'][_0x865b63(0x11f)](_0x865b63(0x102)+_0x29eadb);}}};function a537_0x1d57(){const _0x608936=['configurable','path','warn','556590OyEyZO','stringify','../../helpers/GetDefaultWhatsApp','__esModule','contatos_depois.txt','resolve','captureException','call','3109208XUUJrR','__importDefault','24ecdjsK','2299630dlhril','getOwnPropertyDescriptor','search','writable','error','8772acxYGj','(((.+)+)+)+$','264188zUZNHs','status@broadcast','get','isArray','findOne','../BaileysServices/ShowBaileysService','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','../../models/Contact','44NXdgnc','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20','../../utils/logger','contacts','2254068XiooUT','companyId','../ContactServices/CreateContactService','7QfDsCU','prototype','company','parse','default','123332NMUATi','create','__importStar','18HKrddW','getWbot','public','toString','defineProperty','logger','lodash','isString','join','name','__setModuleDefault','@sentry/node','replace'];a537_0x1d57=function(){return _0x608936;};return a537_0x1d57();}exports['default']=ImportContactsService;