const a545_0x260658=a545_0x5cd9;function a545_0x5cd9(_0x829e6b,_0x2331b4){const _0x2a3639=a545_0x5479();return a545_0x5cd9=function(_0x2e19a4,_0x4b1cdd){_0x2e19a4=_0x2e19a4-0xc1;let _0x54791d=_0x2a3639[_0x2e19a4];return _0x54791d;},a545_0x5cd9(_0x829e6b,_0x2331b4);}(function(_0x3ca2a8,_0x309e67){const _0x3357e7=a545_0x5cd9,_0x2f5773=_0x3ca2a8();while(!![]){try{const _0x428e56=-parseInt(_0x3357e7(0xc8))/0x1*(parseInt(_0x3357e7(0xd5))/0x2)+parseInt(_0x3357e7(0xc1))/0x3*(-parseInt(_0x3357e7(0xdb))/0x4)+-parseInt(_0x3357e7(0xe3))/0x5*(-parseInt(_0x3357e7(0xe9))/0x6)+parseInt(_0x3357e7(0xd1))/0x7*(parseInt(_0x3357e7(0xd6))/0x8)+-parseInt(_0x3357e7(0xef))/0x9*(-parseInt(_0x3357e7(0xd8))/0xa)+-parseInt(_0x3357e7(0xd0))/0xb+parseInt(_0x3357e7(0xdf))/0xc;if(_0x428e56===_0x309e67)break;else _0x2f5773['push'](_0x2f5773['shift']());}catch(_0x27373){_0x2f5773['push'](_0x2f5773['shift']());}}}(a545_0x5479,0x9b8d5));function a545_0x5479(){const _0x5a76d7=['../ContactServices/CreateContactService','get','getWbot','warn','error','../../utils/logger','12539956VBfDYx','875xfyByq','default','constructor','defineProperty','1894038ZDCfkt','81528DNWPBp','lodash','750NBdVHa','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','create','1530416Haxuks','search','logger','findOne','9537876PMNLos','call','contacts','../../helpers/GetDefaultWhatsApp','10KPsotZ','stringify','captureException','toString','__importDefault','configurable','1000848QtaWSc','__importStar','public','companyId','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20','../../libs/wbot','130446KTLoIy','resolve','isString','company','writable','(((.+)+)+)+$','join','../../models/Contact','replace','isArray','__setModuleDefault','includes','6SGYhfE','../BaileysServices/ShowBaileysService','name','status@broadcast','__esModule','contatos_antes.txt','contatos_depois.txt','1GvYUBt','writeFile'];a545_0x5479=function(){return _0x5a76d7;};return a545_0x5479();}const a545_0x4b1cdd=(function(){let _0x10ff1f=!![];return function(_0x8c9455,_0x727cfe){const _0x226d0d=_0x10ff1f?function(){if(_0x727cfe){const _0x39c59b=_0x727cfe['apply'](_0x8c9455,arguments);return _0x727cfe=null,_0x39c59b;}}:function(){};return _0x10ff1f=![],_0x226d0d;};}()),a545_0x2e19a4=a545_0x4b1cdd(this,function(){const _0x3ddf67=a545_0x5cd9;return a545_0x2e19a4['toString']()[_0x3ddf67(0xdc)](_0x3ddf67(0xf4))[_0x3ddf67(0xe6)]()[_0x3ddf67(0xd3)](a545_0x2e19a4)['search'](_0x3ddf67(0xf4));});a545_0x2e19a4();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a545_0x260658(0xda)]?function(_0x2dfbb9,_0xa105c2,_0x42ea8c,_0x466fe5){const _0xd67dba=a545_0x260658;if(_0x466fe5===undefined)_0x466fe5=_0x42ea8c;var _0x23a6bb=Object['getOwnPropertyDescriptor'](_0xa105c2,_0x42ea8c);(!_0x23a6bb||(_0xd67dba(0xcb)in _0x23a6bb?!_0xa105c2[_0xd67dba(0xc5)]:_0x23a6bb[_0xd67dba(0xf3)]||_0x23a6bb[_0xd67dba(0xe8)]))&&(_0x23a6bb={'enumerable':!![],'get':function(){return _0xa105c2[_0x42ea8c];}}),Object[_0xd67dba(0xd4)](_0x2dfbb9,_0x466fe5,_0x23a6bb);}:function(_0x4383f0,_0x477a8a,_0x291683,_0xee9697){if(_0xee9697===undefined)_0xee9697=_0x291683;_0x4383f0[_0xee9697]=_0x477a8a[_0x291683];}),__setModuleDefault=this&&this[a545_0x260658(0xf9)]||(Object[a545_0x260658(0xda)]?function(_0x1a60e1,_0xbe51d){const _0xb651a7=a545_0x260658;Object['defineProperty'](_0x1a60e1,_0xb651a7(0xd2),{'enumerable':!![],'value':_0xbe51d});}:function(_0x4817bd,_0x5184b9){const _0x44fb36=a545_0x260658;_0x4817bd[_0x44fb36(0xd2)]=_0x5184b9;}),__importStar=this&&this[a545_0x260658(0xea)]||function(_0x5c74df){const _0x4d565c=a545_0x260658;if(_0x5c74df&&_0x5c74df['__esModule'])return _0x5c74df;var _0x43d8d8={};if(_0x5c74df!=null){for(var _0x259c61 in _0x5c74df)if(_0x259c61!=='default'&&Object['prototype']['hasOwnProperty'][_0x4d565c(0xe0)](_0x5c74df,_0x259c61))__createBinding(_0x43d8d8,_0x5c74df,_0x259c61);}return __setModuleDefault(_0x43d8d8,_0x5c74df),_0x43d8d8;},__importDefault=this&&this[a545_0x260658(0xe7)]||function(_0x2c67a4){const _0x22fcf2=a545_0x260658;return _0x2c67a4&&_0x2c67a4[_0x22fcf2(0xc5)]?_0x2c67a4:{'default':_0x2c67a4};};Object[a545_0x260658(0xd4)](exports,a545_0x260658(0xc5),{'value':!![]});const Sentry=__importStar(require('@sentry/node')),GetDefaultWhatsApp_1=__importDefault(require(a545_0x260658(0xe2))),wbot_1=require(a545_0x260658(0xee)),Contact_1=__importDefault(require(a545_0x260658(0xf6))),logger_1=require(a545_0x260658(0xcf)),ShowBaileysService_1=__importDefault(require(a545_0x260658(0xc2))),CreateContactService_1=__importDefault(require(a545_0x260658(0xca))),lodash_1=require(a545_0x260658(0xd7)),path_1=__importDefault(require('path')),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x3523f4=>{const _0x32eb22=a545_0x260658,_0x85b001=await(0x0,GetDefaultWhatsApp_1['default'])(_0x3523f4),_0x25abea=(0x0,wbot_1[_0x32eb22(0xcc)])(_0x85b001['id']);let _0x2f2f68;try{const _0x4814bf=await(0x0,ShowBaileysService_1[_0x32eb22(0xd2)])(_0x25abea['id']);_0x2f2f68=JSON['parse'](_0x4814bf[_0x32eb22(0xe1)]);const _0x17e3d4=path_1[_0x32eb22(0xd2)][_0x32eb22(0xf0)](__dirname,'..','..','..',_0x32eb22(0xeb),_0x32eb22(0xf2)+_0x85b001[_0x32eb22(0xec)]),_0xee4c90=path_1['default']['join'](_0x17e3d4,_0x32eb22(0xc6));fs_1[_0x32eb22(0xd2)][_0x32eb22(0xc9)](_0xee4c90,JSON[_0x32eb22(0xe4)](_0x2f2f68,null,0x2),_0x5551c5=>{const _0x32bde9=_0x32eb22;if(_0x5551c5){logger_1[_0x32bde9(0xdd)][_0x32bde9(0xce)](_0x32bde9(0xd9)+_0x5551c5);throw _0x5551c5;}});}catch(_0x321416){Sentry['captureException'](_0x321416),logger_1['logger'][_0x32eb22(0xce)]('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0x321416);}const _0x268caf=path_1['default']['resolve'](__dirname,'..','..','..','public','company'+_0x85b001[_0x32eb22(0xec)]),_0x3edc13=path_1[_0x32eb22(0xd2)][_0x32eb22(0xf5)](_0x268caf,_0x32eb22(0xc7));fs_1[_0x32eb22(0xd2)][_0x32eb22(0xc9)](_0x3edc13,JSON[_0x32eb22(0xe4)](_0x2f2f68,null,0x2),_0x2f5aaf=>{const _0x290b46=_0x32eb22;if(_0x2f5aaf){logger_1[_0x290b46(0xdd)]['error'](_0x290b46(0xd9)+_0x2f5aaf);throw _0x2f5aaf;}});const _0x3bc556=(0x0,lodash_1[_0x32eb22(0xf1)])(_0x2f2f68)?JSON['parse'](_0x2f2f68):_0x2f2f68;if((0x0,lodash_1[_0x32eb22(0xf8)])(_0x3bc556))for(const {id:_0x2852b6,name:_0x540513,notify:_0x49f88a}of _0x3bc556){if(_0x2852b6===_0x32eb22(0xc4)||_0x2852b6[_0x32eb22(0xfa)]('g.us'))continue;const _0x271d3d=_0x2852b6[_0x32eb22(0xf7)](/\D/g,''),_0x360467=await Contact_1[_0x32eb22(0xd2)][_0x32eb22(0xde)]({'where':{'number':_0x271d3d,'companyId':_0x3523f4}});if(_0x360467)_0x360467[_0x32eb22(0xc3)]=_0x540513||_0x49f88a,await _0x360467['save']();else try{await(0x0,CreateContactService_1['default'])({'number':_0x271d3d,'name':_0x540513||_0x49f88a,'companyId':_0x3523f4});}catch(_0x4f1713){Sentry[_0x32eb22(0xe5)](_0x4f1713),logger_1[_0x32eb22(0xdd)][_0x32eb22(0xcd)](_0x32eb22(0xed)+_0x4f1713);}}};exports[a545_0x260658(0xd2)]=ImportContactsService;