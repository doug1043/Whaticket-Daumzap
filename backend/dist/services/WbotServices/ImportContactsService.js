const a579_0x471f89=a579_0x4f32;function a579_0x27cb(){const _0x139d92=['getWbot','../BaileysServices/ShowBaileysService','apply','error','logger','isArray','warn','toString','../../models/Whatsapp','Could\x20not\x20save\x20contact.\x20Err:\x20','forEach','12YyyYBY','contacts','5037928zfVtlv','name','24XmxmLM','search','1796995xXXijh','../../errors/AppError','65YkiEBv','CONNECTED','4450497qpsVpr','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20database.','whatsapp','ERR_NO_WAPP_FOUND','(((.+)+)+)+$','../../models/Contact','2313366XPSYRs','Contacts\x20imported\x20successfully\x20from\x20WhatsApp\x20for\x20company\x20ID:\x20','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20database.\x20Err:\x20','replace','__esModule','7039100APkEcn','findOne','default','status@broadcast','2244087vRWhjK','\x20-\x20','includes','../../utils/logger','__importDefault','6lzcQYU','constructor','23194HNIlGK','12XvaOQO'];a579_0x27cb=function(){return _0x139d92;};return a579_0x27cb();}function a579_0x4f32(_0x370166,_0x4269f5){const _0x3df218=a579_0x27cb();return a579_0x4f32=function(_0x18ead5,_0x2596b2){_0x18ead5=_0x18ead5-0x71;let _0x27cb54=_0x3df218[_0x18ead5];return _0x27cb54;},a579_0x4f32(_0x370166,_0x4269f5);}(function(_0x2af5d3,_0x40442b){const _0x376250=a579_0x4f32,_0x10d6df=_0x2af5d3();while(!![]){try{const _0x542fec=-parseInt(_0x376250(0x8a))/0x1*(-parseInt(_0x376250(0x75))/0x2)+-parseInt(_0x376250(0x8c))/0x3+parseInt(_0x376250(0x76))/0x4*(parseInt(_0x376250(0x88))/0x5)+parseInt(_0x376250(0x73))/0x6*(parseInt(_0x376250(0x84))/0x7)+-parseInt(_0x376250(0x86))/0x8*(-parseInt(_0x376250(0x9b))/0x9)+-parseInt(_0x376250(0x97))/0xa+-parseInt(_0x376250(0x92))/0xb*(parseInt(_0x376250(0x82))/0xc);if(_0x542fec===_0x40442b)break;else _0x10d6df['push'](_0x10d6df['shift']());}catch(_0x32cbc3){_0x10d6df['push'](_0x10d6df['shift']());}}}(a579_0x27cb,0xdc384));const a579_0x2596b2=(function(){let _0x47a8a6=!![];return function(_0x440bc1,_0x53f22b){const _0x2f0b34=_0x47a8a6?function(){const _0x84843e=a579_0x4f32;if(_0x53f22b){const _0x476ba5=_0x53f22b[_0x84843e(0x79)](_0x440bc1,arguments);return _0x53f22b=null,_0x476ba5;}}:function(){};return _0x47a8a6=![],_0x2f0b34;};}()),a579_0x18ead5=a579_0x2596b2(this,function(){const _0xd44c04=a579_0x4f32;return a579_0x18ead5[_0xd44c04(0x7e)]()['search'](_0xd44c04(0x90))[_0xd44c04(0x7e)]()[_0xd44c04(0x74)](a579_0x18ead5)[_0xd44c04(0x87)](_0xd44c04(0x90));});a579_0x18ead5();'use strict';var __importDefault=this&&this[a579_0x471f89(0x72)]||function(_0x475536){const _0x2cdd6c=a579_0x471f89;return _0x475536&&_0x475536[_0x2cdd6c(0x96)]?_0x475536:{'default':_0x475536};};Object['defineProperty'](exports,a579_0x471f89(0x96),{'value':!![]});const wbot_1=require('../../libs/wbot'),Contact_1=__importDefault(require(a579_0x471f89(0x91))),logger_1=require(a579_0x471f89(0x71)),ShowBaileysService_1=__importDefault(require(a579_0x471f89(0x78))),CreateContactService_1=__importDefault(require('../ContactServices/CreateContactService')),AppError_1=__importDefault(require(a579_0x471f89(0x89))),Whatsapp_1=__importDefault(require(a579_0x471f89(0x7f))),ImportContactsService=async(_0xf4fac,_0x3a37d2)=>{const _0x1945d5=a579_0x471f89,_0x31a792=await Whatsapp_1[_0x1945d5(0x99)]['findOne']({'where':{'id':_0x3a37d2,'companyId':_0xf4fac,'channel':_0x1945d5(0x8e),'status':_0x1945d5(0x8b)}});if(!_0x31a792)throw new AppError_1[(_0x1945d5(0x99))](_0x1945d5(0x8f),0x194);const _0x19c46e=(0x0,wbot_1[_0x1945d5(0x77)])(_0x31a792['id']),_0x40bac2=await(0x0,ShowBaileysService_1[_0x1945d5(0x99)])(_0x19c46e['id']);let _0x2ffd93=null;try{_0x2ffd93=_0x40bac2[_0x1945d5(0x83)]&&JSON['parse'](_0x40bac2[_0x1945d5(0x83)]);}catch(_0x4bb2ca){logger_1[_0x1945d5(0x7b)][_0x1945d5(0x7d)]({'baileys':_0x40bac2},_0x1945d5(0x94)+_0x4bb2ca);throw new AppError_1[(_0x1945d5(0x99))](_0x1945d5(0x8d),0x1f4);}if(Array[_0x1945d5(0x7c)](_0x2ffd93)){const _0x55e3cd=async _0x5aedef=>{const _0x2fb309=_0x1945d5;_0x5aedef[_0x2fb309(0x81)](async({id:_0x507cf2,name:_0x22cc8a,notify:_0x1dbb33})=>{const _0xe83038=_0x2fb309;if(_0x507cf2===_0xe83038(0x9a)||_0x507cf2[_0xe83038(0x9d)]('g.us'))return;const _0x5386bc=_0x507cf2[_0xe83038(0x95)](/\D/g,''),_0x1e4c58=await Contact_1['default'][_0xe83038(0x98)]({'where':{'number':_0x5386bc,'companyId':_0xf4fac}});if(_0x1e4c58)_0x1e4c58[_0xe83038(0x85)]=_0x22cc8a||_0x1dbb33||_0x5386bc,await _0x1e4c58['save']();else try{await(0x0,CreateContactService_1['default'])({'number':_0x5386bc,'name':_0x22cc8a||_0x1dbb33||_0x5386bc,'companyId':_0xf4fac});}catch(_0x54b6f8){logger_1[_0xe83038(0x7b)][_0xe83038(0x7a)]({'name':_0x22cc8a,'number':_0x5386bc,'companyId':_0xf4fac},_0xe83038(0x80)+_0x54b6f8);}});};_0x55e3cd(_0x2ffd93)['then'](()=>{const _0x4d05da=_0x1945d5;logger_1[_0x4d05da(0x7b)]['debug'](_0x4d05da(0x93)+_0xf4fac);},_0x1dc041=>{const _0x184548=_0x1945d5;logger_1[_0x184548(0x7b)][_0x184548(0x7a)]('Error\x20importing\x20contacts\x20from\x20WhatsApp\x20for\x20company\x20ID:\x20'+_0xf4fac+_0x184548(0x9c)+_0x1dc041['message']);});}};exports[a579_0x471f89(0x99)]=ImportContactsService;