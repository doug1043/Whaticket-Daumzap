const a575_0x169338=a575_0x281a;(function(_0x406d8a,_0x5d7919){const _0x204965=a575_0x281a,_0x4f011f=_0x406d8a();while(!![]){try{const _0x297214=-parseInt(_0x204965(0x190))/0x1*(-parseInt(_0x204965(0x19f))/0x2)+-parseInt(_0x204965(0x1a1))/0x3*(parseInt(_0x204965(0x1a0))/0x4)+-parseInt(_0x204965(0x194))/0x5*(-parseInt(_0x204965(0x196))/0x6)+parseInt(_0x204965(0x1b3))/0x7+-parseInt(_0x204965(0x1ac))/0x8+-parseInt(_0x204965(0x1b8))/0x9+parseInt(_0x204965(0x1aa))/0xa;if(_0x297214===_0x5d7919)break;else _0x4f011f['push'](_0x4f011f['shift']());}catch(_0x482d9f){_0x4f011f['push'](_0x4f011f['shift']());}}}(a575_0x37cd,0xc5d48));const a575_0x286b8a=(function(){let _0x346e88=!![];return function(_0x273b73,_0x4de734){const _0x3e3453=_0x346e88?function(){const _0x24b939=a575_0x281a;if(_0x4de734){const _0x1d42cc=_0x4de734[_0x24b939(0x192)](_0x273b73,arguments);return _0x4de734=null,_0x1d42cc;}}:function(){};return _0x346e88=![],_0x3e3453;};}()),a575_0x5ed6e3=a575_0x286b8a(this,function(){const _0x4ddea9=a575_0x281a;return a575_0x5ed6e3['toString']()[_0x4ddea9(0x1b0)](_0x4ddea9(0x1ab))[_0x4ddea9(0x1a8)]()[_0x4ddea9(0x1ae)](a575_0x5ed6e3)[_0x4ddea9(0x1b0)](_0x4ddea9(0x1ab));});a575_0x5ed6e3();'use strict';var __importDefault=this&&this[a575_0x169338(0x19c)]||function(_0x569f4d){const _0xd39773=a575_0x169338;return _0x569f4d&&_0x569f4d[_0xd39773(0x191)]?_0x569f4d:{'default':_0x569f4d};};Object[a575_0x169338(0x1b2)](exports,a575_0x169338(0x191),{'value':!![]});function a575_0x281a(_0x585443,_0x29746e){const _0x26df8f=a575_0x37cd();return a575_0x281a=function(_0x5ed6e3,_0x286b8a){_0x5ed6e3=_0x5ed6e3-0x18e;let _0x37cdb4=_0x26df8f[_0x5ed6e3];return _0x37cdb4;},a575_0x281a(_0x585443,_0x29746e);}function a575_0x37cd(){const _0x3167b0=['(((.+)+)+)+$','2503312KWHWZv','../../libs/wbot','constructor','../../models/Whatsapp','search','../../errors/AppError','defineProperty','1991731sibtlQ','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20database.','parse','../BaileysServices/ShowBaileysService','name','14377896LAwIWo','Contacts\x20imported\x20successfully\x20from\x20WhatsApp\x20for\x20company\x20ID:\x20','g.us','../ContactServices/CreateContactService','logger','Could\x20not\x20save\x20contact.\x20Err:\x20','1tJJpwR','__esModule','apply','../../utils/logger','245naWNeB','ERR_NO_WAPP_FOUND','139758iqUQjq','\x20-\x20','../../models/Contact','findOne','error','default','__importDefault','debug','forEach','138978lyFIHj','2065212FYKWjQ','9RFGLEc','warn','replace','save','then','getWbot','status@broadcast','toString','contacts','27743000ZNlXjF'];a575_0x37cd=function(){return _0x3167b0;};return a575_0x37cd();}const wbot_1=require(a575_0x169338(0x1ad)),Contact_1=__importDefault(require(a575_0x169338(0x198))),logger_1=require(a575_0x169338(0x193)),ShowBaileysService_1=__importDefault(require(a575_0x169338(0x1b6))),CreateContactService_1=__importDefault(require(a575_0x169338(0x1bb))),AppError_1=__importDefault(require(a575_0x169338(0x1b1))),Whatsapp_1=__importDefault(require(a575_0x169338(0x1af))),ImportContactsService=async(_0x178591,_0x55f444)=>{const _0xf0e266=a575_0x169338,_0x3aeda8=await Whatsapp_1[_0xf0e266(0x19b)][_0xf0e266(0x199)]({'where':{'id':_0x55f444,'companyId':_0x178591,'channel':'whatsapp','status':'CONNECTED'}});if(!_0x3aeda8)throw new AppError_1[(_0xf0e266(0x19b))](_0xf0e266(0x195),0x194);const _0x1e52ab=(0x0,wbot_1[_0xf0e266(0x1a6)])(_0x3aeda8['id']),_0x114fc4=await(0x0,ShowBaileysService_1[_0xf0e266(0x19b)])(_0x1e52ab['id']);let _0x5c9a2f=null;try{_0x5c9a2f=_0x114fc4['contacts']&&JSON[_0xf0e266(0x1b5)](_0x114fc4[_0xf0e266(0x1a9)]);}catch(_0x3a404b){logger_1[_0xf0e266(0x18e)][_0xf0e266(0x1a2)]({'baileys':_0x114fc4},'Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20database.\x20Err:\x20'+_0x3a404b);throw new AppError_1[(_0xf0e266(0x19b))](_0xf0e266(0x1b4),0x1f4);}if(Array['isArray'](_0x5c9a2f)){const _0x372cf1=async _0x1b63d6=>{const _0x3e3cd9=_0xf0e266;_0x1b63d6[_0x3e3cd9(0x19e)](async({id:_0x19d097,name:_0x28f97d,notify:_0x5c00f0})=>{const _0x3a1d33=_0x3e3cd9;if(_0x19d097===_0x3a1d33(0x1a7)||_0x19d097['includes'](_0x3a1d33(0x1ba)))return;const _0x2a80f9=_0x19d097[_0x3a1d33(0x1a3)](/\D/g,''),_0x6c54=await Contact_1[_0x3a1d33(0x19b)][_0x3a1d33(0x199)]({'where':{'number':_0x2a80f9,'companyId':_0x178591}});if(_0x6c54)_0x6c54[_0x3a1d33(0x1b7)]=_0x28f97d||_0x5c00f0||_0x2a80f9,await _0x6c54[_0x3a1d33(0x1a4)]();else try{await(0x0,CreateContactService_1[_0x3a1d33(0x19b)])({'number':_0x2a80f9,'name':_0x28f97d||_0x5c00f0||_0x2a80f9,'companyId':_0x178591});}catch(_0x53d236){logger_1[_0x3a1d33(0x18e)][_0x3a1d33(0x19a)]({'name':_0x28f97d,'number':_0x2a80f9,'companyId':_0x178591},_0x3a1d33(0x18f)+_0x53d236);}});};_0x372cf1(_0x5c9a2f)[_0xf0e266(0x1a5)](()=>{const _0xf8a754=_0xf0e266;logger_1[_0xf8a754(0x18e)][_0xf8a754(0x19d)](_0xf8a754(0x1b9)+_0x178591);},_0x3692dd=>{const _0xec218d=_0xf0e266;logger_1['logger']['error']('Error\x20importing\x20contacts\x20from\x20WhatsApp\x20for\x20company\x20ID:\x20'+_0x178591+_0xec218d(0x197)+_0x3692dd['message']);});}};exports['default']=ImportContactsService;