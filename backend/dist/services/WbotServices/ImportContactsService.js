const a544_0x3ab985=a544_0x1faa;(function(_0x2f5992,_0x20b09b){const _0x5560c6=a544_0x1faa,_0x44e254=_0x2f5992();while(!![]){try{const _0x2dc733=parseInt(_0x5560c6(0x15c))/0x1+-parseInt(_0x5560c6(0x156))/0x2*(parseInt(_0x5560c6(0x164))/0x3)+-parseInt(_0x5560c6(0x142))/0x4*(-parseInt(_0x5560c6(0x147))/0x5)+-parseInt(_0x5560c6(0x151))/0x6+parseInt(_0x5560c6(0x154))/0x7*(-parseInt(_0x5560c6(0x13e))/0x8)+parseInt(_0x5560c6(0x135))/0x9+parseInt(_0x5560c6(0x143))/0xa;if(_0x2dc733===_0x20b09b)break;else _0x44e254['push'](_0x44e254['shift']());}catch(_0x3293eb){_0x44e254['push'](_0x44e254['shift']());}}}(a544_0x2ae5,0xb5cbe));const a544_0x5bc393=(function(){let _0x390656=!![];return function(_0x194b7c,_0x201257){const _0x38b11c=_0x390656?function(){if(_0x201257){const _0x1f5347=_0x201257['apply'](_0x194b7c,arguments);return _0x201257=null,_0x1f5347;}}:function(){};return _0x390656=![],_0x38b11c;};}()),a544_0xe53f9=a544_0x5bc393(this,function(){const _0x2a479c=a544_0x1faa;return a544_0xe53f9[_0x2a479c(0x157)]()[_0x2a479c(0x137)](_0x2a479c(0x152))[_0x2a479c(0x157)]()['constructor'](a544_0xe53f9)[_0x2a479c(0x137)](_0x2a479c(0x152));});a544_0xe53f9();'use strict';var __createBinding=this&&this[a544_0x3ab985(0x162)]||(Object[a544_0x3ab985(0x13b)]?function(_0x2c64c3,_0x6d5f7,_0x31ddc4,_0x2b614d){const _0xc9c08=a544_0x3ab985;if(_0x2b614d===undefined)_0x2b614d=_0x31ddc4;var _0xc0d11a=Object[_0xc9c08(0x136)](_0x6d5f7,_0x31ddc4);(!_0xc0d11a||('get'in _0xc0d11a?!_0x6d5f7[_0xc9c08(0x15e)]:_0xc0d11a['writable']||_0xc0d11a[_0xc9c08(0x14c)]))&&(_0xc0d11a={'enumerable':!![],'get':function(){return _0x6d5f7[_0x31ddc4];}}),Object['defineProperty'](_0x2c64c3,_0x2b614d,_0xc0d11a);}:function(_0x4d2154,_0x50a173,_0x2ddf7a,_0x1901d4){if(_0x1901d4===undefined)_0x1901d4=_0x2ddf7a;_0x4d2154[_0x1901d4]=_0x50a173[_0x2ddf7a];}),__setModuleDefault=this&&this[a544_0x3ab985(0x133)]||(Object['create']?function(_0x4ce1c0,_0x1d1f2f){const _0x2dbe9c=a544_0x3ab985;Object[_0x2dbe9c(0x163)](_0x4ce1c0,_0x2dbe9c(0x158),{'enumerable':!![],'value':_0x1d1f2f});}:function(_0x5a4f87,_0xfeb06c){const _0x32edcd=a544_0x3ab985;_0x5a4f87[_0x32edcd(0x158)]=_0xfeb06c;}),__importStar=this&&this[a544_0x3ab985(0x161)]||function(_0x3ae096){const _0x20f050=a544_0x3ab985;if(_0x3ae096&&_0x3ae096['__esModule'])return _0x3ae096;var _0x150fbe={};if(_0x3ae096!=null){for(var _0x1b5bb7 in _0x3ae096)if(_0x1b5bb7!==_0x20f050(0x158)&&Object['prototype'][_0x20f050(0x141)][_0x20f050(0x14b)](_0x3ae096,_0x1b5bb7))__createBinding(_0x150fbe,_0x3ae096,_0x1b5bb7);}return __setModuleDefault(_0x150fbe,_0x3ae096),_0x150fbe;},__importDefault=this&&this['__importDefault']||function(_0x211e58){return _0x211e58&&_0x211e58['__esModule']?_0x211e58:{'default':_0x211e58};};Object['defineProperty'](exports,a544_0x3ab985(0x15e),{'value':!![]});const Sentry=__importStar(require(a544_0x3ab985(0x13d))),GetDefaultWhatsApp_1=__importDefault(require(a544_0x3ab985(0x15b))),wbot_1=require(a544_0x3ab985(0x165)),Contact_1=__importDefault(require(a544_0x3ab985(0x14d))),logger_1=require('../../utils/logger'),ShowBaileysService_1=__importDefault(require(a544_0x3ab985(0x15d))),CreateContactService_1=__importDefault(require(a544_0x3ab985(0x145))),lodash_1=require(a544_0x3ab985(0x14a)),path_1=__importDefault(require('path')),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x3c7904=>{const _0x3d6ec7=a544_0x3ab985,_0x2a0e07=await(0x0,GetDefaultWhatsApp_1[_0x3d6ec7(0x158)])(_0x3c7904),_0x442b2a=(0x0,wbot_1['getWbot'])(_0x2a0e07['id']);let _0x4f754d;try{const _0xd2f509=await(0x0,ShowBaileysService_1[_0x3d6ec7(0x158)])(_0x442b2a['id']);_0x4f754d=JSON[_0x3d6ec7(0x139)](_0xd2f509[_0x3d6ec7(0x13f)]);const _0x3595b3=path_1['default'][_0x3d6ec7(0x153)](__dirname,'..','..','..',_0x3d6ec7(0x13c),_0x3d6ec7(0x15f)+_0x2a0e07[_0x3d6ec7(0x144)]),_0x43caba=path_1[_0x3d6ec7(0x158)]['join'](_0x3595b3,_0x3d6ec7(0x155));fs_1[_0x3d6ec7(0x158)][_0x3d6ec7(0x140)](_0x43caba,JSON[_0x3d6ec7(0x138)](_0x4f754d,null,0x2),_0x4e2883=>{const _0x6c996f=_0x3d6ec7;if(_0x4e2883){logger_1[_0x6c996f(0x13a)][_0x6c996f(0x166)](_0x6c996f(0x15a)+_0x4e2883);throw _0x4e2883;}});}catch(_0x540187){Sentry[_0x3d6ec7(0x14f)](_0x540187),logger_1[_0x3d6ec7(0x13a)][_0x3d6ec7(0x166)](_0x3d6ec7(0x160)+_0x540187);}const _0xd7106b=path_1[_0x3d6ec7(0x158)][_0x3d6ec7(0x153)](__dirname,'..','..','..',_0x3d6ec7(0x13c),_0x3d6ec7(0x15f)+_0x2a0e07[_0x3d6ec7(0x144)]),_0x23696d=path_1[_0x3d6ec7(0x158)][_0x3d6ec7(0x14e)](_0xd7106b,'contatos_depois.txt');fs_1['default']['writeFile'](_0x23696d,JSON['stringify'](_0x4f754d,null,0x2),_0x4db289=>{const _0x503ded=_0x3d6ec7;if(_0x4db289){logger_1['logger'][_0x503ded(0x166)]('Failed\x20to\x20write\x20contacts\x20to\x20file:\x20'+_0x4db289);throw _0x4db289;}});const _0x3dd710=(0x0,lodash_1[_0x3d6ec7(0x146)])(_0x4f754d)?JSON[_0x3d6ec7(0x139)](_0x4f754d):_0x4f754d;if((0x0,lodash_1[_0x3d6ec7(0x159)])(_0x3dd710))for(const {id:_0x4b9f6a,name:_0x121f33,notify:_0x2e731d}of _0x3dd710){if(_0x4b9f6a==='status@broadcast'||_0x4b9f6a[_0x3d6ec7(0x150)](_0x3d6ec7(0x149)))continue;const _0x2d13e9=_0x4b9f6a[_0x3d6ec7(0x134)](/\D/g,''),_0x278847=await Contact_1[_0x3d6ec7(0x158)]['findOne']({'where':{'number':_0x2d13e9,'companyId':_0x3c7904}});if(_0x278847)_0x278847['name']=_0x121f33||_0x2e731d,await _0x278847[_0x3d6ec7(0x148)]();else try{await(0x0,CreateContactService_1[_0x3d6ec7(0x158)])({'number':_0x2d13e9,'name':_0x121f33||_0x2e731d,'companyId':_0x3c7904});}catch(_0x3d9fd5){Sentry[_0x3d6ec7(0x14f)](_0x3d9fd5),logger_1[_0x3d6ec7(0x13a)]['warn']('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0x3d9fd5);}}};exports['default']=ImportContactsService;function a544_0x1faa(_0x583669,_0x578acf){const _0x271af3=a544_0x2ae5();return a544_0x1faa=function(_0xe53f9,_0x5bc393){_0xe53f9=_0xe53f9-0x133;let _0x2ae54f=_0x271af3[_0xe53f9];return _0x2ae54f;},a544_0x1faa(_0x583669,_0x578acf);}function a544_0x2ae5(){const _0x3e18a0=['../BaileysServices/ShowBaileysService','__esModule','company','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20','__importStar','__createBinding','defineProperty','3715734qXoRCl','../../libs/wbot','error','__setModuleDefault','replace','389817OBSuTO','getOwnPropertyDescriptor','search','stringify','parse','logger','create','public','@sentry/node','624uFfIwj','contacts','writeFile','hasOwnProperty','503852UXKNsa','19681960fXodLU','companyId','../ContactServices/CreateContactService','isString','5JwEWXw','save','g.us','lodash','call','configurable','../../models/Contact','join','captureException','includes','8904672feNAJO','(((.+)+)+)+$','resolve','189zyNCfH','contatos_antes.txt','2zgrjaS','toString','default','isArray','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','../../helpers/GetDefaultWhatsApp','1331962KIHhQd'];a544_0x2ae5=function(){return _0x3e18a0;};return a544_0x2ae5();}