const a547_0x5476b7=a547_0x148f;(function(_0x1a0a90,_0x419709){const _0x395c86=a547_0x148f,_0x51345c=_0x1a0a90();while(!![]){try{const _0x53aafb=-parseInt(_0x395c86(0xd0))/0x1*(parseInt(_0x395c86(0xbf))/0x2)+-parseInt(_0x395c86(0xc6))/0x3+parseInt(_0x395c86(0xc4))/0x4+parseInt(_0x395c86(0xb3))/0x5+-parseInt(_0x395c86(0xc3))/0x6*(parseInt(_0x395c86(0xba))/0x7)+parseInt(_0x395c86(0xcb))/0x8*(-parseInt(_0x395c86(0xe0))/0x9)+parseInt(_0x395c86(0xd9))/0xa;if(_0x53aafb===_0x419709)break;else _0x51345c['push'](_0x51345c['shift']());}catch(_0x32850d){_0x51345c['push'](_0x51345c['shift']());}}}(a547_0x1a51,0x5da24));const a547_0x50c913=(function(){let _0x15d660=!![];return function(_0x27d6b5,_0x28d40d){const _0x8db034=_0x15d660?function(){const _0x2b4f55=a547_0x148f;if(_0x28d40d){const _0x889f9f=_0x28d40d[_0x2b4f55(0xe1)](_0x27d6b5,arguments);return _0x28d40d=null,_0x889f9f;}}:function(){};return _0x15d660=![],_0x8db034;};}()),a547_0x362d42=a547_0x50c913(this,function(){const _0x4d3713=a547_0x148f;return a547_0x362d42['toString']()[_0x4d3713(0xcf)](_0x4d3713(0xbb))[_0x4d3713(0xd5)]()[_0x4d3713(0xd3)](a547_0x362d42)[_0x4d3713(0xcf)]('(((.+)+)+)+$');});a547_0x362d42();function a547_0x1a51(){const _0x1841f1=['Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','1999440fNUTYt','contatos_depois.txt','create','resolve','save','8zVKxho','@sentry/node','../../libs/wbot','getOwnPropertyDescriptor','search','437889nFMHro','public','error','constructor','stringify','toString','company','getWbot','configurable','12077070mzgmUu','replace','join','../../utils/logger','warn','../../models/Contact','../ContactServices/CreateContactService','6243597FXuHje','apply','__importStar','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20','logger','findOne','path','default','companyId','get','3571070zyIkTB','prototype','status@broadcast','parse','isArray','__esModule','writable','19852gEvUjm','(((.+)+)+)+$','captureException','writeFile','defineProperty','2iHTSUk','g.us','__importDefault','__setModuleDefault','600euPZvu','2173220RkzlDx'];a547_0x1a51=function(){return _0x1841f1;};return a547_0x1a51();}'use strict';function a547_0x148f(_0x4fed90,_0x35f229){const _0x5a202f=a547_0x1a51();return a547_0x148f=function(_0x362d42,_0x50c913){_0x362d42=_0x362d42-0xab;let _0x1a518c=_0x5a202f[_0x362d42];return _0x1a518c;},a547_0x148f(_0x4fed90,_0x35f229);}var __createBinding=this&&this['__createBinding']||(Object[a547_0x5476b7(0xc8)]?function(_0x22963c,_0x1416e2,_0x564440,_0xc1fca6){const _0x580f48=a547_0x5476b7;if(_0xc1fca6===undefined)_0xc1fca6=_0x564440;var _0x1a24ca=Object[_0x580f48(0xce)](_0x1416e2,_0x564440);(!_0x1a24ca||(_0x580f48(0xb2)in _0x1a24ca?!_0x1416e2[_0x580f48(0xb8)]:_0x1a24ca[_0x580f48(0xb9)]||_0x1a24ca[_0x580f48(0xd8)]))&&(_0x1a24ca={'enumerable':!![],'get':function(){return _0x1416e2[_0x564440];}}),Object[_0x580f48(0xbe)](_0x22963c,_0xc1fca6,_0x1a24ca);}:function(_0x82d7c9,_0x324c44,_0x30efb8,_0x22c956){if(_0x22c956===undefined)_0x22c956=_0x30efb8;_0x82d7c9[_0x22c956]=_0x324c44[_0x30efb8];}),__setModuleDefault=this&&this[a547_0x5476b7(0xc2)]||(Object[a547_0x5476b7(0xc8)]?function(_0x3d46f7,_0x3261eb){const _0x183b11=a547_0x5476b7;Object[_0x183b11(0xbe)](_0x3d46f7,'default',{'enumerable':!![],'value':_0x3261eb});}:function(_0x32c379,_0xb61ed7){const _0xb945f9=a547_0x5476b7;_0x32c379[_0xb945f9(0xb0)]=_0xb61ed7;}),__importStar=this&&this[a547_0x5476b7(0xab)]||function(_0x2c6bf2){const _0x184a6f=a547_0x5476b7;if(_0x2c6bf2&&_0x2c6bf2[_0x184a6f(0xb8)])return _0x2c6bf2;var _0x1293bb={};if(_0x2c6bf2!=null){for(var _0x380564 in _0x2c6bf2)if(_0x380564!=='default'&&Object[_0x184a6f(0xb4)]['hasOwnProperty']['call'](_0x2c6bf2,_0x380564))__createBinding(_0x1293bb,_0x2c6bf2,_0x380564);}return __setModuleDefault(_0x1293bb,_0x2c6bf2),_0x1293bb;},__importDefault=this&&this[a547_0x5476b7(0xc1)]||function(_0x57db0b){return _0x57db0b&&_0x57db0b['__esModule']?_0x57db0b:{'default':_0x57db0b};};Object[a547_0x5476b7(0xbe)](exports,a547_0x5476b7(0xb8),{'value':!![]});const Sentry=__importStar(require(a547_0x5476b7(0xcc))),GetDefaultWhatsApp_1=__importDefault(require('../../helpers/GetDefaultWhatsApp')),wbot_1=require(a547_0x5476b7(0xcd)),Contact_1=__importDefault(require(a547_0x5476b7(0xde))),logger_1=require(a547_0x5476b7(0xdc)),ShowBaileysService_1=__importDefault(require('../BaileysServices/ShowBaileysService')),CreateContactService_1=__importDefault(require(a547_0x5476b7(0xdf))),lodash_1=require('lodash'),path_1=__importDefault(require(a547_0x5476b7(0xaf))),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x3a69d2=>{const _0x3d0ab3=a547_0x5476b7,_0x3111c1=await(0x0,GetDefaultWhatsApp_1['default'])(_0x3a69d2),_0x184a51=(0x0,wbot_1[_0x3d0ab3(0xd7)])(_0x3111c1['id']);let _0x922843;try{const _0x591346=await(0x0,ShowBaileysService_1['default'])(_0x184a51['id']);_0x922843=JSON[_0x3d0ab3(0xb6)](_0x591346['contacts']);const _0x12a7c2=path_1[_0x3d0ab3(0xb0)][_0x3d0ab3(0xc9)](__dirname,'..','..','..','public','company'+_0x3111c1[_0x3d0ab3(0xb1)]),_0x244b3b=path_1[_0x3d0ab3(0xb0)][_0x3d0ab3(0xdb)](_0x12a7c2,'contatos_antes.txt');fs_1['default'][_0x3d0ab3(0xbd)](_0x244b3b,JSON[_0x3d0ab3(0xd4)](_0x922843,null,0x2),_0x3aab8b=>{const _0x258e0d=_0x3d0ab3;if(_0x3aab8b){logger_1[_0x258e0d(0xad)]['error'](_0x258e0d(0xc5)+_0x3aab8b);throw _0x3aab8b;}});}catch(_0xd0eeef){Sentry[_0x3d0ab3(0xbc)](_0xd0eeef),logger_1[_0x3d0ab3(0xad)][_0x3d0ab3(0xd2)](_0x3d0ab3(0xac)+_0xd0eeef);}const _0x22a2d4=path_1[_0x3d0ab3(0xb0)]['resolve'](__dirname,'..','..','..',_0x3d0ab3(0xd1),_0x3d0ab3(0xd6)+_0x3111c1[_0x3d0ab3(0xb1)]),_0x50ccd7=path_1['default'][_0x3d0ab3(0xdb)](_0x22a2d4,_0x3d0ab3(0xc7));fs_1[_0x3d0ab3(0xb0)][_0x3d0ab3(0xbd)](_0x50ccd7,JSON[_0x3d0ab3(0xd4)](_0x922843,null,0x2),_0x2e7daa=>{const _0x391606=_0x3d0ab3;if(_0x2e7daa){logger_1[_0x391606(0xad)][_0x391606(0xd2)]('Failed\x20to\x20write\x20contacts\x20to\x20file:\x20'+_0x2e7daa);throw _0x2e7daa;}});const _0x29b135=(0x0,lodash_1['isString'])(_0x922843)?JSON[_0x3d0ab3(0xb6)](_0x922843):_0x922843;if((0x0,lodash_1[_0x3d0ab3(0xb7)])(_0x29b135))for(const {id:_0x4fd28c,name:_0x2c0a7b,notify:_0x4c7d9e}of _0x29b135){if(_0x4fd28c===_0x3d0ab3(0xb5)||_0x4fd28c['includes'](_0x3d0ab3(0xc0)))continue;const _0x40a459=_0x4fd28c[_0x3d0ab3(0xda)](/\D/g,''),_0x44c26b=await Contact_1[_0x3d0ab3(0xb0)][_0x3d0ab3(0xae)]({'where':{'number':_0x40a459,'companyId':_0x3a69d2}});if(_0x44c26b)_0x44c26b['name']=_0x2c0a7b||_0x4c7d9e,await _0x44c26b[_0x3d0ab3(0xca)]();else try{await(0x0,CreateContactService_1['default'])({'number':_0x40a459,'name':_0x2c0a7b||_0x4c7d9e,'companyId':_0x3a69d2});}catch(_0x240f94){Sentry[_0x3d0ab3(0xbc)](_0x240f94),logger_1[_0x3d0ab3(0xad)][_0x3d0ab3(0xdd)](_0x3d0ab3(0xac)+_0x240f94);}}};exports[a547_0x5476b7(0xb0)]=ImportContactsService;