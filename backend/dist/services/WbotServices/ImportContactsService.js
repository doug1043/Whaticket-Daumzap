const a545_0x78a0bc=a545_0x36ef;function a545_0x36ef(_0xa5c4b1,_0x52830f){const _0x2d2f64=a545_0x1341();return a545_0x36ef=function(_0x4d992e,_0x153519){_0x4d992e=_0x4d992e-0x82;let _0x13411a=_0x2d2f64[_0x4d992e];return _0x13411a;},a545_0x36ef(_0xa5c4b1,_0x52830f);}(function(_0x45ad7f,_0x22bac2){const _0x3aa683=a545_0x36ef,_0x1e2acd=_0x45ad7f();while(!![]){try{const _0x3d880a=-parseInt(_0x3aa683(0x9b))/0x1*(parseInt(_0x3aa683(0xae))/0x2)+parseInt(_0x3aa683(0xb5))/0x3+-parseInt(_0x3aa683(0xb7))/0x4+-parseInt(_0x3aa683(0xaa))/0x5+-parseInt(_0x3aa683(0x87))/0x6*(parseInt(_0x3aa683(0xa2))/0x7)+parseInt(_0x3aa683(0x9c))/0x8+-parseInt(_0x3aa683(0x88))/0x9*(-parseInt(_0x3aa683(0x9f))/0xa);if(_0x3d880a===_0x22bac2)break;else _0x1e2acd['push'](_0x1e2acd['shift']());}catch(_0x25f9b1){_0x1e2acd['push'](_0x1e2acd['shift']());}}}(a545_0x1341,0xc41fc));const a545_0x153519=(function(){let _0x3af872=!![];return function(_0x1e2ee6,_0x42e431){const _0x10dbb5=_0x3af872?function(){const _0x3c066c=a545_0x36ef;if(_0x42e431){const _0x1fcd3a=_0x42e431[_0x3c066c(0x94)](_0x1e2ee6,arguments);return _0x42e431=null,_0x1fcd3a;}}:function(){};return _0x3af872=![],_0x10dbb5;};}()),a545_0x4d992e=a545_0x153519(this,function(){const _0x34a2af=a545_0x36ef;return a545_0x4d992e['toString']()['search']('(((.+)+)+)+$')[_0x34a2af(0x84)]()[_0x34a2af(0xa3)](a545_0x4d992e)[_0x34a2af(0x97)](_0x34a2af(0x8f));});function a545_0x1341(){const _0x49418f=['constructor','status@broadcast','../../libs/wbot','captureException','prototype','__setModuleDefault','error','4868935UnqnJv','logger','hasOwnProperty','stringify','2IGZHWP','findOne','join','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20','parse','contatos_depois.txt','isString','2210970UElAYf','contatos_antes.txt','5016780PbaBAY','getOwnPropertyDescriptor','path','g.us','../../models/Contact','toString','isArray','warn','1225776PCYRUs','261dJeDjh','includes','../ContactServices/CreateContactService','get','resolve','__importStar','replace','(((.+)+)+)+$','call','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','../../utils/logger','companyId','apply','__createBinding','writeFile','search','name','__importDefault','default','254598KNANaa','10699760mfMLwL','../../helpers/GetDefaultWhatsApp','defineProperty','629080zPCqNu','create','__esModule','21riGyPU'];a545_0x1341=function(){return _0x49418f;};return a545_0x1341();}a545_0x4d992e();'use strict';var __createBinding=this&&this[a545_0x78a0bc(0x95)]||(Object[a545_0x78a0bc(0xa0)]?function(_0x4fefbd,_0x2f7225,_0x7cc5d8,_0x3dc435){const _0x1bd436=a545_0x78a0bc;if(_0x3dc435===undefined)_0x3dc435=_0x7cc5d8;var _0x3f8461=Object[_0x1bd436(0xb8)](_0x2f7225,_0x7cc5d8);(!_0x3f8461||(_0x1bd436(0x8b)in _0x3f8461?!_0x2f7225[_0x1bd436(0xa1)]:_0x3f8461['writable']||_0x3f8461['configurable']))&&(_0x3f8461={'enumerable':!![],'get':function(){return _0x2f7225[_0x7cc5d8];}}),Object['defineProperty'](_0x4fefbd,_0x3dc435,_0x3f8461);}:function(_0x399460,_0x1f037f,_0x1d45fb,_0x418c84){if(_0x418c84===undefined)_0x418c84=_0x1d45fb;_0x399460[_0x418c84]=_0x1f037f[_0x1d45fb];}),__setModuleDefault=this&&this[a545_0x78a0bc(0xa8)]||(Object['create']?function(_0x2cbbb0,_0x48af57){const _0x26b3c8=a545_0x78a0bc;Object[_0x26b3c8(0x9e)](_0x2cbbb0,_0x26b3c8(0x9a),{'enumerable':!![],'value':_0x48af57});}:function(_0x55cc33,_0x286121){const _0x246739=a545_0x78a0bc;_0x55cc33[_0x246739(0x9a)]=_0x286121;}),__importStar=this&&this[a545_0x78a0bc(0x8d)]||function(_0x35f3b6){const _0x2b554a=a545_0x78a0bc;if(_0x35f3b6&&_0x35f3b6['__esModule'])return _0x35f3b6;var _0x4191a8={};if(_0x35f3b6!=null){for(var _0x3b048c in _0x35f3b6)if(_0x3b048c!==_0x2b554a(0x9a)&&Object[_0x2b554a(0xa7)][_0x2b554a(0xac)][_0x2b554a(0x90)](_0x35f3b6,_0x3b048c))__createBinding(_0x4191a8,_0x35f3b6,_0x3b048c);}return __setModuleDefault(_0x4191a8,_0x35f3b6),_0x4191a8;},__importDefault=this&&this[a545_0x78a0bc(0x99)]||function(_0x328e60){const _0x674658=a545_0x78a0bc;return _0x328e60&&_0x328e60[_0x674658(0xa1)]?_0x328e60:{'default':_0x328e60};};Object[a545_0x78a0bc(0x9e)](exports,a545_0x78a0bc(0xa1),{'value':!![]});const Sentry=__importStar(require('@sentry/node')),GetDefaultWhatsApp_1=__importDefault(require(a545_0x78a0bc(0x9d))),wbot_1=require(a545_0x78a0bc(0xa5)),Contact_1=__importDefault(require(a545_0x78a0bc(0x83))),logger_1=require(a545_0x78a0bc(0x92)),ShowBaileysService_1=__importDefault(require('../BaileysServices/ShowBaileysService')),CreateContactService_1=__importDefault(require(a545_0x78a0bc(0x8a))),lodash_1=require('lodash'),path_1=__importDefault(require(a545_0x78a0bc(0xb9))),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x174260=>{const _0x27bbb4=a545_0x78a0bc,_0x55af5b=await(0x0,GetDefaultWhatsApp_1[_0x27bbb4(0x9a)])(_0x174260),_0x57d8b7=(0x0,wbot_1['getWbot'])(_0x55af5b['id']);let _0xa40cdf;try{const _0x5bba43=await(0x0,ShowBaileysService_1[_0x27bbb4(0x9a)])(_0x57d8b7['id']);_0xa40cdf=JSON[_0x27bbb4(0xb2)](_0x5bba43['contacts']);const _0x5864be=path_1[_0x27bbb4(0x9a)]['resolve'](__dirname,'..','..','..','public','company'+_0x55af5b['companyId']),_0x49b0c0=path_1[_0x27bbb4(0x9a)][_0x27bbb4(0xb0)](_0x5864be,_0x27bbb4(0xb6));fs_1['default'][_0x27bbb4(0x96)](_0x49b0c0,JSON[_0x27bbb4(0xad)](_0xa40cdf,null,0x2),_0x19ec57=>{const _0x5e7856=_0x27bbb4;if(_0x19ec57){logger_1['logger'][_0x5e7856(0xa9)](_0x5e7856(0x91)+_0x19ec57);throw _0x19ec57;}});}catch(_0x982615){Sentry[_0x27bbb4(0xa6)](_0x982615),logger_1[_0x27bbb4(0xab)][_0x27bbb4(0xa9)](_0x27bbb4(0xb1)+_0x982615);}const _0xde1dc5=path_1[_0x27bbb4(0x9a)][_0x27bbb4(0x8c)](__dirname,'..','..','..','public','company'+_0x55af5b[_0x27bbb4(0x93)]),_0x31f31e=path_1[_0x27bbb4(0x9a)][_0x27bbb4(0xb0)](_0xde1dc5,_0x27bbb4(0xb3));fs_1['default'][_0x27bbb4(0x96)](_0x31f31e,JSON[_0x27bbb4(0xad)](_0xa40cdf,null,0x2),_0x1beac4=>{const _0x288b4b=_0x27bbb4;if(_0x1beac4){logger_1[_0x288b4b(0xab)]['error'](_0x288b4b(0x91)+_0x1beac4);throw _0x1beac4;}});const _0xeb8de8=(0x0,lodash_1[_0x27bbb4(0xb4)])(_0xa40cdf)?JSON[_0x27bbb4(0xb2)](_0xa40cdf):_0xa40cdf;if((0x0,lodash_1[_0x27bbb4(0x85)])(_0xeb8de8))for(const {id:_0xf31a8f,name:_0x3d1f37,notify:_0x58b0e7}of _0xeb8de8){if(_0xf31a8f===_0x27bbb4(0xa4)||_0xf31a8f[_0x27bbb4(0x89)](_0x27bbb4(0x82)))continue;const _0x4ca153=_0xf31a8f[_0x27bbb4(0x8e)](/\D/g,''),_0x4a40b8=await Contact_1[_0x27bbb4(0x9a)][_0x27bbb4(0xaf)]({'where':{'number':_0x4ca153,'companyId':_0x174260}});if(_0x4a40b8)_0x4a40b8[_0x27bbb4(0x98)]=_0x3d1f37||_0x58b0e7,await _0x4a40b8['save']();else try{await(0x0,CreateContactService_1[_0x27bbb4(0x9a)])({'number':_0x4ca153,'name':_0x3d1f37||_0x58b0e7,'companyId':_0x174260});}catch(_0x264a67){Sentry[_0x27bbb4(0xa6)](_0x264a67),logger_1[_0x27bbb4(0xab)][_0x27bbb4(0x86)]('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0x264a67);}}};exports[a545_0x78a0bc(0x9a)]=ImportContactsService;