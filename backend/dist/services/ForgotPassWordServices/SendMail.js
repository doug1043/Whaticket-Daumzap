const a457_0x36884f=a457_0x4528;function a457_0x1628(){const _0x446189=['4570CHFgQJ','17612400MDiNLN','Erro\x20ao\x20enviar\x20e-mail:','findOne','__esModule','682812wFHFTM','4055471KjjFqk','Redefinição\x20de\x20Senha','smtpauth','4SKVSoy','1WWZkvs','1375EeSGXe','Olá,\x0a\x0aVocê\x20solicitou\x20a\x20redefinição\x20de\x20senha\x20para\x20sua\x20conta,\x20utilize\x20o\x20seguinte\x20Código\x20de\x20Verificação\x20para\x20concluir\x20o\x20processo\x20de\x20redefinição\x20de\x20senha:\x0a\x0aCódigo\x20de\x20Verificação:\x20','QueryTypes','query','\x0a\x0aPor\x20favor,\x20copie\x20e\x20cole\x20o\x20Código\x20de\x20Verificação\x20no\x20campo\x20\x27Código\x20de\x20Verificação\x27.\x0a\x0aSe\x20você\x20não\x20solicitou\x20esta\x20redefinição\x20de\x20senha,\x20por\x20favor,\x20ignore\x20este\x20e-mail.\x0a\x0a\x0aAtenciosamente','SELECT','../../models/Setting','search','all','(((.+)+)+)+$','createTransport','usersmtpauth','1060MghylP','8oszQml','221828KvDCbX','Configurações\x20SMTP\x20estão\x20incompletas','__importDefault','companyId','SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x27','error','toString','Dados\x20do\x20usuário\x20não\x20encontrados','smtpport','clientsecretsmtpauth','../../database','value','UPDATE\x20\x22Users\x22\x20SET\x20\x22resetPassword\x22=\x20\x27','defineProperty','4930344TegBFy','E-mail\x20enviado\x20com\x20sucesso','1986saQioM','constructor','Email\x20não\x20encontrado','default'];a457_0x1628=function(){return _0x446189;};return a457_0x1628();}(function(_0x3375eb,_0x3c6cac){const _0x260bfb=a457_0x4528,_0x4d3b33=_0x3375eb();while(!![]){try{const _0x5d0fde=-parseInt(_0x260bfb(0x1f1))/0x1*(parseInt(_0x260bfb(0x200))/0x2)+parseInt(_0x260bfb(0x1ec))/0x3*(parseInt(_0x260bfb(0x1f0))/0x4)+-parseInt(_0x260bfb(0x1fe))/0x5*(-parseInt(_0x260bfb(0x1e3))/0x6)+parseInt(_0x260bfb(0x1ed))/0x7*(-parseInt(_0x260bfb(0x1ff))/0x8)+-parseInt(_0x260bfb(0x1e1))/0x9+-parseInt(_0x260bfb(0x1e7))/0xa*(parseInt(_0x260bfb(0x1f2))/0xb)+parseInt(_0x260bfb(0x1e8))/0xc;if(_0x5d0fde===_0x3c6cac)break;else _0x4d3b33['push'](_0x4d3b33['shift']());}catch(_0x963cb4){_0x4d3b33['push'](_0x4d3b33['shift']());}}}(a457_0x1628,0x72cfc));const a457_0x1f960f=(function(){let _0x40f243=!![];return function(_0x204e37,_0x54d5a6){const _0x4b0be6=_0x40f243?function(){if(_0x54d5a6){const _0x43a0fb=_0x54d5a6['apply'](_0x204e37,arguments);return _0x54d5a6=null,_0x43a0fb;}}:function(){};return _0x40f243=![],_0x4b0be6;};}()),a457_0x3ded72=a457_0x1f960f(this,function(){const _0x2f79a5=a457_0x4528;return a457_0x3ded72['toString']()[_0x2f79a5(0x1f9)](_0x2f79a5(0x1fb))[_0x2f79a5(0x206)]()[_0x2f79a5(0x1e4)](a457_0x3ded72)[_0x2f79a5(0x1f9)](_0x2f79a5(0x1fb));});a457_0x3ded72();'use strict';var __importDefault=this&&this[a457_0x36884f(0x202)]||function(_0x5367e0){const _0x178b80=a457_0x36884f;return _0x5367e0&&_0x5367e0[_0x178b80(0x1eb)]?_0x5367e0:{'default':_0x5367e0};};Object[a457_0x36884f(0x1e0)](exports,a457_0x36884f(0x1eb),{'value':!![]});const nodemailer_1=__importDefault(require('nodemailer')),sequelize_1=__importDefault(require('sequelize')),database_1=__importDefault(require(a457_0x36884f(0x1dd))),Setting_1=__importDefault(require(a457_0x36884f(0x1f8))),SendMail=async(_0x287cbd,_0x3ad91a)=>{const _0x412f1c=a457_0x36884f;try{const _0x42518e=0x1,{hasResult:_0x2e6c86,data:_0xe5fd68}=await filterEmail(_0x287cbd);if(!_0x2e6c86)return{'status':0x194,'message':_0x412f1c(0x1e5)};const _0x32b1ad=_0xe5fd68[0x0];if(!_0x32b1ad||_0x32b1ad[_0x412f1c(0x203)]===undefined)return{'status':0x194,'message':_0x412f1c(0x207)};const [_0x231541,_0x360808,_0x3972a8,_0x21c88c]=await Promise[_0x412f1c(0x1fa)]([Setting_1[_0x412f1c(0x1e6)][_0x412f1c(0x1ea)]({'where':{'companyId':_0x42518e,'key':_0x412f1c(0x1ef)}}),Setting_1[_0x412f1c(0x1e6)][_0x412f1c(0x1ea)]({'where':{'companyId':_0x42518e,'key':_0x412f1c(0x1fd)}}),Setting_1[_0x412f1c(0x1e6)][_0x412f1c(0x1ea)]({'where':{'companyId':_0x42518e,'key':_0x412f1c(0x209)}}),Setting_1[_0x412f1c(0x1e6)][_0x412f1c(0x1ea)]({'where':{'companyId':_0x42518e,'key':_0x412f1c(0x208)}})]),_0x15d7ab=_0x231541?.[_0x412f1c(0x1de)],_0x56eed0=_0x360808?.[_0x412f1c(0x1de)],_0x5c00bb=_0x3972a8?.[_0x412f1c(0x1de)],_0x3bb286=_0x56eed0,_0x919877=_0x21c88c?.[_0x412f1c(0x1de)];if(!_0x15d7ab||!_0x56eed0||!_0x5c00bb||!_0x919877)throw new Error(_0x412f1c(0x201));const _0x15527c=nodemailer_1[_0x412f1c(0x1e6)][_0x412f1c(0x1fc)]({'host':_0x15d7ab,'port':Number(_0x919877),'secure':![],'auth':{'user':_0x56eed0,'pass':_0x5c00bb}}),{hasResults:_0x412181}=await insertToken(_0x287cbd,_0x3ad91a);if(!_0x412181)return{'status':0x194,'message':'Não\x20foi\x20possível\x20inserir\x20o\x20token\x20de\x20redefinição'};const _0x22e7bf={'from':_0x3bb286,'to':_0x287cbd,'subject':_0x412f1c(0x1ee),'text':_0x412f1c(0x1f3)+_0x3ad91a+_0x412f1c(0x1f6)},_0x4584de=await _0x15527c['sendMail'](_0x22e7bf);return{'status':0xc8,'message':_0x412f1c(0x1e2),'info':_0x4584de};}catch(_0x654560){return console[_0x412f1c(0x205)](_0x412f1c(0x1e9),_0x654560),{'status':0x1f4,'message':'Erro\x20interno\x20do\x20servidor'};}},filterEmail=async _0xff6c8a=>{const _0x2a2c98=a457_0x36884f,_0x476079=_0x2a2c98(0x204)+_0xff6c8a+'\x27',_0x486fa5=await database_1[_0x2a2c98(0x1e6)][_0x2a2c98(0x1f5)](_0x476079,{'type':sequelize_1[_0x2a2c98(0x1e6)]['QueryTypes'][_0x2a2c98(0x1f7)]});return{'hasResult':_0x486fa5['length']>0x0,'data':_0x486fa5};},insertToken=async(_0x2b566e,_0x27ffd7)=>{const _0x15a6ae=a457_0x36884f,_0x4a1364=_0x15a6ae(0x1df)+_0x27ffd7+'\x27\x20WHERE\x20email\x20=\x27'+_0x2b566e+'\x27',_0x35977b=await database_1[_0x15a6ae(0x1e6)][_0x15a6ae(0x1f5)](_0x4a1364,{'type':sequelize_1[_0x15a6ae(0x1e6)][_0x15a6ae(0x1f4)]['UPDATE']});return{'hasResults':_0x35977b[0x1]>0x0,'datas':_0x35977b};};function a457_0x4528(_0x3c8e5a,_0x3b57af){const _0x5d7e36=a457_0x1628();return a457_0x4528=function(_0x3ded72,_0x1f960f){_0x3ded72=_0x3ded72-0x1dd;let _0x1628e2=_0x5d7e36[_0x3ded72];return _0x1628e2;},a457_0x4528(_0x3c8e5a,_0x3b57af);}exports[a457_0x36884f(0x1e6)]=SendMail;