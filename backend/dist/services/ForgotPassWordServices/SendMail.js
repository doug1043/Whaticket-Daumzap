const a568_0x49d226=a568_0x19ad;(function(_0x1eeba0,_0x317722){const _0xe8c026=a568_0x19ad,_0x6bac89=_0x1eeba0();while(!![]){try{const _0x220b34=-parseInt(_0xe8c026(0xe8))/0x1+-parseInt(_0xe8c026(0xdd))/0x2*(parseInt(_0xe8c026(0xbd))/0x3)+parseInt(_0xe8c026(0xd6))/0x4*(parseInt(_0xe8c026(0xd0))/0x5)+-parseInt(_0xe8c026(0xe4))/0x6+-parseInt(_0xe8c026(0xd4))/0x7*(parseInt(_0xe8c026(0xd9))/0x8)+parseInt(_0xe8c026(0xea))/0x9*(-parseInt(_0xe8c026(0xc8))/0xa)+parseInt(_0xe8c026(0xde))/0xb*(parseInt(_0xe8c026(0xe0))/0xc);if(_0x220b34===_0x317722)break;else _0x6bac89['push'](_0x6bac89['shift']());}catch(_0x8288be){_0x6bac89['push'](_0x6bac89['shift']());}}}(a568_0x30b7,0x63b3d));const a568_0xfa3430=(function(){let _0x3ac6df=!![];return function(_0x10e307,_0x1014a3){const _0x1b7a78=_0x3ac6df?function(){const _0x170bf7=a568_0x19ad;if(_0x1014a3){const _0xd5bf7e=_0x1014a3[_0x170bf7(0xdc)](_0x10e307,arguments);return _0x1014a3=null,_0xd5bf7e;}}:function(){};return _0x3ac6df=![],_0x1b7a78;};}()),a568_0x3f93ba=a568_0xfa3430(this,function(){const _0x18b60e=a568_0x19ad;return a568_0x3f93ba[_0x18b60e(0xc7)]()[_0x18b60e(0xe1)](_0x18b60e(0xbe))[_0x18b60e(0xc7)]()[_0x18b60e(0xcf)](a568_0x3f93ba)[_0x18b60e(0xe1)](_0x18b60e(0xbe));});a568_0x3f93ba();'use strict';var __importDefault=this&&this[a568_0x49d226(0xe5)]||function(_0xa22294){const _0x204f77=a568_0x49d226;return _0xa22294&&_0xa22294[_0x204f77(0xdb)]?_0xa22294:{'default':_0xa22294};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const nodemailer_1=__importDefault(require(a568_0x49d226(0xe6))),sequelize_1=__importDefault(require(a568_0x49d226(0xc3))),database_1=__importDefault(require(a568_0x49d226(0xda))),Setting_1=__importDefault(require(a568_0x49d226(0xcb))),SendMail=async(_0x170f47,_0x3e763b)=>{const _0xfe9a4b=a568_0x49d226;try{const _0x209c0c=0x1,{hasResult:_0x56e29d,data:_0x8f7026}=await filterEmail(_0x170f47);if(!_0x56e29d)return{'status':0x194,'message':_0xfe9a4b(0xc6)};const _0x106b49=_0x8f7026[0x0];if(!_0x106b49||_0x106b49['companyId']===undefined)return{'status':0x194,'message':_0xfe9a4b(0xd1)};const [_0x4870e0,_0x1c7844,_0x143e90,_0x13cc60]=await Promise['all']([Setting_1['default'][_0xfe9a4b(0xc9)]({'where':{'companyId':_0x209c0c,'key':_0xfe9a4b(0xe9)}}),Setting_1[_0xfe9a4b(0xc2)][_0xfe9a4b(0xc9)]({'where':{'companyId':_0x209c0c,'key':_0xfe9a4b(0xca)}}),Setting_1['default'][_0xfe9a4b(0xc9)]({'where':{'companyId':_0x209c0c,'key':'clientsecretsmtpauth'}}),Setting_1['default'][_0xfe9a4b(0xc9)]({'where':{'companyId':_0x209c0c,'key':_0xfe9a4b(0xd3)}})]),_0x1926b3=_0x4870e0?.[_0xfe9a4b(0xc0)],_0x358c40=_0x1c7844?.[_0xfe9a4b(0xc0)],_0x2959cf=_0x143e90?.['value'],_0xc9a7fa=_0x358c40,_0x3fb846=_0x13cc60?.['value'];if(!_0x1926b3||!_0x358c40||!_0x2959cf||!_0x3fb846)throw new Error(_0xfe9a4b(0xe7));const _0x129d90=nodemailer_1[_0xfe9a4b(0xc2)][_0xfe9a4b(0xd2)]({'host':_0x1926b3,'port':Number(_0x3fb846),'secure':![],'auth':{'user':_0x358c40,'pass':_0x2959cf}}),{hasResults:_0x51e92d}=await insertToken(_0x170f47,_0x3e763b);if(!_0x51e92d)return{'status':0x194,'message':'Não\x20foi\x20possível\x20inserir\x20o\x20token\x20de\x20redefinição'};const _0xd6334d={'from':_0xc9a7fa,'to':_0x170f47,'subject':_0xfe9a4b(0xd5),'text':_0xfe9a4b(0xeb)+_0x3e763b+_0xfe9a4b(0xc1)},_0x5747d6=await _0x129d90[_0xfe9a4b(0xe2)](_0xd6334d);return{'status':0xc8,'message':_0xfe9a4b(0xce),'info':_0x5747d6};}catch(_0x2b6938){return console[_0xfe9a4b(0xdf)](_0xfe9a4b(0xd8),_0x2b6938),{'status':0x1f4,'message':'Erro\x20interno\x20do\x20servidor'};}},filterEmail=async _0x2caea1=>{const _0x372b62=a568_0x49d226,_0x4d9ad8=_0x372b62(0xcd)+_0x2caea1+'\x27',_0x2c10ae=await database_1['default'][_0x372b62(0xbf)](_0x4d9ad8,{'type':sequelize_1[_0x372b62(0xc2)][_0x372b62(0xc5)]['SELECT']});return{'hasResult':_0x2c10ae[_0x372b62(0xe3)]>0x0,'data':_0x2c10ae};},insertToken=async(_0x32181c,_0x41a58e)=>{const _0x278cac=a568_0x49d226,_0x10975a=_0x278cac(0xd7)+_0x41a58e+_0x278cac(0xcc)+_0x32181c+'\x27',_0x2e65b6=await database_1[_0x278cac(0xc2)]['query'](_0x10975a,{'type':sequelize_1[_0x278cac(0xc2)][_0x278cac(0xc5)][_0x278cac(0xc4)]});return{'hasResults':_0x2e65b6[0x1]>0x0,'datas':_0x2e65b6};};function a568_0x19ad(_0x29b2dd,_0x56c65a){const _0x319371=a568_0x30b7();return a568_0x19ad=function(_0x3f93ba,_0xfa3430){_0x3f93ba=_0x3f93ba-0xbd;let _0x30b76c=_0x319371[_0x3f93ba];return _0x30b76c;},a568_0x19ad(_0x29b2dd,_0x56c65a);}exports['default']=SendMail;function a568_0x30b7(){const _0x33e4a6=['query','value','\x0a\x0aPor\x20favor,\x20copie\x20e\x20cole\x20o\x20Código\x20de\x20Verificação\x20no\x20campo\x20\x27Código\x20de\x20Verificação\x27.\x0a\x0aSe\x20você\x20não\x20solicitou\x20esta\x20redefinição\x20de\x20senha,\x20por\x20favor,\x20ignore\x20este\x20e-mail.\x0a\x0a\x0aAtenciosamente','default','sequelize','UPDATE','QueryTypes','Email\x20não\x20encontrado','toString','180YVrpDZ','findOne','usersmtpauth','../../models/Setting','\x27\x20WHERE\x20email\x20=\x27','SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x27','E-mail\x20enviado\x20com\x20sucesso','constructor','8105ANwlcn','Dados\x20do\x20usuário\x20não\x20encontrados','createTransport','smtpport','528269ujQCWc','Redefinição\x20de\x20Senha','328GcISiU','UPDATE\x20\x22Users\x22\x20SET\x20\x22resetPassword\x22=\x20\x27','Erro\x20ao\x20enviar\x20e-mail:','72FHWeSe','../../database','__esModule','apply','2bWICxz','16421295rivQKT','error','24krlENx','search','sendMail','length','4611690BBZQQc','__importDefault','nodemailer','Configurações\x20SMTP\x20estão\x20incompletas','328134aDYqmZ','smtpauth','166176cSTZRT','Olá,\x0a\x0aVocê\x20solicitou\x20a\x20redefinição\x20de\x20senha\x20para\x20sua\x20conta,\x20utilize\x20o\x20seguinte\x20Código\x20de\x20Verificação\x20para\x20concluir\x20o\x20processo\x20de\x20redefinição\x20de\x20senha:\x0a\x0aCódigo\x20de\x20Verificação:\x20','1805781SUlqFo','(((.+)+)+)+$'];a568_0x30b7=function(){return _0x33e4a6;};return a568_0x30b7();}