function a566_0x2b32(_0x4b9023,_0x34c530){const _0x225f21=a566_0x368f();return a566_0x2b32=function(_0x451af7,_0x23a470){_0x451af7=_0x451af7-0xa3;let _0x368fc7=_0x225f21[_0x451af7];return _0x368fc7;},a566_0x2b32(_0x4b9023,_0x34c530);}const a566_0x488bd8=a566_0x2b32;(function(_0xde6222,_0x430652){const _0x185507=a566_0x2b32,_0x3bfb35=_0xde6222();while(!![]){try{const _0x2486b6=parseInt(_0x185507(0xb3))/0x1+parseInt(_0x185507(0xbf))/0x2+parseInt(_0x185507(0xc9))/0x3*(parseInt(_0x185507(0xb9))/0x4)+-parseInt(_0x185507(0xc4))/0x5+-parseInt(_0x185507(0xaa))/0x6*(parseInt(_0x185507(0xc8))/0x7)+-parseInt(_0x185507(0xb1))/0x8*(parseInt(_0x185507(0xab))/0x9)+parseInt(_0x185507(0xb4))/0xa;if(_0x2486b6===_0x430652)break;else _0x3bfb35['push'](_0x3bfb35['shift']());}catch(_0x3e939b){_0x3bfb35['push'](_0x3bfb35['shift']());}}}(a566_0x368f,0xbc5f8));const a566_0x23a470=(function(){let _0x53db89=!![];return function(_0x31e9a7,_0x12987a){const _0x5bfde4=_0x53db89?function(){const _0x5519c3=a566_0x2b32;if(_0x12987a){const _0x31b66c=_0x12987a[_0x5519c3(0xb0)](_0x31e9a7,arguments);return _0x12987a=null,_0x31b66c;}}:function(){};return _0x53db89=![],_0x5bfde4;};}()),a566_0x451af7=a566_0x23a470(this,function(){const _0x591149=a566_0x2b32;return a566_0x451af7[_0x591149(0xaf)]()[_0x591149(0xad)](_0x591149(0xbc))[_0x591149(0xaf)]()[_0x591149(0xb6)](a566_0x451af7)[_0x591149(0xad)](_0x591149(0xbc));});a566_0x451af7();'use strict';var __importDefault=this&&this[a566_0x488bd8(0xcb)]||function(_0x2209ea){return _0x2209ea&&_0x2209ea['__esModule']?_0x2209ea:{'default':_0x2209ea};};Object[a566_0x488bd8(0xc6)](exports,'__esModule',{'value':!![]});function a566_0x368f(){const _0x2b2429=['3220752yhqrIO','default','468828ZWmrQB','23289210SCeFZw','value','constructor','findOne','companyId','4oGiyBR','Não\x20foi\x20possível\x20inserir\x20o\x20token\x20de\x20redefinição','Erro\x20interno\x20do\x20servidor','(((.+)+)+)+$','Email\x20não\x20encontrado','Olá,\x0a\x0aVocê\x20solicitou\x20a\x20redefinição\x20de\x20senha\x20para\x20sua\x20conta,\x20utilize\x20o\x20seguinte\x20Código\x20de\x20Verificação\x20para\x20concluir\x20o\x20processo\x20de\x20redefinição\x20de\x20senha:\x0a\x0aCódigo\x20de\x20Verificação:\x20','2303820FHLmSk','createTransport','smtpport','Erro\x20ao\x20enviar\x20e-mail:','Configurações\x20SMTP\x20estão\x20incompletas','5095715nnZGbD','QueryTypes','defineProperty','SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x27','635222wIOpIm','957858oJKOWV','../../models/Setting','__importDefault','error','all','\x0a\x0aPor\x20favor,\x20copie\x20e\x20cole\x20o\x20Código\x20de\x20Verificação\x20no\x20campo\x20\x27Código\x20de\x20Verificação\x27.\x0a\x0aSe\x20você\x20não\x20solicitou\x20esta\x20redefinição\x20de\x20senha,\x20por\x20favor,\x20ignore\x20este\x20e-mail.\x0a\x0a\x0aAtenciosamente','sendMail','query','nodemailer','SELECT','\x27\x20WHERE\x20email\x20=\x27','usersmtpauth','length','84NCtURP','27QoOLJy','sequelize','search','E-mail\x20enviado\x20com\x20sucesso','toString','apply'];a566_0x368f=function(){return _0x2b2429;};return a566_0x368f();}const nodemailer_1=__importDefault(require(a566_0x488bd8(0xa5))),sequelize_1=__importDefault(require(a566_0x488bd8(0xac))),database_1=__importDefault(require('../../database')),Setting_1=__importDefault(require(a566_0x488bd8(0xca))),SendMail=async(_0x1323ee,_0x3217c3)=>{const _0x547a69=a566_0x488bd8;try{const _0x2cc79c=0x1,{hasResult:_0x3b1c59,data:_0x419c3a}=await filterEmail(_0x1323ee);if(!_0x3b1c59)return{'status':0x194,'message':_0x547a69(0xbd)};const _0x5e113f=_0x419c3a[0x0];if(!_0x5e113f||_0x5e113f[_0x547a69(0xb8)]===undefined)return{'status':0x194,'message':'Dados\x20do\x20usuário\x20não\x20encontrados'};const [_0x230116,_0x2d9f8f,_0x4adfe2,_0xb2a82d]=await Promise[_0x547a69(0xcd)]([Setting_1[_0x547a69(0xb2)][_0x547a69(0xb7)]({'where':{'companyId':_0x2cc79c,'key':'smtpauth'}}),Setting_1['default'][_0x547a69(0xb7)]({'where':{'companyId':_0x2cc79c,'key':_0x547a69(0xa8)}}),Setting_1[_0x547a69(0xb2)][_0x547a69(0xb7)]({'where':{'companyId':_0x2cc79c,'key':'clientsecretsmtpauth'}}),Setting_1[_0x547a69(0xb2)][_0x547a69(0xb7)]({'where':{'companyId':_0x2cc79c,'key':_0x547a69(0xc1)}})]),_0x45d423=_0x230116?.['value'],_0x4b0aa0=_0x2d9f8f?.[_0x547a69(0xb5)],_0x507f54=_0x4adfe2?.[_0x547a69(0xb5)],_0x30c98f=_0x4b0aa0,_0x59c72e=_0xb2a82d?.[_0x547a69(0xb5)];if(!_0x45d423||!_0x4b0aa0||!_0x507f54||!_0x59c72e)throw new Error(_0x547a69(0xc3));const _0x4fcaa7=nodemailer_1[_0x547a69(0xb2)][_0x547a69(0xc0)]({'host':_0x45d423,'port':Number(_0x59c72e),'secure':![],'auth':{'user':_0x4b0aa0,'pass':_0x507f54}}),{hasResults:_0x3c6c4a}=await insertToken(_0x1323ee,_0x3217c3);if(!_0x3c6c4a)return{'status':0x194,'message':_0x547a69(0xba)};const _0xbeaaf1={'from':_0x30c98f,'to':_0x1323ee,'subject':'Redefinição\x20de\x20Senha','text':_0x547a69(0xbe)+_0x3217c3+_0x547a69(0xce)},_0x20d1a6=await _0x4fcaa7[_0x547a69(0xa3)](_0xbeaaf1);return{'status':0xc8,'message':_0x547a69(0xae),'info':_0x20d1a6};}catch(_0x447c24){return console[_0x547a69(0xcc)](_0x547a69(0xc2),_0x447c24),{'status':0x1f4,'message':_0x547a69(0xbb)};}},filterEmail=async _0x195411=>{const _0x28fcd5=a566_0x488bd8,_0x23a4bf=_0x28fcd5(0xc7)+_0x195411+'\x27',_0x16edb5=await database_1['default'][_0x28fcd5(0xa4)](_0x23a4bf,{'type':sequelize_1['default'][_0x28fcd5(0xc5)][_0x28fcd5(0xa6)]});return{'hasResult':_0x16edb5[_0x28fcd5(0xa9)]>0x0,'data':_0x16edb5};},insertToken=async(_0x540c9d,_0x3bc193)=>{const _0x4bb33e=a566_0x488bd8,_0x2fa954='UPDATE\x20\x22Users\x22\x20SET\x20\x22resetPassword\x22=\x20\x27'+_0x3bc193+_0x4bb33e(0xa7)+_0x540c9d+'\x27',_0x3b6c84=await database_1[_0x4bb33e(0xb2)]['query'](_0x2fa954,{'type':sequelize_1[_0x4bb33e(0xb2)]['QueryTypes']['UPDATE']});return{'hasResults':_0x3b6c84[0x1]>0x0,'datas':_0x3b6c84};};exports[a566_0x488bd8(0xb2)]=SendMail;