const a432_0x2c04a5=a432_0x39b4;(function(_0x171867,_0x9ac29f){const _0x24f249=a432_0x39b4,_0x1d437f=_0x171867();while(!![]){try{const _0x28bf0d=-parseInt(_0x24f249(0x8a))/0x1+-parseInt(_0x24f249(0x7e))/0x2*(parseInt(_0x24f249(0x87))/0x3)+parseInt(_0x24f249(0x8c))/0x4+-parseInt(_0x24f249(0x90))/0x5+parseInt(_0x24f249(0x8e))/0x6*(-parseInt(_0x24f249(0x76))/0x7)+parseInt(_0x24f249(0x78))/0x8*(parseInt(_0x24f249(0x85))/0x9)+parseInt(_0x24f249(0x7f))/0xa*(parseInt(_0x24f249(0x73))/0xb);if(_0x28bf0d===_0x9ac29f)break;else _0x1d437f['push'](_0x1d437f['shift']());}catch(_0xf2d581){_0x1d437f['push'](_0x1d437f['shift']());}}}(a432_0x368c,0xe9c8d));function a432_0x39b4(_0x285803,_0x5f55f6){const _0x3131f6=a432_0x368c();return a432_0x39b4=function(_0x5225e4,_0x1191d4){_0x5225e4=_0x5225e4-0x72;let _0x368c78=_0x3131f6[_0x5225e4];return _0x368c78;},a432_0x39b4(_0x285803,_0x5f55f6);}const a432_0x1191d4=(function(){let _0x505398=!![];return function(_0x32fad4,_0x2475bd){const _0x7b479d=_0x505398?function(){if(_0x2475bd){const _0x38d187=_0x2475bd['apply'](_0x32fad4,arguments);return _0x2475bd=null,_0x38d187;}}:function(){};return _0x505398=![],_0x7b479d;};}()),a432_0x5225e4=a432_0x1191d4(this,function(){const _0x37ab51=a432_0x39b4;return a432_0x5225e4[_0x37ab51(0x82)]()[_0x37ab51(0x8d)](_0x37ab51(0x7a))[_0x37ab51(0x82)]()['constructor'](a432_0x5225e4)[_0x37ab51(0x8d)](_0x37ab51(0x7a));});function a432_0x368c(){const _0x2f7e0d=['Erro\x20interno\x20do\x20servidor','query','toString','QueryTypes','Redefinição\x20de\x20Senha','9WClhHl','sequelize','99AlyPYj','Olá,\x0a\x0aVocê\x20solicitou\x20a\x20redefinição\x20de\x20senha\x20para\x20sua\x20conta,\x20utilize\x20o\x20seguinte\x20Código\x20de\x20Verificação\x20para\x20concluir\x20o\x20processo\x20de\x20redefinição\x20de\x20senha:\x0a\x0aCódigo\x20de\x20Verificação:\x20','Dados\x20do\x20usuário\x20não\x20encontrados','211448JJkguJ','\x27\x20WHERE\x20email\x20=\x27','2584716HeSPYF','search','4773102ILwreV','value','7232645HhWbwb','default','usersmtpauth','SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x27','Não\x20foi\x20possível\x20inserir\x20o\x20token\x20de\x20redefinição','__esModule','Erro\x20ao\x20enviar\x20e-mail:','../../models/Setting','\x0a\x0aPor\x20favor,\x20copie\x20e\x20cole\x20o\x20Código\x20de\x20Verificação\x20no\x20campo\x20\x27Código\x20de\x20Verificação\x27.\x0a\x0aSe\x20você\x20não\x20solicitou\x20esta\x20redefinição\x20de\x20senha,\x20por\x20favor,\x20ignore\x20este\x20e-mail.\x0a\x0a\x0aAtenciosamente','error','SELECT','sendMail','all','__importDefault','5323945YEtBSv','Configurações\x20SMTP\x20estão\x20incompletas','createTransport','14RnHzte','nodemailer','13454688nuyXVE','Email\x20não\x20encontrado','(((.+)+)+)+$','findOne','smtpport','smtpauth','32812rdkZjQ','50DFjzSz'];a432_0x368c=function(){return _0x2f7e0d;};return a432_0x368c();}a432_0x5225e4();'use strict';var __importDefault=this&&this[a432_0x2c04a5(0x72)]||function(_0x43c3b1){const _0x1c39e7=a432_0x2c04a5;return _0x43c3b1&&_0x43c3b1[_0x1c39e7(0x95)]?_0x43c3b1:{'default':_0x43c3b1};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const nodemailer_1=__importDefault(require(a432_0x2c04a5(0x77))),sequelize_1=__importDefault(require(a432_0x2c04a5(0x86))),database_1=__importDefault(require('../../database')),Setting_1=__importDefault(require(a432_0x2c04a5(0x97))),SendMail=async(_0x40012f,_0x24a759)=>{const _0xf3da9e=a432_0x2c04a5;try{const _0x38b447=0x1,{hasResult:_0x3d89b4,data:_0x2bcddd}=await filterEmail(_0x40012f);if(!_0x3d89b4)return{'status':0x194,'message':_0xf3da9e(0x79)};const _0x15569a=_0x2bcddd[0x0];if(!_0x15569a||_0x15569a['companyId']===undefined)return{'status':0x194,'message':_0xf3da9e(0x89)};const [_0x4a1429,_0x4eaa82,_0x5d8e3a,_0x1c915d]=await Promise[_0xf3da9e(0x9c)]([Setting_1[_0xf3da9e(0x91)]['findOne']({'where':{'companyId':_0x38b447,'key':_0xf3da9e(0x7d)}}),Setting_1['default'][_0xf3da9e(0x7b)]({'where':{'companyId':_0x38b447,'key':_0xf3da9e(0x92)}}),Setting_1[_0xf3da9e(0x91)]['findOne']({'where':{'companyId':_0x38b447,'key':'clientsecretsmtpauth'}}),Setting_1[_0xf3da9e(0x91)]['findOne']({'where':{'companyId':_0x38b447,'key':_0xf3da9e(0x7c)}})]),_0x559b00=_0x4a1429?.['value'],_0x3b2ca2=_0x4eaa82?.['value'],_0x1ebe66=_0x5d8e3a?.[_0xf3da9e(0x8f)],_0x21cdbc=_0x3b2ca2,_0x54fb0c=_0x1c915d?.[_0xf3da9e(0x8f)];if(!_0x559b00||!_0x3b2ca2||!_0x1ebe66||!_0x54fb0c)throw new Error(_0xf3da9e(0x74));const _0x4cebb3=nodemailer_1[_0xf3da9e(0x91)][_0xf3da9e(0x75)]({'host':_0x559b00,'port':Number(_0x54fb0c),'secure':![],'auth':{'user':_0x3b2ca2,'pass':_0x1ebe66}}),{hasResults:_0xa4ab79}=await insertToken(_0x40012f,_0x24a759);if(!_0xa4ab79)return{'status':0x194,'message':_0xf3da9e(0x94)};const _0x122f9e={'from':_0x21cdbc,'to':_0x40012f,'subject':_0xf3da9e(0x84),'text':_0xf3da9e(0x88)+_0x24a759+_0xf3da9e(0x98)},_0xe9f615=await _0x4cebb3[_0xf3da9e(0x9b)](_0x122f9e);return{'status':0xc8,'message':'E-mail\x20enviado\x20com\x20sucesso','info':_0xe9f615};}catch(_0x27e4af){return console[_0xf3da9e(0x99)](_0xf3da9e(0x96),_0x27e4af),{'status':0x1f4,'message':_0xf3da9e(0x80)};}},filterEmail=async _0x47226f=>{const _0x35b985=a432_0x2c04a5,_0x2bad16=_0x35b985(0x93)+_0x47226f+'\x27',_0x1a1cb4=await database_1[_0x35b985(0x91)][_0x35b985(0x81)](_0x2bad16,{'type':sequelize_1['default'][_0x35b985(0x83)][_0x35b985(0x9a)]});return{'hasResult':_0x1a1cb4['length']>0x0,'data':_0x1a1cb4};},insertToken=async(_0x4666d4,_0x46ece5)=>{const _0x30cb1e=a432_0x2c04a5,_0x18568f='UPDATE\x20\x22Users\x22\x20SET\x20\x22resetPassword\x22=\x20\x27'+_0x46ece5+_0x30cb1e(0x8b)+_0x4666d4+'\x27',_0x144fba=await database_1['default'][_0x30cb1e(0x81)](_0x18568f,{'type':sequelize_1[_0x30cb1e(0x91)]['QueryTypes']['UPDATE']});return{'hasResults':_0x144fba[0x1]>0x0,'datas':_0x144fba};};exports['default']=SendMail;