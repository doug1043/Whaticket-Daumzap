const a429_0x530ec3=a429_0x5151;(function(_0x117693,_0x3159fa){const _0x377d8d=a429_0x5151,_0x5e3517=_0x117693();while(!![]){try{const _0x139e09=-parseInt(_0x377d8d(0x9f))/0x1+parseInt(_0x377d8d(0xab))/0x2+parseInt(_0x377d8d(0xbb))/0x3+parseInt(_0x377d8d(0xb8))/0x4+-parseInt(_0x377d8d(0x9d))/0x5+parseInt(_0x377d8d(0xa8))/0x6+parseInt(_0x377d8d(0xb2))/0x7*(-parseInt(_0x377d8d(0xb7))/0x8);if(_0x139e09===_0x3159fa)break;else _0x5e3517['push'](_0x5e3517['shift']());}catch(_0x1d36ac){_0x5e3517['push'](_0x5e3517['shift']());}}}(a429_0x1c1e,0x2379e));const a429_0x10f845=(function(){let _0x342bfd=!![];return function(_0x4f0b25,_0x18d755){const _0x59bc2b=_0x342bfd?function(){if(_0x18d755){const _0x4b8b62=_0x18d755['apply'](_0x4f0b25,arguments);return _0x18d755=null,_0x4b8b62;}}:function(){};return _0x342bfd=![],_0x59bc2b;};}()),a429_0x1d420f=a429_0x10f845(this,function(){const _0x21a315=a429_0x5151;return a429_0x1d420f[_0x21a315(0xa5)]()[_0x21a315(0x9b)](_0x21a315(0x99))[_0x21a315(0xa5)]()[_0x21a315(0xad)](a429_0x1d420f)[_0x21a315(0x9b)](_0x21a315(0x99));});a429_0x1d420f();'use strict';function a429_0x1c1e(){const _0x36fa33=['Erro\x20interno\x20do\x20servidor','196901XZxelb','Não\x20foi\x20possível\x20inserir\x20o\x20token\x20de\x20redefinição','defineProperty','UPDATE\x20\x22Users\x22\x20SET\x20\x22resetPassword\x22=\x20\x27','clientsecretsmtpauth','\x27\x20WHERE\x20email\x20=\x27','toString','__importDefault','default','1514220PiYqPQ','__esModule','smtpport','97856WzAzYs','query','constructor','error','../../database','Erro\x20ao\x20enviar\x20e-mail:','findOne','1031765EADbLi','../../models/Setting','smtpauth','Configurações\x20SMTP\x20estão\x20incompletas','value','16eMKmYh','1055144qJmbFZ','length','\x0a\x0aPor\x20favor,\x20copie\x20e\x20cole\x20o\x20Código\x20de\x20Verificação\x20no\x20campo\x20\x27Código\x20de\x20Verificação\x27.\x0a\x0aSe\x20você\x20não\x20solicitou\x20esta\x20redefinição\x20de\x20senha,\x20por\x20favor,\x20ignore\x20este\x20e-mail.\x0a\x0a\x0aAtenciosamente','864276RbMazR','all','SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x27','sequelize','usersmtpauth','QueryTypes','(((.+)+)+)+$','Email\x20não\x20encontrado','search','E-mail\x20enviado\x20com\x20sucesso','1080875NWjprf'];a429_0x1c1e=function(){return _0x36fa33;};return a429_0x1c1e();}var __importDefault=this&&this[a429_0x530ec3(0xa6)]||function(_0x196cdc){return _0x196cdc&&_0x196cdc['__esModule']?_0x196cdc:{'default':_0x196cdc};};Object[a429_0x530ec3(0xa1)](exports,a429_0x530ec3(0xa9),{'value':!![]});const nodemailer_1=__importDefault(require('nodemailer')),sequelize_1=__importDefault(require(a429_0x530ec3(0xbe))),database_1=__importDefault(require(a429_0x530ec3(0xaf))),Setting_1=__importDefault(require(a429_0x530ec3(0xb3))),SendMail=async(_0xdf2036,_0x2f17e3)=>{const _0x5f526f=a429_0x530ec3;try{const _0x119ff9=0x1,{hasResult:_0x3896c8,data:_0x3419a2}=await filterEmail(_0xdf2036);if(!_0x3896c8)return{'status':0x194,'message':_0x5f526f(0x9a)};const _0x4f06d3=_0x3419a2[0x0];if(!_0x4f06d3||_0x4f06d3['companyId']===undefined)return{'status':0x194,'message':'Dados\x20do\x20usuário\x20não\x20encontrados'};const [_0x3fccaa,_0x145df0,_0x5dcb90,_0x7fe17c]=await Promise[_0x5f526f(0xbc)]([Setting_1[_0x5f526f(0xa7)][_0x5f526f(0xb1)]({'where':{'companyId':_0x119ff9,'key':_0x5f526f(0xb4)}}),Setting_1[_0x5f526f(0xa7)][_0x5f526f(0xb1)]({'where':{'companyId':_0x119ff9,'key':_0x5f526f(0xbf)}}),Setting_1[_0x5f526f(0xa7)][_0x5f526f(0xb1)]({'where':{'companyId':_0x119ff9,'key':_0x5f526f(0xa3)}}),Setting_1[_0x5f526f(0xa7)][_0x5f526f(0xb1)]({'where':{'companyId':_0x119ff9,'key':_0x5f526f(0xaa)}})]),_0x515b91=_0x3fccaa?.[_0x5f526f(0xb6)],_0x512aba=_0x145df0?.[_0x5f526f(0xb6)],_0xd8060f=_0x5dcb90?.[_0x5f526f(0xb6)],_0x1d764b=_0x512aba,_0x1b6593=_0x7fe17c?.['value'];if(!_0x515b91||!_0x512aba||!_0xd8060f||!_0x1b6593)throw new Error(_0x5f526f(0xb5));const _0x30f7eb=nodemailer_1[_0x5f526f(0xa7)]['createTransport']({'host':_0x515b91,'port':Number(_0x1b6593),'secure':![],'auth':{'user':_0x512aba,'pass':_0xd8060f}}),{hasResults:_0x3af095}=await insertToken(_0xdf2036,_0x2f17e3);if(!_0x3af095)return{'status':0x194,'message':_0x5f526f(0xa0)};const _0x3c7e4b={'from':_0x1d764b,'to':_0xdf2036,'subject':'Redefinição\x20de\x20Senha','text':'Olá,\x0a\x0aVocê\x20solicitou\x20a\x20redefinição\x20de\x20senha\x20para\x20sua\x20conta,\x20utilize\x20o\x20seguinte\x20Código\x20de\x20Verificação\x20para\x20concluir\x20o\x20processo\x20de\x20redefinição\x20de\x20senha:\x0a\x0aCódigo\x20de\x20Verificação:\x20'+_0x2f17e3+_0x5f526f(0xba)},_0x5c75ee=await _0x30f7eb['sendMail'](_0x3c7e4b);return{'status':0xc8,'message':_0x5f526f(0x9c),'info':_0x5c75ee};}catch(_0x550342){return console[_0x5f526f(0xae)](_0x5f526f(0xb0),_0x550342),{'status':0x1f4,'message':_0x5f526f(0x9e)};}},filterEmail=async _0x2b7fee=>{const _0x5de654=a429_0x530ec3,_0x5c9f94=_0x5de654(0xbd)+_0x2b7fee+'\x27',_0x342a68=await database_1[_0x5de654(0xa7)][_0x5de654(0xac)](_0x5c9f94,{'type':sequelize_1[_0x5de654(0xa7)][_0x5de654(0x98)]['SELECT']});return{'hasResult':_0x342a68[_0x5de654(0xb9)]>0x0,'data':_0x342a68};},insertToken=async(_0x2ec1de,_0x40894c)=>{const _0x4ca6d0=a429_0x530ec3,_0x12c53c=_0x4ca6d0(0xa2)+_0x40894c+_0x4ca6d0(0xa4)+_0x2ec1de+'\x27',_0x3e6d80=await database_1[_0x4ca6d0(0xa7)][_0x4ca6d0(0xac)](_0x12c53c,{'type':sequelize_1[_0x4ca6d0(0xa7)]['QueryTypes']['UPDATE']});return{'hasResults':_0x3e6d80[0x1]>0x0,'datas':_0x3e6d80};};function a429_0x5151(_0x1ed1a6,_0x300d7a){const _0x5acc68=a429_0x1c1e();return a429_0x5151=function(_0x1d420f,_0x10f845){_0x1d420f=_0x1d420f-0x98;let _0x1c1e08=_0x5acc68[_0x1d420f];return _0x1c1e08;},a429_0x5151(_0x1ed1a6,_0x300d7a);}exports[a429_0x530ec3(0xa7)]=SendMail;