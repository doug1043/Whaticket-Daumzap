const a432_0x5e472c=a432_0x3942;(function(_0x13a678,_0x308ffa){const _0x1f75e3=a432_0x3942,_0x524cfd=_0x13a678();while(!![]){try{const _0x2fbc4e=-parseInt(_0x1f75e3(0x10f))/0x1+parseInt(_0x1f75e3(0x12b))/0x2+parseInt(_0x1f75e3(0x10d))/0x3+parseInt(_0x1f75e3(0x129))/0x4*(parseInt(_0x1f75e3(0x11c))/0x5)+-parseInt(_0x1f75e3(0x114))/0x6+-parseInt(_0x1f75e3(0x113))/0x7+parseInt(_0x1f75e3(0x132))/0x8*(parseInt(_0x1f75e3(0x11e))/0x9);if(_0x2fbc4e===_0x308ffa)break;else _0x524cfd['push'](_0x524cfd['shift']());}catch(_0x875b66){_0x524cfd['push'](_0x524cfd['shift']());}}}(a432_0x1188,0x5d3c7));const a432_0x5a3b1b=(function(){let _0x2b5d19=!![];return function(_0x583fea,_0x349d22){const _0x59771c=_0x2b5d19?function(){if(_0x349d22){const _0x20eeb7=_0x349d22['apply'](_0x583fea,arguments);return _0x349d22=null,_0x20eeb7;}}:function(){};return _0x2b5d19=![],_0x59771c;};}()),a432_0xf2a788=a432_0x5a3b1b(this,function(){const _0x76d676=a432_0x3942;return a432_0xf2a788[_0x76d676(0x12a)]()['search'](_0x76d676(0x11b))[_0x76d676(0x12a)]()[_0x76d676(0x127)](a432_0xf2a788)[_0x76d676(0x130)](_0x76d676(0x11b));});a432_0xf2a788();function a432_0x1188(){const _0x126ae4=['E-mail\x20enviado\x20com\x20sucesso','1498140UtPnOR','smtpport','558983CGTdoN','length','usersmtpauth','findOne','56133ZShumI','3354792IOvZCo','SELECT','../../database','defineProperty','value','UPDATE','SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x27','(((.+)+)+)+$','5RWZSbx','Redefinição\x20de\x20Senha','6147uIFwow','Não\x20foi\x20possível\x20inserir\x20o\x20token\x20de\x20redefinição','smtpauth','sequelize','createTransport','Email\x20não\x20encontrado','../../models/Setting','Configurações\x20SMTP\x20estão\x20incompletas','QueryTypes','constructor','clientsecretsmtpauth','1737668DpxQOV','toString','2390vYYUsy','query','error','__esModule','default','search','UPDATE\x20\x22Users\x22\x20SET\x20\x22resetPassword\x22=\x20\x27','6712lKmvre','Dados\x20do\x20usuário\x20não\x20encontrados','\x27\x20WHERE\x20email\x20=\x27'];a432_0x1188=function(){return _0x126ae4;};return a432_0x1188();}function a432_0x3942(_0x4dcf16,_0x2f6dc9){const _0x393d25=a432_0x1188();return a432_0x3942=function(_0xf2a788,_0x5a3b1b){_0xf2a788=_0xf2a788-0x10c;let _0x118864=_0x393d25[_0xf2a788];return _0x118864;},a432_0x3942(_0x4dcf16,_0x2f6dc9);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x400210){return _0x400210&&_0x400210['__esModule']?_0x400210:{'default':_0x400210};};Object[a432_0x5e472c(0x117)](exports,a432_0x5e472c(0x12e),{'value':!![]});const nodemailer_1=__importDefault(require('nodemailer')),sequelize_1=__importDefault(require(a432_0x5e472c(0x121))),database_1=__importDefault(require(a432_0x5e472c(0x116))),Setting_1=__importDefault(require(a432_0x5e472c(0x124))),SendMail=async(_0x10b9ad,_0x362394)=>{const _0x297c55=a432_0x5e472c;try{const _0x46a367=0x1,{hasResult:_0x5f2766,data:_0x4bb38a}=await filterEmail(_0x10b9ad);if(!_0x5f2766)return{'status':0x194,'message':_0x297c55(0x123)};const _0x11d27c=_0x4bb38a[0x0];if(!_0x11d27c||_0x11d27c['companyId']===undefined)return{'status':0x194,'message':_0x297c55(0x133)};const [_0x39f7f0,_0x4ff839,_0x27ad07,_0x4443e3]=await Promise['all']([Setting_1[_0x297c55(0x12f)][_0x297c55(0x112)]({'where':{'companyId':_0x46a367,'key':_0x297c55(0x120)}}),Setting_1[_0x297c55(0x12f)]['findOne']({'where':{'companyId':_0x46a367,'key':_0x297c55(0x111)}}),Setting_1['default']['findOne']({'where':{'companyId':_0x46a367,'key':_0x297c55(0x128)}}),Setting_1[_0x297c55(0x12f)][_0x297c55(0x112)]({'where':{'companyId':_0x46a367,'key':_0x297c55(0x10e)}})]),_0x312892=_0x39f7f0?.[_0x297c55(0x118)],_0x58f143=_0x4ff839?.[_0x297c55(0x118)],_0x5ee7ca=_0x27ad07?.['value'],_0x40b87c=_0x58f143,_0x486fd8=_0x4443e3?.['value'];if(!_0x312892||!_0x58f143||!_0x5ee7ca||!_0x486fd8)throw new Error(_0x297c55(0x125));const _0x3ac445=nodemailer_1[_0x297c55(0x12f)][_0x297c55(0x122)]({'host':_0x312892,'port':Number(_0x486fd8),'secure':![],'auth':{'user':_0x58f143,'pass':_0x5ee7ca}}),{hasResults:_0x5ac737}=await insertToken(_0x10b9ad,_0x362394);if(!_0x5ac737)return{'status':0x194,'message':_0x297c55(0x11f)};const _0x2c9662={'from':_0x40b87c,'to':_0x10b9ad,'subject':_0x297c55(0x11d),'text':'Olá,\x0a\x0aVocê\x20solicitou\x20a\x20redefinição\x20de\x20senha\x20para\x20sua\x20conta,\x20utilize\x20o\x20seguinte\x20Código\x20de\x20Verificação\x20para\x20concluir\x20o\x20processo\x20de\x20redefinição\x20de\x20senha:\x0a\x0aCódigo\x20de\x20Verificação:\x20'+_0x362394+'\x0a\x0aPor\x20favor,\x20copie\x20e\x20cole\x20o\x20Código\x20de\x20Verificação\x20no\x20campo\x20\x27Código\x20de\x20Verificação\x27.\x0a\x0aSe\x20você\x20não\x20solicitou\x20esta\x20redefinição\x20de\x20senha,\x20por\x20favor,\x20ignore\x20este\x20e-mail.\x0a\x0a\x0aAtenciosamente'},_0x1137a1=await _0x3ac445['sendMail'](_0x2c9662);return{'status':0xc8,'message':_0x297c55(0x10c),'info':_0x1137a1};}catch(_0xf1100b){return console[_0x297c55(0x12d)]('Erro\x20ao\x20enviar\x20e-mail:',_0xf1100b),{'status':0x1f4,'message':'Erro\x20interno\x20do\x20servidor'};}},filterEmail=async _0x3942fb=>{const _0x4f8d9d=a432_0x5e472c,_0x5baa27=_0x4f8d9d(0x11a)+_0x3942fb+'\x27',_0x9c2615=await database_1[_0x4f8d9d(0x12f)][_0x4f8d9d(0x12c)](_0x5baa27,{'type':sequelize_1['default']['QueryTypes'][_0x4f8d9d(0x115)]});return{'hasResult':_0x9c2615[_0x4f8d9d(0x110)]>0x0,'data':_0x9c2615};},insertToken=async(_0x129568,_0x356859)=>{const _0x394067=a432_0x5e472c,_0x4b5464=_0x394067(0x131)+_0x356859+_0x394067(0x134)+_0x129568+'\x27',_0x3f8b6b=await database_1['default'][_0x394067(0x12c)](_0x4b5464,{'type':sequelize_1[_0x394067(0x12f)][_0x394067(0x126)][_0x394067(0x119)]});return{'hasResults':_0x3f8b6b[0x1]>0x0,'datas':_0x3f8b6b};};exports[a432_0x5e472c(0x12f)]=SendMail;