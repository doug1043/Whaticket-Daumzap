function a434_0x3095(_0x2871e8,_0x56ae32){const _0x5c1a79=a434_0x13a8();return a434_0x3095=function(_0x599cc8,_0x35c073){_0x599cc8=_0x599cc8-0x1a2;let _0x13a8d4=_0x5c1a79[_0x599cc8];return _0x13a8d4;},a434_0x3095(_0x2871e8,_0x56ae32);}const a434_0x293634=a434_0x3095;(function(_0x1805d8,_0x7a1015){const _0x305382=a434_0x3095,_0x5d5dce=_0x1805d8();while(!![]){try{const _0x302854=-parseInt(_0x305382(0x1a8))/0x1*(parseInt(_0x305382(0x1a7))/0x2)+parseInt(_0x305382(0x1ac))/0x3+-parseInt(_0x305382(0x1a4))/0x4+parseInt(_0x305382(0x1bc))/0x5+parseInt(_0x305382(0x1c8))/0x6+parseInt(_0x305382(0x1c2))/0x7*(parseInt(_0x305382(0x1c6))/0x8)+parseInt(_0x305382(0x1ca))/0x9*(-parseInt(_0x305382(0x1c9))/0xa);if(_0x302854===_0x7a1015)break;else _0x5d5dce['push'](_0x5d5dce['shift']());}catch(_0x576c6b){_0x5d5dce['push'](_0x5d5dce['shift']());}}}(a434_0x13a8,0x8e226));const a434_0x35c073=(function(){let _0x1c0ca6=!![];return function(_0x52e751,_0x4d820c){const _0x17283e=_0x1c0ca6?function(){const _0x5b1417=a434_0x3095;if(_0x4d820c){const _0x3f92a0=_0x4d820c[_0x5b1417(0x1bb)](_0x52e751,arguments);return _0x4d820c=null,_0x3f92a0;}}:function(){};return _0x1c0ca6=![],_0x17283e;};}()),a434_0x599cc8=a434_0x35c073(this,function(){const _0x5dfd88=a434_0x3095;return a434_0x599cc8[_0x5dfd88(0x1b8)]()[_0x5dfd88(0x1ba)](_0x5dfd88(0x1ae))[_0x5dfd88(0x1b8)]()['constructor'](a434_0x599cc8)['search'](_0x5dfd88(0x1ae));});a434_0x599cc8();'use strict';var __importDefault=this&&this[a434_0x293634(0x1b5)]||function(_0x2903fe){const _0x27e4a1=a434_0x293634;return _0x2903fe&&_0x2903fe[_0x27e4a1(0x1ad)]?_0x2903fe:{'default':_0x2903fe};};function a434_0x13a8(){const _0x42c376=['apply','5117680tzwQIT','E-mail\x20enviado\x20com\x20sucesso','Redefinição\x20de\x20Senha','Erro\x20interno\x20do\x20servidor','smtpport','\x0a\x0aPor\x20favor,\x20copie\x20e\x20cole\x20o\x20Código\x20de\x20Verificação\x20no\x20campo\x20\x27Código\x20de\x20Verificação\x27.\x0a\x0aSe\x20você\x20não\x20solicitou\x20esta\x20redefinição\x20de\x20senha,\x20por\x20favor,\x20ignore\x20este\x20e-mail.\x0a\x0a\x0aAtenciosamente','35esPBPg','usersmtpauth','smtpauth','UPDATE\x20\x22Users\x22\x20SET\x20\x22resetPassword\x22=\x20\x27','1483088RXnLZr','sendMail','4682250DGKANH','20mjpQiC','5543973gwmMfb','companyId','\x27\x20WHERE\x20email\x20=\x27','2178124mcLfzM','../../models/Setting','length','4dqBpLD','347609zLCFMf','Olá,\x0a\x0aVocê\x20solicitou\x20a\x20redefinição\x20de\x20senha\x20para\x20sua\x20conta,\x20utilize\x20o\x20seguinte\x20Código\x20de\x20Verificação\x20para\x20concluir\x20o\x20processo\x20de\x20redefinição\x20de\x20senha:\x0a\x0aCódigo\x20de\x20Verificação:\x20','Configurações\x20SMTP\x20estão\x20incompletas','Erro\x20ao\x20enviar\x20e-mail:','969252QyFoEb','__esModule','(((.+)+)+)+$','sequelize','defineProperty','default','SELECT','findOne','SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x27','__importDefault','value','all','toString','query','search'];a434_0x13a8=function(){return _0x42c376;};return a434_0x13a8();}Object[a434_0x293634(0x1b0)](exports,a434_0x293634(0x1ad),{'value':!![]});const nodemailer_1=__importDefault(require('nodemailer')),sequelize_1=__importDefault(require(a434_0x293634(0x1af))),database_1=__importDefault(require('../../database')),Setting_1=__importDefault(require(a434_0x293634(0x1a5))),SendMail=async(_0x150d7c,_0x4f6101)=>{const _0x2cb57e=a434_0x293634;try{const _0x40c028=0x1,{hasResult:_0x390013,data:_0x71076b}=await filterEmail(_0x150d7c);if(!_0x390013)return{'status':0x194,'message':'Email\x20não\x20encontrado'};const _0x3695e5=_0x71076b[0x0];if(!_0x3695e5||_0x3695e5[_0x2cb57e(0x1a2)]===undefined)return{'status':0x194,'message':'Dados\x20do\x20usuário\x20não\x20encontrados'};const [_0x1b0d0c,_0xde8da0,_0x43130d,_0x552759]=await Promise[_0x2cb57e(0x1b7)]([Setting_1[_0x2cb57e(0x1b1)][_0x2cb57e(0x1b3)]({'where':{'companyId':_0x40c028,'key':_0x2cb57e(0x1c4)}}),Setting_1[_0x2cb57e(0x1b1)][_0x2cb57e(0x1b3)]({'where':{'companyId':_0x40c028,'key':_0x2cb57e(0x1c3)}}),Setting_1['default'][_0x2cb57e(0x1b3)]({'where':{'companyId':_0x40c028,'key':'clientsecretsmtpauth'}}),Setting_1['default'][_0x2cb57e(0x1b3)]({'where':{'companyId':_0x40c028,'key':_0x2cb57e(0x1c0)}})]),_0x2ab57d=_0x1b0d0c?.[_0x2cb57e(0x1b6)],_0x3ee649=_0xde8da0?.[_0x2cb57e(0x1b6)],_0x450e8e=_0x43130d?.[_0x2cb57e(0x1b6)],_0x4cbb53=_0x3ee649,_0x5ccc60=_0x552759?.[_0x2cb57e(0x1b6)];if(!_0x2ab57d||!_0x3ee649||!_0x450e8e||!_0x5ccc60)throw new Error(_0x2cb57e(0x1aa));const _0x59cdcb=nodemailer_1[_0x2cb57e(0x1b1)]['createTransport']({'host':_0x2ab57d,'port':Number(_0x5ccc60),'secure':![],'auth':{'user':_0x3ee649,'pass':_0x450e8e}}),{hasResults:_0x21ad04}=await insertToken(_0x150d7c,_0x4f6101);if(!_0x21ad04)return{'status':0x194,'message':'Não\x20foi\x20possível\x20inserir\x20o\x20token\x20de\x20redefinição'};const _0x45061f={'from':_0x4cbb53,'to':_0x150d7c,'subject':_0x2cb57e(0x1be),'text':_0x2cb57e(0x1a9)+_0x4f6101+_0x2cb57e(0x1c1)},_0x3be52f=await _0x59cdcb[_0x2cb57e(0x1c7)](_0x45061f);return{'status':0xc8,'message':_0x2cb57e(0x1bd),'info':_0x3be52f};}catch(_0x321df2){return console['error'](_0x2cb57e(0x1ab),_0x321df2),{'status':0x1f4,'message':_0x2cb57e(0x1bf)};}},filterEmail=async _0x16cb90=>{const _0x2ce5e1=a434_0x293634,_0x1f304c=_0x2ce5e1(0x1b4)+_0x16cb90+'\x27',_0x20373b=await database_1[_0x2ce5e1(0x1b1)][_0x2ce5e1(0x1b9)](_0x1f304c,{'type':sequelize_1[_0x2ce5e1(0x1b1)]['QueryTypes'][_0x2ce5e1(0x1b2)]});return{'hasResult':_0x20373b[_0x2ce5e1(0x1a6)]>0x0,'data':_0x20373b};},insertToken=async(_0x421d00,_0x506c76)=>{const _0x360bca=a434_0x293634,_0x4c265c=_0x360bca(0x1c5)+_0x506c76+_0x360bca(0x1a3)+_0x421d00+'\x27',_0x296688=await database_1[_0x360bca(0x1b1)]['query'](_0x4c265c,{'type':sequelize_1[_0x360bca(0x1b1)]['QueryTypes']['UPDATE']});return{'hasResults':_0x296688[0x1]>0x0,'datas':_0x296688};};exports[a434_0x293634(0x1b1)]=SendMail;