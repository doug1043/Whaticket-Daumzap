const a466_0x34d945=a466_0xeac1;(function(_0x432fdb,_0x57163a){const _0x5e9522=a466_0xeac1,_0xfe2611=_0x432fdb();while(!![]){try{const _0x363220=parseInt(_0x5e9522(0x12f))/0x1+parseInt(_0x5e9522(0x122))/0x2*(parseInt(_0x5e9522(0x119))/0x3)+-parseInt(_0x5e9522(0x113))/0x4*(parseInt(_0x5e9522(0x135))/0x5)+parseInt(_0x5e9522(0x12e))/0x6+-parseInt(_0x5e9522(0x127))/0x7*(-parseInt(_0x5e9522(0x110))/0x8)+parseInt(_0x5e9522(0x109))/0x9*(-parseInt(_0x5e9522(0x134))/0xa)+parseInt(_0x5e9522(0x11a))/0xb*(parseInt(_0x5e9522(0x12a))/0xc);if(_0x363220===_0x57163a)break;else _0xfe2611['push'](_0xfe2611['shift']());}catch(_0x45e26b){_0xfe2611['push'](_0xfe2611['shift']());}}}(a466_0x4c6b,0x9a80b));const a466_0x360cf7=(function(){let _0xa9e2dd=!![];return function(_0x4c2f23,_0x1aeb73){const _0x399777=_0xa9e2dd?function(){const _0x57a118=a466_0xeac1;if(_0x1aeb73){const _0x104c33=_0x1aeb73[_0x57a118(0x128)](_0x4c2f23,arguments);return _0x1aeb73=null,_0x104c33;}}:function(){};return _0xa9e2dd=![],_0x399777;};}()),a466_0x387013=a466_0x360cf7(this,function(){const _0x2d1dfd=a466_0xeac1;return a466_0x387013[_0x2d1dfd(0x121)]()[_0x2d1dfd(0x10f)]('(((.+)+)+)+$')['toString']()[_0x2d1dfd(0x12d)](a466_0x387013)[_0x2d1dfd(0x10f)](_0x2d1dfd(0x129));});a466_0x387013();'use strict';function a466_0xeac1(_0x4bb04e,_0x1c394b){const _0x53b7c5=a466_0x4c6b();return a466_0xeac1=function(_0x387013,_0x360cf7){_0x387013=_0x387013-0x109;let _0x4c6b76=_0x53b7c5[_0x387013];return _0x4c6b76;},a466_0xeac1(_0x4bb04e,_0x1c394b);}var __importDefault=this&&this[a466_0x34d945(0x126)]||function(_0x3042d4){const _0x9bf632=a466_0x34d945;return _0x3042d4&&_0x3042d4[_0x9bf632(0x11f)]?_0x3042d4:{'default':_0x3042d4};};Object[a466_0x34d945(0x133)](exports,a466_0x34d945(0x11f),{'value':!![]});const nodemailer_1=__importDefault(require(a466_0x34d945(0x118))),sequelize_1=__importDefault(require('sequelize')),database_1=__importDefault(require(a466_0x34d945(0x10a))),Setting_1=__importDefault(require(a466_0x34d945(0x10e))),SendMail=async(_0x5a954a,_0x2187b2)=>{const _0x238961=a466_0x34d945;try{const _0x17d99a=0x1,{hasResult:_0x3a40e0,data:_0x42a23d}=await filterEmail(_0x5a954a);if(!_0x3a40e0)return{'status':0x194,'message':'Email\x20não\x20encontrado'};const _0x4794d5=_0x42a23d[0x0];if(!_0x4794d5||_0x4794d5['companyId']===undefined)return{'status':0x194,'message':'Dados\x20do\x20usuário\x20não\x20encontrados'};const [_0x57a7de,_0x52e97f,_0x4dac51,_0x2433c6]=await Promise[_0x238961(0x11e)]([Setting_1[_0x238961(0x10c)][_0x238961(0x132)]({'where':{'companyId':_0x17d99a,'key':_0x238961(0x117)}}),Setting_1[_0x238961(0x10c)]['findOne']({'where':{'companyId':_0x17d99a,'key':_0x238961(0x112)}}),Setting_1[_0x238961(0x10c)][_0x238961(0x132)]({'where':{'companyId':_0x17d99a,'key':'clientsecretsmtpauth'}}),Setting_1[_0x238961(0x10c)][_0x238961(0x132)]({'where':{'companyId':_0x17d99a,'key':_0x238961(0x125)}})]),_0x336f17=_0x57a7de?.[_0x238961(0x120)],_0x2b52fc=_0x52e97f?.['value'],_0x5c9775=_0x4dac51?.[_0x238961(0x120)],_0x5a24f9=_0x2b52fc,_0x3c97f6=_0x2433c6?.[_0x238961(0x120)];if(!_0x336f17||!_0x2b52fc||!_0x5c9775||!_0x3c97f6)throw new Error(_0x238961(0x123));const _0x43d776=nodemailer_1[_0x238961(0x10c)][_0x238961(0x11b)]({'host':_0x336f17,'port':Number(_0x3c97f6),'secure':![],'auth':{'user':_0x2b52fc,'pass':_0x5c9775}}),{hasResults:_0x3b1cda}=await insertToken(_0x5a954a,_0x2187b2);if(!_0x3b1cda)return{'status':0x194,'message':'Não\x20foi\x20possível\x20inserir\x20o\x20token\x20de\x20redefinição'};const _0x347eb1={'from':_0x5a24f9,'to':_0x5a954a,'subject':_0x238961(0x124),'text':_0x238961(0x12c)+_0x2187b2+'\x0a\x0aPor\x20favor,\x20copie\x20e\x20cole\x20o\x20Código\x20de\x20Verificação\x20no\x20campo\x20\x27Código\x20de\x20Verificação\x27.\x0a\x0aSe\x20você\x20não\x20solicitou\x20esta\x20redefinição\x20de\x20senha,\x20por\x20favor,\x20ignore\x20este\x20e-mail.\x0a\x0a\x0aAtenciosamente'},_0x495879=await _0x43d776[_0x238961(0x111)](_0x347eb1);return{'status':0xc8,'message':_0x238961(0x116),'info':_0x495879};}catch(_0x3ce5d6){return console[_0x238961(0x130)](_0x238961(0x10b),_0x3ce5d6),{'status':0x1f4,'message':'Erro\x20interno\x20do\x20servidor'};}},filterEmail=async _0x103baa=>{const _0x5a7511=a466_0x34d945,_0x290751=_0x5a7511(0x114)+_0x103baa+'\x27',_0x2f7773=await database_1[_0x5a7511(0x10c)][_0x5a7511(0x11d)](_0x290751,{'type':sequelize_1[_0x5a7511(0x10c)][_0x5a7511(0x115)][_0x5a7511(0x11c)]});return{'hasResult':_0x2f7773[_0x5a7511(0x10d)]>0x0,'data':_0x2f7773};},insertToken=async(_0x33c010,_0x5f21ac)=>{const _0x3330a5=a466_0x34d945,_0x5d3f41=_0x3330a5(0x131)+_0x5f21ac+'\x27\x20WHERE\x20email\x20=\x27'+_0x33c010+'\x27',_0x212fa8=await database_1[_0x3330a5(0x10c)]['query'](_0x5d3f41,{'type':sequelize_1[_0x3330a5(0x10c)][_0x3330a5(0x115)][_0x3330a5(0x12b)]});return{'hasResults':_0x212fa8[0x1]>0x0,'datas':_0x212fa8};};exports[a466_0x34d945(0x10c)]=SendMail;function a466_0x4c6b(){const _0x5f5ae3=['Configurações\x20SMTP\x20estão\x20incompletas','Redefinição\x20de\x20Senha','smtpport','__importDefault','917007aoFTrP','apply','(((.+)+)+)+$','12OXDZba','UPDATE','Olá,\x0a\x0aVocê\x20solicitou\x20a\x20redefinição\x20de\x20senha\x20para\x20sua\x20conta,\x20utilize\x20o\x20seguinte\x20Código\x20de\x20Verificação\x20para\x20concluir\x20o\x20processo\x20de\x20redefinição\x20de\x20senha:\x0a\x0aCódigo\x20de\x20Verificação:\x20','constructor','1576872vfCxUf','525716tCFTUg','error','UPDATE\x20\x22Users\x22\x20SET\x20\x22resetPassword\x22=\x20\x27','findOne','defineProperty','1500700bfngTq','32275oktazz','9KSwnvC','../../database','Erro\x20ao\x20enviar\x20e-mail:','default','length','../../models/Setting','search','32xVxmwA','sendMail','usersmtpauth','676asJSgR','SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x27','QueryTypes','E-mail\x20enviado\x20com\x20sucesso','smtpauth','nodemailer','60iqjTSn','989516QOEfHF','createTransport','SELECT','query','all','__esModule','value','toString','47132AFOAtO'];a466_0x4c6b=function(){return _0x5f5ae3;};return a466_0x4c6b();}