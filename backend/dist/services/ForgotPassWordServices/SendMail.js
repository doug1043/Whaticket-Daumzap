const a461_0x355da5=a461_0x383c;(function(_0x560791,_0x15a91c){const _0xabefd1=a461_0x383c,_0x4b855a=_0x560791();while(!![]){try{const _0x311f25=parseInt(_0xabefd1(0x191))/0x1+parseInt(_0xabefd1(0x19e))/0x2*(parseInt(_0xabefd1(0x1b1))/0x3)+parseInt(_0xabefd1(0x198))/0x4*(-parseInt(_0xabefd1(0x19f))/0x5)+-parseInt(_0xabefd1(0x18e))/0x6+parseInt(_0xabefd1(0x197))/0x7+-parseInt(_0xabefd1(0x1b5))/0x8+-parseInt(_0xabefd1(0x1a8))/0x9;if(_0x311f25===_0x15a91c)break;else _0x4b855a['push'](_0x4b855a['shift']());}catch(_0x457d1d){_0x4b855a['push'](_0x4b855a['shift']());}}}(a461_0x2762,0xbfd4d));const a461_0x21d214=(function(){let _0x1ccd64=!![];return function(_0x4b6ec1,_0x5cf632){const _0xd99e89=_0x1ccd64?function(){if(_0x5cf632){const _0xdd6673=_0x5cf632['apply'](_0x4b6ec1,arguments);return _0x5cf632=null,_0xdd6673;}}:function(){};return _0x1ccd64=![],_0xd99e89;};}()),a461_0x1688ea=a461_0x21d214(this,function(){const _0x41bc2c=a461_0x383c;return a461_0x1688ea['toString']()[_0x41bc2c(0x1a4)](_0x41bc2c(0x18f))[_0x41bc2c(0x194)]()['constructor'](a461_0x1688ea)[_0x41bc2c(0x1a4)](_0x41bc2c(0x18f));});a461_0x1688ea();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3acc39){const _0x33c7b1=a461_0x383c;return _0x3acc39&&_0x3acc39[_0x33c7b1(0x19b)]?_0x3acc39:{'default':_0x3acc39};};function a461_0x383c(_0x472e78,_0x30dd90){const _0x507fa1=a461_0x2762();return a461_0x383c=function(_0x1688ea,_0x21d214){_0x1688ea=_0x1688ea-0x18b;let _0x27629f=_0x507fa1[_0x1688ea];return _0x27629f;},a461_0x383c(_0x472e78,_0x30dd90);}Object[a461_0x355da5(0x1ac)](exports,a461_0x355da5(0x19b),{'value':!![]});const nodemailer_1=__importDefault(require(a461_0x355da5(0x1a6))),sequelize_1=__importDefault(require(a461_0x355da5(0x1af))),database_1=__importDefault(require(a461_0x355da5(0x1a3))),Setting_1=__importDefault(require(a461_0x355da5(0x1b2))),SendMail=async(_0x37366c,_0x4b9a15)=>{const _0x559ffb=a461_0x355da5;try{const _0x27e2a9=0x1,{hasResult:_0x5f384d,data:_0x392377}=await filterEmail(_0x37366c);if(!_0x5f384d)return{'status':0x194,'message':_0x559ffb(0x1a5)};const _0x2187f5=_0x392377[0x0];if(!_0x2187f5||_0x2187f5[_0x559ffb(0x1b4)]===undefined)return{'status':0x194,'message':_0x559ffb(0x199)};const [_0x2d8b29,_0x7c8704,_0x1f4d21,_0x449182]=await Promise[_0x559ffb(0x1b3)]([Setting_1[_0x559ffb(0x18b)][_0x559ffb(0x195)]({'where':{'companyId':_0x27e2a9,'key':'smtpauth'}}),Setting_1[_0x559ffb(0x18b)][_0x559ffb(0x195)]({'where':{'companyId':_0x27e2a9,'key':'usersmtpauth'}}),Setting_1[_0x559ffb(0x18b)][_0x559ffb(0x195)]({'where':{'companyId':_0x27e2a9,'key':_0x559ffb(0x1ab)}}),Setting_1[_0x559ffb(0x18b)][_0x559ffb(0x195)]({'where':{'companyId':_0x27e2a9,'key':_0x559ffb(0x1a1)}})]),_0x45d7df=_0x2d8b29?.[_0x559ffb(0x1ad)],_0x446e93=_0x7c8704?.[_0x559ffb(0x1ad)],_0x28138e=_0x1f4d21?.[_0x559ffb(0x1ad)],_0x3de632=_0x446e93,_0x48c666=_0x449182?.['value'];if(!_0x45d7df||!_0x446e93||!_0x28138e||!_0x48c666)throw new Error(_0x559ffb(0x1ae));const _0x2f4413=nodemailer_1['default'][_0x559ffb(0x190)]({'host':_0x45d7df,'port':Number(_0x48c666),'secure':![],'auth':{'user':_0x446e93,'pass':_0x28138e}}),{hasResults:_0x4a5883}=await insertToken(_0x37366c,_0x4b9a15);if(!_0x4a5883)return{'status':0x194,'message':_0x559ffb(0x19a)};const _0x2bea3c={'from':_0x3de632,'to':_0x37366c,'subject':_0x559ffb(0x1a2),'text':_0x559ffb(0x18c)+_0x4b9a15+_0x559ffb(0x1a7)},_0x2cdcf8=await _0x2f4413[_0x559ffb(0x19c)](_0x2bea3c);return{'status':0xc8,'message':_0x559ffb(0x1b0),'info':_0x2cdcf8};}catch(_0x2ec2f4){return console['error'](_0x559ffb(0x1a0),_0x2ec2f4),{'status':0x1f4,'message':_0x559ffb(0x1a9)};}},filterEmail=async _0x1aff1e=>{const _0x270985=a461_0x355da5,_0x219bb6=_0x270985(0x19d)+_0x1aff1e+'\x27',_0x3cb025=await database_1['default'][_0x270985(0x18d)](_0x219bb6,{'type':sequelize_1[_0x270985(0x18b)][_0x270985(0x1aa)][_0x270985(0x196)]});return{'hasResult':_0x3cb025['length']>0x0,'data':_0x3cb025};},insertToken=async(_0x52f540,_0x3ef242)=>{const _0x515740=a461_0x355da5,_0x2564bf=_0x515740(0x193)+_0x3ef242+'\x27\x20WHERE\x20email\x20=\x27'+_0x52f540+'\x27',_0x4df315=await database_1[_0x515740(0x18b)][_0x515740(0x18d)](_0x2564bf,{'type':sequelize_1['default']['QueryTypes'][_0x515740(0x192)]});return{'hasResults':_0x4df315[0x1]>0x0,'datas':_0x4df315};};exports[a461_0x355da5(0x18b)]=SendMail;function a461_0x2762(){const _0x6bad6d=['smtpport','Redefinição\x20de\x20Senha','../../database','search','Email\x20não\x20encontrado','nodemailer','\x0a\x0aPor\x20favor,\x20copie\x20e\x20cole\x20o\x20Código\x20de\x20Verificação\x20no\x20campo\x20\x27Código\x20de\x20Verificação\x27.\x0a\x0aSe\x20você\x20não\x20solicitou\x20esta\x20redefinição\x20de\x20senha,\x20por\x20favor,\x20ignore\x20este\x20e-mail.\x0a\x0a\x0aAtenciosamente','6212925tfdvpH','Erro\x20interno\x20do\x20servidor','QueryTypes','clientsecretsmtpauth','defineProperty','value','Configurações\x20SMTP\x20estão\x20incompletas','sequelize','E-mail\x20enviado\x20com\x20sucesso','4430103nrfnhD','../../models/Setting','all','companyId','4843784YzxCIY','default','Olá,\x0a\x0aVocê\x20solicitou\x20a\x20redefinição\x20de\x20senha\x20para\x20sua\x20conta,\x20utilize\x20o\x20seguinte\x20Código\x20de\x20Verificação\x20para\x20concluir\x20o\x20processo\x20de\x20redefinição\x20de\x20senha:\x0a\x0aCódigo\x20de\x20Verificação:\x20','query','3543150JPkkEk','(((.+)+)+)+$','createTransport','616941aRcauH','UPDATE','UPDATE\x20\x22Users\x22\x20SET\x20\x22resetPassword\x22=\x20\x27','toString','findOne','SELECT','5297880nAzDTv','713672nZHLNb','Dados\x20do\x20usuário\x20não\x20encontrados','Não\x20foi\x20possível\x20inserir\x20o\x20token\x20de\x20redefinição','__esModule','sendMail','SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x27','2VfcFeX','5UkbBKL','Erro\x20ao\x20enviar\x20e-mail:'];a461_0x2762=function(){return _0x6bad6d;};return a461_0x2762();}