const a433_0x25d07b=a433_0x50c8;(function(_0x43953d,_0x29edfb){const _0x420e37=a433_0x50c8,_0x1c8482=_0x43953d();while(!![]){try{const _0x4b2227=-parseInt(_0x420e37(0x18a))/0x1+-parseInt(_0x420e37(0x184))/0x2*(-parseInt(_0x420e37(0x172))/0x3)+-parseInt(_0x420e37(0x171))/0x4*(-parseInt(_0x420e37(0x17c))/0x5)+parseInt(_0x420e37(0x160))/0x6*(-parseInt(_0x420e37(0x17a))/0x7)+-parseInt(_0x420e37(0x180))/0x8*(parseInt(_0x420e37(0x166))/0x9)+-parseInt(_0x420e37(0x164))/0xa+parseInt(_0x420e37(0x188))/0xb;if(_0x4b2227===_0x29edfb)break;else _0x1c8482['push'](_0x1c8482['shift']());}catch(_0x1870af){_0x1c8482['push'](_0x1c8482['shift']());}}}(a433_0x4bd6,0x2fdd4));const a433_0x2c385c=(function(){let _0xcaf71f=!![];return function(_0x4d2e16,_0x4f4ac1){const _0xdfd1b5=_0xcaf71f?function(){if(_0x4f4ac1){const _0x2a65e9=_0x4f4ac1['apply'](_0x4d2e16,arguments);return _0x4f4ac1=null,_0x2a65e9;}}:function(){};return _0xcaf71f=![],_0xdfd1b5;};}()),a433_0x3be1d0=a433_0x2c385c(this,function(){const _0x53df95=a433_0x50c8;return a433_0x3be1d0[_0x53df95(0x181)]()[_0x53df95(0x178)](_0x53df95(0x179))['toString']()[_0x53df95(0x169)](a433_0x3be1d0)[_0x53df95(0x178)](_0x53df95(0x179));});a433_0x3be1d0();function a433_0x50c8(_0x4157cd,_0x19869c){const _0x1ec014=a433_0x4bd6();return a433_0x50c8=function(_0x3be1d0,_0x2c385c){_0x3be1d0=_0x3be1d0-0x15f;let _0x4bd667=_0x1ec014[_0x3be1d0];return _0x4bd667;},a433_0x50c8(_0x4157cd,_0x19869c);}function a433_0x4bd6(){const _0x3a51dd=['6007870JHVjcU','clientsecretsmtpauth','33991kwTdOT','sendMail','96834vvzwQI','error','UPDATE\x20\x22Users\x22\x20SET\x20\x22resetPassword\x22=\x20\x27','Dados\x20do\x20usuário\x20não\x20encontrados','2916130ZSaZPB','Olá,\x0a\x0aVocê\x20solicitou\x20a\x20redefinição\x20de\x20senha\x20para\x20sua\x20conta,\x20utilize\x20o\x20seguinte\x20Código\x20de\x20Verificação\x20para\x20concluir\x20o\x20processo\x20de\x20redefinição\x20de\x20senha:\x0a\x0aCódigo\x20de\x20Verificação:\x20','99hDFMDL','__esModule','Erro\x20interno\x20do\x20servidor','constructor','value','../../database','default','__importDefault','Não\x20foi\x20possível\x20inserir\x20o\x20token\x20de\x20redefinição','UPDATE','\x27\x20WHERE\x20email\x20=\x27','111572Magicz','39xRqHOB','E-mail\x20enviado\x20com\x20sucesso','SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x27','query','nodemailer','all','search','(((.+)+)+)+$','147tkrQYL','findOne','55cVjVEq','usersmtpauth','Erro\x20ao\x20enviar\x20e-mail:','../../models/Setting','111032zBSGWT','toString','sequelize','QueryTypes','24654GQplfg','defineProperty','smtpauth','Redefinição\x20de\x20Senha'];a433_0x4bd6=function(){return _0x3a51dd;};return a433_0x4bd6();}'use strict';var __importDefault=this&&this[a433_0x25d07b(0x16d)]||function(_0x37c933){return _0x37c933&&_0x37c933['__esModule']?_0x37c933:{'default':_0x37c933};};Object[a433_0x25d07b(0x185)](exports,a433_0x25d07b(0x167),{'value':!![]});const nodemailer_1=__importDefault(require(a433_0x25d07b(0x176))),sequelize_1=__importDefault(require(a433_0x25d07b(0x182))),database_1=__importDefault(require(a433_0x25d07b(0x16b))),Setting_1=__importDefault(require(a433_0x25d07b(0x17f))),SendMail=async(_0x58cf84,_0x1aaefd)=>{const _0x3854d5=a433_0x25d07b;try{const _0x44941c=0x1,{hasResult:_0x5b378c,data:_0x39c32d}=await filterEmail(_0x58cf84);if(!_0x5b378c)return{'status':0x194,'message':'Email\x20não\x20encontrado'};const _0x5f2eb7=_0x39c32d[0x0];if(!_0x5f2eb7||_0x5f2eb7['companyId']===undefined)return{'status':0x194,'message':_0x3854d5(0x163)};const [_0x3d0f90,_0x28bbf8,_0x474bed,_0x405473]=await Promise[_0x3854d5(0x177)]([Setting_1[_0x3854d5(0x16c)][_0x3854d5(0x17b)]({'where':{'companyId':_0x44941c,'key':_0x3854d5(0x186)}}),Setting_1[_0x3854d5(0x16c)]['findOne']({'where':{'companyId':_0x44941c,'key':_0x3854d5(0x17d)}}),Setting_1[_0x3854d5(0x16c)][_0x3854d5(0x17b)]({'where':{'companyId':_0x44941c,'key':_0x3854d5(0x189)}}),Setting_1[_0x3854d5(0x16c)][_0x3854d5(0x17b)]({'where':{'companyId':_0x44941c,'key':'smtpport'}})]),_0x489b62=_0x3d0f90?.[_0x3854d5(0x16a)],_0x25dce4=_0x28bbf8?.[_0x3854d5(0x16a)],_0x3df1f2=_0x474bed?.[_0x3854d5(0x16a)],_0x1e3815=_0x25dce4,_0x3506e9=_0x405473?.[_0x3854d5(0x16a)];if(!_0x489b62||!_0x25dce4||!_0x3df1f2||!_0x3506e9)throw new Error('Configurações\x20SMTP\x20estão\x20incompletas');const _0xbfff78=nodemailer_1[_0x3854d5(0x16c)]['createTransport']({'host':_0x489b62,'port':Number(_0x3506e9),'secure':![],'auth':{'user':_0x25dce4,'pass':_0x3df1f2}}),{hasResults:_0x37800a}=await insertToken(_0x58cf84,_0x1aaefd);if(!_0x37800a)return{'status':0x194,'message':_0x3854d5(0x16e)};const _0x3b09f3={'from':_0x1e3815,'to':_0x58cf84,'subject':_0x3854d5(0x187),'text':_0x3854d5(0x165)+_0x1aaefd+'\x0a\x0aPor\x20favor,\x20copie\x20e\x20cole\x20o\x20Código\x20de\x20Verificação\x20no\x20campo\x20\x27Código\x20de\x20Verificação\x27.\x0a\x0aSe\x20você\x20não\x20solicitou\x20esta\x20redefinição\x20de\x20senha,\x20por\x20favor,\x20ignore\x20este\x20e-mail.\x0a\x0a\x0aAtenciosamente'},_0x14186a=await _0xbfff78[_0x3854d5(0x15f)](_0x3b09f3);return{'status':0xc8,'message':_0x3854d5(0x173),'info':_0x14186a};}catch(_0x38666c){return console[_0x3854d5(0x161)](_0x3854d5(0x17e),_0x38666c),{'status':0x1f4,'message':_0x3854d5(0x168)};}},filterEmail=async _0x2b707c=>{const _0x19a2b2=a433_0x25d07b,_0x402b2e=_0x19a2b2(0x174)+_0x2b707c+'\x27',_0x17c14d=await database_1[_0x19a2b2(0x16c)][_0x19a2b2(0x175)](_0x402b2e,{'type':sequelize_1['default'][_0x19a2b2(0x183)]['SELECT']});return{'hasResult':_0x17c14d['length']>0x0,'data':_0x17c14d};},insertToken=async(_0x445754,_0x2f06f9)=>{const _0x26b206=a433_0x25d07b,_0x39289e=_0x26b206(0x162)+_0x2f06f9+_0x26b206(0x170)+_0x445754+'\x27',_0x355eab=await database_1[_0x26b206(0x16c)][_0x26b206(0x175)](_0x39289e,{'type':sequelize_1[_0x26b206(0x16c)]['QueryTypes'][_0x26b206(0x16f)]});return{'hasResults':_0x355eab[0x1]>0x0,'datas':_0x355eab};};exports[a433_0x25d07b(0x16c)]=SendMail;