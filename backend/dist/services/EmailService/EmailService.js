'use strict';const a449_0x1dfdb6=a449_0x3dbc;(function(_0xb6e6af,_0x5e862d){const _0x458b92=a449_0x3dbc,_0x1ef5eb=_0xb6e6af();while(!![]){try{const _0x4e3abc=-parseInt(_0x458b92(0x1bb))/0x1+-parseInt(_0x458b92(0x1e8))/0x2+-parseInt(_0x458b92(0x1ca))/0x3+-parseInt(_0x458b92(0x1c6))/0x4*(-parseInt(_0x458b92(0x1ea))/0x5)+-parseInt(_0x458b92(0x1e4))/0x6+parseInt(_0x458b92(0x1cb))/0x7*(-parseInt(_0x458b92(0x1e1))/0x8)+parseInt(_0x458b92(0x1e2))/0x9;if(_0x4e3abc===_0x5e862d)break;else _0x1ef5eb['push'](_0x1ef5eb['shift']());}catch(_0x44ed6f){_0x1ef5eb['push'](_0x1ef5eb['shift']());}}}(a449_0x23eb,0x38f08));function a449_0x3dbc(_0x38d3b0,_0x5e3123){const _0x472c23=a449_0x23eb();return a449_0x3dbc=function(_0x5d1335,_0x1dd478){_0x5d1335=_0x5d1335-0x1b9;let _0x23eb8e=_0x472c23[_0x5d1335];return _0x23eb8e;},a449_0x3dbc(_0x38d3b0,_0x5e3123);}var __createBinding=this&&this[a449_0x1dfdb6(0x1db)]||(Object[a449_0x1dfdb6(0x1c5)]?function(_0xa048bd,_0x39d727,_0x9afe26,_0x1bc8c8){const _0x271ecd=a449_0x1dfdb6;if(_0x1bc8c8===undefined)_0x1bc8c8=_0x9afe26;var _0x3df9c5=Object[_0x271ecd(0x1b9)](_0x39d727,_0x9afe26);(!_0x3df9c5||('get'in _0x3df9c5?!_0x39d727['__esModule']:_0x3df9c5['writable']||_0x3df9c5[_0x271ecd(0x1cf)]))&&(_0x3df9c5={'enumerable':!![],'get':function(){return _0x39d727[_0x9afe26];}}),Object['defineProperty'](_0xa048bd,_0x1bc8c8,_0x3df9c5);}:function(_0x2663c7,_0x45c45b,_0x357aa4,_0x404cdd){if(_0x404cdd===undefined)_0x404cdd=_0x357aa4;_0x2663c7[_0x404cdd]=_0x45c45b[_0x357aa4];}),__setModuleDefault=this&&this[a449_0x1dfdb6(0x1c4)]||(Object[a449_0x1dfdb6(0x1c5)]?function(_0x5accf2,_0x540bd6){const _0x4ed99d=a449_0x1dfdb6;Object[_0x4ed99d(0x1c2)](_0x5accf2,_0x4ed99d(0x1e0),{'enumerable':!![],'value':_0x540bd6});}:function(_0x48d52b,_0x54cefd){const _0x3e992f=a449_0x1dfdb6;_0x48d52b[_0x3e992f(0x1e0)]=_0x54cefd;}),__importStar=this&&this[a449_0x1dfdb6(0x1df)]||(function(){const _0x10451a=(function(){let _0x5474f8=!![];return function(_0x1738fa,_0x32e00c){const _0x368de5=_0x5474f8?function(){const _0x5cf2d3=a449_0x3dbc;if(_0x32e00c){const _0x252d66=_0x32e00c[_0x5cf2d3(0x1d7)](_0x1738fa,arguments);return _0x32e00c=null,_0x252d66;}}:function(){};return _0x5474f8=![],_0x368de5;};}()),_0x270956=_0x10451a(this,function(){const _0x4e5cfc=a449_0x3dbc;return _0x270956['toString']()['search'](_0x4e5cfc(0x1c7))[_0x4e5cfc(0x1d1)]()[_0x4e5cfc(0x1dc)](_0x270956)['search'](_0x4e5cfc(0x1c7));});_0x270956();var _0x256a9b=function(_0x4e9a91){const _0x48d0ba=a449_0x3dbc;return _0x256a9b=Object[_0x48d0ba(0x1c8)]||function(_0x1ceb72){const _0x31b94d=_0x48d0ba;var _0x4ed54f=[];for(var _0x487019 in _0x1ceb72)if(Object[_0x31b94d(0x1cd)]['hasOwnProperty'][_0x31b94d(0x1cc)](_0x1ceb72,_0x487019))_0x4ed54f[_0x4ed54f['length']]=_0x487019;return _0x4ed54f;},_0x256a9b(_0x4e9a91);};return function(_0x1a224a){const _0x58d2d6=a449_0x3dbc;if(_0x1a224a&&_0x1a224a[_0x58d2d6(0x1e3)])return _0x1a224a;var _0x5adbaa={};if(_0x1a224a!=null){for(var _0x5290fa=_0x256a9b(_0x1a224a),_0x480fde=0x0;_0x480fde<_0x5290fa['length'];_0x480fde++)if(_0x5290fa[_0x480fde]!=='default')__createBinding(_0x5adbaa,_0x1a224a,_0x5290fa[_0x480fde]);}return __setModuleDefault(_0x5adbaa,_0x1a224a),_0x5adbaa;};}()),__importDefault=this&&this[a449_0x1dfdb6(0x1c0)]||function(_0x59cb72){return _0x59cb72&&_0x59cb72['__esModule']?_0x59cb72:{'default':_0x59cb72};};Object[a449_0x1dfdb6(0x1c2)](exports,a449_0x1dfdb6(0x1e3),{'value':!![]}),exports[a449_0x1dfdb6(0x1d3)]=void 0x0;function a449_0x23eb(){const _0x28d8d6=['__esModule','1705614EIFCjU','schedule','../../models/Email','clientsecretsmtpauth','352354WNJRoq','format','15615dzMbTy','getOwnPropertyDescriptor','E-mail\x20agendado\x20e\x20salvo\x20com\x20sucesso','186538qQEcRF','E-mail\x20enviado\x20imediatamente','nodemailer','message','Erro\x20ao\x20enviar\x20e-mail:\x20','__importDefault','smtpport','defineProperty','createTransport','__setModuleDefault','create','128pLkleK','(((.+)+)+)+$','getOwnPropertyNames','Erro\x20ao\x20enviar\x20e-mail:','1293129XnYUHV','7ogwiEV','call','prototype','node-cron','configurable','smtpauth','toString','add','SendMail','moment','value','YYYY-MM-DDTHH:mm','apply','error','hour','Erro\x20ao\x20agendar\x20e-mail:\x20','__createBinding','constructor','usersmtpauth','findOne','__importStar','default','2303144sArbyT','13492872OcaAqR'];a449_0x23eb=function(){return _0x28d8d6;};return a449_0x23eb();}const nodemailer_1=__importDefault(require(a449_0x1dfdb6(0x1bd))),Setting_1=__importDefault(require('../../models/Setting')),Email_1=__importDefault(require(a449_0x1dfdb6(0x1e6))),cron=__importStar(require(a449_0x1dfdb6(0x1ce))),moment_1=__importDefault(require(a449_0x1dfdb6(0x1d4))),SendMail=async(_0xe2a709,_0x5e4848,_0x5be080,_0x1c1bd4,_0x58303d,_0x1632cb,_0x265ecc)=>{const _0x43a00d=a449_0x1dfdb6;try{const _0x1dbb3f=await Setting_1[_0x43a00d(0x1e0)][_0x43a00d(0x1de)]({'where':{'companyId':_0xe2a709,'key':_0x43a00d(0x1d0)}}),_0x260f27=await Setting_1[_0x43a00d(0x1e0)][_0x43a00d(0x1de)]({'where':{'companyId':_0xe2a709,'key':_0x43a00d(0x1dd)}}),_0x4f0a97=await Setting_1[_0x43a00d(0x1e0)][_0x43a00d(0x1de)]({'where':{'companyId':_0xe2a709,'key':_0x43a00d(0x1e7)}}),_0x12d50e=await Setting_1[_0x43a00d(0x1e0)][_0x43a00d(0x1de)]({'where':{'companyId':_0xe2a709,'key':_0x43a00d(0x1c1)}}),_0x4b45af=_0x1dbb3f[_0x43a00d(0x1d5)],_0x21edd7=_0x260f27['value'],_0x5be596=_0x4f0a97[_0x43a00d(0x1d5)],_0x2ab43e=_0x12d50e['value'],_0x395d2b=nodemailer_1['default'][_0x43a00d(0x1c3)]({'host':_0x4b45af,'port':Number(_0x2ab43e),'secure':![],'auth':{'user':_0x21edd7,'pass':_0x5be596}});async function _0x702de1(_0x83203c){const _0x4c5c73=_0x43a00d;try{const _0x1d4ffe={'from':_0x21edd7,'to':_0x5e4848,'subject':_0x1c1bd4,'text':_0x58303d};return await _0x395d2b['sendMail'](_0x1d4ffe),await Email_1[_0x4c5c73(0x1e0)][_0x4c5c73(0x1c5)]({'sender':_0x5e4848,'subject':_0x1c1bd4,'message':_0x58303d,'companyId':_0xe2a709}),{'message':_0x4c5c73(0x1ba)};}catch(_0x473088){console[_0x4c5c73(0x1d8)](_0x4c5c73(0x1c9),_0x473088);throw new Error(_0x4c5c73(0x1bf)+_0x473088);}}if(_0x265ecc)return cron[_0x43a00d(0x1e5)](_0x265ecc,()=>{const _0x2f716b=_0x43a00d,_0x20adcf=(0x0,moment_1[_0x2f716b(0x1e0)])()[_0x2f716b(0x1d2)](0x1,'hour')['format'](_0x2f716b(0x1d6));_0x702de1(_0x20adcf);}),{'message':'Agendamento\x20de\x20e-mail\x20realizado\x20com\x20sucesso'};else{const _0x2ee1cb=(0x0,moment_1[_0x43a00d(0x1e0)])()[_0x43a00d(0x1d2)](0x1,_0x43a00d(0x1d9))[_0x43a00d(0x1e9)](_0x43a00d(0x1d6));return _0x702de1(_0x2ee1cb),{'message':_0x43a00d(0x1bc)};}}catch(_0x2f9464){return console[_0x43a00d(0x1d8)]('Erro\x20ao\x20agendar\x20e-mail:',_0x2f9464),{'error':_0x43a00d(0x1da)+_0x2f9464[_0x43a00d(0x1be)]};}};exports[a449_0x1dfdb6(0x1d3)]=SendMail,exports['default']=exports[a449_0x1dfdb6(0x1d3)];