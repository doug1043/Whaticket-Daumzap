const a423_0x2f044c=a423_0x1135;function a423_0x1135(_0x45f067,_0x116b0b){const _0x25d3da=a423_0x1fad();return a423_0x1135=function(_0xf0f1ce,_0x141df8){_0xf0f1ce=_0xf0f1ce-0x1e7;let _0x1fad14=_0x25d3da[_0xf0f1ce];return _0x1fad14;},a423_0x1135(_0x45f067,_0x116b0b);}function a423_0x1fad(){const _0x4fde16=['smtpport','(((.+)+)+)+$','2309247cFEZOA','add','16BHVfaj','clientsecretsmtpauth','2382741cDUYDE','message','format','findOne','create','Agendamento\x20de\x20e-mail\x20realizado\x20com\x20sucesso','Erro\x20ao\x20agendar\x20e-mail:\x20','node-cron','default','search','../../models/Email','5072732PwWKsk','sendMail','schedule','constructor','hour','12944VjjZsX','__createBinding','createTransport','usersmtpauth','hasOwnProperty','140475EDPKCH','7522760uzPlSr','E-mail\x20enviado\x20imediatamente','smtpauth','E-mail\x20agendado\x20e\x20salvo\x20com\x20sucesso','Erro\x20ao\x20enviar\x20e-mail:\x20','__esModule','getOwnPropertyDescriptor','writable','error','value','__setModuleDefault','__importDefault','get','138TgNIkk','SendMail','defineProperty','184cWxTFL','Erro\x20ao\x20agendar\x20e-mail:','388828YKeNPL','Erro\x20ao\x20enviar\x20e-mail:'];a423_0x1fad=function(){return _0x4fde16;};return a423_0x1fad();}(function(_0x575498,_0x1e73b9){const _0x56d9fb=a423_0x1135,_0x2fa9df=_0x575498();while(!![]){try{const _0x2f1e40=parseInt(_0x56d9fb(0x1e7))/0x1*(-parseInt(_0x56d9fb(0x201))/0x2)+parseInt(_0x56d9fb(0x1f1))/0x3+parseInt(_0x56d9fb(0x1e9))/0x4+parseInt(_0x56d9fb(0x206))/0x5*(parseInt(_0x56d9fb(0x214))/0x6)+parseInt(_0x56d9fb(0x1fc))/0x7+parseInt(_0x56d9fb(0x1ef))/0x8*(parseInt(_0x56d9fb(0x1ed))/0x9)+-parseInt(_0x56d9fb(0x207))/0xa;if(_0x2f1e40===_0x1e73b9)break;else _0x2fa9df['push'](_0x2fa9df['shift']());}catch(_0x1fea35){_0x2fa9df['push'](_0x2fa9df['shift']());}}}(a423_0x1fad,0xcb365));const a423_0x141df8=(function(){let _0x26dd94=!![];return function(_0x2fd94b,_0x9d586d){const _0x348f57=_0x26dd94?function(){if(_0x9d586d){const _0x55db46=_0x9d586d['apply'](_0x2fd94b,arguments);return _0x9d586d=null,_0x55db46;}}:function(){};return _0x26dd94=![],_0x348f57;};}()),a423_0xf0f1ce=a423_0x141df8(this,function(){const _0x473fce=a423_0x1135;return a423_0xf0f1ce['toString']()[_0x473fce(0x1fa)](_0x473fce(0x1ec))['toString']()[_0x473fce(0x1ff)](a423_0xf0f1ce)['search'](_0x473fce(0x1ec));});a423_0xf0f1ce();'use strict';var __createBinding=this&&this[a423_0x2f044c(0x202)]||(Object[a423_0x2f044c(0x1f5)]?function(_0x5d2c92,_0x1d8b39,_0x47eb89,_0x2ad0e0){const _0x306f9c=a423_0x2f044c;if(_0x2ad0e0===undefined)_0x2ad0e0=_0x47eb89;var _0x2db81b=Object[_0x306f9c(0x20d)](_0x1d8b39,_0x47eb89);(!_0x2db81b||(_0x306f9c(0x213)in _0x2db81b?!_0x1d8b39[_0x306f9c(0x20c)]:_0x2db81b[_0x306f9c(0x20e)]||_0x2db81b['configurable']))&&(_0x2db81b={'enumerable':!![],'get':function(){return _0x1d8b39[_0x47eb89];}}),Object[_0x306f9c(0x216)](_0x5d2c92,_0x2ad0e0,_0x2db81b);}:function(_0x8467ce,_0x52a570,_0x57fdbb,_0x32e3e9){if(_0x32e3e9===undefined)_0x32e3e9=_0x57fdbb;_0x8467ce[_0x32e3e9]=_0x52a570[_0x57fdbb];}),__setModuleDefault=this&&this[a423_0x2f044c(0x211)]||(Object[a423_0x2f044c(0x1f5)]?function(_0x31e812,_0x31ef35){const _0x39f69e=a423_0x2f044c;Object[_0x39f69e(0x216)](_0x31e812,'default',{'enumerable':!![],'value':_0x31ef35});}:function(_0xfdcf8c,_0x26432e){const _0x542d63=a423_0x2f044c;_0xfdcf8c[_0x542d63(0x1f9)]=_0x26432e;}),__importStar=this&&this['__importStar']||function(_0x41ccad){const _0x462e60=a423_0x2f044c;if(_0x41ccad&&_0x41ccad[_0x462e60(0x20c)])return _0x41ccad;var _0x54687c={};if(_0x41ccad!=null){for(var _0x4cfcbb in _0x41ccad)if(_0x4cfcbb!==_0x462e60(0x1f9)&&Object['prototype'][_0x462e60(0x205)]['call'](_0x41ccad,_0x4cfcbb))__createBinding(_0x54687c,_0x41ccad,_0x4cfcbb);}return __setModuleDefault(_0x54687c,_0x41ccad),_0x54687c;},__importDefault=this&&this[a423_0x2f044c(0x212)]||function(_0x49864b){const _0x27a934=a423_0x2f044c;return _0x49864b&&_0x49864b[_0x27a934(0x20c)]?_0x49864b:{'default':_0x49864b};};Object[a423_0x2f044c(0x216)](exports,a423_0x2f044c(0x20c),{'value':!![]}),exports[a423_0x2f044c(0x215)]=void 0x0;const nodemailer_1=__importDefault(require('nodemailer')),Setting_1=__importDefault(require('../../models/Setting')),Email_1=__importDefault(require(a423_0x2f044c(0x1fb))),cron=__importStar(require(a423_0x2f044c(0x1f8))),moment_1=__importDefault(require('moment')),SendMail=async(_0x459986,_0x7df907,_0x5a0541,_0x18b52b,_0x2476ac,_0x245e66,_0x1005b8)=>{const _0x17f5fa=a423_0x2f044c;try{const _0x37d6b0=await Setting_1[_0x17f5fa(0x1f9)][_0x17f5fa(0x1f4)]({'where':{'companyId':_0x459986,'key':_0x17f5fa(0x209)}}),_0x1ce2e6=await Setting_1[_0x17f5fa(0x1f9)][_0x17f5fa(0x1f4)]({'where':{'companyId':_0x459986,'key':_0x17f5fa(0x204)}}),_0x4d0709=await Setting_1[_0x17f5fa(0x1f9)][_0x17f5fa(0x1f4)]({'where':{'companyId':_0x459986,'key':_0x17f5fa(0x1f0)}}),_0x4ae268=await Setting_1[_0x17f5fa(0x1f9)][_0x17f5fa(0x1f4)]({'where':{'companyId':_0x459986,'key':_0x17f5fa(0x1eb)}}),_0x1a1374=_0x37d6b0[_0x17f5fa(0x210)],_0x23761e=_0x1ce2e6[_0x17f5fa(0x210)],_0xceaee=_0x4d0709[_0x17f5fa(0x210)],_0x46fb13=_0x4ae268['value'],_0x37ebaf=nodemailer_1[_0x17f5fa(0x1f9)][_0x17f5fa(0x203)]({'host':_0x1a1374,'port':Number(_0x46fb13),'secure':![],'auth':{'user':_0x23761e,'pass':_0xceaee}});async function _0x2c49ec(_0x506758){const _0x70ab4e=_0x17f5fa;try{const _0x21127d={'from':_0x23761e,'to':_0x7df907,'subject':_0x18b52b,'text':_0x2476ac};return await _0x37ebaf[_0x70ab4e(0x1fd)](_0x21127d),await Email_1[_0x70ab4e(0x1f9)][_0x70ab4e(0x1f5)]({'sender':_0x7df907,'subject':_0x18b52b,'message':_0x2476ac,'companyId':_0x459986}),{'message':_0x70ab4e(0x20a)};}catch(_0xefe565){console[_0x70ab4e(0x20f)](_0x70ab4e(0x1ea),_0xefe565);throw new Error(_0x70ab4e(0x20b)+_0xefe565);}}if(_0x1005b8)return cron[_0x17f5fa(0x1fe)](_0x1005b8,()=>{const _0x164d0f=_0x17f5fa,_0x39e71d=(0x0,moment_1[_0x164d0f(0x1f9)])()[_0x164d0f(0x1ee)](0x1,'hour')[_0x164d0f(0x1f3)]('YYYY-MM-DDTHH:mm');_0x2c49ec(_0x39e71d);}),{'message':_0x17f5fa(0x1f6)};else{const _0x52a84b=(0x0,moment_1[_0x17f5fa(0x1f9)])()[_0x17f5fa(0x1ee)](0x1,_0x17f5fa(0x200))['format']('YYYY-MM-DDTHH:mm');return _0x2c49ec(_0x52a84b),{'message':_0x17f5fa(0x208)};}}catch(_0x3011b8){return console[_0x17f5fa(0x20f)](_0x17f5fa(0x1e8),_0x3011b8),{'error':_0x17f5fa(0x1f7)+_0x3011b8[_0x17f5fa(0x1f2)]};}};exports['SendMail']=SendMail,exports[a423_0x2f044c(0x1f9)]=exports[a423_0x2f044c(0x215)];