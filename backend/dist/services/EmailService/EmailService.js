const a424_0x123f73=a424_0x4964;(function(_0x2f6fdf,_0x49c1e2){const _0x3f54b2=a424_0x4964,_0x59782a=_0x2f6fdf();while(!![]){try{const _0x4617cf=-parseInt(_0x3f54b2(0x12e))/0x1*(-parseInt(_0x3f54b2(0x12d))/0x2)+parseInt(_0x3f54b2(0x143))/0x3*(parseInt(_0x3f54b2(0x131))/0x4)+-parseInt(_0x3f54b2(0x147))/0x5*(-parseInt(_0x3f54b2(0x135))/0x6)+-parseInt(_0x3f54b2(0x12f))/0x7+-parseInt(_0x3f54b2(0x144))/0x8*(parseInt(_0x3f54b2(0x13d))/0x9)+-parseInt(_0x3f54b2(0x155))/0xa+parseInt(_0x3f54b2(0x149))/0xb*(parseInt(_0x3f54b2(0x14f))/0xc);if(_0x4617cf===_0x49c1e2)break;else _0x59782a['push'](_0x59782a['shift']());}catch(_0x26e146){_0x59782a['push'](_0x59782a['shift']());}}}(a424_0x1125,0xe989e));const a424_0x1c1223=(function(){let _0x5d236b=!![];return function(_0x5cecfe,_0x4380be){const _0x3b7c14=_0x5d236b?function(){const _0x55188d=a424_0x4964;if(_0x4380be){const _0x2fb7e6=_0x4380be[_0x55188d(0x137)](_0x5cecfe,arguments);return _0x4380be=null,_0x2fb7e6;}}:function(){};return _0x5d236b=![],_0x3b7c14;};}()),a424_0xeffe71=a424_0x1c1223(this,function(){const _0x39fdd8=a424_0x4964;return a424_0xeffe71[_0x39fdd8(0x136)]()[_0x39fdd8(0x142)](_0x39fdd8(0x158))[_0x39fdd8(0x136)]()[_0x39fdd8(0x13b)](a424_0xeffe71)[_0x39fdd8(0x142)]('(((.+)+)+)+$');});a424_0xeffe71();'use strict';var __createBinding=this&&this[a424_0x123f73(0x146)]||(Object['create']?function(_0x86dbbd,_0x3adef7,_0x2074cd,_0x5c6ef4){const _0x4033a4=a424_0x123f73;if(_0x5c6ef4===undefined)_0x5c6ef4=_0x2074cd;var _0xdef75e=Object[_0x4033a4(0x141)](_0x3adef7,_0x2074cd);(!_0xdef75e||('get'in _0xdef75e?!_0x3adef7[_0x4033a4(0x12c)]:_0xdef75e[_0x4033a4(0x13e)]||_0xdef75e[_0x4033a4(0x151)]))&&(_0xdef75e={'enumerable':!![],'get':function(){return _0x3adef7[_0x2074cd];}}),Object[_0x4033a4(0x126)](_0x86dbbd,_0x5c6ef4,_0xdef75e);}:function(_0x51645d,_0x35ae38,_0x2c7b1e,_0x19d1c5){if(_0x19d1c5===undefined)_0x19d1c5=_0x2c7b1e;_0x51645d[_0x19d1c5]=_0x35ae38[_0x2c7b1e];}),__setModuleDefault=this&&this[a424_0x123f73(0x134)]||(Object[a424_0x123f73(0x130)]?function(_0x28ff15,_0x597cae){const _0x4036c7=a424_0x123f73;Object[_0x4036c7(0x126)](_0x28ff15,_0x4036c7(0x159),{'enumerable':!![],'value':_0x597cae});}:function(_0x8f024b,_0x32db11){const _0x38062f=a424_0x123f73;_0x8f024b[_0x38062f(0x159)]=_0x32db11;}),__importStar=this&&this[a424_0x123f73(0x14e)]||function(_0x1dcad3){const _0x5bb30b=a424_0x123f73;if(_0x1dcad3&&_0x1dcad3[_0x5bb30b(0x12c)])return _0x1dcad3;var _0x2d3b90={};if(_0x1dcad3!=null){for(var _0x3a82ba in _0x1dcad3)if(_0x3a82ba!=='default'&&Object[_0x5bb30b(0x129)][_0x5bb30b(0x133)]['call'](_0x1dcad3,_0x3a82ba))__createBinding(_0x2d3b90,_0x1dcad3,_0x3a82ba);}return __setModuleDefault(_0x2d3b90,_0x1dcad3),_0x2d3b90;},__importDefault=this&&this[a424_0x123f73(0x15a)]||function(_0x137d6d){const _0x15094d=a424_0x123f73;return _0x137d6d&&_0x137d6d[_0x15094d(0x12c)]?_0x137d6d:{'default':_0x137d6d};};Object[a424_0x123f73(0x126)](exports,a424_0x123f73(0x12c),{'value':!![]}),exports[a424_0x123f73(0x14d)]=void 0x0;const nodemailer_1=__importDefault(require(a424_0x123f73(0x14a))),Setting_1=__importDefault(require('../../models/Setting')),Email_1=__importDefault(require(a424_0x123f73(0x156))),cron=__importStar(require(a424_0x123f73(0x13c))),moment_1=__importDefault(require(a424_0x123f73(0x12b))),SendMail=async(_0x578140,_0x22a6eb,_0x79e909,_0x427252,_0x168b59,_0x30ef92,_0x6033b3)=>{const _0x2bb5aa=a424_0x123f73;try{const _0x46f30d=await Setting_1['default'][_0x2bb5aa(0x132)]({'where':{'companyId':_0x578140,'key':_0x2bb5aa(0x150)}}),_0x21ee61=await Setting_1[_0x2bb5aa(0x159)]['findOne']({'where':{'companyId':_0x578140,'key':'usersmtpauth'}}),_0x10469d=await Setting_1[_0x2bb5aa(0x159)][_0x2bb5aa(0x132)]({'where':{'companyId':_0x578140,'key':'clientsecretsmtpauth'}}),_0x4f88f3=await Setting_1[_0x2bb5aa(0x159)]['findOne']({'where':{'companyId':_0x578140,'key':_0x2bb5aa(0x13f)}}),_0x14094c=_0x46f30d[_0x2bb5aa(0x145)],_0x288730=_0x21ee61[_0x2bb5aa(0x145)],_0x3042cc=_0x10469d['value'],_0x58c655=_0x4f88f3['value'],_0x57b418=nodemailer_1[_0x2bb5aa(0x159)][_0x2bb5aa(0x152)]({'host':_0x14094c,'port':Number(_0x58c655),'secure':![],'auth':{'user':_0x288730,'pass':_0x3042cc}});async function _0xbbc8fd(_0x16f880){const _0xaa4191=_0x2bb5aa;try{const _0x3f2fc0={'from':_0x288730,'to':_0x22a6eb,'subject':_0x427252,'text':_0x168b59};return await _0x57b418[_0xaa4191(0x12a)](_0x3f2fc0),await Email_1[_0xaa4191(0x159)][_0xaa4191(0x130)]({'sender':_0x22a6eb,'subject':_0x427252,'message':_0x168b59,'companyId':_0x578140}),{'message':_0xaa4191(0x154)};}catch(_0xeebd0e){console[_0xaa4191(0x14b)](_0xaa4191(0x127),_0xeebd0e);throw new Error(_0xaa4191(0x153)+_0xeebd0e);}}if(_0x6033b3)return cron[_0x2bb5aa(0x140)](_0x6033b3,()=>{const _0x578539=_0x2bb5aa,_0x4d9ef4=(0x0,moment_1[_0x578539(0x159)])()[_0x578539(0x13a)](0x1,'hour')[_0x578539(0x14c)](_0x578539(0x148));_0xbbc8fd(_0x4d9ef4);}),{'message':_0x2bb5aa(0x138)};else{const _0x3550b0=(0x0,moment_1[_0x2bb5aa(0x159)])()['add'](0x1,_0x2bb5aa(0x157))[_0x2bb5aa(0x14c)](_0x2bb5aa(0x148));return _0xbbc8fd(_0x3550b0),{'message':'E-mail\x20enviado\x20imediatamente'};}}catch(_0xcd9971){return console['error']('Erro\x20ao\x20agendar\x20e-mail:',_0xcd9971),{'error':_0x2bb5aa(0x128)+_0xcd9971[_0x2bb5aa(0x139)]};}};function a424_0x1125(){const _0x2b454e=['findOne','hasOwnProperty','__setModuleDefault','6414xIkTRo','toString','apply','Agendamento\x20de\x20e-mail\x20realizado\x20com\x20sucesso','message','add','constructor','node-cron','387DrkQao','writable','smtpport','schedule','getOwnPropertyDescriptor','search','1415049RaMORx','352056wUtaPz','value','__createBinding','3390zPanph','YYYY-MM-DDTHH:mm','10835rOwEIl','nodemailer','error','format','SendMail','__importStar','33636tEuIvf','smtpauth','configurable','createTransport','Erro\x20ao\x20enviar\x20e-mail:\x20','E-mail\x20agendado\x20e\x20salvo\x20com\x20sucesso','18814490zflHyq','../../models/Email','hour','(((.+)+)+)+$','default','__importDefault','defineProperty','Erro\x20ao\x20enviar\x20e-mail:','Erro\x20ao\x20agendar\x20e-mail:\x20','prototype','sendMail','moment','__esModule','16hUHZLQ','109698bafaLj','732760AJhKmQ','create','4iYUKFP'];a424_0x1125=function(){return _0x2b454e;};return a424_0x1125();}function a424_0x4964(_0x497009,_0x799e59){const _0x5793ca=a424_0x1125();return a424_0x4964=function(_0xeffe71,_0x1c1223){_0xeffe71=_0xeffe71-0x126;let _0x112504=_0x5793ca[_0xeffe71];return _0x112504;},a424_0x4964(_0x497009,_0x799e59);}exports[a424_0x123f73(0x14d)]=SendMail,exports[a424_0x123f73(0x159)]=exports['SendMail'];