'use strict';const a455_0x5b2a2f=a455_0x3755;function a455_0x3755(_0x3dc826,_0x487175){const _0x4574e0=a455_0x5988();return a455_0x3755=function(_0x4c1d35,_0x5e9e3b){_0x4c1d35=_0x4c1d35-0x85;let _0x59887a=_0x4574e0[_0x4c1d35];return _0x59887a;},a455_0x3755(_0x3dc826,_0x487175);}(function(_0x50ca89,_0x23e01d){const _0x44633a=a455_0x3755,_0x23bcd6=_0x50ca89();while(!![]){try{const _0x4da977=parseInt(_0x44633a(0xb8))/0x1*(-parseInt(_0x44633a(0xa1))/0x2)+-parseInt(_0x44633a(0x9b))/0x3*(parseInt(_0x44633a(0x97))/0x4)+parseInt(_0x44633a(0x85))/0x5+-parseInt(_0x44633a(0x90))/0x6+-parseInt(_0x44633a(0xb5))/0x7*(-parseInt(_0x44633a(0xb3))/0x8)+parseInt(_0x44633a(0xac))/0x9*(-parseInt(_0x44633a(0x88))/0xa)+parseInt(_0x44633a(0x87))/0xb*(parseInt(_0x44633a(0x8e))/0xc);if(_0x4da977===_0x23e01d)break;else _0x23bcd6['push'](_0x23bcd6['shift']());}catch(_0x155262){_0x23bcd6['push'](_0x23bcd6['shift']());}}}(a455_0x5988,0xb0c3e));function a455_0x5988(){const _0x2d4566=['Erro\x20ao\x20enviar\x20e-mail:','findOne','constructor','Erro\x20ao\x20agendar\x20e-mail:','nodemailer','348ddlwUS','call','moment','get','23271hmhqyf','E-mail\x20enviado\x20imediatamente','SendMail','toString','value','smtpport','2HCSsPD','default','hasOwnProperty','hour','../../models/Setting','Agendamento\x20de\x20e-mail\x20realizado\x20com\x20sucesso','defineProperty','length','__createBinding','prototype','__importDefault','523206JSbxTe','YYYY-MM-DDTHH:mm','node-cron','apply','usersmtpauth','../../models/Email','Erro\x20ao\x20enviar\x20e-mail:\x20','3298656MzUXHx','sendMail','21dpmKoz','message','create','890237vFvzVE','schedule','format','add','82890WTIrMf','getOwnPropertyNames','44igjHWz','240qPkPiU','error','getOwnPropertyDescriptor','(((.+)+)+)+$','search','__setModuleDefault','8934372WLauAO','__esModule','3284136JzHsKk','clientsecretsmtpauth'];a455_0x5988=function(){return _0x2d4566;};return a455_0x5988();}var __createBinding=this&&this[a455_0x5b2a2f(0xa9)]||(Object[a455_0x5b2a2f(0xb7)]?function(_0x971ee4,_0x5e323a,_0xd7c566,_0x28296d){const _0x1cef05=a455_0x5b2a2f;if(_0x28296d===undefined)_0x28296d=_0xd7c566;var _0x42e89d=Object[_0x1cef05(0x8a)](_0x5e323a,_0xd7c566);(!_0x42e89d||(_0x1cef05(0x9a)in _0x42e89d?!_0x5e323a['__esModule']:_0x42e89d['writable']||_0x42e89d['configurable']))&&(_0x42e89d={'enumerable':!![],'get':function(){return _0x5e323a[_0xd7c566];}}),Object[_0x1cef05(0xa7)](_0x971ee4,_0x28296d,_0x42e89d);}:function(_0x119578,_0x57c717,_0x2404e8,_0x434dab){if(_0x434dab===undefined)_0x434dab=_0x2404e8;_0x119578[_0x434dab]=_0x57c717[_0x2404e8];}),__setModuleDefault=this&&this[a455_0x5b2a2f(0x8d)]||(Object[a455_0x5b2a2f(0xb7)]?function(_0x2824a0,_0x4591cf){const _0x1945a5=a455_0x5b2a2f;Object[_0x1945a5(0xa7)](_0x2824a0,_0x1945a5(0xa2),{'enumerable':!![],'value':_0x4591cf});}:function(_0x571c93,_0x538164){_0x571c93['default']=_0x538164;}),__importStar=this&&this['__importStar']||(function(){const _0x4713c7=(function(){let _0x4353dc=!![];return function(_0x4c179a,_0x299c20){const _0x48aa74=_0x4353dc?function(){const _0x325238=a455_0x3755;if(_0x299c20){const _0x351a9b=_0x299c20[_0x325238(0xaf)](_0x4c179a,arguments);return _0x299c20=null,_0x351a9b;}}:function(){};return _0x4353dc=![],_0x48aa74;};}()),_0x54433b=_0x4713c7(this,function(){const _0x2f999a=a455_0x3755;return _0x54433b[_0x2f999a(0x9e)]()[_0x2f999a(0x8c)](_0x2f999a(0x8b))[_0x2f999a(0x9e)]()[_0x2f999a(0x94)](_0x54433b)[_0x2f999a(0x8c)](_0x2f999a(0x8b));});_0x54433b();var _0x384d29=function(_0x1e1109){const _0x29e28c=a455_0x3755;return _0x384d29=Object[_0x29e28c(0x86)]||function(_0x6a3ec7){const _0x3e5af4=_0x29e28c;var _0x352d27=[];for(var _0x5886e7 in _0x6a3ec7)if(Object[_0x3e5af4(0xaa)][_0x3e5af4(0xa3)][_0x3e5af4(0x98)](_0x6a3ec7,_0x5886e7))_0x352d27[_0x352d27[_0x3e5af4(0xa8)]]=_0x5886e7;return _0x352d27;},_0x384d29(_0x1e1109);};return function(_0x33b38c){const _0x3c6bef=a455_0x3755;if(_0x33b38c&&_0x33b38c[_0x3c6bef(0x8f)])return _0x33b38c;var _0x43c146={};if(_0x33b38c!=null){for(var _0x18215e=_0x384d29(_0x33b38c),_0x2b2772=0x0;_0x2b2772<_0x18215e[_0x3c6bef(0xa8)];_0x2b2772++)if(_0x18215e[_0x2b2772]!==_0x3c6bef(0xa2))__createBinding(_0x43c146,_0x33b38c,_0x18215e[_0x2b2772]);}return __setModuleDefault(_0x43c146,_0x33b38c),_0x43c146;};}()),__importDefault=this&&this[a455_0x5b2a2f(0xab)]||function(_0x58de9c){const _0x4b76b7=a455_0x5b2a2f;return _0x58de9c&&_0x58de9c[_0x4b76b7(0x8f)]?_0x58de9c:{'default':_0x58de9c};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a455_0x5b2a2f(0x9d)]=void 0x0;const nodemailer_1=__importDefault(require(a455_0x5b2a2f(0x96))),Setting_1=__importDefault(require(a455_0x5b2a2f(0xa5))),Email_1=__importDefault(require(a455_0x5b2a2f(0xb1))),cron=__importStar(require(a455_0x5b2a2f(0xae))),moment_1=__importDefault(require(a455_0x5b2a2f(0x99))),SendMail=async(_0x463159,_0x511596,_0x2b278c,_0x23c3c2,_0x4cf153,_0x5ac2fa,_0x34edc5)=>{const _0x407340=a455_0x5b2a2f;try{const _0x4d7934=await Setting_1['default']['findOne']({'where':{'companyId':_0x463159,'key':'smtpauth'}}),_0xbca785=await Setting_1['default'][_0x407340(0x93)]({'where':{'companyId':_0x463159,'key':_0x407340(0xb0)}}),_0x5b8f7d=await Setting_1[_0x407340(0xa2)][_0x407340(0x93)]({'where':{'companyId':_0x463159,'key':_0x407340(0x91)}}),_0x4eedf3=await Setting_1[_0x407340(0xa2)]['findOne']({'where':{'companyId':_0x463159,'key':_0x407340(0xa0)}}),_0xbcd3c1=_0x4d7934[_0x407340(0x9f)],_0x2c37e7=_0xbca785['value'],_0x30e6b8=_0x5b8f7d[_0x407340(0x9f)],_0x39ce7b=_0x4eedf3['value'],_0x5bd92c=nodemailer_1[_0x407340(0xa2)]['createTransport']({'host':_0xbcd3c1,'port':Number(_0x39ce7b),'secure':![],'auth':{'user':_0x2c37e7,'pass':_0x30e6b8}});async function _0x155f39(_0x325dd0){const _0x51d820=_0x407340;try{const _0x16a66b={'from':_0x2c37e7,'to':_0x511596,'subject':_0x23c3c2,'text':_0x4cf153};return await _0x5bd92c[_0x51d820(0xb4)](_0x16a66b),await Email_1[_0x51d820(0xa2)][_0x51d820(0xb7)]({'sender':_0x511596,'subject':_0x23c3c2,'message':_0x4cf153,'companyId':_0x463159}),{'message':'E-mail\x20agendado\x20e\x20salvo\x20com\x20sucesso'};}catch(_0x367094){console[_0x51d820(0x89)](_0x51d820(0x92),_0x367094);throw new Error(_0x51d820(0xb2)+_0x367094);}}if(_0x34edc5)return cron[_0x407340(0xb9)](_0x34edc5,()=>{const _0x2416ee=_0x407340,_0x18725a=(0x0,moment_1[_0x2416ee(0xa2)])()[_0x2416ee(0xbb)](0x1,'hour')[_0x2416ee(0xba)](_0x2416ee(0xad));_0x155f39(_0x18725a);}),{'message':_0x407340(0xa6)};else{const _0x382b40=(0x0,moment_1['default'])()[_0x407340(0xbb)](0x1,_0x407340(0xa4))[_0x407340(0xba)](_0x407340(0xad));return _0x155f39(_0x382b40),{'message':_0x407340(0x9c)};}}catch(_0x400de6){return console[_0x407340(0x89)](_0x407340(0x95),_0x400de6),{'error':'Erro\x20ao\x20agendar\x20e-mail:\x20'+_0x400de6[_0x407340(0xb6)]};}};exports[a455_0x5b2a2f(0x9d)]=SendMail,exports[a455_0x5b2a2f(0xa2)]=exports[a455_0x5b2a2f(0x9d)];