function a423_0x4679(){const _0x1eb312=['__importStar','303nDZtey','toString','E-mail\x20enviado\x20imediatamente','4807320rqeUPa','hour','create','node-cron','396ffwTHt','276iiFiyt','value','__createBinding','4oMiMPy','sendMail','search','21014eMstMq','get','moment','3087895YzonFg','Agendamento\x20de\x20e-mail\x20realizado\x20com\x20sucesso','392107ZDDIQw','findOne','144380muPrgm','add','Erro\x20ao\x20enviar\x20e-mail:','error','1544iMrftL','SendMail','684926tOtoBd','(((.+)+)+)+$','nodemailer','E-mail\x20agendado\x20e\x20salvo\x20com\x20sucesso','message','format','__esModule','__importDefault','apply','YYYY-MM-DDTHH:mm','7996uZDbcS','../../models/Email','Erro\x20ao\x20agendar\x20e-mail:','createTransport','smtpauth','prototype','writable','usersmtpauth','schedule','default','hasOwnProperty','smtpport','defineProperty','getOwnPropertyDescriptor'];a423_0x4679=function(){return _0x1eb312;};return a423_0x4679();}const a423_0x4ed15e=a423_0x3fcc;function a423_0x3fcc(_0x2698f6,_0x5b8838){const _0x215f86=a423_0x4679();return a423_0x3fcc=function(_0x3b31b6,_0x1e6cb6){_0x3b31b6=_0x3b31b6-0x154;let _0x467900=_0x215f86[_0x3b31b6];return _0x467900;},a423_0x3fcc(_0x2698f6,_0x5b8838);}(function(_0x252c38,_0x41e875){const _0x2cd523=a423_0x3fcc,_0x37bfcf=_0x252c38();while(!![]){try{const _0x32008f=-parseInt(_0x2cd523(0x171))/0x1+-parseInt(_0x2cd523(0x183))/0x2*(parseInt(_0x2cd523(0x15e))/0x3)+-parseInt(_0x2cd523(0x169))/0x4*(-parseInt(_0x2cd523(0x16f))/0x5)+parseInt(_0x2cd523(0x161))/0x6+parseInt(_0x2cd523(0x16c))/0x7*(parseInt(_0x2cd523(0x177))/0x8)+parseInt(_0x2cd523(0x165))/0x9*(parseInt(_0x2cd523(0x173))/0xa)+-parseInt(_0x2cd523(0x179))/0xb*(parseInt(_0x2cd523(0x166))/0xc);if(_0x32008f===_0x41e875)break;else _0x37bfcf['push'](_0x37bfcf['shift']());}catch(_0x46a250){_0x37bfcf['push'](_0x37bfcf['shift']());}}}(a423_0x4679,0x62fba));const a423_0x1e6cb6=(function(){let _0x5f4ade=!![];return function(_0x5f3e77,_0x1c6799){const _0x3601b5=_0x5f4ade?function(){const _0x43db8e=a423_0x3fcc;if(_0x1c6799){const _0x260eb9=_0x1c6799[_0x43db8e(0x181)](_0x5f3e77,arguments);return _0x1c6799=null,_0x260eb9;}}:function(){};return _0x5f4ade=![],_0x3601b5;};}()),a423_0x3b31b6=a423_0x1e6cb6(this,function(){const _0x1040d2=a423_0x3fcc;return a423_0x3b31b6[_0x1040d2(0x15f)]()[_0x1040d2(0x16b)](_0x1040d2(0x17a))[_0x1040d2(0x15f)]()['constructor'](a423_0x3b31b6)[_0x1040d2(0x16b)](_0x1040d2(0x17a));});a423_0x3b31b6();'use strict';var __createBinding=this&&this[a423_0x4ed15e(0x168)]||(Object[a423_0x4ed15e(0x163)]?function(_0x5bdbf0,_0x1f2824,_0x835c55,_0x7ab89d){const _0x2daeeb=a423_0x4ed15e;if(_0x7ab89d===undefined)_0x7ab89d=_0x835c55;var _0x390073=Object[_0x2daeeb(0x15c)](_0x1f2824,_0x835c55);(!_0x390073||(_0x2daeeb(0x16d)in _0x390073?!_0x1f2824[_0x2daeeb(0x17f)]:_0x390073[_0x2daeeb(0x155)]||_0x390073['configurable']))&&(_0x390073={'enumerable':!![],'get':function(){return _0x1f2824[_0x835c55];}}),Object[_0x2daeeb(0x15b)](_0x5bdbf0,_0x7ab89d,_0x390073);}:function(_0x68d217,_0x30eef3,_0x3091e8,_0x1a9a04){if(_0x1a9a04===undefined)_0x1a9a04=_0x3091e8;_0x68d217[_0x1a9a04]=_0x30eef3[_0x3091e8];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x584b3b,_0x3d705e){const _0x1402f7=a423_0x4ed15e;Object[_0x1402f7(0x15b)](_0x584b3b,_0x1402f7(0x158),{'enumerable':!![],'value':_0x3d705e});}:function(_0x189801,_0x256855){const _0x1521a7=a423_0x4ed15e;_0x189801[_0x1521a7(0x158)]=_0x256855;}),__importStar=this&&this[a423_0x4ed15e(0x15d)]||function(_0xbb954e){const _0x8791=a423_0x4ed15e;if(_0xbb954e&&_0xbb954e[_0x8791(0x17f)])return _0xbb954e;var _0x3ec50d={};if(_0xbb954e!=null){for(var _0x4a1107 in _0xbb954e)if(_0x4a1107!==_0x8791(0x158)&&Object[_0x8791(0x154)][_0x8791(0x159)]['call'](_0xbb954e,_0x4a1107))__createBinding(_0x3ec50d,_0xbb954e,_0x4a1107);}return __setModuleDefault(_0x3ec50d,_0xbb954e),_0x3ec50d;},__importDefault=this&&this[a423_0x4ed15e(0x180)]||function(_0x4d9945){const _0x404f72=a423_0x4ed15e;return _0x4d9945&&_0x4d9945[_0x404f72(0x17f)]?_0x4d9945:{'default':_0x4d9945};};Object['defineProperty'](exports,a423_0x4ed15e(0x17f),{'value':!![]}),exports[a423_0x4ed15e(0x178)]=void 0x0;const nodemailer_1=__importDefault(require(a423_0x4ed15e(0x17b))),Setting_1=__importDefault(require('../../models/Setting')),Email_1=__importDefault(require(a423_0x4ed15e(0x184))),cron=__importStar(require(a423_0x4ed15e(0x164))),moment_1=__importDefault(require(a423_0x4ed15e(0x16e))),SendMail=async(_0x5469d9,_0x573bf8,_0x227a19,_0x502792,_0x36fcf8,_0x36d79b,_0x1bd6fb)=>{const _0x3cc89b=a423_0x4ed15e;try{const _0x368071=await Setting_1[_0x3cc89b(0x158)][_0x3cc89b(0x172)]({'where':{'companyId':_0x5469d9,'key':_0x3cc89b(0x187)}}),_0x5e1a2e=await Setting_1[_0x3cc89b(0x158)][_0x3cc89b(0x172)]({'where':{'companyId':_0x5469d9,'key':_0x3cc89b(0x156)}}),_0x53b579=await Setting_1[_0x3cc89b(0x158)][_0x3cc89b(0x172)]({'where':{'companyId':_0x5469d9,'key':'clientsecretsmtpauth'}}),_0x492f1b=await Setting_1[_0x3cc89b(0x158)][_0x3cc89b(0x172)]({'where':{'companyId':_0x5469d9,'key':_0x3cc89b(0x15a)}}),_0x574e8b=_0x368071[_0x3cc89b(0x167)],_0x3a8f5d=_0x5e1a2e[_0x3cc89b(0x167)],_0x415c06=_0x53b579['value'],_0x1ec4ee=_0x492f1b['value'],_0xb573ca=nodemailer_1[_0x3cc89b(0x158)][_0x3cc89b(0x186)]({'host':_0x574e8b,'port':Number(_0x1ec4ee),'secure':![],'auth':{'user':_0x3a8f5d,'pass':_0x415c06}});async function _0x209c13(_0x1aea42){const _0x6b26bc=_0x3cc89b;try{const _0x2a33f3={'from':_0x3a8f5d,'to':_0x573bf8,'subject':_0x502792,'text':_0x36fcf8};return await _0xb573ca[_0x6b26bc(0x16a)](_0x2a33f3),await Email_1[_0x6b26bc(0x158)][_0x6b26bc(0x163)]({'sender':_0x573bf8,'subject':_0x502792,'message':_0x36fcf8,'companyId':_0x5469d9}),{'message':_0x6b26bc(0x17c)};}catch(_0x423f81){console[_0x6b26bc(0x176)](_0x6b26bc(0x175),_0x423f81);throw new Error('Erro\x20ao\x20enviar\x20e-mail:\x20'+_0x423f81);}}if(_0x1bd6fb)return cron[_0x3cc89b(0x157)](_0x1bd6fb,()=>{const _0x221fee=_0x3cc89b,_0x541b4e=(0x0,moment_1[_0x221fee(0x158)])()['add'](0x1,_0x221fee(0x162))[_0x221fee(0x17e)]('YYYY-MM-DDTHH:mm');_0x209c13(_0x541b4e);}),{'message':_0x3cc89b(0x170)};else{const _0x290806=(0x0,moment_1['default'])()[_0x3cc89b(0x174)](0x1,_0x3cc89b(0x162))[_0x3cc89b(0x17e)](_0x3cc89b(0x182));return _0x209c13(_0x290806),{'message':_0x3cc89b(0x160)};}}catch(_0x54277e){return console[_0x3cc89b(0x176)](_0x3cc89b(0x185),_0x54277e),{'error':'Erro\x20ao\x20agendar\x20e-mail:\x20'+_0x54277e[_0x3cc89b(0x17d)]};}};exports[a423_0x4ed15e(0x178)]=SendMail,exports[a423_0x4ed15e(0x158)]=exports['SendMail'];