function a421_0x51c4(_0xabfd47,_0x36d51e){const _0x4834d1=a421_0x49dc();return a421_0x51c4=function(_0x211be5,_0x425133){_0x211be5=_0x211be5-0x108;let _0x49dc58=_0x4834d1[_0x211be5];return _0x49dc58;},a421_0x51c4(_0xabfd47,_0x36d51e);}const a421_0x3835d3=a421_0x51c4;(function(_0x52ad26,_0x463ec2){const _0x9908a1=a421_0x51c4,_0x2ab07e=_0x52ad26();while(!![]){try{const _0x1919ab=parseInt(_0x9908a1(0x122))/0x1+parseInt(_0x9908a1(0x136))/0x2*(parseInt(_0x9908a1(0x128))/0x3)+-parseInt(_0x9908a1(0x10f))/0x4*(-parseInt(_0x9908a1(0x11c))/0x5)+-parseInt(_0x9908a1(0x110))/0x6+parseInt(_0x9908a1(0x113))/0x7+-parseInt(_0x9908a1(0x123))/0x8+-parseInt(_0x9908a1(0x11b))/0x9*(parseInt(_0x9908a1(0x13a))/0xa);if(_0x1919ab===_0x463ec2)break;else _0x2ab07e['push'](_0x2ab07e['shift']());}catch(_0x3b40ef){_0x2ab07e['push'](_0x2ab07e['shift']());}}}(a421_0x49dc,0xbd1f4));const a421_0x425133=(function(){let _0x20398c=!![];return function(_0x4f71c9,_0x5d2315){const _0x4b8afb=_0x20398c?function(){const _0x5647a2=a421_0x51c4;if(_0x5d2315){const _0x5a14ed=_0x5d2315[_0x5647a2(0x11d)](_0x4f71c9,arguments);return _0x5d2315=null,_0x5a14ed;}}:function(){};return _0x20398c=![],_0x4b8afb;};}()),a421_0x211be5=a421_0x425133(this,function(){const _0x90ede8=a421_0x51c4;return a421_0x211be5[_0x90ede8(0x117)]()['search'](_0x90ede8(0x10d))['toString']()[_0x90ede8(0x115)](a421_0x211be5)[_0x90ede8(0x12b)](_0x90ede8(0x10d));});a421_0x211be5();'use strict';var __createBinding=this&&this[a421_0x3835d3(0x135)]||(Object[a421_0x3835d3(0x126)]?function(_0x3ff55a,_0x4f0cf4,_0xa0143b,_0x5678ec){const _0x6d3c59=a421_0x3835d3;if(_0x5678ec===undefined)_0x5678ec=_0xa0143b;var _0x2e08eb=Object[_0x6d3c59(0x125)](_0x4f0cf4,_0xa0143b);(!_0x2e08eb||(_0x6d3c59(0x124)in _0x2e08eb?!_0x4f0cf4[_0x6d3c59(0x116)]:_0x2e08eb[_0x6d3c59(0x133)]||_0x2e08eb[_0x6d3c59(0x112)]))&&(_0x2e08eb={'enumerable':!![],'get':function(){return _0x4f0cf4[_0xa0143b];}}),Object['defineProperty'](_0x3ff55a,_0x5678ec,_0x2e08eb);}:function(_0x5df2be,_0x4049b0,_0x4e1fb1,_0x4cd065){if(_0x4cd065===undefined)_0x4cd065=_0x4e1fb1;_0x5df2be[_0x4cd065]=_0x4049b0[_0x4e1fb1];}),__setModuleDefault=this&&this[a421_0x3835d3(0x10c)]||(Object[a421_0x3835d3(0x126)]?function(_0x2a1150,_0xa5b5fb){const _0x12fcb4=a421_0x3835d3;Object[_0x12fcb4(0x132)](_0x2a1150,_0x12fcb4(0x138),{'enumerable':!![],'value':_0xa5b5fb});}:function(_0x506e0e,_0x5b303f){_0x506e0e['default']=_0x5b303f;}),__importStar=this&&this[a421_0x3835d3(0x10a)]||function(_0x3430c4){const _0x142726=a421_0x3835d3;if(_0x3430c4&&_0x3430c4[_0x142726(0x116)])return _0x3430c4;var _0x3e8d2e={};if(_0x3430c4!=null){for(var _0x1c8437 in _0x3430c4)if(_0x1c8437!=='default'&&Object[_0x142726(0x139)]['hasOwnProperty']['call'](_0x3430c4,_0x1c8437))__createBinding(_0x3e8d2e,_0x3430c4,_0x1c8437);}return __setModuleDefault(_0x3e8d2e,_0x3430c4),_0x3e8d2e;},__importDefault=this&&this[a421_0x3835d3(0x130)]||function(_0x51c193){return _0x51c193&&_0x51c193['__esModule']?_0x51c193:{'default':_0x51c193};};Object[a421_0x3835d3(0x132)](exports,'__esModule',{'value':!![]}),exports['SendMail']=void 0x0;function a421_0x49dc(){const _0x5dc437=['smtpport','hour','nodemailer','1258918hRHlCv','1663840wUyGyk','get','getOwnPropertyDescriptor','create','Agendamento\x20de\x20e-mail\x20realizado\x20com\x20sucesso','363237PdgVAo','usersmtpauth','schedule','search','findOne','error','value','../../models/Setting','__importDefault','sendMail','defineProperty','writable','Erro\x20ao\x20agendar\x20e-mail:\x20','__createBinding','16LKWCPk','createTransport','default','prototype','150jSeYrJ','E-mail\x20agendado\x20e\x20salvo\x20com\x20sucesso','clientsecretsmtpauth','E-mail\x20enviado\x20imediatamente','__importStar','message','__setModuleDefault','(((.+)+)+)+$','YYYY-MM-DDTHH:mm','116KLReny','3372258UKhTlg','add','configurable','2909725YXkdSP','SendMail','constructor','__esModule','toString','moment','Erro\x20ao\x20enviar\x20e-mail:','Erro\x20ao\x20enviar\x20e-mail:\x20','1233909uLMlgi','165165MbQgIb','apply','format'];a421_0x49dc=function(){return _0x5dc437;};return a421_0x49dc();}const nodemailer_1=__importDefault(require(a421_0x3835d3(0x121))),Setting_1=__importDefault(require(a421_0x3835d3(0x12f))),Email_1=__importDefault(require('../../models/Email')),cron=__importStar(require('node-cron')),moment_1=__importDefault(require(a421_0x3835d3(0x118))),SendMail=async(_0x39e38b,_0x35c3da,_0x19e60e,_0x48f7a0,_0x3b5ab5,_0x26e20a,_0x3add32)=>{const _0x50a6ca=a421_0x3835d3;try{const _0x45a401=await Setting_1[_0x50a6ca(0x138)][_0x50a6ca(0x12c)]({'where':{'companyId':_0x39e38b,'key':'smtpauth'}}),_0x52a4e8=await Setting_1[_0x50a6ca(0x138)]['findOne']({'where':{'companyId':_0x39e38b,'key':_0x50a6ca(0x129)}}),_0x1ae10b=await Setting_1[_0x50a6ca(0x138)][_0x50a6ca(0x12c)]({'where':{'companyId':_0x39e38b,'key':_0x50a6ca(0x108)}}),_0xa45a79=await Setting_1[_0x50a6ca(0x138)][_0x50a6ca(0x12c)]({'where':{'companyId':_0x39e38b,'key':_0x50a6ca(0x11f)}}),_0x473724=_0x45a401[_0x50a6ca(0x12e)],_0x4efdd5=_0x52a4e8[_0x50a6ca(0x12e)],_0x29902e=_0x1ae10b[_0x50a6ca(0x12e)],_0xcceb61=_0xa45a79['value'],_0x4ca0a9=nodemailer_1[_0x50a6ca(0x138)][_0x50a6ca(0x137)]({'host':_0x473724,'port':Number(_0xcceb61),'secure':![],'auth':{'user':_0x4efdd5,'pass':_0x29902e}});async function _0x386c38(_0x449ece){const _0x37ac51=_0x50a6ca;try{const _0x276e1d={'from':_0x4efdd5,'to':_0x35c3da,'subject':_0x48f7a0,'text':_0x3b5ab5};return await _0x4ca0a9[_0x37ac51(0x131)](_0x276e1d),await Email_1[_0x37ac51(0x138)][_0x37ac51(0x126)]({'sender':_0x35c3da,'subject':_0x48f7a0,'message':_0x3b5ab5,'companyId':_0x39e38b}),{'message':_0x37ac51(0x13b)};}catch(_0x1b66f0){console[_0x37ac51(0x12d)](_0x37ac51(0x119),_0x1b66f0);throw new Error(_0x37ac51(0x11a)+_0x1b66f0);}}if(_0x3add32)return cron[_0x50a6ca(0x12a)](_0x3add32,()=>{const _0x24b720=_0x50a6ca,_0x1c9357=(0x0,moment_1['default'])()[_0x24b720(0x111)](0x1,'hour')[_0x24b720(0x11e)](_0x24b720(0x10e));_0x386c38(_0x1c9357);}),{'message':_0x50a6ca(0x127)};else{const _0xbde712=(0x0,moment_1[_0x50a6ca(0x138)])()[_0x50a6ca(0x111)](0x1,_0x50a6ca(0x120))['format'](_0x50a6ca(0x10e));return _0x386c38(_0xbde712),{'message':_0x50a6ca(0x109)};}}catch(_0x34e26f){return console[_0x50a6ca(0x12d)]('Erro\x20ao\x20agendar\x20e-mail:',_0x34e26f),{'error':_0x50a6ca(0x134)+_0x34e26f[_0x50a6ca(0x10b)]};}};exports[a421_0x3835d3(0x114)]=SendMail,exports[a421_0x3835d3(0x138)]=exports[a421_0x3835d3(0x114)];