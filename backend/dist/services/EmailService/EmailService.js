'use strict';const a454_0x5176cb=a454_0x7174;function a454_0x58f4(){const _0x42c045=['11iPsbrt','sendMail','defineProperty','writable','nodemailer','E-mail\x20enviado\x20imediatamente','value','prototype','180992cniWOd','Agendamento\x20de\x20e-mail\x20realizado\x20com\x20sucesso','../../models/Setting','usersmtpauth','Erro\x20ao\x20agendar\x20e-mail:\x20','__importDefault','9FMGJKs','apply','moment','getOwnPropertyDescriptor','YYYY-MM-DDTHH:mm','toString','6370BdSkjn','../../models/Email','call','hasOwnProperty','default','configurable','getOwnPropertyNames','__setModuleDefault','Erro\x20ao\x20agendar\x20e-mail:','16653190EetlMN','SendMail','add','search','findOne','get','smtpauth','node-cron','__esModule','E-mail\x20agendado\x20e\x20salvo\x20com\x20sucesso','create','1936072QtFWTw','hour','format','1235345uYssow','Erro\x20ao\x20enviar\x20e-mail:\x20','constructor','error','__createBinding','48sonGmX','1562632VwpPtR','createTransport','(((.+)+)+)+$','length','132MZQYLm','508586ldWkhv'];a454_0x58f4=function(){return _0x42c045;};return a454_0x58f4();}(function(_0x3f9d73,_0x2c2f38){const _0x46aa98=a454_0x7174,_0x1418be=_0x3f9d73();while(!![]){try{const _0x3c8346=-parseInt(_0x46aa98(0xe1))/0x1+-parseInt(_0x46aa98(0xf6))/0x2*(parseInt(_0x46aa98(0xe0))/0x3)+-parseInt(_0x46aa98(0x10a))/0x4+parseInt(_0x46aa98(0x10d))/0x5+-parseInt(_0x46aa98(0xdb))/0x6*(parseInt(_0x46aa98(0xea))/0x7)+-parseInt(_0x46aa98(0xdc))/0x8*(parseInt(_0x46aa98(0xf0))/0x9)+parseInt(_0x46aa98(0xff))/0xa*(parseInt(_0x46aa98(0xe2))/0xb);if(_0x3c8346===_0x2c2f38)break;else _0x1418be['push'](_0x1418be['shift']());}catch(_0x344991){_0x1418be['push'](_0x1418be['shift']());}}}(a454_0x58f4,0x5c27b));var __createBinding=this&&this[a454_0x5176cb(0xda)]||(Object[a454_0x5176cb(0x109)]?function(_0x3eae78,_0x119379,_0x2aadfe,_0x57cd7a){const _0x257aac=a454_0x5176cb;if(_0x57cd7a===undefined)_0x57cd7a=_0x2aadfe;var _0x2d2a43=Object[_0x257aac(0xf3)](_0x119379,_0x2aadfe);(!_0x2d2a43||(_0x257aac(0x104)in _0x2d2a43?!_0x119379[_0x257aac(0x107)]:_0x2d2a43[_0x257aac(0xe5)]||_0x2d2a43[_0x257aac(0xfb)]))&&(_0x2d2a43={'enumerable':!![],'get':function(){return _0x119379[_0x2aadfe];}}),Object[_0x257aac(0xe4)](_0x3eae78,_0x57cd7a,_0x2d2a43);}:function(_0x56413d,_0x49fb00,_0x3b8626,_0x5edd46){if(_0x5edd46===undefined)_0x5edd46=_0x3b8626;_0x56413d[_0x5edd46]=_0x49fb00[_0x3b8626];}),__setModuleDefault=this&&this[a454_0x5176cb(0xfd)]||(Object['create']?function(_0x3a3cbb,_0x35bc58){const _0x2e7880=a454_0x5176cb;Object[_0x2e7880(0xe4)](_0x3a3cbb,_0x2e7880(0xfa),{'enumerable':!![],'value':_0x35bc58});}:function(_0x373ed9,_0x3ebbf1){const _0x4f5261=a454_0x5176cb;_0x373ed9[_0x4f5261(0xfa)]=_0x3ebbf1;}),__importStar=this&&this['__importStar']||(function(){const _0x25927c=(function(){let _0x5669ea=!![];return function(_0x3c05a2,_0x5c1da0){const _0x4ba641=_0x5669ea?function(){const _0x5cd7ab=a454_0x7174;if(_0x5c1da0){const _0x4ea4f3=_0x5c1da0[_0x5cd7ab(0xf1)](_0x3c05a2,arguments);return _0x5c1da0=null,_0x4ea4f3;}}:function(){};return _0x5669ea=![],_0x4ba641;};}()),_0x3031e6=_0x25927c(this,function(){const _0x4f90eb=a454_0x7174;return _0x3031e6[_0x4f90eb(0xf5)]()['search'](_0x4f90eb(0xde))[_0x4f90eb(0xf5)]()[_0x4f90eb(0x10f)](_0x3031e6)[_0x4f90eb(0x102)]('(((.+)+)+)+$');});_0x3031e6();var _0x419174=function(_0x3006fd){const _0x188d97=a454_0x7174;return _0x419174=Object[_0x188d97(0xfc)]||function(_0x284534){const _0x3986fd=_0x188d97;var _0xd19c76=[];for(var _0x25a253 in _0x284534)if(Object[_0x3986fd(0xe9)][_0x3986fd(0xf9)][_0x3986fd(0xf8)](_0x284534,_0x25a253))_0xd19c76[_0xd19c76[_0x3986fd(0xdf)]]=_0x25a253;return _0xd19c76;},_0x419174(_0x3006fd);};return function(_0x46c8b2){const _0x3ada5b=a454_0x7174;if(_0x46c8b2&&_0x46c8b2[_0x3ada5b(0x107)])return _0x46c8b2;var _0x22df8d={};if(_0x46c8b2!=null){for(var _0x355f3e=_0x419174(_0x46c8b2),_0x406808=0x0;_0x406808<_0x355f3e['length'];_0x406808++)if(_0x355f3e[_0x406808]!==_0x3ada5b(0xfa))__createBinding(_0x22df8d,_0x46c8b2,_0x355f3e[_0x406808]);}return __setModuleDefault(_0x22df8d,_0x46c8b2),_0x22df8d;};}()),__importDefault=this&&this[a454_0x5176cb(0xef)]||function(_0x598477){const _0x19a296=a454_0x5176cb;return _0x598477&&_0x598477[_0x19a296(0x107)]?_0x598477:{'default':_0x598477};};Object[a454_0x5176cb(0xe4)](exports,a454_0x5176cb(0x107),{'value':!![]}),exports[a454_0x5176cb(0x100)]=void 0x0;function a454_0x7174(_0x1837e1,_0x1ca773){const _0x451bf3=a454_0x58f4();return a454_0x7174=function(_0x1b4082,_0x43f0ef){_0x1b4082=_0x1b4082-0xda;let _0x58f47a=_0x451bf3[_0x1b4082];return _0x58f47a;},a454_0x7174(_0x1837e1,_0x1ca773);}const nodemailer_1=__importDefault(require(a454_0x5176cb(0xe6))),Setting_1=__importDefault(require(a454_0x5176cb(0xec))),Email_1=__importDefault(require(a454_0x5176cb(0xf7))),cron=__importStar(require(a454_0x5176cb(0x106))),moment_1=__importDefault(require(a454_0x5176cb(0xf2))),SendMail=async(_0x3e5477,_0x15933f,_0xfbe10d,_0x52bf82,_0x76e22b,_0x12d628,_0x187cac)=>{const _0x247c55=a454_0x5176cb;try{const _0x8bb7fa=await Setting_1[_0x247c55(0xfa)][_0x247c55(0x103)]({'where':{'companyId':_0x3e5477,'key':_0x247c55(0x105)}}),_0x2b9bcb=await Setting_1[_0x247c55(0xfa)][_0x247c55(0x103)]({'where':{'companyId':_0x3e5477,'key':_0x247c55(0xed)}}),_0x3beddb=await Setting_1['default'][_0x247c55(0x103)]({'where':{'companyId':_0x3e5477,'key':'clientsecretsmtpauth'}}),_0x3c37e5=await Setting_1[_0x247c55(0xfa)][_0x247c55(0x103)]({'where':{'companyId':_0x3e5477,'key':'smtpport'}}),_0x2260b2=_0x8bb7fa['value'],_0x4c8912=_0x2b9bcb['value'],_0x19cb18=_0x3beddb[_0x247c55(0xe8)],_0x284468=_0x3c37e5[_0x247c55(0xe8)],_0x22a0d4=nodemailer_1[_0x247c55(0xfa)][_0x247c55(0xdd)]({'host':_0x2260b2,'port':Number(_0x284468),'secure':![],'auth':{'user':_0x4c8912,'pass':_0x19cb18}});async function _0x3e4d73(_0x571f5f){const _0x281e74=_0x247c55;try{const _0x4cc3b6={'from':_0x4c8912,'to':_0x15933f,'subject':_0x52bf82,'text':_0x76e22b};return await _0x22a0d4[_0x281e74(0xe3)](_0x4cc3b6),await Email_1[_0x281e74(0xfa)][_0x281e74(0x109)]({'sender':_0x15933f,'subject':_0x52bf82,'message':_0x76e22b,'companyId':_0x3e5477}),{'message':_0x281e74(0x108)};}catch(_0x5def1a){console[_0x281e74(0x110)]('Erro\x20ao\x20enviar\x20e-mail:',_0x5def1a);throw new Error(_0x281e74(0x10e)+_0x5def1a);}}if(_0x187cac)return cron['schedule'](_0x187cac,()=>{const _0xadb8e5=_0x247c55,_0x188ee0=(0x0,moment_1[_0xadb8e5(0xfa)])()['add'](0x1,_0xadb8e5(0x10b))[_0xadb8e5(0x10c)](_0xadb8e5(0xf4));_0x3e4d73(_0x188ee0);}),{'message':_0x247c55(0xeb)};else{const _0x17225d=(0x0,moment_1[_0x247c55(0xfa)])()[_0x247c55(0x101)](0x1,_0x247c55(0x10b))[_0x247c55(0x10c)](_0x247c55(0xf4));return _0x3e4d73(_0x17225d),{'message':_0x247c55(0xe7)};}}catch(_0x3934cd){return console[_0x247c55(0x110)](_0x247c55(0xfe),_0x3934cd),{'error':_0x247c55(0xee)+_0x3934cd['message']};}};exports[a454_0x5176cb(0x100)]=SendMail,exports[a454_0x5176cb(0xfa)]=exports[a454_0x5176cb(0x100)];