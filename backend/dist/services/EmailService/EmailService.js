const a424_0x356b74=a424_0x5330;(function(_0x11412c,_0x5e606a){const _0x75fe13=a424_0x5330,_0x374e9c=_0x11412c();while(!![]){try{const _0xdefd0=-parseInt(_0x75fe13(0x109))/0x1*(-parseInt(_0x75fe13(0xe0))/0x2)+parseInt(_0x75fe13(0xfd))/0x3+-parseInt(_0x75fe13(0xfb))/0x4+parseInt(_0x75fe13(0xed))/0x5*(parseInt(_0x75fe13(0xda))/0x6)+-parseInt(_0x75fe13(0xeb))/0x7*(parseInt(_0x75fe13(0xf8))/0x8)+-parseInt(_0x75fe13(0xfa))/0x9*(parseInt(_0x75fe13(0xea))/0xa)+-parseInt(_0x75fe13(0xf3))/0xb;if(_0xdefd0===_0x5e606a)break;else _0x374e9c['push'](_0x374e9c['shift']());}catch(_0x156bc0){_0x374e9c['push'](_0x374e9c['shift']());}}}(a424_0x54b3,0xb629b));function a424_0x5330(_0x5497d6,_0x1ecb70){const _0x1d2474=a424_0x54b3();return a424_0x5330=function(_0x18c1db,_0xeb8ae7){_0x18c1db=_0x18c1db-0xda;let _0x54b3f7=_0x1d2474[_0x18c1db];return _0x54b3f7;},a424_0x5330(_0x5497d6,_0x1ecb70);}const a424_0xeb8ae7=(function(){let _0x249cc4=!![];return function(_0x4444b3,_0x6520cd){const _0x141e57=_0x249cc4?function(){if(_0x6520cd){const _0x3ff8b9=_0x6520cd['apply'](_0x4444b3,arguments);return _0x6520cd=null,_0x3ff8b9;}}:function(){};return _0x249cc4=![],_0x141e57;};}()),a424_0x18c1db=a424_0xeb8ae7(this,function(){const _0x26a07a=a424_0x5330;return a424_0x18c1db[_0x26a07a(0xf1)]()[_0x26a07a(0xe5)](_0x26a07a(0xf0))[_0x26a07a(0xf1)]()['constructor'](a424_0x18c1db)['search'](_0x26a07a(0xf0));});a424_0x18c1db();'use strict';function a424_0x54b3(){const _0x2d6d20=['4616550tPbMUT','31164CPDmSR','createTransport','120765qImUHH','smtpauth','moment','(((.+)+)+)+$','toString','__esModule','5578826GsISME','add','__importStar','E-mail\x20enviado\x20imediatamente','Erro\x20ao\x20agendar\x20e-mail:','520tuVaZJ','configurable','9tFQlim','1061552IpWosc','default','1535076DCQgWi','format','get','usersmtpauth','__createBinding','getOwnPropertyDescriptor','smtpport','hasOwnProperty','defineProperty','hour','clientsecretsmtpauth','error','239819RrLliM','schedule','258pdOGfO','__importDefault','../../models/Email','call','../../models/Setting','nodemailer','6mxhmle','message','E-mail\x20agendado\x20e\x20salvo\x20com\x20sucesso','SendMail','findOne','search','sendMail','create','YYYY-MM-DDTHH:mm','value'];a424_0x54b3=function(){return _0x2d6d20;};return a424_0x54b3();}var __createBinding=this&&this[a424_0x356b74(0x101)]||(Object[a424_0x356b74(0xe7)]?function(_0x4cfb5b,_0x2b66e4,_0x3aa2f6,_0x52ab5f){const _0x550e7c=a424_0x356b74;if(_0x52ab5f===undefined)_0x52ab5f=_0x3aa2f6;var _0x5547f5=Object[_0x550e7c(0x102)](_0x2b66e4,_0x3aa2f6);(!_0x5547f5||(_0x550e7c(0xff)in _0x5547f5?!_0x2b66e4['__esModule']:_0x5547f5['writable']||_0x5547f5[_0x550e7c(0xf9)]))&&(_0x5547f5={'enumerable':!![],'get':function(){return _0x2b66e4[_0x3aa2f6];}}),Object['defineProperty'](_0x4cfb5b,_0x52ab5f,_0x5547f5);}:function(_0x4f8d7b,_0x44fac0,_0x22ed16,_0x5701e2){if(_0x5701e2===undefined)_0x5701e2=_0x22ed16;_0x4f8d7b[_0x5701e2]=_0x44fac0[_0x22ed16];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a424_0x356b74(0xe7)]?function(_0x47ecc1,_0x13e8a8){Object['defineProperty'](_0x47ecc1,'default',{'enumerable':!![],'value':_0x13e8a8});}:function(_0x4ada67,_0x5cf21d){const _0xca9ada=a424_0x356b74;_0x4ada67[_0xca9ada(0xfc)]=_0x5cf21d;}),__importStar=this&&this[a424_0x356b74(0xf5)]||function(_0x28a8f3){const _0x255a68=a424_0x356b74;if(_0x28a8f3&&_0x28a8f3['__esModule'])return _0x28a8f3;var _0x26ab03={};if(_0x28a8f3!=null){for(var _0x97dc43 in _0x28a8f3)if(_0x97dc43!=='default'&&Object['prototype'][_0x255a68(0x104)][_0x255a68(0xdd)](_0x28a8f3,_0x97dc43))__createBinding(_0x26ab03,_0x28a8f3,_0x97dc43);}return __setModuleDefault(_0x26ab03,_0x28a8f3),_0x26ab03;},__importDefault=this&&this[a424_0x356b74(0xdb)]||function(_0xf6494f){const _0x57e1b7=a424_0x356b74;return _0xf6494f&&_0xf6494f[_0x57e1b7(0xf2)]?_0xf6494f:{'default':_0xf6494f};};Object[a424_0x356b74(0x105)](exports,'__esModule',{'value':!![]}),exports[a424_0x356b74(0xe3)]=void 0x0;const nodemailer_1=__importDefault(require(a424_0x356b74(0xdf))),Setting_1=__importDefault(require(a424_0x356b74(0xde))),Email_1=__importDefault(require(a424_0x356b74(0xdc))),cron=__importStar(require('node-cron')),moment_1=__importDefault(require(a424_0x356b74(0xef))),SendMail=async(_0x2d5e05,_0x576542,_0x5cd1f5,_0x3e8d0e,_0x5434aa,_0x13eba6,_0x211aca)=>{const _0x487724=a424_0x356b74;try{const _0x39cf71=await Setting_1[_0x487724(0xfc)]['findOne']({'where':{'companyId':_0x2d5e05,'key':_0x487724(0xee)}}),_0x483633=await Setting_1[_0x487724(0xfc)][_0x487724(0xe4)]({'where':{'companyId':_0x2d5e05,'key':_0x487724(0x100)}}),_0x3ca9aa=await Setting_1['default'][_0x487724(0xe4)]({'where':{'companyId':_0x2d5e05,'key':_0x487724(0x107)}}),_0x24a6bb=await Setting_1['default'][_0x487724(0xe4)]({'where':{'companyId':_0x2d5e05,'key':_0x487724(0x103)}}),_0x1d4e6f=_0x39cf71[_0x487724(0xe9)],_0x49ffc9=_0x483633[_0x487724(0xe9)],_0x30e62e=_0x3ca9aa[_0x487724(0xe9)],_0x4d8094=_0x24a6bb['value'],_0x320ba8=nodemailer_1[_0x487724(0xfc)][_0x487724(0xec)]({'host':_0x1d4e6f,'port':Number(_0x4d8094),'secure':![],'auth':{'user':_0x49ffc9,'pass':_0x30e62e}});async function _0xf4b69d(_0xc8e670){const _0x17c4fb=_0x487724;try{const _0x136acc={'from':_0x49ffc9,'to':_0x576542,'subject':_0x3e8d0e,'text':_0x5434aa};return await _0x320ba8[_0x17c4fb(0xe6)](_0x136acc),await Email_1[_0x17c4fb(0xfc)]['create']({'sender':_0x576542,'subject':_0x3e8d0e,'message':_0x5434aa,'companyId':_0x2d5e05}),{'message':_0x17c4fb(0xe2)};}catch(_0x3c70b4){console['error']('Erro\x20ao\x20enviar\x20e-mail:',_0x3c70b4);throw new Error('Erro\x20ao\x20enviar\x20e-mail:\x20'+_0x3c70b4);}}if(_0x211aca)return cron[_0x487724(0x10a)](_0x211aca,()=>{const _0x24228a=_0x487724,_0x56aca9=(0x0,moment_1[_0x24228a(0xfc)])()[_0x24228a(0xf4)](0x1,_0x24228a(0x106))['format'](_0x24228a(0xe8));_0xf4b69d(_0x56aca9);}),{'message':'Agendamento\x20de\x20e-mail\x20realizado\x20com\x20sucesso'};else{const _0x5278b1=(0x0,moment_1['default'])()[_0x487724(0xf4)](0x1,_0x487724(0x106))[_0x487724(0xfe)](_0x487724(0xe8));return _0xf4b69d(_0x5278b1),{'message':_0x487724(0xf6)};}}catch(_0x17606b){return console[_0x487724(0x108)](_0x487724(0xf7),_0x17606b),{'error':'Erro\x20ao\x20agendar\x20e-mail:\x20'+_0x17606b[_0x487724(0xe1)]};}};exports['SendMail']=SendMail,exports['default']=exports[a424_0x356b74(0xe3)];