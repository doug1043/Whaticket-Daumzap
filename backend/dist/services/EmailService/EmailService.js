const a425_0x54b4a4=a425_0x3e81;(function(_0x2b39a4,_0x4d1167){const _0x244269=a425_0x3e81,_0x5a547e=_0x2b39a4();while(!![]){try{const _0x11d1c4=-parseInt(_0x244269(0xe8))/0x1*(-parseInt(_0x244269(0xe3))/0x2)+-parseInt(_0x244269(0xd4))/0x3+parseInt(_0x244269(0xf1))/0x4+-parseInt(_0x244269(0xe6))/0x5*(-parseInt(_0x244269(0xd5))/0x6)+-parseInt(_0x244269(0xcf))/0x7+parseInt(_0x244269(0xcc))/0x8+-parseInt(_0x244269(0xef))/0x9*(parseInt(_0x244269(0xe2))/0xa);if(_0x11d1c4===_0x4d1167)break;else _0x5a547e['push'](_0x5a547e['shift']());}catch(_0x5dc3ab){_0x5a547e['push'](_0x5a547e['shift']());}}}(a425_0x14ae,0xb2689));const a425_0x18f7e3=(function(){let _0x1efaa5=!![];return function(_0x1a80fd,_0x1dec82){const _0x412a63=_0x1efaa5?function(){const _0xf93f9f=a425_0x3e81;if(_0x1dec82){const _0x46e579=_0x1dec82[_0xf93f9f(0xe5)](_0x1a80fd,arguments);return _0x1dec82=null,_0x46e579;}}:function(){};return _0x1efaa5=![],_0x412a63;};}()),a425_0x290c4a=a425_0x18f7e3(this,function(){const _0x53b294=a425_0x3e81;return a425_0x290c4a['toString']()[_0x53b294(0xde)](_0x53b294(0xf6))[_0x53b294(0xf8)]()['constructor'](a425_0x290c4a)[_0x53b294(0xde)](_0x53b294(0xf6));});function a425_0x14ae(){const _0x535386=['Erro\x20ao\x20enviar\x20e-mail:','nodemailer','539670eionEH','25266YRraIu','createTransport','smtpport','create','Agendamento\x20de\x20e-mail\x20realizado\x20com\x20sucesso','../../models/Email','node-cron','format','hour','search','prototype','add','default','5423250mPUSJl','570836uDSzzV','YYYY-MM-DDTHH:mm','apply','1295AxwSCR','__setModuleDefault','3xEgYmL','sendMail','Erro\x20ao\x20enviar\x20e-mail:\x20','Erro\x20ao\x20agendar\x20e-mail:\x20','getOwnPropertyDescriptor','get','defineProperty','9QYKEgB','call','616140oxsfxK','configurable','schedule','SendMail','E-mail\x20agendado\x20e\x20salvo\x20com\x20sucesso','(((.+)+)+)+$','writable','toString','E-mail\x20enviado\x20imediatamente','__esModule','__importDefault','error','value','5798704TpLrSz','../../models/Setting','message','9609600PIXrZU','clientsecretsmtpauth','findOne'];a425_0x14ae=function(){return _0x535386;};return a425_0x14ae();}a425_0x290c4a();function a425_0x3e81(_0x4bbfe9,_0x4402c8){const _0x56cf18=a425_0x14ae();return a425_0x3e81=function(_0x290c4a,_0x18f7e3){_0x290c4a=_0x290c4a-0xc8;let _0x14aeb4=_0x56cf18[_0x290c4a];return _0x14aeb4;},a425_0x3e81(_0x4bbfe9,_0x4402c8);}'use strict';var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x53315e,_0x3b3827,_0x5cf291,_0x4a44d6){const _0x2c1c7f=a425_0x3e81;if(_0x4a44d6===undefined)_0x4a44d6=_0x5cf291;var _0x98f817=Object[_0x2c1c7f(0xec)](_0x3b3827,_0x5cf291);(!_0x98f817||(_0x2c1c7f(0xed)in _0x98f817?!_0x3b3827[_0x2c1c7f(0xc8)]:_0x98f817[_0x2c1c7f(0xf7)]||_0x98f817[_0x2c1c7f(0xf2)]))&&(_0x98f817={'enumerable':!![],'get':function(){return _0x3b3827[_0x5cf291];}}),Object[_0x2c1c7f(0xee)](_0x53315e,_0x4a44d6,_0x98f817);}:function(_0x348a7e,_0x3a2a38,_0x1ae254,_0x5d4218){if(_0x5d4218===undefined)_0x5d4218=_0x1ae254;_0x348a7e[_0x5d4218]=_0x3a2a38[_0x1ae254];}),__setModuleDefault=this&&this[a425_0x54b4a4(0xe7)]||(Object[a425_0x54b4a4(0xd8)]?function(_0xce8d50,_0x3a5d72){const _0x4be670=a425_0x54b4a4;Object[_0x4be670(0xee)](_0xce8d50,'default',{'enumerable':!![],'value':_0x3a5d72});}:function(_0x50f11b,_0x5a1bcc){const _0x546f4c=a425_0x54b4a4;_0x50f11b[_0x546f4c(0xe1)]=_0x5a1bcc;}),__importStar=this&&this['__importStar']||function(_0x4a145d){const _0x21472d=a425_0x54b4a4;if(_0x4a145d&&_0x4a145d['__esModule'])return _0x4a145d;var _0x5db34b={};if(_0x4a145d!=null){for(var _0x5f1f9b in _0x4a145d)if(_0x5f1f9b!==_0x21472d(0xe1)&&Object[_0x21472d(0xdf)]['hasOwnProperty'][_0x21472d(0xf0)](_0x4a145d,_0x5f1f9b))__createBinding(_0x5db34b,_0x4a145d,_0x5f1f9b);}return __setModuleDefault(_0x5db34b,_0x4a145d),_0x5db34b;},__importDefault=this&&this[a425_0x54b4a4(0xc9)]||function(_0x16a6aa){const _0x2163f5=a425_0x54b4a4;return _0x16a6aa&&_0x16a6aa[_0x2163f5(0xc8)]?_0x16a6aa:{'default':_0x16a6aa};};Object[a425_0x54b4a4(0xee)](exports,a425_0x54b4a4(0xc8),{'value':!![]}),exports[a425_0x54b4a4(0xf4)]=void 0x0;const nodemailer_1=__importDefault(require(a425_0x54b4a4(0xd3))),Setting_1=__importDefault(require(a425_0x54b4a4(0xcd))),Email_1=__importDefault(require(a425_0x54b4a4(0xda))),cron=__importStar(require(a425_0x54b4a4(0xdb))),moment_1=__importDefault(require('moment')),SendMail=async(_0x5f0737,_0x125ac1,_0x31d6dc,_0x2e089e,_0x42f724,_0x5f97ce,_0x209cd9)=>{const _0x552ed0=a425_0x54b4a4;try{const _0x3f80e9=await Setting_1[_0x552ed0(0xe1)][_0x552ed0(0xd1)]({'where':{'companyId':_0x5f0737,'key':'smtpauth'}}),_0x337c5b=await Setting_1[_0x552ed0(0xe1)][_0x552ed0(0xd1)]({'where':{'companyId':_0x5f0737,'key':'usersmtpauth'}}),_0x42a5c8=await Setting_1[_0x552ed0(0xe1)]['findOne']({'where':{'companyId':_0x5f0737,'key':_0x552ed0(0xd0)}}),_0x306d85=await Setting_1[_0x552ed0(0xe1)][_0x552ed0(0xd1)]({'where':{'companyId':_0x5f0737,'key':_0x552ed0(0xd7)}}),_0x270c58=_0x3f80e9['value'],_0x345a8f=_0x337c5b[_0x552ed0(0xcb)],_0x5c285c=_0x42a5c8['value'],_0x11a05c=_0x306d85[_0x552ed0(0xcb)],_0x34e692=nodemailer_1['default'][_0x552ed0(0xd6)]({'host':_0x270c58,'port':Number(_0x11a05c),'secure':![],'auth':{'user':_0x345a8f,'pass':_0x5c285c}});async function _0x4a856f(_0x1c3550){const _0x512eee=_0x552ed0;try{const _0x1a9497={'from':_0x345a8f,'to':_0x125ac1,'subject':_0x2e089e,'text':_0x42f724};return await _0x34e692[_0x512eee(0xe9)](_0x1a9497),await Email_1['default'][_0x512eee(0xd8)]({'sender':_0x125ac1,'subject':_0x2e089e,'message':_0x42f724,'companyId':_0x5f0737}),{'message':_0x512eee(0xf5)};}catch(_0x17c32b){console[_0x512eee(0xca)](_0x512eee(0xd2),_0x17c32b);throw new Error(_0x512eee(0xea)+_0x17c32b);}}if(_0x209cd9)return cron[_0x552ed0(0xf3)](_0x209cd9,()=>{const _0x639a23=_0x552ed0,_0x5be19f=(0x0,moment_1[_0x639a23(0xe1)])()[_0x639a23(0xe0)](0x1,'hour')[_0x639a23(0xdc)]('YYYY-MM-DDTHH:mm');_0x4a856f(_0x5be19f);}),{'message':_0x552ed0(0xd9)};else{const _0x53ad00=(0x0,moment_1[_0x552ed0(0xe1)])()['add'](0x1,_0x552ed0(0xdd))['format'](_0x552ed0(0xe4));return _0x4a856f(_0x53ad00),{'message':_0x552ed0(0xf9)};}}catch(_0x5c7309){return console[_0x552ed0(0xca)]('Erro\x20ao\x20agendar\x20e-mail:',_0x5c7309),{'error':_0x552ed0(0xeb)+_0x5c7309[_0x552ed0(0xce)]};}};exports['SendMail']=SendMail,exports[a425_0x54b4a4(0xe1)]=exports[a425_0x54b4a4(0xf4)];