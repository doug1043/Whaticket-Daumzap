const a426_0x51a52b=a426_0x43f0;(function(_0x2196d9,_0x48af5b){const _0x3f050b=a426_0x43f0,_0x289d94=_0x2196d9();while(!![]){try{const _0x4e5481=-parseInt(_0x3f050b(0x81))/0x1*(parseInt(_0x3f050b(0x95))/0x2)+-parseInt(_0x3f050b(0x8c))/0x3+parseInt(_0x3f050b(0x82))/0x4*(parseInt(_0x3f050b(0x6f))/0x5)+parseInt(_0x3f050b(0x91))/0x6+parseInt(_0x3f050b(0x73))/0x7*(parseInt(_0x3f050b(0x88))/0x8)+parseInt(_0x3f050b(0x74))/0x9+-parseInt(_0x3f050b(0x7d))/0xa*(parseInt(_0x3f050b(0x7b))/0xb);if(_0x4e5481===_0x48af5b)break;else _0x289d94['push'](_0x289d94['shift']());}catch(_0x54e347){_0x289d94['push'](_0x289d94['shift']());}}}(a426_0x440c,0x99119));function a426_0x43f0(_0x9a2170,_0x5e472c){const _0x2af6da=a426_0x440c();return a426_0x43f0=function(_0x153d7b,_0x537c1e){_0x153d7b=_0x153d7b-0x66;let _0x440c49=_0x2af6da[_0x153d7b];return _0x440c49;},a426_0x43f0(_0x9a2170,_0x5e472c);}const a426_0x537c1e=(function(){let _0x26a089=!![];return function(_0x3d4b32,_0x5e6660){const _0x2fc917=_0x26a089?function(){const _0x57cca9=a426_0x43f0;if(_0x5e6660){const _0x17246b=_0x5e6660[_0x57cca9(0x80)](_0x3d4b32,arguments);return _0x5e6660=null,_0x17246b;}}:function(){};return _0x26a089=![],_0x2fc917;};}()),a426_0x153d7b=a426_0x537c1e(this,function(){const _0x91cd46=a426_0x43f0;return a426_0x153d7b[_0x91cd46(0x79)]()[_0x91cd46(0x69)](_0x91cd46(0x67))[_0x91cd46(0x79)]()[_0x91cd46(0x68)](a426_0x153d7b)[_0x91cd46(0x69)](_0x91cd46(0x67));});a426_0x153d7b();function a426_0x440c(){const _0x54b2a2=['call','nodemailer','smtpauth','getOwnPropertyDescriptor','96gFmCoe','message','usersmtpauth','schedule','3099348siJxla','hasOwnProperty','create','defineProperty','sendMail','5317680QjisIX','node-cron','createTransport','__createBinding','819810ErALNZ','add','error','value','../../models/Email','(((.+)+)+)+$','constructor','search','format','__importDefault','E-mail\x20agendado\x20e\x20salvo\x20com\x20sucesso','YYYY-MM-DDTHH:mm','__setModuleDefault','5GKtWle','Agendamento\x20de\x20e-mail\x20realizado\x20com\x20sucesso','prototype','findOne','309911tJErLt','3060279nPntbp','default','SendMail','Erro\x20ao\x20agendar\x20e-mail:','get','toString','Erro\x20ao\x20enviar\x20e-mail:','2673XzxuDG','__esModule','450KZnmqR','Erro\x20ao\x20enviar\x20e-mail:\x20','configurable','apply','1xenkij','1293352CTDFoh','Erro\x20ao\x20agendar\x20e-mail:\x20'];a426_0x440c=function(){return _0x54b2a2;};return a426_0x440c();}'use strict';var __createBinding=this&&this[a426_0x51a52b(0x94)]||(Object[a426_0x51a52b(0x8e)]?function(_0x46ac25,_0x38d4e5,_0x3198dd,_0x3376b4){const _0x2bd7ff=a426_0x51a52b;if(_0x3376b4===undefined)_0x3376b4=_0x3198dd;var _0x101b01=Object[_0x2bd7ff(0x87)](_0x38d4e5,_0x3198dd);(!_0x101b01||(_0x2bd7ff(0x78)in _0x101b01?!_0x38d4e5[_0x2bd7ff(0x7c)]:_0x101b01['writable']||_0x101b01[_0x2bd7ff(0x7f)]))&&(_0x101b01={'enumerable':!![],'get':function(){return _0x38d4e5[_0x3198dd];}}),Object[_0x2bd7ff(0x8f)](_0x46ac25,_0x3376b4,_0x101b01);}:function(_0x192693,_0x497bbb,_0x219d58,_0x512817){if(_0x512817===undefined)_0x512817=_0x219d58;_0x192693[_0x512817]=_0x497bbb[_0x219d58];}),__setModuleDefault=this&&this[a426_0x51a52b(0x6e)]||(Object[a426_0x51a52b(0x8e)]?function(_0x5e0cca,_0xb360cc){const _0x643bf8=a426_0x51a52b;Object[_0x643bf8(0x8f)](_0x5e0cca,'default',{'enumerable':!![],'value':_0xb360cc});}:function(_0x3cbc29,_0xb783c2){const _0x514c31=a426_0x51a52b;_0x3cbc29[_0x514c31(0x75)]=_0xb783c2;}),__importStar=this&&this['__importStar']||function(_0x1868e9){const _0x48e968=a426_0x51a52b;if(_0x1868e9&&_0x1868e9['__esModule'])return _0x1868e9;var _0x2862d4={};if(_0x1868e9!=null){for(var _0x4da100 in _0x1868e9)if(_0x4da100!==_0x48e968(0x75)&&Object[_0x48e968(0x71)][_0x48e968(0x8d)][_0x48e968(0x84)](_0x1868e9,_0x4da100))__createBinding(_0x2862d4,_0x1868e9,_0x4da100);}return __setModuleDefault(_0x2862d4,_0x1868e9),_0x2862d4;},__importDefault=this&&this[a426_0x51a52b(0x6b)]||function(_0x484dfa){const _0x156ac1=a426_0x51a52b;return _0x484dfa&&_0x484dfa[_0x156ac1(0x7c)]?_0x484dfa:{'default':_0x484dfa};};Object[a426_0x51a52b(0x8f)](exports,'__esModule',{'value':!![]}),exports[a426_0x51a52b(0x76)]=void 0x0;const nodemailer_1=__importDefault(require(a426_0x51a52b(0x85))),Setting_1=__importDefault(require('../../models/Setting')),Email_1=__importDefault(require(a426_0x51a52b(0x66))),cron=__importStar(require(a426_0x51a52b(0x92))),moment_1=__importDefault(require('moment')),SendMail=async(_0x5664df,_0x137397,_0x4be806,_0x4b3269,_0x2f82d0,_0x3b764f,_0x2bd458)=>{const _0x51c05=a426_0x51a52b;try{const _0x5ef967=await Setting_1['default'][_0x51c05(0x72)]({'where':{'companyId':_0x5664df,'key':_0x51c05(0x86)}}),_0x89d7ad=await Setting_1[_0x51c05(0x75)][_0x51c05(0x72)]({'where':{'companyId':_0x5664df,'key':_0x51c05(0x8a)}}),_0x5d85b8=await Setting_1['default']['findOne']({'where':{'companyId':_0x5664df,'key':'clientsecretsmtpauth'}}),_0x12bd93=await Setting_1[_0x51c05(0x75)][_0x51c05(0x72)]({'where':{'companyId':_0x5664df,'key':'smtpport'}}),_0x2f201e=_0x5ef967[_0x51c05(0x98)],_0x489bb7=_0x89d7ad[_0x51c05(0x98)],_0x14ab97=_0x5d85b8[_0x51c05(0x98)],_0x4ef32d=_0x12bd93['value'],_0x5db86d=nodemailer_1['default'][_0x51c05(0x93)]({'host':_0x2f201e,'port':Number(_0x4ef32d),'secure':![],'auth':{'user':_0x489bb7,'pass':_0x14ab97}});async function _0x1eb2b4(_0x49ba8c){const _0x371984=_0x51c05;try{const _0x6672bf={'from':_0x489bb7,'to':_0x137397,'subject':_0x4b3269,'text':_0x2f82d0};return await _0x5db86d[_0x371984(0x90)](_0x6672bf),await Email_1[_0x371984(0x75)]['create']({'sender':_0x137397,'subject':_0x4b3269,'message':_0x2f82d0,'companyId':_0x5664df}),{'message':_0x371984(0x6c)};}catch(_0x4dac66){console['error'](_0x371984(0x7a),_0x4dac66);throw new Error(_0x371984(0x7e)+_0x4dac66);}}if(_0x2bd458)return cron[_0x51c05(0x8b)](_0x2bd458,()=>{const _0x5b67fa=_0x51c05,_0x5c3118=(0x0,moment_1[_0x5b67fa(0x75)])()[_0x5b67fa(0x96)](0x1,'hour')[_0x5b67fa(0x6a)](_0x5b67fa(0x6d));_0x1eb2b4(_0x5c3118);}),{'message':_0x51c05(0x70)};else{const _0x16aa31=(0x0,moment_1['default'])()[_0x51c05(0x96)](0x1,'hour')['format']('YYYY-MM-DDTHH:mm');return _0x1eb2b4(_0x16aa31),{'message':'E-mail\x20enviado\x20imediatamente'};}}catch(_0x94839b){return console[_0x51c05(0x97)](_0x51c05(0x77),_0x94839b),{'error':_0x51c05(0x83)+_0x94839b[_0x51c05(0x89)]};}};exports[a426_0x51a52b(0x76)]=SendMail,exports['default']=exports['SendMail'];