function a629_0x3d95(){const _0x39ba04=['44696yntNGn','767247EGSLOL','12XhMiwp','2VWKvdO','constructor','48630iHJAyY','smtpport','error','nodemailer','(((.+)+)+)+$','sendMail','__importDefault','apply','Erro\x20ao\x20redefinir\x20senha:','../../database','findOne','bcryptjs','value','default','hash','usersmtpauth','Olá,\x0a\x0aSua\x20senha\x20foi\x20alterada\x20com\x20sucesso.\x0a\x0aSe\x20você\x20não\x20realizou\x20essa\x20alteração,\x20entre\x20em\x20contato\x20conosco\x20imediatamente.\x0a\x0aAtenciosamente','2079hcFPBK','sequelize','clientsecretsmtpauth','\x27,\x20\x22resetPassword\x22\x20=\x20\x27\x27\x20WHERE\x20email=\x20\x27','560151oKyKzJ','2589500mFQJit','../../models/Setting','Erro\x20interno\x20do\x20servidor','2165260QuhDHz','UPDATE','query','Token\x20não\x20encontrado\x20ou\x20inválido','Configurações\x20SMTP\x20estão\x20incompletas','SELECT','UPDATE\x20\x22Users\x22\x20SET\x20\x22passwordHash\x22=\x20\x27','2888473pBpGKC','toString','defineProperty','\x27\x20AND\x20\x22resetPassword\x22\x20=\x20\x27','search','QueryTypes'];a629_0x3d95=function(){return _0x39ba04;};return a629_0x3d95();}const a629_0xca57b7=a629_0x17a3;(function(_0x1697fb,_0x30b09e){const _0x871dba=a629_0x17a3,_0xf1c2e8=_0x1697fb();while(!![]){try{const _0x5dd699=-parseInt(_0x871dba(0x6d))/0x1+parseInt(_0x871dba(0x6f))/0x2*(parseInt(_0x871dba(0x86))/0x3)+parseInt(_0x871dba(0x87))/0x4+-parseInt(_0x871dba(0x71))/0x5+parseInt(_0x871dba(0x6e))/0x6*(-parseInt(_0x871dba(0x66))/0x7)+-parseInt(_0x871dba(0x6c))/0x8*(-parseInt(_0x871dba(0x82))/0x9)+parseInt(_0x871dba(0x8a))/0xa;if(_0x5dd699===_0x30b09e)break;else _0xf1c2e8['push'](_0xf1c2e8['shift']());}catch(_0x31ba2){_0xf1c2e8['push'](_0xf1c2e8['shift']());}}}(a629_0x3d95,0xb4694));const a629_0x31bf42=(function(){let _0x6b10e9=!![];return function(_0x994e51,_0x156419){const _0x5b8e0a=_0x6b10e9?function(){const _0x43f47c=a629_0x17a3;if(_0x156419){const _0x43479d=_0x156419[_0x43f47c(0x78)](_0x994e51,arguments);return _0x156419=null,_0x43479d;}}:function(){};return _0x6b10e9=![],_0x5b8e0a;};}()),a629_0x235ae6=a629_0x31bf42(this,function(){const _0x26b802=a629_0x17a3;return a629_0x235ae6[_0x26b802(0x67)]()['search'](_0x26b802(0x75))[_0x26b802(0x67)]()[_0x26b802(0x70)](a629_0x235ae6)[_0x26b802(0x6a)](_0x26b802(0x75));});a629_0x235ae6();'use strict';var __importDefault=this&&this[a629_0xca57b7(0x77)]||function(_0x2cc8a6){return _0x2cc8a6&&_0x2cc8a6['__esModule']?_0x2cc8a6:{'default':_0x2cc8a6};};Object[a629_0xca57b7(0x68)](exports,'__esModule',{'value':!![]});function a629_0x17a3(_0x376089,_0x3dbd31){const _0x249936=a629_0x3d95();return a629_0x17a3=function(_0x235ae6,_0x31bf42){_0x235ae6=_0x235ae6-0x65;let _0x3d95e6=_0x249936[_0x235ae6];return _0x3d95e6;},a629_0x17a3(_0x376089,_0x3dbd31);}const sequelize_1=__importDefault(require(a629_0xca57b7(0x83))),database_1=__importDefault(require(a629_0xca57b7(0x7a))),nodemailer_1=__importDefault(require(a629_0xca57b7(0x74))),Setting_1=__importDefault(require(a629_0xca57b7(0x88))),bcryptjs_1=require(a629_0xca57b7(0x7c)),ResetPassword=async(_0x45e117,_0x374d6b,_0x55416f)=>{const _0x23c684=a629_0xca57b7;try{const {hasResult:_0x17e680,data:_0x2ee43e}=await filterUser(_0x45e117,_0x374d6b);if(!_0x17e680)return{'status':0x194,'message':'Email\x20ou\x20token\x20não\x20encontrado'};const _0x4ac17f=await(0x0,bcryptjs_1[_0x23c684(0x7f)])(_0x55416f,0x8),{hasResults:_0x5337da,datas:_0x13a57c}=await insertHasPassword(_0x45e117,_0x374d6b,_0x4ac17f);if(!_0x5337da)return{'status':0x194,'message':_0x23c684(0x8d)};const [_0x1dfe28,_0x2b37c0,_0x24c167,_0x3a697a]=await Promise['all']([Setting_1[_0x23c684(0x7e)][_0x23c684(0x7b)]({'where':{'key':'smtpauth'}}),Setting_1[_0x23c684(0x7e)][_0x23c684(0x7b)]({'where':{'key':_0x23c684(0x80)}}),Setting_1['default'][_0x23c684(0x7b)]({'where':{'key':_0x23c684(0x84)}}),Setting_1[_0x23c684(0x7e)][_0x23c684(0x7b)]({'where':{'key':_0x23c684(0x72)}})]),_0x1a6267=_0x1dfe28?.[_0x23c684(0x7d)],_0x52683f=_0x2b37c0?.[_0x23c684(0x7d)],_0x15c679=_0x24c167?.['value'],_0x7fc97b=_0x52683f,_0x5547f9=_0x3a697a?.[_0x23c684(0x7d)];if(!_0x1a6267||!_0x52683f||!_0x15c679||!_0x5547f9)throw new Error(_0x23c684(0x8e));const _0x73b90a=nodemailer_1['default']['createTransport']({'host':_0x1a6267,'port':Number(_0x5547f9),'secure':![],'auth':{'user':_0x52683f,'pass':_0x15c679}}),_0x420670={'from':_0x7fc97b,'to':_0x45e117,'subject':'Senha\x20Alterada\x20com\x20Sucesso','text':_0x23c684(0x81)},_0x272c07=await _0x73b90a[_0x23c684(0x76)](_0x420670);return _0x272c07;}catch(_0x500a54){return console[_0x23c684(0x73)](_0x23c684(0x79),_0x500a54),{'status':0x1f4,'message':_0x23c684(0x89)};}},filterUser=async(_0x3a0819,_0xd4d34)=>{const _0x329f65=a629_0xca57b7,_0x4abdd6='SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x20\x27'+_0x3a0819+'\x27\x20AND\x20\x22resetPassword\x22\x20!=\x20\x27\x27',_0x57f69b=await database_1[_0x329f65(0x7e)][_0x329f65(0x8c)](_0x4abdd6,{'type':sequelize_1['default'][_0x329f65(0x6b)][_0x329f65(0x8f)]});return{'hasResult':_0x57f69b['length']>0x0,'data':_0x57f69b};},insertHasPassword=async(_0x4799eb,_0xd79dda,_0x97e2e9)=>{const _0x57c940=a629_0xca57b7,_0x3a6697='SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x20\x27'+_0x4799eb+_0x57c940(0x69)+_0xd79dda+'\x27',_0x379e55=await database_1[_0x57c940(0x7e)]['query'](_0x3a6697,{'type':sequelize_1[_0x57c940(0x7e)]['QueryTypes'][_0x57c940(0x8f)]}),_0x194ffd=_0x57c940(0x65)+_0x97e2e9+_0x57c940(0x85)+_0x4799eb+_0x57c940(0x69)+_0xd79dda+'\x27',_0x592207=await database_1['default'][_0x57c940(0x8c)](_0x194ffd,{'type':sequelize_1[_0x57c940(0x7e)][_0x57c940(0x6b)][_0x57c940(0x8b)]});return{'hasResults':_0x592207[0x1]>0x0,'datas':_0x379e55};};exports[a629_0xca57b7(0x7e)]=ResetPassword;