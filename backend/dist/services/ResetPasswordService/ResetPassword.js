const a524_0x242bf0=a524_0x56da;(function(_0x11bd1a,_0x3b8d8c){const _0x406476=a524_0x56da,_0x30bdc1=_0x11bd1a();while(!![]){try{const _0x4a98cb=-parseInt(_0x406476(0x177))/0x1*(parseInt(_0x406476(0x181))/0x2)+parseInt(_0x406476(0x161))/0x3+parseInt(_0x406476(0x183))/0x4*(parseInt(_0x406476(0x17b))/0x5)+-parseInt(_0x406476(0x180))/0x6+-parseInt(_0x406476(0x16a))/0x7*(parseInt(_0x406476(0x179))/0x8)+parseInt(_0x406476(0x17c))/0x9*(parseInt(_0x406476(0x184))/0xa)+-parseInt(_0x406476(0x162))/0xb*(-parseInt(_0x406476(0x164))/0xc);if(_0x4a98cb===_0x3b8d8c)break;else _0x30bdc1['push'](_0x30bdc1['shift']());}catch(_0x362401){_0x30bdc1['push'](_0x30bdc1['shift']());}}}(a524_0x252d,0xba4c8));function a524_0x56da(_0x3c8739,_0x558570){const _0x5ee0b9=a524_0x252d();return a524_0x56da=function(_0x4cfa7f,_0x64e135){_0x4cfa7f=_0x4cfa7f-0x15b;let _0x252d1e=_0x5ee0b9[_0x4cfa7f];return _0x252d1e;},a524_0x56da(_0x3c8739,_0x558570);}function a524_0x252d(){const _0x2aa0a8=['5052SuhiJF','\x27\x20AND\x20\x22resetPassword\x22\x20=\x20\x27','query','search','toString','Olá,\x0a\x0aSua\x20senha\x20foi\x20alterada\x20com\x20sucesso.\x0a\x0aSe\x20você\x20não\x20realizou\x20essa\x20alteração,\x20entre\x20em\x20contato\x20conosco\x20imediatamente.\x0a\x0aAtenciosamente','182zQvdnW','bcryptjs','SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x20\x27','SELECT','sequelize','Erro\x20ao\x20redefinir\x20senha:','apply','defineProperty','error','QueryTypes','UPDATE','\x27,\x20\x22resetPassword\x22\x20=\x20\x27\x27\x20WHERE\x20email=\x20\x27','value','17789VYcYJA','\x27\x20AND\x20\x22resetPassword\x22\x20!=\x20\x27\x27','171232gMOrqv','../../models/Setting','1030GYVpjU','9aWDoxz','Erro\x20interno\x20do\x20servidor','../../database','__esModule','3808356FSDjST','98TaECAO','clientsecretsmtpauth','20100eiePwO','760cXkbow','(((.+)+)+)+$','Email\x20ou\x20token\x20não\x20encontrado','usersmtpauth','default','nodemailer','hash','findOne','Token\x20não\x20encontrado\x20ou\x20inválido','smtpport','constructor','1094454GFJBWr','37257SvyWfC','UPDATE\x20\x22Users\x22\x20SET\x20\x22passwordHash\x22=\x20\x27'];a524_0x252d=function(){return _0x2aa0a8;};return a524_0x252d();}const a524_0x64e135=(function(){let _0x1895d9=!![];return function(_0x41aaa8,_0x2678c3){const _0x57537f=_0x1895d9?function(){const _0x33e3a6=a524_0x56da;if(_0x2678c3){const _0x612beb=_0x2678c3[_0x33e3a6(0x170)](_0x41aaa8,arguments);return _0x2678c3=null,_0x612beb;}}:function(){};return _0x1895d9=![],_0x57537f;};}()),a524_0x4cfa7f=a524_0x64e135(this,function(){const _0x512af5=a524_0x56da;return a524_0x4cfa7f[_0x512af5(0x168)]()[_0x512af5(0x167)](_0x512af5(0x185))['toString']()[_0x512af5(0x160)](a524_0x4cfa7f)['search']('(((.+)+)+)+$');});a524_0x4cfa7f();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2b8ffe){const _0x32ef77=a524_0x56da;return _0x2b8ffe&&_0x2b8ffe[_0x32ef77(0x17f)]?_0x2b8ffe:{'default':_0x2b8ffe};};Object[a524_0x242bf0(0x171)](exports,a524_0x242bf0(0x17f),{'value':!![]});const sequelize_1=__importDefault(require(a524_0x242bf0(0x16e))),database_1=__importDefault(require(a524_0x242bf0(0x17e))),nodemailer_1=__importDefault(require(a524_0x242bf0(0x15b))),Setting_1=__importDefault(require(a524_0x242bf0(0x17a))),bcryptjs_1=require(a524_0x242bf0(0x16b)),ResetPassword=async(_0x176c2c,_0x25a457,_0x39351e)=>{const _0x1bc0b5=a524_0x242bf0;try{const {hasResult:_0x2726a7,data:_0x462246}=await filterUser(_0x176c2c,_0x25a457);if(!_0x2726a7)return{'status':0x194,'message':_0x1bc0b5(0x186)};const _0x35274e=await(0x0,bcryptjs_1[_0x1bc0b5(0x15c)])(_0x39351e,0x8),{hasResults:_0x11a4a5,datas:_0xbe222f}=await insertHasPassword(_0x176c2c,_0x25a457,_0x35274e);if(!_0x11a4a5)return{'status':0x194,'message':_0x1bc0b5(0x15e)};const [_0x2fd694,_0x4aff23,_0x514f35,_0x180b13]=await Promise['all']([Setting_1['default'][_0x1bc0b5(0x15d)]({'where':{'key':'smtpauth'}}),Setting_1[_0x1bc0b5(0x188)][_0x1bc0b5(0x15d)]({'where':{'key':_0x1bc0b5(0x187)}}),Setting_1['default'][_0x1bc0b5(0x15d)]({'where':{'key':_0x1bc0b5(0x182)}}),Setting_1[_0x1bc0b5(0x188)][_0x1bc0b5(0x15d)]({'where':{'key':_0x1bc0b5(0x15f)}})]),_0x65c214=_0x2fd694?.['value'],_0x21959b=_0x4aff23?.[_0x1bc0b5(0x176)],_0x2ec6d0=_0x514f35?.['value'],_0x527082=_0x21959b,_0x56f721=_0x180b13?.[_0x1bc0b5(0x176)];if(!_0x65c214||!_0x21959b||!_0x2ec6d0||!_0x56f721)throw new Error('Configurações\x20SMTP\x20estão\x20incompletas');const _0x2d6ae1=nodemailer_1[_0x1bc0b5(0x188)]['createTransport']({'host':_0x65c214,'port':Number(_0x56f721),'secure':![],'auth':{'user':_0x21959b,'pass':_0x2ec6d0}}),_0x46b030={'from':_0x527082,'to':_0x176c2c,'subject':'Senha\x20Alterada\x20com\x20Sucesso','text':_0x1bc0b5(0x169)},_0x5278d0=await _0x2d6ae1['sendMail'](_0x46b030);return _0x5278d0;}catch(_0x179765){return console[_0x1bc0b5(0x172)](_0x1bc0b5(0x16f),_0x179765),{'status':0x1f4,'message':_0x1bc0b5(0x17d)};}},filterUser=async(_0x16a331,_0x18ff27)=>{const _0x2ccb18=a524_0x242bf0,_0xcf3c96=_0x2ccb18(0x16c)+_0x16a331+_0x2ccb18(0x178),_0xa0f8d0=await database_1[_0x2ccb18(0x188)]['query'](_0xcf3c96,{'type':sequelize_1[_0x2ccb18(0x188)]['QueryTypes'][_0x2ccb18(0x16d)]});return{'hasResult':_0xa0f8d0['length']>0x0,'data':_0xa0f8d0};},insertHasPassword=async(_0x32e975,_0x41907c,_0x4fd87f)=>{const _0x1ebae9=a524_0x242bf0,_0xfb1b05=_0x1ebae9(0x16c)+_0x32e975+_0x1ebae9(0x165)+_0x41907c+'\x27',_0x2c8798=await database_1[_0x1ebae9(0x188)]['query'](_0xfb1b05,{'type':sequelize_1[_0x1ebae9(0x188)][_0x1ebae9(0x173)]['SELECT']}),_0x1b8bf9=_0x1ebae9(0x163)+_0x4fd87f+_0x1ebae9(0x175)+_0x32e975+_0x1ebae9(0x165)+_0x41907c+'\x27',_0x1552ee=await database_1[_0x1ebae9(0x188)][_0x1ebae9(0x166)](_0x1b8bf9,{'type':sequelize_1[_0x1ebae9(0x188)][_0x1ebae9(0x173)][_0x1ebae9(0x174)]});return{'hasResults':_0x1552ee[0x1]>0x0,'datas':_0x2c8798};};exports[a524_0x242bf0(0x188)]=ResetPassword;