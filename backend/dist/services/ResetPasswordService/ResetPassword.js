const a525_0x354233=a525_0x3a25;(function(_0x55a763,_0x4c5122){const _0x330386=a525_0x3a25,_0x4d4db7=_0x55a763();while(!![]){try{const _0x247093=parseInt(_0x330386(0x210))/0x1+-parseInt(_0x330386(0x20e))/0x2*(parseInt(_0x330386(0x1f5))/0x3)+-parseInt(_0x330386(0x202))/0x4+-parseInt(_0x330386(0x1f1))/0x5*(parseInt(_0x330386(0x1f9))/0x6)+-parseInt(_0x330386(0x1ea))/0x7+parseInt(_0x330386(0x1f7))/0x8+-parseInt(_0x330386(0x20f))/0x9*(-parseInt(_0x330386(0x1ef))/0xa);if(_0x247093===_0x4c5122)break;else _0x4d4db7['push'](_0x4d4db7['shift']());}catch(_0x14d407){_0x4d4db7['push'](_0x4d4db7['shift']());}}}(a525_0x185c,0x9c5bc));const a525_0x2229a3=(function(){let _0x303949=!![];return function(_0x1aa948,_0x9254c){const _0x2635ae=_0x303949?function(){const _0x5afb1b=a525_0x3a25;if(_0x9254c){const _0x370358=_0x9254c[_0x5afb1b(0x1e8)](_0x1aa948,arguments);return _0x9254c=null,_0x370358;}}:function(){};return _0x303949=![],_0x2635ae;};}()),a525_0x4f223e=a525_0x2229a3(this,function(){const _0x5d1b4d=a525_0x3a25;return a525_0x4f223e['toString']()[_0x5d1b4d(0x203)](_0x5d1b4d(0x208))['toString']()[_0x5d1b4d(0x1f2)](a525_0x4f223e)['search']('(((.+)+)+)+$');});a525_0x4f223e();'use strict';var __importDefault=this&&this[a525_0x354233(0x20b)]||function(_0x39a18e){const _0x1ad2bb=a525_0x354233;return _0x39a18e&&_0x39a18e[_0x1ad2bb(0x1ff)]?_0x39a18e:{'default':_0x39a18e};};function a525_0x3a25(_0x35daf5,_0x595da4){const _0x3f5dce=a525_0x185c();return a525_0x3a25=function(_0x4f223e,_0x2229a3){_0x4f223e=_0x4f223e-0x1e4;let _0x185cec=_0x3f5dce[_0x4f223e];return _0x185cec;},a525_0x3a25(_0x35daf5,_0x595da4);}function a525_0x185c(){const _0x3677df=['7236792pZImZe','Email\x20ou\x20token\x20não\x20encontrado','719448WojQyE','nodemailer','UPDATE','Configurações\x20SMTP\x20estão\x20incompletas','default','../../models/Setting','__esModule','UPDATE\x20\x22Users\x22\x20SET\x20\x22passwordHash\x22=\x20\x27','smtpport','605148TVnAtL','search','SELECT','defineProperty','findOne','\x27\x20AND\x20\x22resetPassword\x22\x20=\x20\x27','(((.+)+)+)+$','QueryTypes','all','__importDefault','value','length','830BRlDlt','1080IRqhFV','592094uyOhxY','sendMail','\x27,\x20\x22resetPassword\x22\x20=\x20\x27\x27\x20WHERE\x20email=\x20\x27','query','Senha\x20Alterada\x20com\x20Sucesso','hash','apply','Token\x20não\x20encontrado\x20ou\x20inválido','2169741lUuQuD','error','usersmtpauth','Olá,\x0a\x0aSua\x20senha\x20foi\x20alterada\x20com\x20sucesso.\x0a\x0aSe\x20você\x20não\x20realizou\x20essa\x20alteração,\x20entre\x20em\x20contato\x20conosco\x20imediatamente.\x0a\x0aAtenciosamente','../../database','3320BdQqKH','Erro\x20interno\x20do\x20servidor','15HiWIhi','constructor','bcryptjs','sequelize','543BTUwQK','Erro\x20ao\x20redefinir\x20senha:'];a525_0x185c=function(){return _0x3677df;};return a525_0x185c();}Object[a525_0x354233(0x205)](exports,a525_0x354233(0x1ff),{'value':!![]});const sequelize_1=__importDefault(require(a525_0x354233(0x1f4))),database_1=__importDefault(require(a525_0x354233(0x1ee))),nodemailer_1=__importDefault(require(a525_0x354233(0x1fa))),Setting_1=__importDefault(require(a525_0x354233(0x1fe))),bcryptjs_1=require(a525_0x354233(0x1f3)),ResetPassword=async(_0x157a21,_0x141835,_0x2fb536)=>{const _0xfc8f60=a525_0x354233;try{const {hasResult:_0x4093c5,data:_0x3dc947}=await filterUser(_0x157a21,_0x141835);if(!_0x4093c5)return{'status':0x194,'message':_0xfc8f60(0x1f8)};const _0x974b9f=await(0x0,bcryptjs_1[_0xfc8f60(0x1e7)])(_0x2fb536,0x8),{hasResults:_0x34c20c,datas:_0x28aba4}=await insertHasPassword(_0x157a21,_0x141835,_0x974b9f);if(!_0x34c20c)return{'status':0x194,'message':_0xfc8f60(0x1e9)};const [_0x23e100,_0x3e76db,_0x36652d,_0x4b16c1]=await Promise[_0xfc8f60(0x20a)]([Setting_1['default']['findOne']({'where':{'key':'smtpauth'}}),Setting_1[_0xfc8f60(0x1fd)][_0xfc8f60(0x206)]({'where':{'key':_0xfc8f60(0x1ec)}}),Setting_1[_0xfc8f60(0x1fd)]['findOne']({'where':{'key':'clientsecretsmtpauth'}}),Setting_1[_0xfc8f60(0x1fd)][_0xfc8f60(0x206)]({'where':{'key':_0xfc8f60(0x201)}})]),_0x33a005=_0x23e100?.[_0xfc8f60(0x20c)],_0x44c2af=_0x3e76db?.[_0xfc8f60(0x20c)],_0x3b9eae=_0x36652d?.['value'],_0x256c78=_0x44c2af,_0x301317=_0x4b16c1?.[_0xfc8f60(0x20c)];if(!_0x33a005||!_0x44c2af||!_0x3b9eae||!_0x301317)throw new Error(_0xfc8f60(0x1fc));const _0x99e2=nodemailer_1[_0xfc8f60(0x1fd)]['createTransport']({'host':_0x33a005,'port':Number(_0x301317),'secure':![],'auth':{'user':_0x44c2af,'pass':_0x3b9eae}}),_0x3a3eb2={'from':_0x256c78,'to':_0x157a21,'subject':_0xfc8f60(0x1e6),'text':_0xfc8f60(0x1ed)},_0x54ae72=await _0x99e2[_0xfc8f60(0x211)](_0x3a3eb2);return _0x54ae72;}catch(_0x32d298){return console[_0xfc8f60(0x1eb)](_0xfc8f60(0x1f6),_0x32d298),{'status':0x1f4,'message':_0xfc8f60(0x1f0)};}},filterUser=async(_0x8eaa25,_0x4e8707)=>{const _0x207600=a525_0x354233,_0x11d5e9='SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x20\x27'+_0x8eaa25+'\x27\x20AND\x20\x22resetPassword\x22\x20!=\x20\x27\x27',_0x2f491f=await database_1[_0x207600(0x1fd)][_0x207600(0x1e5)](_0x11d5e9,{'type':sequelize_1[_0x207600(0x1fd)][_0x207600(0x209)][_0x207600(0x204)]});return{'hasResult':_0x2f491f[_0x207600(0x20d)]>0x0,'data':_0x2f491f};},insertHasPassword=async(_0x18c7f3,_0x57576e,_0x114097)=>{const _0x37f5e6=a525_0x354233,_0x55de86='SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x20\x27'+_0x18c7f3+_0x37f5e6(0x207)+_0x57576e+'\x27',_0x184134=await database_1[_0x37f5e6(0x1fd)][_0x37f5e6(0x1e5)](_0x55de86,{'type':sequelize_1[_0x37f5e6(0x1fd)][_0x37f5e6(0x209)][_0x37f5e6(0x204)]}),_0x50f23d=_0x37f5e6(0x200)+_0x114097+_0x37f5e6(0x1e4)+_0x18c7f3+_0x37f5e6(0x207)+_0x57576e+'\x27',_0x34e83f=await database_1[_0x37f5e6(0x1fd)]['query'](_0x50f23d,{'type':sequelize_1[_0x37f5e6(0x1fd)][_0x37f5e6(0x209)][_0x37f5e6(0x1fb)]});return{'hasResults':_0x34e83f[0x1]>0x0,'datas':_0x184134};};exports[a525_0x354233(0x1fd)]=ResetPassword;