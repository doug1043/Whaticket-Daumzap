const a524_0x4ed978=a524_0xe63e;(function(_0x3d7d82,_0x14c6aa){const _0xb7c297=a524_0xe63e,_0x43b0ea=_0x3d7d82();while(!![]){try{const _0x5e4ec3=-parseInt(_0xb7c297(0x1fc))/0x1*(-parseInt(_0xb7c297(0x21a))/0x2)+-parseInt(_0xb7c297(0x1fd))/0x3+-parseInt(_0xb7c297(0x211))/0x4+-parseInt(_0xb7c297(0x217))/0x5*(-parseInt(_0xb7c297(0x1f8))/0x6)+parseInt(_0xb7c297(0x219))/0x7*(-parseInt(_0xb7c297(0x204))/0x8)+parseInt(_0xb7c297(0x215))/0x9*(parseInt(_0xb7c297(0x216))/0xa)+parseInt(_0xb7c297(0x20f))/0xb;if(_0x5e4ec3===_0x14c6aa)break;else _0x43b0ea['push'](_0x43b0ea['shift']());}catch(_0x3fbc94){_0x43b0ea['push'](_0x43b0ea['shift']());}}}(a524_0x4677,0xd9fdf));function a524_0x4677(){const _0x2b10e0=['apply','error','sequelize','SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x20\x27','SELECT','sendMail','4567506EWvWWT','Olá,\x0a\x0aSua\x20senha\x20foi\x20alterada\x20com\x20sucesso.\x0a\x0aSe\x20você\x20não\x20realizou\x20essa\x20alteração,\x20entre\x20em\x20contato\x20conosco\x20imediatamente.\x0a\x0aAtenciosamente','default','\x27\x20AND\x20\x22resetPassword\x22\x20=\x20\x27','1LjRfxU','2902350MAVEAw','smtpport','\x27\x20AND\x20\x22resetPassword\x22\x20!=\x20\x27\x27','createTransport','../../database','Configurações\x20SMTP\x20estão\x20incompletas','Email\x20ou\x20token\x20não\x20encontrado','2312032uQfrbW','(((.+)+)+)+$','\x27,\x20\x22resetPassword\x22\x20=\x20\x27\x27\x20WHERE\x20email=\x20\x27','usersmtpauth','query','smtpauth','Erro\x20ao\x20redefinir\x20senha:','constructor','value','UPDATE','nodemailer','11659098gKjDUa','UPDATE\x20\x22Users\x22\x20SET\x20\x22passwordHash\x22=\x20\x27','4104316xnqRdm','clientsecretsmtpauth','Token\x20não\x20encontrado\x20ou\x20inválido','toString','9JGBhHB','9064370HqsqQZ','10fRNIES','length','35QUeYNN','1685174VxdwId','search','all','__esModule','Senha\x20Alterada\x20com\x20Sucesso','__importDefault','defineProperty','QueryTypes','findOne'];a524_0x4677=function(){return _0x2b10e0;};return a524_0x4677();}const a524_0x50328f=(function(){let _0x9ae660=!![];return function(_0x40b124,_0xf35673){const _0x402f29=_0x9ae660?function(){const _0x250411=a524_0xe63e;if(_0xf35673){const _0x251332=_0xf35673[_0x250411(0x223)](_0x40b124,arguments);return _0xf35673=null,_0x251332;}}:function(){};return _0x9ae660=![],_0x402f29;};}()),a524_0x34c926=a524_0x50328f(this,function(){const _0x3f10c7=a524_0xe63e;return a524_0x34c926[_0x3f10c7(0x214)]()[_0x3f10c7(0x21b)]('(((.+)+)+)+$')['toString']()[_0x3f10c7(0x20b)](a524_0x34c926)['search'](_0x3f10c7(0x205));});a524_0x34c926();'use strict';var __importDefault=this&&this[a524_0x4ed978(0x21f)]||function(_0x607f30){const _0x1d511f=a524_0x4ed978;return _0x607f30&&_0x607f30[_0x1d511f(0x21d)]?_0x607f30:{'default':_0x607f30};};Object[a524_0x4ed978(0x220)](exports,a524_0x4ed978(0x21d),{'value':!![]});function a524_0xe63e(_0x5d45d0,_0x25fe5a){const _0x52491a=a524_0x4677();return a524_0xe63e=function(_0x34c926,_0x50328f){_0x34c926=_0x34c926-0x1f4;let _0x46772e=_0x52491a[_0x34c926];return _0x46772e;},a524_0xe63e(_0x5d45d0,_0x25fe5a);}const sequelize_1=__importDefault(require(a524_0x4ed978(0x1f4))),database_1=__importDefault(require(a524_0x4ed978(0x201))),nodemailer_1=__importDefault(require(a524_0x4ed978(0x20e))),Setting_1=__importDefault(require('../../models/Setting')),bcryptjs_1=require('bcryptjs'),ResetPassword=async(_0x4f14a9,_0x45ba06,_0x57ef5c)=>{const _0x453f27=a524_0x4ed978;try{const {hasResult:_0x3d26a0,data:_0x29137f}=await filterUser(_0x4f14a9,_0x45ba06);if(!_0x3d26a0)return{'status':0x194,'message':_0x453f27(0x203)};const _0x336a81=await(0x0,bcryptjs_1['hash'])(_0x57ef5c,0x8),{hasResults:_0xce4b8a,datas:_0x5add4f}=await insertHasPassword(_0x4f14a9,_0x45ba06,_0x336a81);if(!_0xce4b8a)return{'status':0x194,'message':_0x453f27(0x213)};const [_0x21073b,_0x2545c9,_0x259d68,_0x2ad1a6]=await Promise[_0x453f27(0x21c)]([Setting_1[_0x453f27(0x1fa)][_0x453f27(0x222)]({'where':{'key':_0x453f27(0x209)}}),Setting_1['default'][_0x453f27(0x222)]({'where':{'key':_0x453f27(0x207)}}),Setting_1[_0x453f27(0x1fa)][_0x453f27(0x222)]({'where':{'key':_0x453f27(0x212)}}),Setting_1[_0x453f27(0x1fa)]['findOne']({'where':{'key':_0x453f27(0x1fe)}})]),_0x34bd29=_0x21073b?.[_0x453f27(0x20c)],_0x2f9055=_0x2545c9?.[_0x453f27(0x20c)],_0x48c88c=_0x259d68?.[_0x453f27(0x20c)],_0x302e30=_0x2f9055,_0x4f3247=_0x2ad1a6?.[_0x453f27(0x20c)];if(!_0x34bd29||!_0x2f9055||!_0x48c88c||!_0x4f3247)throw new Error(_0x453f27(0x202));const _0x3011fb=nodemailer_1[_0x453f27(0x1fa)][_0x453f27(0x200)]({'host':_0x34bd29,'port':Number(_0x4f3247),'secure':![],'auth':{'user':_0x2f9055,'pass':_0x48c88c}}),_0xb7d6b5={'from':_0x302e30,'to':_0x4f14a9,'subject':_0x453f27(0x21e),'text':_0x453f27(0x1f9)},_0x3a80dd=await _0x3011fb[_0x453f27(0x1f7)](_0xb7d6b5);return _0x3a80dd;}catch(_0x5b180b){return console[_0x453f27(0x224)](_0x453f27(0x20a),_0x5b180b),{'status':0x1f4,'message':'Erro\x20interno\x20do\x20servidor'};}},filterUser=async(_0x52d0cc,_0x442f29)=>{const _0x1400ed=a524_0x4ed978,_0x5de423=_0x1400ed(0x1f5)+_0x52d0cc+_0x1400ed(0x1ff),_0x36670f=await database_1['default'][_0x1400ed(0x208)](_0x5de423,{'type':sequelize_1[_0x1400ed(0x1fa)]['QueryTypes'][_0x1400ed(0x1f6)]});return{'hasResult':_0x36670f[_0x1400ed(0x218)]>0x0,'data':_0x36670f};},insertHasPassword=async(_0x1dc65e,_0x2615d5,_0x11b4f9)=>{const _0x1ce805=a524_0x4ed978,_0x501275=_0x1ce805(0x1f5)+_0x1dc65e+'\x27\x20AND\x20\x22resetPassword\x22\x20=\x20\x27'+_0x2615d5+'\x27',_0x4876e7=await database_1['default'][_0x1ce805(0x208)](_0x501275,{'type':sequelize_1['default'][_0x1ce805(0x221)][_0x1ce805(0x1f6)]}),_0x4fd760=_0x1ce805(0x210)+_0x11b4f9+_0x1ce805(0x206)+_0x1dc65e+_0x1ce805(0x1fb)+_0x2615d5+'\x27',_0x5e0d32=await database_1[_0x1ce805(0x1fa)]['query'](_0x4fd760,{'type':sequelize_1[_0x1ce805(0x1fa)][_0x1ce805(0x221)][_0x1ce805(0x20d)]});return{'hasResults':_0x5e0d32[0x1]>0x0,'datas':_0x4876e7};};exports[a524_0x4ed978(0x1fa)]=ResetPassword;