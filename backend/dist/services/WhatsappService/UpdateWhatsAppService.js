const a570_0x5cb220=a570_0x2618;function a570_0x4129(){const _0x43e5b4=['__importStar','6559qHfWgi','get','string','validate','toString','apply','update','./AssociateWhatsappQueue','shape','call','__createBinding','1109778rBIysy','5809340noiuPJ','findOne','904796NBOzue','default','108873JkdEeE','39294408IbTujA','../../errors/AppError','writable','544RXnzag','__importDefault','getOwnPropertyDescriptor','10pzuiGl','__setModuleDefault','11MeyPDH','__esModule','configurable','3274756fNpwES','hasOwnProperty','search','./ShowWhatsAppService','ERR_WAPP_GREETING_REQUIRED','object','length','../../models/Whatsapp','prototype','constructor','create','10698anxFwV','message','defineProperty','yup','10BrfegQ','not'];a570_0x4129=function(){return _0x43e5b4;};return a570_0x4129();}(function(_0x35875e,_0x3e1205){const _0x4f22a2=a570_0x2618,_0xa351e3=_0x35875e();while(!![]){try{const _0x2889ef=parseInt(_0x4f22a2(0x9c))/0x1+-parseInt(_0x4f22a2(0xb9))/0x2*(parseInt(_0x4f22a2(0x99))/0x3)+parseInt(_0x4f22a2(0xaa))/0x4*(-parseInt(_0x4f22a2(0xa5))/0x5)+parseInt(_0x4f22a2(0xb5))/0x6*(parseInt(_0x4f22a2(0x8e))/0x7)+-parseInt(_0x4f22a2(0xa2))/0x8*(parseInt(_0x4f22a2(0x9e))/0x9)+-parseInt(_0x4f22a2(0x9a))/0xa+parseInt(_0x4f22a2(0xa7))/0xb*(parseInt(_0x4f22a2(0x9f))/0xc);if(_0x2889ef===_0x3e1205)break;else _0xa351e3['push'](_0xa351e3['shift']());}catch(_0x2e44d6){_0xa351e3['push'](_0xa351e3['shift']());}}}(a570_0x4129,0xea3e7));const a570_0x47f9e4=(function(){let _0x449808=!![];return function(_0x4390d7,_0x431987){const _0x3e86d2=_0x449808?function(){const _0x4270fb=a570_0x2618;if(_0x431987){const _0x12ff32=_0x431987[_0x4270fb(0x93)](_0x4390d7,arguments);return _0x431987=null,_0x12ff32;}}:function(){};return _0x449808=![],_0x3e86d2;};}()),a570_0x28dd46=a570_0x47f9e4(this,function(){const _0x5ae152=a570_0x2618;return a570_0x28dd46[_0x5ae152(0x92)]()[_0x5ae152(0xac)]('(((.+)+)+)+$')['toString']()[_0x5ae152(0xb3)](a570_0x28dd46)[_0x5ae152(0xac)]('(((.+)+)+)+$');});a570_0x28dd46();'use strict';var __createBinding=this&&this[a570_0x5cb220(0x98)]||(Object[a570_0x5cb220(0xb4)]?function(_0xd97c00,_0x385543,_0x2fc78d,_0x1ebebf){const _0x428836=a570_0x5cb220;if(_0x1ebebf===undefined)_0x1ebebf=_0x2fc78d;var _0x3670e2=Object[_0x428836(0xa4)](_0x385543,_0x2fc78d);(!_0x3670e2||(_0x428836(0x8f)in _0x3670e2?!_0x385543[_0x428836(0xa8)]:_0x3670e2[_0x428836(0xa1)]||_0x3670e2[_0x428836(0xa9)]))&&(_0x3670e2={'enumerable':!![],'get':function(){return _0x385543[_0x2fc78d];}}),Object[_0x428836(0xb7)](_0xd97c00,_0x1ebebf,_0x3670e2);}:function(_0x2f615f,_0x225bf1,_0x281623,_0x5cec4b){if(_0x5cec4b===undefined)_0x5cec4b=_0x281623;_0x2f615f[_0x5cec4b]=_0x225bf1[_0x281623];}),__setModuleDefault=this&&this[a570_0x5cb220(0xa6)]||(Object[a570_0x5cb220(0xb4)]?function(_0x4e04ca,_0x524d5e){const _0x5f4364=a570_0x5cb220;Object['defineProperty'](_0x4e04ca,_0x5f4364(0x9d),{'enumerable':!![],'value':_0x524d5e});}:function(_0x44e6d1,_0xcc3747){const _0x11bc33=a570_0x5cb220;_0x44e6d1[_0x11bc33(0x9d)]=_0xcc3747;}),__importStar=this&&this[a570_0x5cb220(0xbb)]||function(_0x1db101){const _0x1bee92=a570_0x5cb220;if(_0x1db101&&_0x1db101[_0x1bee92(0xa8)])return _0x1db101;var _0x529400={};if(_0x1db101!=null){for(var _0x2ac740 in _0x1db101)if(_0x2ac740!==_0x1bee92(0x9d)&&Object[_0x1bee92(0xb2)][_0x1bee92(0xab)][_0x1bee92(0x97)](_0x1db101,_0x2ac740))__createBinding(_0x529400,_0x1db101,_0x2ac740);}return __setModuleDefault(_0x529400,_0x1db101),_0x529400;},__importDefault=this&&this[a570_0x5cb220(0xa3)]||function(_0x4cf581){return _0x4cf581&&_0x4cf581['__esModule']?_0x4cf581:{'default':_0x4cf581};};Object[a570_0x5cb220(0xb7)](exports,a570_0x5cb220(0xa8),{'value':!![]});const Yup=__importStar(require(a570_0x5cb220(0xb8))),sequelize_1=require('sequelize'),AppError_1=__importDefault(require(a570_0x5cb220(0xa0))),Whatsapp_1=__importDefault(require(a570_0x5cb220(0xb1))),ShowWhatsAppService_1=__importDefault(require(a570_0x5cb220(0xad))),AssociateWhatsappQueue_1=__importDefault(require(a570_0x5cb220(0x95))),UpdateWhatsAppService=async({whatsappData:_0x334884,whatsappId:_0x491227,companyId:_0x352fca})=>{const _0x4f05eb=a570_0x5cb220,_0x1bc5c8=Yup[_0x4f05eb(0xaf)]()[_0x4f05eb(0x96)]({'name':Yup[_0x4f05eb(0x90)]()['min'](0x2),'status':Yup['string'](),'isDefault':Yup['boolean']()}),{name:_0x2053a4,status:_0x4c8c17,isDefault:_0x3631e,session:_0x5f011f,greetingMessage:_0x1aebe5,complationMessage:_0x359920,outOfHoursMessage:_0x23bf19,ratingMessage:_0x463604,queueIds:queueIds=[],token:_0x205263,timeSendQueue:_0x5a7960,sendIdQueue:sendIdQueue=null,promptId:_0x183ea2,integrationId:_0x51f797,maxUseBotQueues:_0x5ce3bc,timeUseBotQueues:_0xad1d49,expiresTicket:_0x3eac75,expiresInactiveMessage:_0x42e708,allowGroup:_0x21ea7e,importOldMessages:_0x3e4693,importRecentMessages:_0x3d8b25,closedTicketsPostImported:_0x4bcfe3,importOldMessagesGroups:_0x5168c4}=_0x334884;try{await _0x1bc5c8[_0x4f05eb(0x91)]({'name':_0x2053a4,'status':_0x4c8c17,'isDefault':_0x3631e});}catch(_0x41b584){throw new AppError_1['default'](_0x41b584[_0x4f05eb(0xb6)]);}if(queueIds[_0x4f05eb(0xb0)]>0x1&&!_0x1aebe5)throw new AppError_1[(_0x4f05eb(0x9d))](_0x4f05eb(0xae));let _0x3a721f=null;_0x3631e&&(_0x3a721f=await Whatsapp_1[_0x4f05eb(0x9d)][_0x4f05eb(0x9b)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0x4f05eb(0xba)]]:_0x491227},'companyId':_0x352fca}}),_0x3a721f&&await _0x3a721f[_0x4f05eb(0x94)]({'isDefault':![]}));const _0x1dbc28=await(0x0,ShowWhatsAppService_1[_0x4f05eb(0x9d)])(_0x491227,_0x352fca);return await _0x1dbc28[_0x4f05eb(0x94)]({'name':_0x2053a4,'status':_0x4c8c17,'session':_0x5f011f,'greetingMessage':_0x1aebe5,'complationMessage':_0x359920,'outOfHoursMessage':_0x23bf19,'ratingMessage':_0x463604,'isDefault':_0x3631e,'companyId':_0x352fca,'token':_0x205263,'timeSendQueue':_0x5a7960,'sendIdQueue':sendIdQueue,'promptId':_0x183ea2?_0x183ea2:null,'integrationId':_0x51f797?_0x51f797:null,'maxUseBotQueues':_0x5ce3bc,'timeUseBotQueues':_0xad1d49,'expiresTicket':_0x3eac75,'expiresInactiveMessage':_0x42e708,'allowGroup':_0x21ea7e,'importOldMessages':_0x3e4693,'importRecentMessages':_0x3d8b25,'closedTicketsPostImported':_0x4bcfe3,'importOldMessagesGroups':_0x5168c4}),await(0x0,AssociateWhatsappQueue_1['default'])(_0x1dbc28,queueIds),{'whatsapp':_0x1dbc28,'oldDefaultWhatsapp':_0x3a721f};};function a570_0x2618(_0x473b69,_0x522163){const _0x2a7b6f=a570_0x4129();return a570_0x2618=function(_0x28dd46,_0x47f9e4){_0x28dd46=_0x28dd46-0x8e;let _0x412959=_0x2a7b6f[_0x28dd46];return _0x412959;},a570_0x2618(_0x473b69,_0x522163);}exports[a570_0x5cb220(0x9d)]=UpdateWhatsAppService;