'use strict';var a592_0x3d9978=a592_0x5a71;(function(_0xf7cc1f,_0x3f3b8b){var _0x50ba4d=a592_0x5a71,_0xa2a5b9=_0xf7cc1f();while(!![]){try{var _0x463871=-parseInt(_0x50ba4d(0x1fc))/0x1*(-parseInt(_0x50ba4d(0x211))/0x2)+parseInt(_0x50ba4d(0x1fa))/0x3*(parseInt(_0x50ba4d(0x1ff))/0x4)+-parseInt(_0x50ba4d(0x206))/0x5+parseInt(_0x50ba4d(0x209))/0x6+-parseInt(_0x50ba4d(0x1f3))/0x7+parseInt(_0x50ba4d(0x1fe))/0x8*(-parseInt(_0x50ba4d(0x210))/0x9)+parseInt(_0x50ba4d(0x20c))/0xa*(parseInt(_0x50ba4d(0x214))/0xb);if(_0x463871===_0x3f3b8b)break;else _0xa2a5b9['push'](_0xa2a5b9['shift']());}catch(_0x49a224){_0xa2a5b9['push'](_0xa2a5b9['shift']());}}}(a592_0x5bd2,0xa1e93));var __createBinding=this&&this[a592_0x3d9978(0x201)]||(Object[a592_0x3d9978(0x213)]?function(_0x4594b2,_0x233262,_0x48f4b9,_0x10c4ca){var _0x369e96=a592_0x3d9978;if(_0x10c4ca===undefined)_0x10c4ca=_0x48f4b9;var _0x4be5f5=Object[_0x369e96(0x1ef)](_0x233262,_0x48f4b9);(!_0x4be5f5||('get'in _0x4be5f5?!_0x233262[_0x369e96(0x20f)]:_0x4be5f5[_0x369e96(0x1ea)]||_0x4be5f5[_0x369e96(0x1f1)]))&&(_0x4be5f5={'enumerable':!![],'get':function(){return _0x233262[_0x48f4b9];}}),Object[_0x369e96(0x1f8)](_0x4594b2,_0x10c4ca,_0x4be5f5);}:function(_0x52a55f,_0x7e7f60,_0x3d869d,_0x1e37ed){if(_0x1e37ed===undefined)_0x1e37ed=_0x3d869d;_0x52a55f[_0x1e37ed]=_0x7e7f60[_0x3d869d];}),__setModuleDefault=this&&this[a592_0x3d9978(0x208)]||(Object[a592_0x3d9978(0x213)]?function(_0x4020f9,_0x22f688){var _0x9360ab=a592_0x3d9978;Object[_0x9360ab(0x1f8)](_0x4020f9,'default',{'enumerable':!![],'value':_0x22f688});}:function(_0x127b5a,_0x262657){var _0x201963=a592_0x3d9978;_0x127b5a[_0x201963(0x1fd)]=_0x262657;}),__importStar=this&&this[a592_0x3d9978(0x1ec)]||(function(){var _0x25e856=(function(){var _0x315826=!![];return function(_0x2d000b,_0x3f32dd){var _0x8d54c2=_0x315826?function(){if(_0x3f32dd){var _0x339fa8=_0x3f32dd['apply'](_0x2d000b,arguments);return _0x3f32dd=null,_0x339fa8;}}:function(){};return _0x315826=![],_0x8d54c2;};}()),_0x473727=_0x25e856(this,function(){var _0x34d8bb=a592_0x5a71;return _0x473727[_0x34d8bb(0x1ed)]()[_0x34d8bb(0x20b)](_0x34d8bb(0x1eb))[_0x34d8bb(0x1ed)]()['constructor'](_0x473727)[_0x34d8bb(0x20b)](_0x34d8bb(0x1eb));});_0x473727();var _0x10c71f=function(_0x33dba0){var _0x16e72a=a592_0x5a71;return _0x10c71f=Object[_0x16e72a(0x205)]||function(_0x14a256){var _0x1b5b6f=_0x16e72a,_0x349eba=[];for(var _0x54ba2c in _0x14a256)if(Object[_0x1b5b6f(0x20e)]['hasOwnProperty'][_0x1b5b6f(0x203)](_0x14a256,_0x54ba2c))_0x349eba[_0x349eba[_0x1b5b6f(0x202)]]=_0x54ba2c;return _0x349eba;},_0x10c71f(_0x33dba0);};return function(_0x56b8c2){var _0x1550e2=a592_0x5a71;if(_0x56b8c2&&_0x56b8c2['__esModule'])return _0x56b8c2;var _0x138962={};if(_0x56b8c2!=null){for(var _0x2e8cb0=_0x10c71f(_0x56b8c2),_0x3508c3=0x0;_0x3508c3<_0x2e8cb0[_0x1550e2(0x202)];_0x3508c3++)if(_0x2e8cb0[_0x3508c3]!==_0x1550e2(0x1fd))__createBinding(_0x138962,_0x56b8c2,_0x2e8cb0[_0x3508c3]);}return __setModuleDefault(_0x138962,_0x56b8c2),_0x138962;};}()),__importDefault=this&&this[a592_0x3d9978(0x1f9)]||function(_0x3e386b){var _0x5abdca=a592_0x3d9978;return _0x3e386b&&_0x3e386b[_0x5abdca(0x20f)]?_0x3e386b:{'default':_0x3e386b};};Object[a592_0x3d9978(0x1f8)](exports,a592_0x3d9978(0x20f),{'value':!![]});function a592_0x5bd2(){var _0x14a472=['3423375Mgxikn','string','__setModuleDefault','1285962aFwQJr','object','search','10azxnHM','../../models/Whatsapp','prototype','__esModule','439686NUZXuL','100594XwIrWv','./AssociateWhatsappQueue','create','16074157fweLuN','writable','(((.+)+)+)+$','__importStar','toString','../../errors/AppError','getOwnPropertyDescriptor','update','configurable','min','7800604EPnEwP','yup','boolean','./ShowWhatsAppService','not','defineProperty','__importDefault','3RpJGSp','ERR_WAPP_GREETING_REQUIRED','7nqXrgI','default','136fmhmbH','5060236CypwBS','findOne','__createBinding','length','call','message','getOwnPropertyNames'];a592_0x5bd2=function(){return _0x14a472;};return a592_0x5bd2();}const Yup=__importStar(require(a592_0x3d9978(0x1f4))),sequelize_1=require('sequelize'),AppError_1=__importDefault(require(a592_0x3d9978(0x1ee))),Whatsapp_1=__importDefault(require(a592_0x3d9978(0x20d))),ShowWhatsAppService_1=__importDefault(require(a592_0x3d9978(0x1f6))),AssociateWhatsappQueue_1=__importDefault(require(a592_0x3d9978(0x212))),UpdateWhatsAppService=async({whatsappData:_0x406683,whatsappId:_0x4bfec9,companyId:_0x188128})=>{var _0x2797b3=a592_0x3d9978;const {name:_0x375399,status:_0x24cc84,isDefault:_0x12ae69,session:_0x4e9191,greetingMessage:_0x4ca8ab,complationMessage:_0x5c995c,outOfHoursMessage:_0x47cc62,useRating:_0x48afec,ratingMessage:_0x11aefd,transferMessage:_0xa6c9cb,queueIds:queueIds=[],token:_0x168c0d,timeSendQueue:_0x426a34,integrationId:_0x8f058a,sendIdQueue:sendIdQueue=null,maxUseBotQueues:_0xc5f29,expiresTicket:_0x4061ae,expiresInactiveMessage:_0xde6c25,allowGroup:_0x30945b,importOldMessages:_0x15d77a,schedules:_0x57dfaf,whenExpireTicket:_0x28483f,inactiveMessageTime:_0x23e659,inactiveMessage:_0x53b17f,automaticRestart:_0x3a5665,period:_0x5ee146,lastRestartAt:_0x1f30fd}=_0x406683,_0x36a334=Yup[_0x2797b3(0x20a)]()['shape']({'name':Yup[_0x2797b3(0x207)]()[_0x2797b3(0x1f2)](0x2),'status':Yup[_0x2797b3(0x207)](),'isDefault':Yup[_0x2797b3(0x1f5)]()});try{await _0x36a334['validate']({'name':_0x375399,'status':_0x24cc84,'isDefault':_0x12ae69});}catch(_0xa9ca5e){throw new AppError_1['default'](_0xa9ca5e[_0x2797b3(0x204)]);}if(queueIds['length']>0x1&&!_0x4ca8ab)throw new AppError_1[(_0x2797b3(0x1fd))](_0x2797b3(0x1fb));let _0x3dae5b=null;_0x12ae69&&(_0x3dae5b=await Whatsapp_1['default'][_0x2797b3(0x200)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0x2797b3(0x1f7)]]:_0x4bfec9},'companyId':_0x188128}}),_0x3dae5b&&await _0x3dae5b[_0x2797b3(0x1f0)]({'isDefault':![]}));const _0x1ab1db=await(0x0,ShowWhatsAppService_1[_0x2797b3(0x1fd)])(_0x4bfec9,_0x188128);return await _0x1ab1db[_0x2797b3(0x1f0)]({'name':_0x375399,'status':_0x24cc84,'session':_0x4e9191,'greetingMessage':_0x4ca8ab,'complationMessage':_0x5c995c,'outOfHoursMessage':_0x47cc62,'useRating':_0x48afec,'ratingMessage':_0x11aefd,'isDefault':_0x12ae69,'companyId':_0x188128,'token':_0x168c0d,'transferMessage':_0xa6c9cb,'integrationId':_0x8f058a?_0x8f058a:null,'maxUseBotQueues':_0xc5f29,'timeSendQueue':_0x426a34,'sendIdQueue':sendIdQueue,'expiresTicket':_0x4061ae,'expiresInactiveMessage':_0xde6c25,'allowGroup':_0x30945b,'importOldMessages':_0x15d77a,'schedules':_0x57dfaf,'whenExpireTicket':_0x28483f,'inactiveMessageTime':_0x23e659,'inactiveMessage':_0x53b17f,'automaticRestart':_0x3a5665,'period':_0x5ee146,'lastRestartAt':_0x1f30fd}),await(0x0,AssociateWhatsappQueue_1[_0x2797b3(0x1fd)])(_0x1ab1db,queueIds),{'whatsapp':_0x1ab1db,'oldDefaultWhatsapp':_0x3dae5b};};function a592_0x5a71(_0x55106a,_0xb934fc){var _0x18edce=a592_0x5bd2();return a592_0x5a71=function(_0x753e1c,_0x2485a6){_0x753e1c=_0x753e1c-0x1ea;var _0x5bd2fa=_0x18edce[_0x753e1c];return _0x5bd2fa;},a592_0x5a71(_0x55106a,_0xb934fc);}exports[a592_0x3d9978(0x1fd)]=UpdateWhatsAppService;