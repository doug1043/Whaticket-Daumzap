'use strict';var a586_0x4e392d=a586_0x42dc;function a586_0x42dc(_0x272ac3,_0x56fa0f){var _0x16b76e=a586_0x476d();return a586_0x42dc=function(_0x54374a,_0x19a406){_0x54374a=_0x54374a-0x65;var _0x476d0c=_0x16b76e[_0x54374a];return _0x476d0c;},a586_0x42dc(_0x272ac3,_0x56fa0f);}(function(_0x15e508,_0x40a8c7){var _0x24fac6=a586_0x42dc,_0x4742ad=_0x15e508();while(!![]){try{var _0xd53684=parseInt(_0x24fac6(0x80))/0x1+parseInt(_0x24fac6(0x72))/0x2+-parseInt(_0x24fac6(0x74))/0x3*(-parseInt(_0x24fac6(0x7d))/0x4)+-parseInt(_0x24fac6(0x6e))/0x5*(parseInt(_0x24fac6(0x75))/0x6)+parseInt(_0x24fac6(0x8e))/0x7*(parseInt(_0x24fac6(0x70))/0x8)+parseInt(_0x24fac6(0x65))/0x9+-parseInt(_0x24fac6(0x88))/0xa;if(_0xd53684===_0x40a8c7)break;else _0x4742ad['push'](_0x4742ad['shift']());}catch(_0x264e44){_0x4742ad['push'](_0x4742ad['shift']());}}}(a586_0x476d,0x2d4d9));var __createBinding=this&&this[a586_0x4e392d(0x83)]||(Object[a586_0x4e392d(0x76)]?function(_0x5936c8,_0x20f03a,_0x142aff,_0x573220){var _0x3dbe2f=a586_0x4e392d;if(_0x573220===undefined)_0x573220=_0x142aff;var _0x58d087=Object[_0x3dbe2f(0x87)](_0x20f03a,_0x142aff);(!_0x58d087||(_0x3dbe2f(0x7a)in _0x58d087?!_0x20f03a[_0x3dbe2f(0x77)]:_0x58d087['writable']||_0x58d087[_0x3dbe2f(0x82)]))&&(_0x58d087={'enumerable':!![],'get':function(){return _0x20f03a[_0x142aff];}}),Object[_0x3dbe2f(0x81)](_0x5936c8,_0x573220,_0x58d087);}:function(_0xf0cbb0,_0x42c5e4,_0x190a2a,_0x1585e7){if(_0x1585e7===undefined)_0x1585e7=_0x190a2a;_0xf0cbb0[_0x1585e7]=_0x42c5e4[_0x190a2a];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a586_0x4e392d(0x76)]?function(_0x155331,_0xc8be06){var _0x19ff16=a586_0x4e392d;Object['defineProperty'](_0x155331,_0x19ff16(0x8d),{'enumerable':!![],'value':_0xc8be06});}:function(_0xf929d7,_0xab8fac){var _0x2f8869=a586_0x4e392d;_0xf929d7[_0x2f8869(0x8d)]=_0xab8fac;}),__importStar=this&&this['__importStar']||(function(){var _0x5cc847=(function(){var _0x14f103=!![];return function(_0x293e11,_0x9ede57){var _0xd425f8=_0x14f103?function(){if(_0x9ede57){var _0x399038=_0x9ede57['apply'](_0x293e11,arguments);return _0x9ede57=null,_0x399038;}}:function(){};return _0x14f103=![],_0xd425f8;};}()),_0x129c8c=_0x5cc847(this,function(){var _0x4a0000=a586_0x42dc;return _0x129c8c[_0x4a0000(0x6c)]()[_0x4a0000(0x71)](_0x4a0000(0x6b))[_0x4a0000(0x6c)]()[_0x4a0000(0x7e)](_0x129c8c)[_0x4a0000(0x71)](_0x4a0000(0x6b));});_0x129c8c();var _0x4c5a8e=function(_0x14352a){return _0x4c5a8e=Object['getOwnPropertyNames']||function(_0xda5a2){var _0x27454f=a586_0x42dc,_0x53c9d6=[];for(var _0x42e0ae in _0xda5a2)if(Object[_0x27454f(0x8b)][_0x27454f(0x68)][_0x27454f(0x7b)](_0xda5a2,_0x42e0ae))_0x53c9d6[_0x53c9d6[_0x27454f(0x66)]]=_0x42e0ae;return _0x53c9d6;},_0x4c5a8e(_0x14352a);};return function(_0x4c435e){var _0xcdacf5=a586_0x42dc;if(_0x4c435e&&_0x4c435e[_0xcdacf5(0x77)])return _0x4c435e;var _0x41f337={};if(_0x4c435e!=null){for(var _0x4a2c44=_0x4c5a8e(_0x4c435e),_0x6151e9=0x0;_0x6151e9<_0x4a2c44[_0xcdacf5(0x66)];_0x6151e9++)if(_0x4a2c44[_0x6151e9]!==_0xcdacf5(0x8d))__createBinding(_0x41f337,_0x4c435e,_0x4a2c44[_0x6151e9]);}return __setModuleDefault(_0x41f337,_0x4c435e),_0x41f337;};}()),__importDefault=this&&this[a586_0x4e392d(0x84)]||function(_0x45b254){var _0x5e72dc=a586_0x4e392d;return _0x45b254&&_0x45b254[_0x5e72dc(0x77)]?_0x45b254:{'default':_0x45b254};};Object[a586_0x4e392d(0x81)](exports,a586_0x4e392d(0x77),{'value':!![]});function a586_0x476d(){var _0x21ddc7=['call','not','4bVomkJ','constructor','./ShowWhatsAppService','128451NAtndO','defineProperty','configurable','__createBinding','__importDefault','validate','min','getOwnPropertyDescriptor','6253650mPZPnK','../../models/Whatsapp','update','prototype','./AssociateWhatsappQueue','default','66724jFbwyl','2816532JkuZtZ','length','../../errors/AppError','hasOwnProperty','findOne','object','(((.+)+)+)+$','toString','yup','499700RukSCf','shape','296fzvDgT','search','233518uzxyPC','string','72fQaSpu','6sTyIyt','create','__esModule','ERR_WAPP_GREETING_REQUIRED','sequelize','get'];a586_0x476d=function(){return _0x21ddc7;};return a586_0x476d();}const Yup=__importStar(require(a586_0x4e392d(0x6d))),sequelize_1=require(a586_0x4e392d(0x79)),AppError_1=__importDefault(require(a586_0x4e392d(0x67))),Whatsapp_1=__importDefault(require(a586_0x4e392d(0x89))),ShowWhatsAppService_1=__importDefault(require(a586_0x4e392d(0x7f))),AssociateWhatsappQueue_1=__importDefault(require(a586_0x4e392d(0x8c))),UpdateWhatsAppService=async({whatsappData:_0x21bca5,whatsappId:_0x3e725f,companyId:_0x40459f})=>{var _0x4c2bea=a586_0x4e392d;const {name:_0x5ebfef,status:_0x19153b,isDefault:_0x596e20,session:_0x41a935,greetingMessage:_0x4fce6a,complationMessage:_0x56acb3,outOfHoursMessage:_0x3a5117,ratingMessage:_0x584210,transferMessage:_0x1a35ed,queueIds:queueIds=[],token:_0x46400d,timeSendQueue:_0x3f1cb0,integrationId:_0x3370d2,sendIdQueue:sendIdQueue=null,maxUseBotQueues:_0x5324ac,expiresTicket:_0x328cc8,expiresInactiveMessage:_0x269bb1,allowGroup:_0x5a5fbb,importOldMessages:_0x2e78e3,schedules:_0x1418a7}=_0x21bca5,_0x207b08=Yup[_0x4c2bea(0x6a)]()[_0x4c2bea(0x6f)]({'name':Yup['string']()[_0x4c2bea(0x86)](0x2),'status':Yup[_0x4c2bea(0x73)](),'isDefault':Yup['boolean']()});try{await _0x207b08[_0x4c2bea(0x85)]({'name':_0x5ebfef,'status':_0x19153b,'isDefault':_0x596e20});}catch(_0x8c8e23){throw new AppError_1[(_0x4c2bea(0x8d))](_0x8c8e23['message']);}if(queueIds[_0x4c2bea(0x66)]>0x1&&!_0x4fce6a)throw new AppError_1[(_0x4c2bea(0x8d))](_0x4c2bea(0x78));let _0x471b77=null;_0x596e20&&(_0x471b77=await Whatsapp_1[_0x4c2bea(0x8d)][_0x4c2bea(0x69)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0x4c2bea(0x7c)]]:_0x3e725f},'companyId':_0x40459f}}),_0x471b77&&await _0x471b77[_0x4c2bea(0x8a)]({'isDefault':![]}));const _0x7698fa=await(0x0,ShowWhatsAppService_1[_0x4c2bea(0x8d)])(_0x3e725f,_0x40459f);return await _0x7698fa['update']({'name':_0x5ebfef,'status':_0x19153b,'session':_0x41a935,'greetingMessage':_0x4fce6a,'complationMessage':_0x56acb3,'outOfHoursMessage':_0x3a5117,'ratingMessage':_0x584210,'isDefault':_0x596e20,'companyId':_0x40459f,'token':_0x46400d,'transferMessage':_0x1a35ed,'integrationId':_0x3370d2?_0x3370d2:null,'maxUseBotQueues':_0x5324ac,'timeSendQueue':_0x3f1cb0,'sendIdQueue':sendIdQueue,'expiresTicket':_0x328cc8,'expiresInactiveMessage':_0x269bb1,'allowGroup':_0x5a5fbb,'importOldMessages':_0x2e78e3,'schedules':_0x1418a7}),await(0x0,AssociateWhatsappQueue_1[_0x4c2bea(0x8d)])(_0x7698fa,queueIds),{'whatsapp':_0x7698fa,'oldDefaultWhatsapp':_0x471b77};};exports[a586_0x4e392d(0x8d)]=UpdateWhatsAppService;