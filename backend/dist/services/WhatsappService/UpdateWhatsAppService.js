const a568_0x43ab5d=a568_0x5443;function a568_0x40cc(){const _0x5bd2a0=['__importStar','131248jxskWf','yup','6RNULkD','length','3569898pPajHv','get','search','toString','__createBinding','1929965DltbHM','1078oUWGok','sequelize','ERR_WAPP_GREETING_REQUIRED','create','__setModuleDefault','defineProperty','__esModule','string','writable','validate','1056LoNHjS','186485pOMSDt','constructor','apply','hasOwnProperty','min','(((.+)+)+)+$','update','2324508cLfyvF','../../models/Whatsapp','1462869BLAgYz','object','default'];a568_0x40cc=function(){return _0x5bd2a0;};return a568_0x40cc();}(function(_0x2cd366,_0x4ec81c){const _0xde7c95=a568_0x5443,_0x296f2f=_0x2cd366();while(!![]){try{const _0x181fdb=-parseInt(_0xde7c95(0x11f))/0x1+parseInt(_0xde7c95(0x10e))/0x2+-parseInt(_0xde7c95(0x10c))/0x3*(parseInt(_0xde7c95(0x10a))/0x4)+-parseInt(_0xde7c95(0x113))/0x5+-parseInt(_0xde7c95(0x104))/0x6+parseInt(_0xde7c95(0x114))/0x7*(-parseInt(_0xde7c95(0x11e))/0x8)+parseInt(_0xde7c95(0x106))/0x9;if(_0x181fdb===_0x4ec81c)break;else _0x296f2f['push'](_0x296f2f['shift']());}catch(_0x4e0c53){_0x296f2f['push'](_0x296f2f['shift']());}}}(a568_0x40cc,0xdc20a));const a568_0x4fbac1=(function(){let _0xe8d824=!![];return function(_0x21efd7,_0x1821a3){const _0x2a11c1=_0xe8d824?function(){const _0x121d9c=a568_0x5443;if(_0x1821a3){const _0x361228=_0x1821a3[_0x121d9c(0x121)](_0x21efd7,arguments);return _0x1821a3=null,_0x361228;}}:function(){};return _0xe8d824=![],_0x2a11c1;};}()),a568_0x3e56ae=a568_0x4fbac1(this,function(){const _0x449a3d=a568_0x5443;return a568_0x3e56ae['toString']()[_0x449a3d(0x110)](_0x449a3d(0x102))[_0x449a3d(0x111)]()[_0x449a3d(0x120)](a568_0x3e56ae)[_0x449a3d(0x110)](_0x449a3d(0x102));});a568_0x3e56ae();'use strict';function a568_0x5443(_0xc40b00,_0x19bb82){const _0x28e76a=a568_0x40cc();return a568_0x5443=function(_0x3e56ae,_0x4fbac1){_0x3e56ae=_0x3e56ae-0x100;let _0x40cc3e=_0x28e76a[_0x3e56ae];return _0x40cc3e;},a568_0x5443(_0xc40b00,_0x19bb82);}var __createBinding=this&&this[a568_0x43ab5d(0x112)]||(Object[a568_0x43ab5d(0x117)]?function(_0x25e2e5,_0x4a2f46,_0x59439e,_0x35865a){const _0x5a273e=a568_0x43ab5d;if(_0x35865a===undefined)_0x35865a=_0x59439e;var _0x4399ee=Object['getOwnPropertyDescriptor'](_0x4a2f46,_0x59439e);(!_0x4399ee||(_0x5a273e(0x10f)in _0x4399ee?!_0x4a2f46['__esModule']:_0x4399ee[_0x5a273e(0x11c)]||_0x4399ee['configurable']))&&(_0x4399ee={'enumerable':!![],'get':function(){return _0x4a2f46[_0x59439e];}}),Object['defineProperty'](_0x25e2e5,_0x35865a,_0x4399ee);}:function(_0x39307f,_0x5238d3,_0x3515c2,_0x59cee3){if(_0x59cee3===undefined)_0x59cee3=_0x3515c2;_0x39307f[_0x59cee3]=_0x5238d3[_0x3515c2];}),__setModuleDefault=this&&this[a568_0x43ab5d(0x118)]||(Object[a568_0x43ab5d(0x117)]?function(_0x5cdb7a,_0x1b0309){const _0x4e6601=a568_0x43ab5d;Object[_0x4e6601(0x119)](_0x5cdb7a,_0x4e6601(0x108),{'enumerable':!![],'value':_0x1b0309});}:function(_0x9e5507,_0x392851){const _0x2f2f5c=a568_0x43ab5d;_0x9e5507[_0x2f2f5c(0x108)]=_0x392851;}),__importStar=this&&this[a568_0x43ab5d(0x109)]||function(_0x2a3c70){const _0x4beccd=a568_0x43ab5d;if(_0x2a3c70&&_0x2a3c70[_0x4beccd(0x11a)])return _0x2a3c70;var _0x47f963={};if(_0x2a3c70!=null){for(var _0xd0286 in _0x2a3c70)if(_0xd0286!==_0x4beccd(0x108)&&Object['prototype'][_0x4beccd(0x100)]['call'](_0x2a3c70,_0xd0286))__createBinding(_0x47f963,_0x2a3c70,_0xd0286);}return __setModuleDefault(_0x47f963,_0x2a3c70),_0x47f963;},__importDefault=this&&this['__importDefault']||function(_0x616f7d){const _0x18b627=a568_0x43ab5d;return _0x616f7d&&_0x616f7d[_0x18b627(0x11a)]?_0x616f7d:{'default':_0x616f7d};};Object[a568_0x43ab5d(0x119)](exports,a568_0x43ab5d(0x11a),{'value':!![]});const Yup=__importStar(require(a568_0x43ab5d(0x10b))),sequelize_1=require(a568_0x43ab5d(0x115)),AppError_1=__importDefault(require('../../errors/AppError')),Whatsapp_1=__importDefault(require(a568_0x43ab5d(0x105))),ShowWhatsAppService_1=__importDefault(require('./ShowWhatsAppService')),AssociateWhatsappQueue_1=__importDefault(require('./AssociateWhatsappQueue')),UpdateWhatsAppService=async({whatsappData:_0x556e54,whatsappId:_0x3d60ea,companyId:_0x34da17})=>{const _0x5566bb=a568_0x43ab5d,_0x43f029=Yup[_0x5566bb(0x107)]()['shape']({'name':Yup[_0x5566bb(0x11b)]()[_0x5566bb(0x101)](0x2),'status':Yup[_0x5566bb(0x11b)](),'isDefault':Yup['boolean']()}),{name:_0x6f29ef,status:_0x574e05,isDefault:_0x575958,session:_0x20a07c,greetingMessage:_0x2bddf8,complationMessage:_0x25df28,outOfHoursMessage:_0xdaae32,ratingMessage:_0x59067a,queueIds:queueIds=[],token:_0x19a3d4,timeSendQueue:_0x4ac96b,sendIdQueue:sendIdQueue=null,promptId:_0xbf8bf,integrationId:_0x2e58a3,maxUseBotQueues:_0x346624,timeUseBotQueues:_0x375066,expiresTicket:_0x5debad,expiresInactiveMessage:_0x3cc4e5,allowGroup:_0x29adee,importOldMessages:_0x560307,importRecentMessages:_0x238b80,closedTicketsPostImported:_0x471576,importOldMessagesGroups:_0x44b39f}=_0x556e54;try{await _0x43f029[_0x5566bb(0x11d)]({'name':_0x6f29ef,'status':_0x574e05,'isDefault':_0x575958});}catch(_0x3790b8){throw new AppError_1[(_0x5566bb(0x108))](_0x3790b8['message']);}if(queueIds[_0x5566bb(0x10d)]>0x1&&!_0x2bddf8)throw new AppError_1[(_0x5566bb(0x108))](_0x5566bb(0x116));let _0x5c0244=null;_0x575958&&(_0x5c0244=await Whatsapp_1[_0x5566bb(0x108)]['findOne']({'where':{'isDefault':!![],'id':{[sequelize_1['Op']['not']]:_0x3d60ea},'companyId':_0x34da17}}),_0x5c0244&&await _0x5c0244[_0x5566bb(0x103)]({'isDefault':![]}));const _0x3a7686=await(0x0,ShowWhatsAppService_1['default'])(_0x3d60ea,_0x34da17);return await _0x3a7686[_0x5566bb(0x103)]({'name':_0x6f29ef,'status':_0x574e05,'session':_0x20a07c,'greetingMessage':_0x2bddf8,'complationMessage':_0x25df28,'outOfHoursMessage':_0xdaae32,'ratingMessage':_0x59067a,'isDefault':_0x575958,'companyId':_0x34da17,'token':_0x19a3d4,'timeSendQueue':_0x4ac96b,'sendIdQueue':sendIdQueue,'promptId':_0xbf8bf?_0xbf8bf:null,'integrationId':_0x2e58a3?_0x2e58a3:null,'maxUseBotQueues':_0x346624,'timeUseBotQueues':_0x375066,'expiresTicket':_0x5debad,'expiresInactiveMessage':_0x3cc4e5,'allowGroup':_0x29adee,'importOldMessages':_0x560307,'importRecentMessages':_0x238b80,'closedTicketsPostImported':_0x471576,'importOldMessagesGroups':_0x44b39f}),await(0x0,AssociateWhatsappQueue_1['default'])(_0x3a7686,queueIds),{'whatsapp':_0x3a7686,'oldDefaultWhatsapp':_0x5c0244};};exports[a568_0x43ab5d(0x108)]=UpdateWhatsAppService;