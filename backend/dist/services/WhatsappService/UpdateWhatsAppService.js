'use strict';var a595_0x36c029=a595_0x2d8d;(function(_0x4c1ee9,_0x34b3f0){var _0x5b7541=a595_0x2d8d,_0xf2d9b7=_0x4c1ee9();while(!![]){try{var _0xab4235=-parseInt(_0x5b7541(0x1db))/0x1*(-parseInt(_0x5b7541(0x1ba))/0x2)+parseInt(_0x5b7541(0x1bc))/0x3*(parseInt(_0x5b7541(0x1de))/0x4)+parseInt(_0x5b7541(0x1e0))/0x5+-parseInt(_0x5b7541(0x1c8))/0x6*(parseInt(_0x5b7541(0x1c0))/0x7)+parseInt(_0x5b7541(0x1c7))/0x8+-parseInt(_0x5b7541(0x1d7))/0x9+-parseInt(_0x5b7541(0x1cf))/0xa;if(_0xab4235===_0x34b3f0)break;else _0xf2d9b7['push'](_0xf2d9b7['shift']());}catch(_0x509900){_0xf2d9b7['push'](_0xf2d9b7['shift']());}}}(a595_0x1898,0x363c4));var __createBinding=this&&this[a595_0x36c029(0x1d4)]||(Object[a595_0x36c029(0x1d3)]?function(_0x14a921,_0x14b5f9,_0x5d928b,_0x3ebc07){var _0x5808f5=a595_0x36c029;if(_0x3ebc07===undefined)_0x3ebc07=_0x5d928b;var _0x536ed3=Object[_0x5808f5(0x1d1)](_0x14b5f9,_0x5d928b);(!_0x536ed3||(_0x5808f5(0x1bd)in _0x536ed3?!_0x14b5f9['__esModule']:_0x536ed3[_0x5808f5(0x1bb)]||_0x536ed3[_0x5808f5(0x1d0)]))&&(_0x536ed3={'enumerable':!![],'get':function(){return _0x14b5f9[_0x5d928b];}}),Object[_0x5808f5(0x1d9)](_0x14a921,_0x3ebc07,_0x536ed3);}:function(_0x51442c,_0x2010f9,_0x3d9518,_0x3ac5e4){if(_0x3ac5e4===undefined)_0x3ac5e4=_0x3d9518;_0x51442c[_0x3ac5e4]=_0x2010f9[_0x3d9518];}),__setModuleDefault=this&&this[a595_0x36c029(0x1dd)]||(Object[a595_0x36c029(0x1d3)]?function(_0x4c35c8,_0x536b5b){var _0x4d9ae8=a595_0x36c029;Object['defineProperty'](_0x4c35c8,_0x4d9ae8(0x1dc),{'enumerable':!![],'value':_0x536b5b});}:function(_0x11afa3,_0x5ba4a1){var _0x3f418d=a595_0x36c029;_0x11afa3[_0x3f418d(0x1dc)]=_0x5ba4a1;}),__importStar=this&&this['__importStar']||(function(){var _0x3d57ec=(function(){var _0x27aa7e=!![];return function(_0x45d5bf,_0x50a70f){var _0x5eba0a=_0x27aa7e?function(){if(_0x50a70f){var _0x11595e=_0x50a70f['apply'](_0x45d5bf,arguments);return _0x50a70f=null,_0x11595e;}}:function(){};return _0x27aa7e=![],_0x5eba0a;};}()),_0x3cbde4=_0x3d57ec(this,function(){var _0x31c4cc=a595_0x2d8d;return _0x3cbde4[_0x31c4cc(0x1d6)]()[_0x31c4cc(0x1da)](_0x31c4cc(0x1cb))[_0x31c4cc(0x1d6)]()[_0x31c4cc(0x1bf)](_0x3cbde4)[_0x31c4cc(0x1da)](_0x31c4cc(0x1cb));});_0x3cbde4();var _0x121027=function(_0x5e10ba){var _0x25dee8=a595_0x2d8d;return _0x121027=Object[_0x25dee8(0x1b9)]||function(_0x4acef9){var _0x588ead=_0x25dee8,_0x14380c=[];for(var _0x4d38ff in _0x4acef9)if(Object[_0x588ead(0x1be)][_0x588ead(0x1ce)][_0x588ead(0x1cc)](_0x4acef9,_0x4d38ff))_0x14380c[_0x14380c[_0x588ead(0x1c9)]]=_0x4d38ff;return _0x14380c;},_0x121027(_0x5e10ba);};return function(_0x2b1adf){var _0x107634=a595_0x2d8d;if(_0x2b1adf&&_0x2b1adf[_0x107634(0x1c4)])return _0x2b1adf;var _0x3af2ed={};if(_0x2b1adf!=null){for(var _0x142250=_0x121027(_0x2b1adf),_0x246bda=0x0;_0x246bda<_0x142250[_0x107634(0x1c9)];_0x246bda++)if(_0x142250[_0x246bda]!==_0x107634(0x1dc))__createBinding(_0x3af2ed,_0x2b1adf,_0x142250[_0x246bda]);}return __setModuleDefault(_0x3af2ed,_0x2b1adf),_0x3af2ed;};}()),__importDefault=this&&this['__importDefault']||function(_0x153dfd){var _0x31ec34=a595_0x36c029;return _0x153dfd&&_0x153dfd[_0x31ec34(0x1c4)]?_0x153dfd:{'default':_0x153dfd};};Object['defineProperty'](exports,a595_0x36c029(0x1c4),{'value':!![]});function a595_0x2d8d(_0x4c7278,_0x111773){var _0x1ed50a=a595_0x1898();return a595_0x2d8d=function(_0x4db6a7,_0x34a7d7){_0x4db6a7=_0x4db6a7-0x1b9;var _0x1898c8=_0x1ed50a[_0x4db6a7];return _0x1898c8;},a595_0x2d8d(_0x4c7278,_0x111773);}const Yup=__importStar(require(a595_0x36c029(0x1c2))),sequelize_1=require(a595_0x36c029(0x1c1)),AppError_1=__importDefault(require(a595_0x36c029(0x1d8))),Whatsapp_1=__importDefault(require(a595_0x36c029(0x1c6))),ShowWhatsAppService_1=__importDefault(require('./ShowWhatsAppService')),AssociateWhatsappQueue_1=__importDefault(require('./AssociateWhatsappQueue')),UpdateWhatsAppService=async({whatsappData:_0x46d136,whatsappId:_0x4f9d02,companyId:_0x1b8bd9})=>{var _0x16f4ee=a595_0x36c029;const {name:_0x6b08f1,status:_0x2b29f3,isDefault:_0x3e73e5,session:_0xbb9f02,greetingMessage:_0x4acfcb,complationMessage:_0x1edc2f,outOfHoursMessage:_0x381b72,useRating:_0x529c27,ratingMessage:_0x4b7358,transferMessage:_0x36ed7a,queueIds:queueIds=[],token:_0x152ab3,timeSendQueue:_0x51c64a,integrationId:_0x8abee4,sendIdQueue:sendIdQueue=null,maxUseBotQueues:_0x179681,expiresTicket:_0x385c56,expiresInactiveMessage:_0x5a9d90,allowGroup:_0x4a57cd,importOldMessages:_0x58dd87,schedules:_0x46c7ae,whenExpireTicket:_0x32c599,inactiveMessageTime:_0x2a36ca,inactiveMessage:_0x24818f,automaticRestart:_0x280a6a,period:_0x221e0d,lastRestartAt:_0x4f3737}=_0x46d136,_0x44d701=Yup['object']()[_0x16f4ee(0x1c3)]({'name':Yup[_0x16f4ee(0x1c5)]()[_0x16f4ee(0x1ca)](0x2),'status':Yup[_0x16f4ee(0x1c5)](),'isDefault':Yup[_0x16f4ee(0x1d5)]()});try{await _0x44d701['validate']({'name':_0x6b08f1,'status':_0x2b29f3,'isDefault':_0x3e73e5});}catch(_0x2c4f62){throw new AppError_1[(_0x16f4ee(0x1dc))](_0x2c4f62['message']);}if(queueIds[_0x16f4ee(0x1c9)]>0x1&&!_0x4acfcb)throw new AppError_1[(_0x16f4ee(0x1dc))](_0x16f4ee(0x1cd));let _0x245f45=null;_0x3e73e5&&(_0x245f45=await Whatsapp_1[_0x16f4ee(0x1dc)][_0x16f4ee(0x1df)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op']['not']]:_0x4f9d02},'companyId':_0x1b8bd9}}),_0x245f45&&await _0x245f45['update']({'isDefault':![]}));const _0x1c983e=await(0x0,ShowWhatsAppService_1[_0x16f4ee(0x1dc)])(_0x4f9d02,_0x1b8bd9);return await _0x1c983e[_0x16f4ee(0x1d2)]({'name':_0x6b08f1,'status':_0x2b29f3,'session':_0xbb9f02,'greetingMessage':_0x4acfcb,'complationMessage':_0x1edc2f,'outOfHoursMessage':_0x381b72,'useRating':_0x529c27,'ratingMessage':_0x4b7358,'isDefault':_0x3e73e5,'companyId':_0x1b8bd9,'token':_0x152ab3,'transferMessage':_0x36ed7a,'integrationId':_0x8abee4?_0x8abee4:null,'maxUseBotQueues':_0x179681,'timeSendQueue':_0x51c64a,'sendIdQueue':sendIdQueue,'expiresTicket':_0x385c56,'expiresInactiveMessage':_0x5a9d90,'allowGroup':_0x4a57cd,'importOldMessages':_0x58dd87,'schedules':_0x46c7ae,'whenExpireTicket':_0x32c599,'inactiveMessageTime':_0x2a36ca,'inactiveMessage':_0x24818f,'automaticRestart':_0x280a6a,'period':_0x221e0d,'lastRestartAt':_0x4f3737}),await(0x0,AssociateWhatsappQueue_1[_0x16f4ee(0x1dc)])(_0x1c983e,queueIds),{'whatsapp':_0x1c983e,'oldDefaultWhatsapp':_0x245f45};};exports['default']=UpdateWhatsAppService;function a595_0x1898(){var _0x336742=['521TRulep','default','__setModuleDefault','528jQJyFm','findOne','2125530bpvkoJ','getOwnPropertyNames','1174FGBiek','writable','1101iPaIXm','get','prototype','constructor','7NevsWw','sequelize','yup','shape','__esModule','string','../../models/Whatsapp','57664jBrEtx','2279652OrTowW','length','min','(((.+)+)+)+$','call','ERR_WAPP_GREETING_REQUIRED','hasOwnProperty','1376600EeUnQB','configurable','getOwnPropertyDescriptor','update','create','__createBinding','boolean','toString','421515tjhnUy','../../errors/AppError','defineProperty','search'];a595_0x1898=function(){return _0x336742;};return a595_0x1898();}