const a568_0x3516c8=a568_0x37c7;(function(_0x563cdf,_0x4ec86a){const _0x4f65cb=a568_0x37c7,_0x221132=_0x563cdf();while(!![]){try{const _0x301126=parseInt(_0x4f65cb(0xf4))/0x1*(parseInt(_0x4f65cb(0x104))/0x2)+-parseInt(_0x4f65cb(0x116))/0x3*(-parseInt(_0x4f65cb(0xf7))/0x4)+-parseInt(_0x4f65cb(0xfa))/0x5*(parseInt(_0x4f65cb(0x107))/0x6)+parseInt(_0x4f65cb(0xfd))/0x7*(-parseInt(_0x4f65cb(0x10f))/0x8)+parseInt(_0x4f65cb(0x10c))/0x9+-parseInt(_0x4f65cb(0x119))/0xa+parseInt(_0x4f65cb(0xfc))/0xb*(parseInt(_0x4f65cb(0x117))/0xc);if(_0x301126===_0x4ec86a)break;else _0x221132['push'](_0x221132['shift']());}catch(_0x32efc4){_0x221132['push'](_0x221132['shift']());}}}(a568_0x246f,0xcd47f));const a568_0x1005b0=(function(){let _0x5cbfbf=!![];return function(_0x547a78,_0x10243d){const _0x278be4=_0x5cbfbf?function(){const _0x251b6b=a568_0x37c7;if(_0x10243d){const _0x2ccb9c=_0x10243d[_0x251b6b(0x112)](_0x547a78,arguments);return _0x10243d=null,_0x2ccb9c;}}:function(){};return _0x5cbfbf=![],_0x278be4;};}()),a568_0x4aaced=a568_0x1005b0(this,function(){const _0x7feb17=a568_0x37c7;return a568_0x4aaced[_0x7feb17(0xf6)]()['search'](_0x7feb17(0x10e))[_0x7feb17(0xf6)]()[_0x7feb17(0xf5)](a568_0x4aaced)[_0x7feb17(0x105)](_0x7feb17(0x10e));});a568_0x4aaced();function a568_0x246f(){const _0x3eec9a=['defineProperty','call','86369NWWFwB','constructor','toString','12OEQZSm','shape','prototype','155vAGFtA','get','265430AWwHWw','8097404ehXTXL','sequelize','./ShowWhatsAppService','getOwnPropertyDescriptor','findOne','./AssociateWhatsappQueue','update','36NCAxfP','search','__esModule','214296nMXoXJ','boolean','configurable','validate','create','4067577OvRZhm','default','(((.+)+)+)+$','8FMPRlI','string','__setModuleDefault','apply','length','message','__importStar','347181eihUrb','1128tjQXFY','__importDefault','15171970KrWuKT'];a568_0x246f=function(){return _0x3eec9a;};return a568_0x246f();}'use strict';var __createBinding=this&&this['__createBinding']||(Object[a568_0x3516c8(0x10b)]?function(_0xa5d0a9,_0x40273a,_0x561e67,_0x2b7e64){const _0x338ac2=a568_0x3516c8;if(_0x2b7e64===undefined)_0x2b7e64=_0x561e67;var _0x445949=Object[_0x338ac2(0x100)](_0x40273a,_0x561e67);(!_0x445949||(_0x338ac2(0xfb)in _0x445949?!_0x40273a[_0x338ac2(0x106)]:_0x445949['writable']||_0x445949[_0x338ac2(0x109)]))&&(_0x445949={'enumerable':!![],'get':function(){return _0x40273a[_0x561e67];}}),Object[_0x338ac2(0xf2)](_0xa5d0a9,_0x2b7e64,_0x445949);}:function(_0x2ccb63,_0x34fb41,_0x3c92f8,_0x2eec2b){if(_0x2eec2b===undefined)_0x2eec2b=_0x3c92f8;_0x2ccb63[_0x2eec2b]=_0x34fb41[_0x3c92f8];}),__setModuleDefault=this&&this[a568_0x3516c8(0x111)]||(Object['create']?function(_0x5580a4,_0x1507fa){const _0x314f49=a568_0x3516c8;Object[_0x314f49(0xf2)](_0x5580a4,'default',{'enumerable':!![],'value':_0x1507fa});}:function(_0x3fbef0,_0xaa12c8){_0x3fbef0['default']=_0xaa12c8;}),__importStar=this&&this[a568_0x3516c8(0x115)]||function(_0x88078e){const _0x4ade63=a568_0x3516c8;if(_0x88078e&&_0x88078e[_0x4ade63(0x106)])return _0x88078e;var _0x5337b1={};if(_0x88078e!=null){for(var _0x412f90 in _0x88078e)if(_0x412f90!==_0x4ade63(0x10d)&&Object[_0x4ade63(0xf9)]['hasOwnProperty'][_0x4ade63(0xf3)](_0x88078e,_0x412f90))__createBinding(_0x5337b1,_0x88078e,_0x412f90);}return __setModuleDefault(_0x5337b1,_0x88078e),_0x5337b1;},__importDefault=this&&this[a568_0x3516c8(0x118)]||function(_0x4d56a7){const _0xa1b14b=a568_0x3516c8;return _0x4d56a7&&_0x4d56a7[_0xa1b14b(0x106)]?_0x4d56a7:{'default':_0x4d56a7};};Object[a568_0x3516c8(0xf2)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require('yup')),sequelize_1=require(a568_0x3516c8(0xfe)),AppError_1=__importDefault(require('../../errors/AppError')),Whatsapp_1=__importDefault(require('../../models/Whatsapp')),ShowWhatsAppService_1=__importDefault(require(a568_0x3516c8(0xff))),AssociateWhatsappQueue_1=__importDefault(require(a568_0x3516c8(0x102))),UpdateWhatsAppService=async({whatsappData:_0x149da3,whatsappId:_0x36eff2,companyId:_0xfc459a})=>{const _0x444916=a568_0x3516c8,_0x38f18e=Yup['object']()[_0x444916(0xf8)]({'name':Yup['string']()['min'](0x2),'status':Yup[_0x444916(0x110)](),'isDefault':Yup[_0x444916(0x108)]()}),{name:_0x518d4f,status:_0x99f643,isDefault:_0x104a76,session:_0x4ae8a2,greetingMessage:_0x2da5f3,complationMessage:_0x14b5e8,outOfHoursMessage:_0x147e1c,ratingMessage:_0x2b95c6,queueIds:queueIds=[],token:_0x93387c,timeSendQueue:_0x268c2b,sendIdQueue:sendIdQueue=null,promptId:_0x1fa033,integrationId:_0x41f88b,maxUseBotQueues:_0x4049dc,timeUseBotQueues:_0x143977,expiresTicket:_0x4bf643,expiresInactiveMessage:_0x51bdff,allowGroup:_0xd9e1e0,importOldMessages:_0x1200ee,importRecentMessages:_0x20363d,closedTicketsPostImported:_0x14a488,importOldMessagesGroups:_0x206e0b}=_0x149da3;try{await _0x38f18e[_0x444916(0x10a)]({'name':_0x518d4f,'status':_0x99f643,'isDefault':_0x104a76});}catch(_0xe7f1d4){throw new AppError_1[(_0x444916(0x10d))](_0xe7f1d4[_0x444916(0x114)]);}if(queueIds[_0x444916(0x113)]>0x1&&!_0x2da5f3)throw new AppError_1[(_0x444916(0x10d))]('ERR_WAPP_GREETING_REQUIRED');let _0x3cc80b=null;_0x104a76&&(_0x3cc80b=await Whatsapp_1[_0x444916(0x10d)][_0x444916(0x101)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op']['not']]:_0x36eff2},'companyId':_0xfc459a}}),_0x3cc80b&&await _0x3cc80b[_0x444916(0x103)]({'isDefault':![]}));const _0x225b96=await(0x0,ShowWhatsAppService_1[_0x444916(0x10d)])(_0x36eff2,_0xfc459a);return await _0x225b96[_0x444916(0x103)]({'name':_0x518d4f,'status':_0x99f643,'session':_0x4ae8a2,'greetingMessage':_0x2da5f3,'complationMessage':_0x14b5e8,'outOfHoursMessage':_0x147e1c,'ratingMessage':_0x2b95c6,'isDefault':_0x104a76,'companyId':_0xfc459a,'token':_0x93387c,'timeSendQueue':_0x268c2b,'sendIdQueue':sendIdQueue,'promptId':_0x1fa033?_0x1fa033:null,'integrationId':_0x41f88b?_0x41f88b:null,'maxUseBotQueues':_0x4049dc,'timeUseBotQueues':_0x143977,'expiresTicket':_0x4bf643,'expiresInactiveMessage':_0x51bdff,'allowGroup':_0xd9e1e0,'importOldMessages':_0x1200ee,'importRecentMessages':_0x20363d,'closedTicketsPostImported':_0x14a488,'importOldMessagesGroups':_0x206e0b}),await(0x0,AssociateWhatsappQueue_1[_0x444916(0x10d)])(_0x225b96,queueIds),{'whatsapp':_0x225b96,'oldDefaultWhatsapp':_0x3cc80b};};function a568_0x37c7(_0xeecb40,_0x44e147){const _0x4a37cd=a568_0x246f();return a568_0x37c7=function(_0x4aaced,_0x1005b0){_0x4aaced=_0x4aaced-0xf2;let _0x246f48=_0x4a37cd[_0x4aaced];return _0x246f48;},a568_0x37c7(_0xeecb40,_0x44e147);}exports['default']=UpdateWhatsAppService;