const a567_0x3b5a52=a567_0x1aea;(function(_0x742883,_0x2b5173){const _0x36350c=a567_0x1aea,_0x11ab86=_0x742883();while(!![]){try{const _0x1fa437=parseInt(_0x36350c(0x1b4))/0x1+-parseInt(_0x36350c(0x1b5))/0x2*(parseInt(_0x36350c(0x1b1))/0x3)+parseInt(_0x36350c(0x1ae))/0x4*(-parseInt(_0x36350c(0x1ba))/0x5)+parseInt(_0x36350c(0x1ac))/0x6+parseInt(_0x36350c(0x1b7))/0x7+-parseInt(_0x36350c(0x1cb))/0x8*(parseInt(_0x36350c(0x1ad))/0x9)+parseInt(_0x36350c(0x1c2))/0xa;if(_0x1fa437===_0x2b5173)break;else _0x11ab86['push'](_0x11ab86['shift']());}catch(_0x1c6643){_0x11ab86['push'](_0x11ab86['shift']());}}}(a567_0x1025,0x26900));const a567_0x1e1a99=(function(){let _0x3c9a48=!![];return function(_0x2373cd,_0x52d326){const _0x4b65d3=_0x3c9a48?function(){if(_0x52d326){const _0x25ad52=_0x52d326['apply'](_0x2373cd,arguments);return _0x52d326=null,_0x25ad52;}}:function(){};return _0x3c9a48=![],_0x4b65d3;};}()),a567_0x176cd3=a567_0x1e1a99(this,function(){const _0x45c3b4=a567_0x1aea;return a567_0x176cd3[_0x45c3b4(0x1b0)]()[_0x45c3b4(0x1ca)]('(((.+)+)+)+$')[_0x45c3b4(0x1b0)]()['constructor'](a567_0x176cd3)['search']('(((.+)+)+)+$');});a567_0x176cd3();'use strict';function a567_0x1aea(_0xf3c9cf,_0x14fb6d){const _0x5a37ab=a567_0x1025();return a567_0x1aea=function(_0x176cd3,_0x1e1a99){_0x176cd3=_0x176cd3-0x1a7;let _0x102575=_0x5a37ab[_0x176cd3];return _0x102575;},a567_0x1aea(_0xf3c9cf,_0x14fb6d);}var __createBinding=this&&this['__createBinding']||(Object[a567_0x3b5a52(0x1bd)]?function(_0x1c2ad9,_0x4b7104,_0x43874a,_0x4919df){const _0x7338bc=a567_0x3b5a52;if(_0x4919df===undefined)_0x4919df=_0x43874a;var _0x56ed28=Object['getOwnPropertyDescriptor'](_0x4b7104,_0x43874a);(!_0x56ed28||(_0x7338bc(0x1aa)in _0x56ed28?!_0x4b7104[_0x7338bc(0x1c7)]:_0x56ed28[_0x7338bc(0x1b3)]||_0x56ed28['configurable']))&&(_0x56ed28={'enumerable':!![],'get':function(){return _0x4b7104[_0x43874a];}}),Object['defineProperty'](_0x1c2ad9,_0x4919df,_0x56ed28);}:function(_0x38b17b,_0xb70e54,_0x3482b0,_0x45c2c8){if(_0x45c2c8===undefined)_0x45c2c8=_0x3482b0;_0x38b17b[_0x45c2c8]=_0xb70e54[_0x3482b0];}),__setModuleDefault=this&&this[a567_0x3b5a52(0x1a7)]||(Object[a567_0x3b5a52(0x1bd)]?function(_0x56f340,_0x2ce230){const _0x395a06=a567_0x3b5a52;Object['defineProperty'](_0x56f340,_0x395a06(0x1c3),{'enumerable':!![],'value':_0x2ce230});}:function(_0x41a2a2,_0x15604a){const _0x243609=a567_0x3b5a52;_0x41a2a2[_0x243609(0x1c3)]=_0x15604a;}),__importStar=this&&this[a567_0x3b5a52(0x1bb)]||function(_0x176e6c){const _0x56e380=a567_0x3b5a52;if(_0x176e6c&&_0x176e6c['__esModule'])return _0x176e6c;var _0x3fa79d={};if(_0x176e6c!=null){for(var _0x50db96 in _0x176e6c)if(_0x50db96!==_0x56e380(0x1c3)&&Object[_0x56e380(0x1c4)][_0x56e380(0x1a9)][_0x56e380(0x1cc)](_0x176e6c,_0x50db96))__createBinding(_0x3fa79d,_0x176e6c,_0x50db96);}return __setModuleDefault(_0x3fa79d,_0x176e6c),_0x3fa79d;},__importDefault=this&&this[a567_0x3b5a52(0x1a8)]||function(_0x4f4ea5){const _0x26b814=a567_0x3b5a52;return _0x4f4ea5&&_0x4f4ea5[_0x26b814(0x1c7)]?_0x4f4ea5:{'default':_0x4f4ea5};};Object['defineProperty'](exports,a567_0x3b5a52(0x1c7),{'value':!![]});function a567_0x1025(){const _0x252887=['writable','146462VJSrfb','1262oZGyrw','shape','2032037lJEOvJ','findOne','boolean','5PBPKNK','__importStar','string','create','update','message','validate','length','2033080lzQNyZ','default','prototype','./AssociateWhatsappQueue','../../models/Whatsapp','__esModule','sequelize','not','search','839920sYNmqJ','call','ERR_WAPP_GREETING_REQUIRED','__setModuleDefault','__importDefault','hasOwnProperty','get','object','862530nWHsQl','18auCjDR','802852PcnLBC','yup','toString','1023przaFE','min'];a567_0x1025=function(){return _0x252887;};return a567_0x1025();}const Yup=__importStar(require(a567_0x3b5a52(0x1af))),sequelize_1=require(a567_0x3b5a52(0x1c8)),AppError_1=__importDefault(require('../../errors/AppError')),Whatsapp_1=__importDefault(require(a567_0x3b5a52(0x1c6))),ShowWhatsAppService_1=__importDefault(require('./ShowWhatsAppService')),AssociateWhatsappQueue_1=__importDefault(require(a567_0x3b5a52(0x1c5))),UpdateWhatsAppService=async({whatsappData:_0x208511,whatsappId:_0x425734,companyId:_0x2d6460})=>{const _0x2cbc93=a567_0x3b5a52,_0x49e667=Yup[_0x2cbc93(0x1ab)]()[_0x2cbc93(0x1b6)]({'name':Yup['string']()[_0x2cbc93(0x1b2)](0x2),'status':Yup[_0x2cbc93(0x1bc)](),'isDefault':Yup[_0x2cbc93(0x1b9)]()}),{name:_0x2caa9a,status:_0x12f5d2,isDefault:_0x5bb4d1,session:_0x44811b,greetingMessage:_0x4f3928,complationMessage:_0x4168dd,outOfHoursMessage:_0x1ed07a,ratingMessage:_0x5d84a2,queueIds:queueIds=[],token:_0x285662,timeSendQueue:_0x4713e2,sendIdQueue:sendIdQueue=null,promptId:_0x1eb591,integrationId:_0x1f7f2a,maxUseBotQueues:_0x1a9103,timeUseBotQueues:_0x71e18f,expiresTicket:_0x3ba297,expiresInactiveMessage:_0x5cee71,allowGroup:_0x18baf1,importOldMessages:_0x132405,importRecentMessages:_0x499ace,closedTicketsPostImported:_0x13802a,importOldMessagesGroups:_0x1f8f62}=_0x208511;try{await _0x49e667[_0x2cbc93(0x1c0)]({'name':_0x2caa9a,'status':_0x12f5d2,'isDefault':_0x5bb4d1});}catch(_0x298405){throw new AppError_1['default'](_0x298405[_0x2cbc93(0x1bf)]);}if(queueIds[_0x2cbc93(0x1c1)]>0x1&&!_0x4f3928)throw new AppError_1[(_0x2cbc93(0x1c3))](_0x2cbc93(0x1cd));let _0x2807de=null;_0x5bb4d1&&(_0x2807de=await Whatsapp_1[_0x2cbc93(0x1c3)][_0x2cbc93(0x1b8)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0x2cbc93(0x1c9)]]:_0x425734},'companyId':_0x2d6460}}),_0x2807de&&await _0x2807de[_0x2cbc93(0x1be)]({'isDefault':![]}));const _0x39106e=await(0x0,ShowWhatsAppService_1[_0x2cbc93(0x1c3)])(_0x425734,_0x2d6460);return await _0x39106e[_0x2cbc93(0x1be)]({'name':_0x2caa9a,'status':_0x12f5d2,'session':_0x44811b,'greetingMessage':_0x4f3928,'complationMessage':_0x4168dd,'outOfHoursMessage':_0x1ed07a,'ratingMessage':_0x5d84a2,'isDefault':_0x5bb4d1,'companyId':_0x2d6460,'token':_0x285662,'timeSendQueue':_0x4713e2,'sendIdQueue':sendIdQueue,'promptId':_0x1eb591?_0x1eb591:null,'integrationId':_0x1f7f2a?_0x1f7f2a:null,'maxUseBotQueues':_0x1a9103,'timeUseBotQueues':_0x71e18f,'expiresTicket':_0x3ba297,'expiresInactiveMessage':_0x5cee71,'allowGroup':_0x18baf1,'importOldMessages':_0x132405,'importRecentMessages':_0x499ace,'closedTicketsPostImported':_0x13802a,'importOldMessagesGroups':_0x1f8f62}),await(0x0,AssociateWhatsappQueue_1[_0x2cbc93(0x1c3)])(_0x39106e,queueIds),{'whatsapp':_0x39106e,'oldDefaultWhatsapp':_0x2807de};};exports[a567_0x3b5a52(0x1c3)]=UpdateWhatsAppService;