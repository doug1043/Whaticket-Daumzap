'use strict';function a591_0x23d2(){var _0x38b131=['findOne','validate','(((.+)+)+)+$','124790JUExZz','132ItVTbh','98425WaOgSi','prototype','5805APLqvr','call','yup','min','defineProperty','217648skPQHy','../../models/Whatsapp','shape','boolean','__setModuleDefault','create','736955GmKnSD','apply','configurable','171qVGMJM','__importStar','getOwnPropertyNames','__importDefault','hasOwnProperty','getOwnPropertyDescriptor','../../errors/AppError','./AssociateWhatsappQueue','search','length','string','update','ERR_WAPP_GREETING_REQUIRED','__createBinding','object','6nBtXww','__esModule','get','1936907KXbkSe','default','sequelize','writable','constructor','./ShowWhatsAppService','597002ChoVRt'];a591_0x23d2=function(){return _0x38b131;};return a591_0x23d2();}var a591_0x37e443=a591_0x149c;(function(_0x3e9c09,_0x102f8c){var _0x278356=a591_0x149c,_0x5f2e5c=_0x3e9c09();while(!![]){try{var _0x31c97f=-parseInt(_0x278356(0x7e))/0x1+-parseInt(_0x278356(0x78))/0x2+-parseInt(_0x278356(0x80))/0x3*(parseInt(_0x278356(0x7d))/0x4)+-parseInt(_0x278356(0x8b))/0x5*(-parseInt(_0x278356(0x6f))/0x6)+parseInt(_0x278356(0x72))/0x7+-parseInt(_0x278356(0x85))/0x8+parseInt(_0x278356(0x8e))/0x9*(parseInt(_0x278356(0x7c))/0xa);if(_0x31c97f===_0x102f8c)break;else _0x5f2e5c['push'](_0x5f2e5c['shift']());}catch(_0x3f7a0d){_0x5f2e5c['push'](_0x5f2e5c['shift']());}}}(a591_0x23d2,0x2a496));function a591_0x149c(_0x4010fa,_0x25460b){var _0x34db6b=a591_0x23d2();return a591_0x149c=function(_0x10b8b4,_0x58aacc){_0x10b8b4=_0x10b8b4-0x67;var _0x23d25c=_0x34db6b[_0x10b8b4];return _0x23d25c;},a591_0x149c(_0x4010fa,_0x25460b);}var __createBinding=this&&this[a591_0x37e443(0x6d)]||(Object[a591_0x37e443(0x8a)]?function(_0x281061,_0x274bf0,_0xe91f54,_0x4a9d0e){var _0x4300db=a591_0x37e443;if(_0x4a9d0e===undefined)_0x4a9d0e=_0xe91f54;var _0x225bdb=Object[_0x4300db(0x93)](_0x274bf0,_0xe91f54);(!_0x225bdb||(_0x4300db(0x71)in _0x225bdb?!_0x274bf0['__esModule']:_0x225bdb[_0x4300db(0x75)]||_0x225bdb[_0x4300db(0x8d)]))&&(_0x225bdb={'enumerable':!![],'get':function(){return _0x274bf0[_0xe91f54];}}),Object[_0x4300db(0x84)](_0x281061,_0x4a9d0e,_0x225bdb);}:function(_0xa8d4d0,_0x3a98d2,_0x1e5166,_0x366ccd){if(_0x366ccd===undefined)_0x366ccd=_0x1e5166;_0xa8d4d0[_0x366ccd]=_0x3a98d2[_0x1e5166];}),__setModuleDefault=this&&this[a591_0x37e443(0x89)]||(Object[a591_0x37e443(0x8a)]?function(_0x1d7843,_0x1affa0){var _0x12bae9=a591_0x37e443;Object['defineProperty'](_0x1d7843,_0x12bae9(0x73),{'enumerable':!![],'value':_0x1affa0});}:function(_0xde7dc0,_0x590004){var _0x148aac=a591_0x37e443;_0xde7dc0[_0x148aac(0x73)]=_0x590004;}),__importStar=this&&this[a591_0x37e443(0x8f)]||(function(){var _0x8287c5=(function(){var _0x71eb8d=!![];return function(_0x1a4176,_0x4ccb28){var _0x4fabcd=_0x71eb8d?function(){var _0x2f1f9a=a591_0x149c;if(_0x4ccb28){var _0x183b76=_0x4ccb28[_0x2f1f9a(0x8c)](_0x1a4176,arguments);return _0x4ccb28=null,_0x183b76;}}:function(){};return _0x71eb8d=![],_0x4fabcd;};}()),_0x1e121b=_0x8287c5(this,function(){var _0x1c8d13=a591_0x149c;return _0x1e121b['toString']()[_0x1c8d13(0x68)](_0x1c8d13(0x7b))['toString']()[_0x1c8d13(0x76)](_0x1e121b)[_0x1c8d13(0x68)](_0x1c8d13(0x7b));});_0x1e121b();var _0x451bd4=function(_0x30d596){var _0x483e3e=a591_0x149c;return _0x451bd4=Object[_0x483e3e(0x90)]||function(_0xd3d34){var _0x4a7c9f=_0x483e3e,_0x466ed9=[];for(var _0x2c946a in _0xd3d34)if(Object[_0x4a7c9f(0x7f)][_0x4a7c9f(0x92)][_0x4a7c9f(0x81)](_0xd3d34,_0x2c946a))_0x466ed9[_0x466ed9[_0x4a7c9f(0x69)]]=_0x2c946a;return _0x466ed9;},_0x451bd4(_0x30d596);};return function(_0x1aa8ff){var _0x36cec9=a591_0x149c;if(_0x1aa8ff&&_0x1aa8ff[_0x36cec9(0x70)])return _0x1aa8ff;var _0x2fbe31={};if(_0x1aa8ff!=null){for(var _0x2824f4=_0x451bd4(_0x1aa8ff),_0x18e502=0x0;_0x18e502<_0x2824f4['length'];_0x18e502++)if(_0x2824f4[_0x18e502]!==_0x36cec9(0x73))__createBinding(_0x2fbe31,_0x1aa8ff,_0x2824f4[_0x18e502]);}return __setModuleDefault(_0x2fbe31,_0x1aa8ff),_0x2fbe31;};}()),__importDefault=this&&this[a591_0x37e443(0x91)]||function(_0x51c5a3){return _0x51c5a3&&_0x51c5a3['__esModule']?_0x51c5a3:{'default':_0x51c5a3};};Object[a591_0x37e443(0x84)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a591_0x37e443(0x82))),sequelize_1=require(a591_0x37e443(0x74)),AppError_1=__importDefault(require(a591_0x37e443(0x94))),Whatsapp_1=__importDefault(require(a591_0x37e443(0x86))),ShowWhatsAppService_1=__importDefault(require(a591_0x37e443(0x77))),AssociateWhatsappQueue_1=__importDefault(require(a591_0x37e443(0x67))),UpdateWhatsAppService=async({whatsappData:_0x3f5452,whatsappId:_0x440c8e,companyId:_0x5c39fd})=>{var _0x3a11c3=a591_0x37e443;const {name:_0x1e9b89,status:_0x31045f,isDefault:_0x6db319,session:_0x1e6d84,greetingMessage:_0x4050e6,complationMessage:_0x3967df,outOfHoursMessage:_0x1f43d9,useRating:_0x474a56,ratingMessage:_0x5bb345,transferMessage:_0x302fa5,queueIds:queueIds=[],token:_0x2e8dc6,timeSendQueue:_0x1522e0,integrationId:_0x248424,sendIdQueue:sendIdQueue=null,maxUseBotQueues:_0x47ef5c,expiresTicket:_0x45333b,expiresInactiveMessage:_0x4dc963,allowGroup:_0x102a84,importOldMessages:_0x5a5ef6,schedules:_0x2eec4c,whenExpireTicket:_0x474beb,inactiveMessageTime:_0x128fb0,inactiveMessage:_0x3db685,automaticRestart:_0x179343,period:_0x2b2a0c,lastRestartAt:_0x28939f}=_0x3f5452,_0x44b0e4=Yup[_0x3a11c3(0x6e)]()[_0x3a11c3(0x87)]({'name':Yup[_0x3a11c3(0x6a)]()[_0x3a11c3(0x83)](0x2),'status':Yup[_0x3a11c3(0x6a)](),'isDefault':Yup[_0x3a11c3(0x88)]()});try{await _0x44b0e4[_0x3a11c3(0x7a)]({'name':_0x1e9b89,'status':_0x31045f,'isDefault':_0x6db319});}catch(_0x56305c){throw new AppError_1[(_0x3a11c3(0x73))](_0x56305c['message']);}if(queueIds[_0x3a11c3(0x69)]>0x1&&!_0x4050e6)throw new AppError_1[(_0x3a11c3(0x73))](_0x3a11c3(0x6c));let _0x56bc0f=null;_0x6db319&&(_0x56bc0f=await Whatsapp_1[_0x3a11c3(0x73)][_0x3a11c3(0x79)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op']['not']]:_0x440c8e},'companyId':_0x5c39fd}}),_0x56bc0f&&await _0x56bc0f[_0x3a11c3(0x6b)]({'isDefault':![]}));const _0x1d18a0=await(0x0,ShowWhatsAppService_1[_0x3a11c3(0x73)])(_0x440c8e,_0x5c39fd);return await _0x1d18a0[_0x3a11c3(0x6b)]({'name':_0x1e9b89,'status':_0x31045f,'session':_0x1e6d84,'greetingMessage':_0x4050e6,'complationMessage':_0x3967df,'outOfHoursMessage':_0x1f43d9,'useRating':_0x474a56,'ratingMessage':_0x5bb345,'isDefault':_0x6db319,'companyId':_0x5c39fd,'token':_0x2e8dc6,'transferMessage':_0x302fa5,'integrationId':_0x248424?_0x248424:null,'maxUseBotQueues':_0x47ef5c,'timeSendQueue':_0x1522e0,'sendIdQueue':sendIdQueue,'expiresTicket':_0x45333b,'expiresInactiveMessage':_0x4dc963,'allowGroup':_0x102a84,'importOldMessages':_0x5a5ef6,'schedules':_0x2eec4c,'whenExpireTicket':_0x474beb,'inactiveMessageTime':_0x128fb0,'inactiveMessage':_0x3db685,'automaticRestart':_0x179343,'period':_0x2b2a0c,'lastRestartAt':_0x28939f}),await(0x0,AssociateWhatsappQueue_1[_0x3a11c3(0x73)])(_0x1d18a0,queueIds),{'whatsapp':_0x1d18a0,'oldDefaultWhatsapp':_0x56bc0f};};exports['default']=UpdateWhatsAppService;