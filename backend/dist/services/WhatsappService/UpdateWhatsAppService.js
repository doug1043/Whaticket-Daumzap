const a569_0x271811=a569_0x3b0f;(function(_0x11b5d0,_0x13b348){const _0x203b5f=a569_0x3b0f,_0x341a8a=_0x11b5d0();while(!![]){try{const _0xda48e0=-parseInt(_0x203b5f(0xf7))/0x1*(-parseInt(_0x203b5f(0xdf))/0x2)+-parseInt(_0x203b5f(0xfa))/0x3*(-parseInt(_0x203b5f(0xe8))/0x4)+parseInt(_0x203b5f(0xf2))/0x5*(-parseInt(_0x203b5f(0xe9))/0x6)+-parseInt(_0x203b5f(0xe4))/0x7+-parseInt(_0x203b5f(0xfd))/0x8+-parseInt(_0x203b5f(0xff))/0x9+-parseInt(_0x203b5f(0xec))/0xa*(-parseInt(_0x203b5f(0xe6))/0xb);if(_0xda48e0===_0x13b348)break;else _0x341a8a['push'](_0x341a8a['shift']());}catch(_0x11347b){_0x341a8a['push'](_0x341a8a['shift']());}}}(a569_0x3467,0x539a0));const a569_0x1310c8=(function(){let _0x1eed5a=!![];return function(_0x3ecc4b,_0x184b7e){const _0x3ad4be=_0x1eed5a?function(){const _0x150682=a569_0x3b0f;if(_0x184b7e){const _0x35687d=_0x184b7e[_0x150682(0xf6)](_0x3ecc4b,arguments);return _0x184b7e=null,_0x35687d;}}:function(){};return _0x1eed5a=![],_0x3ad4be;};}()),a569_0x37682e=a569_0x1310c8(this,function(){const _0x53e310=a569_0x3b0f;return a569_0x37682e['toString']()[_0x53e310(0xde)](_0x53e310(0xf0))[_0x53e310(0xee)]()[_0x53e310(0xe7)](a569_0x37682e)[_0x53e310(0xde)](_0x53e310(0xf0));});a569_0x37682e();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a569_0x271811(0xef)]?function(_0x4d6572,_0x49445d,_0x4ebfbe,_0x2dc3f0){const _0x3cd0ff=a569_0x271811;if(_0x2dc3f0===undefined)_0x2dc3f0=_0x4ebfbe;var _0x4c1fb2=Object[_0x3cd0ff(0xdb)](_0x49445d,_0x4ebfbe);(!_0x4c1fb2||(_0x3cd0ff(0xdd)in _0x4c1fb2?!_0x49445d[_0x3cd0ff(0x101)]:_0x4c1fb2[_0x3cd0ff(0xe3)]||_0x4c1fb2['configurable']))&&(_0x4c1fb2={'enumerable':!![],'get':function(){return _0x49445d[_0x4ebfbe];}}),Object['defineProperty'](_0x4d6572,_0x2dc3f0,_0x4c1fb2);}:function(_0x3e7b95,_0x187c18,_0x50f23d,_0x5d3a8d){if(_0x5d3a8d===undefined)_0x5d3a8d=_0x50f23d;_0x3e7b95[_0x5d3a8d]=_0x187c18[_0x50f23d];}),__setModuleDefault=this&&this[a569_0x271811(0xda)]||(Object[a569_0x271811(0xef)]?function(_0x3a48b1,_0x1a1847){const _0xbdd02b=a569_0x271811;Object[_0xbdd02b(0xf5)](_0x3a48b1,_0xbdd02b(0x100),{'enumerable':!![],'value':_0x1a1847});}:function(_0x2e0e37,_0x6bdadd){_0x2e0e37['default']=_0x6bdadd;}),__importStar=this&&this[a569_0x271811(0xe1)]||function(_0x17fe49){const _0x29261c=a569_0x271811;if(_0x17fe49&&_0x17fe49[_0x29261c(0x101)])return _0x17fe49;var _0x53fbc3={};if(_0x17fe49!=null){for(var _0x19316d in _0x17fe49)if(_0x19316d!==_0x29261c(0x100)&&Object['prototype'][_0x29261c(0xe5)][_0x29261c(0xfe)](_0x17fe49,_0x19316d))__createBinding(_0x53fbc3,_0x17fe49,_0x19316d);}return __setModuleDefault(_0x53fbc3,_0x17fe49),_0x53fbc3;},__importDefault=this&&this[a569_0x271811(0xf1)]||function(_0x36b775){const _0x4af506=a569_0x271811;return _0x36b775&&_0x36b775[_0x4af506(0x101)]?_0x36b775:{'default':_0x36b775};};Object[a569_0x271811(0xf5)](exports,a569_0x271811(0x101),{'value':!![]});const Yup=__importStar(require(a569_0x271811(0xf3))),sequelize_1=require('sequelize'),AppError_1=__importDefault(require(a569_0x271811(0xfb))),Whatsapp_1=__importDefault(require('../../models/Whatsapp')),ShowWhatsAppService_1=__importDefault(require(a569_0x271811(0xe2))),AssociateWhatsappQueue_1=__importDefault(require(a569_0x271811(0xdc))),UpdateWhatsAppService=async({whatsappData:_0x133c41,whatsappId:_0x42ec25,companyId:_0x2c64eb})=>{const _0x550745=a569_0x271811,_0x26a01b=Yup[_0x550745(0xea)]()[_0x550745(0xeb)]({'name':Yup['string']()['min'](0x2),'status':Yup['string'](),'isDefault':Yup[_0x550745(0xfc)]()}),{name:_0x47e873,status:_0x25232d,isDefault:_0xff7037,session:_0x9cfa0c,greetingMessage:_0x346f59,complationMessage:_0x3144e6,outOfHoursMessage:_0x2ceffc,ratingMessage:_0x3cb53d,queueIds:queueIds=[],token:_0x18051c,timeSendQueue:_0x415ed9,sendIdQueue:sendIdQueue=null,promptId:_0x29f2e5,integrationId:_0x59b8af,maxUseBotQueues:_0x3e8cb6,timeUseBotQueues:_0x2a5757,expiresTicket:_0x2bdf6f,expiresInactiveMessage:_0x58e7f9,allowGroup:_0x53046a,importOldMessages:_0x4a5b52,importRecentMessages:_0x144f6b,closedTicketsPostImported:_0x23979c,importOldMessagesGroups:_0x325a99}=_0x133c41;try{await _0x26a01b[_0x550745(0xed)]({'name':_0x47e873,'status':_0x25232d,'isDefault':_0xff7037});}catch(_0x13bc0c){throw new AppError_1[(_0x550745(0x100))](_0x13bc0c[_0x550745(0xf4)]);}if(queueIds[_0x550745(0xf9)]>0x1&&!_0x346f59)throw new AppError_1[(_0x550745(0x100))](_0x550745(0xf8));let _0x545f1a=null;_0xff7037&&(_0x545f1a=await Whatsapp_1['default']['findOne']({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0x550745(0xe0)]]:_0x42ec25},'companyId':_0x2c64eb}}),_0x545f1a&&await _0x545f1a['update']({'isDefault':![]}));const _0x42766f=await(0x0,ShowWhatsAppService_1[_0x550745(0x100)])(_0x42ec25,_0x2c64eb);return await _0x42766f['update']({'name':_0x47e873,'status':_0x25232d,'session':_0x9cfa0c,'greetingMessage':_0x346f59,'complationMessage':_0x3144e6,'outOfHoursMessage':_0x2ceffc,'ratingMessage':_0x3cb53d,'isDefault':_0xff7037,'companyId':_0x2c64eb,'token':_0x18051c,'timeSendQueue':_0x415ed9,'sendIdQueue':sendIdQueue,'promptId':_0x29f2e5?_0x29f2e5:null,'integrationId':_0x59b8af?_0x59b8af:null,'maxUseBotQueues':_0x3e8cb6,'timeUseBotQueues':_0x2a5757,'expiresTicket':_0x2bdf6f,'expiresInactiveMessage':_0x58e7f9,'allowGroup':_0x53046a,'importOldMessages':_0x4a5b52,'importRecentMessages':_0x144f6b,'closedTicketsPostImported':_0x23979c,'importOldMessagesGroups':_0x325a99}),await(0x0,AssociateWhatsappQueue_1[_0x550745(0x100)])(_0x42766f,queueIds),{'whatsapp':_0x42766f,'oldDefaultWhatsapp':_0x545f1a};};function a569_0x3467(){const _0x42b825=['writable','805511MGCyYS','hasOwnProperty','10805201SswDOZ','constructor','14452EZxKoH','3189246xnHJCc','object','shape','10ZLyvde','validate','toString','create','(((.+)+)+)+$','__importDefault','5CUubMS','yup','message','defineProperty','apply','2PXNovr','ERR_WAPP_GREETING_REQUIRED','length','48PFjrto','../../errors/AppError','boolean','4523760DdomOR','call','920835enknMk','default','__esModule','__setModuleDefault','getOwnPropertyDescriptor','./AssociateWhatsappQueue','get','search','616732SoxXAB','not','__importStar','./ShowWhatsAppService'];a569_0x3467=function(){return _0x42b825;};return a569_0x3467();}function a569_0x3b0f(_0x404b80,_0x591a3e){const _0x4ec760=a569_0x3467();return a569_0x3b0f=function(_0x37682e,_0x1310c8){_0x37682e=_0x37682e-0xda;let _0x346729=_0x4ec760[_0x37682e];return _0x346729;},a569_0x3b0f(_0x404b80,_0x591a3e);}exports[a569_0x271811(0x100)]=UpdateWhatsAppService;