const a567_0x3df320=a567_0x22f3;(function(_0x10703b,_0x1b89e8){const _0x5c1857=a567_0x22f3,_0x31182e=_0x10703b();while(!![]){try{const _0x4c4339=-parseInt(_0x5c1857(0x80))/0x1*(-parseInt(_0x5c1857(0x88))/0x2)+parseInt(_0x5c1857(0x90))/0x3+parseInt(_0x5c1857(0x7a))/0x4+parseInt(_0x5c1857(0x98))/0x5+parseInt(_0x5c1857(0x96))/0x6*(parseInt(_0x5c1857(0x78))/0x7)+parseInt(_0x5c1857(0x95))/0x8*(-parseInt(_0x5c1857(0x82))/0x9)+-parseInt(_0x5c1857(0x79))/0xa*(parseInt(_0x5c1857(0x9a))/0xb);if(_0x4c4339===_0x1b89e8)break;else _0x31182e['push'](_0x31182e['shift']());}catch(_0x215204){_0x31182e['push'](_0x31182e['shift']());}}}(a567_0x61cc,0xe6179));const a567_0x11c8d4=(function(){let _0x1a90fb=!![];return function(_0x286cd2,_0x48044c){const _0x21cdc5=_0x1a90fb?function(){if(_0x48044c){const _0x3edc2c=_0x48044c['apply'](_0x286cd2,arguments);return _0x48044c=null,_0x3edc2c;}}:function(){};return _0x1a90fb=![],_0x21cdc5;};}()),a567_0xf5ad04=a567_0x11c8d4(this,function(){const _0x2dd369=a567_0x22f3;return a567_0xf5ad04[_0x2dd369(0x8a)]()['search'](_0x2dd369(0x85))[_0x2dd369(0x8a)]()[_0x2dd369(0x7c)](a567_0xf5ad04)['search'](_0x2dd369(0x85));});a567_0xf5ad04();'use strict';var __createBinding=this&&this[a567_0x3df320(0x91)]||(Object[a567_0x3df320(0x83)]?function(_0x22500e,_0x343bca,_0x31842e,_0x16c051){const _0x2dc6f7=a567_0x3df320;if(_0x16c051===undefined)_0x16c051=_0x31842e;var _0x213647=Object[_0x2dc6f7(0x8f)](_0x343bca,_0x31842e);(!_0x213647||('get'in _0x213647?!_0x343bca['__esModule']:_0x213647[_0x2dc6f7(0x76)]||_0x213647[_0x2dc6f7(0x81)]))&&(_0x213647={'enumerable':!![],'get':function(){return _0x343bca[_0x31842e];}}),Object[_0x2dc6f7(0x84)](_0x22500e,_0x16c051,_0x213647);}:function(_0x240952,_0xba13b5,_0x32b56e,_0x13d198){if(_0x13d198===undefined)_0x13d198=_0x32b56e;_0x240952[_0x13d198]=_0xba13b5[_0x32b56e];}),__setModuleDefault=this&&this[a567_0x3df320(0x8b)]||(Object[a567_0x3df320(0x83)]?function(_0x5caa5c,_0x582843){const _0x239b03=a567_0x3df320;Object[_0x239b03(0x84)](_0x5caa5c,_0x239b03(0x7f),{'enumerable':!![],'value':_0x582843});}:function(_0x4ae696,_0x41cf10){const _0x5bd0f3=a567_0x3df320;_0x4ae696[_0x5bd0f3(0x7f)]=_0x41cf10;}),__importStar=this&&this[a567_0x3df320(0x8e)]||function(_0x10f7b7){const _0x1026b4=a567_0x3df320;if(_0x10f7b7&&_0x10f7b7[_0x1026b4(0x7b)])return _0x10f7b7;var _0x3eecda={};if(_0x10f7b7!=null){for(var _0x5c93e2 in _0x10f7b7)if(_0x5c93e2!==_0x1026b4(0x7f)&&Object[_0x1026b4(0x7d)][_0x1026b4(0x89)]['call'](_0x10f7b7,_0x5c93e2))__createBinding(_0x3eecda,_0x10f7b7,_0x5c93e2);}return __setModuleDefault(_0x3eecda,_0x10f7b7),_0x3eecda;},__importDefault=this&&this[a567_0x3df320(0x97)]||function(_0x3641fe){const _0x5d23b9=a567_0x3df320;return _0x3641fe&&_0x3641fe[_0x5d23b9(0x7b)]?_0x3641fe:{'default':_0x3641fe};};Object[a567_0x3df320(0x84)](exports,a567_0x3df320(0x7b),{'value':!![]});const Yup=__importStar(require(a567_0x3df320(0x86))),sequelize_1=require(a567_0x3df320(0x77)),AppError_1=__importDefault(require(a567_0x3df320(0x8c))),Whatsapp_1=__importDefault(require('../../models/Whatsapp')),ShowWhatsAppService_1=__importDefault(require(a567_0x3df320(0x87))),AssociateWhatsappQueue_1=__importDefault(require('./AssociateWhatsappQueue')),UpdateWhatsAppService=async({whatsappData:_0x426c1a,whatsappId:_0x2ae35f,companyId:_0x38119b})=>{const _0x457952=a567_0x3df320,_0x4f014b=Yup[_0x457952(0x92)]()[_0x457952(0x9b)]({'name':Yup['string']()['min'](0x2),'status':Yup[_0x457952(0x7e)](),'isDefault':Yup[_0x457952(0x99)]()}),{name:_0x146a6b,status:_0x1e5dbe,isDefault:_0x4a73b9,session:_0x417125,greetingMessage:_0x7e2d6f,complationMessage:_0x3a6e53,outOfHoursMessage:_0x32bbb6,ratingMessage:_0x550d75,queueIds:queueIds=[],token:_0x4e443b,timeSendQueue:_0x480864,sendIdQueue:sendIdQueue=null,promptId:_0x2938c6,integrationId:_0xe8f0b8,maxUseBotQueues:_0x15460d,timeUseBotQueues:_0x4bf7fe,expiresTicket:_0x579014,expiresInactiveMessage:_0x106d27,allowGroup:_0x43bcb9,importOldMessages:_0x2c233f,importRecentMessages:_0x3c8e92,closedTicketsPostImported:_0x4b0c04,importOldMessagesGroups:_0x105ad0}=_0x426c1a;try{await _0x4f014b['validate']({'name':_0x146a6b,'status':_0x1e5dbe,'isDefault':_0x4a73b9});}catch(_0x213226){throw new AppError_1[(_0x457952(0x7f))](_0x213226['message']);}if(queueIds['length']>0x1&&!_0x7e2d6f)throw new AppError_1[(_0x457952(0x7f))]('ERR_WAPP_GREETING_REQUIRED');let _0x41b100=null;_0x4a73b9&&(_0x41b100=await Whatsapp_1['default'][_0x457952(0x8d)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0x457952(0x94)]]:_0x2ae35f},'companyId':_0x38119b}}),_0x41b100&&await _0x41b100[_0x457952(0x93)]({'isDefault':![]}));const _0xbce511=await(0x0,ShowWhatsAppService_1['default'])(_0x2ae35f,_0x38119b);return await _0xbce511['update']({'name':_0x146a6b,'status':_0x1e5dbe,'session':_0x417125,'greetingMessage':_0x7e2d6f,'complationMessage':_0x3a6e53,'outOfHoursMessage':_0x32bbb6,'ratingMessage':_0x550d75,'isDefault':_0x4a73b9,'companyId':_0x38119b,'token':_0x4e443b,'timeSendQueue':_0x480864,'sendIdQueue':sendIdQueue,'promptId':_0x2938c6?_0x2938c6:null,'integrationId':_0xe8f0b8?_0xe8f0b8:null,'maxUseBotQueues':_0x15460d,'timeUseBotQueues':_0x4bf7fe,'expiresTicket':_0x579014,'expiresInactiveMessage':_0x106d27,'allowGroup':_0x43bcb9,'importOldMessages':_0x2c233f,'importRecentMessages':_0x3c8e92,'closedTicketsPostImported':_0x4b0c04,'importOldMessagesGroups':_0x105ad0}),await(0x0,AssociateWhatsappQueue_1[_0x457952(0x7f)])(_0xbce511,queueIds),{'whatsapp':_0xbce511,'oldDefaultWhatsapp':_0x41b100};};function a567_0x22f3(_0x4ea6fc,_0x505647){const _0x2583e9=a567_0x61cc();return a567_0x22f3=function(_0xf5ad04,_0x11c8d4){_0xf5ad04=_0xf5ad04-0x76;let _0x61cc55=_0x2583e9[_0xf5ad04];return _0x61cc55;},a567_0x22f3(_0x4ea6fc,_0x505647);}exports[a567_0x3df320(0x7f)]=UpdateWhatsAppService;function a567_0x61cc(){const _0x1bd243=['117LHuTIp','create','defineProperty','(((.+)+)+)+$','yup','./ShowWhatsAppService','2UADKKG','hasOwnProperty','toString','__setModuleDefault','../../errors/AppError','findOne','__importStar','getOwnPropertyDescriptor','5635863rgRgvq','__createBinding','object','update','not','531248WLcSRt','30xQuFmc','__importDefault','4874990gSfiFU','boolean','22JgXKUS','shape','writable','sequelize','1760878taxSiU','20598070RodGjg','338784vzjCux','__esModule','constructor','prototype','string','default','1729264QtgBCS','configurable'];a567_0x61cc=function(){return _0x1bd243;};return a567_0x61cc();}