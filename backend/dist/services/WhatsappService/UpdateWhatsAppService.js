const a567_0x3921f2=a567_0x4529;(function(_0x1fbb10,_0x3b735a){const _0x33e562=a567_0x4529,_0x397aa0=_0x1fbb10();while(!![]){try{const _0x4bb9ec=parseInt(_0x33e562(0x90))/0x1+parseInt(_0x33e562(0x9e))/0x2+-parseInt(_0x33e562(0x95))/0x3+parseInt(_0x33e562(0x8d))/0x4*(-parseInt(_0x33e562(0xa6))/0x5)+-parseInt(_0x33e562(0x9d))/0x6*(-parseInt(_0x33e562(0x9b))/0x7)+parseInt(_0x33e562(0x85))/0x8+-parseInt(_0x33e562(0x8c))/0x9;if(_0x4bb9ec===_0x3b735a)break;else _0x397aa0['push'](_0x397aa0['shift']());}catch(_0x520e81){_0x397aa0['push'](_0x397aa0['shift']());}}}(a567_0x5358,0xa359f));const a567_0x6084ed=(function(){let _0xdca654=!![];return function(_0x2901d0,_0xe659f1){const _0x2923be=_0xdca654?function(){const _0xae2f62=a567_0x4529;if(_0xe659f1){const _0x38003e=_0xe659f1[_0xae2f62(0x9c)](_0x2901d0,arguments);return _0xe659f1=null,_0x38003e;}}:function(){};return _0xdca654=![],_0x2923be;};}()),a567_0x4e278d=a567_0x6084ed(this,function(){const _0x5be752=a567_0x4529;return a567_0x4e278d['toString']()[_0x5be752(0xa3)](_0x5be752(0xac))[_0x5be752(0xab)]()['constructor'](a567_0x4e278d)['search'](_0x5be752(0xac));});a567_0x4e278d();'use strict';function a567_0x5358(){const _0x57fca4=['update','hasOwnProperty','default','14089878tWhKjV','4tqgkiz','__esModule','object','910917uaPpFo','__importDefault','call','ERR_WAPP_GREETING_REQUIRED','getOwnPropertyDescriptor','2405745hHQnoC','sequelize','./AssociateWhatsappQueue','../../errors/AppError','configurable','__importStar','287qJATuj','apply','90612siMccH','2631712FpjmUu','message','get','__setModuleDefault','yup','search','__createBinding','findOne','1023025piKVtt','writable','defineProperty','create','length','toString','(((.+)+)+)+$','string','not','3161552TagGQq','./ShowWhatsAppService','validate','prototype'];a567_0x5358=function(){return _0x57fca4;};return a567_0x5358();}function a567_0x4529(_0x452ef6,_0x2800e3){const _0x350dc1=a567_0x5358();return a567_0x4529=function(_0x4e278d,_0x6084ed){_0x4e278d=_0x4e278d-0x84;let _0x535865=_0x350dc1[_0x4e278d];return _0x535865;},a567_0x4529(_0x452ef6,_0x2800e3);}var __createBinding=this&&this[a567_0x3921f2(0xa4)]||(Object[a567_0x3921f2(0xa9)]?function(_0x23daf6,_0xa30a35,_0x151c44,_0x1fb98a){const _0x51fbe2=a567_0x3921f2;if(_0x1fb98a===undefined)_0x1fb98a=_0x151c44;var _0x1e8c0a=Object[_0x51fbe2(0x94)](_0xa30a35,_0x151c44);(!_0x1e8c0a||(_0x51fbe2(0xa0)in _0x1e8c0a?!_0xa30a35[_0x51fbe2(0x8e)]:_0x1e8c0a[_0x51fbe2(0xa7)]||_0x1e8c0a[_0x51fbe2(0x99)]))&&(_0x1e8c0a={'enumerable':!![],'get':function(){return _0xa30a35[_0x151c44];}}),Object[_0x51fbe2(0xa8)](_0x23daf6,_0x1fb98a,_0x1e8c0a);}:function(_0x4506e4,_0x267157,_0x3f8153,_0x4630d3){if(_0x4630d3===undefined)_0x4630d3=_0x3f8153;_0x4506e4[_0x4630d3]=_0x267157[_0x3f8153];}),__setModuleDefault=this&&this[a567_0x3921f2(0xa1)]||(Object[a567_0x3921f2(0xa9)]?function(_0x1a5c11,_0x19d941){const _0x3ed3ee=a567_0x3921f2;Object[_0x3ed3ee(0xa8)](_0x1a5c11,_0x3ed3ee(0x8b),{'enumerable':!![],'value':_0x19d941});}:function(_0x23f260,_0x19ce12){const _0x5dfe4a=a567_0x3921f2;_0x23f260[_0x5dfe4a(0x8b)]=_0x19ce12;}),__importStar=this&&this[a567_0x3921f2(0x9a)]||function(_0x2e417f){const _0x1df30a=a567_0x3921f2;if(_0x2e417f&&_0x2e417f[_0x1df30a(0x8e)])return _0x2e417f;var _0x543c2b={};if(_0x2e417f!=null){for(var _0x427d69 in _0x2e417f)if(_0x427d69!==_0x1df30a(0x8b)&&Object[_0x1df30a(0x88)][_0x1df30a(0x8a)][_0x1df30a(0x92)](_0x2e417f,_0x427d69))__createBinding(_0x543c2b,_0x2e417f,_0x427d69);}return __setModuleDefault(_0x543c2b,_0x2e417f),_0x543c2b;},__importDefault=this&&this[a567_0x3921f2(0x91)]||function(_0x2a09f4){const _0x2bc50a=a567_0x3921f2;return _0x2a09f4&&_0x2a09f4[_0x2bc50a(0x8e)]?_0x2a09f4:{'default':_0x2a09f4};};Object[a567_0x3921f2(0xa8)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a567_0x3921f2(0xa2))),sequelize_1=require(a567_0x3921f2(0x96)),AppError_1=__importDefault(require(a567_0x3921f2(0x98))),Whatsapp_1=__importDefault(require('../../models/Whatsapp')),ShowWhatsAppService_1=__importDefault(require(a567_0x3921f2(0x86))),AssociateWhatsappQueue_1=__importDefault(require(a567_0x3921f2(0x97))),UpdateWhatsAppService=async({whatsappData:_0x3bbbd1,whatsappId:_0x109a29,companyId:_0x288e00})=>{const _0xb2295=a567_0x3921f2,_0x5217c4=Yup[_0xb2295(0x8f)]()['shape']({'name':Yup[_0xb2295(0xad)]()['min'](0x2),'status':Yup[_0xb2295(0xad)](),'isDefault':Yup['boolean']()}),{name:_0x24241b,status:_0x10990d,isDefault:_0x5a8afb,session:_0xc4ccef,greetingMessage:_0x407737,complationMessage:_0x530a00,outOfHoursMessage:_0x16ea09,ratingMessage:_0x52e6b9,queueIds:queueIds=[],token:_0xf8bfd1,timeSendQueue:_0x330f19,sendIdQueue:sendIdQueue=null,promptId:_0x11a0d6,integrationId:_0x18cdd3,maxUseBotQueues:_0x2b89ae,timeUseBotQueues:_0x2518fb,expiresTicket:_0x4eab55,expiresInactiveMessage:_0x573928,allowGroup:_0x5212a7,importOldMessages:_0x337b78,importRecentMessages:_0x326994,closedTicketsPostImported:_0x49ba5e,importOldMessagesGroups:_0x2318d7}=_0x3bbbd1;try{await _0x5217c4[_0xb2295(0x87)]({'name':_0x24241b,'status':_0x10990d,'isDefault':_0x5a8afb});}catch(_0x4bef6b){throw new AppError_1[(_0xb2295(0x8b))](_0x4bef6b[_0xb2295(0x9f)]);}if(queueIds[_0xb2295(0xaa)]>0x1&&!_0x407737)throw new AppError_1['default'](_0xb2295(0x93));let _0x1d1806=null;_0x5a8afb&&(_0x1d1806=await Whatsapp_1['default'][_0xb2295(0xa5)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0xb2295(0x84)]]:_0x109a29},'companyId':_0x288e00}}),_0x1d1806&&await _0x1d1806[_0xb2295(0x89)]({'isDefault':![]}));const _0x2a6db2=await(0x0,ShowWhatsAppService_1[_0xb2295(0x8b)])(_0x109a29,_0x288e00);return await _0x2a6db2[_0xb2295(0x89)]({'name':_0x24241b,'status':_0x10990d,'session':_0xc4ccef,'greetingMessage':_0x407737,'complationMessage':_0x530a00,'outOfHoursMessage':_0x16ea09,'ratingMessage':_0x52e6b9,'isDefault':_0x5a8afb,'companyId':_0x288e00,'token':_0xf8bfd1,'timeSendQueue':_0x330f19,'sendIdQueue':sendIdQueue,'promptId':_0x11a0d6?_0x11a0d6:null,'integrationId':_0x18cdd3?_0x18cdd3:null,'maxUseBotQueues':_0x2b89ae,'timeUseBotQueues':_0x2518fb,'expiresTicket':_0x4eab55,'expiresInactiveMessage':_0x573928,'allowGroup':_0x5212a7,'importOldMessages':_0x337b78,'importRecentMessages':_0x326994,'closedTicketsPostImported':_0x49ba5e,'importOldMessagesGroups':_0x2318d7}),await(0x0,AssociateWhatsappQueue_1['default'])(_0x2a6db2,queueIds),{'whatsapp':_0x2a6db2,'oldDefaultWhatsapp':_0x1d1806};};exports[a567_0x3921f2(0x8b)]=UpdateWhatsAppService;