const a560_0x1b3848=a560_0x462c;function a560_0x5917(){const _0x53d755=['params','../../errors/AppError','existsSync','mediaUpload','(((.+)+)+)+$','apply','Arquivo\x20adicionado!','constructor','files','1725552MePEjN','resolve','search','6615qiAGXZ','4955hGgXAD','head','8xZTLol','__importDefault','__esModule','message','greetingMediaAttachment','toString','2481910IDAUEe','findByPk','64893woxlCp','123HGxUqs','6bAoWQD','filename','858ObtBBj','public','1508269wOEqhw','default','unlinkSync','json','save','Arquivo\x20excluÃ­do'];a560_0x5917=function(){return _0x53d755;};return a560_0x5917();}(function(_0x12adcb,_0x5c9ac2){const _0x11b776=a560_0x462c,_0xa89ce=_0x12adcb();while(!![]){try{const _0x250772=-parseInt(_0x11b776(0x18e))/0x1*(parseInt(_0x11b776(0x191))/0x2)+-parseInt(_0x11b776(0x18d))/0x3+parseInt(_0x11b776(0x1a8))/0x4*(parseInt(_0x11b776(0x1a6))/0x5)+-parseInt(_0x11b776(0x18f))/0x6*(-parseInt(_0x11b776(0x193))/0x7)+parseInt(_0x11b776(0x1a2))/0x8+parseInt(_0x11b776(0x1a5))/0x9+-parseInt(_0x11b776(0x1ae))/0xa;if(_0x250772===_0x5c9ac2)break;else _0xa89ce['push'](_0xa89ce['shift']());}catch(_0x3bd4f5){_0xa89ce['push'](_0xa89ce['shift']());}}}(a560_0x5917,0x1b2b9));const a560_0x4d5d58=(function(){let _0x5f10e0=!![];return function(_0x20ce36,_0x134a8f){const _0x1cdd1c=_0x5f10e0?function(){const _0x559c98=a560_0x462c;if(_0x134a8f){const _0x1a7e90=_0x134a8f[_0x559c98(0x19e)](_0x20ce36,arguments);return _0x134a8f=null,_0x1a7e90;}}:function(){};return _0x5f10e0=![],_0x1cdd1c;};}()),a560_0x2b4d3=a560_0x4d5d58(this,function(){const _0x337601=a560_0x462c;return a560_0x2b4d3[_0x337601(0x1ad)]()[_0x337601(0x1a4)](_0x337601(0x19d))[_0x337601(0x1ad)]()[_0x337601(0x1a0)](a560_0x2b4d3)[_0x337601(0x1a4)](_0x337601(0x19d));});a560_0x2b4d3();function a560_0x462c(_0x2a66c7,_0x21f1c1){const _0x5a16dd=a560_0x5917();return a560_0x462c=function(_0x2b4d3,_0x4d5d58){_0x2b4d3=_0x2b4d3-0x18c;let _0x5917c2=_0x5a16dd[_0x2b4d3];return _0x5917c2;},a560_0x462c(_0x2a66c7,_0x21f1c1);}'use strict';var __importDefault=this&&this[a560_0x1b3848(0x1a9)]||function(_0x43760a){const _0x3dc0f6=a560_0x1b3848;return _0x43760a&&_0x43760a[_0x3dc0f6(0x1aa)]?_0x43760a:{'default':_0x43760a};};Object['defineProperty'](exports,a560_0x1b3848(0x1aa),{'value':!![]}),exports['deleteMedia']=exports[a560_0x1b3848(0x19c)]=void 0x0;const lodash_1=require('lodash'),AppError_1=__importDefault(require(a560_0x1b3848(0x19a))),Whatsapp_1=__importDefault(require('../../models/Whatsapp')),path_1=__importDefault(require('path')),fs_1=__importDefault(require('fs')),mediaUpload=async(_0x284346,_0x2502c3)=>{const _0x36fa32=a560_0x1b3848,{whatsappId:_0x227b29}=_0x284346[_0x36fa32(0x199)],_0x249fe7=_0x284346[_0x36fa32(0x1a1)],_0x7b2ddd=(0x0,lodash_1[_0x36fa32(0x1a7)])(_0x249fe7);try{const _0x5ebbd9=await Whatsapp_1[_0x36fa32(0x194)]['findByPk'](_0x227b29);if(_0x5ebbd9['greetingMediaAttachment']){const _0x2556f7=path_1['default'][_0x36fa32(0x1a3)](_0x36fa32(0x192),_0x5ebbd9[_0x36fa32(0x1ac)]),_0x47ec3d=fs_1[_0x36fa32(0x194)][_0x36fa32(0x19b)](_0x2556f7);_0x47ec3d&&fs_1[_0x36fa32(0x194)]['unlinkSync'](_0x2556f7);}return _0x5ebbd9[_0x36fa32(0x1ac)]=_0x7b2ddd[_0x36fa32(0x190)],await _0x5ebbd9['save'](),_0x2502c3['status'](0xc8)[_0x36fa32(0x196)]({'mensagem':_0x36fa32(0x19f)});}catch(_0x2a6951){throw new AppError_1['default'](_0x2a6951[_0x36fa32(0x1ab)]);}};exports[a560_0x1b3848(0x19c)]=mediaUpload;const deleteMedia=async(_0x530de9,_0x4a0eb5)=>{const _0xe3fc3a=a560_0x1b3848,{whatsappId:_0x373468}=_0x530de9[_0xe3fc3a(0x199)];try{const _0x16cb9e=await Whatsapp_1[_0xe3fc3a(0x194)][_0xe3fc3a(0x18c)](_0x373468),_0x362684=path_1[_0xe3fc3a(0x194)][_0xe3fc3a(0x1a3)](_0xe3fc3a(0x192),_0x16cb9e[_0xe3fc3a(0x1ac)]),_0x5aa167=fs_1[_0xe3fc3a(0x194)]['existsSync'](_0x362684);return _0x5aa167&&fs_1['default'][_0xe3fc3a(0x195)](_0x362684),_0x16cb9e['greetingMediaAttachment']=null,await _0x16cb9e[_0xe3fc3a(0x197)](),_0x4a0eb5['send']({'message':_0xe3fc3a(0x198)});}catch(_0x511264){throw new AppError_1[(_0xe3fc3a(0x194))](_0x511264[_0xe3fc3a(0x1ab)]);}};exports['deleteMedia']=deleteMedia;