const a568_0x59a1b9=a568_0x16e5;function a568_0x1847(){const _0x39dbf1=['path','16797emvmGW','deleteMedia','lodash','mediaUpload','greetingMediaAttachment','6vHoSya','status','1306610xRqpTJ','../../models/Whatsapp','send','files','Arquivo\x20excluÃ­do','public','(((.+)+)+)+$','resolve','search','6463064KirkZu','defineProperty','constructor','toString','filename','2863MUxuvp','__esModule','save','118271XcAbLi','unlinkSync','head','931851pqFgOi','existsSync','893398zBkaXi','message','params','8sTCcUS','760ezssCF','json','9XqZKjR','default'];a568_0x1847=function(){return _0x39dbf1;};return a568_0x1847();}(function(_0x49bf09,_0x353096){const _0x5485e4=a568_0x16e5,_0x441239=_0x49bf09();while(!![]){try{const _0x31c6a3=-parseInt(_0x5485e4(0xed))/0x1+parseInt(_0x5485e4(0xf2))/0x2+parseInt(_0x5485e4(0xf0))/0x3+-parseInt(_0x5485e4(0xcf))/0x4*(-parseInt(_0x5485e4(0xdc))/0x5)+parseInt(_0x5485e4(0xda))/0x6*(-parseInt(_0x5485e4(0xea))/0x7)+-parseInt(_0x5485e4(0xe5))/0x8*(parseInt(_0x5485e4(0xd2))/0x9)+parseInt(_0x5485e4(0xd0))/0xa*(parseInt(_0x5485e4(0xd5))/0xb);if(_0x31c6a3===_0x353096)break;else _0x441239['push'](_0x441239['shift']());}catch(_0x8cd8f7){_0x441239['push'](_0x441239['shift']());}}}(a568_0x1847,0x729c9));const a568_0x5b726e=(function(){let _0x18755a=!![];return function(_0x41d538,_0x3d7878){const _0x1a736a=_0x18755a?function(){if(_0x3d7878){const _0x17a3e2=_0x3d7878['apply'](_0x41d538,arguments);return _0x3d7878=null,_0x17a3e2;}}:function(){};return _0x18755a=![],_0x1a736a;};}()),a568_0x3d30df=a568_0x5b726e(this,function(){const _0x102f6b=a568_0x16e5;return a568_0x3d30df[_0x102f6b(0xe8)]()['search'](_0x102f6b(0xe2))[_0x102f6b(0xe8)]()[_0x102f6b(0xe7)](a568_0x3d30df)[_0x102f6b(0xe4)](_0x102f6b(0xe2));});a568_0x3d30df();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x6b6f79){const _0xd0c06b=a568_0x16e5;return _0x6b6f79&&_0x6b6f79[_0xd0c06b(0xeb)]?_0x6b6f79:{'default':_0x6b6f79};};Object[a568_0x59a1b9(0xe6)](exports,a568_0x59a1b9(0xeb),{'value':!![]}),exports[a568_0x59a1b9(0xd6)]=exports[a568_0x59a1b9(0xd8)]=void 0x0;const lodash_1=require(a568_0x59a1b9(0xd7)),AppError_1=__importDefault(require('../../errors/AppError')),Whatsapp_1=__importDefault(require(a568_0x59a1b9(0xdd))),path_1=__importDefault(require(a568_0x59a1b9(0xd4))),fs_1=__importDefault(require('fs')),mediaUpload=async(_0x17b3df,_0x1ac322)=>{const _0x107b7c=a568_0x59a1b9,{whatsappId:_0x4611de}=_0x17b3df[_0x107b7c(0xce)],_0x1c699b=_0x17b3df[_0x107b7c(0xdf)],_0x3e4e3e=(0x0,lodash_1[_0x107b7c(0xef)])(_0x1c699b);try{const _0x44cbe8=await Whatsapp_1[_0x107b7c(0xd3)]['findByPk'](_0x4611de);if(_0x44cbe8[_0x107b7c(0xd9)]){const _0x42a392=path_1[_0x107b7c(0xd3)][_0x107b7c(0xe3)](_0x107b7c(0xe1),_0x44cbe8[_0x107b7c(0xd9)]),_0x25b2f5=fs_1[_0x107b7c(0xd3)][_0x107b7c(0xf1)](_0x42a392);_0x25b2f5&&fs_1['default'][_0x107b7c(0xee)](_0x42a392);}return _0x44cbe8['greetingMediaAttachment']=_0x3e4e3e[_0x107b7c(0xe9)],await _0x44cbe8[_0x107b7c(0xec)](),_0x1ac322[_0x107b7c(0xdb)](0xc8)[_0x107b7c(0xd1)]({'mensagem':'Arquivo\x20adicionado!'});}catch(_0x2cd9de){throw new AppError_1[(_0x107b7c(0xd3))](_0x2cd9de[_0x107b7c(0xcd)]);}};exports[a568_0x59a1b9(0xd8)]=mediaUpload;function a568_0x16e5(_0x3c54bf,_0x5a792f){const _0x2bb53c=a568_0x1847();return a568_0x16e5=function(_0x3d30df,_0x5b726e){_0x3d30df=_0x3d30df-0xcd;let _0x1847cd=_0x2bb53c[_0x3d30df];return _0x1847cd;},a568_0x16e5(_0x3c54bf,_0x5a792f);}const deleteMedia=async(_0x363faf,_0x373f60)=>{const _0x59f430=a568_0x59a1b9,{whatsappId:_0xd50955}=_0x363faf[_0x59f430(0xce)];try{const _0x5b8189=await Whatsapp_1[_0x59f430(0xd3)]['findByPk'](_0xd50955),_0xe60843=path_1['default'][_0x59f430(0xe3)](_0x59f430(0xe1),_0x5b8189[_0x59f430(0xd9)]),_0xa9500e=fs_1[_0x59f430(0xd3)]['existsSync'](_0xe60843);return _0xa9500e&&fs_1[_0x59f430(0xd3)]['unlinkSync'](_0xe60843),_0x5b8189['greetingMediaAttachment']=null,await _0x5b8189['save'](),_0x373f60[_0x59f430(0xde)]({'message':_0x59f430(0xe0)});}catch(_0x13a25c){throw new AppError_1['default'](_0x13a25c[_0x59f430(0xcd)]);}};exports[a568_0x59a1b9(0xd6)]=deleteMedia;