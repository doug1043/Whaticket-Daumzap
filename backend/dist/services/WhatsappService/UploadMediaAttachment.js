const a569_0x138c21=a569_0x47a9;(function(_0x704f8,_0x3137d8){const _0x3500e9=a569_0x47a9,_0x371dd1=_0x704f8();while(!![]){try{const _0x4abf5c=parseInt(_0x3500e9(0x1b9))/0x1+parseInt(_0x3500e9(0x1c9))/0x2+parseInt(_0x3500e9(0x1b6))/0x3+parseInt(_0x3500e9(0x1b4))/0x4+parseInt(_0x3500e9(0x1c1))/0x5*(parseInt(_0x3500e9(0x1bc))/0x6)+-parseInt(_0x3500e9(0x1b8))/0x7*(parseInt(_0x3500e9(0x1ce))/0x8)+-parseInt(_0x3500e9(0x1ad))/0x9;if(_0x4abf5c===_0x3137d8)break;else _0x371dd1['push'](_0x371dd1['shift']());}catch(_0x2b7b83){_0x371dd1['push'](_0x371dd1['shift']());}}}(a569_0x3b81,0xce9f5));const a569_0x160cde=(function(){let _0x104862=!![];return function(_0x1afba4,_0x1cfe37){const _0x52a593=_0x104862?function(){if(_0x1cfe37){const _0x1c1513=_0x1cfe37['apply'](_0x1afba4,arguments);return _0x1cfe37=null,_0x1c1513;}}:function(){};return _0x104862=![],_0x52a593;};}()),a569_0x10bbc6=a569_0x160cde(this,function(){const _0x2659c3=a569_0x47a9;return a569_0x10bbc6[_0x2659c3(0x1c3)]()[_0x2659c3(0x1b3)]('(((.+)+)+)+$')[_0x2659c3(0x1c3)]()['constructor'](a569_0x10bbc6)[_0x2659c3(0x1b3)](_0x2659c3(0x1c5));});a569_0x10bbc6();'use strict';var __importDefault=this&&this[a569_0x138c21(0x1ae)]||function(_0x4edace){const _0x49fdd3=a569_0x138c21;return _0x4edace&&_0x4edace[_0x49fdd3(0x1c2)]?_0x4edace:{'default':_0x4edace};};Object[a569_0x138c21(0x1c6)](exports,a569_0x138c21(0x1c2),{'value':!![]}),exports['deleteMedia']=exports[a569_0x138c21(0x1c7)]=void 0x0;function a569_0x3b81(){const _0x252c6f=['greetingMediaAttachment','10816686ErFuNi','__importDefault','send','unlinkSync','default','status','search','1882320LLvzXl','../../errors/AppError','1075641pWvkQi','files','3924963eeKkTr','544392MZZKOx','resolve','public','6vEihpy','filename','../../models/Whatsapp','lodash','params','1928365BUptvC','__esModule','toString','existsSync','(((.+)+)+)+$','defineProperty','mediaUpload','save','1699392ZMXznY','message','json','deleteMedia','head','8UkmBBe'];a569_0x3b81=function(){return _0x252c6f;};return a569_0x3b81();}const lodash_1=require(a569_0x138c21(0x1bf)),AppError_1=__importDefault(require(a569_0x138c21(0x1b5))),Whatsapp_1=__importDefault(require(a569_0x138c21(0x1be))),path_1=__importDefault(require('path')),fs_1=__importDefault(require('fs')),mediaUpload=async(_0x250b52,_0x52bfe8)=>{const _0x32ed4e=a569_0x138c21,{whatsappId:_0x1f9099}=_0x250b52[_0x32ed4e(0x1c0)],_0x39ec65=_0x250b52[_0x32ed4e(0x1b7)],_0x57209b=(0x0,lodash_1[_0x32ed4e(0x1cd)])(_0x39ec65);try{const _0x17c1c7=await Whatsapp_1[_0x32ed4e(0x1b1)]['findByPk'](_0x1f9099);if(_0x17c1c7['greetingMediaAttachment']){const _0x32eec1=path_1[_0x32ed4e(0x1b1)]['resolve'](_0x32ed4e(0x1bb),_0x17c1c7[_0x32ed4e(0x1cf)]),_0x2d6238=fs_1[_0x32ed4e(0x1b1)][_0x32ed4e(0x1c4)](_0x32eec1);_0x2d6238&&fs_1['default']['unlinkSync'](_0x32eec1);}return _0x17c1c7['greetingMediaAttachment']=_0x57209b[_0x32ed4e(0x1bd)],await _0x17c1c7['save'](),_0x52bfe8[_0x32ed4e(0x1b2)](0xc8)[_0x32ed4e(0x1cb)]({'mensagem':'Arquivo\x20adicionado!'});}catch(_0x5b50f0){throw new AppError_1[(_0x32ed4e(0x1b1))](_0x5b50f0[_0x32ed4e(0x1ca)]);}};exports[a569_0x138c21(0x1c7)]=mediaUpload;function a569_0x47a9(_0x1369f3,_0x1206ec){const _0x5d77ba=a569_0x3b81();return a569_0x47a9=function(_0x10bbc6,_0x160cde){_0x10bbc6=_0x10bbc6-0x1ad;let _0x3b81af=_0x5d77ba[_0x10bbc6];return _0x3b81af;},a569_0x47a9(_0x1369f3,_0x1206ec);}const deleteMedia=async(_0x1493fa,_0x3171f6)=>{const _0x2f2f7d=a569_0x138c21,{whatsappId:_0x420ffb}=_0x1493fa[_0x2f2f7d(0x1c0)];try{const _0x13d331=await Whatsapp_1['default']['findByPk'](_0x420ffb),_0x291cf3=path_1[_0x2f2f7d(0x1b1)][_0x2f2f7d(0x1ba)](_0x2f2f7d(0x1bb),_0x13d331['greetingMediaAttachment']),_0x1585fc=fs_1['default'][_0x2f2f7d(0x1c4)](_0x291cf3);return _0x1585fc&&fs_1[_0x2f2f7d(0x1b1)][_0x2f2f7d(0x1b0)](_0x291cf3),_0x13d331[_0x2f2f7d(0x1cf)]=null,await _0x13d331[_0x2f2f7d(0x1c8)](),_0x3171f6[_0x2f2f7d(0x1af)]({'message':'Arquivo\x20exclu√≠do'});}catch(_0x58ab6d){throw new AppError_1[(_0x2f2f7d(0x1b1))](_0x58ab6d[_0x2f2f7d(0x1ca)]);}};exports[a569_0x138c21(0x1cc)]=deleteMedia;