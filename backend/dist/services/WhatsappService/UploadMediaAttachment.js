const a570_0x1a9a73=a570_0x34c6;function a570_0x2440(){const _0xbc9343=['9107NRfoiF','default','status','path','public','json','apply','resolve','11UiIPlv','665646ipLupn','Arquivo\x20adicionado!','4347ndHbLo','head','(((.+)+)+)+$','79390LzbKUy','unlinkSync','save','params','159691OKUGCI','104468UsqYFi','mediaUpload','findByPk','send','message','greetingMediaAttachment','filename','20eonCbL','toString','constructor','Arquivo\x20excluÃ­do','defineProperty','__esModule','3QafYLL','existsSync','680BMjLwy','deleteMedia','search','9530iApqwc','4193988lrRAnC','__importDefault'];a570_0x2440=function(){return _0xbc9343;};return a570_0x2440();}function a570_0x34c6(_0x16d130,_0x515d09){const _0x317b0d=a570_0x2440();return a570_0x34c6=function(_0x18b810,_0xbd5515){_0x18b810=_0x18b810-0x1f4;let _0x244034=_0x317b0d[_0x18b810];return _0x244034;},a570_0x34c6(_0x16d130,_0x515d09);}(function(_0xe2d5c,_0xdc24af){const _0x218695=a570_0x34c6,_0x11ed60=_0xe2d5c();while(!![]){try{const _0x54e9dc=-parseInt(_0x218695(0x216))/0x1+parseInt(_0x218695(0x212))/0x2+-parseInt(_0x218695(0x1fc))/0x3*(-parseInt(_0x218695(0x217))/0x4)+parseInt(_0x218695(0x1f6))/0x5*(parseInt(_0x218695(0x20d))/0x6)+-parseInt(_0x218695(0x204))/0x7*(parseInt(_0x218695(0x1fe))/0x8)+-parseInt(_0x218695(0x20f))/0x9*(-parseInt(_0x218695(0x201))/0xa)+parseInt(_0x218695(0x20c))/0xb*(-parseInt(_0x218695(0x202))/0xc);if(_0x54e9dc===_0xdc24af)break;else _0x11ed60['push'](_0x11ed60['shift']());}catch(_0x5a443d){_0x11ed60['push'](_0x11ed60['shift']());}}}(a570_0x2440,0x55794));const a570_0xbd5515=(function(){let _0x2f48d2=!![];return function(_0x53fea6,_0x2d761b){const _0x196419=_0x2f48d2?function(){const _0x293024=a570_0x34c6;if(_0x2d761b){const _0x1903d8=_0x2d761b[_0x293024(0x20a)](_0x53fea6,arguments);return _0x2d761b=null,_0x1903d8;}}:function(){};return _0x2f48d2=![],_0x196419;};}()),a570_0x18b810=a570_0xbd5515(this,function(){const _0x16f3c6=a570_0x34c6;return a570_0x18b810[_0x16f3c6(0x1f7)]()[_0x16f3c6(0x200)](_0x16f3c6(0x211))[_0x16f3c6(0x1f7)]()[_0x16f3c6(0x1f8)](a570_0x18b810)[_0x16f3c6(0x200)](_0x16f3c6(0x211));});a570_0x18b810();'use strict';var __importDefault=this&&this[a570_0x1a9a73(0x203)]||function(_0x49f401){return _0x49f401&&_0x49f401['__esModule']?_0x49f401:{'default':_0x49f401};};Object[a570_0x1a9a73(0x1fa)](exports,a570_0x1a9a73(0x1fb),{'value':!![]}),exports[a570_0x1a9a73(0x1ff)]=exports[a570_0x1a9a73(0x218)]=void 0x0;const lodash_1=require('lodash'),AppError_1=__importDefault(require('../../errors/AppError')),Whatsapp_1=__importDefault(require('../../models/Whatsapp')),path_1=__importDefault(require(a570_0x1a9a73(0x207))),fs_1=__importDefault(require('fs')),mediaUpload=async(_0x555193,_0x3d11c4)=>{const _0x516ebc=a570_0x1a9a73,{whatsappId:_0x45374e}=_0x555193[_0x516ebc(0x215)],_0x382074=_0x555193['files'],_0x15e549=(0x0,lodash_1[_0x516ebc(0x210)])(_0x382074);try{const _0x1b0328=await Whatsapp_1[_0x516ebc(0x205)][_0x516ebc(0x219)](_0x45374e);if(_0x1b0328['greetingMediaAttachment']){const _0x278ff4=path_1[_0x516ebc(0x205)][_0x516ebc(0x20b)](_0x516ebc(0x208),_0x1b0328[_0x516ebc(0x1f4)]),_0x44c984=fs_1[_0x516ebc(0x205)][_0x516ebc(0x1fd)](_0x278ff4);_0x44c984&&fs_1[_0x516ebc(0x205)][_0x516ebc(0x213)](_0x278ff4);}return _0x1b0328[_0x516ebc(0x1f4)]=_0x15e549[_0x516ebc(0x1f5)],await _0x1b0328['save'](),_0x3d11c4[_0x516ebc(0x206)](0xc8)[_0x516ebc(0x209)]({'mensagem':_0x516ebc(0x20e)});}catch(_0x100f49){throw new AppError_1[(_0x516ebc(0x205))](_0x100f49[_0x516ebc(0x21b)]);}};exports[a570_0x1a9a73(0x218)]=mediaUpload;const deleteMedia=async(_0x1631d1,_0x7711db)=>{const _0x14de67=a570_0x1a9a73,{whatsappId:_0x4dce0c}=_0x1631d1[_0x14de67(0x215)];try{const _0x11425c=await Whatsapp_1[_0x14de67(0x205)][_0x14de67(0x219)](_0x4dce0c),_0x1162f0=path_1[_0x14de67(0x205)]['resolve'](_0x14de67(0x208),_0x11425c[_0x14de67(0x1f4)]),_0x43c88e=fs_1[_0x14de67(0x205)][_0x14de67(0x1fd)](_0x1162f0);return _0x43c88e&&fs_1[_0x14de67(0x205)][_0x14de67(0x213)](_0x1162f0),_0x11425c['greetingMediaAttachment']=null,await _0x11425c[_0x14de67(0x214)](),_0x7711db[_0x14de67(0x21a)]({'message':_0x14de67(0x1f9)});}catch(_0x6e5826){throw new AppError_1['default'](_0x6e5826[_0x14de67(0x21b)]);}};exports[a570_0x1a9a73(0x1ff)]=deleteMedia;