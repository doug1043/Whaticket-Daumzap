function a380_0xa618(){const _0x221eae=['length','(((.+)+)+)+$','count','1683UZUdOl','740526KIqTZy','search','createdAt','1075104HdIrvG','__esModule','sender','255824eboovk','name','../../models/User','DESC','7085512DpWJfb','5dvWoRD','ASC','6MCvOtn','sortBy','10sOfwvD','3SyONVE','default','__importDefault','findAndCountAll','../../models/ChatMessage','toString','18848RQllsi','defineProperty','11815364qLOwHs','../../models/ChatUser','1406356HSDgCa','UNAUTHORIZED'];a380_0xa618=function(){return _0x221eae;};return a380_0xa618();}const a380_0x4ff9c4=a380_0x276d;(function(_0xf45f55,_0xc23be){const _0x135762=a380_0x276d,_0x5a8107=_0xf45f55();while(!![]){try{const _0x29d4b7=parseInt(_0x135762(0xfe))/0x1+-parseInt(_0x135762(0xf8))/0x2*(-parseInt(_0x135762(0x108))/0x3)+parseInt(_0x135762(0xf2))/0x4*(parseInt(_0x135762(0x103))/0x5)+-parseInt(_0x135762(0x105))/0x6*(parseInt(_0x135762(0x102))/0x7)+parseInt(_0x135762(0xee))/0x8*(-parseInt(_0x135762(0xf7))/0x9)+parseInt(_0x135762(0x107))/0xa*(parseInt(_0x135762(0xf0))/0xb)+parseInt(_0x135762(0xfb))/0xc;if(_0x29d4b7===_0xc23be)break;else _0x5a8107['push'](_0x5a8107['shift']());}catch(_0x49c9c6){_0x5a8107['push'](_0x5a8107['shift']());}}}(a380_0xa618,0xa81dc));const a380_0x539959=(function(){let _0x3f774f=!![];return function(_0x43e447,_0x39344a){const _0x1a3bf3=_0x3f774f?function(){if(_0x39344a){const _0x53f54c=_0x39344a['apply'](_0x43e447,arguments);return _0x39344a=null,_0x53f54c;}}:function(){};return _0x3f774f=![],_0x1a3bf3;};}()),a380_0xa7b8bf=a380_0x539959(this,function(){const _0x36ed81=a380_0x276d;return a380_0xa7b8bf[_0x36ed81(0xed)]()[_0x36ed81(0xf9)](_0x36ed81(0xf5))[_0x36ed81(0xed)]()['constructor'](a380_0xa7b8bf)[_0x36ed81(0xf9)]('(((.+)+)+)+$');});a380_0xa7b8bf();'use strict';var __importDefault=this&&this[a380_0x4ff9c4(0x10a)]||function(_0x4edac8){return _0x4edac8&&_0x4edac8['__esModule']?_0x4edac8:{'default':_0x4edac8};};function a380_0x276d(_0x27a3be,_0x68d22a){const _0x942203=a380_0xa618();return a380_0x276d=function(_0xa7b8bf,_0x539959){_0xa7b8bf=_0xa7b8bf-0xed;let _0xa618bb=_0x942203[_0xa7b8bf];return _0xa618bb;},a380_0x276d(_0x27a3be,_0x68d22a);}Object[a380_0x4ff9c4(0xef)](exports,a380_0x4ff9c4(0xfc),{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),ChatMessage_1=__importDefault(require(a380_0x4ff9c4(0x10c))),ChatUser_1=__importDefault(require(a380_0x4ff9c4(0xf1))),User_1=__importDefault(require(a380_0x4ff9c4(0x100))),lodash_1=require('lodash'),FindMessages=async({chatId:_0x48b7dc,ownerId:_0x324381,pageNumber:pageNumber='1'})=>{const _0x462dd9=a380_0x4ff9c4,_0x540c16=await ChatUser_1[_0x462dd9(0x109)][_0x462dd9(0xf6)]({'where':{'chatId':_0x48b7dc,'userId':_0x324381}});if(_0x540c16===0x0)throw new AppError_1['default'](_0x462dd9(0xf3),0x190);const _0x5eadeb=0x14,_0x4ded1a=_0x5eadeb*(+pageNumber-0x1),{count:_0x47aba6,rows:_0x31616c}=await ChatMessage_1[_0x462dd9(0x109)][_0x462dd9(0x10b)]({'where':{'chatId':_0x48b7dc},'include':[{'model':User_1['default'],'as':_0x462dd9(0xfd),'attributes':['id',_0x462dd9(0xff)]}],'limit':_0x5eadeb,'offset':_0x4ded1a,'order':[[_0x462dd9(0xfa),_0x462dd9(0x101)]]}),_0x24ded3=_0x47aba6>_0x4ded1a+_0x31616c[_0x462dd9(0xf4)],_0xff4d52=(0x0,lodash_1[_0x462dd9(0x106)])(_0x31616c,['id',_0x462dd9(0x104)]);return{'records':_0xff4d52,'count':_0x47aba6,'hasMore':_0x24ded3};};exports[a380_0x4ff9c4(0x109)]=FindMessages;