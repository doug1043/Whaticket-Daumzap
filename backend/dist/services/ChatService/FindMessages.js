const a413_0x5768ed=a413_0x39ae;function a413_0x1cde(){const _0x1fef4c=['sortBy','324390ilMeWw','lodash','2611McJHkQ','(((.+)+)+)+$','3274924zoQvXs','__importDefault','default','toString','5CHjaHc','219729IHYuJM','findAndCountAll','ASC','1KHlPmF','../../models/ChatUser','../../models/User','594622LkcUQA','length','search','21570373EUrvqJ','9LTfBoa','UNAUTHORIZED','__esModule','../../models/ChatMessage','1627510FVIdRS','sender','15424XRgEpa','../../errors/AppError','constructor','defineProperty'];a413_0x1cde=function(){return _0x1fef4c;};return a413_0x1cde();}(function(_0x19e80a,_0x54bb78){const _0x332fb9=a413_0x39ae,_0x4000f3=_0x19e80a();while(!![]){try{const _0x32ed78=-parseInt(_0x332fb9(0xee))/0x1*(parseInt(_0x332fb9(0xf1))/0x2)+parseInt(_0x332fb9(0xeb))/0x3+-parseInt(_0x332fb9(0x104))/0x4*(parseInt(_0x332fb9(0x108))/0x5)+parseInt(_0x332fb9(0x100))/0x6+-parseInt(_0x332fb9(0x102))/0x7*(parseInt(_0x332fb9(0xfb))/0x8)+parseInt(_0x332fb9(0xf5))/0x9*(parseInt(_0x332fb9(0xf9))/0xa)+parseInt(_0x332fb9(0xf4))/0xb;if(_0x32ed78===_0x54bb78)break;else _0x4000f3['push'](_0x4000f3['shift']());}catch(_0x311f9a){_0x4000f3['push'](_0x4000f3['shift']());}}}(a413_0x1cde,0x65848));const a413_0x5ab796=(function(){let _0x125e1e=!![];return function(_0x1945ad,_0x548f3b){const _0x43a3fe=_0x125e1e?function(){if(_0x548f3b){const _0x141a17=_0x548f3b['apply'](_0x1945ad,arguments);return _0x548f3b=null,_0x141a17;}}:function(){};return _0x125e1e=![],_0x43a3fe;};}()),a413_0x2a2fb4=a413_0x5ab796(this,function(){const _0x17ac9e=a413_0x39ae;return a413_0x2a2fb4[_0x17ac9e(0x107)]()[_0x17ac9e(0xf3)](_0x17ac9e(0x103))['toString']()[_0x17ac9e(0xfd)](a413_0x2a2fb4)[_0x17ac9e(0xf3)]('(((.+)+)+)+$');});a413_0x2a2fb4();'use strict';var __importDefault=this&&this[a413_0x5768ed(0x105)]||function(_0x3b817b){const _0x3814cc=a413_0x5768ed;return _0x3b817b&&_0x3b817b[_0x3814cc(0xf7)]?_0x3b817b:{'default':_0x3b817b};};function a413_0x39ae(_0x3b6df2,_0x3d3e7d){const _0x159a85=a413_0x1cde();return a413_0x39ae=function(_0x2a2fb4,_0x5ab796){_0x2a2fb4=_0x2a2fb4-0xeb;let _0x1cdef3=_0x159a85[_0x2a2fb4];return _0x1cdef3;},a413_0x39ae(_0x3b6df2,_0x3d3e7d);}Object[a413_0x5768ed(0xfe)](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require(a413_0x5768ed(0xfc))),ChatMessage_1=__importDefault(require(a413_0x5768ed(0xf8))),ChatUser_1=__importDefault(require(a413_0x5768ed(0xef))),User_1=__importDefault(require(a413_0x5768ed(0xf0))),lodash_1=require(a413_0x5768ed(0x101)),FindMessages=async({chatId:_0x8b60a6,ownerId:_0x3c3688,pageNumber:pageNumber='1'})=>{const _0x403440=a413_0x5768ed,_0x3ac03d=await ChatUser_1[_0x403440(0x106)]['count']({'where':{'chatId':_0x8b60a6,'userId':_0x3c3688}});if(_0x3ac03d===0x0)throw new AppError_1['default'](_0x403440(0xf6),0x190);const _0x561692=0x14,_0x290987=_0x561692*(+pageNumber-0x1),{count:_0x4fa7a4,rows:_0x1045dd}=await ChatMessage_1['default'][_0x403440(0xec)]({'where':{'chatId':_0x8b60a6},'include':[{'model':User_1[_0x403440(0x106)],'as':_0x403440(0xfa),'attributes':['id','name']}],'limit':_0x561692,'offset':_0x290987,'order':[['createdAt','DESC']]}),_0x8007fd=_0x4fa7a4>_0x290987+_0x1045dd[_0x403440(0xf2)],_0x24b100=(0x0,lodash_1[_0x403440(0xff)])(_0x1045dd,['id',_0x403440(0xed)]);return{'records':_0x24b100,'count':_0x4fa7a4,'hasMore':_0x8007fd};};exports[a413_0x5768ed(0x106)]=FindMessages;