const a413_0x438865=a413_0x53b3;(function(_0x5913fc,_0x197129){const _0x3485f9=a413_0x53b3,_0x249315=_0x5913fc();while(!![]){try{const _0x205000=parseInt(_0x3485f9(0x9e))/0x1+-parseInt(_0x3485f9(0xb2))/0x2+parseInt(_0x3485f9(0xa8))/0x3+-parseInt(_0x3485f9(0xad))/0x4+parseInt(_0x3485f9(0xa3))/0x5+parseInt(_0x3485f9(0x9d))/0x6+-parseInt(_0x3485f9(0xa4))/0x7;if(_0x205000===_0x197129)break;else _0x249315['push'](_0x249315['shift']());}catch(_0x310116){_0x249315['push'](_0x249315['shift']());}}}(a413_0x19e1,0x7a778));const a413_0xe28cb1=(function(){let _0x38b677=!![];return function(_0x2c1db5,_0x1e8098){const _0x3be11f=_0x38b677?function(){const _0x2f28a9=a413_0x53b3;if(_0x1e8098){const _0x23dd3b=_0x1e8098[_0x2f28a9(0xa0)](_0x2c1db5,arguments);return _0x1e8098=null,_0x23dd3b;}}:function(){};return _0x38b677=![],_0x3be11f;};}()),a413_0x520cb9=a413_0xe28cb1(this,function(){const _0x188e17=a413_0x53b3;return a413_0x520cb9[_0x188e17(0x9c)]()[_0x188e17(0xa6)](_0x188e17(0xaa))['toString']()['constructor'](a413_0x520cb9)[_0x188e17(0xa6)](_0x188e17(0xaa));});a413_0x520cb9();function a413_0x19e1(){const _0x542d09=['sortBy','apply','default','ASC','3889040dMdZtD','1660274EvgQvX','../../models/User','search','../../models/ChatUser','855798BlKpmj','DESC','(((.+)+)+)+$','sender','../../models/ChatMessage','2000460QcgTGH','length','name','__esModule','defineProperty','613548sxKgRi','count','findAndCountAll','createdAt','UNAUTHORIZED','lodash','toString','1383624SpYjzk','252017wBUmSw'];a413_0x19e1=function(){return _0x542d09;};return a413_0x19e1();}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2edf8a){const _0x14d3ef=a413_0x53b3;return _0x2edf8a&&_0x2edf8a[_0x14d3ef(0xb0)]?_0x2edf8a:{'default':_0x2edf8a};};function a413_0x53b3(_0x459d11,_0x3b7ba4){const _0x5bc57d=a413_0x19e1();return a413_0x53b3=function(_0x520cb9,_0xe28cb1){_0x520cb9=_0x520cb9-0x97;let _0x19e162=_0x5bc57d[_0x520cb9];return _0x19e162;},a413_0x53b3(_0x459d11,_0x3b7ba4);}Object[a413_0x438865(0xb1)](exports,a413_0x438865(0xb0),{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),ChatMessage_1=__importDefault(require(a413_0x438865(0xac))),ChatUser_1=__importDefault(require(a413_0x438865(0xa7))),User_1=__importDefault(require(a413_0x438865(0xa5))),lodash_1=require(a413_0x438865(0x9b)),FindMessages=async({chatId:_0x50695c,ownerId:_0x599418,pageNumber:pageNumber='1'})=>{const _0x2fe1f3=a413_0x438865,_0x4df456=await ChatUser_1['default'][_0x2fe1f3(0x97)]({'where':{'chatId':_0x50695c,'userId':_0x599418}});if(_0x4df456===0x0)throw new AppError_1[(_0x2fe1f3(0xa1))](_0x2fe1f3(0x9a),0x190);const _0x3a7bc8=0x14,_0x529a4d=_0x3a7bc8*(+pageNumber-0x1),{count:_0x11f964,rows:_0x417e8a}=await ChatMessage_1[_0x2fe1f3(0xa1)][_0x2fe1f3(0x98)]({'where':{'chatId':_0x50695c},'include':[{'model':User_1[_0x2fe1f3(0xa1)],'as':_0x2fe1f3(0xab),'attributes':['id',_0x2fe1f3(0xaf)]}],'limit':_0x3a7bc8,'offset':_0x529a4d,'order':[[_0x2fe1f3(0x99),_0x2fe1f3(0xa9)]]}),_0x306171=_0x11f964>_0x529a4d+_0x417e8a[_0x2fe1f3(0xae)],_0x5eb2c5=(0x0,lodash_1[_0x2fe1f3(0x9f)])(_0x417e8a,['id',_0x2fe1f3(0xa2)]);return{'records':_0x5eb2c5,'count':_0x11f964,'hasMore':_0x306171};};exports[a413_0x438865(0xa1)]=FindMessages;