function a497_0x3976(_0x1eacb5,_0x1e929a){const _0x51d5ff=a497_0x5664();return a497_0x3976=function(_0xffec08,_0x2d37e0){_0xffec08=_0xffec08-0xef;let _0x566472=_0x51d5ff[_0xffec08];return _0x566472;},a497_0x3976(_0x1eacb5,_0x1e929a);}const a497_0x3f18b7=a497_0x3976;(function(_0x515e20,_0x267175){const _0xf34fce=a497_0x3976,_0x2f2a37=_0x515e20();while(!![]){try{const _0x249041=parseInt(_0xf34fce(0xf0))/0x1+parseInt(_0xf34fce(0x100))/0x2+-parseInt(_0xf34fce(0xf6))/0x3+-parseInt(_0xf34fce(0xf4))/0x4*(-parseInt(_0xf34fce(0xf2))/0x5)+parseInt(_0xf34fce(0xf3))/0x6+parseInt(_0xf34fce(0xf7))/0x7*(parseInt(_0xf34fce(0xf9))/0x8)+-parseInt(_0xf34fce(0x108))/0x9;if(_0x249041===_0x267175)break;else _0x2f2a37['push'](_0x2f2a37['shift']());}catch(_0x1b27e6){_0x2f2a37['push'](_0x2f2a37['shift']());}}}(a497_0x5664,0x9f1ef));const a497_0x2d37e0=(function(){let _0x27507f=!![];return function(_0x3db23b,_0x3ed4ba){const _0xe7108e=_0x27507f?function(){const _0x42a216=a497_0x3976;if(_0x3ed4ba){const _0x8b7e64=_0x3ed4ba[_0x42a216(0x107)](_0x3db23b,arguments);return _0x3ed4ba=null,_0x8b7e64;}}:function(){};return _0x27507f=![],_0xe7108e;};}()),a497_0xffec08=a497_0x2d37e0(this,function(){const _0x49b97c=a497_0x3976;return a497_0xffec08[_0x49b97c(0x10a)]()[_0x49b97c(0x105)](_0x49b97c(0xef))[_0x49b97c(0x10a)]()[_0x49b97c(0xff)](a497_0xffec08)[_0x49b97c(0x105)](_0x49b97c(0xef));});function a497_0x5664(){const _0x22e7cf=['default','__importDefault','UNAUTHORIZED','search','../../models/ChatMessage','apply','12407562CewXjJ','__esModule','toString','(((.+)+)+)+$','915679JdAjsd','findAndCountAll','44320rJvkrJ','4173774xeijXf','92kBTwbj','name','1589346vVvvcU','1421PUABXV','createdAt','14144uQaQps','../../models/ChatUser','../../models/User','sortBy','defineProperty','ASC','constructor','772150HEENYS','../../errors/AppError'];a497_0x5664=function(){return _0x22e7cf;};return a497_0x5664();}a497_0xffec08();'use strict';var __importDefault=this&&this[a497_0x3f18b7(0x103)]||function(_0x1025f6){const _0x1c3ea8=a497_0x3f18b7;return _0x1025f6&&_0x1025f6[_0x1c3ea8(0x109)]?_0x1025f6:{'default':_0x1025f6};};Object[a497_0x3f18b7(0xfd)](exports,a497_0x3f18b7(0x109),{'value':!![]});const AppError_1=__importDefault(require(a497_0x3f18b7(0x101))),ChatMessage_1=__importDefault(require(a497_0x3f18b7(0x106))),ChatUser_1=__importDefault(require(a497_0x3f18b7(0xfa))),User_1=__importDefault(require(a497_0x3f18b7(0xfb))),lodash_1=require('lodash'),FindMessages=async({chatId:_0x22ca25,ownerId:_0xfd987e,pageNumber:pageNumber='1'})=>{const _0x451e04=a497_0x3f18b7,_0x25cf33=await ChatUser_1[_0x451e04(0x102)]['count']({'where':{'chatId':_0x22ca25,'userId':_0xfd987e}});if(_0x25cf33===0x0)throw new AppError_1[(_0x451e04(0x102))](_0x451e04(0x104),0x190);const _0x2e2333=0x14,_0x154663=_0x2e2333*(+pageNumber-0x1),{count:_0x192b0d,rows:_0x4a72cb}=await ChatMessage_1[_0x451e04(0x102)][_0x451e04(0xf1)]({'where':{'chatId':_0x22ca25},'include':[{'model':User_1['default'],'as':'sender','attributes':['id',_0x451e04(0xf5)]}],'limit':_0x2e2333,'offset':_0x154663,'order':[[_0x451e04(0xf8),'DESC']]}),_0xad6c85=_0x192b0d>_0x154663+_0x4a72cb['length'],_0x85d14f=(0x0,lodash_1[_0x451e04(0xfc)])(_0x4a72cb,['id',_0x451e04(0xfe)]);return{'records':_0x85d14f,'count':_0x192b0d,'hasMore':_0xad6c85};};exports[a497_0x3f18b7(0x102)]=FindMessages;