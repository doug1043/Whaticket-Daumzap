const a411_0x47f864=a411_0x5798;(function(_0x5ba8cc,_0x5f3968){const _0x2d2052=a411_0x5798,_0x15f1e7=_0x5ba8cc();while(!![]){try{const _0x16c3b9=parseInt(_0x2d2052(0xf2))/0x1*(-parseInt(_0x2d2052(0x101))/0x2)+-parseInt(_0x2d2052(0xea))/0x3*(-parseInt(_0x2d2052(0x102))/0x4)+parseInt(_0x2d2052(0xf4))/0x5+parseInt(_0x2d2052(0xeb))/0x6*(parseInt(_0x2d2052(0xee))/0x7)+-parseInt(_0x2d2052(0xff))/0x8+-parseInt(_0x2d2052(0xfc))/0x9*(-parseInt(_0x2d2052(0xf7))/0xa)+parseInt(_0x2d2052(0xf6))/0xb*(-parseInt(_0x2d2052(0x104))/0xc);if(_0x16c3b9===_0x5f3968)break;else _0x15f1e7['push'](_0x15f1e7['shift']());}catch(_0x26cb3c){_0x15f1e7['push'](_0x15f1e7['shift']());}}}(a411_0x29c4,0x4d5ec));const a411_0x27c33f=(function(){let _0x4f19a1=!![];return function(_0x3cf579,_0x40f91e){const _0x151e19=_0x4f19a1?function(){const _0x581cbb=a411_0x5798;if(_0x40f91e){const _0x3c4ced=_0x40f91e[_0x581cbb(0xfa)](_0x3cf579,arguments);return _0x40f91e=null,_0x3c4ced;}}:function(){};return _0x4f19a1=![],_0x151e19;};}()),a411_0x43a41f=a411_0x27c33f(this,function(){const _0x1ee4e3=a411_0x5798;return a411_0x43a41f[_0x1ee4e3(0xed)]()[_0x1ee4e3(0xef)](_0x1ee4e3(0x105))['toString']()['constructor'](a411_0x43a41f)['search'](_0x1ee4e3(0x105));});a411_0x43a41f();'use strict';function a411_0x5798(_0x1abef4,_0xce4bf2){const _0x49e612=a411_0x29c4();return a411_0x5798=function(_0x43a41f,_0x27c33f){_0x43a41f=_0x43a41f-0xe9;let _0x29c474=_0x49e612[_0x43a41f];return _0x29c474;},a411_0x5798(_0x1abef4,_0xce4bf2);}var __importDefault=this&&this[a411_0x47f864(0xf1)]||function(_0x547809){const _0xecbd8a=a411_0x47f864;return _0x547809&&_0x547809[_0xecbd8a(0xf9)]?_0x547809:{'default':_0x547809};};function a411_0x29c4(){const _0x34bed9=['5541wsHvDx','3576498AvoTCr','defineProperty','toString','7sdbBgf','search','default','__importDefault','19YUvELS','DESC','2540825rULGTI','../../models/ChatUser','671Czxjai','140090eYNtbi','lodash','__esModule','apply','../../models/ChatMessage','135AGwGpr','ASC','sortBy','548568SAYavp','UNAUTHORIZED','35726KkUnyG','516OBDtZG','../../models/User','162840SioVLw','(((.+)+)+)+$','sender','count'];a411_0x29c4=function(){return _0x34bed9;};return a411_0x29c4();}Object[a411_0x47f864(0xec)](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),ChatMessage_1=__importDefault(require(a411_0x47f864(0xfb))),ChatUser_1=__importDefault(require(a411_0x47f864(0xf5))),User_1=__importDefault(require(a411_0x47f864(0x103))),lodash_1=require(a411_0x47f864(0xf8)),FindMessages=async({chatId:_0x130664,ownerId:_0x1f882a,pageNumber:pageNumber='1'})=>{const _0x30df1b=a411_0x47f864,_0x4ada0c=await ChatUser_1[_0x30df1b(0xf0)][_0x30df1b(0xe9)]({'where':{'chatId':_0x130664,'userId':_0x1f882a}});if(_0x4ada0c===0x0)throw new AppError_1['default'](_0x30df1b(0x100),0x190);const _0x2970c7=0x14,_0x105a53=_0x2970c7*(+pageNumber-0x1),{count:_0x1d6336,rows:_0x2e4054}=await ChatMessage_1[_0x30df1b(0xf0)]['findAndCountAll']({'where':{'chatId':_0x130664},'include':[{'model':User_1[_0x30df1b(0xf0)],'as':_0x30df1b(0x106),'attributes':['id','name']}],'limit':_0x2970c7,'offset':_0x105a53,'order':[['createdAt',_0x30df1b(0xf3)]]}),_0x4449f9=_0x1d6336>_0x105a53+_0x2e4054['length'],_0x4c8d19=(0x0,lodash_1[_0x30df1b(0xfe)])(_0x2e4054,['id',_0x30df1b(0xfd)]);return{'records':_0x4c8d19,'count':_0x1d6336,'hasMore':_0x4449f9};};exports[a411_0x47f864(0xf0)]=FindMessages;