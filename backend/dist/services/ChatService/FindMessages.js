const a380_0x1a8eec=a380_0x176e;(function(_0x1b0da8,_0x1bcec0){const _0x24ba53=a380_0x176e,_0x5a134c=_0x1b0da8();while(!![]){try{const _0x51209c=-parseInt(_0x24ba53(0x202))/0x1*(-parseInt(_0x24ba53(0x1ed))/0x2)+-parseInt(_0x24ba53(0x1f7))/0x3*(parseInt(_0x24ba53(0x201))/0x4)+-parseInt(_0x24ba53(0x1ee))/0x5*(-parseInt(_0x24ba53(0x1fc))/0x6)+parseInt(_0x24ba53(0x1ff))/0x7+parseInt(_0x24ba53(0x1fb))/0x8*(-parseInt(_0x24ba53(0x1eb))/0x9)+-parseInt(_0x24ba53(0x200))/0xa+parseInt(_0x24ba53(0x1fd))/0xb;if(_0x51209c===_0x1bcec0)break;else _0x5a134c['push'](_0x5a134c['shift']());}catch(_0x1e5863){_0x5a134c['push'](_0x5a134c['shift']());}}}(a380_0xbb21,0xe6b22));const a380_0x144616=(function(){let _0x1369c5=!![];return function(_0x398b4e,_0x3f07d3){const _0xab8f97=_0x1369c5?function(){if(_0x3f07d3){const _0x141a94=_0x3f07d3['apply'](_0x398b4e,arguments);return _0x3f07d3=null,_0x141a94;}}:function(){};return _0x1369c5=![],_0xab8f97;};}()),a380_0x1a41c2=a380_0x144616(this,function(){const _0x6a6ea1=a380_0x176e;return a380_0x1a41c2['toString']()[_0x6a6ea1(0x1f3)](_0x6a6ea1(0x1f0))[_0x6a6ea1(0x1e9)]()[_0x6a6ea1(0x1f8)](a380_0x1a41c2)[_0x6a6ea1(0x1f3)](_0x6a6ea1(0x1f0));});function a380_0xbb21(){const _0x3d0dc3=['11477521sPwjLw','../../models/ChatMessage','9235128RoSBSF','17369350ppsuZE','1076580CUQGRj','101xAABLk','../../models/ChatUser','toString','name','9PhynDG','sortBy','32656CzAOsF','3885IIogAi','__esModule','(((.+)+)+)+$','default','sender','search','__importDefault','lodash','count','6wQOFFV','constructor','ASC','UNAUTHORIZED','13780272RaCmZW','7188PZGVoX'];a380_0xbb21=function(){return _0x3d0dc3;};return a380_0xbb21();}function a380_0x176e(_0x12ea61,_0x3c6df0){const _0x1af7e0=a380_0xbb21();return a380_0x176e=function(_0x1a41c2,_0x144616){_0x1a41c2=_0x1a41c2-0x1e9;let _0xbb21dd=_0x1af7e0[_0x1a41c2];return _0xbb21dd;},a380_0x176e(_0x12ea61,_0x3c6df0);}a380_0x1a41c2();'use strict';var __importDefault=this&&this[a380_0x1a8eec(0x1f4)]||function(_0x272344){const _0x37cea8=a380_0x1a8eec;return _0x272344&&_0x272344[_0x37cea8(0x1ef)]?_0x272344:{'default':_0x272344};};Object['defineProperty'](exports,a380_0x1a8eec(0x1ef),{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),ChatMessage_1=__importDefault(require(a380_0x1a8eec(0x1fe))),ChatUser_1=__importDefault(require(a380_0x1a8eec(0x203))),User_1=__importDefault(require('../../models/User')),lodash_1=require(a380_0x1a8eec(0x1f5)),FindMessages=async({chatId:_0x1416b8,ownerId:_0x146bee,pageNumber:pageNumber='1'})=>{const _0x2ab343=a380_0x1a8eec,_0x1a2516=await ChatUser_1[_0x2ab343(0x1f1)][_0x2ab343(0x1f6)]({'where':{'chatId':_0x1416b8,'userId':_0x146bee}});if(_0x1a2516===0x0)throw new AppError_1[(_0x2ab343(0x1f1))](_0x2ab343(0x1fa),0x190);const _0x143a93=0x14,_0x4fbdbd=_0x143a93*(+pageNumber-0x1),{count:_0xe7eec8,rows:_0x244546}=await ChatMessage_1[_0x2ab343(0x1f1)]['findAndCountAll']({'where':{'chatId':_0x1416b8},'include':[{'model':User_1[_0x2ab343(0x1f1)],'as':_0x2ab343(0x1f2),'attributes':['id',_0x2ab343(0x1ea)]}],'limit':_0x143a93,'offset':_0x4fbdbd,'order':[['createdAt','DESC']]}),_0x2d5d28=_0xe7eec8>_0x4fbdbd+_0x244546['length'],_0xdb7114=(0x0,lodash_1[_0x2ab343(0x1ec)])(_0x244546,['id',_0x2ab343(0x1f9)]);return{'records':_0xdb7114,'count':_0xe7eec8,'hasMore':_0x2d5d28};};exports[a380_0x1a8eec(0x1f1)]=FindMessages;