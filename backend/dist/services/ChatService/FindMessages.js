function a381_0xc256(){const _0x506a35=['__importDefault','count','390ecBpMG','507824rpHcTG','default','__esModule','sender','UNAUTHORIZED','defineProperty','(((.+)+)+)+$','../../models/User','ASC','search','constructor','../../models/ChatUser','410368ZPUibP','10vsmayE','321144UinYew','apply','1539927fWnWYT','54198WPGzqO','toString','length','12ejgneN','name','DESC','2855jXAUeA','../../models/ChatMessage','3717344iJhuIY'];a381_0xc256=function(){return _0x506a35;};return a381_0xc256();}const a381_0x1727c2=a381_0x284d;(function(_0x2fb701,_0x451468){const _0x107e07=a381_0x284d,_0x2353f9=_0x2fb701();while(!![]){try{const _0x229c38=-parseInt(_0x107e07(0x1f1))/0x1+parseInt(_0x107e07(0x1ff))/0x2+-parseInt(_0x107e07(0x202))/0x3*(parseInt(_0x107e07(0x1e8))/0x4)+parseInt(_0x107e07(0x1eb))/0x5*(-parseInt(_0x107e07(0x1f0))/0x6)+parseInt(_0x107e07(0x1fd))/0x7+parseInt(_0x107e07(0x1ed))/0x8+-parseInt(_0x107e07(0x201))/0x9*(-parseInt(_0x107e07(0x1fe))/0xa);if(_0x229c38===_0x451468)break;else _0x2353f9['push'](_0x2353f9['shift']());}catch(_0xf8bfdf){_0x2353f9['push'](_0x2353f9['shift']());}}}(a381_0xc256,0x3e756));const a381_0x4c5998=(function(){let _0x10d736=!![];return function(_0x5c6910,_0x7db49e){const _0xecc759=_0x10d736?function(){const _0x2c3fbb=a381_0x284d;if(_0x7db49e){const _0x37f681=_0x7db49e[_0x2c3fbb(0x200)](_0x5c6910,arguments);return _0x7db49e=null,_0x37f681;}}:function(){};return _0x10d736=![],_0xecc759;};}()),a381_0x22e4cd=a381_0x4c5998(this,function(){const _0x647266=a381_0x284d;return a381_0x22e4cd[_0x647266(0x203)]()[_0x647266(0x1fa)](_0x647266(0x1f7))[_0x647266(0x203)]()[_0x647266(0x1fb)](a381_0x22e4cd)[_0x647266(0x1fa)](_0x647266(0x1f7));});a381_0x22e4cd();'use strict';var __importDefault=this&&this[a381_0x1727c2(0x1ee)]||function(_0x12bd29){const _0x1753e5=a381_0x1727c2;return _0x12bd29&&_0x12bd29[_0x1753e5(0x1f3)]?_0x12bd29:{'default':_0x12bd29};};Object[a381_0x1727c2(0x1f6)](exports,a381_0x1727c2(0x1f3),{'value':!![]});function a381_0x284d(_0x20c207,_0x3daab8){const _0x7f786=a381_0xc256();return a381_0x284d=function(_0x22e4cd,_0x4c5998){_0x22e4cd=_0x22e4cd-0x1e7;let _0xc256a9=_0x7f786[_0x22e4cd];return _0xc256a9;},a381_0x284d(_0x20c207,_0x3daab8);}const AppError_1=__importDefault(require('../../errors/AppError')),ChatMessage_1=__importDefault(require(a381_0x1727c2(0x1ec))),ChatUser_1=__importDefault(require(a381_0x1727c2(0x1fc))),User_1=__importDefault(require(a381_0x1727c2(0x1f8))),lodash_1=require('lodash'),FindMessages=async({chatId:_0x2f5a9f,ownerId:_0x5ce2e5,pageNumber:pageNumber='1'})=>{const _0x4e9811=a381_0x1727c2,_0x3d113c=await ChatUser_1['default'][_0x4e9811(0x1ef)]({'where':{'chatId':_0x2f5a9f,'userId':_0x5ce2e5}});if(_0x3d113c===0x0)throw new AppError_1[(_0x4e9811(0x1f2))](_0x4e9811(0x1f5),0x190);const _0x2c7b75=0x14,_0x13cd04=_0x2c7b75*(+pageNumber-0x1),{count:_0x8a04e3,rows:_0x44f7b2}=await ChatMessage_1[_0x4e9811(0x1f2)]['findAndCountAll']({'where':{'chatId':_0x2f5a9f},'include':[{'model':User_1[_0x4e9811(0x1f2)],'as':_0x4e9811(0x1f4),'attributes':['id',_0x4e9811(0x1e9)]}],'limit':_0x2c7b75,'offset':_0x13cd04,'order':[['createdAt',_0x4e9811(0x1ea)]]}),_0x3e0827=_0x8a04e3>_0x13cd04+_0x44f7b2[_0x4e9811(0x1e7)],_0x31e732=(0x0,lodash_1['sortBy'])(_0x44f7b2,['id',_0x4e9811(0x1f9)]);return{'records':_0x31e732,'count':_0x8a04e3,'hasMore':_0x3e0827};};exports[a381_0x1727c2(0x1f2)]=FindMessages;