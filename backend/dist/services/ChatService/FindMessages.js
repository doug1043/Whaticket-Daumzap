const a498_0x5819ef=a498_0x133b;(function(_0x4f81d1,_0x42262d){const _0x5d0d3e=a498_0x133b,_0xfc1495=_0x4f81d1();while(!![]){try{const _0x2182ea=-parseInt(_0x5d0d3e(0x140))/0x1*(parseInt(_0x5d0d3e(0x138))/0x2)+parseInt(_0x5d0d3e(0x13a))/0x3+-parseInt(_0x5d0d3e(0x128))/0x4*(parseInt(_0x5d0d3e(0x130))/0x5)+parseInt(_0x5d0d3e(0x134))/0x6*(-parseInt(_0x5d0d3e(0x12f))/0x7)+-parseInt(_0x5d0d3e(0x12a))/0x8*(-parseInt(_0x5d0d3e(0x135))/0x9)+-parseInt(_0x5d0d3e(0x13b))/0xa*(-parseInt(_0x5d0d3e(0x131))/0xb)+parseInt(_0x5d0d3e(0x13e))/0xc*(parseInt(_0x5d0d3e(0x133))/0xd);if(_0x2182ea===_0x42262d)break;else _0xfc1495['push'](_0xfc1495['shift']());}catch(_0x1ad2d6){_0xfc1495['push'](_0xfc1495['shift']());}}}(a498_0x1fc7,0x19edd));function a498_0x1fc7(){const _0x44718a=['__importDefault','13yEuqCg','6hTLRBk','9dZDolJ','../../models/ChatUser','search','9726plRsXv','toString','275346DJkcHS','371660LhzbzF','__esModule','(((.+)+)+)+$','3034392KmQmqZ','../../models/User','19hQZGvQ','ASC','lodash','count','default','7756PTZOxu','createdAt','27272LpUsPh','constructor','findAndCountAll','defineProperty','DESC','881111SAAnoS','540ObXXRU','55vAvqGq'];a498_0x1fc7=function(){return _0x44718a;};return a498_0x1fc7();}function a498_0x133b(_0x51ac0d,_0x2b0289){const _0x4dff11=a498_0x1fc7();return a498_0x133b=function(_0x4a0a07,_0x1ce078){_0x4a0a07=_0x4a0a07-0x126;let _0x1fc74e=_0x4dff11[_0x4a0a07];return _0x1fc74e;},a498_0x133b(_0x51ac0d,_0x2b0289);}const a498_0x1ce078=(function(){let _0xe66a7e=!![];return function(_0x533f8d,_0x495d43){const _0x1d10e3=_0xe66a7e?function(){if(_0x495d43){const _0x4cc8de=_0x495d43['apply'](_0x533f8d,arguments);return _0x495d43=null,_0x4cc8de;}}:function(){};return _0xe66a7e=![],_0x1d10e3;};}()),a498_0x4a0a07=a498_0x1ce078(this,function(){const _0x2b379e=a498_0x133b;return a498_0x4a0a07[_0x2b379e(0x139)]()['search'](_0x2b379e(0x13d))['toString']()[_0x2b379e(0x12b)](a498_0x4a0a07)[_0x2b379e(0x137)]('(((.+)+)+)+$');});a498_0x4a0a07();'use strict';var __importDefault=this&&this[a498_0x5819ef(0x132)]||function(_0x3b9bb2){const _0x3ca7cb=a498_0x5819ef;return _0x3b9bb2&&_0x3b9bb2[_0x3ca7cb(0x13c)]?_0x3b9bb2:{'default':_0x3b9bb2};};Object[a498_0x5819ef(0x12d)](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),ChatMessage_1=__importDefault(require('../../models/ChatMessage')),ChatUser_1=__importDefault(require(a498_0x5819ef(0x136))),User_1=__importDefault(require(a498_0x5819ef(0x13f))),lodash_1=require(a498_0x5819ef(0x142)),FindMessages=async({chatId:_0x2b1c5c,ownerId:_0x24b755,pageNumber:pageNumber='1'})=>{const _0x452473=a498_0x5819ef,_0x4591e6=await ChatUser_1[_0x452473(0x127)][_0x452473(0x126)]({'where':{'chatId':_0x2b1c5c,'userId':_0x24b755}});if(_0x4591e6===0x0)throw new AppError_1[(_0x452473(0x127))]('UNAUTHORIZED',0x190);const _0x3cbba6=0x14,_0x54b4ce=_0x3cbba6*(+pageNumber-0x1),{count:_0x392bf6,rows:_0x173cfd}=await ChatMessage_1['default'][_0x452473(0x12c)]({'where':{'chatId':_0x2b1c5c},'include':[{'model':User_1[_0x452473(0x127)],'as':'sender','attributes':['id','name']}],'limit':_0x3cbba6,'offset':_0x54b4ce,'order':[[_0x452473(0x129),_0x452473(0x12e)]]}),_0xc7aebc=_0x392bf6>_0x54b4ce+_0x173cfd['length'],_0x38c12e=(0x0,lodash_1['sortBy'])(_0x173cfd,['id',_0x452473(0x141)]);return{'records':_0x38c12e,'count':_0x392bf6,'hasMore':_0xc7aebc};};exports[a498_0x5819ef(0x127)]=FindMessages;