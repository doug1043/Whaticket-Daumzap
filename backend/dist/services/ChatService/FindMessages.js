const a378_0x5829df=a378_0x4079;function a378_0x4079(_0x4682d5,_0x112afb){const _0x456bd6=a378_0x6733();return a378_0x4079=function(_0x50f09a,_0x354837){_0x50f09a=_0x50f09a-0x147;let _0x673321=_0x456bd6[_0x50f09a];return _0x673321;},a378_0x4079(_0x4682d5,_0x112afb);}(function(_0x168c83,_0x57abad){const _0x3ee2a9=a378_0x4079,_0x577b51=_0x168c83();while(!![]){try{const _0x20b69c=parseInt(_0x3ee2a9(0x14a))/0x1+-parseInt(_0x3ee2a9(0x152))/0x2*(-parseInt(_0x3ee2a9(0x150))/0x3)+-parseInt(_0x3ee2a9(0x15e))/0x4*(parseInt(_0x3ee2a9(0x14c))/0x5)+-parseInt(_0x3ee2a9(0x162))/0x6+-parseInt(_0x3ee2a9(0x159))/0x7+-parseInt(_0x3ee2a9(0x154))/0x8+parseInt(_0x3ee2a9(0x153))/0x9;if(_0x20b69c===_0x57abad)break;else _0x577b51['push'](_0x577b51['shift']());}catch(_0x5537fa){_0x577b51['push'](_0x577b51['shift']());}}}(a378_0x6733,0xde1a5));const a378_0x354837=(function(){let _0x5905b2=!![];return function(_0x4e452f,_0x5d8917){const _0x4d7875=_0x5905b2?function(){const _0x334d9b=a378_0x4079;if(_0x5d8917){const _0x36d179=_0x5d8917[_0x334d9b(0x147)](_0x4e452f,arguments);return _0x5d8917=null,_0x36d179;}}:function(){};return _0x5905b2=![],_0x4d7875;};}()),a378_0x50f09a=a378_0x354837(this,function(){const _0x1863ae=a378_0x4079;return a378_0x50f09a[_0x1863ae(0x160)]()[_0x1863ae(0x15d)](_0x1863ae(0x14b))[_0x1863ae(0x160)]()['constructor'](a378_0x50f09a)[_0x1863ae(0x15d)]('(((.+)+)+)+$');});a378_0x50f09a();'use strict';var __importDefault=this&&this[a378_0x5829df(0x15f)]||function(_0x3fdfeb){const _0x186b0b=a378_0x5829df;return _0x3fdfeb&&_0x3fdfeb[_0x186b0b(0x164)]?_0x3fdfeb:{'default':_0x3fdfeb};};Object[a378_0x5829df(0x158)](exports,a378_0x5829df(0x164),{'value':!![]});const AppError_1=__importDefault(require(a378_0x5829df(0x14f))),ChatMessage_1=__importDefault(require('../../models/ChatMessage')),ChatUser_1=__importDefault(require(a378_0x5829df(0x15a))),User_1=__importDefault(require(a378_0x5829df(0x149))),lodash_1=require(a378_0x5829df(0x163)),FindMessages=async({chatId:_0x16bfc4,ownerId:_0x523002,pageNumber:pageNumber='1'})=>{const _0x54e2e5=a378_0x5829df,_0x247726=await ChatUser_1[_0x54e2e5(0x161)][_0x54e2e5(0x15b)]({'where':{'chatId':_0x16bfc4,'userId':_0x523002}});if(_0x247726===0x0)throw new AppError_1[(_0x54e2e5(0x161))](_0x54e2e5(0x151),0x190);const _0x1cb88a=0x14,_0x8b1c4=_0x1cb88a*(+pageNumber-0x1),{count:_0x571321,rows:_0xb2a2bf}=await ChatMessage_1[_0x54e2e5(0x161)][_0x54e2e5(0x156)]({'where':{'chatId':_0x16bfc4},'include':[{'model':User_1[_0x54e2e5(0x161)],'as':_0x54e2e5(0x148),'attributes':['id','name']}],'limit':_0x1cb88a,'offset':_0x8b1c4,'order':[[_0x54e2e5(0x15c),_0x54e2e5(0x155)]]}),_0xc08284=_0x571321>_0x8b1c4+_0xb2a2bf[_0x54e2e5(0x14d)],_0x2d403c=(0x0,lodash_1[_0x54e2e5(0x14e)])(_0xb2a2bf,['id',_0x54e2e5(0x157)]);return{'records':_0x2d403c,'count':_0x571321,'hasMore':_0xc08284};};exports[a378_0x5829df(0x161)]=FindMessages;function a378_0x6733(){const _0x2440f3=['defineProperty','4265268SaJHxU','../../models/ChatUser','count','createdAt','search','1431084gUhNEP','__importDefault','toString','default','9804726qejQyc','lodash','__esModule','apply','sender','../../models/User','806272rymQyO','(((.+)+)+)+$','10ZyBYtN','length','sortBy','../../errors/AppError','783294phRSDQ','UNAUTHORIZED','8mEuWBx','20691261jbyUIG','2247784UOOYxy','DESC','findAndCountAll','ASC'];a378_0x6733=function(){return _0x2440f3;};return a378_0x6733();}