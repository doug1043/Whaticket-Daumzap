const a407_0xea1a86=a407_0x2cb9;(function(_0x4b5286,_0xc05dda){const _0x363fab=a407_0x2cb9,_0x1caf4e=_0x4b5286();while(!![]){try{const _0x16b68c=-parseInt(_0x363fab(0x99))/0x1+parseInt(_0x363fab(0x83))/0x2+-parseInt(_0x363fab(0x91))/0x3*(parseInt(_0x363fab(0x96))/0x4)+-parseInt(_0x363fab(0x8a))/0x5*(parseInt(_0x363fab(0x88))/0x6)+-parseInt(_0x363fab(0x9b))/0x7+parseInt(_0x363fab(0x9c))/0x8+parseInt(_0x363fab(0x84))/0x9;if(_0x16b68c===_0xc05dda)break;else _0x1caf4e['push'](_0x1caf4e['shift']());}catch(_0x15762c){_0x1caf4e['push'](_0x1caf4e['shift']());}}}(a407_0x1296,0x8795c));const a407_0xda11fd=(function(){let _0x37db9b=!![];return function(_0x288bd4,_0x3651ef){const _0x280ed1=_0x37db9b?function(){const _0x5be099=a407_0x2cb9;if(_0x3651ef){const _0x399752=_0x3651ef[_0x5be099(0x97)](_0x288bd4,arguments);return _0x3651ef=null,_0x399752;}}:function(){};return _0x37db9b=![],_0x280ed1;};}()),a407_0x2c2921=a407_0xda11fd(this,function(){const _0x24b013=a407_0x2cb9;return a407_0x2c2921[_0x24b013(0x8e)]()['search']('(((.+)+)+)+$')['toString']()[_0x24b013(0x9a)](a407_0x2c2921)[_0x24b013(0x8c)](_0x24b013(0x94));});a407_0x2c2921();function a407_0x1296(){const _0x2f95d3=['__esModule','10164KbQwjY','__importDefault','1265imfKTk','name','search','../../models/User','toString','sender','DESC','430011LHhuFA','ASC','UNAUTHORIZED','(((.+)+)+)+$','count','16XaAVhK','apply','sortBy','195906EAefMW','constructor','4538520JPYnfM','6314624kyTlWm','default','length','lodash','../../errors/AppError','1932790JoqdfT','5812461pbRARp','../../models/ChatMessage','../../models/ChatUser'];a407_0x1296=function(){return _0x2f95d3;};return a407_0x1296();}'use strict';var __importDefault=this&&this[a407_0xea1a86(0x89)]||function(_0x405f40){const _0x330ce2=a407_0xea1a86;return _0x405f40&&_0x405f40[_0x330ce2(0x87)]?_0x405f40:{'default':_0x405f40};};Object['defineProperty'](exports,a407_0xea1a86(0x87),{'value':!![]});function a407_0x2cb9(_0x16e792,_0x35e89f){const _0x2b79ca=a407_0x1296();return a407_0x2cb9=function(_0x2c2921,_0xda11fd){_0x2c2921=_0x2c2921-0x81;let _0x1296d4=_0x2b79ca[_0x2c2921];return _0x1296d4;},a407_0x2cb9(_0x16e792,_0x35e89f);}const AppError_1=__importDefault(require(a407_0xea1a86(0x82))),ChatMessage_1=__importDefault(require(a407_0xea1a86(0x85))),ChatUser_1=__importDefault(require(a407_0xea1a86(0x86))),User_1=__importDefault(require(a407_0xea1a86(0x8d))),lodash_1=require(a407_0xea1a86(0x81)),FindMessages=async({chatId:_0x2dbb01,ownerId:_0x78e71c,pageNumber:pageNumber='1'})=>{const _0x486904=a407_0xea1a86,_0x154f96=await ChatUser_1[_0x486904(0x9d)][_0x486904(0x95)]({'where':{'chatId':_0x2dbb01,'userId':_0x78e71c}});if(_0x154f96===0x0)throw new AppError_1[(_0x486904(0x9d))](_0x486904(0x93),0x190);const _0x4cdd63=0x14,_0x4758af=_0x4cdd63*(+pageNumber-0x1),{count:_0x134e89,rows:_0x40e168}=await ChatMessage_1[_0x486904(0x9d)]['findAndCountAll']({'where':{'chatId':_0x2dbb01},'include':[{'model':User_1[_0x486904(0x9d)],'as':_0x486904(0x8f),'attributes':['id',_0x486904(0x8b)]}],'limit':_0x4cdd63,'offset':_0x4758af,'order':[['createdAt',_0x486904(0x90)]]}),_0x151a10=_0x134e89>_0x4758af+_0x40e168[_0x486904(0x9e)],_0x3dd8e3=(0x0,lodash_1[_0x486904(0x98)])(_0x40e168,['id',_0x486904(0x92)]);return{'records':_0x3dd8e3,'count':_0x134e89,'hasMore':_0x151a10};};exports[a407_0xea1a86(0x9d)]=FindMessages;