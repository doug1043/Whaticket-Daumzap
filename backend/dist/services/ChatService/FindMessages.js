const a417_0x472872=a417_0x3bdb;function a417_0x128a(){const _0x1bf7b4=['length','findAndCountAll','default','5706440COJerZ','apply','count','__importDefault','DESC','ASC','3UpQNgv','2299096HVwrJs','__esModule','../../models/User','376XudDqS','lodash','createdAt','9XJrLQu','97153MQvhoO','sortBy','sender','20452620VAMMdl','search','3082376FhFrsQ','name','1082205KDFhWR','(((.+)+)+)+$','../../models/ChatMessage','toString','4752420lsjMLM'];a417_0x128a=function(){return _0x1bf7b4;};return a417_0x128a();}(function(_0xa5f3bc,_0x2ca5a7){const _0x2035db=a417_0x3bdb,_0x420a50=_0xa5f3bc();while(!![]){try{const _0x438ced=parseInt(_0x2035db(0x1d3))/0x1+parseInt(_0x2035db(0x1e2))/0x2+parseInt(_0x2035db(0x1e1))/0x3*(-parseInt(_0x2035db(0x1d1))/0x4)+parseInt(_0x2035db(0x1db))/0x5+parseInt(_0x2035db(0x1d7))/0x6+-parseInt(_0x2035db(0x1cc))/0x7*(parseInt(_0x2035db(0x1c8))/0x8)+-parseInt(_0x2035db(0x1cb))/0x9*(parseInt(_0x2035db(0x1cf))/0xa);if(_0x438ced===_0x2ca5a7)break;else _0x420a50['push'](_0x420a50['shift']());}catch(_0x5c4219){_0x420a50['push'](_0x420a50['shift']());}}}(a417_0x128a,0xaa26e));const a417_0x1121ec=(function(){let _0x2a167b=!![];return function(_0x589cc4,_0x32afb4){const _0x2e9ac0=_0x2a167b?function(){const _0x3a672e=a417_0x3bdb;if(_0x32afb4){const _0x53160a=_0x32afb4[_0x3a672e(0x1dc)](_0x589cc4,arguments);return _0x32afb4=null,_0x53160a;}}:function(){};return _0x2a167b=![],_0x2e9ac0;};}()),a417_0x3a874b=a417_0x1121ec(this,function(){const _0x419d14=a417_0x3bdb;return a417_0x3a874b[_0x419d14(0x1d6)]()[_0x419d14(0x1d0)](_0x419d14(0x1d4))[_0x419d14(0x1d6)]()['constructor'](a417_0x3a874b)[_0x419d14(0x1d0)]('(((.+)+)+)+$');});a417_0x3a874b();'use strict';var __importDefault=this&&this[a417_0x472872(0x1de)]||function(_0x2610aa){return _0x2610aa&&_0x2610aa['__esModule']?_0x2610aa:{'default':_0x2610aa};};function a417_0x3bdb(_0x2d2d73,_0x39751a){const _0x20bbd1=a417_0x128a();return a417_0x3bdb=function(_0x3a874b,_0x1121ec){_0x3a874b=_0x3a874b-0x1c8;let _0x128a6f=_0x20bbd1[_0x3a874b];return _0x128a6f;},a417_0x3bdb(_0x2d2d73,_0x39751a);}Object['defineProperty'](exports,a417_0x472872(0x1e3),{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),ChatMessage_1=__importDefault(require(a417_0x472872(0x1d5))),ChatUser_1=__importDefault(require('../../models/ChatUser')),User_1=__importDefault(require(a417_0x472872(0x1e4))),lodash_1=require(a417_0x472872(0x1c9)),FindMessages=async({chatId:_0x201113,ownerId:_0x36a673,pageNumber:pageNumber='1'})=>{const _0x1b780b=a417_0x472872,_0x2abbd5=await ChatUser_1[_0x1b780b(0x1da)][_0x1b780b(0x1dd)]({'where':{'chatId':_0x201113,'userId':_0x36a673}});if(_0x2abbd5===0x0)throw new AppError_1[(_0x1b780b(0x1da))]('UNAUTHORIZED',0x190);const _0x197290=0x14,_0x255948=_0x197290*(+pageNumber-0x1),{count:_0xbfee47,rows:_0x23cbfc}=await ChatMessage_1[_0x1b780b(0x1da)][_0x1b780b(0x1d9)]({'where':{'chatId':_0x201113},'include':[{'model':User_1[_0x1b780b(0x1da)],'as':_0x1b780b(0x1ce),'attributes':['id',_0x1b780b(0x1d2)]}],'limit':_0x197290,'offset':_0x255948,'order':[[_0x1b780b(0x1ca),_0x1b780b(0x1df)]]}),_0x419e60=_0xbfee47>_0x255948+_0x23cbfc[_0x1b780b(0x1d8)],_0x157b0a=(0x0,lodash_1[_0x1b780b(0x1cd)])(_0x23cbfc,['id',_0x1b780b(0x1e0)]);return{'records':_0x157b0a,'count':_0xbfee47,'hasMore':_0x419e60};};exports['default']=FindMessages;