const a383_0x21c7e8=a383_0x1e26;(function(_0x1c1caa,_0x1ae0ae){const _0x535e70=a383_0x1e26,_0x1256f9=_0x1c1caa();while(!![]){try{const _0x393d3a=-parseInt(_0x535e70(0x140))/0x1*(parseInt(_0x535e70(0x136))/0x2)+parseInt(_0x535e70(0x14b))/0x3*(-parseInt(_0x535e70(0x138))/0x4)+-parseInt(_0x535e70(0x14c))/0x5*(-parseInt(_0x535e70(0x150))/0x6)+parseInt(_0x535e70(0x137))/0x7*(-parseInt(_0x535e70(0x14f))/0x8)+parseInt(_0x535e70(0x13a))/0x9*(parseInt(_0x535e70(0x149))/0xa)+parseInt(_0x535e70(0x152))/0xb+-parseInt(_0x535e70(0x13e))/0xc;if(_0x393d3a===_0x1ae0ae)break;else _0x1256f9['push'](_0x1256f9['shift']());}catch(_0x1edfa0){_0x1256f9['push'](_0x1256f9['shift']());}}}(a383_0x185a,0xda2a3));function a383_0x1e26(_0x2df257,_0x1e22df){const _0xd1d059=a383_0x185a();return a383_0x1e26=function(_0x225f33,_0x172d6c){_0x225f33=_0x225f33-0x134;let _0x185acc=_0xd1d059[_0x225f33];return _0x185acc;},a383_0x1e26(_0x2df257,_0x1e22df);}const a383_0x172d6c=(function(){let _0x35a11b=!![];return function(_0x411dd2,_0x2fd146){const _0x40ad39=_0x35a11b?function(){const _0xbe7377=a383_0x1e26;if(_0x2fd146){const _0x393d7a=_0x2fd146[_0xbe7377(0x142)](_0x411dd2,arguments);return _0x2fd146=null,_0x393d7a;}}:function(){};return _0x35a11b=![],_0x40ad39;};}()),a383_0x225f33=a383_0x172d6c(this,function(){const _0x3aee26=a383_0x1e26;return a383_0x225f33[_0x3aee26(0x13c)]()[_0x3aee26(0x144)](_0x3aee26(0x134))[_0x3aee26(0x13c)]()['constructor'](a383_0x225f33)[_0x3aee26(0x144)]('(((.+)+)+)+$');});a383_0x225f33();'use strict';function a383_0x185a(){const _0x21494d=['findAndCountAll','4xXSuhr','7273fveWkk','653968ngjVuh','createdAt','226647fawtxF','DESC','toString','default','3382248lXTUAb','UNAUTHORIZED','358699eQelUH','sender','apply','__esModule','search','lodash','../../models/ChatUser','__importDefault','../../models/User','350mbVqCp','sortBy','12MXLfmW','1815pPKWLd','ASC','length','7432LVnNBi','22038XleUWj','name','14270850nZoRmt','../../errors/AppError','../../models/ChatMessage','(((.+)+)+)+$'];a383_0x185a=function(){return _0x21494d;};return a383_0x185a();}var __importDefault=this&&this[a383_0x21c7e8(0x147)]||function(_0x1bcda7){const _0x176e55=a383_0x21c7e8;return _0x1bcda7&&_0x1bcda7[_0x176e55(0x143)]?_0x1bcda7:{'default':_0x1bcda7};};Object['defineProperty'](exports,a383_0x21c7e8(0x143),{'value':!![]});const AppError_1=__importDefault(require(a383_0x21c7e8(0x153))),ChatMessage_1=__importDefault(require(a383_0x21c7e8(0x154))),ChatUser_1=__importDefault(require(a383_0x21c7e8(0x146))),User_1=__importDefault(require(a383_0x21c7e8(0x148))),lodash_1=require(a383_0x21c7e8(0x145)),FindMessages=async({chatId:_0x4b52f1,ownerId:_0x33dfb7,pageNumber:pageNumber='1'})=>{const _0x589e99=a383_0x21c7e8,_0x20f300=await ChatUser_1['default']['count']({'where':{'chatId':_0x4b52f1,'userId':_0x33dfb7}});if(_0x20f300===0x0)throw new AppError_1[(_0x589e99(0x13d))](_0x589e99(0x13f),0x190);const _0x41d950=0x14,_0x300640=_0x41d950*(+pageNumber-0x1),{count:_0x329a8e,rows:_0x253b28}=await ChatMessage_1[_0x589e99(0x13d)][_0x589e99(0x135)]({'where':{'chatId':_0x4b52f1},'include':[{'model':User_1[_0x589e99(0x13d)],'as':_0x589e99(0x141),'attributes':['id',_0x589e99(0x151)]}],'limit':_0x41d950,'offset':_0x300640,'order':[[_0x589e99(0x139),_0x589e99(0x13b)]]}),_0x157acd=_0x329a8e>_0x300640+_0x253b28[_0x589e99(0x14e)],_0x265efd=(0x0,lodash_1[_0x589e99(0x14a)])(_0x253b28,['id',_0x589e99(0x14d)]);return{'records':_0x265efd,'count':_0x329a8e,'hasMore':_0x157acd};};exports['default']=FindMessages;