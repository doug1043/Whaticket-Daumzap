const a412_0x2ea738=a412_0x299c;function a412_0x299c(_0x4a8cb7,_0x4dcdf6){const _0x46cce3=a412_0x5aee();return a412_0x299c=function(_0x389293,_0x4a1313){_0x389293=_0x389293-0x103;let _0x5aeebc=_0x46cce3[_0x389293];return _0x5aeebc;},a412_0x299c(_0x4a8cb7,_0x4dcdf6);}(function(_0x31bc56,_0xa96fa4){const _0x151e46=a412_0x299c,_0x924ce=_0x31bc56();while(!![]){try{const _0xe818c5=-parseInt(_0x151e46(0x11b))/0x1*(parseInt(_0x151e46(0x113))/0x2)+parseInt(_0x151e46(0x11d))/0x3*(parseInt(_0x151e46(0x116))/0x4)+-parseInt(_0x151e46(0x11f))/0x5+parseInt(_0x151e46(0x10c))/0x6*(parseInt(_0x151e46(0x119))/0x7)+-parseInt(_0x151e46(0x115))/0x8*(-parseInt(_0x151e46(0x112))/0x9)+-parseInt(_0x151e46(0x10f))/0xa+parseInt(_0x151e46(0x10d))/0xb;if(_0xe818c5===_0xa96fa4)break;else _0x924ce['push'](_0x924ce['shift']());}catch(_0x49f7a0){_0x924ce['push'](_0x924ce['shift']());}}}(a412_0x5aee,0x7f6fa));const a412_0x4a1313=(function(){let _0x3554cc=!![];return function(_0x35f598,_0x2a526e){const _0xeefec9=_0x3554cc?function(){if(_0x2a526e){const _0x3c9735=_0x2a526e['apply'](_0x35f598,arguments);return _0x2a526e=null,_0x3c9735;}}:function(){};return _0x3554cc=![],_0xeefec9;};}()),a412_0x389293=a412_0x4a1313(this,function(){const _0x240330=a412_0x299c;return a412_0x389293[_0x240330(0x121)]()['search'](_0x240330(0x108))[_0x240330(0x121)]()[_0x240330(0x11a)](a412_0x389293)[_0x240330(0x11e)]('(((.+)+)+)+$');});a412_0x389293();'use strict';var __importDefault=this&&this[a412_0x2ea738(0x103)]||function(_0x2c6d58){const _0x37b852=a412_0x2ea738;return _0x2c6d58&&_0x2c6d58[_0x37b852(0x107)]?_0x2c6d58:{'default':_0x2c6d58};};Object['defineProperty'](exports,a412_0x2ea738(0x107),{'value':!![]});const AppError_1=__importDefault(require(a412_0x2ea738(0x10e))),ChatMessage_1=__importDefault(require('../../models/ChatMessage')),ChatUser_1=__importDefault(require(a412_0x2ea738(0x117))),User_1=__importDefault(require(a412_0x2ea738(0x111))),lodash_1=require(a412_0x2ea738(0x10a)),FindMessages=async({chatId:_0x315668,ownerId:_0x1ed678,pageNumber:pageNumber='1'})=>{const _0x20f310=a412_0x2ea738,_0x2139e6=await ChatUser_1['default'][_0x20f310(0x104)]({'where':{'chatId':_0x315668,'userId':_0x1ed678}});if(_0x2139e6===0x0)throw new AppError_1[(_0x20f310(0x10b))](_0x20f310(0x11c),0x190);const _0x4a9ab2=0x14,_0x3eaf76=_0x4a9ab2*(+pageNumber-0x1),{count:_0x459009,rows:_0x229177}=await ChatMessage_1[_0x20f310(0x10b)]['findAndCountAll']({'where':{'chatId':_0x315668},'include':[{'model':User_1[_0x20f310(0x10b)],'as':_0x20f310(0x106),'attributes':['id',_0x20f310(0x105)]}],'limit':_0x4a9ab2,'offset':_0x3eaf76,'order':[[_0x20f310(0x109),_0x20f310(0x114)]]}),_0x525075=_0x459009>_0x3eaf76+_0x229177[_0x20f310(0x110)],_0x1f4539=(0x0,lodash_1[_0x20f310(0x118)])(_0x229177,['id',_0x20f310(0x120)]);return{'records':_0x1f4539,'count':_0x459009,'hasMore':_0x525075};};function a412_0x5aee(){const _0x1bdaa4=['toString','__importDefault','count','name','sender','__esModule','(((.+)+)+)+$','createdAt','lodash','default','6210KaEwZm','3916462HFWQEx','../../errors/AppError','6558260AJsiFL','length','../../models/User','9ZwnnIu','41126RePemf','DESC','883848cHzvkE','356344rEEsIq','../../models/ChatUser','sortBy','2569faDCdc','constructor','4WLQcyS','UNAUTHORIZED','21IVIjpO','search','1049570wtGCRj','ASC'];a412_0x5aee=function(){return _0x1bdaa4;};return a412_0x5aee();}exports[a412_0x2ea738(0x10b)]=FindMessages;