const a498_0x428c57=a498_0x31e8;function a498_0x31e8(_0xb89df3,_0x3dee3b){const _0x2be176=a498_0x2f46();return a498_0x31e8=function(_0x5ddcf3,_0x3043fd){_0x5ddcf3=_0x5ddcf3-0xea;let _0x2f46ac=_0x2be176[_0x5ddcf3];return _0x2f46ac;},a498_0x31e8(_0xb89df3,_0x3dee3b);}(function(_0x1d642d,_0x5105d8){const _0xc6f9eb=a498_0x31e8,_0x46044e=_0x1d642d();while(!![]){try{const _0x3a31f2=parseInt(_0xc6f9eb(0xef))/0x1*(-parseInt(_0xc6f9eb(0xf4))/0x2)+-parseInt(_0xc6f9eb(0x108))/0x3+parseInt(_0xc6f9eb(0xf9))/0x4*(parseInt(_0xc6f9eb(0xff))/0x5)+-parseInt(_0xc6f9eb(0x103))/0x6*(parseInt(_0xc6f9eb(0x105))/0x7)+-parseInt(_0xc6f9eb(0xeb))/0x8*(parseInt(_0xc6f9eb(0xf8))/0x9)+-parseInt(_0xc6f9eb(0xf5))/0xa+parseInt(_0xc6f9eb(0xed))/0xb;if(_0x3a31f2===_0x5105d8)break;else _0x46044e['push'](_0x46044e['shift']());}catch(_0x4c032f){_0x46044e['push'](_0x46044e['shift']());}}}(a498_0x2f46,0x75919));const a498_0x3043fd=(function(){let _0x583e59=!![];return function(_0x2ef9ba,_0x1a96fb){const _0x3359ac=_0x583e59?function(){const _0x1113bc=a498_0x31e8;if(_0x1a96fb){const _0x3d9081=_0x1a96fb[_0x1113bc(0xf3)](_0x2ef9ba,arguments);return _0x1a96fb=null,_0x3d9081;}}:function(){};return _0x583e59=![],_0x3359ac;};}()),a498_0x5ddcf3=a498_0x3043fd(this,function(){const _0x36db73=a498_0x31e8;return a498_0x5ddcf3[_0x36db73(0xea)]()[_0x36db73(0x106)](_0x36db73(0x102))[_0x36db73(0xea)]()[_0x36db73(0x101)](a498_0x5ddcf3)['search'](_0x36db73(0x102));});function a498_0x2f46(){const _0x4c9148=['7576ipWqjn','sender','29982788RPiGDp','sortBy','1010odGHcR','default','__esModule','ASC','apply','1050GkAAun','8459280gfCWRr','createdAt','UNAUTHORIZED','819FSwrBe','4yaJSBy','../../models/User','length','name','count','DESC','3225215gIlLXj','__importDefault','constructor','(((.+)+)+)+$','6ULemEv','../../models/ChatUser','4162291aAGKnm','search','findAndCountAll','2496666MIBfqJ','toString'];a498_0x2f46=function(){return _0x4c9148;};return a498_0x2f46();}a498_0x5ddcf3();'use strict';var __importDefault=this&&this[a498_0x428c57(0x100)]||function(_0x334a90){const _0x32203e=a498_0x428c57;return _0x334a90&&_0x334a90[_0x32203e(0xf1)]?_0x334a90:{'default':_0x334a90};};Object['defineProperty'](exports,a498_0x428c57(0xf1),{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),ChatMessage_1=__importDefault(require('../../models/ChatMessage')),ChatUser_1=__importDefault(require(a498_0x428c57(0x104))),User_1=__importDefault(require(a498_0x428c57(0xfa))),lodash_1=require('lodash'),FindMessages=async({chatId:_0x1a8560,ownerId:_0x21d2c3,pageNumber:pageNumber='1'})=>{const _0x49e42f=a498_0x428c57,_0x39752f=await ChatUser_1[_0x49e42f(0xf0)][_0x49e42f(0xfd)]({'where':{'chatId':_0x1a8560,'userId':_0x21d2c3}});if(_0x39752f===0x0)throw new AppError_1[(_0x49e42f(0xf0))](_0x49e42f(0xf7),0x190);const _0x40056a=0x14,_0x59a9e4=_0x40056a*(+pageNumber-0x1),{count:_0x24a4de,rows:_0x4e5b2a}=await ChatMessage_1[_0x49e42f(0xf0)][_0x49e42f(0x107)]({'where':{'chatId':_0x1a8560},'include':[{'model':User_1[_0x49e42f(0xf0)],'as':_0x49e42f(0xec),'attributes':['id',_0x49e42f(0xfc)]}],'limit':_0x40056a,'offset':_0x59a9e4,'order':[[_0x49e42f(0xf6),_0x49e42f(0xfe)]]}),_0x39ebc1=_0x24a4de>_0x59a9e4+_0x4e5b2a[_0x49e42f(0xfb)],_0x4881e1=(0x0,lodash_1[_0x49e42f(0xee)])(_0x4e5b2a,['id',_0x49e42f(0xf2)]);return{'records':_0x4881e1,'count':_0x24a4de,'hasMore':_0x39ebc1};};exports['default']=FindMessages;