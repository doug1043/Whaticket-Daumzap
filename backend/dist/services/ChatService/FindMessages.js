const a382_0x20fd29=a382_0x3e77;(function(_0x3c3516,_0x5390f4){const _0x42ae64=a382_0x3e77,_0x261dff=_0x3c3516();while(!![]){try{const _0xef06b3=parseInt(_0x42ae64(0x96))/0x1+-parseInt(_0x42ae64(0x92))/0x2*(parseInt(_0x42ae64(0x99))/0x3)+parseInt(_0x42ae64(0x8d))/0x4*(parseInt(_0x42ae64(0xa1))/0x5)+parseInt(_0x42ae64(0x9c))/0x6+parseInt(_0x42ae64(0x93))/0x7+-parseInt(_0x42ae64(0x8f))/0x8*(parseInt(_0x42ae64(0x94))/0x9)+parseInt(_0x42ae64(0x9e))/0xa*(-parseInt(_0x42ae64(0x9d))/0xb);if(_0xef06b3===_0x5390f4)break;else _0x261dff['push'](_0x261dff['shift']());}catch(_0x37da1b){_0x261dff['push'](_0x261dff['shift']());}}}(a382_0x32f2,0x7876a));const a382_0x56218b=(function(){let _0x1ae7d9=!![];return function(_0x529214,_0x2d512b){const _0x5f0ce3=_0x1ae7d9?function(){const _0x2958b5=a382_0x3e77;if(_0x2d512b){const _0x5b0c04=_0x2d512b[_0x2958b5(0xa3)](_0x529214,arguments);return _0x2d512b=null,_0x5b0c04;}}:function(){};return _0x1ae7d9=![],_0x5f0ce3;};}()),a382_0x50ed45=a382_0x56218b(this,function(){const _0x470c83=a382_0x3e77;return a382_0x50ed45[_0x470c83(0x95)]()['search'](_0x470c83(0x91))['toString']()[_0x470c83(0x8e)](a382_0x50ed45)['search'](_0x470c83(0x91));});a382_0x50ed45();'use strict';var __importDefault=this&&this[a382_0x20fd29(0xa5)]||function(_0x403aa5){const _0x5bb1ba=a382_0x20fd29;return _0x403aa5&&_0x403aa5[_0x5bb1ba(0x98)]?_0x403aa5:{'default':_0x403aa5};};Object[a382_0x20fd29(0x90)](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require(a382_0x20fd29(0x8a))),ChatMessage_1=__importDefault(require(a382_0x20fd29(0x9f))),ChatUser_1=__importDefault(require('../../models/ChatUser')),User_1=__importDefault(require(a382_0x20fd29(0x8b))),lodash_1=require(a382_0x20fd29(0x97)),FindMessages=async({chatId:_0x2cfde3,ownerId:_0x132e22,pageNumber:pageNumber='1'})=>{const _0x196e84=a382_0x20fd29,_0x19b9e8=await ChatUser_1[_0x196e84(0x9b)][_0x196e84(0xa4)]({'where':{'chatId':_0x2cfde3,'userId':_0x132e22}});if(_0x19b9e8===0x0)throw new AppError_1['default'](_0x196e84(0x8c),0x190);const _0x29913f=0x14,_0x2326b5=_0x29913f*(+pageNumber-0x1),{count:_0x5ba80e,rows:_0xc442f}=await ChatMessage_1['default']['findAndCountAll']({'where':{'chatId':_0x2cfde3},'include':[{'model':User_1[_0x196e84(0x9b)],'as':_0x196e84(0xa6),'attributes':['id',_0x196e84(0x9a)]}],'limit':_0x29913f,'offset':_0x2326b5,'order':[['createdAt',_0x196e84(0xa0)]]}),_0x20370d=_0x5ba80e>_0x2326b5+_0xc442f[_0x196e84(0xa2)],_0x96863f=(0x0,lodash_1['sortBy'])(_0xc442f,['id','ASC']);return{'records':_0x96863f,'count':_0x5ba80e,'hasMore':_0x20370d};};exports[a382_0x20fd29(0x9b)]=FindMessages;function a382_0x3e77(_0x35a898,_0x21320e){const _0x554ac5=a382_0x32f2();return a382_0x3e77=function(_0x50ed45,_0x56218b){_0x50ed45=_0x50ed45-0x8a;let _0x32f2cb=_0x554ac5[_0x50ed45];return _0x32f2cb;},a382_0x3e77(_0x35a898,_0x21320e);}function a382_0x32f2(){const _0xb60f0b=['792XbvdfS','defineProperty','(((.+)+)+)+$','1232bcxkgb','1477525cQNxCh','48483qxHYpP','toString','566074orivXw','lodash','__esModule','3210caWbyT','name','default','210846MySvLP','11bhxPZB','638060pzoQSd','../../models/ChatMessage','DESC','161615sUQGMH','length','apply','count','__importDefault','sender','../../errors/AppError','../../models/User','UNAUTHORIZED','116PSRnkO','constructor'];a382_0x32f2=function(){return _0xb60f0b;};return a382_0x32f2();}