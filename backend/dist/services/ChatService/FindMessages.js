const a382_0x2503dc=a382_0x4550;(function(_0x557595,_0x5008c9){const _0x5301b2=a382_0x4550,_0x15c9d8=_0x557595();while(!![]){try{const _0x323645=-parseInt(_0x5301b2(0x8e))/0x1+parseInt(_0x5301b2(0x87))/0x2*(-parseInt(_0x5301b2(0x92))/0x3)+parseInt(_0x5301b2(0x79))/0x4+-parseInt(_0x5301b2(0x93))/0x5+parseInt(_0x5301b2(0x8b))/0x6*(-parseInt(_0x5301b2(0x83))/0x7)+-parseInt(_0x5301b2(0x94))/0x8+parseInt(_0x5301b2(0x82))/0x9;if(_0x323645===_0x5008c9)break;else _0x15c9d8['push'](_0x15c9d8['shift']());}catch(_0x7867d5){_0x15c9d8['push'](_0x15c9d8['shift']());}}}(a382_0x291a,0x7ee71));const a382_0x38b3ab=(function(){let _0x3cfd17=!![];return function(_0x228b58,_0x4fb969){const _0x1c6f4c=_0x3cfd17?function(){const _0x997e48=a382_0x4550;if(_0x4fb969){const _0x5729cb=_0x4fb969[_0x997e48(0x90)](_0x228b58,arguments);return _0x4fb969=null,_0x5729cb;}}:function(){};return _0x3cfd17=![],_0x1c6f4c;};}()),a382_0x26a1c2=a382_0x38b3ab(this,function(){const _0xb424d4=a382_0x4550;return a382_0x26a1c2[_0xb424d4(0x76)]()[_0xb424d4(0x88)](_0xb424d4(0x78))[_0xb424d4(0x76)]()[_0xb424d4(0x8a)](a382_0x26a1c2)[_0xb424d4(0x88)](_0xb424d4(0x78));});function a382_0x291a(){const _0x279432=['../../models/ChatUser','findAndCountAll','defineProperty','sender','20290599wCmySV','1515815NBFsFD','sortBy','length','lodash','23370qaMFAd','search','createdAt','constructor','6sEjJTB','name','../../models/ChatMessage','1020987oTZucT','__importDefault','apply','UNAUTHORIZED','159ENipZm','918890EDYZdj','3274304xIkzVJ','toString','../../errors/AppError','(((.+)+)+)+$','2860740DymKMG','count','__esModule','default','../../models/User'];a382_0x291a=function(){return _0x279432;};return a382_0x291a();}a382_0x26a1c2();'use strict';var __importDefault=this&&this[a382_0x2503dc(0x8f)]||function(_0xec7dfb){const _0x2f2344=a382_0x2503dc;return _0xec7dfb&&_0xec7dfb[_0x2f2344(0x7b)]?_0xec7dfb:{'default':_0xec7dfb};};Object[a382_0x2503dc(0x80)](exports,a382_0x2503dc(0x7b),{'value':!![]});function a382_0x4550(_0x509569,_0x727ba){const _0x4bb9f2=a382_0x291a();return a382_0x4550=function(_0x26a1c2,_0x38b3ab){_0x26a1c2=_0x26a1c2-0x76;let _0x291a78=_0x4bb9f2[_0x26a1c2];return _0x291a78;},a382_0x4550(_0x509569,_0x727ba);}const AppError_1=__importDefault(require(a382_0x2503dc(0x77))),ChatMessage_1=__importDefault(require(a382_0x2503dc(0x8d))),ChatUser_1=__importDefault(require(a382_0x2503dc(0x7e))),User_1=__importDefault(require(a382_0x2503dc(0x7d))),lodash_1=require(a382_0x2503dc(0x86)),FindMessages=async({chatId:_0x13fb0c,ownerId:_0xbdc000,pageNumber:pageNumber='1'})=>{const _0xa937bb=a382_0x2503dc,_0x318952=await ChatUser_1[_0xa937bb(0x7c)][_0xa937bb(0x7a)]({'where':{'chatId':_0x13fb0c,'userId':_0xbdc000}});if(_0x318952===0x0)throw new AppError_1['default'](_0xa937bb(0x91),0x190);const _0x4537a4=0x14,_0x39d621=_0x4537a4*(+pageNumber-0x1),{count:_0x4fab32,rows:_0x330c18}=await ChatMessage_1[_0xa937bb(0x7c)][_0xa937bb(0x7f)]({'where':{'chatId':_0x13fb0c},'include':[{'model':User_1[_0xa937bb(0x7c)],'as':_0xa937bb(0x81),'attributes':['id',_0xa937bb(0x8c)]}],'limit':_0x4537a4,'offset':_0x39d621,'order':[[_0xa937bb(0x89),'DESC']]}),_0x579b73=_0x4fab32>_0x39d621+_0x330c18[_0xa937bb(0x85)],_0x7fee0d=(0x0,lodash_1[_0xa937bb(0x84)])(_0x330c18,['id','ASC']);return{'records':_0x7fee0d,'count':_0x4fab32,'hasMore':_0x579b73};};exports['default']=FindMessages;