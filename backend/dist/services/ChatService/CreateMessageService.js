function a379_0x4dff(_0x2717f5,_0xe3e70e){const _0x49d467=a379_0x1caa();return a379_0x4dff=function(_0x4cb998,_0x5b8497){_0x4cb998=_0x4cb998-0x1bd;let _0x1caaf7=_0x49d467[_0x4cb998];return _0x1caaf7;},a379_0x4dff(_0x2717f5,_0xe3e70e);}const a379_0x1c7dbc=a379_0x4dff;(function(_0x54dcc8,_0x4a2401){const _0x4e0d89=a379_0x4dff,_0x57cdf0=_0x54dcc8();while(!![]){try{const _0x46fec8=-parseInt(_0x4e0d89(0x1cc))/0x1*(-parseInt(_0x4e0d89(0x1c0))/0x2)+-parseInt(_0x4e0d89(0x1cd))/0x3+parseInt(_0x4e0d89(0x1c7))/0x4*(parseInt(_0x4e0d89(0x1d6))/0x5)+parseInt(_0x4e0d89(0x1d1))/0x6+parseInt(_0x4e0d89(0x1c3))/0x7*(parseInt(_0x4e0d89(0x1d5))/0x8)+-parseInt(_0x4e0d89(0x1c9))/0x9+parseInt(_0x4e0d89(0x1d7))/0xa*(-parseInt(_0x4e0d89(0x1be))/0xb);if(_0x46fec8===_0x4a2401)break;else _0x57cdf0['push'](_0x57cdf0['shift']());}catch(_0x1cd6ae){_0x57cdf0['push'](_0x57cdf0['shift']());}}}(a379_0x1caa,0xafc05));const a379_0x5b8497=(function(){let _0x2c3870=!![];return function(_0xd7268a,_0x555d40){const _0x24bcfd=_0x2c3870?function(){const _0x3ed121=a379_0x4dff;if(_0x555d40){const _0x679e8e=_0x555d40[_0x3ed121(0x1bf)](_0xd7268a,arguments);return _0x555d40=null,_0x679e8e;}}:function(){};return _0x2c3870=![],_0x24bcfd;};}()),a379_0x4cb998=a379_0x5b8497(this,function(){const _0xba0d7b=a379_0x4dff;return a379_0x4cb998['toString']()[_0xba0d7b(0x1c2)](_0xba0d7b(0x1c6))['toString']()['constructor'](a379_0x4cb998)[_0xba0d7b(0x1c2)](_0xba0d7b(0x1c6));});a379_0x4cb998();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x519ba7){const _0x325f9a=a379_0x4dff;return _0x519ba7&&_0x519ba7[_0x325f9a(0x1cf)]?_0x519ba7:{'default':_0x519ba7};};Object[a379_0x1c7dbc(0x1cb)](exports,a379_0x1c7dbc(0x1cf),{'value':!![]});const Chat_1=__importDefault(require(a379_0x1c7dbc(0x1c8))),ChatMessage_1=__importDefault(require('../../models/ChatMessage')),ChatUser_1=__importDefault(require(a379_0x1c7dbc(0x1d0))),User_1=__importDefault(require(a379_0x1c7dbc(0x1c5)));async function CreateMessageService({senderId:_0x3b801b,chatId:_0x41431e,message:_0x48e36e}){const _0x1c456c=a379_0x1c7dbc,_0x44ae9d=await ChatMessage_1['default']['create']({'senderId':_0x3b801b,'chatId':_0x41431e,'message':_0x48e36e});await _0x44ae9d[_0x1c456c(0x1c1)]({'include':[{'model':User_1['default'],'as':_0x1c456c(0x1d2),'attributes':['id',_0x1c456c(0x1d8)]},{'model':Chat_1[_0x1c456c(0x1d3)],'as':_0x1c456c(0x1ca),'include':[{'model':ChatUser_1['default'],'as':'users'}]}]});const _0x27153f=await User_1[_0x1c456c(0x1d3)][_0x1c456c(0x1ce)](_0x3b801b);await _0x44ae9d['chat']['update']({'lastMessage':_0x27153f[_0x1c456c(0x1d8)]+':\x20'+_0x48e36e});const _0x2abb97=await ChatUser_1[_0x1c456c(0x1d3)][_0x1c456c(0x1d4)]({'where':{'chatId':_0x41431e}});for(let _0x5ce60f of _0x2abb97){_0x5ce60f[_0x1c456c(0x1bd)]===_0x3b801b?await _0x5ce60f[_0x1c456c(0x1c4)]({'unreads':0x0}):await _0x5ce60f['update']({'unreads':_0x5ce60f['unreads']+0x1});}return _0x44ae9d;}function a379_0x1caa(){const _0x578473=['1891716mnLqcJ','findByPk','__esModule','../../models/ChatUser','6004560yRxSgI','sender','default','findAll','3704LwiyXH','5ZSBcgd','18170710FwkJLr','name','userId','11VNmwtt','apply','1274932kAfXoK','reload','search','6860NJDPXK','update','../../models/User','(((.+)+)+)+$','1870080bPeiwM','../../models/Chat','264888UySqFz','chat','defineProperty','2INbtEb'];a379_0x1caa=function(){return _0x578473;};return a379_0x1caa();}exports[a379_0x1c7dbc(0x1d3)]=CreateMessageService;