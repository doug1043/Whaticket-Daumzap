const a387_0x393fde=a387_0x4171;(function(_0x1f8632,_0x5c7212){const _0x1d81db=a387_0x4171,_0x30ab40=_0x1f8632();while(!![]){try{const _0x463929=parseInt(_0x1d81db(0x11c))/0x1+parseInt(_0x1d81db(0xe7))/0x2*(parseInt(_0x1d81db(0xef))/0x3)+parseInt(_0x1d81db(0xf0))/0x4+-parseInt(_0x1d81db(0x11b))/0x5*(-parseInt(_0x1d81db(0x10a))/0x6)+parseInt(_0x1d81db(0x101))/0x7+-parseInt(_0x1d81db(0x107))/0x8*(-parseInt(_0x1d81db(0xe3))/0x9)+-parseInt(_0x1d81db(0xea))/0xa*(parseInt(_0x1d81db(0x10b))/0xb);if(_0x463929===_0x5c7212)break;else _0x30ab40['push'](_0x30ab40['shift']());}catch(_0x44842e){_0x30ab40['push'](_0x30ab40['shift']());}}}(a387_0x23a8,0xc4680));function a387_0x4171(_0x3bff1e,_0x51505a){const _0x2edb8f=a387_0x23a8();return a387_0x4171=function(_0x5e1653,_0x58cc81){_0x5e1653=_0x5e1653-0xde;let _0x23a890=_0x2edb8f[_0x5e1653];return _0x23a890;},a387_0x4171(_0x3bff1e,_0x51505a);}const a387_0x58cc81=(function(){let _0x18a1ed=!![];return function(_0x23b47a,_0x3096bd){const _0x598943=_0x18a1ed?function(){const _0x3f7034=a387_0x4171;if(_0x3096bd){const _0x5d61ac=_0x3096bd[_0x3f7034(0xe8)](_0x23b47a,arguments);return _0x3096bd=null,_0x5d61ac;}}:function(){};return _0x18a1ed=![],_0x598943;};}()),a387_0x5e1653=a387_0x58cc81(this,function(){const _0x122ef9=a387_0x4171;return a387_0x5e1653['toString']()[_0x122ef9(0x119)](_0x122ef9(0xfa))[_0x122ef9(0x116)]()[_0x122ef9(0x103)](a387_0x5e1653)[_0x122ef9(0x119)](_0x122ef9(0xfa));});a387_0x5e1653();'use strict';var __createBinding=this&&this[a387_0x393fde(0xde)]||(Object['create']?function(_0x324fec,_0x3e6d95,_0xce9718,_0x12f0f0){const _0x2822c6=a387_0x393fde;if(_0x12f0f0===undefined)_0x12f0f0=_0xce9718;var _0x4fd4f9=Object[_0x2822c6(0x102)](_0x3e6d95,_0xce9718);(!_0x4fd4f9||(_0x2822c6(0xeb)in _0x4fd4f9?!_0x3e6d95['__esModule']:_0x4fd4f9[_0x2822c6(0x117)]||_0x4fd4f9[_0x2822c6(0xfe)]))&&(_0x4fd4f9={'enumerable':!![],'get':function(){return _0x3e6d95[_0xce9718];}}),Object[_0x2822c6(0x106)](_0x324fec,_0x12f0f0,_0x4fd4f9);}:function(_0x7f7883,_0xb12b29,_0x106065,_0x5edae7){if(_0x5edae7===undefined)_0x5edae7=_0x106065;_0x7f7883[_0x5edae7]=_0xb12b29[_0x106065];}),__setModuleDefault=this&&this[a387_0x393fde(0x10c)]||(Object[a387_0x393fde(0x10e)]?function(_0x3dc78c,_0x40b64f){const _0x6c1449=a387_0x393fde;Object[_0x6c1449(0x106)](_0x3dc78c,_0x6c1449(0xf5),{'enumerable':!![],'value':_0x40b64f});}:function(_0x21230b,_0x44c2cb){const _0x1b087c=a387_0x393fde;_0x21230b[_0x1b087c(0xf5)]=_0x44c2cb;}),__importStar=this&&this[a387_0x393fde(0xdf)]||function(_0x3ff0bf){const _0x5d0d96=a387_0x393fde;if(_0x3ff0bf&&_0x3ff0bf[_0x5d0d96(0xfc)])return _0x3ff0bf;var _0x5954f1={};if(_0x3ff0bf!=null){for(var _0x5bb8c3 in _0x3ff0bf)if(_0x5bb8c3!==_0x5d0d96(0xf5)&&Object[_0x5d0d96(0x110)]['hasOwnProperty']['call'](_0x3ff0bf,_0x5bb8c3))__createBinding(_0x5954f1,_0x3ff0bf,_0x5bb8c3);}return __setModuleDefault(_0x5954f1,_0x3ff0bf),_0x5954f1;},__importDefault=this&&this['__importDefault']||function(_0x45b3ed){const _0x26cf8e=a387_0x393fde;return _0x45b3ed&&_0x45b3ed[_0x26cf8e(0xfc)]?_0x45b3ed:{'default':_0x45b3ed};};Object[a387_0x393fde(0x106)](exports,a387_0x393fde(0xfc),{'value':!![]});const Yup=__importStar(require(a387_0x393fde(0x118))),AppError_1=__importDefault(require('../../errors/AppError')),Company_1=__importDefault(require('../../models/Company')),User_1=__importDefault(require(a387_0x393fde(0xe6))),Setting_1=__importDefault(require(a387_0x393fde(0xf1))),CreateCompanyService=async _0x1e73a5=>{const _0x1bd0f8=a387_0x393fde,{name:_0x4d82f2,phone:_0x5c4c15,email:_0x362c5,status:_0x27e5db,planId:_0x41d13f,password:_0x8feb6e,campaignsEnabled:_0x3d8cb9,dueDate:_0x15c714,recurrence:_0x5ee245}=_0x1e73a5,_0x456e62=Yup['object']()[_0x1bd0f8(0x115)]({'name':Yup[_0x1bd0f8(0xec)]()['min'](0x2,'ERR_COMPANY_INVALID_NAME')[_0x1bd0f8(0x111)]('ERR_COMPANY_INVALID_NAME')[_0x1bd0f8(0xe4)]('Check-unique-name',_0x1bd0f8(0x109),async _0x49ccc9=>{if(_0x49ccc9){const _0x49c877=await Company_1['default']['findOne']({'where':{'name':_0x49ccc9}});return!_0x49c877;}return![];})});try{await _0x456e62[_0x1bd0f8(0xe2)]({'name':_0x4d82f2});}catch(_0x3dcdc8){throw new AppError_1[(_0x1bd0f8(0xf5))](_0x3dcdc8[_0x1bd0f8(0x104)]);}const _0x6dbde8=await Company_1[_0x1bd0f8(0xf5)]['create']({'name':_0x4d82f2,'phone':_0x5c4c15,'email':_0x362c5,'status':_0x27e5db,'planId':_0x41d13f,'dueDate':_0x15c714,'recurrence':_0x5ee245}),_0x5ebc0b=await User_1[_0x1bd0f8(0xf5)][_0x1bd0f8(0x10e)]({'name':_0x6dbde8[_0x1bd0f8(0xf6)],'email':_0x6dbde8[_0x1bd0f8(0xed)],'password':_0x1e73a5[_0x1bd0f8(0x100)]||_0x1bd0f8(0xe1),'profile':_0x1bd0f8(0x112),'companyId':_0x6dbde8['id']});await Setting_1[_0x1bd0f8(0xf5)]['findOrCreate']({'where':{'companyId':_0x6dbde8['id'],'key':'asaas'},'defaults':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0xf2),'value':''}}),await Setting_1[_0x1bd0f8(0xf5)][_0x1bd0f8(0xee)]({'where':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0xfd)},'defaults':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0xfd),'value':''}}),await Setting_1[_0x1bd0f8(0xf5)][_0x1bd0f8(0xee)]({'where':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0x105)},'defaults':{'companyId':_0x6dbde8['id'],'key':'ipixc','value':''}}),await Setting_1[_0x1bd0f8(0xf5)]['findOrCreate']({'where':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0xf8)},'defaults':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0xf8),'value':''}}),await Setting_1[_0x1bd0f8(0xf5)][_0x1bd0f8(0xee)]({'where':{'companyId':_0x6dbde8['id'],'key':'clientsecretmkauth'},'defaults':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0xf4),'value':''}}),await Setting_1[_0x1bd0f8(0xf5)][_0x1bd0f8(0xee)]({'where':{'companyId':_0x6dbde8['id'],'key':'clientidmkauth'},'defaults':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0x113),'value':''}}),await Setting_1['default'][_0x1bd0f8(0xee)]({'where':{'companyId':_0x6dbde8['id'],'key':'CheckMsgIsGroup'},'defaults':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0xfb),'value':''}}),await Setting_1['default'][_0x1bd0f8(0xee)]({'where':{'companyId':_0x6dbde8['id'],'key':''},'defaults':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0x11d),'value':_0x1bd0f8(0xe5)}}),await Setting_1[_0x1bd0f8(0xf5)][_0x1bd0f8(0xee)]({'where':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0x114)},'defaults':{'companyId':_0x6dbde8['id'],'key':'scheduleType','value':_0x1bd0f8(0xe5)}}),await Setting_1['default'][_0x1bd0f8(0xee)]({'where':{'companyId':_0x6dbde8['id'],'key':'sendGreetingAccepted'},'defaults':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0xe0),'value':_0x1bd0f8(0xe5)}}),await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0x10d)},'defaults':{'companyId':_0x6dbde8['id'],'key':'sendMsgTransfTicket','value':_0x1bd0f8(0xe5)}}),await Setting_1[_0x1bd0f8(0xf5)]['findOrCreate']({'where':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0x10f)},'defaults':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0x10f),'value':_0x1bd0f8(0xe5)}}),await Setting_1[_0x1bd0f8(0xf5)]['findOrCreate']({'where':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0xf9)},'defaults':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0xf9),'value':_0x1bd0f8(0x108)}}),await Setting_1[_0x1bd0f8(0xf5)]['findOrCreate']({'where':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0xf3)},'defaults':{'companyId':_0x6dbde8['id'],'key':'tokensgp','value':''}}),await Setting_1[_0x1bd0f8(0xf5)][_0x1bd0f8(0xee)]({'where':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0xf7)},'defaults':{'companyId':_0x6dbde8['id'],'key':'ipsgp','value':''}}),await Setting_1[_0x1bd0f8(0xf5)][_0x1bd0f8(0xee)]({'where':{'companyId':_0x6dbde8['id'],'key':'appsgp'},'defaults':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0xe9),'value':''}});if(_0x1e73a5['campaignsEnabled']!==undefined){const [_0x3ef66a,_0x43f591]=await Setting_1[_0x1bd0f8(0xf5)][_0x1bd0f8(0xee)]({'where':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0xff)},'defaults':{'companyId':_0x6dbde8['id'],'key':_0x1bd0f8(0xff),'value':''+_0x3d8cb9}});!_0x43f591&&await _0x3ef66a[_0x1bd0f8(0x11a)]({'value':''+_0x3d8cb9});}return _0x6dbde8;};function a387_0x23a8(){const _0x367faf=['defineProperty','106728dQmKky','text','ERR_COMPANY_NAME_ALREADY_EXISTS','6ztSsso','50428169WNyWNe','__setModuleDefault','sendMsgTransfTicket','create','userRating','prototype','required','admin','clientidmkauth','scheduleType','shape','toString','writable','yup','search','update','1157340OmYqUs','1352735zSEzey','call','__createBinding','__importStar','sendGreetingAccepted','mudar@123','validate','711asHmnk','test','disabled','../../models/User','62888uQaDjM','apply','appsgp','10ETzNXt','get','string','email','findOrCreate','123kNPfiX','1738584AnyOwG','../../models/Setting','asaas','tokensgp','clientsecretmkauth','default','name','ipsgp','ipmkauth','chatBotType','(((.+)+)+)+$','enabled','__esModule','tokenixc','configurable','campaignsEnabled','password','7188069GLUulP','getOwnPropertyDescriptor','constructor','message','ipixc'];a387_0x23a8=function(){return _0x367faf;};return a387_0x23a8();}exports['default']=CreateCompanyService;