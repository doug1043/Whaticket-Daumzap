const a385_0x481007=a385_0x2eb9;function a385_0x2726(){const _0x464a35=['1236GTOJbg','mudar@123','1489815fZXyax','ERR_COMPANY_INVALID_NAME','../../errors/AppError','scheduleType','apply','validate','ERR_COMPANY_NAME_ALREADY_EXISTS','name','prototype','toString','asaas','chatBotType','585978LiKSIe','../../models/User','password','__importStar','sendMsgTransfTicket','call','getOwnPropertyDescriptor','50Cfwnqv','search','../../models/Setting','min','text','74921aXVbOy','../../models/Company','__importDefault','1253MNJTza','userRating','2ByGLTz','hasOwnProperty','(((.+)+)+)+$','6XdmgSf','findOrCreate','test','message','email','ipsgp','__esModule','writable','defineProperty','admin','required','shape','constructor','yup','create','508732jfCUdp','676377woYkgS','sendGreetingAccepted','update','get','Check-unique-name','72226NDYdZv','15256LRjirL','configurable','appsgp','campaignsEnabled','disabled','default'];a385_0x2726=function(){return _0x464a35;};return a385_0x2726();}(function(_0x33bb7f,_0x52a529){const _0x4bb6b9=a385_0x2eb9,_0x2b3e86=_0x33bb7f();while(!![]){try{const _0x173c7a=-parseInt(_0x4bb6b9(0x15d))/0x1+-parseInt(_0x4bb6b9(0x162))/0x2*(parseInt(_0x4bb6b9(0x151))/0x3)+parseInt(_0x4bb6b9(0x174))/0x4+parseInt(_0x4bb6b9(0x183))/0x5*(parseInt(_0x4bb6b9(0x165))/0x6)+-parseInt(_0x4bb6b9(0x160))/0x7*(-parseInt(_0x4bb6b9(0x17b))/0x8)+-parseInt(_0x4bb6b9(0x175))/0x9*(-parseInt(_0x4bb6b9(0x158))/0xa)+parseInt(_0x4bb6b9(0x17a))/0xb*(-parseInt(_0x4bb6b9(0x181))/0xc);if(_0x173c7a===_0x52a529)break;else _0x2b3e86['push'](_0x2b3e86['shift']());}catch(_0x1875f6){_0x2b3e86['push'](_0x2b3e86['shift']());}}}(a385_0x2726,0x2fc87));const a385_0x3230b2=(function(){let _0x3a7bdb=!![];return function(_0x53453,_0x43a31d){const _0x2bb7c1=_0x3a7bdb?function(){const _0x2f41e0=a385_0x2eb9;if(_0x43a31d){const _0x49345a=_0x43a31d[_0x2f41e0(0x187)](_0x53453,arguments);return _0x43a31d=null,_0x49345a;}}:function(){};return _0x3a7bdb=![],_0x2bb7c1;};}()),a385_0x3e0fe8=a385_0x3230b2(this,function(){const _0x3488e3=a385_0x2eb9;return a385_0x3e0fe8[_0x3488e3(0x14e)]()[_0x3488e3(0x159)]('(((.+)+)+)+$')[_0x3488e3(0x14e)]()[_0x3488e3(0x171)](a385_0x3e0fe8)[_0x3488e3(0x159)](_0x3488e3(0x164));});a385_0x3e0fe8();'use strict';var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x2e8f90,_0x486bae,_0x5dd47b,_0x38d175){const _0x3c9ad6=a385_0x2eb9;if(_0x38d175===undefined)_0x38d175=_0x5dd47b;var _0x21dc52=Object[_0x3c9ad6(0x157)](_0x486bae,_0x5dd47b);(!_0x21dc52||(_0x3c9ad6(0x178)in _0x21dc52?!_0x486bae[_0x3c9ad6(0x16b)]:_0x21dc52[_0x3c9ad6(0x16c)]||_0x21dc52[_0x3c9ad6(0x17c)]))&&(_0x21dc52={'enumerable':!![],'get':function(){return _0x486bae[_0x5dd47b];}}),Object[_0x3c9ad6(0x16d)](_0x2e8f90,_0x38d175,_0x21dc52);}:function(_0x500de6,_0x2fd1af,_0x41e5b9,_0x2c7cba){if(_0x2c7cba===undefined)_0x2c7cba=_0x41e5b9;_0x500de6[_0x2c7cba]=_0x2fd1af[_0x41e5b9];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a385_0x481007(0x173)]?function(_0x4d11e6,_0x143c66){const _0x1dd7f8=a385_0x481007;Object[_0x1dd7f8(0x16d)](_0x4d11e6,_0x1dd7f8(0x180),{'enumerable':!![],'value':_0x143c66});}:function(_0x190002,_0x3eb1d3){const _0x30fd0c=a385_0x481007;_0x190002[_0x30fd0c(0x180)]=_0x3eb1d3;}),__importStar=this&&this[a385_0x481007(0x154)]||function(_0x4e6d10){const _0x24a1f0=a385_0x481007;if(_0x4e6d10&&_0x4e6d10['__esModule'])return _0x4e6d10;var _0x4c8208={};if(_0x4e6d10!=null){for(var _0x2e0257 in _0x4e6d10)if(_0x2e0257!=='default'&&Object[_0x24a1f0(0x14d)][_0x24a1f0(0x163)][_0x24a1f0(0x156)](_0x4e6d10,_0x2e0257))__createBinding(_0x4c8208,_0x4e6d10,_0x2e0257);}return __setModuleDefault(_0x4c8208,_0x4e6d10),_0x4c8208;},__importDefault=this&&this[a385_0x481007(0x15f)]||function(_0x4e1e9a){const _0x242329=a385_0x481007;return _0x4e1e9a&&_0x4e1e9a[_0x242329(0x16b)]?_0x4e1e9a:{'default':_0x4e1e9a};};Object[a385_0x481007(0x16d)](exports,a385_0x481007(0x16b),{'value':!![]});function a385_0x2eb9(_0x52f623,_0xbd8a73){const _0x59618b=a385_0x2726();return a385_0x2eb9=function(_0x3e0fe8,_0x3230b2){_0x3e0fe8=_0x3e0fe8-0x14b;let _0x27263e=_0x59618b[_0x3e0fe8];return _0x27263e;},a385_0x2eb9(_0x52f623,_0xbd8a73);}const Yup=__importStar(require(a385_0x481007(0x172))),AppError_1=__importDefault(require(a385_0x481007(0x185))),Company_1=__importDefault(require(a385_0x481007(0x15e))),User_1=__importDefault(require(a385_0x481007(0x152))),Setting_1=__importDefault(require(a385_0x481007(0x15a))),CreateCompanyService=async _0x4e01ef=>{const _0x3b474c=a385_0x481007,{name:_0x118a9a,phone:_0x47af8f,email:_0x541405,status:_0x41eb59,planId:_0x403aa4,campaignsEnabled:_0xf9b4e7,dueDate:_0x4b2351,recurrence:_0x2564da}=_0x4e01ef,_0x343e07=Yup['object']()[_0x3b474c(0x170)]({'name':Yup['string']()[_0x3b474c(0x15b)](0x2,_0x3b474c(0x184))[_0x3b474c(0x16f)](_0x3b474c(0x184))[_0x3b474c(0x167)](_0x3b474c(0x179),_0x3b474c(0x14b),async _0x265508=>{const _0x2db2ae=_0x3b474c;if(_0x265508){const _0x40a2f0=await Company_1[_0x2db2ae(0x180)]['findOne']({'where':{'name':_0x265508}});return!_0x40a2f0;}return![];})});try{await _0x343e07[_0x3b474c(0x188)]({'name':_0x118a9a});}catch(_0x5939d8){throw new AppError_1[(_0x3b474c(0x180))](_0x5939d8[_0x3b474c(0x168)]);}const _0x4d0c7b=await Company_1[_0x3b474c(0x180)]['create']({'name':_0x118a9a,'phone':_0x47af8f,'email':_0x541405,'status':_0x41eb59,'planId':_0x403aa4,'dueDate':_0x4b2351,'recurrence':_0x2564da}),_0x5445bb=await User_1[_0x3b474c(0x180)][_0x3b474c(0x173)]({'name':_0x4d0c7b[_0x3b474c(0x14c)],'email':_0x4d0c7b[_0x3b474c(0x169)],'password':_0x4e01ef[_0x3b474c(0x153)]||_0x3b474c(0x182),'profile':_0x3b474c(0x16e),'companyId':_0x4d0c7b['id']});await Setting_1[_0x3b474c(0x180)][_0x3b474c(0x166)]({'where':{'companyId':_0x4d0c7b['id'],'key':_0x3b474c(0x14f)},'defaults':{'companyId':_0x4d0c7b['id'],'key':_0x3b474c(0x14f),'value':''}}),await Setting_1[_0x3b474c(0x180)]['findOrCreate']({'where':{'companyId':_0x4d0c7b['id'],'key':'CheckMsgIsGroup'},'defaults':{'companyId':_0x4d0c7b['id'],'key':'enabled','value':''}}),await Setting_1['default'][_0x3b474c(0x166)]({'where':{'companyId':_0x4d0c7b['id'],'key':''},'defaults':{'companyId':_0x4d0c7b['id'],'key':_0x3b474c(0x156),'value':_0x3b474c(0x17f)}}),await Setting_1[_0x3b474c(0x180)][_0x3b474c(0x166)]({'where':{'companyId':_0x4d0c7b['id'],'key':_0x3b474c(0x186)},'defaults':{'companyId':_0x4d0c7b['id'],'key':_0x3b474c(0x186),'value':_0x3b474c(0x17f)}}),await Setting_1['default'][_0x3b474c(0x166)]({'where':{'companyId':_0x4d0c7b['id'],'key':_0x3b474c(0x176)},'defaults':{'companyId':_0x4d0c7b['id'],'key':'sendGreetingAccepted','value':_0x3b474c(0x17f)}}),await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x4d0c7b['id'],'key':_0x3b474c(0x155)},'defaults':{'companyId':_0x4d0c7b['id'],'key':_0x3b474c(0x155),'value':_0x3b474c(0x17f)}}),await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x4d0c7b['id'],'key':_0x3b474c(0x161)},'defaults':{'companyId':_0x4d0c7b['id'],'key':_0x3b474c(0x161),'value':_0x3b474c(0x17f)}}),await Setting_1['default'][_0x3b474c(0x166)]({'where':{'companyId':_0x4d0c7b['id'],'key':_0x3b474c(0x150)},'defaults':{'companyId':_0x4d0c7b['id'],'key':_0x3b474c(0x150),'value':_0x3b474c(0x15c)}}),await Setting_1[_0x3b474c(0x180)]['findOrCreate']({'where':{'companyId':_0x4d0c7b['id'],'key':'tokensgp'},'defaults':{'companyId':_0x4d0c7b['id'],'key':'tokensgp','value':''}}),await Setting_1['default'][_0x3b474c(0x166)]({'where':{'companyId':_0x4d0c7b['id'],'key':_0x3b474c(0x16a)},'defaults':{'companyId':_0x4d0c7b['id'],'key':_0x3b474c(0x16a),'value':''}}),await Setting_1['default'][_0x3b474c(0x166)]({'where':{'companyId':_0x4d0c7b['id'],'key':_0x3b474c(0x17d)},'defaults':{'companyId':_0x4d0c7b['id'],'key':'appsgp','value':''}});if(_0x4e01ef[_0x3b474c(0x17e)]!==undefined){const [_0x3cb159,_0x2acf26]=await Setting_1['default'][_0x3b474c(0x166)]({'where':{'companyId':_0x4d0c7b['id'],'key':'campaignsEnabled'},'defaults':{'companyId':_0x4d0c7b['id'],'key':_0x3b474c(0x17e),'value':''+_0xf9b4e7}});!_0x2acf26&&await _0x3cb159[_0x3b474c(0x177)]({'value':''+_0xf9b4e7});}return _0x4d0c7b;};exports[a385_0x481007(0x180)]=CreateCompanyService;