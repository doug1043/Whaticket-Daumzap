'use strict';const a423_0x2d4c75=a423_0xdfdc;(function(_0x106044,_0x2e165e){const _0x18f364=a423_0xdfdc,_0x5f27ca=_0x106044();while(!![]){try{const _0xd83b55=parseInt(_0x18f364(0xe3))/0x1+-parseInt(_0x18f364(0xc1))/0x2*(parseInt(_0x18f364(0xb9))/0x3)+parseInt(_0x18f364(0xe6))/0x4*(-parseInt(_0x18f364(0xd1))/0x5)+-parseInt(_0x18f364(0xb0))/0x6+parseInt(_0x18f364(0xc4))/0x7*(-parseInt(_0x18f364(0xb6))/0x8)+parseInt(_0x18f364(0xca))/0x9*(-parseInt(_0x18f364(0xb4))/0xa)+parseInt(_0x18f364(0xd5))/0xb;if(_0xd83b55===_0x2e165e)break;else _0x5f27ca['push'](_0x5f27ca['shift']());}catch(_0x96877e){_0x5f27ca['push'](_0x5f27ca['shift']());}}}(a423_0x48c1,0x71b7c));var __createBinding=this&&this[a423_0x2d4c75(0xcd)]||(Object['create']?function(_0x4ec458,_0x4e10a7,_0x1de151,_0x1dab34){const _0x588955=a423_0x2d4c75;if(_0x1dab34===undefined)_0x1dab34=_0x1de151;var _0x3ec8a0=Object[_0x588955(0xdc)](_0x4e10a7,_0x1de151);(!_0x3ec8a0||(_0x588955(0xc3)in _0x3ec8a0?!_0x4e10a7[_0x588955(0xdf)]:_0x3ec8a0[_0x588955(0xeb)]||_0x3ec8a0[_0x588955(0xde)]))&&(_0x3ec8a0={'enumerable':!![],'get':function(){return _0x4e10a7[_0x1de151];}}),Object['defineProperty'](_0x4ec458,_0x1dab34,_0x3ec8a0);}:function(_0x39078b,_0x41880e,_0x16bd3b,_0x5593e9){if(_0x5593e9===undefined)_0x5593e9=_0x16bd3b;_0x39078b[_0x5593e9]=_0x41880e[_0x16bd3b];}),__setModuleDefault=this&&this[a423_0x2d4c75(0xb5)]||(Object[a423_0x2d4c75(0xbb)]?function(_0x1a8cc7,_0x3afd11){const _0x4069ef=a423_0x2d4c75;Object['defineProperty'](_0x1a8cc7,_0x4069ef(0xd7),{'enumerable':!![],'value':_0x3afd11});}:function(_0x53f0b7,_0x301779){_0x53f0b7['default']=_0x301779;}),__importStar=this&&this[a423_0x2d4c75(0xe5)]||(function(){const _0x234418=(function(){let _0x5c2a03=!![];return function(_0x3f866d,_0x1f6c3f){const _0x150c22=_0x5c2a03?function(){const _0x384b9b=a423_0xdfdc;if(_0x1f6c3f){const _0x46d940=_0x1f6c3f[_0x384b9b(0xe4)](_0x3f866d,arguments);return _0x1f6c3f=null,_0x46d940;}}:function(){};return _0x5c2a03=![],_0x150c22;};}()),_0x4ca5ed=_0x234418(this,function(){const _0x3b8ee1=a423_0xdfdc;return _0x4ca5ed[_0x3b8ee1(0xe1)]()[_0x3b8ee1(0xe0)](_0x3b8ee1(0xbe))['toString']()[_0x3b8ee1(0xea)](_0x4ca5ed)[_0x3b8ee1(0xe0)](_0x3b8ee1(0xbe));});_0x4ca5ed();var _0x285112=function(_0x4e784e){const _0x4dd7d1=a423_0xdfdc;return _0x285112=Object[_0x4dd7d1(0xd2)]||function(_0x2fc629){const _0x16a6b3=_0x4dd7d1;var _0xa7bbfe=[];for(var _0x2d54c0 in _0x2fc629)if(Object[_0x16a6b3(0xdb)][_0x16a6b3(0xc6)][_0x16a6b3(0xcc)](_0x2fc629,_0x2d54c0))_0xa7bbfe[_0xa7bbfe[_0x16a6b3(0xb1)]]=_0x2d54c0;return _0xa7bbfe;},_0x285112(_0x4e784e);};return function(_0x570e6a){const _0x14641c=a423_0xdfdc;if(_0x570e6a&&_0x570e6a[_0x14641c(0xdf)])return _0x570e6a;var _0x176f3d={};if(_0x570e6a!=null){for(var _0x3814ed=_0x285112(_0x570e6a),_0x7fa4fb=0x0;_0x7fa4fb<_0x3814ed['length'];_0x7fa4fb++)if(_0x3814ed[_0x7fa4fb]!==_0x14641c(0xd7))__createBinding(_0x176f3d,_0x570e6a,_0x3814ed[_0x7fa4fb]);}return __setModuleDefault(_0x176f3d,_0x570e6a),_0x176f3d;};}()),__importDefault=this&&this[a423_0x2d4c75(0xb2)]||function(_0x3f0af6){const _0x3ff5c4=a423_0x2d4c75;return _0x3f0af6&&_0x3f0af6[_0x3ff5c4(0xdf)]?_0x3f0af6:{'default':_0x3f0af6};};Object[a423_0x2d4c75(0xc2)](exports,a423_0x2d4c75(0xdf),{'value':!![]});const Yup=__importStar(require(a423_0x2d4c75(0xce))),AppError_1=__importDefault(require(a423_0x2d4c75(0xdd))),Company_1=__importDefault(require(a423_0x2d4c75(0xc8))),User_1=__importDefault(require(a423_0x2d4c75(0xb8))),Setting_1=__importDefault(require(a423_0x2d4c75(0xaf))),CreateCompanyService=async _0x113727=>{const _0x9d23b7=a423_0x2d4c75,{name:_0xb5c071,phone:_0x363a42,email:_0x394c02,status:_0x2a929d,planId:_0x33fcee,password:_0x5a4247,campaignsEnabled:_0x3f67d5,dueDate:_0x5160b8,recurrence:_0x23af59}=_0x113727,_0x376ec6=Yup[_0x9d23b7(0xe2)]()[_0x9d23b7(0xbc)]({'name':Yup[_0x9d23b7(0xda)]()[_0x9d23b7(0xe9)](0x2,_0x9d23b7(0xcf))[_0x9d23b7(0xd6)]('ERR_COMPANY_INVALID_NAME')[_0x9d23b7(0xe7)]('Check-unique-name',_0x9d23b7(0xe8),async _0x20f1d9=>{const _0x2b8974=_0x9d23b7;if(_0x20f1d9){const _0x2d3d30=await Company_1[_0x2b8974(0xd7)][_0x2b8974(0xc5)]({'where':{'name':_0x20f1d9}});return!_0x2d3d30;}return![];})});try{await _0x376ec6[_0x9d23b7(0xcb)]({'name':_0xb5c071});}catch(_0x3d30c9){throw new AppError_1[(_0x9d23b7(0xd7))](_0x3d30c9[_0x9d23b7(0xd8)]);}const _0x5ec9c5=await Company_1[_0x9d23b7(0xd7)][_0x9d23b7(0xbb)]({'name':_0xb5c071,'phone':_0x363a42,'email':_0x394c02,'status':_0x2a929d,'planId':_0x33fcee,'dueDate':_0x5160b8,'recurrence':_0x23af59}),[_0xfa2309,_0x20bd1f]=await User_1['default']['findOrCreate']({'where':{'name':_0xb5c071,'email':_0x394c02},'defaults':{'name':_0xb5c071,'email':_0x394c02,'password':_0x5a4247||'mudar123','profile':_0x9d23b7(0xbd),'companyId':_0x5ec9c5['id']}});!_0x20bd1f&&await _0xfa2309[_0x9d23b7(0xba)]({'companyId':_0x5ec9c5['id']});await Setting_1[_0x9d23b7(0xd7)][_0x9d23b7(0xb7)]({'where':{'companyId':_0x5ec9c5['id'],'key':_0x9d23b7(0xc7)},'defaults':{'companyId':_0x5ec9c5['id'],'key':_0x9d23b7(0xd0),'value':''}}),await Setting_1[_0x9d23b7(0xd7)]['findOrCreate']({'where':{'companyId':_0x5ec9c5['id'],'key':''},'defaults':{'companyId':_0x5ec9c5['id'],'key':'call','value':_0x9d23b7(0xb3)}}),await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x5ec9c5['id'],'key':_0x9d23b7(0xae)},'defaults':{'companyId':_0x5ec9c5['id'],'key':'scheduleType','value':_0x9d23b7(0xb3)}}),await Setting_1[_0x9d23b7(0xd7)][_0x9d23b7(0xb7)]({'where':{'companyId':_0x5ec9c5['id'],'key':_0x9d23b7(0xd9)},'defaults':{'companyId':_0x5ec9c5['id'],'key':_0x9d23b7(0xd9),'value':_0x9d23b7(0xb3)}}),await Setting_1['default'][_0x9d23b7(0xb7)]({'where':{'companyId':_0x5ec9c5['id'],'key':_0x9d23b7(0xc9)},'defaults':{'companyId':_0x5ec9c5['id'],'key':_0x9d23b7(0xc9),'value':_0x9d23b7(0xb3)}}),await Setting_1[_0x9d23b7(0xd7)]['findOrCreate']({'where':{'companyId':_0x5ec9c5['id'],'key':_0x9d23b7(0xbf)},'defaults':{'companyId':_0x5ec9c5['id'],'key':_0x9d23b7(0xbf),'value':'text'}}),await Setting_1[_0x9d23b7(0xd7)]['findOrCreate']({'where':{'companyId':_0x5ec9c5['id'],'key':_0x9d23b7(0xd3),'value':_0x9d23b7(0xd4)}});if(_0x113727[_0x9d23b7(0xc0)]!==undefined){const [_0x55e478,_0x34b737]=await Setting_1[_0x9d23b7(0xd7)][_0x9d23b7(0xb7)]({'where':{'companyId':_0x5ec9c5['id'],'key':'campaignsEnabled'},'defaults':{'companyId':_0x5ec9c5['id'],'key':_0x9d23b7(0xc0),'value':''+_0x3f67d5}});!_0x34b737&&await _0x55e478[_0x9d23b7(0xba)]({'value':''+_0x3f67d5});}return _0x5ec9c5;};exports[a423_0x2d4c75(0xd7)]=CreateCompanyService;function a423_0xdfdc(_0x53e14f,_0x12ca22){const _0x3593ed=a423_0x48c1();return a423_0xdfdc=function(_0x1a605d,_0x265dff){_0x1a605d=_0x1a605d-0xae;let _0x48c1d2=_0x3593ed[_0x1a605d];return _0x48c1d2;},a423_0xdfdc(_0x53e14f,_0x12ca22);}function a423_0x48c1(){const _0x4d453f=['scheduleType','../../models/Setting','552678ZxRrRk','length','__importDefault','disabled','20ZoXTvV','__setModuleDefault','2872Acmuyw','findOrCreate','../../models/User','39912eqaHXT','update','create','shape','admin','(((.+)+)+)+$','chatBotType','campaignsEnabled','72CNVyks','defineProperty','get','15512wBZbZm','findOne','hasOwnProperty','CheckMsgIsGroup','../../models/Company','sendMsgTransfTicket','1583442tzmBzV','validate','call','__createBinding','yup','ERR_COMPANY_INVALID_NAME','enabled','5fGiRRR','getOwnPropertyNames','versionWA','2.3000.1020713899','28780158afBloZ','required','default','message','sendGreetingAccepted','string','prototype','getOwnPropertyDescriptor','../../errors/AppError','configurable','__esModule','search','toString','object','404264NRWiDH','apply','__importStar','3345508jJBYGn','test','ERR_COMPANY_NAME_ALREADY_EXISTS','min','constructor','writable'];a423_0x48c1=function(){return _0x4d453f;};return a423_0x48c1();}