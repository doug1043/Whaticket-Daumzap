const a390_0x150783=a390_0x575d;function a390_0x3373(){const _0x47324c=['sendGreetingAccepted','disabled','campaignsEnabled','104ccTKmH','ERR_COMPANY_INVALID_NAME','findOrCreate','5940168JAqyZi','apply','writable','499280fTSYRL','findOne','tokenixc','../../models/User','chatBotType','userRating','getOwnPropertyDescriptor','create','4080KIsHTi','6543qcuJkk','12306yXhMDL','name','appsgp','yup','tokensgp','search','ipmkauth','110NIjbAv','defineProperty','mudar@123','configurable','ipsgp','shape','(((.+)+)+)+$','string','../../errors/AppError','enabled','clientidmkauth','constructor','../../models/Setting','ipixc','required','__esModule','get','object','test','password','message','829050qVnmsW','1105KbaGUT','admin','Check-unique-name','sendMsgTransfTicket','prototype','2311148YVMWpY','6LwRMms','asaas','toString','text','__importStar','default','min','73bnzEOE','update'];a390_0x3373=function(){return _0x47324c;};return a390_0x3373();}(function(_0x1506f2,_0x3187ac){const _0x237875=a390_0x575d,_0x49db88=_0x1506f2();while(!![]){try{const _0xd53098=parseInt(_0x237875(0x14c))/0x1*(parseInt(_0x237875(0x161))/0x2)+-parseInt(_0x237875(0x13e))/0x3+parseInt(_0x237875(0x15f))/0x4*(-parseInt(_0x237875(0x13f))/0x5)+-parseInt(_0x237875(0x145))/0x6*(-parseInt(_0x237875(0x144))/0x7)+parseInt(_0x237875(0x151))/0x8*(-parseInt(_0x237875(0x160))/0x9)+parseInt(_0x237875(0x157))/0xa*(parseInt(_0x237875(0x168))/0xb)+-parseInt(_0x237875(0x154))/0xc;if(_0xd53098===_0x3187ac)break;else _0x49db88['push'](_0x49db88['shift']());}catch(_0x54d3d6){_0x49db88['push'](_0x49db88['shift']());}}}(a390_0x3373,0x427fa));const a390_0x4c6931=(function(){let _0x326c15=!![];return function(_0x598af8,_0x64dac5){const _0x4a0e40=_0x326c15?function(){const _0x3be704=a390_0x575d;if(_0x64dac5){const _0x25919e=_0x64dac5[_0x3be704(0x155)](_0x598af8,arguments);return _0x64dac5=null,_0x25919e;}}:function(){};return _0x326c15=![],_0x4a0e40;};}()),a390_0x247255=a390_0x4c6931(this,function(){const _0x1672f1=a390_0x575d;return a390_0x247255[_0x1672f1(0x147)]()[_0x1672f1(0x166)](_0x1672f1(0x16e))[_0x1672f1(0x147)]()[_0x1672f1(0x173)](a390_0x247255)[_0x1672f1(0x166)]('(((.+)+)+)+$');});a390_0x247255();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a390_0x150783(0x15e)]?function(_0x44c182,_0x55c5b1,_0x106842,_0xe774df){const _0x1f4d38=a390_0x150783;if(_0xe774df===undefined)_0xe774df=_0x106842;var _0x4db098=Object[_0x1f4d38(0x15d)](_0x55c5b1,_0x106842);(!_0x4db098||(_0x1f4d38(0x178)in _0x4db098?!_0x55c5b1['__esModule']:_0x4db098[_0x1f4d38(0x156)]||_0x4db098[_0x1f4d38(0x16b)]))&&(_0x4db098={'enumerable':!![],'get':function(){return _0x55c5b1[_0x106842];}}),Object['defineProperty'](_0x44c182,_0xe774df,_0x4db098);}:function(_0x4c5a24,_0x3da6a4,_0x4b8cf8,_0x3cbf0e){if(_0x3cbf0e===undefined)_0x3cbf0e=_0x4b8cf8;_0x4c5a24[_0x3cbf0e]=_0x3da6a4[_0x4b8cf8];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a390_0x150783(0x15e)]?function(_0x433d42,_0x1e518d){const _0x5cfad9=a390_0x150783;Object[_0x5cfad9(0x169)](_0x433d42,_0x5cfad9(0x14a),{'enumerable':!![],'value':_0x1e518d});}:function(_0x58bfa0,_0x3800c2){const _0x29ae42=a390_0x150783;_0x58bfa0[_0x29ae42(0x14a)]=_0x3800c2;}),__importStar=this&&this[a390_0x150783(0x149)]||function(_0x6d4878){const _0x2231b1=a390_0x150783;if(_0x6d4878&&_0x6d4878['__esModule'])return _0x6d4878;var _0x25ab4e={};if(_0x6d4878!=null){for(var _0xb3cd4a in _0x6d4878)if(_0xb3cd4a!==_0x2231b1(0x14a)&&Object[_0x2231b1(0x143)]['hasOwnProperty']['call'](_0x6d4878,_0xb3cd4a))__createBinding(_0x25ab4e,_0x6d4878,_0xb3cd4a);}return __setModuleDefault(_0x25ab4e,_0x6d4878),_0x25ab4e;},__importDefault=this&&this['__importDefault']||function(_0x217780){const _0x560f1=a390_0x150783;return _0x217780&&_0x217780[_0x560f1(0x177)]?_0x217780:{'default':_0x217780};};Object[a390_0x150783(0x169)](exports,a390_0x150783(0x177),{'value':!![]});function a390_0x575d(_0x6602c5,_0x3402f2){const _0xaf8a75=a390_0x3373();return a390_0x575d=function(_0x247255,_0x4c6931){_0x247255=_0x247255-0x13d;let _0x33734f=_0xaf8a75[_0x247255];return _0x33734f;},a390_0x575d(_0x6602c5,_0x3402f2);}const Yup=__importStar(require(a390_0x150783(0x164))),AppError_1=__importDefault(require(a390_0x150783(0x170))),Company_1=__importDefault(require('../../models/Company')),User_1=__importDefault(require(a390_0x150783(0x15a))),Setting_1=__importDefault(require(a390_0x150783(0x174))),CreateCompanyService=async _0x54e50b=>{const _0x51297a=a390_0x150783,{name:_0x37dba1,phone:_0x46febf,email:_0x298808,status:_0x34ea27,planId:_0x4ebf6e,password:_0x59b766,campaignsEnabled:_0x11c629,dueDate:_0x3fb937,recurrence:_0x2019be}=_0x54e50b,_0xb3f703=Yup[_0x51297a(0x179)]()[_0x51297a(0x16d)]({'name':Yup[_0x51297a(0x16f)]()[_0x51297a(0x14b)](0x2,_0x51297a(0x152))[_0x51297a(0x176)]('ERR_COMPANY_INVALID_NAME')[_0x51297a(0x17a)](_0x51297a(0x141),'ERR_COMPANY_NAME_ALREADY_EXISTS',async _0x3051d3=>{const _0x42cd7c=_0x51297a;if(_0x3051d3){const _0x14b61a=await Company_1[_0x42cd7c(0x14a)][_0x42cd7c(0x158)]({'where':{'name':_0x3051d3}});return!_0x14b61a;}return![];})});try{await _0xb3f703['validate']({'name':_0x37dba1});}catch(_0x2c294e){throw new AppError_1['default'](_0x2c294e[_0x51297a(0x13d)]);}const _0x5e0bdd=await Company_1[_0x51297a(0x14a)][_0x51297a(0x15e)]({'name':_0x37dba1,'phone':_0x46febf,'email':_0x298808,'status':_0x34ea27,'planId':_0x4ebf6e,'dueDate':_0x3fb937,'recurrence':_0x2019be}),_0x1d44b7=await User_1[_0x51297a(0x14a)]['create']({'name':_0x5e0bdd[_0x51297a(0x162)],'email':_0x5e0bdd['email'],'password':_0x54e50b[_0x51297a(0x17b)]||_0x51297a(0x16a),'profile':_0x51297a(0x140),'companyId':_0x5e0bdd['id']});await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x146)},'defaults':{'companyId':_0x5e0bdd['id'],'key':'asaas','value':''}}),await Setting_1[_0x51297a(0x14a)][_0x51297a(0x153)]({'where':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x159)},'defaults':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x159),'value':''}}),await Setting_1['default'][_0x51297a(0x153)]({'where':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x175)},'defaults':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x175),'value':''}}),await Setting_1[_0x51297a(0x14a)][_0x51297a(0x153)]({'where':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x167)},'defaults':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x167),'value':''}}),await Setting_1[_0x51297a(0x14a)]['findOrCreate']({'where':{'companyId':_0x5e0bdd['id'],'key':'clientsecretmkauth'},'defaults':{'companyId':_0x5e0bdd['id'],'key':'clientsecretmkauth','value':''}}),await Setting_1[_0x51297a(0x14a)]['findOrCreate']({'where':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x172)},'defaults':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x172),'value':''}}),await Setting_1[_0x51297a(0x14a)]['findOrCreate']({'where':{'companyId':_0x5e0bdd['id'],'key':'CheckMsgIsGroup'},'defaults':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x171),'value':''}}),await Setting_1['default'][_0x51297a(0x153)]({'where':{'companyId':_0x5e0bdd['id'],'key':''},'defaults':{'companyId':_0x5e0bdd['id'],'key':'call','value':_0x51297a(0x14f)}}),await Setting_1[_0x51297a(0x14a)][_0x51297a(0x153)]({'where':{'companyId':_0x5e0bdd['id'],'key':'scheduleType'},'defaults':{'companyId':_0x5e0bdd['id'],'key':'scheduleType','value':'disabled'}}),await Setting_1[_0x51297a(0x14a)][_0x51297a(0x153)]({'where':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x14e)},'defaults':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x14e),'value':_0x51297a(0x14f)}}),await Setting_1[_0x51297a(0x14a)][_0x51297a(0x153)]({'where':{'companyId':_0x5e0bdd['id'],'key':'sendMsgTransfTicket'},'defaults':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x142),'value':_0x51297a(0x14f)}}),await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x15c)},'defaults':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x15c),'value':_0x51297a(0x14f)}}),await Setting_1['default'][_0x51297a(0x153)]({'where':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x15b)},'defaults':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x15b),'value':_0x51297a(0x148)}}),await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x165)},'defaults':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x165),'value':''}}),await Setting_1[_0x51297a(0x14a)][_0x51297a(0x153)]({'where':{'companyId':_0x5e0bdd['id'],'key':'ipsgp'},'defaults':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x16c),'value':''}}),await Setting_1[_0x51297a(0x14a)][_0x51297a(0x153)]({'where':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x163)},'defaults':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x163),'value':''}});if(_0x54e50b[_0x51297a(0x150)]!==undefined){const [_0x22922d,_0x5905a0]=await Setting_1[_0x51297a(0x14a)][_0x51297a(0x153)]({'where':{'companyId':_0x5e0bdd['id'],'key':'campaignsEnabled'},'defaults':{'companyId':_0x5e0bdd['id'],'key':_0x51297a(0x150),'value':''+_0x11c629}});!_0x5905a0&&await _0x22922d[_0x51297a(0x14d)]({'value':''+_0x11c629});}return _0x5e0bdd;};exports[a390_0x150783(0x14a)]=CreateCompanyService;