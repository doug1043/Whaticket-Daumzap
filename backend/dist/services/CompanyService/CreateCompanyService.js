const a388_0x10ac68=a388_0x236b;(function(_0x45ff1f,_0x26afd9){const _0x5b7cef=a388_0x236b,_0x665840=_0x45ff1f();while(!![]){try{const _0x3272e9=-parseInt(_0x5b7cef(0x163))/0x1*(parseInt(_0x5b7cef(0x15c))/0x2)+parseInt(_0x5b7cef(0x15f))/0x3*(parseInt(_0x5b7cef(0x164))/0x4)+-parseInt(_0x5b7cef(0x18c))/0x5*(parseInt(_0x5b7cef(0x181))/0x6)+-parseInt(_0x5b7cef(0x169))/0x7+parseInt(_0x5b7cef(0x188))/0x8+parseInt(_0x5b7cef(0x170))/0x9*(parseInt(_0x5b7cef(0x171))/0xa)+parseInt(_0x5b7cef(0x16b))/0xb*(-parseInt(_0x5b7cef(0x192))/0xc);if(_0x3272e9===_0x26afd9)break;else _0x665840['push'](_0x665840['shift']());}catch(_0x34fd15){_0x665840['push'](_0x665840['shift']());}}}(a388_0x4bbe,0xb7e06));const a388_0x34df64=(function(){let _0x47265c=!![];return function(_0x44e6c5,_0x2906db){const _0x2cf61d=_0x47265c?function(){const _0x5c8cdc=a388_0x236b;if(_0x2906db){const _0x5cd1fe=_0x2906db[_0x5c8cdc(0x160)](_0x44e6c5,arguments);return _0x2906db=null,_0x5cd1fe;}}:function(){};return _0x47265c=![],_0x2cf61d;};}()),a388_0x2cc6fc=a388_0x34df64(this,function(){const _0x4c0021=a388_0x236b;return a388_0x2cc6fc[_0x4c0021(0x174)]()['search']('(((.+)+)+)+$')['toString']()[_0x4c0021(0x165)](a388_0x2cc6fc)[_0x4c0021(0x180)](_0x4c0021(0x162));});function a388_0x236b(_0x38313f,_0x24f3fc){const _0x12a6d1=a388_0x4bbe();return a388_0x236b=function(_0x2cc6fc,_0x34df64){_0x2cc6fc=_0x2cc6fc-0x15b;let _0x4bbe71=_0x12a6d1[_0x2cc6fc];return _0x4bbe71;},a388_0x236b(_0x38313f,_0x24f3fc);}a388_0x2cc6fc();'use strict';var __createBinding=this&&this[a388_0x10ac68(0x196)]||(Object[a388_0x10ac68(0x184)]?function(_0xf1bf36,_0x47f40e,_0x2f0133,_0x3f88ab){const _0x565786=a388_0x10ac68;if(_0x3f88ab===undefined)_0x3f88ab=_0x2f0133;var _0xb3230b=Object['getOwnPropertyDescriptor'](_0x47f40e,_0x2f0133);(!_0xb3230b||(_0x565786(0x182)in _0xb3230b?!_0x47f40e[_0x565786(0x179)]:_0xb3230b[_0x565786(0x17c)]||_0xb3230b[_0x565786(0x172)]))&&(_0xb3230b={'enumerable':!![],'get':function(){return _0x47f40e[_0x2f0133];}}),Object[_0x565786(0x16a)](_0xf1bf36,_0x3f88ab,_0xb3230b);}:function(_0x2dc260,_0x52e31e,_0x374048,_0x8ced98){if(_0x8ced98===undefined)_0x8ced98=_0x374048;_0x2dc260[_0x8ced98]=_0x52e31e[_0x374048];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a388_0x10ac68(0x184)]?function(_0x28786f,_0x2d42d5){Object['defineProperty'](_0x28786f,'default',{'enumerable':!![],'value':_0x2d42d5});}:function(_0xa7beb3,_0x16f3b3){const _0x42d5f8=a388_0x10ac68;_0xa7beb3[_0x42d5f8(0x185)]=_0x16f3b3;}),__importStar=this&&this['__importStar']||function(_0x21f252){const _0x4470d6=a388_0x10ac68;if(_0x21f252&&_0x21f252[_0x4470d6(0x179)])return _0x21f252;var _0x3dc91b={};if(_0x21f252!=null){for(var _0x2cc399 in _0x21f252)if(_0x2cc399!==_0x4470d6(0x185)&&Object[_0x4470d6(0x17b)][_0x4470d6(0x16f)][_0x4470d6(0x17f)](_0x21f252,_0x2cc399))__createBinding(_0x3dc91b,_0x21f252,_0x2cc399);}return __setModuleDefault(_0x3dc91b,_0x21f252),_0x3dc91b;},__importDefault=this&&this['__importDefault']||function(_0x1f26af){const _0x485faf=a388_0x10ac68;return _0x1f26af&&_0x1f26af[_0x485faf(0x179)]?_0x1f26af:{'default':_0x1f26af};};Object[a388_0x10ac68(0x16a)](exports,a388_0x10ac68(0x179),{'value':!![]});function a388_0x4bbe(){const _0x2354ca=['search','84pZaYZY','get','enabled','create','default','name','campaignsEnabled','9510056uYtSoS','required','ipmkauth','clientsecretmkauth','216230CVNtzP','clientidmkauth','asaas','../../models/Setting','password','ERR_COMPANY_NAME_ALREADY_EXISTS','12gDHbTf','ipixc','disabled','test','__createBinding','sendMsgTransfTicket','chatBotType','findOrCreate','367474PHereB','tokensgp','ipsgp','500421DaztQl','apply','object','(((.+)+)+)+$','1YULQkn','28PktziQ','constructor','scheduleType','min','userRating','633647JmNSHI','defineProperty','17711738yizGcr','update','ERR_COMPANY_INVALID_NAME','CheckMsgIsGroup','hasOwnProperty','18WarMMe','4433060rLuaMZ','configurable','findOne','toString','email','mudar@123','../../models/User','../../models/Company','__esModule','text','prototype','writable','appsgp','tokenixc','call'];a388_0x4bbe=function(){return _0x2354ca;};return a388_0x4bbe();}const Yup=__importStar(require('yup')),AppError_1=__importDefault(require('../../errors/AppError')),Company_1=__importDefault(require(a388_0x10ac68(0x178))),User_1=__importDefault(require(a388_0x10ac68(0x177))),Setting_1=__importDefault(require(a388_0x10ac68(0x18f))),CreateCompanyService=async _0xa7a601=>{const _0x1bfbfe=a388_0x10ac68,{name:_0x4c622b,phone:_0xbc6fb,email:_0x581ee3,status:_0x15355d,planId:_0x22415b,password:_0x319a9c,campaignsEnabled:_0x17e44b,dueDate:_0x543102,recurrence:_0xfd0d15}=_0xa7a601,_0xf54f0=Yup[_0x1bfbfe(0x161)]()['shape']({'name':Yup['string']()[_0x1bfbfe(0x167)](0x2,_0x1bfbfe(0x16d))[_0x1bfbfe(0x189)](_0x1bfbfe(0x16d))[_0x1bfbfe(0x195)]('Check-unique-name',_0x1bfbfe(0x191),async _0x4578e4=>{const _0x323286=_0x1bfbfe;if(_0x4578e4){const _0x52f212=await Company_1['default'][_0x323286(0x173)]({'where':{'name':_0x4578e4}});return!_0x52f212;}return![];})});try{await _0xf54f0['validate']({'name':_0x4c622b});}catch(_0x42f827){throw new AppError_1[(_0x1bfbfe(0x185))](_0x42f827['message']);}const _0x1fa761=await Company_1[_0x1bfbfe(0x185)][_0x1bfbfe(0x184)]({'name':_0x4c622b,'phone':_0xbc6fb,'email':_0x581ee3,'status':_0x15355d,'planId':_0x22415b,'dueDate':_0x543102,'recurrence':_0xfd0d15}),_0x28a631=await User_1[_0x1bfbfe(0x185)]['create']({'name':_0x1fa761[_0x1bfbfe(0x186)],'email':_0x1fa761[_0x1bfbfe(0x175)],'password':_0xa7a601[_0x1bfbfe(0x190)]||_0x1bfbfe(0x176),'profile':'admin','companyId':_0x1fa761['id']});await Setting_1[_0x1bfbfe(0x185)][_0x1bfbfe(0x15b)]({'where':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x18e)},'defaults':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x18e),'value':''}}),await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x17e)},'defaults':{'companyId':_0x1fa761['id'],'key':'tokenixc','value':''}}),await Setting_1[_0x1bfbfe(0x185)][_0x1bfbfe(0x15b)]({'where':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x193)},'defaults':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x193),'value':''}}),await Setting_1['default'][_0x1bfbfe(0x15b)]({'where':{'companyId':_0x1fa761['id'],'key':'ipmkauth'},'defaults':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x18a),'value':''}}),await Setting_1[_0x1bfbfe(0x185)][_0x1bfbfe(0x15b)]({'where':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x18b)},'defaults':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x18b),'value':''}}),await Setting_1[_0x1bfbfe(0x185)][_0x1bfbfe(0x15b)]({'where':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x18d)},'defaults':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x18d),'value':''}}),await Setting_1[_0x1bfbfe(0x185)]['findOrCreate']({'where':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x16e)},'defaults':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x183),'value':''}}),await Setting_1[_0x1bfbfe(0x185)][_0x1bfbfe(0x15b)]({'where':{'companyId':_0x1fa761['id'],'key':''},'defaults':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x17f),'value':_0x1bfbfe(0x194)}}),await Setting_1[_0x1bfbfe(0x185)][_0x1bfbfe(0x15b)]({'where':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x166)},'defaults':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x166),'value':_0x1bfbfe(0x194)}}),await Setting_1[_0x1bfbfe(0x185)][_0x1bfbfe(0x15b)]({'where':{'companyId':_0x1fa761['id'],'key':'sendGreetingAccepted'},'defaults':{'companyId':_0x1fa761['id'],'key':'sendGreetingAccepted','value':_0x1bfbfe(0x194)}}),await Setting_1[_0x1bfbfe(0x185)][_0x1bfbfe(0x15b)]({'where':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x197)},'defaults':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x197),'value':'disabled'}}),await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x1fa761['id'],'key':'userRating'},'defaults':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x168),'value':_0x1bfbfe(0x194)}}),await Setting_1['default'][_0x1bfbfe(0x15b)]({'where':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x198)},'defaults':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x198),'value':_0x1bfbfe(0x17a)}}),await Setting_1[_0x1bfbfe(0x185)]['findOrCreate']({'where':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x15d)},'defaults':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x15d),'value':''}}),await Setting_1[_0x1bfbfe(0x185)][_0x1bfbfe(0x15b)]({'where':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x15e)},'defaults':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x15e),'value':''}}),await Setting_1['default'][_0x1bfbfe(0x15b)]({'where':{'companyId':_0x1fa761['id'],'key':'appsgp'},'defaults':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x17d),'value':''}});if(_0xa7a601[_0x1bfbfe(0x187)]!==undefined){const [_0x2090ea,_0x38f49a]=await Setting_1[_0x1bfbfe(0x185)][_0x1bfbfe(0x15b)]({'where':{'companyId':_0x1fa761['id'],'key':_0x1bfbfe(0x187)},'defaults':{'companyId':_0x1fa761['id'],'key':'campaignsEnabled','value':''+_0x17e44b}});!_0x38f49a&&await _0x2090ea[_0x1bfbfe(0x16c)]({'value':''+_0x17e44b});}return _0x1fa761;};exports[a388_0x10ac68(0x185)]=CreateCompanyService;