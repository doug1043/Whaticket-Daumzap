'use strict';const a419_0x33d8e3=a419_0xef16;(function(_0x596bd9,_0x166988){const _0x299123=a419_0xef16,_0x445cbf=_0x596bd9();while(!![]){try{const _0x9598ea=-parseInt(_0x299123(0x19e))/0x1+parseInt(_0x299123(0x18f))/0x2+parseInt(_0x299123(0x190))/0x3*(parseInt(_0x299123(0x184))/0x4)+-parseInt(_0x299123(0x18d))/0x5+parseInt(_0x299123(0x17d))/0x6*(-parseInt(_0x299123(0x183))/0x7)+-parseInt(_0x299123(0x17e))/0x8+parseInt(_0x299123(0x18b))/0x9;if(_0x9598ea===_0x166988)break;else _0x445cbf['push'](_0x445cbf['shift']());}catch(_0x462dd1){_0x445cbf['push'](_0x445cbf['shift']());}}}(a419_0x5613,0x20e9e));function a419_0xef16(_0x56f3dd,_0x4c78ad){const _0x447c56=a419_0x5613();return a419_0xef16=function(_0x4105ad,_0x3132b8){_0x4105ad=_0x4105ad-0x16c;let _0x561318=_0x447c56[_0x4105ad];return _0x561318;},a419_0xef16(_0x56f3dd,_0x4c78ad);}var __createBinding=this&&this[a419_0x33d8e3(0x194)]||(Object[a419_0x33d8e3(0x177)]?function(_0x168106,_0x2ce8c0,_0x2d3544,_0x48420b){const _0x2e3cab=a419_0x33d8e3;if(_0x48420b===undefined)_0x48420b=_0x2d3544;var _0x6b038e=Object[_0x2e3cab(0x19a)](_0x2ce8c0,_0x2d3544);(!_0x6b038e||(_0x2e3cab(0x17a)in _0x6b038e?!_0x2ce8c0['__esModule']:_0x6b038e[_0x2e3cab(0x193)]||_0x6b038e[_0x2e3cab(0x187)]))&&(_0x6b038e={'enumerable':!![],'get':function(){return _0x2ce8c0[_0x2d3544];}}),Object[_0x2e3cab(0x19b)](_0x168106,_0x48420b,_0x6b038e);}:function(_0xabe3e0,_0x42c549,_0x4ad826,_0x4e6522){if(_0x4e6522===undefined)_0x4e6522=_0x4ad826;_0xabe3e0[_0x4e6522]=_0x42c549[_0x4ad826];}),__setModuleDefault=this&&this[a419_0x33d8e3(0x196)]||(Object[a419_0x33d8e3(0x177)]?function(_0xd8fc87,_0xf0fbf3){const _0x4b2610=a419_0x33d8e3;Object[_0x4b2610(0x19b)](_0xd8fc87,_0x4b2610(0x191),{'enumerable':!![],'value':_0xf0fbf3});}:function(_0x40b524,_0x27c821){const _0x1c6c90=a419_0x33d8e3;_0x40b524[_0x1c6c90(0x191)]=_0x27c821;}),__importStar=this&&this['__importStar']||(function(){const _0x385a59=(function(){let _0x1df183=!![];return function(_0x54c698,_0x340553){const _0x1c2ce5=_0x1df183?function(){const _0x57e0de=a419_0xef16;if(_0x340553){const _0x604d4=_0x340553[_0x57e0de(0x17b)](_0x54c698,arguments);return _0x340553=null,_0x604d4;}}:function(){};return _0x1df183=![],_0x1c2ce5;};}()),_0x1e6b74=_0x385a59(this,function(){const _0x542436=a419_0xef16;return _0x1e6b74[_0x542436(0x173)]()[_0x542436(0x18e)](_0x542436(0x19c))[_0x542436(0x173)]()['constructor'](_0x1e6b74)[_0x542436(0x18e)](_0x542436(0x19c));});_0x1e6b74();var _0x3c06a0=function(_0x33f667){const _0xfec2f6=a419_0xef16;return _0x3c06a0=Object[_0xfec2f6(0x18c)]||function(_0x172fc3){const _0x3ad99c=_0xfec2f6;var _0x44fb2b=[];for(var _0xb7ada9 in _0x172fc3)if(Object['prototype'][_0x3ad99c(0x197)][_0x3ad99c(0x179)](_0x172fc3,_0xb7ada9))_0x44fb2b[_0x44fb2b['length']]=_0xb7ada9;return _0x44fb2b;},_0x3c06a0(_0x33f667);};return function(_0x196396){const _0x1b8235=a419_0xef16;if(_0x196396&&_0x196396[_0x1b8235(0x16d)])return _0x196396;var _0xd9049d={};if(_0x196396!=null){for(var _0x534f77=_0x3c06a0(_0x196396),_0x4828a6=0x0;_0x4828a6<_0x534f77['length'];_0x4828a6++)if(_0x534f77[_0x4828a6]!==_0x1b8235(0x191))__createBinding(_0xd9049d,_0x196396,_0x534f77[_0x4828a6]);}return __setModuleDefault(_0xd9049d,_0x196396),_0xd9049d;};}()),__importDefault=this&&this[a419_0x33d8e3(0x178)]||function(_0x348187){const _0x5e893e=a419_0x33d8e3;return _0x348187&&_0x348187[_0x5e893e(0x16d)]?_0x348187:{'default':_0x348187};};Object[a419_0x33d8e3(0x19b)](exports,a419_0x33d8e3(0x16d),{'value':!![]});function a419_0x5613(){const _0x258c34=['sendMsgTransfTicket','update','min','message','admin','toString','enabled','scheduleType','text','create','__importDefault','call','get','apply','sendGreetingAccepted','6xWVzNb','2148888OcXaWM','disabled','../../models/Company','campaignsEnabled','required','437850HQgpvo','346052ZzLiQh','ERR_COMPANY_INVALID_NAME','yup','configurable','object','ERR_COMPANY_NAME_ALREADY_EXISTS','test','4215267FYemNH','getOwnPropertyNames','348410bWEKDw','search','100570PFCtgb','9zNHggh','default','Check-unique-name','writable','__createBinding','shape','__setModuleDefault','hasOwnProperty','findOrCreate','../../models/User','getOwnPropertyDescriptor','defineProperty','(((.+)+)+)+$','../../models/Setting','242530QiiUFM','string','__esModule'];a419_0x5613=function(){return _0x258c34;};return a419_0x5613();}const Yup=__importStar(require(a419_0x33d8e3(0x186))),AppError_1=__importDefault(require('../../errors/AppError')),Company_1=__importDefault(require(a419_0x33d8e3(0x180))),User_1=__importDefault(require(a419_0x33d8e3(0x199))),Setting_1=__importDefault(require(a419_0x33d8e3(0x19d))),CreateCompanyService=async _0x19cf8b=>{const _0x3f01c5=a419_0x33d8e3,{name:_0xcd8a54,phone:_0x391413,email:_0x4e7617,status:_0x2681cb,planId:_0x1a5f68,password:_0x141bf6,campaignsEnabled:_0x267243,dueDate:_0x41910a,recurrence:_0x229ccc}=_0x19cf8b,_0x12f529=Yup[_0x3f01c5(0x188)]()[_0x3f01c5(0x195)]({'name':Yup[_0x3f01c5(0x16c)]()[_0x3f01c5(0x170)](0x2,_0x3f01c5(0x185))[_0x3f01c5(0x182)](_0x3f01c5(0x185))[_0x3f01c5(0x18a)](_0x3f01c5(0x192),_0x3f01c5(0x189),async _0x5ab7b6=>{if(_0x5ab7b6){const _0x2a9cde=await Company_1['default']['findOne']({'where':{'name':_0x5ab7b6}});return!_0x2a9cde;}return![];})});try{await _0x12f529['validate']({'name':_0xcd8a54});}catch(_0x59da1a){throw new AppError_1[(_0x3f01c5(0x191))](_0x59da1a[_0x3f01c5(0x171)]);}const _0x59d00a=await Company_1[_0x3f01c5(0x191)][_0x3f01c5(0x177)]({'name':_0xcd8a54,'phone':_0x391413,'email':_0x4e7617,'status':_0x2681cb,'planId':_0x1a5f68,'dueDate':_0x41910a,'recurrence':_0x229ccc}),[_0x1c6a7b,_0x395223]=await User_1[_0x3f01c5(0x191)]['findOrCreate']({'where':{'name':_0xcd8a54,'email':_0x4e7617},'defaults':{'name':_0xcd8a54,'email':_0x4e7617,'password':_0x141bf6||'mudar123','profile':_0x3f01c5(0x172),'companyId':_0x59d00a['id']}});!_0x395223&&await _0x1c6a7b[_0x3f01c5(0x16f)]({'companyId':_0x59d00a['id']});await Setting_1[_0x3f01c5(0x191)]['findOrCreate']({'where':{'companyId':_0x59d00a['id'],'key':'CheckMsgIsGroup'},'defaults':{'companyId':_0x59d00a['id'],'key':_0x3f01c5(0x174),'value':''}}),await Setting_1[_0x3f01c5(0x191)][_0x3f01c5(0x198)]({'where':{'companyId':_0x59d00a['id'],'key':''},'defaults':{'companyId':_0x59d00a['id'],'key':_0x3f01c5(0x179),'value':_0x3f01c5(0x17f)}}),await Setting_1[_0x3f01c5(0x191)][_0x3f01c5(0x198)]({'where':{'companyId':_0x59d00a['id'],'key':_0x3f01c5(0x175)},'defaults':{'companyId':_0x59d00a['id'],'key':_0x3f01c5(0x175),'value':_0x3f01c5(0x17f)}}),await Setting_1[_0x3f01c5(0x191)][_0x3f01c5(0x198)]({'where':{'companyId':_0x59d00a['id'],'key':_0x3f01c5(0x17c)},'defaults':{'companyId':_0x59d00a['id'],'key':_0x3f01c5(0x17c),'value':_0x3f01c5(0x17f)}}),await Setting_1[_0x3f01c5(0x191)][_0x3f01c5(0x198)]({'where':{'companyId':_0x59d00a['id'],'key':_0x3f01c5(0x16e)},'defaults':{'companyId':_0x59d00a['id'],'key':_0x3f01c5(0x16e),'value':_0x3f01c5(0x17f)}}),await Setting_1['default'][_0x3f01c5(0x198)]({'where':{'companyId':_0x59d00a['id'],'key':'chatBotType'},'defaults':{'companyId':_0x59d00a['id'],'key':'chatBotType','value':_0x3f01c5(0x176)}}),await Setting_1[_0x3f01c5(0x191)][_0x3f01c5(0x198)]({'where':{'companyId':_0x59d00a['id'],'key':'versionWA','value':'2.3000.1020713899'}});if(_0x19cf8b[_0x3f01c5(0x181)]!==undefined){const [_0x46e8d1,_0x2b15a0]=await Setting_1[_0x3f01c5(0x191)][_0x3f01c5(0x198)]({'where':{'companyId':_0x59d00a['id'],'key':'campaignsEnabled'},'defaults':{'companyId':_0x59d00a['id'],'key':_0x3f01c5(0x181),'value':''+_0x267243}});!_0x2b15a0&&await _0x46e8d1[_0x3f01c5(0x16f)]({'value':''+_0x267243});}return _0x59d00a;};exports[a419_0x33d8e3(0x191)]=CreateCompanyService;