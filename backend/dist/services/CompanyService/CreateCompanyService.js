const a389_0x2764b3=a389_0x24d3;function a389_0x25ff(){const _0xd6390e=['2sPIbsk','update','ipmkauth','../../errors/AppError','search','../../models/Company','object','2135224oygkrW','tokensgp','clientsecretmkauth','Check-unique-name','test','getOwnPropertyDescriptor','asaas','email','clientidmkauth','sendGreetingAccepted','../../models/Setting','message','default','defineProperty','findOrCreate','enabled','prototype','__importDefault','call','__esModule','237630QDsebG','campaignsEnabled','20zDiAWG','toString','__importStar','disabled','appsgp','create','184156xENiJv','10FumOJI','__setModuleDefault','userRating','(((.+)+)+)+$','get','ERR_COMPANY_INVALID_NAME','458838iPmFyp','CheckMsgIsGroup','563499WxpjPe','writable','154923XvyqvN','208096sovDkv','password','configurable','validate','name','sendMsgTransfTicket','mudar@123','chatBotType','constructor','scheduleType','findOne'];a389_0x25ff=function(){return _0xd6390e;};return a389_0x25ff();}(function(_0xfb5a31,_0xcce614){const _0x43b346=a389_0x24d3,_0x83b302=_0xfb5a31();while(!![]){try{const _0x9852f1=parseInt(_0x43b346(0x1be))/0x1+parseInt(_0x43b346(0x1d5))/0x2*(-parseInt(_0x43b346(0x1c9))/0x3)+-parseInt(_0x43b346(0x1b8))/0x4*(-parseInt(_0x43b346(0x1b6))/0x5)+parseInt(_0x43b346(0x1c5))/0x6+-parseInt(_0x43b346(0x1dc))/0x7+parseInt(_0x43b346(0x1ca))/0x8+-parseInt(_0x43b346(0x1c7))/0x9*(-parseInt(_0x43b346(0x1bf))/0xa);if(_0x9852f1===_0xcce614)break;else _0x83b302['push'](_0x83b302['shift']());}catch(_0x48e5f0){_0x83b302['push'](_0x83b302['shift']());}}}(a389_0x25ff,0x38341));const a389_0x197584=(function(){let _0x3b795a=!![];return function(_0x50dcbb,_0x4f4fa7){const _0x10730b=_0x3b795a?function(){if(_0x4f4fa7){const _0x5144be=_0x4f4fa7['apply'](_0x50dcbb,arguments);return _0x4f4fa7=null,_0x5144be;}}:function(){};return _0x3b795a=![],_0x10730b;};}()),a389_0x520979=a389_0x197584(this,function(){const _0x362334=a389_0x24d3;return a389_0x520979[_0x362334(0x1b9)]()[_0x362334(0x1d9)](_0x362334(0x1c2))[_0x362334(0x1b9)]()[_0x362334(0x1d2)](a389_0x520979)[_0x362334(0x1d9)](_0x362334(0x1c2));});function a389_0x24d3(_0x55caa1,_0x1874a1){const _0x3f945d=a389_0x25ff();return a389_0x24d3=function(_0x520979,_0x197584){_0x520979=_0x520979-0x1aa;let _0x25ffc4=_0x3f945d[_0x520979];return _0x25ffc4;},a389_0x24d3(_0x55caa1,_0x1874a1);}a389_0x520979();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a389_0x2764b3(0x1bd)]?function(_0x256831,_0x96ac0c,_0x32d787,_0x2eb4b8){const _0x14f1e6=a389_0x2764b3;if(_0x2eb4b8===undefined)_0x2eb4b8=_0x32d787;var _0x40d2e3=Object[_0x14f1e6(0x1e1)](_0x96ac0c,_0x32d787);(!_0x40d2e3||(_0x14f1e6(0x1c3)in _0x40d2e3?!_0x96ac0c[_0x14f1e6(0x1b5)]:_0x40d2e3[_0x14f1e6(0x1c8)]||_0x40d2e3[_0x14f1e6(0x1cc)]))&&(_0x40d2e3={'enumerable':!![],'get':function(){return _0x96ac0c[_0x32d787];}}),Object[_0x14f1e6(0x1af)](_0x256831,_0x2eb4b8,_0x40d2e3);}:function(_0x5bf3f8,_0x1a9143,_0x21904d,_0x2cd797){if(_0x2cd797===undefined)_0x2cd797=_0x21904d;_0x5bf3f8[_0x2cd797]=_0x1a9143[_0x21904d];}),__setModuleDefault=this&&this[a389_0x2764b3(0x1c0)]||(Object[a389_0x2764b3(0x1bd)]?function(_0x199783,_0x514abb){const _0xa78b40=a389_0x2764b3;Object[_0xa78b40(0x1af)](_0x199783,_0xa78b40(0x1ae),{'enumerable':!![],'value':_0x514abb});}:function(_0x1c76c2,_0x394fcf){const _0x12e3b2=a389_0x2764b3;_0x1c76c2[_0x12e3b2(0x1ae)]=_0x394fcf;}),__importStar=this&&this[a389_0x2764b3(0x1ba)]||function(_0x3b1038){const _0x2fce9b=a389_0x2764b3;if(_0x3b1038&&_0x3b1038[_0x2fce9b(0x1b5)])return _0x3b1038;var _0x8ac4fb={};if(_0x3b1038!=null){for(var _0x201d75 in _0x3b1038)if(_0x201d75!==_0x2fce9b(0x1ae)&&Object[_0x2fce9b(0x1b2)]['hasOwnProperty'][_0x2fce9b(0x1b4)](_0x3b1038,_0x201d75))__createBinding(_0x8ac4fb,_0x3b1038,_0x201d75);}return __setModuleDefault(_0x8ac4fb,_0x3b1038),_0x8ac4fb;},__importDefault=this&&this[a389_0x2764b3(0x1b3)]||function(_0xcc7892){const _0x4e3c4a=a389_0x2764b3;return _0xcc7892&&_0xcc7892[_0x4e3c4a(0x1b5)]?_0xcc7892:{'default':_0xcc7892};};Object['defineProperty'](exports,a389_0x2764b3(0x1b5),{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a389_0x2764b3(0x1d8))),Company_1=__importDefault(require(a389_0x2764b3(0x1da))),User_1=__importDefault(require('../../models/User')),Setting_1=__importDefault(require(a389_0x2764b3(0x1ac))),CreateCompanyService=async _0x39c8ab=>{const _0x4916cb=a389_0x2764b3,{name:_0x1b8c44,phone:_0x439e55,email:_0xb5cc89,status:_0x27d221,planId:_0x1830cb,password:_0x3765bc,campaignsEnabled:_0x434387,dueDate:_0x4202d0,recurrence:_0x5d71e6}=_0x39c8ab,_0x4d862a=Yup[_0x4916cb(0x1db)]()['shape']({'name':Yup['string']()['min'](0x2,_0x4916cb(0x1c4))['required'](_0x4916cb(0x1c4))[_0x4916cb(0x1e0)](_0x4916cb(0x1df),'ERR_COMPANY_NAME_ALREADY_EXISTS',async _0x2dd0c2=>{const _0x5efd7c=_0x4916cb;if(_0x2dd0c2){const _0x42bcb4=await Company_1[_0x5efd7c(0x1ae)][_0x5efd7c(0x1d4)]({'where':{'name':_0x2dd0c2}});return!_0x42bcb4;}return![];})});try{await _0x4d862a[_0x4916cb(0x1cd)]({'name':_0x1b8c44});}catch(_0x4fb4aa){throw new AppError_1[(_0x4916cb(0x1ae))](_0x4fb4aa[_0x4916cb(0x1ad)]);}const _0x3d6dc5=await Company_1[_0x4916cb(0x1ae)][_0x4916cb(0x1bd)]({'name':_0x1b8c44,'phone':_0x439e55,'email':_0xb5cc89,'status':_0x27d221,'planId':_0x1830cb,'dueDate':_0x4202d0,'recurrence':_0x5d71e6}),_0x13c60b=await User_1[_0x4916cb(0x1ae)][_0x4916cb(0x1bd)]({'name':_0x3d6dc5[_0x4916cb(0x1ce)],'email':_0x3d6dc5[_0x4916cb(0x1e3)],'password':_0x39c8ab[_0x4916cb(0x1cb)]||_0x4916cb(0x1d0),'profile':'admin','companyId':_0x3d6dc5['id']});await Setting_1[_0x4916cb(0x1ae)][_0x4916cb(0x1b0)]({'where':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1e2)},'defaults':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1e2),'value':''}}),await Setting_1[_0x4916cb(0x1ae)][_0x4916cb(0x1b0)]({'where':{'companyId':_0x3d6dc5['id'],'key':'tokenixc'},'defaults':{'companyId':_0x3d6dc5['id'],'key':'tokenixc','value':''}}),await Setting_1[_0x4916cb(0x1ae)]['findOrCreate']({'where':{'companyId':_0x3d6dc5['id'],'key':'ipixc'},'defaults':{'companyId':_0x3d6dc5['id'],'key':'ipixc','value':''}}),await Setting_1['default'][_0x4916cb(0x1b0)]({'where':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1d7)},'defaults':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1d7),'value':''}}),await Setting_1[_0x4916cb(0x1ae)][_0x4916cb(0x1b0)]({'where':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1de)},'defaults':{'companyId':_0x3d6dc5['id'],'key':'clientsecretmkauth','value':''}}),await Setting_1[_0x4916cb(0x1ae)][_0x4916cb(0x1b0)]({'where':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1aa)},'defaults':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1aa),'value':''}}),await Setting_1[_0x4916cb(0x1ae)][_0x4916cb(0x1b0)]({'where':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1c6)},'defaults':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1b1),'value':''}}),await Setting_1[_0x4916cb(0x1ae)][_0x4916cb(0x1b0)]({'where':{'companyId':_0x3d6dc5['id'],'key':''},'defaults':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1b4),'value':'disabled'}}),await Setting_1[_0x4916cb(0x1ae)][_0x4916cb(0x1b0)]({'where':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1d3)},'defaults':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1d3),'value':_0x4916cb(0x1bb)}}),await Setting_1[_0x4916cb(0x1ae)][_0x4916cb(0x1b0)]({'where':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1ab)},'defaults':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1ab),'value':'disabled'}}),await Setting_1[_0x4916cb(0x1ae)][_0x4916cb(0x1b0)]({'where':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1cf)},'defaults':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1cf),'value':_0x4916cb(0x1bb)}}),await Setting_1['default'][_0x4916cb(0x1b0)]({'where':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1c1)},'defaults':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1c1),'value':_0x4916cb(0x1bb)}}),await Setting_1[_0x4916cb(0x1ae)]['findOrCreate']({'where':{'companyId':_0x3d6dc5['id'],'key':'chatBotType'},'defaults':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1d1),'value':'text'}}),await Setting_1['default'][_0x4916cb(0x1b0)]({'where':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1dd)},'defaults':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1dd),'value':''}}),await Setting_1[_0x4916cb(0x1ae)][_0x4916cb(0x1b0)]({'where':{'companyId':_0x3d6dc5['id'],'key':'ipsgp'},'defaults':{'companyId':_0x3d6dc5['id'],'key':'ipsgp','value':''}}),await Setting_1[_0x4916cb(0x1ae)][_0x4916cb(0x1b0)]({'where':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1bc)},'defaults':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1bc),'value':''}});if(_0x39c8ab[_0x4916cb(0x1b7)]!==undefined){const [_0x36aea7,_0x3aef58]=await Setting_1[_0x4916cb(0x1ae)][_0x4916cb(0x1b0)]({'where':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1b7)},'defaults':{'companyId':_0x3d6dc5['id'],'key':_0x4916cb(0x1b7),'value':''+_0x434387}});!_0x3aef58&&await _0x36aea7[_0x4916cb(0x1d6)]({'value':''+_0x434387});}return _0x3d6dc5;};exports['default']=CreateCompanyService;