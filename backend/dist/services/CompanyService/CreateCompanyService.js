'use strict';function a420_0x5f4d(_0x21b9cb,_0x374f78){const _0x5b1683=a420_0x1a33();return a420_0x5f4d=function(_0x566a03,_0x1e0753){_0x566a03=_0x566a03-0x94;let _0x1a334d=_0x5b1683[_0x566a03];return _0x1a334d;},a420_0x5f4d(_0x21b9cb,_0x374f78);}const a420_0x14e56d=a420_0x5f4d;(function(_0x59ecea,_0x1a9ba0){const _0x519724=a420_0x5f4d,_0xa5169b=_0x59ecea();while(!![]){try{const _0x366902=parseInt(_0x519724(0xb1))/0x1+parseInt(_0x519724(0x99))/0x2+-parseInt(_0x519724(0xc3))/0x3*(-parseInt(_0x519724(0x97))/0x4)+-parseInt(_0x519724(0x9e))/0x5+-parseInt(_0x519724(0xae))/0x6+parseInt(_0x519724(0xc2))/0x7*(-parseInt(_0x519724(0x9b))/0x8)+parseInt(_0x519724(0x98))/0x9*(-parseInt(_0x519724(0xc7))/0xa);if(_0x366902===_0x1a9ba0)break;else _0xa5169b['push'](_0xa5169b['shift']());}catch(_0x5a3e0b){_0xa5169b['push'](_0xa5169b['shift']());}}}(a420_0x1a33,0xa1891));var __createBinding=this&&this[a420_0x14e56d(0xa1)]||(Object[a420_0x14e56d(0xc9)]?function(_0x17e689,_0x4f6087,_0x317884,_0x31278f){const _0x404634=a420_0x14e56d;if(_0x31278f===undefined)_0x31278f=_0x317884;var _0x34ebd3=Object[_0x404634(0xc6)](_0x4f6087,_0x317884);(!_0x34ebd3||(_0x404634(0xb2)in _0x34ebd3?!_0x4f6087[_0x404634(0xb0)]:_0x34ebd3[_0x404634(0xa5)]||_0x34ebd3[_0x404634(0xac)]))&&(_0x34ebd3={'enumerable':!![],'get':function(){return _0x4f6087[_0x317884];}}),Object['defineProperty'](_0x17e689,_0x31278f,_0x34ebd3);}:function(_0x2a1472,_0x4506fd,_0x555a54,_0x1c0b5f){if(_0x1c0b5f===undefined)_0x1c0b5f=_0x555a54;_0x2a1472[_0x1c0b5f]=_0x4506fd[_0x555a54];}),__setModuleDefault=this&&this[a420_0x14e56d(0xbc)]||(Object[a420_0x14e56d(0xc9)]?function(_0x38372b,_0x313811){const _0x5cc94e=a420_0x14e56d;Object[_0x5cc94e(0xd0)](_0x38372b,_0x5cc94e(0xb3),{'enumerable':!![],'value':_0x313811});}:function(_0xda8f2f,_0x780454){const _0x4e54d6=a420_0x14e56d;_0xda8f2f[_0x4e54d6(0xb3)]=_0x780454;}),__importStar=this&&this[a420_0x14e56d(0xa7)]||(function(){const _0x6f7d03=(function(){let _0x5ca7b4=!![];return function(_0x1e8faf,_0x3ccd6e){const _0x14bbc4=_0x5ca7b4?function(){const _0x5886e4=a420_0x5f4d;if(_0x3ccd6e){const _0x5f23ad=_0x3ccd6e[_0x5886e4(0xba)](_0x1e8faf,arguments);return _0x3ccd6e=null,_0x5f23ad;}}:function(){};return _0x5ca7b4=![],_0x14bbc4;};}()),_0x258a89=_0x6f7d03(this,function(){const _0xf53035=a420_0x5f4d;return _0x258a89[_0xf53035(0xa0)]()[_0xf53035(0xaf)](_0xf53035(0x9f))['toString']()[_0xf53035(0x9d)](_0x258a89)[_0xf53035(0xaf)](_0xf53035(0x9f));});_0x258a89();var _0x9bd895=function(_0x55b9cd){return _0x9bd895=Object['getOwnPropertyNames']||function(_0x1dc4b5){const _0x5be302=a420_0x5f4d;var _0x11080f=[];for(var _0x298675 in _0x1dc4b5)if(Object[_0x5be302(0xaa)]['hasOwnProperty'][_0x5be302(0xa4)](_0x1dc4b5,_0x298675))_0x11080f[_0x11080f[_0x5be302(0xb4)]]=_0x298675;return _0x11080f;},_0x9bd895(_0x55b9cd);};return function(_0x119a58){const _0x307446=a420_0x5f4d;if(_0x119a58&&_0x119a58[_0x307446(0xb0)])return _0x119a58;var _0x552348={};if(_0x119a58!=null){for(var _0x5f4427=_0x9bd895(_0x119a58),_0x32010a=0x0;_0x32010a<_0x5f4427[_0x307446(0xb4)];_0x32010a++)if(_0x5f4427[_0x32010a]!==_0x307446(0xb3))__createBinding(_0x552348,_0x119a58,_0x5f4427[_0x32010a]);}return __setModuleDefault(_0x552348,_0x119a58),_0x552348;};}()),__importDefault=this&&this[a420_0x14e56d(0x95)]||function(_0x30496c){const _0xff19a0=a420_0x14e56d;return _0x30496c&&_0x30496c[_0xff19a0(0xb0)]?_0x30496c:{'default':_0x30496c};};Object[a420_0x14e56d(0xd0)](exports,a420_0x14e56d(0xb0),{'value':!![]});function a420_0x1a33(){const _0x2d5e3b=['versionWA','configurable','sendGreetingAccepted','1898724GFfbil','search','__esModule','1027785VWnosX','get','default','length','../../models/Company','sendMsgTransfTicket','message','update','string','apply','../../errors/AppError','__setModuleDefault','ERR_COMPANY_NAME_ALREADY_EXISTS','campaignsEnabled','enabled','min','mudar123','196763DlqVRk','24945JKIgub','../../models/Setting','chatBotType','getOwnPropertyDescriptor','1779790BaXujU','2.3000.1020713899','create','Check-unique-name','validate','scheduleType','disabled','findOrCreate','object','defineProperty','text','CheckMsgIsGroup','__importDefault','findOne','124yPUuNC','9MuoweK','2444658vsiyyU','../../models/User','40MsRUBP','yup','constructor','6056260MBdBDk','(((.+)+)+)+$','toString','__createBinding','test','required','call','writable','admin','__importStar','ERR_COMPANY_INVALID_NAME','shape','prototype'];a420_0x1a33=function(){return _0x2d5e3b;};return a420_0x1a33();}const Yup=__importStar(require(a420_0x14e56d(0x9c))),AppError_1=__importDefault(require(a420_0x14e56d(0xbb))),Company_1=__importDefault(require(a420_0x14e56d(0xb5))),User_1=__importDefault(require(a420_0x14e56d(0x9a))),Setting_1=__importDefault(require(a420_0x14e56d(0xc4))),CreateCompanyService=async _0xe6c279=>{const _0x175d4a=a420_0x14e56d,{name:_0x4d3414,phone:_0x39615e,email:_0x28cf02,status:_0x55e276,planId:_0x1f66ba,password:_0xf8f4cd,campaignsEnabled:_0x164218,dueDate:_0x1e7f43,recurrence:_0x3ad644}=_0xe6c279,_0x5dba2d=Yup[_0x175d4a(0xcf)]()[_0x175d4a(0xa9)]({'name':Yup[_0x175d4a(0xb9)]()[_0x175d4a(0xc0)](0x2,'ERR_COMPANY_INVALID_NAME')[_0x175d4a(0xa3)](_0x175d4a(0xa8))[_0x175d4a(0xa2)](_0x175d4a(0xca),_0x175d4a(0xbd),async _0x403b52=>{const _0x20efb6=_0x175d4a;if(_0x403b52){const _0x5114d4=await Company_1[_0x20efb6(0xb3)][_0x20efb6(0x96)]({'where':{'name':_0x403b52}});return!_0x5114d4;}return![];})});try{await _0x5dba2d[_0x175d4a(0xcb)]({'name':_0x4d3414});}catch(_0x434d4d){throw new AppError_1[(_0x175d4a(0xb3))](_0x434d4d[_0x175d4a(0xb7)]);}const _0x57152c=await Company_1[_0x175d4a(0xb3)][_0x175d4a(0xc9)]({'name':_0x4d3414,'phone':_0x39615e,'email':_0x28cf02,'status':_0x55e276,'planId':_0x1f66ba,'dueDate':_0x1e7f43,'recurrence':_0x3ad644}),[_0x3bfa2e,_0x2b2f3a]=await User_1[_0x175d4a(0xb3)]['findOrCreate']({'where':{'name':_0x4d3414,'email':_0x28cf02},'defaults':{'name':_0x4d3414,'email':_0x28cf02,'password':_0xf8f4cd||_0x175d4a(0xc1),'profile':_0x175d4a(0xa6),'companyId':_0x57152c['id']}});!_0x2b2f3a&&await _0x3bfa2e[_0x175d4a(0xb8)]({'companyId':_0x57152c['id']});await Setting_1[_0x175d4a(0xb3)][_0x175d4a(0xce)]({'where':{'companyId':_0x57152c['id'],'key':_0x175d4a(0x94)},'defaults':{'companyId':_0x57152c['id'],'key':_0x175d4a(0xbf),'value':''}}),await Setting_1[_0x175d4a(0xb3)][_0x175d4a(0xce)]({'where':{'companyId':_0x57152c['id'],'key':''},'defaults':{'companyId':_0x57152c['id'],'key':'call','value':'disabled'}}),await Setting_1[_0x175d4a(0xb3)][_0x175d4a(0xce)]({'where':{'companyId':_0x57152c['id'],'key':'scheduleType'},'defaults':{'companyId':_0x57152c['id'],'key':_0x175d4a(0xcc),'value':_0x175d4a(0xcd)}}),await Setting_1[_0x175d4a(0xb3)][_0x175d4a(0xce)]({'where':{'companyId':_0x57152c['id'],'key':'sendGreetingAccepted'},'defaults':{'companyId':_0x57152c['id'],'key':_0x175d4a(0xad),'value':_0x175d4a(0xcd)}}),await Setting_1[_0x175d4a(0xb3)]['findOrCreate']({'where':{'companyId':_0x57152c['id'],'key':'sendMsgTransfTicket'},'defaults':{'companyId':_0x57152c['id'],'key':_0x175d4a(0xb6),'value':_0x175d4a(0xcd)}}),await Setting_1[_0x175d4a(0xb3)][_0x175d4a(0xce)]({'where':{'companyId':_0x57152c['id'],'key':_0x175d4a(0xc5)},'defaults':{'companyId':_0x57152c['id'],'key':'chatBotType','value':_0x175d4a(0xd1)}}),await Setting_1[_0x175d4a(0xb3)]['findOrCreate']({'where':{'companyId':_0x57152c['id'],'key':_0x175d4a(0xab),'value':_0x175d4a(0xc8)}});if(_0xe6c279[_0x175d4a(0xbe)]!==undefined){const [_0x4eb77e,_0x359915]=await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x57152c['id'],'key':'campaignsEnabled'},'defaults':{'companyId':_0x57152c['id'],'key':'campaignsEnabled','value':''+_0x164218}});!_0x359915&&await _0x4eb77e[_0x175d4a(0xb8)]({'value':''+_0x164218});}return _0x57152c;};exports['default']=CreateCompanyService;