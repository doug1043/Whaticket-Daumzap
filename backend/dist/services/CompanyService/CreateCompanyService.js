'use strict';const a418_0x7dfc4e=a418_0xccdb;(function(_0x51ebf0,_0x23cfed){const _0x19cd7f=a418_0xccdb,_0xb6ab97=_0x51ebf0();while(!![]){try{const _0x5eff19=-parseInt(_0x19cd7f(0x191))/0x1+parseInt(_0x19cd7f(0x193))/0x2*(-parseInt(_0x19cd7f(0x186))/0x3)+parseInt(_0x19cd7f(0x1ac))/0x4+-parseInt(_0x19cd7f(0x17d))/0x5*(-parseInt(_0x19cd7f(0x19d))/0x6)+parseInt(_0x19cd7f(0x1a3))/0x7*(-parseInt(_0x19cd7f(0x1a8))/0x8)+-parseInt(_0x19cd7f(0x190))/0x9*(-parseInt(_0x19cd7f(0x1a2))/0xa)+parseInt(_0x19cd7f(0x197))/0xb;if(_0x5eff19===_0x23cfed)break;else _0xb6ab97['push'](_0xb6ab97['shift']());}catch(_0x210e9a){_0xb6ab97['push'](_0xb6ab97['shift']());}}}(a418_0x27fb,0x88c6c));var __createBinding=this&&this[a418_0x7dfc4e(0x1a9)]||(Object['create']?function(_0x1df741,_0x130deb,_0x30dc5a,_0x334560){const _0x2492a0=a418_0x7dfc4e;if(_0x334560===undefined)_0x334560=_0x30dc5a;var _0x38cf44=Object['getOwnPropertyDescriptor'](_0x130deb,_0x30dc5a);(!_0x38cf44||('get'in _0x38cf44?!_0x130deb[_0x2492a0(0x19c)]:_0x38cf44['writable']||_0x38cf44[_0x2492a0(0x181)]))&&(_0x38cf44={'enumerable':!![],'get':function(){return _0x130deb[_0x30dc5a];}}),Object[_0x2492a0(0x1a6)](_0x1df741,_0x334560,_0x38cf44);}:function(_0x178008,_0x50532d,_0x48fd08,_0x3d73fe){if(_0x3d73fe===undefined)_0x3d73fe=_0x48fd08;_0x178008[_0x3d73fe]=_0x50532d[_0x48fd08];}),__setModuleDefault=this&&this[a418_0x7dfc4e(0x17b)]||(Object[a418_0x7dfc4e(0x184)]?function(_0x3cffbd,_0x34516b){const _0x4706ff=a418_0x7dfc4e;Object[_0x4706ff(0x1a6)](_0x3cffbd,_0x4706ff(0x189),{'enumerable':!![],'value':_0x34516b});}:function(_0x57a230,_0x4ccb95){const _0x47cd13=a418_0x7dfc4e;_0x57a230[_0x47cd13(0x189)]=_0x4ccb95;}),__importStar=this&&this[a418_0x7dfc4e(0x17c)]||(function(){const _0x30b032=(function(){let _0x2539ab=!![];return function(_0x1bcfd1,_0x63ea9a){const _0x23e31f=_0x2539ab?function(){const _0x3eda33=a418_0xccdb;if(_0x63ea9a){const _0x421aac=_0x63ea9a[_0x3eda33(0x187)](_0x1bcfd1,arguments);return _0x63ea9a=null,_0x421aac;}}:function(){};return _0x2539ab=![],_0x23e31f;};}()),_0x518247=_0x30b032(this,function(){const _0x5e4e2f=a418_0xccdb;return _0x518247[_0x5e4e2f(0x188)]()[_0x5e4e2f(0x182)](_0x5e4e2f(0x17e))[_0x5e4e2f(0x188)]()['constructor'](_0x518247)['search']('(((.+)+)+)+$');});_0x518247();var _0x1823fa=function(_0x47a767){const _0x1c8824=a418_0xccdb;return _0x1823fa=Object[_0x1c8824(0x1a4)]||function(_0x28f531){const _0x5c923d=_0x1c8824;var _0x18fc14=[];for(var _0x4b5405 in _0x28f531)if(Object['prototype']['hasOwnProperty'][_0x5c923d(0x18d)](_0x28f531,_0x4b5405))_0x18fc14[_0x18fc14[_0x5c923d(0x194)]]=_0x4b5405;return _0x18fc14;},_0x1823fa(_0x47a767);};return function(_0x57329b){const _0x7c0c9a=a418_0xccdb;if(_0x57329b&&_0x57329b[_0x7c0c9a(0x19c)])return _0x57329b;var _0x33b712={};if(_0x57329b!=null){for(var _0x5d1d4e=_0x1823fa(_0x57329b),_0x27261c=0x0;_0x27261c<_0x5d1d4e[_0x7c0c9a(0x194)];_0x27261c++)if(_0x5d1d4e[_0x27261c]!==_0x7c0c9a(0x189))__createBinding(_0x33b712,_0x57329b,_0x5d1d4e[_0x27261c]);}return __setModuleDefault(_0x33b712,_0x57329b),_0x33b712;};}()),__importDefault=this&&this['__importDefault']||function(_0x166e8d){return _0x166e8d&&_0x166e8d['__esModule']?_0x166e8d:{'default':_0x166e8d};};Object[a418_0x7dfc4e(0x1a6)](exports,a418_0x7dfc4e(0x19c),{'value':!![]});function a418_0xccdb(_0x1b7252,_0x3ea12b){const _0x35841e=a418_0x27fb();return a418_0xccdb=function(_0x41e561,_0x2c43f8){_0x41e561=_0x41e561-0x179;let _0x27fb8e=_0x35841e[_0x41e561];return _0x27fb8e;},a418_0xccdb(_0x1b7252,_0x3ea12b);}const Yup=__importStar(require(a418_0x7dfc4e(0x18a))),AppError_1=__importDefault(require(a418_0x7dfc4e(0x1ab))),Company_1=__importDefault(require(a418_0x7dfc4e(0x198))),User_1=__importDefault(require(a418_0x7dfc4e(0x185))),Setting_1=__importDefault(require(a418_0x7dfc4e(0x1a5))),CreateCompanyService=async _0x4de900=>{const _0x10487f=a418_0x7dfc4e,{name:_0x5026f9,phone:_0x2a767b,email:_0x9652f3,status:_0x4aab4b,planId:_0x4792ca,password:_0x29f55e,campaignsEnabled:_0x1356c6,dueDate:_0x1a0eb2,recurrence:_0x4aaef1}=_0x4de900,_0xb30c81=Yup[_0x10487f(0x1a0)]()[_0x10487f(0x192)]({'name':Yup[_0x10487f(0x195)]()[_0x10487f(0x19a)](0x2,_0x10487f(0x1a1))[_0x10487f(0x17a)](_0x10487f(0x1a1))[_0x10487f(0x18c)](_0x10487f(0x1ad),_0x10487f(0x1aa),async _0x7a2686=>{const _0x4b1f68=_0x10487f;if(_0x7a2686){const _0x4d748a=await Company_1[_0x4b1f68(0x189)][_0x4b1f68(0x19f)]({'where':{'name':_0x7a2686}});return!_0x4d748a;}return![];})});try{await _0xb30c81['validate']({'name':_0x5026f9});}catch(_0x4c1105){throw new AppError_1[(_0x10487f(0x189))](_0x4c1105['message']);}const _0x241ade=await Company_1[_0x10487f(0x189)]['create']({'name':_0x5026f9,'phone':_0x2a767b,'email':_0x9652f3,'status':_0x4aab4b,'planId':_0x4792ca,'dueDate':_0x1a0eb2,'recurrence':_0x4aaef1}),[_0x33c874,_0x111ae1]=await User_1['default'][_0x10487f(0x19b)]({'where':{'name':_0x5026f9,'email':_0x9652f3},'defaults':{'name':_0x5026f9,'email':_0x9652f3,'password':_0x29f55e||_0x10487f(0x196),'profile':_0x10487f(0x19e),'companyId':_0x241ade['id']}});!_0x111ae1&&await _0x33c874['update']({'companyId':_0x241ade['id']});await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x241ade['id'],'key':_0x10487f(0x183)},'defaults':{'companyId':_0x241ade['id'],'key':_0x10487f(0x199),'value':''}}),await Setting_1[_0x10487f(0x189)][_0x10487f(0x19b)]({'where':{'companyId':_0x241ade['id'],'key':''},'defaults':{'companyId':_0x241ade['id'],'key':_0x10487f(0x18d),'value':_0x10487f(0x180)}}),await Setting_1[_0x10487f(0x189)][_0x10487f(0x19b)]({'where':{'companyId':_0x241ade['id'],'key':_0x10487f(0x17f)},'defaults':{'companyId':_0x241ade['id'],'key':'scheduleType','value':_0x10487f(0x180)}}),await Setting_1['default'][_0x10487f(0x19b)]({'where':{'companyId':_0x241ade['id'],'key':'sendGreetingAccepted'},'defaults':{'companyId':_0x241ade['id'],'key':_0x10487f(0x18f),'value':_0x10487f(0x180)}}),await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x241ade['id'],'key':'sendMsgTransfTicket'},'defaults':{'companyId':_0x241ade['id'],'key':'sendMsgTransfTicket','value':'disabled'}}),await Setting_1[_0x10487f(0x189)][_0x10487f(0x19b)]({'where':{'companyId':_0x241ade['id'],'key':'chatBotType'},'defaults':{'companyId':_0x241ade['id'],'key':'chatBotType','value':_0x10487f(0x179)}}),await Setting_1[_0x10487f(0x189)]['findOrCreate']({'where':{'companyId':_0x241ade['id'],'key':_0x10487f(0x18b),'value':_0x10487f(0x18e)}});if(_0x4de900[_0x10487f(0x1a7)]!==undefined){const [_0xb3c456,_0x470c7b]=await Setting_1[_0x10487f(0x189)][_0x10487f(0x19b)]({'where':{'companyId':_0x241ade['id'],'key':_0x10487f(0x1a7)},'defaults':{'companyId':_0x241ade['id'],'key':_0x10487f(0x1a7),'value':''+_0x1356c6}});!_0x470c7b&&await _0xb3c456['update']({'value':''+_0x1356c6});}return _0x241ade;};exports['default']=CreateCompanyService;function a418_0x27fb(){const _0x163785=['../../models/Company','enabled','min','findOrCreate','__esModule','522Pmircs','admin','findOne','object','ERR_COMPANY_INVALID_NAME','4615660diEKDR','5442703GCQDys','getOwnPropertyNames','../../models/Setting','defineProperty','campaignsEnabled','8AjVMDp','__createBinding','ERR_COMPANY_NAME_ALREADY_EXISTS','../../errors/AppError','699880WhblJy','Check-unique-name','text','required','__setModuleDefault','__importStar','48575BhGaDJ','(((.+)+)+)+$','scheduleType','disabled','configurable','search','CheckMsgIsGroup','create','../../models/User','174RBkepH','apply','toString','default','yup','versionWA','test','call','2.3000.1020713899','sendGreetingAccepted','9SITLzD','211244EmhyQa','shape','710wjswGR','length','string','mudar123','966438Otnpym'];a418_0x27fb=function(){return _0x163785;};return a418_0x27fb();}