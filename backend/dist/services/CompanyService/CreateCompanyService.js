const a387_0x31d6c9=a387_0xe200;function a387_0xe200(_0x519e7e,_0x57d4fc){const _0x1cbe80=a387_0x4fd3();return a387_0xe200=function(_0x14ec84,_0x24a3e5){_0x14ec84=_0x14ec84-0x1f3;let _0x4fd3b2=_0x1cbe80[_0x14ec84];return _0x4fd3b2;},a387_0xe200(_0x519e7e,_0x57d4fc);}(function(_0x2805dd,_0x2fa13e){const _0x27da40=a387_0xe200,_0xe9c64c=_0x2805dd();while(!![]){try{const _0x585462=parseInt(_0x27da40(0x20d))/0x1+parseInt(_0x27da40(0x206))/0x2+parseInt(_0x27da40(0x204))/0x3+-parseInt(_0x27da40(0x20c))/0x4*(parseInt(_0x27da40(0x1fa))/0x5)+parseInt(_0x27da40(0x212))/0x6*(parseInt(_0x27da40(0x1fe))/0x7)+parseInt(_0x27da40(0x21d))/0x8*(-parseInt(_0x27da40(0x21b))/0x9)+-parseInt(_0x27da40(0x1ff))/0xa;if(_0x585462===_0x2fa13e)break;else _0xe9c64c['push'](_0xe9c64c['shift']());}catch(_0x494448){_0xe9c64c['push'](_0xe9c64c['shift']());}}}(a387_0x4fd3,0x82892));const a387_0x24a3e5=(function(){let _0x5085af=!![];return function(_0x127fd5,_0x5f064a){const _0x3d0fc5=_0x5085af?function(){const _0xe1de9d=a387_0xe200;if(_0x5f064a){const _0xdd92f7=_0x5f064a[_0xe1de9d(0x208)](_0x127fd5,arguments);return _0x5f064a=null,_0xdd92f7;}}:function(){};return _0x5085af=![],_0x3d0fc5;};}()),a387_0x14ec84=a387_0x24a3e5(this,function(){const _0x48ce2c=a387_0xe200;return a387_0x14ec84[_0x48ce2c(0x213)]()[_0x48ce2c(0x215)]('(((.+)+)+)+$')['toString']()[_0x48ce2c(0x1f8)](a387_0x14ec84)[_0x48ce2c(0x215)](_0x48ce2c(0x1f3));});a387_0x14ec84();'use strict';var __createBinding=this&&this[a387_0x31d6c9(0x20e)]||(Object['create']?function(_0x4615b7,_0x16684a,_0x314a9d,_0x4c6953){const _0xd565e4=a387_0x31d6c9;if(_0x4c6953===undefined)_0x4c6953=_0x314a9d;var _0x5dddd8=Object[_0xd565e4(0x200)](_0x16684a,_0x314a9d);(!_0x5dddd8||('get'in _0x5dddd8?!_0x16684a['__esModule']:_0x5dddd8[_0xd565e4(0x1f4)]||_0x5dddd8[_0xd565e4(0x220)]))&&(_0x5dddd8={'enumerable':!![],'get':function(){return _0x16684a[_0x314a9d];}}),Object[_0xd565e4(0x219)](_0x4615b7,_0x4c6953,_0x5dddd8);}:function(_0x5248b5,_0x1fca12,_0x4f649f,_0x2acb49){if(_0x2acb49===undefined)_0x2acb49=_0x4f649f;_0x5248b5[_0x2acb49]=_0x1fca12[_0x4f649f];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x2dc6cf,_0x3d0137){const _0x399b3c=a387_0x31d6c9;Object[_0x399b3c(0x219)](_0x2dc6cf,_0x399b3c(0x1fd),{'enumerable':!![],'value':_0x3d0137});}:function(_0x40f253,_0xaacdfb){_0x40f253['default']=_0xaacdfb;}),__importStar=this&&this['__importStar']||function(_0x3bc7a8){const _0x576cc7=a387_0x31d6c9;if(_0x3bc7a8&&_0x3bc7a8['__esModule'])return _0x3bc7a8;var _0x27afb9={};if(_0x3bc7a8!=null){for(var _0x38c9da in _0x3bc7a8)if(_0x38c9da!==_0x576cc7(0x1fd)&&Object[_0x576cc7(0x224)]['hasOwnProperty']['call'](_0x3bc7a8,_0x38c9da))__createBinding(_0x27afb9,_0x3bc7a8,_0x38c9da);}return __setModuleDefault(_0x27afb9,_0x3bc7a8),_0x27afb9;},__importDefault=this&&this[a387_0x31d6c9(0x20f)]||function(_0x117b73){const _0xa1250d=a387_0x31d6c9;return _0x117b73&&_0x117b73[_0xa1250d(0x1f6)]?_0x117b73:{'default':_0x117b73};};Object[a387_0x31d6c9(0x219)](exports,a387_0x31d6c9(0x1f6),{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require('../../errors/AppError')),Company_1=__importDefault(require('../../models/Company')),User_1=__importDefault(require(a387_0x31d6c9(0x214))),Setting_1=__importDefault(require(a387_0x31d6c9(0x207))),CreateCompanyService=async _0x2b9ccc=>{const _0x467a75=a387_0x31d6c9,{name:_0x423a0f,phone:_0x260535,email:_0x5ea9ef,status:_0x1161ab,planId:_0x1c6fc0,password:_0x5b18de,campaignsEnabled:_0x56f295,dueDate:_0xa007ce,recurrence:_0x3db557}=_0x2b9ccc,_0x562238=Yup['object']()['shape']({'name':Yup[_0x467a75(0x209)]()['min'](0x2,'ERR_COMPANY_INVALID_NAME')[_0x467a75(0x21f)]('ERR_COMPANY_INVALID_NAME')[_0x467a75(0x21e)](_0x467a75(0x21c),'ERR_COMPANY_NAME_ALREADY_EXISTS',async _0xe4b494=>{const _0x289882=_0x467a75;if(_0xe4b494){const _0x3bebb9=await Company_1[_0x289882(0x1fd)][_0x289882(0x1f5)]({'where':{'name':_0xe4b494}});return!_0x3bebb9;}return![];})});try{await _0x562238[_0x467a75(0x1f7)]({'name':_0x423a0f});}catch(_0x11e853){throw new AppError_1[(_0x467a75(0x1fd))](_0x11e853['message']);}const _0x172ba4=await Company_1[_0x467a75(0x1fd)]['create']({'name':_0x423a0f,'phone':_0x260535,'email':_0x5ea9ef,'status':_0x1161ab,'planId':_0x1c6fc0,'dueDate':_0xa007ce,'recurrence':_0x3db557}),_0x607124=await User_1[_0x467a75(0x1fd)][_0x467a75(0x227)]({'name':_0x172ba4[_0x467a75(0x1fb)],'email':_0x172ba4[_0x467a75(0x211)],'password':_0x2b9ccc['password']||_0x467a75(0x226),'profile':'admin','companyId':_0x172ba4['id']});await Setting_1['default'][_0x467a75(0x20b)]({'where':{'companyId':_0x172ba4['id'],'key':'asaas'},'defaults':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x216),'value':''}}),await Setting_1['default'][_0x467a75(0x20b)]({'where':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x20a)},'defaults':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x20a),'value':''}}),await Setting_1[_0x467a75(0x1fd)]['findOrCreate']({'where':{'companyId':_0x172ba4['id'],'key':'ipixc'},'defaults':{'companyId':_0x172ba4['id'],'key':'ipixc','value':''}}),await Setting_1[_0x467a75(0x1fd)][_0x467a75(0x20b)]({'where':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x202)},'defaults':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x202),'value':''}}),await Setting_1[_0x467a75(0x1fd)][_0x467a75(0x20b)]({'where':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x210)},'defaults':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x210),'value':''}}),await Setting_1[_0x467a75(0x1fd)][_0x467a75(0x20b)]({'where':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x203)},'defaults':{'companyId':_0x172ba4['id'],'key':'clientidmkauth','value':''}}),await Setting_1[_0x467a75(0x1fd)][_0x467a75(0x20b)]({'where':{'companyId':_0x172ba4['id'],'key':'CheckMsgIsGroup'},'defaults':{'companyId':_0x172ba4['id'],'key':'enabled','value':''}}),await Setting_1[_0x467a75(0x1fd)][_0x467a75(0x20b)]({'where':{'companyId':_0x172ba4['id'],'key':''},'defaults':{'companyId':_0x172ba4['id'],'key':'call','value':_0x467a75(0x217)}}),await Setting_1['default'][_0x467a75(0x20b)]({'where':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x205)},'defaults':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x205),'value':_0x467a75(0x217)}}),await Setting_1[_0x467a75(0x1fd)][_0x467a75(0x20b)]({'where':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x225)},'defaults':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x225),'value':'disabled'}}),await Setting_1[_0x467a75(0x1fd)][_0x467a75(0x20b)]({'where':{'companyId':_0x172ba4['id'],'key':'sendMsgTransfTicket'},'defaults':{'companyId':_0x172ba4['id'],'key':'sendMsgTransfTicket','value':_0x467a75(0x217)}}),await Setting_1['default'][_0x467a75(0x20b)]({'where':{'companyId':_0x172ba4['id'],'key':'userRating'},'defaults':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x21a),'value':_0x467a75(0x217)}}),await Setting_1[_0x467a75(0x1fd)][_0x467a75(0x20b)]({'where':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x201)},'defaults':{'companyId':_0x172ba4['id'],'key':'chatBotType','value':_0x467a75(0x221)}}),await Setting_1[_0x467a75(0x1fd)]['findOrCreate']({'where':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x218)},'defaults':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x218),'value':''}}),await Setting_1[_0x467a75(0x1fd)]['findOrCreate']({'where':{'companyId':_0x172ba4['id'],'key':'ipsgp'},'defaults':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x1f9),'value':''}}),await Setting_1[_0x467a75(0x1fd)]['findOrCreate']({'where':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x1fc)},'defaults':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x1fc),'value':''}});if(_0x2b9ccc[_0x467a75(0x222)]!==undefined){const [_0x29d5ba,_0x30f4e8]=await Setting_1[_0x467a75(0x1fd)][_0x467a75(0x20b)]({'where':{'companyId':_0x172ba4['id'],'key':'campaignsEnabled'},'defaults':{'companyId':_0x172ba4['id'],'key':_0x467a75(0x222),'value':''+_0x56f295}});!_0x30f4e8&&await _0x29d5ba[_0x467a75(0x223)]({'value':''+_0x56f295});}return _0x172ba4;};function a387_0x4fd3(){const _0x402b76=['../../models/Setting','apply','string','tokenixc','findOrCreate','12nqcKGO','872226MiRNFr','__createBinding','__importDefault','clientsecretmkauth','email','5579292maIZsd','toString','../../models/User','search','asaas','disabled','tokensgp','defineProperty','userRating','1222974PUqGHp','Check-unique-name','24BsMGMs','test','required','configurable','text','campaignsEnabled','update','prototype','sendGreetingAccepted','mudar@123','create','(((.+)+)+)+$','writable','findOne','__esModule','validate','constructor','ipsgp','1033415XCwYKw','name','appsgp','default','7cUglZM','4553000UhkJBu','getOwnPropertyDescriptor','chatBotType','ipmkauth','clientidmkauth','462366vDezkD','scheduleType','122902ELGGTK'];a387_0x4fd3=function(){return _0x402b76;};return a387_0x4fd3();}exports[a387_0x31d6c9(0x1fd)]=CreateCompanyService;