'use strict';const a423_0x473f1d=a423_0x591c;(function(_0x3b9ef9,_0x3360f8){const _0x1a00d9=a423_0x591c,_0x2420ce=_0x3b9ef9();while(!![]){try{const _0x4c48e1=parseInt(_0x1a00d9(0x1a7))/0x1+-parseInt(_0x1a00d9(0x19f))/0x2+-parseInt(_0x1a00d9(0x172))/0x3*(parseInt(_0x1a00d9(0x1a5))/0x4)+-parseInt(_0x1a00d9(0x188))/0x5*(parseInt(_0x1a00d9(0x184))/0x6)+-parseInt(_0x1a00d9(0x19b))/0x7*(-parseInt(_0x1a00d9(0x183))/0x8)+-parseInt(_0x1a00d9(0x17e))/0x9+parseInt(_0x1a00d9(0x18d))/0xa*(parseInt(_0x1a00d9(0x173))/0xb);if(_0x4c48e1===_0x3360f8)break;else _0x2420ce['push'](_0x2420ce['shift']());}catch(_0x5242b3){_0x2420ce['push'](_0x2420ce['shift']());}}}(a423_0x4909,0x72ca7));function a423_0x4909(){const _0x5f180f=['getOwnPropertyNames','versionWA','toString','call','sendGreetingAccepted','min','default','length','../../errors/AppError','disabled','__createBinding','39067xtRnpJ','__setModuleDefault','writable','prototype','931302tXFRHj','scheduleType','__esModule','validate','__importDefault','create','4onkbWI','getOwnPropertyDescriptor','773447NVqWBE','findOne','2408217mubmwj','341uuddoa','2.3000.1020713899','admin','findOrCreate','configurable','campaignsEnabled','../../models/Setting','defineProperty','test','message','chatBotType','2247201fbXbkc','sendMsgTransfTicket','string','hasOwnProperty','../../models/User','1096AuQiuc','249378mdFUdB','CheckMsgIsGroup','__importStar','../../models/Company','100YfXHpH','search','ERR_COMPANY_INVALID_NAME','required','Check-unique-name','413380rQSIki','yup','enabled'];a423_0x4909=function(){return _0x5f180f;};return a423_0x4909();}var __createBinding=this&&this[a423_0x473f1d(0x19a)]||(Object[a423_0x473f1d(0x1a4)]?function(_0x5264fd,_0x43a99e,_0x5abaca,_0xa37307){const _0x59dcdd=a423_0x473f1d;if(_0xa37307===undefined)_0xa37307=_0x5abaca;var _0x4cfc2a=Object[_0x59dcdd(0x1a6)](_0x43a99e,_0x5abaca);(!_0x4cfc2a||('get'in _0x4cfc2a?!_0x43a99e['__esModule']:_0x4cfc2a[_0x59dcdd(0x19d)]||_0x4cfc2a[_0x59dcdd(0x177)]))&&(_0x4cfc2a={'enumerable':!![],'get':function(){return _0x43a99e[_0x5abaca];}}),Object[_0x59dcdd(0x17a)](_0x5264fd,_0xa37307,_0x4cfc2a);}:function(_0x583592,_0x1c45d7,_0x168c9a,_0x1bd0ad){if(_0x1bd0ad===undefined)_0x1bd0ad=_0x168c9a;_0x583592[_0x1bd0ad]=_0x1c45d7[_0x168c9a];}),__setModuleDefault=this&&this[a423_0x473f1d(0x19c)]||(Object[a423_0x473f1d(0x1a4)]?function(_0x3869e4,_0x4f588b){const _0x3e12ca=a423_0x473f1d;Object[_0x3e12ca(0x17a)](_0x3869e4,_0x3e12ca(0x196),{'enumerable':!![],'value':_0x4f588b});}:function(_0xc8c574,_0x110e27){_0xc8c574['default']=_0x110e27;}),__importStar=this&&this[a423_0x473f1d(0x186)]||(function(){const _0x289fe7=(function(){let _0x22ec21=!![];return function(_0x330665,_0x1114f0){const _0x25009d=_0x22ec21?function(){if(_0x1114f0){const _0x3cfdaf=_0x1114f0['apply'](_0x330665,arguments);return _0x1114f0=null,_0x3cfdaf;}}:function(){};return _0x22ec21=![],_0x25009d;};}()),_0x2ccbf5=_0x289fe7(this,function(){const _0x29f32f=a423_0x591c;return _0x2ccbf5[_0x29f32f(0x192)]()[_0x29f32f(0x189)]('(((.+)+)+)+$')[_0x29f32f(0x192)]()['constructor'](_0x2ccbf5)['search']('(((.+)+)+)+$');});_0x2ccbf5();var _0x1f9483=function(_0x15fe7f){const _0x1dd67d=a423_0x591c;return _0x1f9483=Object[_0x1dd67d(0x190)]||function(_0x2f877c){const _0x39d270=_0x1dd67d;var _0x146120=[];for(var _0x8fefac in _0x2f877c)if(Object[_0x39d270(0x19e)][_0x39d270(0x181)][_0x39d270(0x193)](_0x2f877c,_0x8fefac))_0x146120[_0x146120['length']]=_0x8fefac;return _0x146120;},_0x1f9483(_0x15fe7f);};return function(_0x31bb60){const _0x4a72aa=a423_0x591c;if(_0x31bb60&&_0x31bb60[_0x4a72aa(0x1a1)])return _0x31bb60;var _0x137bb4={};if(_0x31bb60!=null){for(var _0x41ce5f=_0x1f9483(_0x31bb60),_0x276559=0x0;_0x276559<_0x41ce5f[_0x4a72aa(0x197)];_0x276559++)if(_0x41ce5f[_0x276559]!==_0x4a72aa(0x196))__createBinding(_0x137bb4,_0x31bb60,_0x41ce5f[_0x276559]);}return __setModuleDefault(_0x137bb4,_0x31bb60),_0x137bb4;};}()),__importDefault=this&&this[a423_0x473f1d(0x1a3)]||function(_0x408b32){const _0x23233b=a423_0x473f1d;return _0x408b32&&_0x408b32[_0x23233b(0x1a1)]?_0x408b32:{'default':_0x408b32};};Object[a423_0x473f1d(0x17a)](exports,a423_0x473f1d(0x1a1),{'value':!![]});const Yup=__importStar(require(a423_0x473f1d(0x18e))),AppError_1=__importDefault(require(a423_0x473f1d(0x198))),Company_1=__importDefault(require(a423_0x473f1d(0x187))),User_1=__importDefault(require(a423_0x473f1d(0x182))),Setting_1=__importDefault(require(a423_0x473f1d(0x179))),CreateCompanyService=async _0x2ad7a3=>{const _0x59ebd8=a423_0x473f1d,{name:_0x54e8ae,phone:_0x2fb30f,email:_0x277924,status:_0x137940,planId:_0x110fb8,password:_0x3b3da0,campaignsEnabled:_0x2ffd6f,dueDate:_0x4ca128,recurrence:_0x4c4ecf}=_0x2ad7a3,_0xdbb5b6=Yup['object']()['shape']({'name':Yup[_0x59ebd8(0x180)]()[_0x59ebd8(0x195)](0x2,_0x59ebd8(0x18a))[_0x59ebd8(0x18b)](_0x59ebd8(0x18a))[_0x59ebd8(0x17b)](_0x59ebd8(0x18c),'ERR_COMPANY_NAME_ALREADY_EXISTS',async _0x35169d=>{const _0x51f1fa=_0x59ebd8;if(_0x35169d){const _0x4c83ac=await Company_1[_0x51f1fa(0x196)][_0x51f1fa(0x1a8)]({'where':{'name':_0x35169d}});return!_0x4c83ac;}return![];})});try{await _0xdbb5b6[_0x59ebd8(0x1a2)]({'name':_0x54e8ae});}catch(_0x35a93e){throw new AppError_1[(_0x59ebd8(0x196))](_0x35a93e[_0x59ebd8(0x17c)]);}const _0x37f9d1=await Company_1['default'][_0x59ebd8(0x1a4)]({'name':_0x54e8ae,'phone':_0x2fb30f,'email':_0x277924,'status':_0x137940,'planId':_0x110fb8,'dueDate':_0x4ca128,'recurrence':_0x4c4ecf}),[_0x30f336,_0x3b89f0]=await User_1[_0x59ebd8(0x196)][_0x59ebd8(0x176)]({'where':{'name':_0x54e8ae,'email':_0x277924},'defaults':{'name':_0x54e8ae,'email':_0x277924,'password':_0x3b3da0||'mudar123','profile':_0x59ebd8(0x175),'companyId':_0x37f9d1['id']}});!_0x3b89f0&&await _0x30f336['update']({'companyId':_0x37f9d1['id']});await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x37f9d1['id'],'key':_0x59ebd8(0x185)},'defaults':{'companyId':_0x37f9d1['id'],'key':_0x59ebd8(0x18f),'value':''}}),await Setting_1[_0x59ebd8(0x196)][_0x59ebd8(0x176)]({'where':{'companyId':_0x37f9d1['id'],'key':''},'defaults':{'companyId':_0x37f9d1['id'],'key':'call','value':_0x59ebd8(0x199)}}),await Setting_1['default'][_0x59ebd8(0x176)]({'where':{'companyId':_0x37f9d1['id'],'key':_0x59ebd8(0x1a0)},'defaults':{'companyId':_0x37f9d1['id'],'key':_0x59ebd8(0x1a0),'value':_0x59ebd8(0x199)}}),await Setting_1['default'][_0x59ebd8(0x176)]({'where':{'companyId':_0x37f9d1['id'],'key':'sendGreetingAccepted'},'defaults':{'companyId':_0x37f9d1['id'],'key':_0x59ebd8(0x194),'value':_0x59ebd8(0x199)}}),await Setting_1['default'][_0x59ebd8(0x176)]({'where':{'companyId':_0x37f9d1['id'],'key':'sendMsgTransfTicket'},'defaults':{'companyId':_0x37f9d1['id'],'key':_0x59ebd8(0x17f),'value':_0x59ebd8(0x199)}}),await Setting_1[_0x59ebd8(0x196)][_0x59ebd8(0x176)]({'where':{'companyId':_0x37f9d1['id'],'key':_0x59ebd8(0x17d)},'defaults':{'companyId':_0x37f9d1['id'],'key':_0x59ebd8(0x17d),'value':'text'}}),await Setting_1[_0x59ebd8(0x196)][_0x59ebd8(0x176)]({'where':{'companyId':_0x37f9d1['id'],'key':_0x59ebd8(0x191),'value':_0x59ebd8(0x174)}});if(_0x2ad7a3[_0x59ebd8(0x178)]!==undefined){const [_0x3eb217,_0x4c9a80]=await Setting_1['default'][_0x59ebd8(0x176)]({'where':{'companyId':_0x37f9d1['id'],'key':_0x59ebd8(0x178)},'defaults':{'companyId':_0x37f9d1['id'],'key':_0x59ebd8(0x178),'value':''+_0x2ffd6f}});!_0x4c9a80&&await _0x3eb217['update']({'value':''+_0x2ffd6f});}return _0x37f9d1;};function a423_0x591c(_0x54ca73,_0x507868){const _0x11f1d3=a423_0x4909();return a423_0x591c=function(_0x31c17f,_0x56e686){_0x31c17f=_0x31c17f-0x172;let _0x490982=_0x11f1d3[_0x31c17f];return _0x490982;},a423_0x591c(_0x54ca73,_0x507868);}exports['default']=CreateCompanyService;