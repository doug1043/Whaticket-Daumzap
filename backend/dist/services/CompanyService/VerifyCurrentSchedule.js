const a429_0x27f209=a429_0x4aab;(function(_0x9bdd42,_0x1c3d6f){const _0x3acf50=a429_0x4aab,_0x4c6630=_0x9bdd42();while(!![]){try{const _0x18a6e6=-parseInt(_0x3acf50(0x136))/0x1+parseInt(_0x3acf50(0x131))/0x2+-parseInt(_0x3acf50(0x128))/0x3+parseInt(_0x3acf50(0x12e))/0x4*(parseInt(_0x3acf50(0x142))/0x5)+-parseInt(_0x3acf50(0x13d))/0x6+-parseInt(_0x3acf50(0x12f))/0x7*(-parseInt(_0x3acf50(0x134))/0x8)+parseInt(_0x3acf50(0x12d))/0x9*(parseInt(_0x3acf50(0x127))/0xa);if(_0x18a6e6===_0x1c3d6f)break;else _0x4c6630['push'](_0x4c6630['shift']());}catch(_0x3140f1){_0x4c6630['push'](_0x4c6630['shift']());}}}(a429_0x5227,0x72997));const a429_0x61ac4a=(function(){let _0x3c0fd5=!![];return function(_0x47dc25,_0x593c9f){const _0x4cb2c9=_0x3c0fd5?function(){if(_0x593c9f){const _0x8f3930=_0x593c9f['apply'](_0x47dc25,arguments);return _0x593c9f=null,_0x8f3930;}}:function(){};return _0x3c0fd5=![],_0x4cb2c9;};}()),a429_0x1eb1df=a429_0x61ac4a(this,function(){const _0x420c24=a429_0x4aab;return a429_0x1eb1df['toString']()[_0x420c24(0x133)]('(((.+)+)+)+$')[_0x420c24(0x135)]()['constructor'](a429_0x1eb1df)[_0x420c24(0x133)](_0x420c24(0x130));});a429_0x1eb1df();'use strict';function a429_0x5227(){const _0x501e25=['261534ycUxiM','__esModule','QueryTypes','endtime','inActivity','4365zIQPVx','7247010QbWEXj','2725161nkmmrt','Erro\x20na\x20verificação\x20de\x20horário:','__importDefault','\x0a\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20endlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20(NOT\x20inactivity)\x20AS\x20\x22inActivity\x22\x0a\x20\x20\x20\x20\x20\x20FROM\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20endlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CASE\x20WHEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--\x20Se\x20fora\x20do\x20horário\x20de\x20trabalho\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20<\x20to_timestamp(starttime,\x20\x27HH24MI\x27)::time\x20OR\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20>\x20to_timestamp(endtime,\x20\x27HH24MI\x27)::time\x20OR\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--\x20Ou\x20se\x20estiver\x20no\x20horário\x20de\x20almoço\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(startlunchtime\x20!=\x20\x27\x27\x20AND\x20endlunchtime\x20!=\x20\x27\x27\x20AND\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20>=\x20to_timestamp(startlunchtime,\x20\x27HH24MI\x27)::time\x20AND\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20<=\x20to_timestamp(endlunchtime,\x20\x27HH24MI\x27)::time)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20THEN\x20true\x20ELSE\x20false\x20END\x20AS\x20inactivity\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20(','query','9XReSyU','924hDtEoX','58184GLjPZL','(((.+)+)+)+$','1525354geYXJb','../../database','search','112nwFimu','toString','384034IZZtXm','currentschedule','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20c.id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20TRIM(to_char(current_date,\x20\x27day\x27))\x20as\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s\x20as\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startTime\x27\x20as\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endTime\x27\x20as\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startLunchTime\x27\x20as\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endLunchTime\x27\x20as\x20endlunchtime\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22Companies\x22\x20c,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jsonb_array_elements(c.schedules)\x20s\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LOWER(s->>\x27weekdayEn\x27)\x20=\x20LOWER(TRIM(to_char(current_date,\x20\x27day\x27)))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20c.id\x20=\x20:companyId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20s->>\x27active\x27\x20=\x20\x27true\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20','sequelize','log','defineProperty',')\x20as\x20inner_query)\x20as\x20outer_query'];a429_0x5227=function(){return _0x501e25;};return a429_0x5227();}var __importDefault=this&&this[a429_0x27f209(0x12a)]||function(_0x263660){return _0x263660&&_0x263660['__esModule']?_0x263660:{'default':_0x263660};};function a429_0x4aab(_0xb12521,_0x21fcac){const _0x3cfd07=a429_0x5227();return a429_0x4aab=function(_0x1eb1df,_0x61ac4a){_0x1eb1df=_0x1eb1df-0x127;let _0x5227a9=_0x3cfd07[_0x1eb1df];return _0x5227a9;},a429_0x4aab(_0xb12521,_0x21fcac);}Object[a429_0x27f209(0x13b)](exports,a429_0x27f209(0x13e),{'value':!![]});const sequelize_1=require(a429_0x27f209(0x139)),database_1=__importDefault(require(a429_0x27f209(0x132))),VerifyCurrentSchedule=async(_0xedbab2,_0x8459bc)=>{const _0x41f59c=a429_0x27f209;try{const _0x38d5c4=_0x41f59c(0x12b);let _0x43b7f5;_0x8459bc===null||_0x8459bc===undefined?_0x43b7f5=_0x41f59c(0x138):_0x43b7f5='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20q.id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20TRIM(to_char(current_date,\x20\x27day\x27))\x20as\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s\x20as\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startTime\x27\x20as\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endTime\x27\x20as\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startLunchTime\x27\x20as\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endLunchTime\x27\x20as\x20endlunchtime\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22Queues\x22\x20q,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jsonb_array_elements(q.schedules)\x20s\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LOWER(s->>\x27weekdayEn\x27)\x20=\x20LOWER(TRIM(to_char(current_date,\x20\x27day\x27)))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20q.id\x20=\x20:queueId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20q.\x22companyId\x22\x20=\x20:companyId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20s->>\x27active\x27\x20=\x20\x27true\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20';const _0x11dde4=_0x41f59c(0x13c),_0x18b0dc=_0x38d5c4+_0x43b7f5+_0x11dde4,_0x19140d=await database_1['default'][_0x41f59c(0x12c)](_0x18b0dc,{'replacements':_0x8459bc?{'companyId':_0xedbab2,'queueId':_0x8459bc}:{'companyId':_0xedbab2},'type':sequelize_1[_0x41f59c(0x13f)]['SELECT'],'plain':!![]});if(!_0x19140d)return console[_0x41f59c(0x13a)]('Nenhuma\x20configuração\x20encontrada\x20para\x20o\x20dia\x20atual'),{'id':Number(_0x8459bc||_0xedbab2),'currentSchedule':[],'startTime':'','endTime':'','inActivity':![]};return{'id':_0x19140d['id'],'currentSchedule':_0x19140d[_0x41f59c(0x137)],'startTime':_0x19140d['starttime'],'endTime':_0x19140d[_0x41f59c(0x140)],'inActivity':_0x19140d[_0x41f59c(0x141)]};}catch(_0x469e93){return console['error'](_0x41f59c(0x129),_0x469e93),{'id':Number(_0x8459bc||_0xedbab2),'currentSchedule':[],'startTime':'','endTime':'','inActivity':![]};}};exports['default']=VerifyCurrentSchedule;