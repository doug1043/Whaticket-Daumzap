const a433_0x4abb0a=a433_0x3f7b;function a433_0x237f(){const _0x3379d3=['sequelize','Erro\x20na\x20verificação\x20de\x20horário:','1864420XYDUSp',')\x20as\x20inner_query)\x20as\x20outer_query','log','search','7Whkcjb','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20q.id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20TRIM(to_char(current_date,\x20\x27day\x27))\x20as\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s\x20as\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startTime\x27\x20as\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endTime\x27\x20as\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startLunchTime\x27\x20as\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endLunchTime\x27\x20as\x20endlunchtime\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22Queues\x22\x20q,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jsonb_array_elements(q.schedules)\x20s\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LOWER(s->>\x27weekdayEn\x27)\x20=\x20LOWER(TRIM(to_char(current_date,\x20\x27day\x27)))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20q.id\x20=\x20:queueId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20q.\x22companyId\x22\x20=\x20:companyId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20s->>\x27active\x27\x20=\x20\x27true\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20','apply','inActivity','QueryTypes','2409580RlnEWT','1166592gSieli','(((.+)+)+)+$','__esModule','currentschedule','defineProperty','108zdEfVl','default','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20c.id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20TRIM(to_char(current_date,\x20\x27day\x27))\x20as\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s\x20as\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startTime\x27\x20as\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endTime\x27\x20as\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startLunchTime\x27\x20as\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endLunchTime\x27\x20as\x20endlunchtime\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22Companies\x22\x20c,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jsonb_array_elements(c.schedules)\x20s\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LOWER(s->>\x27weekdayEn\x27)\x20=\x20LOWER(TRIM(to_char(current_date,\x20\x27day\x27)))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20c.id\x20=\x20:companyId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20s->>\x27active\x27\x20=\x20\x27true\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20','SELECT','query','1172712ZXoMiR','6275622SyZEgg','2121608nTQfRN','endtime','1964212wQHYGJ','constructor','__importDefault','\x0a\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20endlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20(NOT\x20inactivity)\x20AS\x20\x22inActivity\x22\x0a\x20\x20\x20\x20\x20\x20FROM\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20endlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CASE\x20WHEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--\x20Se\x20fora\x20do\x20horário\x20de\x20trabalho\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20<\x20to_timestamp(starttime,\x20\x27HH24MI\x27)::time\x20OR\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20>\x20to_timestamp(endtime,\x20\x27HH24MI\x27)::time\x20OR\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--\x20Ou\x20se\x20estiver\x20no\x20horário\x20de\x20almoço\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(startlunchtime\x20!=\x20\x27\x27\x20AND\x20endlunchtime\x20!=\x20\x27\x27\x20AND\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20>=\x20to_timestamp(startlunchtime,\x20\x27HH24MI\x27)::time\x20AND\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20<=\x20to_timestamp(endlunchtime,\x20\x27HH24MI\x27)::time)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20THEN\x20true\x20ELSE\x20false\x20END\x20AS\x20inactivity\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20('];a433_0x237f=function(){return _0x3379d3;};return a433_0x237f();}(function(_0x8070f3,_0x39ae06){const _0x2ca8d9=a433_0x3f7b,_0x71dd49=_0x8070f3();while(!![]){try{const _0x1da6f6=-parseInt(_0x2ca8d9(0xac))/0x1+-parseInt(_0x2ca8d9(0xa2))/0x2+-parseInt(_0x2ca8d9(0xb6))/0x3+parseInt(_0x2ca8d9(0xba))/0x4+parseInt(_0x2ca8d9(0xab))/0x5+-parseInt(_0x2ca8d9(0xb7))/0x6*(parseInt(_0x2ca8d9(0xa6))/0x7)+parseInt(_0x2ca8d9(0xb8))/0x8*(parseInt(_0x2ca8d9(0xb1))/0x9);if(_0x1da6f6===_0x39ae06)break;else _0x71dd49['push'](_0x71dd49['shift']());}catch(_0x1853f2){_0x71dd49['push'](_0x71dd49['shift']());}}}(a433_0x237f,0x974da));const a433_0x305507=(function(){let _0x2ea029=!![];return function(_0x24cb21,_0x3b5ed8){const _0x4c29d3=_0x2ea029?function(){const _0x4d5bc7=a433_0x3f7b;if(_0x3b5ed8){const _0xddee0d=_0x3b5ed8[_0x4d5bc7(0xa8)](_0x24cb21,arguments);return _0x3b5ed8=null,_0xddee0d;}}:function(){};return _0x2ea029=![],_0x4c29d3;};}()),a433_0x1fe74e=a433_0x305507(this,function(){const _0x364321=a433_0x3f7b;return a433_0x1fe74e['toString']()[_0x364321(0xa5)](_0x364321(0xad))['toString']()[_0x364321(0xbb)](a433_0x1fe74e)[_0x364321(0xa5)](_0x364321(0xad));});function a433_0x3f7b(_0x6343fb,_0x493290){const _0x39da52=a433_0x237f();return a433_0x3f7b=function(_0x1fe74e,_0x305507){_0x1fe74e=_0x1fe74e-0xa0;let _0x237f8=_0x39da52[_0x1fe74e];return _0x237f8;},a433_0x3f7b(_0x6343fb,_0x493290);}a433_0x1fe74e();'use strict';var __importDefault=this&&this[a433_0x4abb0a(0xbc)]||function(_0x1bb4b6){const _0x39d13c=a433_0x4abb0a;return _0x1bb4b6&&_0x1bb4b6[_0x39d13c(0xae)]?_0x1bb4b6:{'default':_0x1bb4b6};};Object[a433_0x4abb0a(0xb0)](exports,a433_0x4abb0a(0xae),{'value':!![]});const sequelize_1=require(a433_0x4abb0a(0xa0)),database_1=__importDefault(require('../../database')),VerifyCurrentSchedule=async(_0x3aae43,_0x316603)=>{const _0x2f42b7=a433_0x4abb0a;try{const _0xde9c86=_0x2f42b7(0xbd);let _0x2a9bad;_0x316603===null||_0x316603===undefined?_0x2a9bad=_0x2f42b7(0xb3):_0x2a9bad=_0x2f42b7(0xa7);const _0x4e96f2=_0x2f42b7(0xa3),_0x4815df=_0xde9c86+_0x2a9bad+_0x4e96f2,_0x51ce48=await database_1[_0x2f42b7(0xb2)][_0x2f42b7(0xb5)](_0x4815df,{'replacements':_0x316603?{'companyId':_0x3aae43,'queueId':_0x316603}:{'companyId':_0x3aae43},'type':sequelize_1[_0x2f42b7(0xaa)][_0x2f42b7(0xb4)],'plain':!![]});if(!_0x51ce48)return console[_0x2f42b7(0xa4)]('Nenhuma\x20configuração\x20encontrada\x20para\x20o\x20dia\x20atual'),{'id':Number(_0x316603||_0x3aae43),'currentSchedule':[],'startTime':'','endTime':'','inActivity':![]};return{'id':_0x51ce48['id'],'currentSchedule':_0x51ce48[_0x2f42b7(0xaf)],'startTime':_0x51ce48['starttime'],'endTime':_0x51ce48[_0x2f42b7(0xb9)],'inActivity':_0x51ce48[_0x2f42b7(0xa9)]};}catch(_0x52764c){return console['error'](_0x2f42b7(0xa1),_0x52764c),{'id':Number(_0x316603||_0x3aae43),'currentSchedule':[],'startTime':'','endTime':'','inActivity':![]};}};exports[a433_0x4abb0a(0xb2)]=VerifyCurrentSchedule;