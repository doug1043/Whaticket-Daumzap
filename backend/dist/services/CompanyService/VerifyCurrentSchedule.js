const a432_0x19f64c=a432_0xf719;(function(_0x26bbd4,_0x454da7){const _0x48e62b=a432_0xf719,_0x548da1=_0x26bbd4();while(!![]){try{const _0x59d8a0=parseInt(_0x48e62b(0x163))/0x1+parseInt(_0x48e62b(0x16d))/0x2*(-parseInt(_0x48e62b(0x164))/0x3)+parseInt(_0x48e62b(0x15d))/0x4+-parseInt(_0x48e62b(0x155))/0x5*(-parseInt(_0x48e62b(0x160))/0x6)+-parseInt(_0x48e62b(0x152))/0x7+parseInt(_0x48e62b(0x153))/0x8*(-parseInt(_0x48e62b(0x169))/0x9)+-parseInt(_0x48e62b(0x15b))/0xa*(parseInt(_0x48e62b(0x15e))/0xb);if(_0x59d8a0===_0x454da7)break;else _0x548da1['push'](_0x548da1['shift']());}catch(_0x297346){_0x548da1['push'](_0x548da1['shift']());}}}(a432_0x1fb0,0xf3dff));function a432_0xf719(_0x5e9a24,_0x4ab7ad){const _0x3ddf80=a432_0x1fb0();return a432_0xf719=function(_0xf1ea6a,_0x594fb3){_0xf1ea6a=_0xf1ea6a-0x151;let _0x1fb03d=_0x3ddf80[_0xf1ea6a];return _0x1fb03d;},a432_0xf719(_0x5e9a24,_0x4ab7ad);}const a432_0x594fb3=(function(){let _0x1a4b1b=!![];return function(_0x281d5e,_0x18df05){const _0x38fc79=_0x1a4b1b?function(){const _0x327b5e=a432_0xf719;if(_0x18df05){const _0x4e6ced=_0x18df05[_0x327b5e(0x157)](_0x281d5e,arguments);return _0x18df05=null,_0x4e6ced;}}:function(){};return _0x1a4b1b=![],_0x38fc79;};}()),a432_0xf1ea6a=a432_0x594fb3(this,function(){const _0x4b6de1=a432_0xf719;return a432_0xf1ea6a[_0x4b6de1(0x156)]()[_0x4b6de1(0x16b)](_0x4b6de1(0x16e))[_0x4b6de1(0x156)]()[_0x4b6de1(0x15f)](a432_0xf1ea6a)[_0x4b6de1(0x16b)](_0x4b6de1(0x16e));});a432_0xf1ea6a();'use strict';var __importDefault=this&&this[a432_0x19f64c(0x161)]||function(_0x2c9419){const _0x3ef679=a432_0x19f64c;return _0x2c9419&&_0x2c9419[_0x3ef679(0x15a)]?_0x2c9419:{'default':_0x2c9419};};Object['defineProperty'](exports,a432_0x19f64c(0x15a),{'value':!![]});const sequelize_1=require(a432_0x19f64c(0x167)),database_1=__importDefault(require(a432_0x19f64c(0x168))),VerifyCurrentSchedule=async(_0x117f00,_0x202820)=>{const _0x3b4559=a432_0x19f64c;try{const _0x4846a8=_0x3b4559(0x165);let _0x3cf088;_0x202820===null||_0x202820===undefined?_0x3cf088=_0x3b4559(0x166):_0x3cf088=_0x3b4559(0x16c);const _0x25cce8=')\x20as\x20inner_query)\x20as\x20outer_query',_0x3ffa68=_0x4846a8+_0x3cf088+_0x25cce8,_0x33a5eb=await database_1[_0x3b4559(0x151)]['query'](_0x3ffa68,{'replacements':_0x202820?{'companyId':_0x117f00,'queueId':_0x202820}:{'companyId':_0x117f00},'type':sequelize_1[_0x3b4559(0x159)][_0x3b4559(0x158)],'plain':!![]});if(!_0x33a5eb)return console[_0x3b4559(0x15c)](_0x3b4559(0x154)),{'id':Number(_0x202820||_0x117f00),'currentSchedule':[],'startTime':'','endTime':'','inActivity':![]};return{'id':_0x33a5eb['id'],'currentSchedule':_0x33a5eb[_0x3b4559(0x162)],'startTime':_0x33a5eb['starttime'],'endTime':_0x33a5eb['endtime'],'inActivity':_0x33a5eb[_0x3b4559(0x16a)]};}catch(_0x352e95){return console['error']('Erro\x20na\x20verificação\x20de\x20horário:',_0x352e95),{'id':Number(_0x202820||_0x117f00),'currentSchedule':[],'startTime':'','endTime':'','inActivity':![]};}};function a432_0x1fb0(){const _0x2090b2=['10173373oBCZEB','16KlvFRo','Nenhuma\x20configuração\x20encontrada\x20para\x20o\x20dia\x20atual','5uzpjwE','toString','apply','SELECT','QueryTypes','__esModule','180xfmQph','log','5437592Vdkame','7920JLfwdf','constructor','8048718MFLJDG','__importDefault','currentschedule','1787452KVHeFU','114135treiGy','\x0a\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20endlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20(NOT\x20inactivity)\x20AS\x20\x22inActivity\x22\x0a\x20\x20\x20\x20\x20\x20FROM\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20endlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CASE\x20WHEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--\x20Se\x20fora\x20do\x20horário\x20de\x20trabalho\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20<\x20to_timestamp(starttime,\x20\x27HH24MI\x27)::time\x20OR\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20>\x20to_timestamp(endtime,\x20\x27HH24MI\x27)::time\x20OR\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--\x20Ou\x20se\x20estiver\x20no\x20horário\x20de\x20almoço\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(startlunchtime\x20!=\x20\x27\x27\x20AND\x20endlunchtime\x20!=\x20\x27\x27\x20AND\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20>=\x20to_timestamp(startlunchtime,\x20\x27HH24MI\x27)::time\x20AND\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20<=\x20to_timestamp(endlunchtime,\x20\x27HH24MI\x27)::time)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20THEN\x20true\x20ELSE\x20false\x20END\x20AS\x20inactivity\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20(','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20c.id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20TRIM(to_char(current_date,\x20\x27day\x27))\x20as\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s\x20as\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startTime\x27\x20as\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endTime\x27\x20as\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startLunchTime\x27\x20as\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endLunchTime\x27\x20as\x20endlunchtime\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22Companies\x22\x20c,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jsonb_array_elements(c.schedules)\x20s\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LOWER(s->>\x27weekdayEn\x27)\x20=\x20LOWER(TRIM(to_char(current_date,\x20\x27day\x27)))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20c.id\x20=\x20:companyId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20s->>\x27active\x27\x20=\x20\x27true\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20','sequelize','../../database','6193476jjYTYH','inActivity','search','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20q.id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20TRIM(to_char(current_date,\x20\x27day\x27))\x20as\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s\x20as\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startTime\x27\x20as\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endTime\x27\x20as\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startLunchTime\x27\x20as\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endLunchTime\x27\x20as\x20endlunchtime\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22Queues\x22\x20q,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jsonb_array_elements(q.schedules)\x20s\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LOWER(s->>\x27weekdayEn\x27)\x20=\x20LOWER(TRIM(to_char(current_date,\x20\x27day\x27)))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20q.id\x20=\x20:queueId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20q.\x22companyId\x22\x20=\x20:companyId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20s->>\x27active\x27\x20=\x20\x27true\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20','34NvCehY','(((.+)+)+)+$','default'];a432_0x1fb0=function(){return _0x2090b2;};return a432_0x1fb0();}exports[a432_0x19f64c(0x151)]=VerifyCurrentSchedule;