const a429_0x45114e=a429_0x394c;(function(_0x5f30bd,_0x5da6da){const _0xf5f28d=a429_0x394c,_0x465cf8=_0x5f30bd();while(!![]){try{const _0x4606f3=parseInt(_0xf5f28d(0x1be))/0x1*(parseInt(_0xf5f28d(0x1c0))/0x2)+parseInt(_0xf5f28d(0x1c7))/0x3+parseInt(_0xf5f28d(0x1b1))/0x4*(-parseInt(_0xf5f28d(0x1b9))/0x5)+parseInt(_0xf5f28d(0x1b2))/0x6*(-parseInt(_0xf5f28d(0x1b5))/0x7)+-parseInt(_0xf5f28d(0x1b0))/0x8+parseInt(_0xf5f28d(0x1c4))/0x9*(-parseInt(_0xf5f28d(0x1c8))/0xa)+parseInt(_0xf5f28d(0x1c2))/0xb*(parseInt(_0xf5f28d(0x1cc))/0xc);if(_0x4606f3===_0x5da6da)break;else _0x465cf8['push'](_0x465cf8['shift']());}catch(_0x33c628){_0x465cf8['push'](_0x465cf8['shift']());}}}(a429_0x4100,0xc1071));function a429_0x394c(_0x4890b9,_0x596468){const _0x4f842f=a429_0x4100();return a429_0x394c=function(_0x233897,_0x256201){_0x233897=_0x233897-0x1af;let _0x410083=_0x4f842f[_0x233897];return _0x410083;},a429_0x394c(_0x4890b9,_0x596468);}const a429_0x256201=(function(){let _0x181af2=!![];return function(_0x1e23dc,_0x4519c4){const _0x529f6d=_0x181af2?function(){const _0x400ff4=a429_0x394c;if(_0x4519c4){const _0x3683d3=_0x4519c4[_0x400ff4(0x1b3)](_0x1e23dc,arguments);return _0x4519c4=null,_0x3683d3;}}:function(){};return _0x181af2=![],_0x529f6d;};}()),a429_0x233897=a429_0x256201(this,function(){const _0x5207f0=a429_0x394c;return a429_0x233897['toString']()[_0x5207f0(0x1ba)](_0x5207f0(0x1c1))['toString']()[_0x5207f0(0x1cb)](a429_0x233897)[_0x5207f0(0x1ba)](_0x5207f0(0x1c1));});function a429_0x4100(){const _0x4c712f=['520445RtieRl','search','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20c.id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20TRIM(to_char(current_date,\x20\x27day\x27))\x20as\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s\x20as\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startTime\x27\x20as\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endTime\x27\x20as\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startLunchTime\x27\x20as\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endLunchTime\x27\x20as\x20endlunchtime\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22Companies\x22\x20c,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jsonb_array_elements(c.schedules)\x20s\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LOWER(s->>\x27weekdayEn\x27)\x20=\x20LOWER(TRIM(to_char(current_date,\x20\x27day\x27)))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20c.id\x20=\x20:companyId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20s->>\x27active\x27\x20=\x20\x27true\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20','__esModule','\x0a\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20endlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20(NOT\x20inactivity)\x20AS\x20\x22inActivity\x22\x0a\x20\x20\x20\x20\x20\x20FROM\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20endlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CASE\x20WHEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--\x20Se\x20fora\x20do\x20horário\x20de\x20trabalho\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20<\x20to_timestamp(starttime,\x20\x27HH24MI\x27)::time\x20OR\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20>\x20to_timestamp(endtime,\x20\x27HH24MI\x27)::time\x20OR\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--\x20Ou\x20se\x20estiver\x20no\x20horário\x20de\x20almoço\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(startlunchtime\x20!=\x20\x27\x27\x20AND\x20endlunchtime\x20!=\x20\x27\x27\x20AND\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20>=\x20to_timestamp(startlunchtime,\x20\x27HH24MI\x27)::time\x20AND\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20<=\x20to_timestamp(endlunchtime,\x20\x27HH24MI\x27)::time)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20THEN\x20true\x20ELSE\x20false\x20END\x20AS\x20inactivity\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20(','3kEHRaa','sequelize','676094pKhmOa','(((.+)+)+)+$','54098akOcVI',')\x20as\x20inner_query)\x20as\x20outer_query','1185399zAtqML','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20q.id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20TRIM(to_char(current_date,\x20\x27day\x27))\x20as\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s\x20as\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startTime\x27\x20as\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endTime\x27\x20as\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startLunchTime\x27\x20as\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endLunchTime\x27\x20as\x20endlunchtime\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22Queues\x22\x20q,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jsonb_array_elements(q.schedules)\x20s\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LOWER(s->>\x27weekdayEn\x27)\x20=\x20LOWER(TRIM(to_char(current_date,\x20\x27day\x27)))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20q.id\x20=\x20:queueId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20q.\x22companyId\x22\x20=\x20:companyId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20s->>\x27active\x27\x20=\x20\x27true\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20','SELECT','3256626UUUCAo','100cfJans','QueryTypes','Erro\x20na\x20verificação\x20de\x20horário:','constructor','5688yOrdax','starttime','currentschedule','639448nPpjuK','52UCcexM','100752yaShxh','apply','defineProperty','371VwfCbv','query','error','endtime'];a429_0x4100=function(){return _0x4c712f;};return a429_0x4100();}a429_0x233897();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x5a2343){const _0x1d1f2c=a429_0x394c;return _0x5a2343&&_0x5a2343[_0x1d1f2c(0x1bc)]?_0x5a2343:{'default':_0x5a2343};};Object[a429_0x45114e(0x1b4)](exports,a429_0x45114e(0x1bc),{'value':!![]});const sequelize_1=require(a429_0x45114e(0x1bf)),database_1=__importDefault(require('../../database')),VerifyCurrentSchedule=async(_0x31362b,_0x35b103)=>{const _0x5a2238=a429_0x45114e;try{const _0x5cbfdf=_0x5a2238(0x1bd);let _0x4103f9;_0x35b103===null||_0x35b103===undefined?_0x4103f9=_0x5a2238(0x1bb):_0x4103f9=_0x5a2238(0x1c5);const _0x5e29bf=_0x5a2238(0x1c3),_0x6eecef=_0x5cbfdf+_0x4103f9+_0x5e29bf,_0xd527fd=await database_1['default'][_0x5a2238(0x1b6)](_0x6eecef,{'replacements':_0x35b103?{'companyId':_0x31362b,'queueId':_0x35b103}:{'companyId':_0x31362b},'type':sequelize_1[_0x5a2238(0x1c9)][_0x5a2238(0x1c6)],'plain':!![]});if(!_0xd527fd)return console['log']('Nenhuma\x20configuração\x20encontrada\x20para\x20o\x20dia\x20atual'),{'id':Number(_0x35b103||_0x31362b),'currentSchedule':[],'startTime':'','endTime':'','inActivity':![]};return{'id':_0xd527fd['id'],'currentSchedule':_0xd527fd[_0x5a2238(0x1af)],'startTime':_0xd527fd[_0x5a2238(0x1cd)],'endTime':_0xd527fd[_0x5a2238(0x1b8)],'inActivity':_0xd527fd['inActivity']};}catch(_0x4e75e1){return console[_0x5a2238(0x1b7)](_0x5a2238(0x1ca),_0x4e75e1),{'id':Number(_0x35b103||_0x31362b),'currentSchedule':[],'startTime':'','endTime':'','inActivity':![]};}};exports['default']=VerifyCurrentSchedule;