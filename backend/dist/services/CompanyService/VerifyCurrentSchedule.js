const a432_0x58adc6=a432_0x2d07;function a432_0x274f(){const _0x45b71a=['SELECT','6416946ALWMgf','(((.+)+)+)+$','../../database','search','error','QueryTypes','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20q.id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20TRIM(to_char(current_date,\x20\x27day\x27))\x20as\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s\x20as\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startTime\x27\x20as\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endTime\x27\x20as\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startLunchTime\x27\x20as\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endLunchTime\x27\x20as\x20endlunchtime\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22Queues\x22\x20q,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jsonb_array_elements(q.schedules)\x20s\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LOWER(s->>\x27weekdayEn\x27)\x20=\x20LOWER(TRIM(to_char(current_date,\x20\x27day\x27)))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20q.id\x20=\x20:queueId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20q.\x22companyId\x22\x20=\x20:companyId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20s->>\x27active\x27\x20=\x20\x27true\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20','sequelize','7032790eXWHKA','__esModule','9pNTeDg','3825256nlxLJn','1047gJfUJe','constructor','Erro\x20na\x20verificação\x20de\x20horário:','5530819BjqGMI','defineProperty','default','1834pQTiot','apply','query','43916TTedXK','log','\x0a\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20endlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20(NOT\x20inactivity)\x20AS\x20\x22inActivity\x22\x0a\x20\x20\x20\x20\x20\x20FROM\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20endlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CASE\x20WHEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--\x20Se\x20fora\x20do\x20horário\x20de\x20trabalho\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20<\x20to_timestamp(starttime,\x20\x27HH24MI\x27)::time\x20OR\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20>\x20to_timestamp(endtime,\x20\x27HH24MI\x27)::time\x20OR\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--\x20Ou\x20se\x20estiver\x20no\x20horário\x20de\x20almoço\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(startlunchtime\x20!=\x20\x27\x27\x20AND\x20endlunchtime\x20!=\x20\x27\x27\x20AND\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20>=\x20to_timestamp(startlunchtime,\x20\x27HH24MI\x27)::time\x20AND\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20<=\x20to_timestamp(endlunchtime,\x20\x27HH24MI\x27)::time)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20THEN\x20true\x20ELSE\x20false\x20END\x20AS\x20inactivity\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20(','inActivity','currentschedule','35hfoOjk','801168ILWkJp','toString'];a432_0x274f=function(){return _0x45b71a;};return a432_0x274f();}function a432_0x2d07(_0x5e1570,_0x53d895){const _0x267725=a432_0x274f();return a432_0x2d07=function(_0x572bd3,_0x225af7){_0x572bd3=_0x572bd3-0xe2;let _0x274f33=_0x267725[_0x572bd3];return _0x274f33;},a432_0x2d07(_0x5e1570,_0x53d895);}(function(_0x42ac60,_0x143a8c){const _0x523cc0=a432_0x2d07,_0x15c4ba=_0x42ac60();while(!![]){try{const _0x540905=parseInt(_0x523cc0(0xef))/0x1+-parseInt(_0x523cc0(0xe6))/0x2*(parseInt(_0x523cc0(0xfe))/0x3)+parseInt(_0x523cc0(0xe9))/0x4*(parseInt(_0x523cc0(0xee))/0x5)+parseInt(_0x523cc0(0xf2))/0x6+-parseInt(_0x523cc0(0xe3))/0x7+parseInt(_0x523cc0(0xfd))/0x8+-parseInt(_0x523cc0(0xfc))/0x9*(parseInt(_0x523cc0(0xfa))/0xa);if(_0x540905===_0x143a8c)break;else _0x15c4ba['push'](_0x15c4ba['shift']());}catch(_0x4666a0){_0x15c4ba['push'](_0x15c4ba['shift']());}}}(a432_0x274f,0x95790));const a432_0x225af7=(function(){let _0x2d07c2=!![];return function(_0xcba9d4,_0x1e010d){const _0x166fa7=_0x2d07c2?function(){const _0x435be3=a432_0x2d07;if(_0x1e010d){const _0x5e7ca1=_0x1e010d[_0x435be3(0xe7)](_0xcba9d4,arguments);return _0x1e010d=null,_0x5e7ca1;}}:function(){};return _0x2d07c2=![],_0x166fa7;};}()),a432_0x572bd3=a432_0x225af7(this,function(){const _0x807f1f=a432_0x2d07;return a432_0x572bd3[_0x807f1f(0xf0)]()[_0x807f1f(0xf5)](_0x807f1f(0xf3))[_0x807f1f(0xf0)]()[_0x807f1f(0xff)](a432_0x572bd3)['search'](_0x807f1f(0xf3));});a432_0x572bd3();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3ab497){const _0x2516d9=a432_0x2d07;return _0x3ab497&&_0x3ab497[_0x2516d9(0xfb)]?_0x3ab497:{'default':_0x3ab497};};Object[a432_0x58adc6(0xe4)](exports,a432_0x58adc6(0xfb),{'value':!![]});const sequelize_1=require(a432_0x58adc6(0xf9)),database_1=__importDefault(require(a432_0x58adc6(0xf4))),VerifyCurrentSchedule=async(_0x46767c,_0x3d1fe2)=>{const _0x54ccec=a432_0x58adc6;try{const _0x1a1572=_0x54ccec(0xeb);let _0x3175af;_0x3d1fe2===null||_0x3d1fe2===undefined?_0x3175af='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20c.id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20TRIM(to_char(current_date,\x20\x27day\x27))\x20as\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s\x20as\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startTime\x27\x20as\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endTime\x27\x20as\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startLunchTime\x27\x20as\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endLunchTime\x27\x20as\x20endlunchtime\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22Companies\x22\x20c,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jsonb_array_elements(c.schedules)\x20s\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LOWER(s->>\x27weekdayEn\x27)\x20=\x20LOWER(TRIM(to_char(current_date,\x20\x27day\x27)))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20c.id\x20=\x20:companyId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20s->>\x27active\x27\x20=\x20\x27true\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20':_0x3175af=_0x54ccec(0xf8);const _0x2e7f8d=')\x20as\x20inner_query)\x20as\x20outer_query',_0x437ac3=_0x1a1572+_0x3175af+_0x2e7f8d,_0x31604c=await database_1['default'][_0x54ccec(0xe8)](_0x437ac3,{'replacements':_0x3d1fe2?{'companyId':_0x46767c,'queueId':_0x3d1fe2}:{'companyId':_0x46767c},'type':sequelize_1[_0x54ccec(0xf7)][_0x54ccec(0xf1)],'plain':!![]});if(!_0x31604c)return console[_0x54ccec(0xea)]('Nenhuma\x20configuração\x20encontrada\x20para\x20o\x20dia\x20atual'),{'id':Number(_0x3d1fe2||_0x46767c),'currentSchedule':[],'startTime':'','endTime':'','inActivity':![]};return{'id':_0x31604c['id'],'currentSchedule':_0x31604c[_0x54ccec(0xed)],'startTime':_0x31604c['starttime'],'endTime':_0x31604c['endtime'],'inActivity':_0x31604c[_0x54ccec(0xec)]};}catch(_0x4e335a){return console[_0x54ccec(0xf6)](_0x54ccec(0xe2),_0x4e335a),{'id':Number(_0x3d1fe2||_0x46767c),'currentSchedule':[],'startTime':'','endTime':'','inActivity':![]};}};exports[a432_0x58adc6(0xe5)]=VerifyCurrentSchedule;