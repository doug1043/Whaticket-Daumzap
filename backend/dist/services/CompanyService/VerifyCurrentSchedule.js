const a513_0x3b0932=a513_0x3698;(function(_0x2407cf,_0x400609){const _0x5d4401=a513_0x3698,_0x32b98d=_0x2407cf();while(!![]){try{const _0x11dac9=-parseInt(_0x5d4401(0x18d))/0x1+-parseInt(_0x5d4401(0x193))/0x2+parseInt(_0x5d4401(0x17f))/0x3*(parseInt(_0x5d4401(0x17c))/0x4)+-parseInt(_0x5d4401(0x184))/0x5+-parseInt(_0x5d4401(0x189))/0x6*(parseInt(_0x5d4401(0x181))/0x7)+parseInt(_0x5d4401(0x186))/0x8+parseInt(_0x5d4401(0x185))/0x9*(parseInt(_0x5d4401(0x188))/0xa);if(_0x11dac9===_0x400609)break;else _0x32b98d['push'](_0x32b98d['shift']());}catch(_0x38777f){_0x32b98d['push'](_0x32b98d['shift']());}}}(a513_0x5e75,0x8b3cf));const a513_0x138eed=(function(){let _0x205422=!![];return function(_0xe63e8d,_0x499fa6){const _0x36b0d9=_0x205422?function(){if(_0x499fa6){const _0x19dd05=_0x499fa6['apply'](_0xe63e8d,arguments);return _0x499fa6=null,_0x19dd05;}}:function(){};return _0x205422=![],_0x36b0d9;};}()),a513_0x57022c=a513_0x138eed(this,function(){const _0x596cb8=a513_0x3698;return a513_0x57022c[_0x596cb8(0x17a)]()[_0x596cb8(0x180)](_0x596cb8(0x183))[_0x596cb8(0x17a)]()[_0x596cb8(0x17d)](a513_0x57022c)['search'](_0x596cb8(0x183));});a513_0x57022c();function a513_0x5e75(){const _0x488bee=['defineProperty','error','toString','QueryTypes','3287720bEWwZm','constructor','default','3BZzwCg','search','4949zXOCex','__esModule','(((.+)+)+)+$','4995785VgcGhc','1242Txwugw','7807624LIPIwY','SELECT','18340lJLjgn','1830qorRlN','\x0a\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20endlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20(NOT\x20inactivity)\x20AS\x20\x22inActivity\x22\x0a\x20\x20\x20\x20\x20\x20FROM\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20endlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CASE\x20WHEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--\x20Se\x20fora\x20do\x20horário\x20de\x20trabalho\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20<\x20to_timestamp(starttime,\x20\x27HH24MI\x27)::time\x20OR\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20>\x20to_timestamp(endtime,\x20\x27HH24MI\x27)::time\x20OR\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--\x20Ou\x20se\x20estiver\x20no\x20horário\x20de\x20almoço\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(startlunchtime\x20!=\x20\x27\x27\x20AND\x20endlunchtime\x20!=\x20\x27\x27\x20AND\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20>=\x20to_timestamp(startlunchtime,\x20\x27HH24MI\x27)::time\x20AND\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20<=\x20to_timestamp(endlunchtime,\x20\x27HH24MI\x27)::time)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20THEN\x20true\x20ELSE\x20false\x20END\x20AS\x20inactivity\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20(','sequelize','Nenhuma\x20configuração\x20encontrada\x20para\x20o\x20dia\x20atual','50933sIsJDZ','endtime',')\x20as\x20inner_query)\x20as\x20outer_query','currentschedule','log','Erro\x20na\x20verificação\x20de\x20horário:','429862KBYhcC','starttime','../../database','__importDefault'];a513_0x5e75=function(){return _0x488bee;};return a513_0x5e75();}'use strict';var __importDefault=this&&this[a513_0x3b0932(0x196)]||function(_0x3b11f4){const _0x704490=a513_0x3b0932;return _0x3b11f4&&_0x3b11f4[_0x704490(0x182)]?_0x3b11f4:{'default':_0x3b11f4};};function a513_0x3698(_0x3e89ea,_0x27a2fc){const _0x3b70ae=a513_0x5e75();return a513_0x3698=function(_0x57022c,_0x138eed){_0x57022c=_0x57022c-0x178;let _0x5e75d3=_0x3b70ae[_0x57022c];return _0x5e75d3;},a513_0x3698(_0x3e89ea,_0x27a2fc);}Object[a513_0x3b0932(0x178)](exports,'__esModule',{'value':!![]});const sequelize_1=require(a513_0x3b0932(0x18b)),database_1=__importDefault(require(a513_0x3b0932(0x195))),VerifyCurrentSchedule=async(_0x375eb5,_0x14b026)=>{const _0x1145a4=a513_0x3b0932;try{const _0x4aff07=_0x1145a4(0x18a);let _0x39395c;_0x14b026===null||_0x14b026===undefined?_0x39395c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20c.id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20TRIM(to_char(current_date,\x20\x27day\x27))\x20as\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s\x20as\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startTime\x27\x20as\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endTime\x27\x20as\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startLunchTime\x27\x20as\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endLunchTime\x27\x20as\x20endlunchtime\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22Companies\x22\x20c,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jsonb_array_elements(c.schedules)\x20s\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LOWER(s->>\x27weekdayEn\x27)\x20=\x20LOWER(TRIM(to_char(current_date,\x20\x27day\x27)))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20c.id\x20=\x20:companyId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20s->>\x27active\x27\x20=\x20\x27true\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20':_0x39395c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20q.id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20TRIM(to_char(current_date,\x20\x27day\x27))\x20as\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s\x20as\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startTime\x27\x20as\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endTime\x27\x20as\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startLunchTime\x27\x20as\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endLunchTime\x27\x20as\x20endlunchtime\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22Queues\x22\x20q,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jsonb_array_elements(q.schedules)\x20s\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LOWER(s->>\x27weekdayEn\x27)\x20=\x20LOWER(TRIM(to_char(current_date,\x20\x27day\x27)))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20q.id\x20=\x20:queueId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20q.\x22companyId\x22\x20=\x20:companyId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20s->>\x27active\x27\x20=\x20\x27true\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20';const _0x3ff3c3=_0x1145a4(0x18f),_0x4e9a18=_0x4aff07+_0x39395c+_0x3ff3c3,_0x3208fe=await database_1[_0x1145a4(0x17e)]['query'](_0x4e9a18,{'replacements':_0x14b026?{'companyId':_0x375eb5,'queueId':_0x14b026}:{'companyId':_0x375eb5},'type':sequelize_1[_0x1145a4(0x17b)][_0x1145a4(0x187)],'plain':!![]});if(!_0x3208fe)return console[_0x1145a4(0x191)](_0x1145a4(0x18c)),{'id':Number(_0x14b026||_0x375eb5),'currentSchedule':[],'startTime':'','endTime':'','inActivity':![]};return{'id':_0x3208fe['id'],'currentSchedule':_0x3208fe[_0x1145a4(0x190)],'startTime':_0x3208fe[_0x1145a4(0x194)],'endTime':_0x3208fe[_0x1145a4(0x18e)],'inActivity':_0x3208fe['inActivity']};}catch(_0x174742){return console[_0x1145a4(0x179)](_0x1145a4(0x192),_0x174742),{'id':Number(_0x14b026||_0x375eb5),'currentSchedule':[],'startTime':'','endTime':'','inActivity':![]};}};exports[a513_0x3b0932(0x17e)]=VerifyCurrentSchedule;