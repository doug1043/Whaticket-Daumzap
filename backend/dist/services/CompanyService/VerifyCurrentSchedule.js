const a428_0x167247=a428_0x436f;(function(_0x25730a,_0x144205){const _0xdffbfc=a428_0x436f,_0xd0a36f=_0x25730a();while(!![]){try{const _0x3549ce=-parseInt(_0xdffbfc(0xa0))/0x1*(parseInt(_0xdffbfc(0xaa))/0x2)+-parseInt(_0xdffbfc(0x9f))/0x3+parseInt(_0xdffbfc(0xb4))/0x4+-parseInt(_0xdffbfc(0xa1))/0x5*(-parseInt(_0xdffbfc(0x9b))/0x6)+-parseInt(_0xdffbfc(0xb1))/0x7+parseInt(_0xdffbfc(0xad))/0x8+-parseInt(_0xdffbfc(0xa4))/0x9*(-parseInt(_0xdffbfc(0xb5))/0xa);if(_0x3549ce===_0x144205)break;else _0xd0a36f['push'](_0xd0a36f['shift']());}catch(_0x253c6f){_0xd0a36f['push'](_0xd0a36f['shift']());}}}(a428_0x4eae,0xa4d73));const a428_0x34b431=(function(){let _0x16ef47=!![];return function(_0x4d3690,_0x24077b){const _0x65f0d6=_0x16ef47?function(){const _0x56d208=a428_0x436f;if(_0x24077b){const _0xe9653f=_0x24077b[_0x56d208(0xaf)](_0x4d3690,arguments);return _0x24077b=null,_0xe9653f;}}:function(){};return _0x16ef47=![],_0x65f0d6;};}()),a428_0x507a4e=a428_0x34b431(this,function(){const _0x57bda4=a428_0x436f;return a428_0x507a4e[_0x57bda4(0xa2)]()[_0x57bda4(0xb0)](_0x57bda4(0xa9))[_0x57bda4(0xa2)]()[_0x57bda4(0xa5)](a428_0x507a4e)[_0x57bda4(0xb0)]('(((.+)+)+)+$');});a428_0x507a4e();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x577956){const _0x31571e=a428_0x436f;return _0x577956&&_0x577956[_0x31571e(0xa3)]?_0x577956:{'default':_0x577956};};Object[a428_0x167247(0xa8)](exports,a428_0x167247(0xa3),{'value':!![]});function a428_0x436f(_0x4866ae,_0x845784){const _0x2ffa2d=a428_0x4eae();return a428_0x436f=function(_0x507a4e,_0x34b431){_0x507a4e=_0x507a4e-0x9a;let _0x4eaed9=_0x2ffa2d[_0x507a4e];return _0x4eaed9;},a428_0x436f(_0x4866ae,_0x845784);}const sequelize_1=require('sequelize'),database_1=__importDefault(require(a428_0x167247(0x9e))),VerifyCurrentSchedule=async(_0x694f7d,_0x460bb3)=>{const _0x17267e=a428_0x167247;try{const _0x57abce=_0x17267e(0xab);let _0x2eac25;_0x460bb3===null||_0x460bb3===undefined?_0x2eac25=_0x17267e(0x9d):_0x2eac25=_0x17267e(0xa7);const _0x3f1575=')\x20as\x20inner_query)\x20as\x20outer_query',_0x1d9919=_0x57abce+_0x2eac25+_0x3f1575,_0x5458d3=await database_1[_0x17267e(0x9a)][_0x17267e(0xb7)](_0x1d9919,{'replacements':_0x460bb3?{'companyId':_0x694f7d,'queueId':_0x460bb3}:{'companyId':_0x694f7d},'type':sequelize_1[_0x17267e(0xb2)][_0x17267e(0xac)],'plain':!![]});if(!_0x5458d3)return console[_0x17267e(0xb6)](_0x17267e(0x9c)),{'id':Number(_0x460bb3||_0x694f7d),'currentSchedule':[],'startTime':'','endTime':'','inActivity':![]};return{'id':_0x5458d3['id'],'currentSchedule':_0x5458d3[_0x17267e(0xb8)],'startTime':_0x5458d3['starttime'],'endTime':_0x5458d3['endtime'],'inActivity':_0x5458d3[_0x17267e(0xae)]};}catch(_0x2f902a){return console[_0x17267e(0xa6)](_0x17267e(0xb3),_0x2f902a),{'id':Number(_0x460bb3||_0x694f7d),'currentSchedule':[],'startTime':'','endTime':'','inActivity':![]};}};function a428_0x4eae(){const _0x1fe566=['250WHrzjF','log','query','currentschedule','default','18DrZlDD','Nenhuma\x20configuração\x20encontrada\x20para\x20o\x20dia\x20atual','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20c.id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20TRIM(to_char(current_date,\x20\x27day\x27))\x20as\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s\x20as\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startTime\x27\x20as\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endTime\x27\x20as\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startLunchTime\x27\x20as\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endLunchTime\x27\x20as\x20endlunchtime\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22Companies\x22\x20c,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jsonb_array_elements(c.schedules)\x20s\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LOWER(s->>\x27weekdayEn\x27)\x20=\x20LOWER(TRIM(to_char(current_date,\x20\x27day\x27)))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20c.id\x20=\x20:companyId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20s->>\x27active\x27\x20=\x20\x27true\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20','../../database','3227688IySLRe','250433rqNcaf','1408135YEatVt','toString','__esModule','241290YiUyzd','constructor','error','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20q.id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20TRIM(to_char(current_date,\x20\x27day\x27))\x20as\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s\x20as\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startTime\x27\x20as\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endTime\x27\x20as\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27startLunchTime\x27\x20as\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s->>\x27endLunchTime\x27\x20as\x20endlunchtime\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22Queues\x22\x20q,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jsonb_array_elements(q.schedules)\x20s\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LOWER(s->>\x27weekdayEn\x27)\x20=\x20LOWER(TRIM(to_char(current_date,\x20\x27day\x27)))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20q.id\x20=\x20:queueId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20q.\x22companyId\x22\x20=\x20:companyId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20s->>\x27active\x27\x20=\x20\x27true\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20','defineProperty','(((.+)+)+)+$','8HFuVkv','\x0a\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20endlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20(NOT\x20inactivity)\x20AS\x20\x22inActivity\x22\x0a\x20\x20\x20\x20\x20\x20FROM\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20currentweekday,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20currentschedule,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20starttime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20endtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20startlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20endlunchtime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CASE\x20WHEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--\x20Se\x20fora\x20do\x20horário\x20de\x20trabalho\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20<\x20to_timestamp(starttime,\x20\x27HH24MI\x27)::time\x20OR\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20>\x20to_timestamp(endtime,\x20\x27HH24MI\x27)::time\x20OR\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--\x20Ou\x20se\x20estiver\x20no\x20horário\x20de\x20almoço\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(startlunchtime\x20!=\x20\x27\x27\x20AND\x20endlunchtime\x20!=\x20\x27\x27\x20AND\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20>=\x20to_timestamp(startlunchtime,\x20\x27HH24MI\x27)::time\x20AND\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20NOW()::time\x20<=\x20to_timestamp(endlunchtime,\x20\x27HH24MI\x27)::time)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20THEN\x20true\x20ELSE\x20false\x20END\x20AS\x20inactivity\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20(','SELECT','9381432ZVWxku','inActivity','apply','search','5030963imMKfE','QueryTypes','Erro\x20na\x20verificação\x20de\x20horário:','3134856aiYgPM'];a428_0x4eae=function(){return _0x1fe566;};return a428_0x4eae();}exports['default']=VerifyCurrentSchedule;