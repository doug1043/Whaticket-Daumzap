const a512_0x1cbe5d=a512_0x3cfb;function a512_0x3cfb(_0x770733,_0x6ff403){const _0x561d21=a512_0x508b();return a512_0x3cfb=function(_0xd263cc,_0x54f33a){_0xd263cc=_0xd263cc-0x164;let _0x508bc3=_0x561d21[_0xd263cc];return _0x508bc3;},a512_0x3cfb(_0x770733,_0x6ff403);}(function(_0x2b98dd,_0x1c200f){const _0x5c9c9d=a512_0x3cfb,_0x2f4802=_0x2b98dd();while(!![]){try{const _0x450810=parseInt(_0x5c9c9d(0x174))/0x1+parseInt(_0x5c9c9d(0x17d))/0x2+parseInt(_0x5c9c9d(0x180))/0x3+-parseInt(_0x5c9c9d(0x17f))/0x4+parseInt(_0x5c9c9d(0x16a))/0x5*(parseInt(_0x5c9c9d(0x17a))/0x6)+parseInt(_0x5c9c9d(0x169))/0x7*(parseInt(_0x5c9c9d(0x171))/0x8)+parseInt(_0x5c9c9d(0x166))/0x9*(-parseInt(_0x5c9c9d(0x167))/0xa);if(_0x450810===_0x1c200f)break;else _0x2f4802['push'](_0x2f4802['shift']());}catch(_0x422b9a){_0x2f4802['push'](_0x2f4802['shift']());}}}(a512_0x508b,0xbe8ec));const a512_0x54f33a=(function(){let _0xbd65ad=!![];return function(_0x17cf42,_0x3dc407){const _0x5092b9=_0xbd65ad?function(){if(_0x3dc407){const _0x34698d=_0x3dc407['apply'](_0x17cf42,arguments);return _0x3dc407=null,_0x34698d;}}:function(){};return _0xbd65ad=![],_0x5092b9;};}()),a512_0xd263cc=a512_0x54f33a(this,function(){const _0x4e4a84=a512_0x3cfb;return a512_0xd263cc[_0x4e4a84(0x179)]()[_0x4e4a84(0x16d)](_0x4e4a84(0x172))['toString']()['constructor'](a512_0xd263cc)['search'](_0x4e4a84(0x172));});function a512_0x508b(){const _0x1f9dcf=['createCompanyStorage','Bucket\x20criado\x20para\x20empresa\x20','472aCIZEn','(((.+)+)+)+$','findByPk','291945BggLKn','log','update','__esModule','../../errors/AppError','toString','38670iKfNfw','replace','bucketName','1379690WltKXL','../StorageService/StorageService','6025476xJBmDM','1774329WDuqcK','../../models/Setting','\x20com\x20nome:\x20','default','campaignsEnabled','256365FndsQA','30eMusjM','error','38990ZcFKgS','365VMNUnw','ERR_NO_COMPANY_FOUND','toLowerCase','search','Erro\x20ao\x20criar\x20bucket\x20para\x20empresa\x20'];a512_0x508b=function(){return _0x1f9dcf;};return a512_0x508b();}a512_0xd263cc();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x450a23){const _0x158e61=a512_0x3cfb;return _0x450a23&&_0x450a23[_0x158e61(0x177)]?_0x450a23:{'default':_0x450a23};};Object['defineProperty'](exports,a512_0x1cbe5d(0x177),{'value':!![]});const AppError_1=__importDefault(require(a512_0x1cbe5d(0x178))),Company_1=__importDefault(require('../../models/Company')),Setting_1=__importDefault(require(a512_0x1cbe5d(0x181))),StorageService_1=__importDefault(require(a512_0x1cbe5d(0x17e))),UpdateCompanyService=async _0x49affd=>{const _0x35a6d9=a512_0x1cbe5d,_0x2d6767=await Company_1[_0x35a6d9(0x164)][_0x35a6d9(0x173)](_0x49affd['id']),{name:_0x35ff5a,phone:_0x1a9eec,email:_0x252ef5,status:_0x165eb2,planId:_0x1b2eab,campaignsEnabled:_0x5f3526,dueDate:_0x76bfab,recurrence:_0x43c12f,bucketName:_0xedf1d2}=_0x49affd;if(!_0x2d6767)throw new AppError_1[(_0x35a6d9(0x164))](_0x35a6d9(0x16b),0x194);const _0x271d9c=_0xedf1d2?_0xedf1d2[_0x35a6d9(0x16c)]()[_0x35a6d9(0x17b)](/[^a-z0-9-]/g,'-'):null,_0xa57716=_0x271d9c&&_0x271d9c!==_0x2d6767[_0x35a6d9(0x17c)];await _0x2d6767[_0x35a6d9(0x176)]({'name':_0x35ff5a,'phone':_0x1a9eec,'email':_0x252ef5,'status':_0x165eb2,'planId':_0x1b2eab,'dueDate':_0x76bfab,'recurrence':_0x43c12f,'bucketName':_0x271d9c||_0x2d6767[_0x35a6d9(0x17c)]});if(_0xa57716)try{await StorageService_1[_0x35a6d9(0x164)][_0x35a6d9(0x16f)](_0x2d6767['id']),console[_0x35a6d9(0x175)](_0x35a6d9(0x170)+_0x2d6767['id']+_0x35a6d9(0x182)+_0x271d9c);}catch(_0x5898e7){console[_0x35a6d9(0x168)](_0x35a6d9(0x16e)+_0x2d6767['id']+':',_0x5898e7);}if(_0x49affd[_0x35a6d9(0x165)]!==undefined){const [_0x2f8ddc,_0x241d87]=await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x2d6767['id'],'key':_0x35a6d9(0x165)},'defaults':{'companyId':_0x2d6767['id'],'key':_0x35a6d9(0x165),'value':''+_0x5f3526}});!_0x241d87&&await _0x2f8ddc[_0x35a6d9(0x176)]({'value':''+_0x5f3526});}return _0x2d6767;};exports[a512_0x1cbe5d(0x164)]=UpdateCompanyService;