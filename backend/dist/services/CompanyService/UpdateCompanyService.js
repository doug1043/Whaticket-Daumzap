const a511_0x5a9ee1=a511_0x4546;function a511_0x4546(_0x53b9cd,_0x45a4e4){const _0x46df8c=a511_0x8d90();return a511_0x4546=function(_0x502049,_0x31b51c){_0x502049=_0x502049-0x19f;let _0x8d905a=_0x46df8c[_0x502049];return _0x8d905a;},a511_0x4546(_0x53b9cd,_0x45a4e4);}(function(_0x4b885a,_0x1f8a00){const _0x5dc79b=a511_0x4546,_0x3cf183=_0x4b885a();while(!![]){try{const _0x59febd=parseInt(_0x5dc79b(0x1c2))/0x1+-parseInt(_0x5dc79b(0x1c3))/0x2+parseInt(_0x5dc79b(0x1af))/0x3*(-parseInt(_0x5dc79b(0x19f))/0x4)+-parseInt(_0x5dc79b(0x1ad))/0x5+parseInt(_0x5dc79b(0x1b8))/0x6*(parseInt(_0x5dc79b(0x1b0))/0x7)+-parseInt(_0x5dc79b(0x1bf))/0x8*(parseInt(_0x5dc79b(0x1bb))/0x9)+parseInt(_0x5dc79b(0x1aa))/0xa*(parseInt(_0x5dc79b(0x1b2))/0xb);if(_0x59febd===_0x1f8a00)break;else _0x3cf183['push'](_0x3cf183['shift']());}catch(_0x338cf9){_0x3cf183['push'](_0x3cf183['shift']());}}}(a511_0x8d90,0xa699e));const a511_0x31b51c=(function(){let _0x5adef9=!![];return function(_0x2b6ebe,_0x1fd687){const _0x7e08ae=_0x5adef9?function(){const _0x595701=a511_0x4546;if(_0x1fd687){const _0x32ec68=_0x1fd687[_0x595701(0x1b6)](_0x2b6ebe,arguments);return _0x1fd687=null,_0x32ec68;}}:function(){};return _0x5adef9=![],_0x7e08ae;};}()),a511_0x502049=a511_0x31b51c(this,function(){const _0x4219d5=a511_0x4546;return a511_0x502049[_0x4219d5(0x1a7)]()[_0x4219d5(0x1b3)](_0x4219d5(0x1b7))[_0x4219d5(0x1a7)]()[_0x4219d5(0x1b4)](a511_0x502049)['search'](_0x4219d5(0x1b7));});a511_0x502049();'use strict';var __importDefault=this&&this[a511_0x5a9ee1(0x1a3)]||function(_0x4bd5df){const _0x3a6dd0=a511_0x5a9ee1;return _0x4bd5df&&_0x4bd5df[_0x3a6dd0(0x1a6)]?_0x4bd5df:{'default':_0x4bd5df};};function a511_0x8d90(){const _0x2a5521=['createCompanyStorage','Erro\x20ao\x20criar\x20bucket\x20para\x20empresa\x20','9RJKKuT','default','campaignsEnabled','../StorageService/StorageService','7490312yLkESp','error','../../models/Company','796818HvNZHf','2282240oVFfdI','4229452pippSt','toLowerCase','replace','defineProperty','__importDefault','bucketName','ERR_NO_COMPANY_FOUND','__esModule','toString','log','../../models/Setting','10fFOUsw','findOrCreate','../../errors/AppError','569220JFVuxm','update','3umKJgj','35pSYyTW','\x20com\x20nome:\x20','25099701axJTZo','search','constructor','findByPk','apply','(((.+)+)+)+$','1022886TbxTsO'];a511_0x8d90=function(){return _0x2a5521;};return a511_0x8d90();}Object[a511_0x5a9ee1(0x1a2)](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require(a511_0x5a9ee1(0x1ac))),Company_1=__importDefault(require(a511_0x5a9ee1(0x1c1))),Setting_1=__importDefault(require(a511_0x5a9ee1(0x1a9))),StorageService_1=__importDefault(require(a511_0x5a9ee1(0x1be))),UpdateCompanyService=async _0x317eb2=>{const _0x5d1a5b=a511_0x5a9ee1,_0x42a8fb=await Company_1[_0x5d1a5b(0x1bc)][_0x5d1a5b(0x1b5)](_0x317eb2['id']),{name:_0xb60e08,phone:_0x375055,email:_0x2c8a6e,status:_0x22cdfd,planId:_0x260933,campaignsEnabled:_0x1c755b,dueDate:_0xd6bb44,recurrence:_0x1c5296,bucketName:_0x6b0cf7}=_0x317eb2;if(!_0x42a8fb)throw new AppError_1['default'](_0x5d1a5b(0x1a5),0x194);const _0x79f64e=_0x6b0cf7?_0x6b0cf7[_0x5d1a5b(0x1a0)]()[_0x5d1a5b(0x1a1)](/[^a-z0-9-]/g,'-'):null,_0x1de511=_0x79f64e&&_0x79f64e!==_0x42a8fb[_0x5d1a5b(0x1a4)];await _0x42a8fb[_0x5d1a5b(0x1ae)]({'name':_0xb60e08,'phone':_0x375055,'email':_0x2c8a6e,'status':_0x22cdfd,'planId':_0x260933,'dueDate':_0xd6bb44,'recurrence':_0x1c5296,'bucketName':_0x79f64e||_0x42a8fb[_0x5d1a5b(0x1a4)]});if(_0x1de511)try{await StorageService_1[_0x5d1a5b(0x1bc)][_0x5d1a5b(0x1b9)](_0x42a8fb['id']),console[_0x5d1a5b(0x1a8)]('Bucket\x20criado\x20para\x20empresa\x20'+_0x42a8fb['id']+_0x5d1a5b(0x1b1)+_0x79f64e);}catch(_0x5eb28b){console[_0x5d1a5b(0x1c0)](_0x5d1a5b(0x1ba)+_0x42a8fb['id']+':',_0x5eb28b);}if(_0x317eb2[_0x5d1a5b(0x1bd)]!==undefined){const [_0x2383a0,_0x51d004]=await Setting_1['default'][_0x5d1a5b(0x1ab)]({'where':{'companyId':_0x42a8fb['id'],'key':_0x5d1a5b(0x1bd)},'defaults':{'companyId':_0x42a8fb['id'],'key':_0x5d1a5b(0x1bd),'value':''+_0x1c755b}});!_0x51d004&&await _0x2383a0['update']({'value':''+_0x1c755b});}return _0x42a8fb;};exports['default']=UpdateCompanyService;