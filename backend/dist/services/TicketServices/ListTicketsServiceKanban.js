function a556_0x24ad(){const _0x312ada=['181993CZmFpm','findAll','toString','(((.+)+)+)+$','../../models/Queue','../../models/Tag','color','LIKE','6789870pbLSrB','trim','like','contact.name','LOWER','col','default','2382cEFzTb','../../models/Ticket','contact','where','user','../../models/User','1868184QAUwUN','updatedAt','number','true','__esModule','tags','9VJJtJh','body','presence','parseISO','defineProperty','../../models/TicketTag','search','isArray','apply','13936776FkiMtg','endOfDay','open','pending','map','name','2981155rdOgvS','queues','1758190iGiMsr','2336rmkcfi','lodash','../UserServices/ShowUserService','length','../../models/Whatsapp','queue','180nVXsQq','constructor','messages','ticketId','sequelize','findAndCountAll','between','intersection','__importDefault','startOfDay','whatsapp'];a556_0x24ad=function(){return _0x312ada;};return a556_0x24ad();}const a556_0x59fe73=a556_0x20cb;(function(_0x47a6ff,_0x516a82){const _0x1d2675=a556_0x20cb,_0x5875be=_0x47a6ff();while(!![]){try{const _0x3d39bd=parseInt(_0x1d2675(0x185))/0x1+parseInt(_0x1d2675(0x186))/0x2*(parseInt(_0x1d2675(0x1a6))/0x3)+-parseInt(_0x1d2675(0x1ac))/0x4+parseInt(_0x1d2675(0x183))/0x5+parseInt(_0x1d2675(0x18c))/0x6*(-parseInt(_0x1d2675(0x197))/0x7)+-parseInt(_0x1d2675(0x1bb))/0x8*(parseInt(_0x1d2675(0x1b2))/0x9)+parseInt(_0x1d2675(0x19f))/0xa;if(_0x3d39bd===_0x516a82)break;else _0x5875be['push'](_0x5875be['shift']());}catch(_0x4835b9){_0x5875be['push'](_0x5875be['shift']());}}}(a556_0x24ad,0xed3a7));const a556_0xbb5b8e=(function(){let _0x16069d=!![];return function(_0x573aa6,_0x57d900){const _0x1dcb08=_0x16069d?function(){const _0x29aeae=a556_0x20cb;if(_0x57d900){const _0x26b890=_0x57d900[_0x29aeae(0x1ba)](_0x573aa6,arguments);return _0x57d900=null,_0x26b890;}}:function(){};return _0x16069d=![],_0x1dcb08;};}()),a556_0x4c6d3e=a556_0xbb5b8e(this,function(){const _0x3bf448=a556_0x20cb;return a556_0x4c6d3e['toString']()[_0x3bf448(0x1b8)](_0x3bf448(0x19a))[_0x3bf448(0x199)]()[_0x3bf448(0x18d)](a556_0x4c6d3e)[_0x3bf448(0x1b8)](_0x3bf448(0x19a));});a556_0x4c6d3e();'use strict';var __importDefault=this&&this[a556_0x59fe73(0x194)]||function(_0x3cec62){const _0x4499c7=a556_0x59fe73;return _0x3cec62&&_0x3cec62[_0x4499c7(0x1b0)]?_0x3cec62:{'default':_0x3cec62};};Object[a556_0x59fe73(0x1b6)](exports,a556_0x59fe73(0x1b0),{'value':!![]});function a556_0x20cb(_0x2dcc51,_0xf64cd0){const _0x1996ea=a556_0x24ad();return a556_0x20cb=function(_0x4c6d3e,_0xbb5b8e){_0x4c6d3e=_0x4c6d3e-0x181;let _0x24adbe=_0x1996ea[_0x4c6d3e];return _0x24adbe;},a556_0x20cb(_0x2dcc51,_0xf64cd0);}const sequelize_1=require(a556_0x59fe73(0x190)),date_fns_1=require('date-fns'),Ticket_1=__importDefault(require(a556_0x59fe73(0x1a7))),Contact_1=__importDefault(require('../../models/Contact')),Message_1=__importDefault(require('../../models/Message')),Queue_1=__importDefault(require(a556_0x59fe73(0x19b))),User_1=__importDefault(require(a556_0x59fe73(0x1ab))),ShowUserService_1=__importDefault(require(a556_0x59fe73(0x188))),Tag_1=__importDefault(require(a556_0x59fe73(0x19c))),TicketTag_1=__importDefault(require(a556_0x59fe73(0x1b7))),lodash_1=require(a556_0x59fe73(0x187)),Whatsapp_1=__importDefault(require(a556_0x59fe73(0x18a))),ListTicketsServiceKanban=async({searchParam:searchParam='',pageNumber:pageNumber='1',queueIds:_0x3cafda,tags:_0x5c3a19,users:_0x3525b6,status:_0x462490,date:_0x2ddb8d,updatedAt:_0xa117f0,showAll:_0x1bfd5f,userId:_0x265903,withUnreadMessages:_0x458cac,companyId:_0x9c2ae3})=>{const _0x5c1016=a556_0x59fe73;let _0xaa3cc4={[sequelize_1['Op']['or']]:[{'userId':_0x265903},{'status':_0x5c1016(0x1be)}],'queueId':{[sequelize_1['Op']['or']]:[_0x3cafda,null]}},_0x422386;_0x422386=[{'model':Contact_1[_0x5c1016(0x1a5)],'as':_0x5c1016(0x1a8),'attributes':['id',_0x5c1016(0x182),_0x5c1016(0x1ae),'email',_0x5c1016(0x1b4)]},{'model':Queue_1[_0x5c1016(0x1a5)],'as':_0x5c1016(0x18b),'attributes':['id',_0x5c1016(0x182),_0x5c1016(0x19d)]},{'model':User_1['default'],'as':_0x5c1016(0x1aa),'attributes':['id',_0x5c1016(0x182)]},{'model':Tag_1[_0x5c1016(0x1a5)],'as':_0x5c1016(0x1b1),'attributes':['id',_0x5c1016(0x182),_0x5c1016(0x19d)]},{'model':Whatsapp_1['default'],'as':_0x5c1016(0x196),'attributes':[_0x5c1016(0x182)]}];_0x1bfd5f==='true'&&(_0xaa3cc4={'queueId':{[sequelize_1['Op']['or']]:[_0x3cafda,null]},'userId':_0x265903});_0xaa3cc4={..._0xaa3cc4,'status':{[sequelize_1['Op']['or']]:[_0x5c1016(0x1be),_0x5c1016(0x1bd)]}};if(searchParam){const _0x278be9=searchParam['toLocaleLowerCase']()[_0x5c1016(0x1a0)]();_0x422386=[..._0x422386,{'model':Message_1['default'],'as':_0x5c1016(0x18e),'attributes':['id',_0x5c1016(0x1b3)],'where':{'body':(0x0,sequelize_1[_0x5c1016(0x1a9)])((0x0,sequelize_1['fn'])(_0x5c1016(0x1a3),(0x0,sequelize_1['col'])('body')),_0x5c1016(0x19e),'%'+_0x278be9+'%')},'required':![],'duplicating':![]}],_0xaa3cc4={..._0xaa3cc4,[sequelize_1['Op']['or']]:[{'$contact.name$':(0x0,sequelize_1[_0x5c1016(0x1a9)])((0x0,sequelize_1['fn'])(_0x5c1016(0x1a3),(0x0,sequelize_1['col'])(_0x5c1016(0x1a2))),_0x5c1016(0x19e),'%'+_0x278be9+'%')},{'$contact.number$':{[sequelize_1['Op'][_0x5c1016(0x1a1)]]:'%'+_0x278be9+'%'}},{'$message.body$':(0x0,sequelize_1[_0x5c1016(0x1a9)])((0x0,sequelize_1['fn'])(_0x5c1016(0x1a3),(0x0,sequelize_1[_0x5c1016(0x1a4)])('body')),_0x5c1016(0x19e),'%'+_0x278be9+'%')}]};}_0x2ddb8d&&(_0xaa3cc4={'createdAt':{[sequelize_1['Op'][_0x5c1016(0x192)]]:[+(0x0,date_fns_1[_0x5c1016(0x195)])((0x0,date_fns_1[_0x5c1016(0x1b5)])(_0x2ddb8d)),+(0x0,date_fns_1[_0x5c1016(0x1bc)])((0x0,date_fns_1[_0x5c1016(0x1b5)])(_0x2ddb8d))]}});_0xa117f0&&(_0xaa3cc4={'updatedAt':{[sequelize_1['Op'][_0x5c1016(0x192)]]:[+(0x0,date_fns_1[_0x5c1016(0x195)])((0x0,date_fns_1[_0x5c1016(0x1b5)])(_0xa117f0)),+(0x0,date_fns_1[_0x5c1016(0x1bc)])((0x0,date_fns_1[_0x5c1016(0x1b5)])(_0xa117f0))]}});if(_0x458cac===_0x5c1016(0x1af)){const _0x5e552b=await(0x0,ShowUserService_1['default'])(_0x265903),_0x5b87dc=_0x5e552b[_0x5c1016(0x184)]['map'](_0x19a7f0=>_0x19a7f0['id']);_0xaa3cc4={[sequelize_1['Op']['or']]:[{'userId':_0x265903},{'status':'pending'}],'queueId':{[sequelize_1['Op']['or']]:[_0x5b87dc,null]},'unreadMessages':{[sequelize_1['Op']['gt']]:0x0}};}if(Array[_0x5c1016(0x1b9)](_0x5c3a19)&&_0x5c3a19[_0x5c1016(0x189)]>0x0){const _0x5bc600=[];for(let _0x4497f0 of _0x5c3a19){const _0x2c6405=await TicketTag_1['default'][_0x5c1016(0x198)]({'where':{'tagId':_0x4497f0}});_0x2c6405&&_0x5bc600['push'](_0x2c6405[_0x5c1016(0x181)](_0xb3c441=>_0xb3c441[_0x5c1016(0x18f)]));}const _0x51dbab=(0x0,lodash_1[_0x5c1016(0x193)])(..._0x5bc600);_0xaa3cc4={..._0xaa3cc4,'id':{[sequelize_1['Op']['in']]:_0x51dbab}};}if(Array['isArray'](_0x3525b6)&&_0x3525b6[_0x5c1016(0x189)]>0x0){const _0x55ca15=[];for(let _0x298dcd of _0x3525b6){const _0x1c1ebd=await Ticket_1['default'][_0x5c1016(0x198)]({'where':{'userId':_0x298dcd}});_0x1c1ebd&&_0x55ca15['push'](_0x1c1ebd['map'](_0x2e105e=>_0x2e105e['id']));}const _0x4423dd=(0x0,lodash_1[_0x5c1016(0x193)])(..._0x55ca15);_0xaa3cc4={..._0xaa3cc4,'id':{[sequelize_1['Op']['in']]:_0x4423dd}};}const _0x481208=0x28,_0x295f45=_0x481208*(+pageNumber-0x1);_0xaa3cc4={..._0xaa3cc4,'companyId':_0x9c2ae3};const {count:_0x4b3cf8,rows:_0x42550c}=await Ticket_1['default'][_0x5c1016(0x191)]({'where':_0xaa3cc4,'include':_0x422386,'distinct':!![],'limit':_0x481208,'offset':_0x295f45,'order':[[_0x5c1016(0x1ad),'DESC']],'subQuery':![]}),_0x5bf29d=_0x4b3cf8>_0x295f45+_0x42550c['length'];return{'tickets':_0x42550c,'count':_0x4b3cf8,'hasMore':_0x5bf29d};};exports['default']=ListTicketsServiceKanban;