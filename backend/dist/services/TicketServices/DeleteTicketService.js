const a555_0x397655=a555_0x27b4;(function(_0x4a400b,_0x414455){const _0x1827e1=a555_0x27b4,_0x5f3d02=_0x4a400b();while(!![]){try{const _0x529ba2=parseInt(_0x1827e1(0x168))/0x1*(parseInt(_0x1827e1(0x14f))/0x2)+-parseInt(_0x1827e1(0x159))/0x3*(parseInt(_0x1827e1(0x162))/0x4)+-parseInt(_0x1827e1(0x151))/0x5+-parseInt(_0x1827e1(0x16a))/0x6+-parseInt(_0x1827e1(0x169))/0x7+-parseInt(_0x1827e1(0x161))/0x8+-parseInt(_0x1827e1(0x158))/0x9*(-parseInt(_0x1827e1(0x15a))/0xa);if(_0x529ba2===_0x414455)break;else _0x5f3d02['push'](_0x5f3d02['shift']());}catch(_0x245d6e){_0x5f3d02['push'](_0x5f3d02['shift']());}}}(a555_0x4b7e,0x3d096));function a555_0x4b7e(){const _0x3a201d=['1386uRcpVh','10089gygvof','91020ILoHTb','media','../../utils/logger','Error\x20on\x20save\x20tracking:\x20','../../helpers/GetPublicPath','../../models/Ticket','path','2869856BNptTI','156HYtpYU','(((.+)+)+)+$','constructor','toString','save','defineProperty','56542qCyRHj','2517235mQNQNF','612270qlPfdC','finishedAt','default','../../models/TicketTraking','logger','2XlfMhR','__esModule','1283525FWfJsB','destroy','companyId','rmSync','../../errors/AppError','findOne','apply'];a555_0x4b7e=function(){return _0x3a201d;};return a555_0x4b7e();}const a555_0x1a1537=(function(){let _0x83444c=!![];return function(_0x28d17b,_0x30e8a2){const _0x194e26=_0x83444c?function(){const _0x4fbc97=a555_0x27b4;if(_0x30e8a2){const _0x43ad38=_0x30e8a2[_0x4fbc97(0x157)](_0x28d17b,arguments);return _0x30e8a2=null,_0x43ad38;}}:function(){};return _0x83444c=![],_0x194e26;};}()),a555_0x2d5424=a555_0x1a1537(this,function(){const _0x1b2e56=a555_0x27b4;return a555_0x2d5424[_0x1b2e56(0x165)]()['search'](_0x1b2e56(0x163))[_0x1b2e56(0x165)]()[_0x1b2e56(0x164)](a555_0x2d5424)['search'](_0x1b2e56(0x163));});function a555_0x27b4(_0x4522db,_0x48b86d){const _0x45beed=a555_0x4b7e();return a555_0x27b4=function(_0x2d5424,_0x1a1537){_0x2d5424=_0x2d5424-0x14f;let _0x4b7e2c=_0x45beed[_0x2d5424];return _0x4b7e2c;},a555_0x27b4(_0x4522db,_0x48b86d);}a555_0x2d5424();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x158f6b){const _0x3e25f4=a555_0x27b4;return _0x158f6b&&_0x158f6b[_0x3e25f4(0x150)]?_0x158f6b:{'default':_0x158f6b};};Object[a555_0x397655(0x167)](exports,'__esModule',{'value':!![]});const path_1=require(a555_0x397655(0x160)),fs_1=__importDefault(require('fs')),Ticket_1=__importDefault(require(a555_0x397655(0x15f))),AppError_1=__importDefault(require(a555_0x397655(0x155))),TicketTraking_1=__importDefault(require(a555_0x397655(0x16d))),logger_1=require(a555_0x397655(0x15c)),GetPublicPath_1=require(a555_0x397655(0x15e)),DeleteTicketService=async _0x1cec2a=>{const _0x1d75c1=a555_0x397655,_0x4c5230=await Ticket_1['default'][_0x1d75c1(0x156)]({'where':{'id':_0x1cec2a}});if(!_0x4c5230)throw new AppError_1['default']('ERR_NO_TICKET_FOUND',0x194);const _0x49fc90=await TicketTraking_1[_0x1d75c1(0x16c)][_0x1d75c1(0x156)]({'where':{'ticketId':_0x4c5230['id']}});_0x49fc90&&(_0x49fc90[_0x1d75c1(0x16b)]=new Date(),_0x49fc90[_0x1d75c1(0x166)]()['catch'](_0x4111fe=>{const _0x3e123a=_0x1d75c1;logger_1[_0x3e123a(0x16e)]['error'](_0x3e123a(0x15d)+_0x4111fe['message']);}));const _0x1f5e37=(0x0,path_1['join'])((0x0,GetPublicPath_1['getPublicPath'])(),_0x1d75c1(0x15b),_0x4c5230[_0x1d75c1(0x153)]+'/'+_0x4c5230['contactId']+'/'+_0x4c5230['id']);return await _0x4c5230[_0x1d75c1(0x152)](),fs_1[_0x1d75c1(0x16c)][_0x1d75c1(0x154)](_0x1f5e37,{'recursive':!![],'force':!![]}),_0x4c5230;};exports[a555_0x397655(0x16c)]=DeleteTicketService;