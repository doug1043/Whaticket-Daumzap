const a552_0x59d919=a552_0x1b24;(function(_0x5019e2,_0x22b3cf){const _0x8bb534=a552_0x1b24,_0x36075a=_0x5019e2();while(!![]){try{const _0x994a5e=parseInt(_0x8bb534(0xbb))/0x1+-parseInt(_0x8bb534(0xaf))/0x2+parseInt(_0x8bb534(0xa2))/0x3+-parseInt(_0x8bb534(0xa8))/0x4+-parseInt(_0x8bb534(0xba))/0x5*(parseInt(_0x8bb534(0xb9))/0x6)+parseInt(_0x8bb534(0xb4))/0x7*(parseInt(_0x8bb534(0xae))/0x8)+parseInt(_0x8bb534(0xa6))/0x9*(parseInt(_0x8bb534(0xbc))/0xa);if(_0x994a5e===_0x22b3cf)break;else _0x36075a['push'](_0x36075a['shift']());}catch(_0x159f56){_0x36075a['push'](_0x36075a['shift']());}}}(a552_0x2235,0x95e8e));const a552_0x358793=(function(){let _0x2c263d=!![];return function(_0x4d3f4b,_0x302743){const _0x525c2b=_0x2c263d?function(){const _0x34c575=a552_0x1b24;if(_0x302743){const _0x2f7203=_0x302743[_0x34c575(0xb2)](_0x4d3f4b,arguments);return _0x302743=null,_0x2f7203;}}:function(){};return _0x2c263d=![],_0x525c2b;};}()),a552_0x40adc9=a552_0x358793(this,function(){const _0x492b4f=a552_0x1b24;return a552_0x40adc9[_0x492b4f(0xb0)]()['search']('(((.+)+)+)+$')[_0x492b4f(0xb0)]()[_0x492b4f(0xa7)](a552_0x40adc9)[_0x492b4f(0xa3)](_0x492b4f(0xc3));});a552_0x40adc9();'use strict';function a552_0x1b24(_0x225e4b,_0x548624){const _0x37fbec=a552_0x2235();return a552_0x1b24=function(_0x40adc9,_0x358793){_0x40adc9=_0x40adc9-0xa2;let _0x22355a=_0x37fbec[_0x40adc9];return _0x22355a;},a552_0x1b24(_0x225e4b,_0x548624);}var __importDefault=this&&this[a552_0x59d919(0xb6)]||function(_0x430367){return _0x430367&&_0x430367['__esModule']?_0x430367:{'default':_0x430367};};Object[a552_0x59d919(0xb3)](exports,a552_0x59d919(0xb1),{'value':!![]});function a552_0x2235(){const _0x20f99f=['path','../../models/Ticket','8985618DarIvA','constructor','3555068IiAtNJ','error','findOne','contactId','Error\x20on\x20save\x20tracking:\x20','destroy','26632hyKPxD','516680DmyVYB','toString','__esModule','apply','defineProperty','1393MTSZvE','logger','__importDefault','getPublicPath','../../errors/AppError','6RkjPwY','1317100MvQrJQ','304765pRMLlr','10rFzupK','catch','message','save','default','rmSync','join','(((.+)+)+)+$','ERR_NO_TICKET_FOUND','176757zxzJaY','search'];a552_0x2235=function(){return _0x20f99f;};return a552_0x2235();}const path_1=require(a552_0x59d919(0xa4)),fs_1=__importDefault(require('fs')),Ticket_1=__importDefault(require(a552_0x59d919(0xa5))),AppError_1=__importDefault(require(a552_0x59d919(0xb8))),TicketTraking_1=__importDefault(require('../../models/TicketTraking')),logger_1=require('../../utils/logger'),GetPublicPath_1=require('../../helpers/GetPublicPath'),DeleteTicketService=async _0x40f851=>{const _0x4978d8=a552_0x59d919,_0x5ca608=await Ticket_1[_0x4978d8(0xc0)][_0x4978d8(0xaa)]({'where':{'id':_0x40f851}});if(!_0x5ca608)throw new AppError_1[(_0x4978d8(0xc0))](_0x4978d8(0xc4),0x194);const _0x55d1cb=await TicketTraking_1[_0x4978d8(0xc0)][_0x4978d8(0xaa)]({'where':{'ticketId':_0x5ca608['id']}});_0x55d1cb&&(_0x55d1cb['finishedAt']=new Date(),_0x55d1cb[_0x4978d8(0xbf)]()[_0x4978d8(0xbd)](_0x546091=>{const _0x20571b=_0x4978d8;logger_1[_0x20571b(0xb5)][_0x20571b(0xa9)](_0x20571b(0xac)+_0x546091[_0x20571b(0xbe)]);}));const _0x2b7f6a=(0x0,path_1[_0x4978d8(0xc2)])((0x0,GetPublicPath_1[_0x4978d8(0xb7)])(),'media',_0x5ca608['companyId']+'/'+_0x5ca608[_0x4978d8(0xab)]+'/'+_0x5ca608['id']);return await _0x5ca608[_0x4978d8(0xad)](),fs_1['default'][_0x4978d8(0xc1)](_0x2b7f6a,{'recursive':!![],'force':!![]}),_0x5ca608;};exports[a552_0x59d919(0xc0)]=DeleteTicketService;