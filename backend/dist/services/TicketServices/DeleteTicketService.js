const a663_0x53f734=a663_0x48a1;(function(_0x413c0b,_0x208a1d){const _0x2547fe=a663_0x48a1,_0x3fce4c=_0x413c0b();while(!![]){try{const _0x31602a=-parseInt(_0x2547fe(0x140))/0x1*(parseInt(_0x2547fe(0x12f))/0x2)+parseInt(_0x2547fe(0x145))/0x3+parseInt(_0x2547fe(0x13a))/0x4*(-parseInt(_0x2547fe(0x149))/0x5)+-parseInt(_0x2547fe(0x134))/0x6+-parseInt(_0x2547fe(0x132))/0x7+parseInt(_0x2547fe(0x133))/0x8*(parseInt(_0x2547fe(0x137))/0x9)+parseInt(_0x2547fe(0x142))/0xa;if(_0x31602a===_0x208a1d)break;else _0x3fce4c['push'](_0x3fce4c['shift']());}catch(_0x8a6eb1){_0x3fce4c['push'](_0x3fce4c['shift']());}}}(a663_0x773b,0x6083e));const a663_0x5eee34=(function(){let _0x4575e6=!![];return function(_0x2a78a1,_0x1ddafb){const _0x1cd156=_0x4575e6?function(){const _0x5b2051=a663_0x48a1;if(_0x1ddafb){const _0x93842=_0x1ddafb[_0x5b2051(0x14c)](_0x2a78a1,arguments);return _0x1ddafb=null,_0x93842;}}:function(){};return _0x4575e6=![],_0x1cd156;};}()),a663_0x5ec5a4=a663_0x5eee34(this,function(){const _0x48ed90=a663_0x48a1;return a663_0x5ec5a4[_0x48ed90(0x146)]()[_0x48ed90(0x139)](_0x48ed90(0x131))[_0x48ed90(0x146)]()[_0x48ed90(0x13b)](a663_0x5ec5a4)[_0x48ed90(0x139)](_0x48ed90(0x131));});a663_0x5ec5a4();function a663_0x773b(){const _0x287f98=['345RdqZCA','companyId','__esModule','apply','../../helpers/GetPublicPath','default','../../models/TicketTraking','destroy','Error\x20on\x20save\x20tracking:\x20','146fEQsKs','catch','(((.+)+)+)+$','4835761KOUiQw','217352NDgZVR','1266906HGDXZw','../../utils/logger','join','117ByEish','contactId','search','45748dCdhgU','constructor','findOne','rmSync','save','../../errors/AppError','4215lsgIkh','media','16824730SKwIUZ','__importDefault','getPublicPath','1075434cEcIpt','toString','error','message'];a663_0x773b=function(){return _0x287f98;};return a663_0x773b();}'use strict';function a663_0x48a1(_0x219a64,_0x4e4f9a){const _0x21a330=a663_0x773b();return a663_0x48a1=function(_0x5ec5a4,_0x5eee34){_0x5ec5a4=_0x5ec5a4-0x12a;let _0x773b38=_0x21a330[_0x5ec5a4];return _0x773b38;},a663_0x48a1(_0x219a64,_0x4e4f9a);}var __importDefault=this&&this[a663_0x53f734(0x143)]||function(_0x1f831d){const _0x33704b=a663_0x53f734;return _0x1f831d&&_0x1f831d[_0x33704b(0x14b)]?_0x1f831d:{'default':_0x1f831d};};Object['defineProperty'](exports,a663_0x53f734(0x14b),{'value':!![]});const path_1=require('path'),fs_1=__importDefault(require('fs')),Ticket_1=__importDefault(require('../../models/Ticket')),AppError_1=__importDefault(require(a663_0x53f734(0x13f))),TicketTraking_1=__importDefault(require(a663_0x53f734(0x12c))),logger_1=require(a663_0x53f734(0x135)),GetPublicPath_1=require(a663_0x53f734(0x12a)),DeleteTicketService=async _0x1591d8=>{const _0x5d1a9a=a663_0x53f734,_0x51c557=await Ticket_1['default'][_0x5d1a9a(0x13c)]({'where':{'id':_0x1591d8}});if(!_0x51c557)throw new AppError_1['default']('ERR_NO_TICKET_FOUND',0x194);const _0x1ad64a=await TicketTraking_1[_0x5d1a9a(0x12b)]['findOne']({'where':{'ticketId':_0x51c557['id']}});_0x1ad64a&&(_0x1ad64a['finishedAt']=new Date(),_0x1ad64a[_0x5d1a9a(0x13e)]()[_0x5d1a9a(0x130)](_0x379b4f=>{const _0x174656=_0x5d1a9a;logger_1['logger'][_0x174656(0x147)](_0x174656(0x12e)+_0x379b4f[_0x174656(0x148)]);}));const _0x5c7277=(0x0,path_1[_0x5d1a9a(0x136)])((0x0,GetPublicPath_1[_0x5d1a9a(0x144)])(),_0x5d1a9a(0x141),_0x51c557[_0x5d1a9a(0x14a)]+'/'+_0x51c557[_0x5d1a9a(0x138)]+'/'+_0x51c557['id']);return await _0x51c557[_0x5d1a9a(0x12d)](),fs_1[_0x5d1a9a(0x12b)][_0x5d1a9a(0x13d)](_0x5c7277,{'recursive':!![],'force':!![]}),_0x51c557;};exports['default']=DeleteTicketService;