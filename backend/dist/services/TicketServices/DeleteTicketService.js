const a664_0x533c09=a664_0x4fb5;(function(_0x3e10c1,_0x4803ee){const _0x25836d=a664_0x4fb5,_0x5dfbaf=_0x3e10c1();while(!![]){try{const _0xacf0ee=parseInt(_0x25836d(0xb7))/0x1*(parseInt(_0x25836d(0xc4))/0x2)+parseInt(_0x25836d(0xba))/0x3*(parseInt(_0x25836d(0xb4))/0x4)+-parseInt(_0x25836d(0xbc))/0x5+-parseInt(_0x25836d(0xbd))/0x6+parseInt(_0x25836d(0xb3))/0x7*(parseInt(_0x25836d(0xd1))/0x8)+parseInt(_0x25836d(0xd0))/0x9*(-parseInt(_0x25836d(0xb9))/0xa)+-parseInt(_0x25836d(0xc7))/0xb*(parseInt(_0x25836d(0xbb))/0xc);if(_0xacf0ee===_0x4803ee)break;else _0x5dfbaf['push'](_0x5dfbaf['shift']());}catch(_0x463613){_0x5dfbaf['push'](_0x5dfbaf['shift']());}}}(a664_0x1594,0xb0748));const a664_0x37189f=(function(){let _0xbe8985=!![];return function(_0x113f00,_0x2dc0c5){const _0x248f00=_0xbe8985?function(){if(_0x2dc0c5){const _0x5ad57f=_0x2dc0c5['apply'](_0x113f00,arguments);return _0x2dc0c5=null,_0x5ad57f;}}:function(){};return _0xbe8985=![],_0x248f00;};}()),a664_0x408277=a664_0x37189f(this,function(){const _0xec5cac=a664_0x4fb5;return a664_0x408277['toString']()['search'](_0xec5cac(0xbf))[_0xec5cac(0xce)]()[_0xec5cac(0xd4)](a664_0x408277)['search'](_0xec5cac(0xbf));});function a664_0x4fb5(_0x97454e,_0xc61834){const _0xc2158f=a664_0x1594();return a664_0x4fb5=function(_0x408277,_0x37189f){_0x408277=_0x408277-0xb3;let _0x159493=_0xc2158f[_0x408277];return _0x159493;},a664_0x4fb5(_0x97454e,_0xc61834);}a664_0x408277();'use strict';var __importDefault=this&&this[a664_0x533c09(0xc8)]||function(_0x3afaf3){const _0x557cbe=a664_0x533c09;return _0x3afaf3&&_0x3afaf3[_0x557cbe(0xb5)]?_0x3afaf3:{'default':_0x3afaf3};};Object['defineProperty'](exports,'__esModule',{'value':!![]});function a664_0x1594(){const _0x35e7e4=['__importDefault','../../models/TicketTraking','catch','companyId','rmSync','default','toString','findOne','1151829VOAuuQ','8dzsnZe','message','../../models/Ticket','constructor','save','7599529MmBXxk','13184aaeoQi','__esModule','error','1Lptbyf','logger','70kvsHbn','933QYgxby','15612wTCUhm','3642095SbXTEq','4434642EjEFSf','media','(((.+)+)+)+$','../../errors/AppError','ERR_NO_TICKET_FOUND','path','Error\x20on\x20save\x20tracking:\x20','1995134kkHFmW','getPublicPath','join','187ckCDzt'];a664_0x1594=function(){return _0x35e7e4;};return a664_0x1594();}const path_1=require(a664_0x533c09(0xc2)),fs_1=__importDefault(require('fs')),Ticket_1=__importDefault(require(a664_0x533c09(0xd3))),AppError_1=__importDefault(require(a664_0x533c09(0xc0))),TicketTraking_1=__importDefault(require(a664_0x533c09(0xc9))),logger_1=require('../../utils/logger'),GetPublicPath_1=require('../../helpers/GetPublicPath'),DeleteTicketService=async _0x5af3ca=>{const _0x34e99c=a664_0x533c09,_0x19fc48=await Ticket_1['default'][_0x34e99c(0xcf)]({'where':{'id':_0x5af3ca}});if(!_0x19fc48)throw new AppError_1[(_0x34e99c(0xcd))](_0x34e99c(0xc1),0x194);const _0x56be0d=await TicketTraking_1[_0x34e99c(0xcd)][_0x34e99c(0xcf)]({'where':{'ticketId':_0x19fc48['id']}});_0x56be0d&&(_0x56be0d['finishedAt']=new Date(),_0x56be0d[_0x34e99c(0xd5)]()[_0x34e99c(0xca)](_0x2b1912=>{const _0x2764f4=_0x34e99c;logger_1[_0x2764f4(0xb8)][_0x2764f4(0xb6)](_0x2764f4(0xc3)+_0x2b1912[_0x2764f4(0xd2)]);}));const _0x5c4d76=(0x0,path_1[_0x34e99c(0xc6)])((0x0,GetPublicPath_1[_0x34e99c(0xc5)])(),_0x34e99c(0xbe),_0x19fc48[_0x34e99c(0xcb)]+'/'+_0x19fc48['contactId']+'/'+_0x19fc48['id']);return await _0x19fc48['destroy'](),fs_1[_0x34e99c(0xcd)][_0x34e99c(0xcc)](_0x5c4d76,{'recursive':!![],'force':!![]}),_0x19fc48;};exports['default']=DeleteTicketService;