const a554_0x41858c=a554_0x240b;(function(_0x46706d,_0x5c03a4){const _0x22c9af=a554_0x240b,_0x36e3de=_0x46706d();while(!![]){try{const _0x5603eb=-parseInt(_0x22c9af(0x174))/0x1*(-parseInt(_0x22c9af(0x168))/0x2)+parseInt(_0x22c9af(0x172))/0x3+parseInt(_0x22c9af(0x182))/0x4+-parseInt(_0x22c9af(0x179))/0x5+-parseInt(_0x22c9af(0x16f))/0x6*(-parseInt(_0x22c9af(0x16a))/0x7)+-parseInt(_0x22c9af(0x165))/0x8*(parseInt(_0x22c9af(0x187))/0x9)+-parseInt(_0x22c9af(0x17f))/0xa;if(_0x5603eb===_0x5c03a4)break;else _0x36e3de['push'](_0x36e3de['shift']());}catch(_0x56b97c){_0x36e3de['push'](_0x36e3de['shift']());}}}(a554_0x4fdc,0x67813));const a554_0x253eca=(function(){let _0x42c3a0=!![];return function(_0x3e4502,_0x2d5f85){const _0x241828=_0x42c3a0?function(){const _0x1eaced=a554_0x240b;if(_0x2d5f85){const _0x4b0bc4=_0x2d5f85[_0x1eaced(0x178)](_0x3e4502,arguments);return _0x2d5f85=null,_0x4b0bc4;}}:function(){};return _0x42c3a0=![],_0x241828;};}()),a554_0x57d166=a554_0x253eca(this,function(){const _0x116337=a554_0x240b;return a554_0x57d166[_0x116337(0x16b)]()[_0x116337(0x186)](_0x116337(0x17c))['toString']()[_0x116337(0x185)](a554_0x57d166)[_0x116337(0x186)](_0x116337(0x17c));});a554_0x57d166();'use strict';var __importDefault=this&&this[a554_0x41858c(0x170)]||function(_0x18139d){const _0x2376a2=a554_0x41858c;return _0x18139d&&_0x18139d[_0x2376a2(0x164)]?_0x18139d:{'default':_0x18139d};};function a554_0x240b(_0x145f78,_0x47a757){const _0x544aec=a554_0x4fdc();return a554_0x240b=function(_0x57d166,_0x253eca){_0x57d166=_0x57d166-0x162;let _0x4fdc82=_0x544aec[_0x57d166];return _0x4fdc82;},a554_0x240b(_0x145f78,_0x47a757);}Object[a554_0x41858c(0x163)](exports,a554_0x41858c(0x164),{'value':!![]});const AppError_1=__importDefault(require(a554_0x41858c(0x177))),CheckContactOpenTickets_1=__importDefault(require(a554_0x41858c(0x16d))),GetDefaultWhatsApp_1=__importDefault(require(a554_0x41858c(0x17d))),Ticket_1=__importDefault(require(a554_0x41858c(0x17a))),ShowContactService_1=__importDefault(require(a554_0x41858c(0x16e))),socket_1=require(a554_0x41858c(0x180)),FindOrCreateATicketTrakingService_1=__importDefault(require(a554_0x41858c(0x183))),CreateTicketService=async({contactId:_0x443cd2,userId:_0x2a3f5d,queueId:_0x13dc05,companyId:_0x38c216})=>{const _0x24ea8e=a554_0x41858c,_0x330ff6=await(0x0,GetDefaultWhatsApp_1[_0x24ea8e(0x17b)])(_0x38c216);await(0x0,CheckContactOpenTickets_1[_0x24ea8e(0x17b)])(_0x443cd2,_0x330ff6['id']);const {isGroup:_0x2da622}=await(0x0,ShowContactService_1[_0x24ea8e(0x17b)])(_0x443cd2,_0x38c216),{id:_0x3f44ad}=await Ticket_1['default'][_0x24ea8e(0x16c)]({'contactId':_0x443cd2,'companyId':_0x38c216,'queueId':_0x13dc05,'whatsappId':_0x330ff6['id'],'status':_0x24ea8e(0x175),'isGroup':_0x2da622,'userId':_0x2a3f5d,'lastProcessedMessageId':null}),_0x12c64a=await Ticket_1[_0x24ea8e(0x17b)][_0x24ea8e(0x166)](_0x3f44ad,{'include':[_0x24ea8e(0x17e),_0x24ea8e(0x184),'whatsapp',_0x24ea8e(0x169)]});if(!_0x12c64a)throw new AppError_1[(_0x24ea8e(0x17b))](_0x24ea8e(0x167));await(0x0,FindOrCreateATicketTrakingService_1['default'])({'ticketId':_0x12c64a['id'],'companyId':_0x12c64a['companyId'],'whatsappId':_0x12c64a[_0x24ea8e(0x171)],'userId':_0x12c64a[_0x24ea8e(0x181)]});const _0x3be105=(0x0,socket_1[_0x24ea8e(0x176)])();return _0x3be105['to'](_0x12c64a['id']['toString']())['emit'](_0x24ea8e(0x173),{'action':_0x24ea8e(0x162),'ticket':_0x12c64a}),_0x12c64a;};exports['default']=CreateTicketService;function a554_0x4fdc(){const _0x24a3f7=['findByPk','ERR_CREATING_TICKET','944OvTUtC','user','2870357yjGNEz','toString','create','../../helpers/CheckContactOpenTickets','../ContactServices/ShowContactService','6VliCPB','__importDefault','whatsappId','202719duiLMg','ticket','881QBuSKx','open','getIO','../../errors/AppError','apply','2650570lKYPch','../../models/Ticket','default','(((.+)+)+)+$','../../helpers/GetDefaultWhatsApp','contact','1198240dnQUVZ','../../libs/socket','userId','1141072ftyOYA','./FindOrCreateATicketTrakingService','queue','constructor','search','943479skYAjI','update','defineProperty','__esModule','8ZWnShj'];a554_0x4fdc=function(){return _0x24a3f7;};return a554_0x4fdc();}