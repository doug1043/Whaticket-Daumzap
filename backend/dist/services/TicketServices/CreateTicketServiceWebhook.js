function a662_0x4701(_0x3eaebc,_0x24e846){const _0x3e85c3=a662_0x1763();return a662_0x4701=function(_0x47c2f7,_0x4c32bb){_0x47c2f7=_0x47c2f7-0xf3;let _0x176376=_0x3e85c3[_0x47c2f7];return _0x176376;},a662_0x4701(_0x3eaebc,_0x24e846);}const a662_0x24c57c=a662_0x4701;(function(_0x3a4ace,_0x51101d){const _0x9bd1df=a662_0x4701,_0x4d6d74=_0x3a4ace();while(!![]){try{const _0x4c8458=-parseInt(_0x9bd1df(0x10a))/0x1+parseInt(_0x9bd1df(0xf6))/0x2*(parseInt(_0x9bd1df(0x106))/0x3)+-parseInt(_0x9bd1df(0x108))/0x4+parseInt(_0x9bd1df(0x101))/0x5+-parseInt(_0x9bd1df(0x10c))/0x6*(parseInt(_0x9bd1df(0xfc))/0x7)+parseInt(_0x9bd1df(0x109))/0x8+parseInt(_0x9bd1df(0xfe))/0x9*(parseInt(_0x9bd1df(0x102))/0xa);if(_0x4c8458===_0x51101d)break;else _0x4d6d74['push'](_0x4d6d74['shift']());}catch(_0x475719){_0x4d6d74['push'](_0x4d6d74['shift']());}}}(a662_0x1763,0x5bd13));function a662_0x1763(){const _0xf71c54=['1433264QFpgUB','../../models/Ticket','9TMQfQA','ERR_CREATING_TICKET','ticket','1267420xESiuO','496420lRGKBt','contact','toString','search','505893EfCsew','default','441904CHgQIN','2838696qNHkal','135283HHQovA','../../errors/AppError','6OlAYbk','findByPk','defineProperty','getIO','emit','update','queue','2HdTOOh','__importDefault','(((.+)+)+)+$','findOrCreate','__esModule','../../libs/socket'];a662_0x1763=function(){return _0xf71c54;};return a662_0x1763();}const a662_0x4c32bb=(function(){let _0x2dca85=!![];return function(_0x456d89,_0x23cc3d){const _0x354d3f=_0x2dca85?function(){if(_0x23cc3d){const _0x336a9c=_0x23cc3d['apply'](_0x456d89,arguments);return _0x23cc3d=null,_0x336a9c;}}:function(){};return _0x2dca85=![],_0x354d3f;};}()),a662_0x47c2f7=a662_0x4c32bb(this,function(){const _0x1c0b4a=a662_0x4701;return a662_0x47c2f7[_0x1c0b4a(0x104)]()[_0x1c0b4a(0x105)](_0x1c0b4a(0xf8))['toString']()['constructor'](a662_0x47c2f7)['search'](_0x1c0b4a(0xf8));});a662_0x47c2f7();'use strict';var __importDefault=this&&this[a662_0x24c57c(0xf7)]||function(_0x594a0a){const _0x3c9516=a662_0x24c57c;return _0x594a0a&&_0x594a0a[_0x3c9516(0xfa)]?_0x594a0a:{'default':_0x594a0a};};Object[a662_0x24c57c(0x10e)](exports,a662_0x24c57c(0xfa),{'value':!![]});const AppError_1=__importDefault(require(a662_0x24c57c(0x10b))),CheckContactOpenTickets_1=__importDefault(require('../../helpers/CheckContactOpenTickets')),GetDefaultWhatsApp_1=__importDefault(require('../../helpers/GetDefaultWhatsApp')),Ticket_1=__importDefault(require(a662_0x24c57c(0xfd))),socket_1=require(a662_0x24c57c(0xfb)),CreateTicketServiceWebhook=async({contactId:_0x5c4b8c,status:_0xb05d2,userId:_0x2c47ef,whatsappId:_0x213eb1,queueId:_0x44a74a,companyId:_0x24cacb,lastFlowId:_0x205e46,dataWebhook:_0x479b29,hashFlowId:_0x3100a4,flowStopped:_0x508bda})=>{const _0x2d07c2=a662_0x24c57c,_0x17832f=await(0x0,GetDefaultWhatsApp_1[_0x2d07c2(0x107)])(_0x24cacb),_0x270f32=await(0x0,CheckContactOpenTickets_1['default'])(_0x5c4b8c,_0x213eb1||_0x17832f['id'],!![]),_0x6fe25b=![],[{id:_0x57b7fc}]=await Ticket_1[_0x2d07c2(0x107)][_0x2d07c2(0xf9)]({'where':{'contactId':_0x5c4b8c,'companyId':_0x24cacb},'defaults':{'contactId':_0x5c4b8c,'companyId':_0x24cacb,'whatsappId':_0x17832f['id'],'status':_0xb05d2,'isGroup':_0x6fe25b,'userId':_0x2c47ef,'flowWebhook':!![],'dataWebhook':_0x479b29,'hashFlowId':_0x3100a4,'flowStopped':_0x508bda}});await Ticket_1[_0x2d07c2(0x107)][_0x2d07c2(0xf4)]({'companyId':_0x24cacb,'queueId':_0x44a74a,'userId':_0x2c47ef,'whatsappId':_0x17832f['id'],'status':'open','flowWebhook':!![],'lastFlowId':_0x205e46,'flowStopped':_0x508bda},{'where':{'id':_0x57b7fc}});const _0x3e6fdc=await Ticket_1[_0x2d07c2(0x107)][_0x2d07c2(0x10d)](_0x57b7fc,{'include':[_0x2d07c2(0x103),_0x2d07c2(0xf5)]});if(!_0x3e6fdc)throw new AppError_1[(_0x2d07c2(0x107))](_0x2d07c2(0xff));const _0xcbc011=(0x0,socket_1[_0x2d07c2(0x10f)])();return _0xcbc011['to'](_0x3e6fdc['id']['toString']())[_0x2d07c2(0xf3)](_0x2d07c2(0x100),{'action':_0x2d07c2(0xf4),'ticket':_0x3e6fdc}),_0x3e6fdc;};exports[a662_0x24c57c(0x107)]=CreateTicketServiceWebhook;