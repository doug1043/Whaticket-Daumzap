const a663_0x373142=a663_0x29ef;(function(_0x25ab0c,_0x3e27f1){const _0x10c21e=a663_0x29ef,_0x5120de=_0x25ab0c();while(!![]){try{const _0xf566f5=-parseInt(_0x10c21e(0x105))/0x1*(-parseInt(_0x10c21e(0xf9))/0x2)+parseInt(_0x10c21e(0x100))/0x3*(-parseInt(_0x10c21e(0xf8))/0x4)+-parseInt(_0x10c21e(0x10c))/0x5*(-parseInt(_0x10c21e(0x10b))/0x6)+-parseInt(_0x10c21e(0x109))/0x7*(parseInt(_0x10c21e(0xf3))/0x8)+-parseInt(_0x10c21e(0x10d))/0x9*(-parseInt(_0x10c21e(0x10e))/0xa)+parseInt(_0x10c21e(0xff))/0xb*(parseInt(_0x10c21e(0x102))/0xc)+-parseInt(_0x10c21e(0xfa))/0xd*(-parseInt(_0x10c21e(0x108))/0xe);if(_0xf566f5===_0x3e27f1)break;else _0x5120de['push'](_0x5120de['shift']());}catch(_0x2bbf49){_0x5120de['push'](_0x5120de['shift']());}}}(a663_0xdd46,0xb17b8));const a663_0x634e3d=(function(){let _0x3f331c=!![];return function(_0x91cc56,_0x383f64){const _0x4b71fd=_0x3f331c?function(){if(_0x383f64){const _0x3c95b1=_0x383f64['apply'](_0x91cc56,arguments);return _0x383f64=null,_0x3c95b1;}}:function(){};return _0x3f331c=![],_0x4b71fd;};}()),a663_0x30381c=a663_0x634e3d(this,function(){const _0x11b19a=a663_0x29ef;return a663_0x30381c[_0x11b19a(0xf7)]()[_0x11b19a(0x110)]('(((.+)+)+)+$')['toString']()['constructor'](a663_0x30381c)['search'](_0x11b19a(0x103));});a663_0x30381c();'use strict';function a663_0x29ef(_0x5f11e7,_0x5ccda0){const _0x831ebc=a663_0xdd46();return a663_0x29ef=function(_0x30381c,_0x634e3d){_0x30381c=_0x30381c-0xf2;let _0xdd46e1=_0x831ebc[_0x30381c];return _0xdd46e1;},a663_0x29ef(_0x5f11e7,_0x5ccda0);}var __importDefault=this&&this[a663_0x373142(0x106)]||function(_0x5f9c85){const _0x2476c2=a663_0x373142;return _0x5f9c85&&_0x5f9c85[_0x2476c2(0x107)]?_0x5f9c85:{'default':_0x5f9c85};};Object['defineProperty'](exports,a663_0x373142(0x107),{'value':!![]});const AppError_1=__importDefault(require(a663_0x373142(0xfb))),CheckContactOpenTickets_1=__importDefault(require(a663_0x373142(0xfe))),GetDefaultWhatsApp_1=__importDefault(require(a663_0x373142(0x112))),Ticket_1=__importDefault(require(a663_0x373142(0xf5))),socket_1=require(a663_0x373142(0xfc)),CreateTicketServiceWebhook=async({contactId:_0x40fd02,status:_0x10925f,userId:_0x38b1ef,whatsappId:_0x58e3e9,queueId:_0x32fbbd,companyId:_0x1f0255,lastFlowId:_0x176e58,dataWebhook:_0x326fe8,hashFlowId:_0x296b30,flowStopped:_0x33f77d})=>{const _0x85ce=a663_0x373142,_0x17ef34=await(0x0,GetDefaultWhatsApp_1['default'])(_0x1f0255),_0x520051=await(0x0,CheckContactOpenTickets_1[_0x85ce(0x10a)])(_0x40fd02,_0x58e3e9||_0x17ef34['id'],!![]),_0x5d6118=![],[{id:_0x57c9b1}]=await Ticket_1['default'][_0x85ce(0x113)]({'where':{'contactId':_0x40fd02,'companyId':_0x1f0255},'defaults':{'contactId':_0x40fd02,'companyId':_0x1f0255,'whatsappId':_0x17ef34['id'],'status':_0x10925f,'isGroup':_0x5d6118,'userId':_0x38b1ef,'flowWebhook':!![],'dataWebhook':_0x326fe8,'hashFlowId':_0x296b30,'flowStopped':_0x33f77d}});await Ticket_1[_0x85ce(0x10a)][_0x85ce(0xf4)]({'companyId':_0x1f0255,'queueId':_0x32fbbd,'userId':_0x38b1ef,'whatsappId':_0x17ef34['id'],'status':_0x85ce(0x101),'flowWebhook':!![],'lastFlowId':_0x176e58,'flowStopped':_0x33f77d},{'where':{'id':_0x57c9b1}});const _0x2c65d1=await Ticket_1[_0x85ce(0x10a)][_0x85ce(0xf2)](_0x57c9b1,{'include':[_0x85ce(0x111),_0x85ce(0x104)]});if(!_0x2c65d1)throw new AppError_1[(_0x85ce(0x10a))]('ERR_CREATING_TICKET');const _0x164f9c=(0x0,socket_1[_0x85ce(0xfd)])();return _0x164f9c['to'](_0x2c65d1['id'][_0x85ce(0xf7)]())[_0x85ce(0xf6)](_0x85ce(0x10f),{'action':_0x85ce(0xf4),'ticket':_0x2c65d1}),_0x2c65d1;};function a663_0xdd46(){const _0x6146a8=['824908NuuZqA','16751ombrjn','default','1100064slFvxK','5kAJWea','24507qdyNkH','350EHLrJn','ticket','search','contact','../../helpers/GetDefaultWhatsApp','findOrCreate','findByPk','424ZNyCvv','update','../../models/Ticket','emit','toString','50872quTUXa','10QJqTbj','208oLVoCD','../../errors/AppError','../../libs/socket','getIO','../../helpers/CheckContactOpenTickets','1859JZuxFR','240zAGgbj','open','27228gBFIqq','(((.+)+)+)+$','queue','53275zChyqh','__importDefault','__esModule'];a663_0xdd46=function(){return _0x6146a8;};return a663_0xdd46();}exports[a663_0x373142(0x10a)]=CreateTicketServiceWebhook;