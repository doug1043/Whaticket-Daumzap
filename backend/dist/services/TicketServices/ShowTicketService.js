const a670_0x3b9fa4=a670_0x59cd;(function(_0x5c49da,_0x18d08c){const _0x369c81=a670_0x59cd,_0x5f2424=_0x5c49da();while(!![]){try{const _0x3f68bd=parseInt(_0x369c81(0x143))/0x1*(-parseInt(_0x369c81(0x12c))/0x2)+parseInt(_0x369c81(0x124))/0x3*(parseInt(_0x369c81(0x115))/0x4)+parseInt(_0x369c81(0x141))/0x5+-parseInt(_0x369c81(0x122))/0x6*(parseInt(_0x369c81(0x125))/0x7)+parseInt(_0x369c81(0x13a))/0x8+-parseInt(_0x369c81(0x10e))/0x9*(parseInt(_0x369c81(0x123))/0xa)+parseInt(_0x369c81(0x114))/0xb*(parseInt(_0x369c81(0x128))/0xc);if(_0x3f68bd===_0x18d08c)break;else _0x5f2424['push'](_0x5f2424['shift']());}catch(_0x3e0c88){_0x5f2424['push'](_0x5f2424['shift']());}}}(a670_0x53cf,0x887b4));const a670_0x30cd1a=(function(){let _0x8799d2=!![];return function(_0x22fb7e,_0x11ae53){const _0x5b92ae=_0x8799d2?function(){const _0x2bb824=a670_0x59cd;if(_0x11ae53){const _0x3807b3=_0x11ae53[_0x2bb824(0x140)](_0x22fb7e,arguments);return _0x11ae53=null,_0x3807b3;}}:function(){};return _0x8799d2=![],_0x5b92ae;};}()),a670_0x1d9762=a670_0x30cd1a(this,function(){const _0x2d580d=a670_0x59cd;return a670_0x1d9762[_0x2d580d(0x121)]()[_0x2d580d(0x110)](_0x2d580d(0x12e))['toString']()[_0x2d580d(0x129)](a670_0x1d9762)[_0x2d580d(0x110)]('(((.+)+)+)+$');});a670_0x1d9762();'use strict';function a670_0x59cd(_0x2f7b8f,_0x28df74){const _0x170bd1=a670_0x53cf();return a670_0x59cd=function(_0x1d9762,_0x30cd1a){_0x1d9762=_0x1d9762-0x10e;let _0x53cf9a=_0x170bd1[_0x1d9762];return _0x53cf9a;},a670_0x59cd(_0x2f7b8f,_0x28df74);}var __importDefault=this&&this[a670_0x3b9fa4(0x119)]||function(_0x44e9da){const _0x5c1242=a670_0x3b9fa4;return _0x44e9da&&_0x44e9da[_0x5c1242(0x12f)]?_0x44e9da:{'default':_0x44e9da};};function a670_0x53cf(){const _0x56ed43=['number','contact','../../models/Whatsapp','4587PillDZ','13544thpGaY','admin','canSpyConversations','ERR_NO_PERMISSION','__importDefault','email','../../errors/AppError','Não\x20é\x20possível\x20consultar\x20registros\x20de\x20outra\x20empresa','../../models/Tag','../../models/Contact','color','../../models/UserSocketSession','toString','120UusRYp','10hTBspG','429KIRgiY','33551ZBXytr','ERR_NO_TICKET_FOUND','extraInfo','21336CbksZv','constructor','profilePicUrl','profile','4UAGIhd','disableBot','(((.+)+)+)+$','__esModule','whatsapp','name','socketSessions','tags','../../models/Company','../../models/Queue','userId','findOne','../../models/Ticket','facebookUserToken','2021760XRbYNd','default','presence','userProfile','queue','user','apply','150600lZSmpX','object','388041AdHzjD','defineProperty','697446gUMGeB','companyId','search'];a670_0x53cf=function(){return _0x56ed43;};return a670_0x53cf();}Object[a670_0x3b9fa4(0x144)](exports,'__esModule',{'value':!![]});const Ticket_1=__importDefault(require(a670_0x3b9fa4(0x138))),AppError_1=__importDefault(require(a670_0x3b9fa4(0x11b))),Contact_1=__importDefault(require(a670_0x3b9fa4(0x11e))),User_1=__importDefault(require('../../models/User')),Queue_1=__importDefault(require(a670_0x3b9fa4(0x135))),Tag_1=__importDefault(require(a670_0x3b9fa4(0x11d))),Whatsapp_1=__importDefault(require(a670_0x3b9fa4(0x113))),UserSocketSession_1=__importDefault(require(a670_0x3b9fa4(0x120))),Company_1=__importDefault(require(a670_0x3b9fa4(0x134))),ShowTicketService=async(_0x35bdd4,_0x5b5f7d)=>{const _0x10345f=a670_0x3b9fa4;let _0x338041,_0x24a565,_0x487b28,_0x3a972b,_0x3a9442;typeof _0x35bdd4===_0x10345f(0x142)?(_0x338041=_0x35bdd4['id'],_0x3a9442=_0x35bdd4[_0x10345f(0x10f)],_0x24a565=_0x35bdd4[_0x10345f(0x136)],_0x487b28=_0x35bdd4[_0x10345f(0x13d)],_0x3a972b=_0x35bdd4[_0x10345f(0x117)]):(_0x338041=_0x35bdd4,_0x3a9442=_0x5b5f7d);const _0x196e9d=await Ticket_1['default'][_0x10345f(0x137)]({'where':{'id':_0x338041},'include':[{'model':Contact_1[_0x10345f(0x13b)],'as':_0x10345f(0x112),'attributes':['id',_0x10345f(0x131),_0x10345f(0x111),_0x10345f(0x11a),_0x10345f(0x12a),_0x10345f(0x13c),_0x10345f(0x12d)],'include':[_0x10345f(0x127)]},{'model':User_1['default'],'as':_0x10345f(0x13f),'attributes':['id','name'],'include':[{'model':UserSocketSession_1['default'],'as':_0x10345f(0x132),'where':{'active':!![]},'required':![]}]},{'model':Queue_1['default'],'as':_0x10345f(0x13e),'attributes':['id',_0x10345f(0x131),_0x10345f(0x11f)]},{'model':Whatsapp_1['default'],'as':_0x10345f(0x130),'attributes':[_0x10345f(0x131),_0x10345f(0x139),'facebookUserId']},{'model':Tag_1['default'],'as':_0x10345f(0x133),'attributes':['id',_0x10345f(0x131),_0x10345f(0x11f)]},{'model':Company_1['default'],'as':'company','attributes':['id',_0x10345f(0x131)]}]});if(_0x196e9d?.[_0x10345f(0x10f)]!==_0x3a9442)throw new AppError_1[(_0x10345f(0x13b))](_0x10345f(0x11c));if(!_0x196e9d)throw new AppError_1[(_0x10345f(0x13b))](_0x10345f(0x126),0x194);if(_0x24a565!==undefined&&_0x487b28!==undefined){const _0x56696e=_0x487b28==='admin',_0x353309=_0x196e9d[_0x10345f(0x136)]===_0x24a565,_0x23eb99=_0x487b28==='superv';if(_0x56696e)return _0x196e9d;if(_0x23eb99){if(_0x196e9d[_0x10345f(0x13f)]){const _0x11b24a=await User_1[_0x10345f(0x13b)]['findByPk'](_0x196e9d['userId'],{'attributes':['profile']});if(_0x11b24a&&_0x11b24a[_0x10345f(0x12b)]===_0x10345f(0x116))throw new AppError_1[(_0x10345f(0x13b))](_0x10345f(0x118),0x193);}return _0x196e9d;}if(!_0x353309)throw new AppError_1[(_0x10345f(0x13b))](_0x10345f(0x118),0x193);}return _0x196e9d;};exports['default']=ShowTicketService;