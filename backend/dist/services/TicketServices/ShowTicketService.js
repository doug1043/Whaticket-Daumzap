const a669_0x390281=a669_0x5c33;(function(_0x3de5ba,_0x45033b){const _0x269540=a669_0x5c33,_0x51b5d3=_0x3de5ba();while(!![]){try{const _0x2efbd1=-parseInt(_0x269540(0x1cc))/0x1*(-parseInt(_0x269540(0x1bf))/0x2)+-parseInt(_0x269540(0x1c4))/0x3*(-parseInt(_0x269540(0x1e8))/0x4)+parseInt(_0x269540(0x1e5))/0x5+-parseInt(_0x269540(0x1ca))/0x6+parseInt(_0x269540(0x1c5))/0x7*(-parseInt(_0x269540(0x1e7))/0x8)+parseInt(_0x269540(0x1d6))/0x9+-parseInt(_0x269540(0x1e9))/0xa*(-parseInt(_0x269540(0x1de))/0xb);if(_0x2efbd1===_0x45033b)break;else _0x51b5d3['push'](_0x51b5d3['shift']());}catch(_0x5eb892){_0x51b5d3['push'](_0x51b5d3['shift']());}}}(a669_0x50f7,0xdaf8b));function a669_0x50f7(){const _0x2be56e=['ERR_NO_TICKET_FOUND','admin','8159790yNhIom','userId','1HlQYuA','number','disableBot','facebookUserId','__esModule','../../models/Contact','profilePicUrl','../../models/Tag','extraInfo','presence','3483504YMMffX','../../models/User','default','constructor','Não\x20é\x20possível\x20consultar\x20registros\x20de\x20outra\x20empresa','company','userProfile','name','729905LeDKMv','color','tags','profile','contact','user','findByPk','6025670RkxTfe','../../models/Queue','1407592tUsewf','11968pMllmf','10fGVrip','(((.+)+)+)+$','email','3007684YXQWTV','ERR_NO_PERMISSION','toString','whatsapp','companyId','327prdgda','49Qiwhej','../../models/Company','socketSessions'];a669_0x50f7=function(){return _0x2be56e;};return a669_0x50f7();}const a669_0x5cf6f6=(function(){let _0x2e7db0=!![];return function(_0x3abe7b,_0x481385){const _0x9d6f83=_0x2e7db0?function(){if(_0x481385){const _0x5461d4=_0x481385['apply'](_0x3abe7b,arguments);return _0x481385=null,_0x5461d4;}}:function(){};return _0x2e7db0=![],_0x9d6f83;};}()),a669_0x14bc48=a669_0x5cf6f6(this,function(){const _0x2b8cea=a669_0x5c33;return a669_0x14bc48[_0x2b8cea(0x1c1)]()['search'](_0x2b8cea(0x1ea))[_0x2b8cea(0x1c1)]()[_0x2b8cea(0x1d9)](a669_0x14bc48)['search']('(((.+)+)+)+$');});function a669_0x5c33(_0x35ff6a,_0x20dad8){const _0x1a4353=a669_0x50f7();return a669_0x5c33=function(_0x14bc48,_0x5cf6f6){_0x14bc48=_0x14bc48-0x1be;let _0x50f749=_0x1a4353[_0x14bc48];return _0x50f749;},a669_0x5c33(_0x35ff6a,_0x20dad8);}a669_0x14bc48();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x18daf4){const _0x5b841e=a669_0x5c33;return _0x18daf4&&_0x18daf4[_0x5b841e(0x1d0)]?_0x18daf4:{'default':_0x18daf4};};Object['defineProperty'](exports,a669_0x390281(0x1d0),{'value':!![]});const Ticket_1=__importDefault(require('../../models/Ticket')),AppError_1=__importDefault(require('../../errors/AppError')),Contact_1=__importDefault(require(a669_0x390281(0x1d1))),User_1=__importDefault(require(a669_0x390281(0x1d7))),Queue_1=__importDefault(require(a669_0x390281(0x1e6))),Tag_1=__importDefault(require(a669_0x390281(0x1d3))),Whatsapp_1=__importDefault(require('../../models/Whatsapp')),UserSocketSession_1=__importDefault(require('../../models/UserSocketSession')),Company_1=__importDefault(require(a669_0x390281(0x1c6))),ShowTicketService=async(_0x5e13ac,_0x154f9c)=>{const _0x245815=a669_0x390281;let _0x2f07e5,_0x58d667,_0x10835b,_0x4cff7c,_0x2a6904;typeof _0x5e13ac==='object'?(_0x2f07e5=_0x5e13ac['id'],_0x2a6904=_0x5e13ac[_0x245815(0x1c3)],_0x58d667=_0x5e13ac['userId'],_0x10835b=_0x5e13ac[_0x245815(0x1dc)],_0x4cff7c=_0x5e13ac['canSpyConversations']):(_0x2f07e5=_0x5e13ac,_0x2a6904=_0x154f9c);const _0x137032=await Ticket_1[_0x245815(0x1d8)]['findOne']({'where':{'id':_0x2f07e5},'include':[{'model':Contact_1[_0x245815(0x1d8)],'as':_0x245815(0x1e2),'attributes':['id',_0x245815(0x1dd),_0x245815(0x1cd),_0x245815(0x1be),_0x245815(0x1d2),_0x245815(0x1d5),_0x245815(0x1ce)],'include':[_0x245815(0x1d4)]},{'model':User_1['default'],'as':_0x245815(0x1e3),'attributes':['id',_0x245815(0x1dd)],'include':[{'model':UserSocketSession_1['default'],'as':_0x245815(0x1c7),'where':{'active':!![]},'required':![]}]},{'model':Queue_1[_0x245815(0x1d8)],'as':'queue','attributes':['id','name',_0x245815(0x1df)]},{'model':Whatsapp_1[_0x245815(0x1d8)],'as':_0x245815(0x1c2),'attributes':['name','facebookUserToken',_0x245815(0x1cf)]},{'model':Tag_1[_0x245815(0x1d8)],'as':_0x245815(0x1e0),'attributes':['id',_0x245815(0x1dd),_0x245815(0x1df)]},{'model':Company_1[_0x245815(0x1d8)],'as':_0x245815(0x1db),'attributes':['id',_0x245815(0x1dd)]}]});if(_0x137032?.[_0x245815(0x1c3)]!==_0x2a6904)throw new AppError_1[(_0x245815(0x1d8))](_0x245815(0x1da));if(!_0x137032)throw new AppError_1['default'](_0x245815(0x1c8),0x194);if(_0x58d667!==undefined&&_0x10835b!==undefined){const _0x32819f=_0x10835b===_0x245815(0x1c9),_0x3967f4=_0x137032[_0x245815(0x1cb)]===_0x58d667,_0x4e0c38=_0x10835b==='superv';if(_0x32819f)return _0x137032;if(_0x4e0c38){if(_0x137032[_0x245815(0x1e3)]){const _0x193e2c=await User_1[_0x245815(0x1d8)][_0x245815(0x1e4)](_0x137032[_0x245815(0x1cb)],{'attributes':[_0x245815(0x1e1)]});if(_0x193e2c&&_0x193e2c['profile']===_0x245815(0x1c9))throw new AppError_1[(_0x245815(0x1d8))]('ERR_NO_PERMISSION',0x193);}return _0x137032;}if(!_0x3967f4)throw new AppError_1[(_0x245815(0x1d8))](_0x245815(0x1c0),0x193);}return _0x137032;};exports[a669_0x390281(0x1d8)]=ShowTicketService;