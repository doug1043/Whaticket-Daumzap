const a671_0x635d3=a671_0xa253;(function(_0x303c53,_0x231998){const _0xa11d9=a671_0xa253,_0x48eb17=_0x303c53();while(!![]){try{const _0x39c1ba=parseInt(_0xa11d9(0x9f))/0x1*(-parseInt(_0xa11d9(0xbf))/0x2)+-parseInt(_0xa11d9(0xaf))/0x3*(parseInt(_0xa11d9(0xb6))/0x4)+-parseInt(_0xa11d9(0xc6))/0x5+-parseInt(_0xa11d9(0x98))/0x6+-parseInt(_0xa11d9(0xba))/0x7*(parseInt(_0xa11d9(0x9e))/0x8)+-parseInt(_0xa11d9(0xc5))/0x9*(parseInt(_0xa11d9(0xa5))/0xa)+parseInt(_0xa11d9(0xb2))/0xb*(parseInt(_0xa11d9(0xb0))/0xc);if(_0x39c1ba===_0x231998)break;else _0x48eb17['push'](_0x48eb17['shift']());}catch(_0x4d695a){_0x48eb17['push'](_0x48eb17['shift']());}}}(a671_0x44f7,0xae9cd));const a671_0x5ecc46=(function(){let _0x45f9f5=!![];return function(_0x596614,_0x56a5c6){const _0x3b624d=_0x45f9f5?function(){if(_0x56a5c6){const _0x42e2c4=_0x56a5c6['apply'](_0x596614,arguments);return _0x56a5c6=null,_0x42e2c4;}}:function(){};return _0x45f9f5=![],_0x3b624d;};}()),a671_0xc792ee=a671_0x5ecc46(this,function(){const _0x3653ca=a671_0xa253;return a671_0xc792ee[_0x3653ca(0x95)]()[_0x3653ca(0xc1)]('(((.+)+)+)+$')[_0x3653ca(0x95)]()[_0x3653ca(0xb4)](a671_0xc792ee)[_0x3653ca(0xc1)](_0x3653ca(0x9b));});a671_0xc792ee();function a671_0xa253(_0x309259,_0x22a10f){const _0x381350=a671_0x44f7();return a671_0xa253=function(_0xc792ee,_0x5ecc46){_0xc792ee=_0xc792ee-0x95;let _0x44f7d4=_0x381350[_0xc792ee];return _0x44f7d4;},a671_0xa253(_0x309259,_0x22a10f);}function a671_0x44f7(){const _0x1bbf57=['../../models/UserSocketSession','admin','../../errors/AppError','queue','default','157390gWOMvw','superv','name','company','ERR_NO_PERMISSION','ERR_NO_TICKET_FOUND','profile','companyId','../../models/Queue','email','276lPNjfa','24JzagIW','profilePicUrl','30646209gFBCpF','whatsapp','constructor','color','37096SgfiKY','contact','userProfile','disableBot','3706913CcCUPv','canSpyConversations','extraInfo','facebookUserToken','user','2281904hATgSw','../../models/Tag','search','socketSessions','../../models/Ticket','userId','9KaUlHW','6436335hvUKih','../../models/Whatsapp','toString','../../models/Company','findByPk','3003246aYrLuw','__importDefault','__esModule','(((.+)+)+)+$','defineProperty','Não\x20é\x20possível\x20consultar\x20registros\x20de\x20outra\x20empresa','16PvxmOA','1ZhmeXk'];a671_0x44f7=function(){return _0x1bbf57;};return a671_0x44f7();}'use strict';var __importDefault=this&&this[a671_0x635d3(0x99)]||function(_0x4bb8b7){const _0x3c39be=a671_0x635d3;return _0x4bb8b7&&_0x4bb8b7[_0x3c39be(0x9a)]?_0x4bb8b7:{'default':_0x4bb8b7};};Object[a671_0x635d3(0x9c)](exports,'__esModule',{'value':!![]});const Ticket_1=__importDefault(require(a671_0x635d3(0xc3))),AppError_1=__importDefault(require(a671_0x635d3(0xa2))),Contact_1=__importDefault(require('../../models/Contact')),User_1=__importDefault(require('../../models/User')),Queue_1=__importDefault(require(a671_0x635d3(0xad))),Tag_1=__importDefault(require(a671_0x635d3(0xc0))),Whatsapp_1=__importDefault(require(a671_0x635d3(0xc7))),UserSocketSession_1=__importDefault(require(a671_0x635d3(0xa0))),Company_1=__importDefault(require(a671_0x635d3(0x96))),ShowTicketService=async(_0x574922,_0x3bf28d)=>{const _0x1941c4=a671_0x635d3;let _0x4f1d72,_0x3f2a88,_0x51143f,_0x2d7b30,_0x1a61da;typeof _0x574922==='object'?(_0x4f1d72=_0x574922['id'],_0x1a61da=_0x574922[_0x1941c4(0xac)],_0x3f2a88=_0x574922[_0x1941c4(0xc4)],_0x51143f=_0x574922[_0x1941c4(0xb8)],_0x2d7b30=_0x574922[_0x1941c4(0xbb)]):(_0x4f1d72=_0x574922,_0x1a61da=_0x3bf28d);const _0x158362=await Ticket_1[_0x1941c4(0xa4)]['findOne']({'where':{'id':_0x4f1d72},'include':[{'model':Contact_1[_0x1941c4(0xa4)],'as':_0x1941c4(0xb7),'attributes':['id',_0x1941c4(0xa7),'number',_0x1941c4(0xae),_0x1941c4(0xb1),'presence',_0x1941c4(0xb9)],'include':[_0x1941c4(0xbc)]},{'model':User_1[_0x1941c4(0xa4)],'as':'user','attributes':['id',_0x1941c4(0xa7)],'include':[{'model':UserSocketSession_1[_0x1941c4(0xa4)],'as':_0x1941c4(0xc2),'where':{'active':!![]},'required':![]}]},{'model':Queue_1[_0x1941c4(0xa4)],'as':_0x1941c4(0xa3),'attributes':['id',_0x1941c4(0xa7),_0x1941c4(0xb5)]},{'model':Whatsapp_1[_0x1941c4(0xa4)],'as':_0x1941c4(0xb3),'attributes':[_0x1941c4(0xa7),_0x1941c4(0xbd),'facebookUserId']},{'model':Tag_1['default'],'as':'tags','attributes':['id','name',_0x1941c4(0xb5)]},{'model':Company_1[_0x1941c4(0xa4)],'as':_0x1941c4(0xa8),'attributes':['id','name']}]});if(_0x158362?.[_0x1941c4(0xac)]!==_0x1a61da)throw new AppError_1[(_0x1941c4(0xa4))](_0x1941c4(0x9d));if(!_0x158362)throw new AppError_1[(_0x1941c4(0xa4))](_0x1941c4(0xaa),0x194);if(_0x3f2a88!==undefined&&_0x51143f!==undefined){const _0x327f69=_0x51143f==='admin',_0x9896e2=_0x158362[_0x1941c4(0xc4)]===_0x3f2a88,_0x18cca7=_0x51143f===_0x1941c4(0xa6);if(_0x327f69)return _0x158362;if(_0x18cca7){if(_0x158362[_0x1941c4(0xbe)]){const _0xe08809=await User_1[_0x1941c4(0xa4)][_0x1941c4(0x97)](_0x158362['userId'],{'attributes':['profile']});if(_0xe08809&&_0xe08809[_0x1941c4(0xab)]===_0x1941c4(0xa1))throw new AppError_1[(_0x1941c4(0xa4))](_0x1941c4(0xa9),0x193);}return _0x158362;}if(!_0x9896e2)throw new AppError_1[(_0x1941c4(0xa4))](_0x1941c4(0xa9),0x193);}return _0x158362;};exports[a671_0x635d3(0xa4)]=ShowTicketService;