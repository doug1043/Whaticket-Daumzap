'use strict';const a592_0x4b2044=a592_0xc8d5;(function(_0x25cd4a,_0x21a4cd){const _0x287216=a592_0xc8d5,_0x4c85d6=_0x25cd4a();while(!![]){try{const _0x94644f=parseInt(_0x287216(0x13e))/0x1*(-parseInt(_0x287216(0x12c))/0x2)+parseInt(_0x287216(0x152))/0x3+parseInt(_0x287216(0x164))/0x4+-parseInt(_0x287216(0x15b))/0x5*(parseInt(_0x287216(0x15e))/0x6)+parseInt(_0x287216(0x135))/0x7+parseInt(_0x287216(0x138))/0x8*(parseInt(_0x287216(0x158))/0x9)+parseInt(_0x287216(0x13b))/0xa*(-parseInt(_0x287216(0x15a))/0xb);if(_0x94644f===_0x21a4cd)break;else _0x4c85d6['push'](_0x4c85d6['shift']());}catch(_0x5eae2f){_0x4c85d6['push'](_0x4c85d6['shift']());}}}(a592_0x2ec2,0x68c54));function a592_0xc8d5(_0x247c7,_0x457d3f){const _0x2976d7=a592_0x2ec2();return a592_0xc8d5=function(_0x21a196,_0x4963e0){_0x21a196=_0x21a196-0x129;let _0x2ec2fd=_0x2976d7[_0x21a196];return _0x2ec2fd;},a592_0xc8d5(_0x247c7,_0x457d3f);}var __createBinding=this&&this[a592_0x4b2044(0x13a)]||(Object[a592_0x4b2044(0x163)]?function(_0x295ac3,_0x3c73df,_0x45a5a3,_0x531977){const _0x397096=a592_0x4b2044;if(_0x531977===undefined)_0x531977=_0x45a5a3;var _0x89a334=Object['getOwnPropertyDescriptor'](_0x3c73df,_0x45a5a3);(!_0x89a334||(_0x397096(0x156)in _0x89a334?!_0x3c73df[_0x397096(0x147)]:_0x89a334[_0x397096(0x129)]||_0x89a334[_0x397096(0x15f)]))&&(_0x89a334={'enumerable':!![],'get':function(){return _0x3c73df[_0x45a5a3];}}),Object[_0x397096(0x134)](_0x295ac3,_0x531977,_0x89a334);}:function(_0x3ee10e,_0x3fd132,_0x18d3e5,_0x9cc8a9){if(_0x9cc8a9===undefined)_0x9cc8a9=_0x18d3e5;_0x3ee10e[_0x9cc8a9]=_0x3fd132[_0x18d3e5];}),__setModuleDefault=this&&this[a592_0x4b2044(0x143)]||(Object['create']?function(_0x4372f3,_0x3c05c2){const _0x29b4c8=a592_0x4b2044;Object[_0x29b4c8(0x134)](_0x4372f3,_0x29b4c8(0x14b),{'enumerable':!![],'value':_0x3c05c2});}:function(_0x7f7c35,_0x53ac32){const _0x4106e7=a592_0x4b2044;_0x7f7c35[_0x4106e7(0x14b)]=_0x53ac32;}),__importStar=this&&this[a592_0x4b2044(0x146)]||(function(){const _0x38fd7d=(function(){let _0x794772=!![];return function(_0x43c337,_0x5c246a){const _0x2182a6=_0x794772?function(){if(_0x5c246a){const _0x5cfe01=_0x5c246a['apply'](_0x43c337,arguments);return _0x5c246a=null,_0x5cfe01;}}:function(){};return _0x794772=![],_0x2182a6;};}()),_0x4e8bf7=_0x38fd7d(this,function(){const _0xa42fa2=a592_0xc8d5;return _0x4e8bf7['toString']()[_0xa42fa2(0x14c)](_0xa42fa2(0x12b))[_0xa42fa2(0x159)]()[_0xa42fa2(0x157)](_0x4e8bf7)[_0xa42fa2(0x14c)](_0xa42fa2(0x12b));});_0x4e8bf7();var _0x1842b3=function(_0x492bbb){const _0x270add=a592_0xc8d5;return _0x1842b3=Object[_0x270add(0x136)]||function(_0xac85ca){const _0x29005e=_0x270add;var _0x155518=[];for(var _0x2e723d in _0xac85ca)if(Object['prototype'][_0x29005e(0x140)][_0x29005e(0x12f)](_0xac85ca,_0x2e723d))_0x155518[_0x155518[_0x29005e(0x15d)]]=_0x2e723d;return _0x155518;},_0x1842b3(_0x492bbb);};return function(_0x106ba9){const _0xa0e4fa=a592_0xc8d5;if(_0x106ba9&&_0x106ba9[_0xa0e4fa(0x147)])return _0x106ba9;var _0x308734={};if(_0x106ba9!=null){for(var _0x2541e6=_0x1842b3(_0x106ba9),_0x223ed4=0x0;_0x223ed4<_0x2541e6[_0xa0e4fa(0x15d)];_0x223ed4++)if(_0x2541e6[_0x223ed4]!==_0xa0e4fa(0x14b))__createBinding(_0x308734,_0x106ba9,_0x2541e6[_0x223ed4]);}return __setModuleDefault(_0x308734,_0x106ba9),_0x308734;};}()),__importDefault=this&&this[a592_0x4b2044(0x15c)]||function(_0x2c1480){const _0xffbb41=a592_0x4b2044;return _0x2c1480&&_0x2c1480[_0xffbb41(0x147)]?_0x2c1480:{'default':_0x2c1480};};function a592_0x2ec2(){const _0x4e032a=['default','search','captureException','SELECT','data','getRepeatableJobs','info','1169304kCneDD','*\x20*\x20*\x20*\x20*','query','./utils/logger','get','constructor','949365tBJtzQ','toString','396SeMFSw','650TZIjLV','__importDefault','length','11226ClSAgu','configurable','UserMonitor','UserConnection','userMonitor','create','832120wtFqot','writable','initUserMonitorQueues','(((.+)+)+)+$','25554syMRqX','lodash','update','call','Queue:\x20monitoramento\x20de\x20status\x20de\x20usuário\x20inicializado','REDIS_URI','removeRepeatableByKey','null','defineProperty','5209029CVMgwL','getOwnPropertyNames','process','16mRbrlD','env','__createBinding','141670Eqfvtn','VerifyLoginStatus','./models/User','29HqnwJS','QueryTypes','hasOwnProperty','save','@sentry/node','__setModuleDefault','sequelize','findByPk','__importStar','__esModule','Usuário\x20passado\x20para\x20offline:\x20','isNil','select\x20id\x20from\x20\x22Users\x22\x20where\x20\x22updatedAt\x22\x20<\x20now()\x20-\x20\x275\x20minutes\x27::interval\x20and\x20online\x20=\x20true'];a592_0x2ec2=function(){return _0x4e032a;};return a592_0x2ec2();}Object['defineProperty'](exports,a592_0x4b2044(0x147),{'value':!![]}),exports[a592_0x4b2044(0x162)]=void 0x0,exports[a592_0x4b2044(0x12a)]=initUserMonitorQueues;const bull_1=__importDefault(require('bull')),Sentry=__importStar(require(a592_0x4b2044(0x142))),sequelize_1=require(a592_0x4b2044(0x144)),lodash_1=require(a592_0x4b2044(0x12d)),logger_1=require(a592_0x4b2044(0x155)),database_1=__importDefault(require('./database')),User_1=__importDefault(require(a592_0x4b2044(0x13d))),connection=process[a592_0x4b2044(0x139)][a592_0x4b2044(0x131)]||'';exports[a592_0x4b2044(0x162)]=new bull_1[(a592_0x4b2044(0x14b))](a592_0x4b2044(0x160),connection);async function handleLoginStatus(_0x4d1208){const _0xfb778a=a592_0x4b2044,_0xf57eb7=await database_1[_0xfb778a(0x14b)][_0xfb778a(0x154)](_0xfb778a(0x14a),{'type':sequelize_1[_0xfb778a(0x13f)][_0xfb778a(0x14e)]});for(let _0x31318c of _0xf57eb7){try{const _0x305576=await User_1[_0xfb778a(0x14b)][_0xfb778a(0x145)](_0x31318c['id']);await _0x305576[_0xfb778a(0x12e)]({'online':![]}),logger_1['logger'][_0xfb778a(0x151)](_0xfb778a(0x148)+_0x31318c['id']);}catch(_0x3b77d1){Sentry[_0xfb778a(0x14d)](_0x3b77d1);}}}async function handleUserConnection(_0x596dd8){const _0x2d288b=a592_0x4b2044;try{const {id:_0x3f68da}=_0x596dd8[_0x2d288b(0x14f)];if(!(0x0,lodash_1[_0x2d288b(0x149)])(_0x3f68da)&&_0x3f68da!==_0x2d288b(0x133)){const _0x527f9d=await User_1[_0x2d288b(0x14b)][_0x2d288b(0x145)](_0x3f68da);_0x527f9d&&(_0x527f9d['online']=!![],await _0x527f9d[_0x2d288b(0x141)]());}}catch(_0x1df3ec){Sentry[_0x2d288b(0x14d)](_0x1df3ec);}}exports[a592_0x4b2044(0x162)][a592_0x4b2044(0x137)](a592_0x4b2044(0x161),handleUserConnection),exports[a592_0x4b2044(0x162)][a592_0x4b2044(0x137)]('VerifyLoginStatus',handleLoginStatus);async function initUserMonitorQueues(){const _0x1b4507=a592_0x4b2044,_0x28460e=await exports[_0x1b4507(0x162)][_0x1b4507(0x150)]();for(let _0xdde2aa of _0x28460e){await exports[_0x1b4507(0x162)][_0x1b4507(0x132)](_0xdde2aa['key']);}exports['userMonitor']['add'](_0x1b4507(0x13c),{},{'repeat':{'cron':_0x1b4507(0x153)},'removeOnComplete':{'age':0x3c*0x3c,'count':0xa},'removeOnFail':{'age':0x3c*0x3c,'count':0xa}}),logger_1['logger'][_0x1b4507(0x151)](_0x1b4507(0x130));}