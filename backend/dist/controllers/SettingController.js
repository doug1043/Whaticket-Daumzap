'use strict';const a41_0x3c47f8=a41_0x2397;(function(_0x57c626,_0x37fc95){const _0x48c64a=a41_0x2397,_0x17f726=_0x57c626();while(!![]){try{const _0x4a1696=parseInt(_0x48c64a(0xb3))/0x1+-parseInt(_0x48c64a(0xb9))/0x2*(parseInt(_0x48c64a(0xc1))/0x3)+-parseInt(_0x48c64a(0xb0))/0x4*(parseInt(_0x48c64a(0x8e))/0x5)+parseInt(_0x48c64a(0x97))/0x6*(-parseInt(_0x48c64a(0xc2))/0x7)+-parseInt(_0x48c64a(0x93))/0x8*(-parseInt(_0x48c64a(0xc6))/0x9)+parseInt(_0x48c64a(0xad))/0xa+parseInt(_0x48c64a(0xbc))/0xb*(-parseInt(_0x48c64a(0xa9))/0xc);if(_0x4a1696===_0x37fc95)break;else _0x17f726['push'](_0x17f726['shift']());}catch(_0x4a39a9){_0x17f726['push'](_0x17f726['shift']());}}}(a41_0x2a85,0x8596a));function a41_0x2397(_0x1cea9c,_0x4f633b){const _0x21acc7=a41_0x2a85();return a41_0x2397=function(_0x127238,_0x29259d){_0x127238=_0x127238-0x8d;let _0x2a852e=_0x21acc7[_0x127238];return _0x2a852e;},a41_0x2397(_0x1cea9c,_0x4f633b);}var __createBinding=this&&this[a41_0x3c47f8(0xab)]||(Object[a41_0x3c47f8(0xa7)]?function(_0x5c4e1a,_0x543b30,_0x16d9ab,_0x3d1557){const _0x3a15f8=a41_0x3c47f8;if(_0x3d1557===undefined)_0x3d1557=_0x16d9ab;var _0x22a7d3=Object[_0x3a15f8(0x9f)](_0x543b30,_0x16d9ab);(!_0x22a7d3||(_0x3a15f8(0xb4)in _0x22a7d3?!_0x543b30[_0x3a15f8(0xa8)]:_0x22a7d3['writable']||_0x22a7d3[_0x3a15f8(0x99)]))&&(_0x22a7d3={'enumerable':!![],'get':function(){return _0x543b30[_0x16d9ab];}}),Object[_0x3a15f8(0xc4)](_0x5c4e1a,_0x3d1557,_0x22a7d3);}:function(_0x281cf6,_0x213d15,_0x5c5397,_0x24c34c){if(_0x24c34c===undefined)_0x24c34c=_0x5c5397;_0x281cf6[_0x24c34c]=_0x213d15[_0x5c5397];}),__setModuleDefault=this&&this[a41_0x3c47f8(0xb8)]||(Object[a41_0x3c47f8(0xa7)]?function(_0x2369dc,_0x569339){const _0x4d072e=a41_0x3c47f8;Object[_0x4d072e(0xc4)](_0x2369dc,_0x4d072e(0xc3),{'enumerable':!![],'value':_0x569339});}:function(_0x524f85,_0x21935b){const _0x5ed036=a41_0x3c47f8;_0x524f85[_0x5ed036(0xc3)]=_0x21935b;}),__importStar=this&&this[a41_0x3c47f8(0x95)]||(function(){const _0xf07376=(function(){let _0x39f0b6=!![];return function(_0x39ae04,_0x4f25dd){const _0x42d918=_0x39f0b6?function(){const _0x2a2871=a41_0x2397;if(_0x4f25dd){const _0x4affb1=_0x4f25dd[_0x2a2871(0x9b)](_0x39ae04,arguments);return _0x4f25dd=null,_0x4affb1;}}:function(){};return _0x39f0b6=![],_0x42d918;};}()),_0x470220=_0xf07376(this,function(){const _0xd2b86e=a41_0x2397;return _0x470220['toString']()['search']('(((.+)+)+)+$')[_0xd2b86e(0xaf)]()['constructor'](_0x470220)[_0xd2b86e(0xca)](_0xd2b86e(0x94));});_0x470220();var _0x50325d=function(_0xfc8a35){const _0xf8237a=a41_0x2397;return _0x50325d=Object[_0xf8237a(0xbe)]||function(_0x146cce){const _0x3bcbca=_0xf8237a;var _0x57aaca=[];for(var _0x12c6e0 in _0x146cce)if(Object[_0x3bcbca(0xcc)][_0x3bcbca(0xbf)]['call'](_0x146cce,_0x12c6e0))_0x57aaca[_0x57aaca['length']]=_0x12c6e0;return _0x57aaca;},_0x50325d(_0xfc8a35);};return function(_0x8c1ec9){const _0x3fbbcf=a41_0x2397;if(_0x8c1ec9&&_0x8c1ec9[_0x3fbbcf(0xa8)])return _0x8c1ec9;var _0x1df7c1={};if(_0x8c1ec9!=null){for(var _0x4b728f=_0x50325d(_0x8c1ec9),_0x245fd8=0x0;_0x245fd8<_0x4b728f['length'];_0x245fd8++)if(_0x4b728f[_0x245fd8]!==_0x3fbbcf(0xc3))__createBinding(_0x1df7c1,_0x8c1ec9,_0x4b728f[_0x245fd8]);}return __setModuleDefault(_0x1df7c1,_0x8c1ec9),_0x1df7c1;};}()),__importDefault=this&&this[a41_0x3c47f8(0xa2)]||function(_0x382421){const _0x24cedd=a41_0x3c47f8;return _0x382421&&_0x382421[_0x24cedd(0xa8)]?_0x382421:{'default':_0x382421};};Object['defineProperty'](exports,a41_0x3c47f8(0xa8),{'value':!![]}),exports[a41_0x3c47f8(0x92)]=exports[a41_0x3c47f8(0xae)]=exports[a41_0x3c47f8(0x98)]=exports[a41_0x3c47f8(0xcb)]=exports[a41_0x3c47f8(0xac)]=exports[a41_0x3c47f8(0xbd)]=exports[a41_0x3c47f8(0xbb)]=void 0x0;function a41_0x2a85(){const _0x2ef778=['defineProperty','body','18UMXvOQ','params','file','isSuper','search','publicShow','prototype','user','295QTCxFk','startsWith','companyId','../services/SettingServices/UpdateSettingService','storePrivateFile','3063904qCtWnM','(((.+)+)+)+$','__importStar','ERR_NO_PERMISSION','1396620jbxMjH','show','configurable','indexOf','apply','GetSettingService','../errors/AppError','../services/SettingServices/ListSettingsService','getOwnPropertyDescriptor','../services/StorageService/StorageService','-settings','__importDefault','json','filename','value','uploadFile','create','__esModule','813144hPSAOZ','appLogo','__createBinding','update','5559140FUhvyz','storeLogo','toString','16GWurXp','empresa','status','161300okQqLk','get','getIO','mimetype','../libs/socket','__setModuleDefault','8468XuJBOQ','GetAllPublicSettingsService','index','99cKWLUX','publicIndex','getOwnPropertyNames','hasOwnProperty','path','66tzeaaR','7oYKZbt','default'];a41_0x2a85=function(){return _0x2ef778;};return a41_0x2a85();}const socket_1=require(a41_0x3c47f8(0xb7)),AppError_1=__importDefault(require(a41_0x3c47f8(0x9d))),UpdateSettingService_1=__importDefault(require(a41_0x3c47f8(0x91))),ListSettingsService_1=__importDefault(require(a41_0x3c47f8(0x9e))),GetPublicSettingService_1=__importStar(require('../services/SettingServices/GetPublicSettingService')),GetSettingService_1=require('../services/SettingServices/GetSettingService'),StorageService_1=__importDefault(require(a41_0x3c47f8(0xa0))),index=async(_0x33eb6e,_0x176249)=>{const _0x4cb3a3=a41_0x3c47f8,_0x597e1b=await(0x0,ListSettingsService_1[_0x4cb3a3(0xc3)])(_0x33eb6e[_0x4cb3a3(0x8d)]);return _0x176249['status'](0xc8)[_0x4cb3a3(0xa3)](_0x597e1b);};exports[a41_0x3c47f8(0xbb)]=index;const publicIndex=async(_0x575513,_0x3a14ed)=>{const _0x4cc3d6=a41_0x3c47f8,_0x4b5583=await(0x0,GetPublicSettingService_1[_0x4cc3d6(0xba)])(_0x575513['user']?.[_0x4cc3d6(0x90)]);return _0x3a14ed['status'](0xc8)[_0x4cc3d6(0xa3)](_0x4b5583);};exports['publicIndex']=publicIndex;const update=async(_0x3b59a3,_0x58047d)=>{const _0x42acb8=a41_0x3c47f8,{settingKey:_0x2ea7cd}=_0x3b59a3[_0x42acb8(0xc7)],{value:_0x3c3d12}=_0x3b59a3[_0x42acb8(0xc5)],{companyId:_0x3e61a9}=_0x3b59a3[_0x42acb8(0x8d)];if(_0x2ea7cd[_0x42acb8(0x8f)]('_')&&!_0x3b59a3[_0x42acb8(0x8d)][_0x42acb8(0xc9)])throw new AppError_1[(_0x42acb8(0xc3))](_0x42acb8(0x96),0x193);const _0x4f238d=await(0x0,UpdateSettingService_1[_0x42acb8(0xc3)])({'key':_0x2ea7cd,'value':_0x3c3d12,'companyId':_0x3e61a9}),_0x183cd9=(0x0,socket_1[_0x42acb8(0xb5)])();return _0x183cd9['emit']('company-'+_0x3e61a9+_0x42acb8(0xa1),{'action':_0x42acb8(0xac),'setting':_0x4f238d}),_0x58047d['status'](0xc8)[_0x42acb8(0xa3)](_0x4f238d);};exports[a41_0x3c47f8(0xac)]=update;const publicShow=async(_0x293c1d,_0xf2f48e)=>{const _0xce50bd=a41_0x3c47f8,{settingKey:_0x4244e8}=_0x293c1d[_0xce50bd(0xc7)],_0x4e7fd7=await(0x0,GetPublicSettingService_1[_0xce50bd(0xc3)])({'key':_0x4244e8});return _0xf2f48e[_0xce50bd(0xb2)](0xc8)[_0xce50bd(0xa3)](_0x4e7fd7);};exports[a41_0x3c47f8(0xcb)]=publicShow;const show=async(_0x40ad10,_0x28e56c)=>{const _0x1755ee=a41_0x3c47f8,{settingKey:_0x483616}=_0x40ad10[_0x1755ee(0xc7)],_0x3ac030=await(0x0,GetSettingService_1[_0x1755ee(0x9c)])({'key':_0x483616,'user':_0x40ad10[_0x1755ee(0x8d)]});return _0x28e56c['status'](0xc8)[_0x1755ee(0xa3)](_0x3ac030);};exports[a41_0x3c47f8(0x98)]=show;const storeLogo=async(_0x231fa3,_0x2c1f0b)=>{const _0x435f03=a41_0x3c47f8,_0x125cad=_0x231fa3[_0x435f03(0xc8)],{mode:_0x337a3f}=_0x231fa3[_0x435f03(0xc5)],{companyId:_0x35a732}=_0x231fa3[_0x435f03(0x8d)],_0x49edec=['Light','Dark','Favicon'];if(_0x49edec[_0x435f03(0x9a)](_0x337a3f)===-0x1)return _0x2c1f0b[_0x435f03(0xb2)](0x196);if(_0x125cad&&_0x125cad[_0x435f03(0xb6)][_0x435f03(0x8f)]('image/')){const {url:_0x6b4e68}=await StorageService_1['default'][_0x435f03(0xa6)](_0x35a732,_0x435f03(0xb1),_0x125cad[_0x435f03(0xa4)],_0x125cad[_0x435f03(0xc0)],_0x125cad[_0x435f03(0xb6)]),_0x4b6a9f=await(0x0,UpdateSettingService_1[_0x435f03(0xc3)])({'key':_0x435f03(0xaa)+_0x337a3f,'value':_0x6b4e68,'companyId':_0x35a732});return _0x2c1f0b[_0x435f03(0xb2)](0xc8)[_0x435f03(0xa3)](_0x4b6a9f[_0x435f03(0xa5)]);}return _0x2c1f0b[_0x435f03(0xb2)](0x196);};exports[a41_0x3c47f8(0xae)]=storeLogo;const storePrivateFile=async(_0x324eef,_0x555361)=>{const _0x499968=a41_0x3c47f8,_0x4cfd93=_0x324eef[_0x499968(0xc8)],{settingKey:_0x5e5abf}=_0x324eef[_0x499968(0xc5)],{companyId:_0x3cf5e8}=_0x324eef[_0x499968(0x8d)],{url:_0x45863e}=await StorageService_1['default']['uploadFile'](_0x3cf5e8,_0x499968(0xb1),_0x4cfd93['filename'],_0x4cfd93['path'],_0x4cfd93[_0x499968(0xb6)]),_0x23d8d8=await(0x0,UpdateSettingService_1[_0x499968(0xc3)])({'key':'_'+_0x5e5abf,'value':_0x45863e,'companyId':_0x3cf5e8});return _0x555361['status'](0xc8)['json'](_0x23d8d8[_0x499968(0xa5)]);};exports[a41_0x3c47f8(0x92)]=storePrivateFile;