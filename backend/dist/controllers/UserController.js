const a44_0x3280b9=a44_0x1da6;(function(_0x179944,_0x489bae){const _0x2e2fd2=a44_0x1da6,_0x2af9ba=_0x179944();while(!![]){try{const _0x1134bf=parseInt(_0x2e2fd2(0x142))/0x1+parseInt(_0x2e2fd2(0x15a))/0x2+parseInt(_0x2e2fd2(0x14d))/0x3+parseInt(_0x2e2fd2(0x140))/0x4+-parseInt(_0x2e2fd2(0x146))/0x5*(-parseInt(_0x2e2fd2(0x13a))/0x6)+-parseInt(_0x2e2fd2(0x12e))/0x7+-parseInt(_0x2e2fd2(0x14e))/0x8;if(_0x1134bf===_0x489bae)break;else _0x2af9ba['push'](_0x2af9ba['shift']());}catch(_0x189c52){_0x2af9ba['push'](_0x2af9ba['shift']());}}}(a44_0x3b56,0x69a70));const a44_0xd6fc88=(function(){let _0x1c8cd1=!![];return function(_0x203d09,_0x2fe07c){const _0x3aaaee=_0x1c8cd1?function(){const _0x4b20ab=a44_0x1da6;if(_0x2fe07c){const _0x1a67fb=_0x2fe07c[_0x4b20ab(0x15d)](_0x203d09,arguments);return _0x2fe07c=null,_0x1a67fb;}}:function(){};return _0x1c8cd1=![],_0x3aaaee;};}()),a44_0x5bf8d9=a44_0xd6fc88(this,function(){const _0x5664c4=a44_0x1da6;return a44_0x5bf8d9[_0x5664c4(0x157)]()[_0x5664c4(0x15c)]('(((.+)+)+)+$')['toString']()[_0x5664c4(0x137)](a44_0x5bf8d9)['search']('(((.+)+)+)+$');});a44_0x5bf8d9();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x107904){const _0x4b4ca5=a44_0x1da6;return _0x107904&&_0x107904[_0x4b4ca5(0x12a)]?_0x107904:{'default':_0x107904};};Object['defineProperty'](exports,a44_0x3280b9(0x12a),{'value':!![]}),exports['list']=exports[a44_0x3280b9(0x141)]=exports[a44_0x3280b9(0x147)]=exports['show']=exports[a44_0x3280b9(0x131)]=exports[a44_0x3280b9(0x13e)]=exports['index']=void 0x0;const socket_1=require(a44_0x3280b9(0x12c)),CheckSettings_1=__importDefault(require(a44_0x3280b9(0x13d))),AppError_1=__importDefault(require(a44_0x3280b9(0x143))),CreateUserService_1=__importDefault(require(a44_0x3280b9(0x14a))),ListUsersService_1=__importDefault(require(a44_0x3280b9(0x14c))),UpdateUserService_1=__importDefault(require(a44_0x3280b9(0x130))),ShowUserService_1=__importDefault(require(a44_0x3280b9(0x13c))),DeleteUserService_1=__importDefault(require(a44_0x3280b9(0x12b))),SimpleListService_1=__importDefault(require('../services/UserServices/SimpleListService')),index=async(_0x88228c,_0x5414db)=>{const _0x5b34f3=a44_0x3280b9,{searchParam:_0x535c78,pageNumber:_0x5a3b12}=_0x88228c[_0x5b34f3(0x132)],{companyId:_0x399b86,profile:_0x398657}=_0x88228c[_0x5b34f3(0x158)],{users:_0x2592f7,onlineCount:_0x5d5430,offlineCount:_0x9efb1f,count:_0x18815e,hasMore:_0x412bc5}=await(0x0,ListUsersService_1[_0x5b34f3(0x153)])({'searchParam':_0x535c78,'pageNumber':_0x5a3b12,'companyId':_0x399b86,'profile':_0x398657});return _0x5414db[_0x5b34f3(0x149)]({'users':_0x2592f7,'onlineCount':_0x5d5430,'offlineCount':_0x9efb1f,'count':_0x18815e,'hasMore':_0x412bc5});};exports[a44_0x3280b9(0x15b)]=index;const store=async(_0x2b7653,_0x5384c6)=>{const _0x5f0858=a44_0x3280b9,{email:_0x1dec4,password:_0x1120f0,name:_0x3dd894,profile:_0x3c5f4f,isTricked:_0x505bda,super:_0x310848,companyId:_0x378bee,queueIds:_0x151e53,allTicket:_0x4e80fd,whatsappId:_0x4a7d50,startWork:_0x3fd8e9,endWork:_0x434389,profileState:_0x50ba89,defaultMenu:_0x2c1e09}=_0x2b7653['body'];let _0x3cb268=null;if(_0x2b7653['user']!==undefined){const {companyId:_0x599460}=_0x2b7653['user'];_0x3cb268=_0x599460;}if(_0x2b7653['body'][_0x5f0858(0x12d)]&&_0x2b7653[_0x5f0858(0x158)][_0x5f0858(0x12d)]!==_0x2b7653[_0x5f0858(0x154)][_0x5f0858(0x12d)])throw new AppError_1[(_0x5f0858(0x153))](_0x5f0858(0x14f));if(!_0x2b7653[_0x5f0858(0x158)]['isSuper']&&_0x310848)throw new AppError_1[(_0x5f0858(0x153))]('Acesso\x20negado.');if(_0x2b7653[_0x5f0858(0x138)]==='/signup'&&await(0x0,CheckSettings_1[_0x5f0858(0x153)])(_0x5f0858(0x148))===_0x5f0858(0x12f))throw new AppError_1[(_0x5f0858(0x153))](_0x5f0858(0x144),0x193);else{if(_0x2b7653[_0x5f0858(0x138)]!==_0x5f0858(0x13b)&&_0x2b7653[_0x5f0858(0x158)]['profile']!==_0x5f0858(0x156))throw new AppError_1[(_0x5f0858(0x153))](_0x5f0858(0x135),0x193);}const _0x29303f=await(0x0,CreateUserService_1[_0x5f0858(0x153)])({'email':_0x1dec4,'password':_0x1120f0,'name':_0x3dd894,'profile':_0x3c5f4f,'isTricked':_0x505bda,'super':_0x310848,'companyId':_0x378bee||_0x3cb268,'queueIds':_0x151e53,'allTicket':_0x4e80fd,'whatsappId':_0x4a7d50,'startWork':_0x3fd8e9,'endWork':_0x434389,'defaultMenu':_0x2c1e09}),_0x3e0e3c=(0x0,socket_1[_0x5f0858(0x139)])();return _0x3e0e3c[_0x5f0858(0x129)](_0x5f0858(0x13f)+_0x3cb268+_0x5f0858(0x134),{'action':'create','user':_0x29303f}),_0x5384c6['status'](0xc8)[_0x5f0858(0x149)](_0x29303f);};exports[a44_0x3280b9(0x13e)]=store;const storeFromCompanySettings=async(_0x21899a,_0x1f3506)=>{const _0x3be214=a44_0x3280b9,{email:_0x330ba9,password:_0x1ba972,name:_0x2accb3,profile:_0x5e7a20,isTricked:_0x20f852,super:_0x468105,companyId:_0x420df2,queueIds:_0x4da4bc,allTicket:_0x443fd6,whatsappId:_0x5a1627,startWork:_0x414e92,endWork:_0x1afcdc,profileState:_0xd97b0b,defaultMenu:_0x2e6ba7}=_0x21899a[_0x3be214(0x154)];let _0x560d6c=null;if(_0x21899a[_0x3be214(0x158)]!==undefined){const {companyId:_0x18ba95}=_0x21899a['user'];_0x560d6c=_0x18ba95;}if(_0x21899a[_0x3be214(0x154)][_0x3be214(0x12d)]&&_0x21899a['user'][_0x3be214(0x12d)]!==_0x21899a[_0x3be214(0x154)][_0x3be214(0x12d)])throw new AppError_1[(_0x3be214(0x153))]('O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa');if(!_0x21899a['user'][_0x3be214(0x133)]&&_0x468105)throw new AppError_1[(_0x3be214(0x153))]('Acesso\x20negado.');if(_0x21899a[_0x3be214(0x138)]==='/signup'&&await(0x0,CheckSettings_1['default'])(_0x3be214(0x148))==='disabled')throw new AppError_1[(_0x3be214(0x153))](_0x3be214(0x144),0x193);else{if(_0x21899a[_0x3be214(0x138)]!==_0x3be214(0x13b)&&_0x21899a[_0x3be214(0x158)][_0x3be214(0x136)]!==_0x3be214(0x156))throw new AppError_1['default'](_0x3be214(0x135),0x193);}const _0x202281=await(0x0,CreateUserService_1[_0x3be214(0x153)])({'email':_0x330ba9,'password':_0x1ba972,'name':_0x2accb3,'profile':_0x5e7a20,'isTricked':_0x20f852,'super':_0x468105,'companyId':_0x420df2||_0x560d6c,'queueIds':_0x4da4bc,'allTicket':_0x443fd6,'whatsappId':_0x5a1627,'startWork':_0x414e92,'endWork':_0x1afcdc,'defaultMenu':_0x2e6ba7}),_0x3de725=(0x0,socket_1['getIO'])();return _0x3de725['to'](_0x3be214(0x13f)+_0x560d6c+_0x3be214(0x155))[_0x3be214(0x129)](_0x3be214(0x13f)+_0x560d6c+'-user',{'action':_0x3be214(0x14b),'user':_0x202281}),_0x1f3506[_0x3be214(0x159)](0xc8)[_0x3be214(0x149)](_0x202281);};exports[a44_0x3280b9(0x131)]=storeFromCompanySettings;const show=async(_0x1b6a70,_0x4e1947)=>{const _0x2a5d86=a44_0x3280b9,{userId:_0x61b4a0}=_0x1b6a70[_0x2a5d86(0x150)],_0x91e9b2=await(0x0,ShowUserService_1[_0x2a5d86(0x153)])(_0x61b4a0,_0x1b6a70[_0x2a5d86(0x158)]['id']);return _0x4e1947[_0x2a5d86(0x159)](0xc8)['json'](_0x91e9b2);};exports[a44_0x3280b9(0x151)]=show;const update=async(_0x552e2a,_0x207bb0)=>{const _0x485b9e=a44_0x3280b9,{id:_0x3ef54c,companyId:_0x39bea7}=_0x552e2a[_0x485b9e(0x158)],{userId:_0x356571}=_0x552e2a[_0x485b9e(0x150)],_0x4cf300=_0x552e2a[_0x485b9e(0x154)],_0x1823a6=await(0x0,UpdateUserService_1[_0x485b9e(0x153)])({'userData':_0x4cf300,'userId':_0x356571,'requestUserId':+_0x3ef54c}),_0xaf1adf=(0x0,socket_1['getIO'])();return _0xaf1adf['to'](_0x485b9e(0x13f)+_0x39bea7+_0x485b9e(0x155))[_0x485b9e(0x129)](_0x485b9e(0x13f)+_0x39bea7+'-user',{'action':_0x485b9e(0x147),'user':_0x1823a6}),_0x207bb0[_0x485b9e(0x159)](0xc8)['json'](_0x1823a6);};exports[a44_0x3280b9(0x147)]=update;function a44_0x1da6(_0xb3eda8,_0x46f997){const _0x3c70e1=a44_0x3b56();return a44_0x1da6=function(_0x5bf8d9,_0xd6fc88){_0x5bf8d9=_0x5bf8d9-0x129;let _0x3b56bf=_0x3c70e1[_0x5bf8d9];return _0x3b56bf;},a44_0x1da6(_0xb3eda8,_0x46f997);}const remove=async(_0x5bbf71,_0x26cb97)=>{const _0x1e5d1b=a44_0x3280b9,{userId:_0x5dc928}=_0x5bbf71['params'],{companyId:_0x2954ef}=_0x5bbf71[_0x1e5d1b(0x158)];if(_0x5bbf71['user'][_0x1e5d1b(0x136)]!==_0x1e5d1b(0x156))throw new AppError_1[(_0x1e5d1b(0x153))](_0x1e5d1b(0x135),0x193);await(0x0,DeleteUserService_1[_0x1e5d1b(0x153)])(_0x5dc928,_0x5bbf71[_0x1e5d1b(0x158)]['id']);const _0x485bf4=(0x0,socket_1[_0x1e5d1b(0x139)])();return _0x485bf4['to'](_0x1e5d1b(0x13f)+_0x2954ef+'-mainchannel')[_0x1e5d1b(0x129)](_0x1e5d1b(0x13f)+_0x2954ef+'-user',{'action':'delete','userId':_0x5dc928}),_0x26cb97[_0x1e5d1b(0x159)](0xc8)[_0x1e5d1b(0x149)]({'message':_0x1e5d1b(0x152)});};exports[a44_0x3280b9(0x141)]=remove;const list=async(_0x9d708b,_0x49618c)=>{const _0x539a77=a44_0x3280b9,{companyId:_0x1018ed}=_0x9d708b[_0x539a77(0x132)],{companyId:_0x1420ec}=_0x9d708b[_0x539a77(0x158)],_0x19acf6=await(0x0,SimpleListService_1[_0x539a77(0x153)])({'companyId':_0x1018ed?+_0x1018ed:_0x1420ec});return _0x49618c[_0x539a77(0x159)](0xc8)[_0x539a77(0x149)](_0x19acf6);};function a44_0x3b56(){const _0x37dd83=['search','apply','emit','__esModule','../services/UserServices/DeleteUserService','../libs/socket','companyId','706174Nhtwhi','disabled','../services/UserServices/UpdateUserService','storeFromCompanySettings','query','isSuper','-user','ERR_NO_PERMISSION','profile','constructor','url','getIO','6vcnrsR','/signup','../services/UserServices/ShowUserService','../helpers/CheckSettings','store','company-','1968864ZhEXWr','remove','606398gCKkYs','../errors/AppError','ERR_USER_CREATION_DISABLED','list','3546905fHYMTH','update','userCreation','json','../services/UserServices/CreateUserService','create','../services/UserServices/ListUsersService','2358861VidGeK','22967864VptAgc','O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa','params','show','User\x20deleted','default','body','-mainchannel','admin','toString','user','status','1620670fNzTok','index'];a44_0x3b56=function(){return _0x37dd83;};return a44_0x3b56();}exports[a44_0x3280b9(0x145)]=list;