const a44_0x599c17=a44_0x23af;(function(_0x22912c,_0x48b396){const _0x289c16=a44_0x23af,_0x58e3e6=_0x22912c();while(!![]){try{const _0x138acf=-parseInt(_0x289c16(0xc1))/0x1+parseInt(_0x289c16(0xbd))/0x2*(parseInt(_0x289c16(0xb7))/0x3)+-parseInt(_0x289c16(0xc8))/0x4+-parseInt(_0x289c16(0xdf))/0x5+-parseInt(_0x289c16(0xdb))/0x6+-parseInt(_0x289c16(0xde))/0x7+parseInt(_0x289c16(0xd9))/0x8;if(_0x138acf===_0x48b396)break;else _0x58e3e6['push'](_0x58e3e6['shift']());}catch(_0x35b448){_0x58e3e6['push'](_0x58e3e6['shift']());}}}(a44_0x316c,0x7433b));const a44_0x2aecaf=(function(){let _0x40ef6c=!![];return function(_0x1bb25f,_0x23cf4f){const _0x4a0419=_0x40ef6c?function(){const _0x326d89=a44_0x23af;if(_0x23cf4f){const _0xf5d489=_0x23cf4f[_0x326d89(0xbb)](_0x1bb25f,arguments);return _0x23cf4f=null,_0xf5d489;}}:function(){};return _0x40ef6c=![],_0x4a0419;};}()),a44_0x178404=a44_0x2aecaf(this,function(){const _0x4e0d9f=a44_0x23af;return a44_0x178404[_0x4e0d9f(0xd0)]()[_0x4e0d9f(0xe9)](_0x4e0d9f(0xba))[_0x4e0d9f(0xd0)]()[_0x4e0d9f(0xbf)](a44_0x178404)[_0x4e0d9f(0xe9)](_0x4e0d9f(0xba));});a44_0x178404();'use strict';var __importDefault=this&&this[a44_0x599c17(0xe7)]||function(_0x279b3d){const _0x3252fd=a44_0x599c17;return _0x279b3d&&_0x279b3d[_0x3252fd(0xb2)]?_0x279b3d:{'default':_0x279b3d};};Object[a44_0x599c17(0xe2)](exports,a44_0x599c17(0xb2),{'value':!![]}),exports['list']=exports['remove']=exports['update']=exports[a44_0x599c17(0xc5)]=exports['storeFromCompanySettings']=exports[a44_0x599c17(0xc4)]=exports['index']=void 0x0;const socket_1=require(a44_0x599c17(0xbc)),CheckSettings_1=__importDefault(require(a44_0x599c17(0xd2))),AppError_1=__importDefault(require(a44_0x599c17(0xce))),CreateUserService_1=__importDefault(require(a44_0x599c17(0xb5))),ListUsersService_1=__importDefault(require(a44_0x599c17(0xcc))),UpdateUserService_1=__importDefault(require(a44_0x599c17(0xe8))),ShowUserService_1=__importDefault(require('../services/UserServices/ShowUserService')),DeleteUserService_1=__importDefault(require(a44_0x599c17(0xe4))),SimpleListService_1=__importDefault(require(a44_0x599c17(0xe3))),index=async(_0x3b1697,_0x29cfca)=>{const _0x47fd9e=a44_0x599c17,{searchParam:_0x4a44b6,pageNumber:_0x1cc571}=_0x3b1697['query'],{companyId:_0x189aa9,profile:_0x4a8f34}=_0x3b1697[_0x47fd9e(0xb9)],{users:_0x16c2b6,onlineCount:_0x11dfcb,offlineCount:_0x5d1e51,count:_0x84ef3e,hasMore:_0x10b378}=await(0x0,ListUsersService_1['default'])({'searchParam':_0x4a44b6,'pageNumber':_0x1cc571,'companyId':_0x189aa9,'profile':_0x4a8f34});return _0x29cfca[_0x47fd9e(0xd1)]({'users':_0x16c2b6,'onlineCount':_0x11dfcb,'offlineCount':_0x5d1e51,'count':_0x84ef3e,'hasMore':_0x10b378});};exports[a44_0x599c17(0xcf)]=index;function a44_0x23af(_0x1d2ac4,_0x4f2100){const _0x4f3858=a44_0x316c();return a44_0x23af=function(_0x178404,_0x2aecaf){_0x178404=_0x178404-0xb2;let _0x316c79=_0x4f3858[_0x178404];return _0x316c79;},a44_0x23af(_0x1d2ac4,_0x4f2100);}const store=async(_0x32a7d4,_0xfa225f)=>{const _0x1ffffe=a44_0x599c17,{email:_0x46f1d2,password:_0x31a920,name:_0x553fd8,profile:_0x4bd0c6,isTricked:_0x4f6ea9,super:_0x1e2b49,companyId:_0x260677,queueIds:_0x5a11c1,allTicket:_0x3ea6dd,whatsappId:_0x2df811,startWork:_0x341649,endWork:_0x2e2216,profileState:_0x250e9f,defaultMenu:_0xcc0f28}=_0x32a7d4[_0x1ffffe(0xd5)];let _0xc93c0a=null;if(_0x32a7d4['user']!==undefined){const {companyId:_0x5c5013}=_0x32a7d4[_0x1ffffe(0xb9)];_0xc93c0a=_0x5c5013;}if(_0x32a7d4[_0x1ffffe(0xd5)][_0x1ffffe(0xc9)]&&_0x32a7d4['user'][_0x1ffffe(0xc9)]!==_0x32a7d4[_0x1ffffe(0xd5)][_0x1ffffe(0xc9)])throw new AppError_1[(_0x1ffffe(0xd7))]('O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa');if(!_0x32a7d4[_0x1ffffe(0xb9)][_0x1ffffe(0xbe)]&&_0x1e2b49)throw new AppError_1['default'](_0x1ffffe(0xc0));if(_0x32a7d4[_0x1ffffe(0xe5)]===_0x1ffffe(0xd8)&&await(0x0,CheckSettings_1[_0x1ffffe(0xd7)])(_0x1ffffe(0xb6))==='disabled')throw new AppError_1[(_0x1ffffe(0xd7))](_0x1ffffe(0xc6),0x193);else{if(_0x32a7d4['url']!=='/signup'&&_0x32a7d4[_0x1ffffe(0xb9)]['profile']!==_0x1ffffe(0xca))throw new AppError_1[(_0x1ffffe(0xd7))]('ERR_NO_PERMISSION',0x193);}const _0x342ca2=await(0x0,CreateUserService_1[_0x1ffffe(0xd7)])({'email':_0x46f1d2,'password':_0x31a920,'name':_0x553fd8,'profile':_0x4bd0c6,'isTricked':_0x4f6ea9,'super':_0x1e2b49,'companyId':_0x260677||_0xc93c0a,'queueIds':_0x5a11c1,'allTicket':_0x3ea6dd,'whatsappId':_0x2df811,'startWork':_0x341649,'endWork':_0x2e2216,'defaultMenu':_0xcc0f28}),_0x59fc22=(0x0,socket_1['getIO'])();return _0x59fc22[_0x1ffffe(0xd3)]('company-'+_0xc93c0a+'-user',{'action':'create','user':_0x342ca2}),_0xfa225f[_0x1ffffe(0xc7)](0xc8)[_0x1ffffe(0xd1)](_0x342ca2);};exports[a44_0x599c17(0xc4)]=store;const storeFromCompanySettings=async(_0x1da4f9,_0x38f2d1)=>{const _0xba8948=a44_0x599c17,{email:_0x185920,password:_0x39352b,name:_0x42064d,profile:_0x5cb654,isTricked:_0x28a484,super:_0xc04c68,companyId:_0x2346ce,queueIds:_0x1a0379,allTicket:_0x2559db,whatsappId:_0x4e6849,startWork:_0x1cc5bd,endWork:_0x573087,profileState:_0x1ac278,defaultMenu:_0x502e8c}=_0x1da4f9['body'];let _0x20b171=null;if(_0x1da4f9[_0xba8948(0xb9)]!==undefined){const {companyId:_0x22797c}=_0x1da4f9['user'];_0x20b171=_0x22797c;}if(_0x1da4f9[_0xba8948(0xd5)][_0xba8948(0xc9)]&&_0x1da4f9[_0xba8948(0xb9)][_0xba8948(0xc9)]!==_0x1da4f9[_0xba8948(0xd5)][_0xba8948(0xc9)])throw new AppError_1[(_0xba8948(0xd7))](_0xba8948(0xe1));if(!_0x1da4f9['user'][_0xba8948(0xbe)]&&_0xc04c68)throw new AppError_1[(_0xba8948(0xd7))]('Acesso\x20negado.');if(_0x1da4f9[_0xba8948(0xe5)]===_0xba8948(0xd8)&&await(0x0,CheckSettings_1['default'])('userCreation')===_0xba8948(0xb3))throw new AppError_1[(_0xba8948(0xd7))](_0xba8948(0xc6),0x193);else{if(_0x1da4f9[_0xba8948(0xe5)]!==_0xba8948(0xd8)&&_0x1da4f9[_0xba8948(0xb9)]['profile']!==_0xba8948(0xca))throw new AppError_1[(_0xba8948(0xd7))]('ERR_NO_PERMISSION',0x193);}const _0x2b4921=await(0x0,CreateUserService_1['default'])({'email':_0x185920,'password':_0x39352b,'name':_0x42064d,'profile':_0x5cb654,'isTricked':_0x28a484,'super':_0xc04c68,'companyId':_0x2346ce||_0x20b171,'queueIds':_0x1a0379,'allTicket':_0x2559db,'whatsappId':_0x4e6849,'startWork':_0x1cc5bd,'endWork':_0x573087,'defaultMenu':_0x502e8c}),_0x4e4c3b=(0x0,socket_1[_0xba8948(0xc3)])();return _0x4e4c3b['to'](_0xba8948(0xc2)+_0x20b171+_0xba8948(0xb8))[_0xba8948(0xd3)](_0xba8948(0xc2)+_0x20b171+_0xba8948(0xdd),{'action':_0xba8948(0xe6),'user':_0x2b4921}),_0x38f2d1['status'](0xc8)[_0xba8948(0xd1)](_0x2b4921);};exports[a44_0x599c17(0xcb)]=storeFromCompanySettings;const show=async(_0x4d1745,_0x5f3336)=>{const _0x1e6d29=a44_0x599c17,{userId:_0x563a0c}=_0x4d1745[_0x1e6d29(0xdc)],_0x36655a=await(0x0,ShowUserService_1[_0x1e6d29(0xd7)])(_0x563a0c,_0x4d1745[_0x1e6d29(0xb9)]['id']);return _0x5f3336['status'](0xc8)[_0x1e6d29(0xd1)](_0x36655a);};exports[a44_0x599c17(0xc5)]=show;const update=async(_0x181fca,_0x3d9194)=>{const _0x44eadd=a44_0x599c17,{id:_0x2f3b41,companyId:_0x51a9ef}=_0x181fca[_0x44eadd(0xb9)],{userId:_0x351385}=_0x181fca[_0x44eadd(0xdc)],_0x11e166=_0x181fca[_0x44eadd(0xd5)],_0x4a89c4=await(0x0,UpdateUserService_1[_0x44eadd(0xd7)])({'userData':_0x11e166,'userId':_0x351385,'requestUserId':+_0x2f3b41}),_0x2b36d1=(0x0,socket_1[_0x44eadd(0xc3)])();return _0x2b36d1['to'](_0x44eadd(0xc2)+_0x51a9ef+_0x44eadd(0xb8))[_0x44eadd(0xd3)]('company-'+_0x51a9ef+_0x44eadd(0xdd),{'action':_0x44eadd(0xcd),'user':_0x4a89c4}),_0x3d9194['status'](0xc8)[_0x44eadd(0xd1)](_0x4a89c4);};exports[a44_0x599c17(0xcd)]=update;const remove=async(_0xb5701c,_0x48268c)=>{const _0x1a1e7a=a44_0x599c17,{userId:_0x5ba1d6}=_0xb5701c[_0x1a1e7a(0xdc)],{companyId:_0x5a52e1}=_0xb5701c[_0x1a1e7a(0xb9)];if(_0xb5701c['user']['profile']!==_0x1a1e7a(0xca))throw new AppError_1[(_0x1a1e7a(0xd7))](_0x1a1e7a(0xb4),0x193);await(0x0,DeleteUserService_1[_0x1a1e7a(0xd7)])(_0x5ba1d6,_0xb5701c[_0x1a1e7a(0xb9)]['id']);const _0x1666fa=(0x0,socket_1[_0x1a1e7a(0xc3)])();return _0x1666fa['to'](_0x1a1e7a(0xc2)+_0x5a52e1+_0x1a1e7a(0xb8))[_0x1a1e7a(0xd3)](_0x1a1e7a(0xc2)+_0x5a52e1+_0x1a1e7a(0xdd),{'action':_0x1a1e7a(0xe0),'userId':_0x5ba1d6}),_0x48268c[_0x1a1e7a(0xc7)](0xc8)[_0x1a1e7a(0xd1)]({'message':_0x1a1e7a(0xd4)});};exports['remove']=remove;const list=async(_0x560f16,_0x26eb6f)=>{const _0x5c9936=a44_0x599c17,{companyId:_0x110f03}=_0x560f16[_0x5c9936(0xd6)],{companyId:_0x322175}=_0x560f16[_0x5c9936(0xb9)],_0x2656ac=await(0x0,SimpleListService_1[_0x5c9936(0xd7)])({'companyId':_0x110f03?+_0x110f03:_0x322175});return _0x26eb6f[_0x5c9936(0xc7)](0xc8)[_0x5c9936(0xd1)](_0x2656ac);};exports[a44_0x599c17(0xda)]=list;function a44_0x316c(){const _0x1c5066=['ERR_USER_CREATION_DISABLED','status','3737696RzQSBN','companyId','admin','storeFromCompanySettings','../services/UserServices/ListUsersService','update','../errors/AppError','index','toString','json','../helpers/CheckSettings','emit','User\x20deleted','body','query','default','/signup','26169832maGoju','list','4422216NdDTPd','params','-user','5276705iGMKuV','1304370dILPpz','delete','O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa','defineProperty','../services/UserServices/SimpleListService','../services/UserServices/DeleteUserService','url','create','__importDefault','../services/UserServices/UpdateUserService','search','__esModule','disabled','ERR_NO_PERMISSION','../services/UserServices/CreateUserService','userCreation','21GyzvMn','-mainchannel','user','(((.+)+)+)+$','apply','../libs/socket','237418vVxeZl','isSuper','constructor','Acesso\x20negado.','940080dznyWV','company-','getIO','store','show'];a44_0x316c=function(){return _0x1c5066;};return a44_0x316c();}