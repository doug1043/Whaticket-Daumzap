const a52_0x7ee8fa=a52_0x5c5e;(function(_0x1be589,_0x101988){const _0xe5a6f9=a52_0x5c5e,_0x3ebbe3=_0x1be589();while(!![]){try{const _0x3693d3=-parseInt(_0xe5a6f9(0x1b9))/0x1+-parseInt(_0xe5a6f9(0x1af))/0x2+-parseInt(_0xe5a6f9(0x197))/0x3+parseInt(_0xe5a6f9(0x1ab))/0x4+parseInt(_0xe5a6f9(0x19e))/0x5+-parseInt(_0xe5a6f9(0x1a6))/0x6+parseInt(_0xe5a6f9(0x199))/0x7;if(_0x3693d3===_0x101988)break;else _0x3ebbe3['push'](_0x3ebbe3['shift']());}catch(_0x4cbea9){_0x3ebbe3['push'](_0x3ebbe3['shift']());}}}(a52_0x5298,0x4053e));const a52_0x567176=(function(){let _0x2f8aa1=!![];return function(_0x1bb48f,_0x384628){const _0xb8fa74=_0x2f8aa1?function(){if(_0x384628){const _0x5d4de0=_0x384628['apply'](_0x1bb48f,arguments);return _0x384628=null,_0x5d4de0;}}:function(){};return _0x2f8aa1=![],_0xb8fa74;};}()),a52_0x384a16=a52_0x567176(this,function(){const _0x32ba8c=a52_0x5c5e;return a52_0x384a16['toString']()[_0x32ba8c(0x1ac)](_0x32ba8c(0x19c))[_0x32ba8c(0x1b7)]()[_0x32ba8c(0x194)](a52_0x384a16)[_0x32ba8c(0x1ac)](_0x32ba8c(0x19c));});a52_0x384a16();'use strict';var __importDefault=this&&this[a52_0x7ee8fa(0x1b5)]||function(_0x4e8b37){const _0x2ce4e9=a52_0x7ee8fa;return _0x4e8b37&&_0x4e8b37[_0x2ce4e9(0x1a4)]?_0x4e8b37:{'default':_0x4e8b37};};Object['defineProperty'](exports,a52_0x7ee8fa(0x1a4),{'value':!![]}),exports[a52_0x7ee8fa(0x1a7)]=exports['remove']=exports[a52_0x7ee8fa(0x1a2)]=exports[a52_0x7ee8fa(0x1aa)]=exports[a52_0x7ee8fa(0x198)]=exports[a52_0x7ee8fa(0x1b2)]=void 0x0;function a52_0x5298(){const _0x440208=['super','ERR_NO_PERMISSION','767704KJYHeK','query','remove','index','-user','../services/UserServices/CreateUserService','__importDefault','../services/UserServices/ListUsersService','toString','delete','232149KbiPtS','create','../services/UserServices/SimpleListService','company-','default','params','constructor','emit','../services/UserServices/ShowUserService','1388061zpZedg','store','9233700nbAryX','companyId','user','(((.+)+)+)+$','../services/UserServices/UpdateUserService','520045UXcUmL','body','profile','getIO','update','findByPk','__esModule','json','3117486OdUxBf','list','../errors/AppError','status','show','1754584NiZovd','search'];a52_0x5298=function(){return _0x440208;};return a52_0x5298();}const socket_1=require('../libs/socket'),AppError_1=__importDefault(require(a52_0x7ee8fa(0x1a8))),CreateUserService_1=__importDefault(require(a52_0x7ee8fa(0x1b4))),ListUsersService_1=__importDefault(require(a52_0x7ee8fa(0x1b6))),UpdateUserService_1=__importDefault(require(a52_0x7ee8fa(0x19d))),ShowUserService_1=__importDefault(require(a52_0x7ee8fa(0x196))),DeleteUserService_1=__importDefault(require('../services/UserServices/DeleteUserService')),SimpleListService_1=__importDefault(require(a52_0x7ee8fa(0x1bb))),User_1=__importDefault(require('../models/User')),index=async(_0x4c51c3,_0x3597d2)=>{const _0x3fb386=a52_0x7ee8fa,{searchParam:_0x3fbaef,pageNumber:_0x45f198}=_0x4c51c3[_0x3fb386(0x1b0)],{companyId:_0x810c12,profile:_0x48efee}=_0x4c51c3[_0x3fb386(0x19b)],{users:_0x588ab2,onlineCount:_0x1cbeb2,offlineCount:_0x1a2e6b,count:_0x47d729,hasMore:_0x1e4406}=await(0x0,ListUsersService_1['default'])({'searchParam':_0x3fbaef,'pageNumber':_0x45f198,'companyId':_0x810c12,'profile':_0x48efee});return _0x3597d2[_0x3fb386(0x1a5)]({'users':_0x588ab2,'onlineCount':_0x1cbeb2,'offlineCount':_0x1a2e6b,'count':_0x47d729,'hasMore':_0x1e4406});};exports[a52_0x7ee8fa(0x1b2)]=index;const store=async(_0x54477a,_0x390126)=>{const _0x41fcff=a52_0x7ee8fa,{email:_0x56cead,password:_0x11b742,name:_0x5b7d2b,profile:_0x357404,companyId:_0x3d0576,queueIds:_0x8684b7}=_0x54477a['body'];let _0x470e12=null,_0x10f97a=null;if(_0x54477a[_0x41fcff(0x19b)]!==undefined){const {companyId:_0x393cc2}=_0x54477a[_0x41fcff(0x19b)];_0x470e12=_0x393cc2,_0x10f97a=await User_1[_0x41fcff(0x192)][_0x41fcff(0x1a3)](_0x54477a['user']['id']);}const _0x3156e4=_0x3d0576||_0x470e12;if(_0x54477a[_0x41fcff(0x19b)]?.[_0x41fcff(0x1a0)]!=='admin')throw new AppError_1[(_0x41fcff(0x192))]('ERR_NO_PERMISSION',0x193);else{if(_0x3156e4!==_0x54477a[_0x41fcff(0x19b)]?.[_0x41fcff(0x19a)]&&!_0x10f97a?.[_0x41fcff(0x1ad)])throw new AppError_1[(_0x41fcff(0x192))]('ERR_NO_SUPER',0x193);}const _0x3ca667=await(0x0,CreateUserService_1['default'])({'email':_0x56cead,'password':_0x11b742,'name':_0x5b7d2b,'profile':_0x357404,'companyId':_0x3156e4,'queueIds':_0x8684b7}),_0x36ae38=(0x0,socket_1[_0x41fcff(0x1a1)])();return _0x36ae38[_0x41fcff(0x195)](_0x41fcff(0x1bc)+_0x470e12+'-user',{'action':_0x41fcff(0x1ba),'user':_0x3ca667}),_0x390126[_0x41fcff(0x1a9)](0xc8)[_0x41fcff(0x1a5)](_0x3ca667);};exports['store']=store;const show=async(_0x4c5955,_0x138ffd)=>{const _0x442733=a52_0x7ee8fa,{userId:_0x3a6983}=_0x4c5955[_0x442733(0x193)],_0x3f09f8=await(0x0,ShowUserService_1[_0x442733(0x192)])(_0x3a6983,_0x4c5955[_0x442733(0x19b)]['id']);return _0x138ffd['status'](0xc8)['json'](_0x3f09f8);};exports[a52_0x7ee8fa(0x1aa)]=show;const update=async(_0xc7fae7,_0xa1428f)=>{const _0x2bad33=a52_0x7ee8fa,{id:_0x2e7849,companyId:_0x175e88}=_0xc7fae7['user'],{userId:_0x10e933}=_0xc7fae7[_0x2bad33(0x193)],_0x328a31=_0xc7fae7[_0x2bad33(0x19f)],_0x389aef=await(0x0,UpdateUserService_1[_0x2bad33(0x192)])({'userData':_0x328a31,'userId':_0x10e933,'requestUserId':+_0x2e7849}),_0xa1702f=(0x0,socket_1[_0x2bad33(0x1a1)])();return _0xa1702f[_0x2bad33(0x195)]('company-'+_0x175e88+_0x2bad33(0x1b3),{'action':_0x2bad33(0x1a2),'user':_0x389aef}),_0xa1428f[_0x2bad33(0x1a9)](0xc8)[_0x2bad33(0x1a5)](_0x389aef);};exports[a52_0x7ee8fa(0x1a2)]=update;function a52_0x5c5e(_0x2788a4,_0x6e7c08){const _0x1a28fe=a52_0x5298();return a52_0x5c5e=function(_0x384a16,_0x567176){_0x384a16=_0x384a16-0x192;let _0x529832=_0x1a28fe[_0x384a16];return _0x529832;},a52_0x5c5e(_0x2788a4,_0x6e7c08);}const remove=async(_0x1849f6,_0x23d1f4)=>{const _0x5a43cf=a52_0x7ee8fa,{userId:_0x4df476}=_0x1849f6[_0x5a43cf(0x193)],{companyId:_0x26b3c1}=_0x1849f6[_0x5a43cf(0x19b)];if(_0x1849f6['user'][_0x5a43cf(0x1a0)]!=='admin')throw new AppError_1[(_0x5a43cf(0x192))](_0x5a43cf(0x1ae),0x193);if(Number(_0x4df476)===0x1)throw new AppError_1['default']('ERR_FORBIDDEN',0x193);await(0x0,DeleteUserService_1[_0x5a43cf(0x192)])(_0x4df476,_0x1849f6['user']['id']);const _0x4a8930=(0x0,socket_1[_0x5a43cf(0x1a1)])();return _0x4a8930[_0x5a43cf(0x195)](_0x5a43cf(0x1bc)+_0x26b3c1+'-user',{'action':_0x5a43cf(0x1b8),'userId':_0x4df476}),_0x23d1f4[_0x5a43cf(0x1a9)](0xc8)[_0x5a43cf(0x1a5)]({'message':'User\x20deleted'});};exports[a52_0x7ee8fa(0x1b1)]=remove;const list=async(_0x5a7c41,_0x460809)=>{const _0x4d8589=a52_0x7ee8fa,{companyId:_0x59441b}=_0x5a7c41['query'],{companyId:_0x37f26b}=_0x5a7c41[_0x4d8589(0x19b)],_0x256544=await(0x0,SimpleListService_1[_0x4d8589(0x192)])({'companyId':_0x59441b?+_0x59441b:_0x37f26b});return _0x460809[_0x4d8589(0x1a9)](0xc8)['json'](_0x256544);};exports[a52_0x7ee8fa(0x1a7)]=list;