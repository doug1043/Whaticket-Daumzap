const a43_0x561bbf=a43_0x7fb9;(function(_0x20089c,_0x312f5a){const _0xeaaad6=a43_0x7fb9,_0x3b290f=_0x20089c();while(!![]){try{const _0x484414=-parseInt(_0xeaaad6(0xd9))/0x1*(-parseInt(_0xeaaad6(0xd3))/0x2)+-parseInt(_0xeaaad6(0xc7))/0x3+parseInt(_0xeaaad6(0xeb))/0x4*(-parseInt(_0xeaaad6(0xc5))/0x5)+parseInt(_0xeaaad6(0xd6))/0x6*(-parseInt(_0xeaaad6(0xc2))/0x7)+-parseInt(_0xeaaad6(0xf0))/0x8*(parseInt(_0xeaaad6(0xca))/0x9)+-parseInt(_0xeaaad6(0xc6))/0xa+-parseInt(_0xeaaad6(0xed))/0xb*(-parseInt(_0xeaaad6(0xc8))/0xc);if(_0x484414===_0x312f5a)break;else _0x3b290f['push'](_0x3b290f['shift']());}catch(_0x476765){_0x3b290f['push'](_0x3b290f['shift']());}}}(a43_0x52fb,0x678b8));const a43_0x2af3c0=(function(){let _0x384be9=!![];return function(_0x2b03f6,_0x3a9e07){const _0x54c30d=_0x384be9?function(){const _0x48f3fd=a43_0x7fb9;if(_0x3a9e07){const _0x6f0f35=_0x3a9e07[_0x48f3fd(0xc9)](_0x2b03f6,arguments);return _0x3a9e07=null,_0x6f0f35;}}:function(){};return _0x384be9=![],_0x54c30d;};}()),a43_0x57ea0b=a43_0x2af3c0(this,function(){const _0x4daf9d=a43_0x7fb9;return a43_0x57ea0b[_0x4daf9d(0xcf)]()[_0x4daf9d(0xe0)](_0x4daf9d(0xcc))[_0x4daf9d(0xcf)]()[_0x4daf9d(0xc3)](a43_0x57ea0b)[_0x4daf9d(0xe0)](_0x4daf9d(0xcc));});a43_0x57ea0b();function a43_0x7fb9(_0x371d23,_0x362a61){const _0x942ee4=a43_0x52fb();return a43_0x7fb9=function(_0x57ea0b,_0x2af3c0){_0x57ea0b=_0x57ea0b-0xc1;let _0x52fb98=_0x942ee4[_0x57ea0b];return _0x52fb98;},a43_0x7fb9(_0x371d23,_0x362a61);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x117c56){const _0x49708e=a43_0x7fb9;return _0x117c56&&_0x117c56[_0x49708e(0xec)]?_0x117c56:{'default':_0x117c56};};Object[a43_0x561bbf(0xd7)](exports,a43_0x561bbf(0xec),{'value':!![]}),exports[a43_0x561bbf(0xf4)]=exports['remove']=exports[a43_0x561bbf(0xe6)]=exports['show']=exports[a43_0x561bbf(0xd5)]=exports[a43_0x561bbf(0xde)]=void 0x0;const socket_1=require('../libs/socket'),AppError_1=__importDefault(require(a43_0x561bbf(0xe7))),CreateUserService_1=__importDefault(require(a43_0x561bbf(0xf1))),ListUsersService_1=__importDefault(require('../services/UserServices/ListUsersService')),UpdateUserService_1=__importDefault(require(a43_0x561bbf(0xc1))),ShowUserService_1=__importDefault(require(a43_0x561bbf(0xe3))),DeleteUserService_1=__importDefault(require(a43_0x561bbf(0xe2))),SimpleListService_1=__importDefault(require(a43_0x561bbf(0xf2))),User_1=__importDefault(require('../models/User')),index=async(_0x268168,_0x5b73e5)=>{const _0x323ec2=a43_0x561bbf,{searchParam:_0x15da81,pageNumber:_0x25ed5d}=_0x268168[_0x323ec2(0xd8)],{companyId:_0x4c463e,profile:_0x1f5812}=_0x268168['user'],{users:_0x4123f0,onlineCount:_0x179bdb,offlineCount:_0x180a4c,count:_0x26592a,hasMore:_0xe66bdd}=await(0x0,ListUsersService_1[_0x323ec2(0xe8)])({'searchParam':_0x15da81,'pageNumber':_0x25ed5d,'companyId':_0x4c463e,'profile':_0x1f5812});return _0x5b73e5['json']({'users':_0x4123f0,'onlineCount':_0x179bdb,'offlineCount':_0x180a4c,'count':_0x26592a,'hasMore':_0xe66bdd});};function a43_0x52fb(){const _0x4baf55=['../services/UserServices/ShowUserService','body','getIO','update','../errors/AppError','default','super','json','4oYTwQB','__esModule','22tkDWif','emit','-user','992848tjibSG','../services/UserServices/CreateUserService','../services/UserServices/SimpleListService','remove','list','../services/UserServices/UpdateUserService','260729UQJOCa','constructor','User\x20deleted','547130umixpM','7985120AdzKjI','905847ZLYfza','14313012mGSceL','apply','18IjlpEW','user','(((.+)+)+)+$','company-','ERR_FORBIDDEN','toString','findByPk','ERR_NO_PERMISSION','status','2SrJxGx','delete','store','102QgzvnF','defineProperty','query','129916UGCOGb','companyId','profile','show','admin','index','params','search','create','../services/UserServices/DeleteUserService'];a43_0x52fb=function(){return _0x4baf55;};return a43_0x52fb();}exports[a43_0x561bbf(0xde)]=index;const store=async(_0x2f7de7,_0x4a4b31)=>{const _0xb52904=a43_0x561bbf,{email:_0x361152,password:_0x3a368c,name:_0x4b4ec0,profile:_0x10a5d7,companyId:_0x248959,queueIds:_0x11f184}=_0x2f7de7[_0xb52904(0xe4)];let _0xce6176=null,_0x32895f=null;if(_0x2f7de7[_0xb52904(0xcb)]!==undefined){const {companyId:_0x1e9d23}=_0x2f7de7[_0xb52904(0xcb)];_0xce6176=_0x1e9d23,_0x32895f=await User_1['default'][_0xb52904(0xd0)](_0x2f7de7[_0xb52904(0xcb)]['id']);}const _0x336577=_0x248959||_0xce6176;if(_0x2f7de7['user']?.[_0xb52904(0xdb)]!==_0xb52904(0xdd))throw new AppError_1[(_0xb52904(0xe8))]('ERR_NO_PERMISSION',0x193);else{if(_0x336577!==_0x2f7de7[_0xb52904(0xcb)]?.[_0xb52904(0xda)]&&!_0x32895f?.[_0xb52904(0xe9)])throw new AppError_1['default']('ERR_NO_SUPER',0x193);}const _0x3c6691=await(0x0,CreateUserService_1['default'])({'email':_0x361152,'password':_0x3a368c,'name':_0x4b4ec0,'profile':_0x10a5d7,'companyId':_0x336577,'queueIds':_0x11f184}),_0xbb1e86=(0x0,socket_1[_0xb52904(0xe5)])();return _0xbb1e86[_0xb52904(0xee)](_0xb52904(0xcd)+_0xce6176+_0xb52904(0xef),{'action':_0xb52904(0xe1),'user':_0x3c6691}),_0x4a4b31['status'](0xc8)[_0xb52904(0xea)](_0x3c6691);};exports[a43_0x561bbf(0xd5)]=store;const show=async(_0x52534b,_0xe75855)=>{const _0x122677=a43_0x561bbf,{userId:_0x583914}=_0x52534b[_0x122677(0xdf)],_0x37b500=await(0x0,ShowUserService_1[_0x122677(0xe8)])(_0x583914,_0x52534b['user']['id']);return _0xe75855[_0x122677(0xd2)](0xc8)['json'](_0x37b500);};exports[a43_0x561bbf(0xdc)]=show;const update=async(_0x5147b5,_0xcfd227)=>{const _0x27f1fe=a43_0x561bbf,{id:_0x44c69a,companyId:_0x3658fb}=_0x5147b5[_0x27f1fe(0xcb)],{userId:_0x48ea29}=_0x5147b5[_0x27f1fe(0xdf)],_0x5cb17b=_0x5147b5[_0x27f1fe(0xe4)],_0x5c0e3a=await(0x0,UpdateUserService_1[_0x27f1fe(0xe8)])({'userData':_0x5cb17b,'userId':_0x48ea29,'requestUserId':+_0x44c69a}),_0x52c07a=(0x0,socket_1[_0x27f1fe(0xe5)])();return _0x52c07a[_0x27f1fe(0xee)]('company-'+_0x3658fb+'-user',{'action':_0x27f1fe(0xe6),'user':_0x5c0e3a}),_0xcfd227[_0x27f1fe(0xd2)](0xc8)['json'](_0x5c0e3a);};exports['update']=update;const remove=async(_0x33413f,_0x538292)=>{const _0x5bd2ad=a43_0x561bbf,{userId:_0x30d106}=_0x33413f['params'],{companyId:_0x33c6f2}=_0x33413f[_0x5bd2ad(0xcb)];if(_0x33413f[_0x5bd2ad(0xcb)]['profile']!==_0x5bd2ad(0xdd))throw new AppError_1['default'](_0x5bd2ad(0xd1),0x193);if(Number(_0x30d106)===0x1)throw new AppError_1['default'](_0x5bd2ad(0xce),0x193);await(0x0,DeleteUserService_1[_0x5bd2ad(0xe8)])(_0x30d106,_0x33413f[_0x5bd2ad(0xcb)]['id']);const _0x33b166=(0x0,socket_1[_0x5bd2ad(0xe5)])();return _0x33b166[_0x5bd2ad(0xee)]('company-'+_0x33c6f2+_0x5bd2ad(0xef),{'action':_0x5bd2ad(0xd4),'userId':_0x30d106}),_0x538292[_0x5bd2ad(0xd2)](0xc8)[_0x5bd2ad(0xea)]({'message':_0x5bd2ad(0xc4)});};exports[a43_0x561bbf(0xf3)]=remove;const list=async(_0x947994,_0x4f9f64)=>{const _0x367fe2=a43_0x561bbf,{companyId:_0x396ff6}=_0x947994[_0x367fe2(0xd8)],{companyId:_0x291514}=_0x947994[_0x367fe2(0xcb)],_0x146cd8=await(0x0,SimpleListService_1[_0x367fe2(0xe8)])({'companyId':_0x396ff6?+_0x396ff6:_0x291514});return _0x4f9f64[_0x367fe2(0xd2)](0xc8)['json'](_0x146cd8);};exports[a43_0x561bbf(0xf4)]=list;