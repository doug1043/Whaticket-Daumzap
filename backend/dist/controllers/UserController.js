const a44_0x27ce86=a44_0x4749;(function(_0x56a662,_0x9312e1){const _0x878c7f=a44_0x4749,_0x13ca7f=_0x56a662();while(!![]){try{const _0x595248=-parseInt(_0x878c7f(0x153))/0x1*(-parseInt(_0x878c7f(0x163))/0x2)+parseInt(_0x878c7f(0x166))/0x3+parseInt(_0x878c7f(0x169))/0x4*(-parseInt(_0x878c7f(0x15f))/0x5)+parseInt(_0x878c7f(0x157))/0x6+-parseInt(_0x878c7f(0x174))/0x7*(parseInt(_0x878c7f(0x151))/0x8)+parseInt(_0x878c7f(0x16e))/0x9+-parseInt(_0x878c7f(0x15d))/0xa*(parseInt(_0x878c7f(0x170))/0xb);if(_0x595248===_0x9312e1)break;else _0x13ca7f['push'](_0x13ca7f['shift']());}catch(_0x4549b7){_0x13ca7f['push'](_0x13ca7f['shift']());}}}(a44_0x4b49,0xc9ff1));const a44_0x440a03=(function(){let _0x35f970=!![];return function(_0x385098,_0x54f7a4){const _0x4c9939=_0x35f970?function(){if(_0x54f7a4){const _0x4861c7=_0x54f7a4['apply'](_0x385098,arguments);return _0x54f7a4=null,_0x4861c7;}}:function(){};return _0x35f970=![],_0x4c9939;};}()),a44_0xce8a94=a44_0x440a03(this,function(){const _0x2686b3=a44_0x4749;return a44_0xce8a94[_0x2686b3(0x14f)]()[_0x2686b3(0x158)](_0x2686b3(0x152))['toString']()[_0x2686b3(0x148)](a44_0xce8a94)['search']('(((.+)+)+)+$');});a44_0xce8a94();'use strict';var __importDefault=this&&this[a44_0x27ce86(0x14b)]||function(_0x4a065d){const _0x3711d0=a44_0x27ce86;return _0x4a065d&&_0x4a065d[_0x3711d0(0x14d)]?_0x4a065d:{'default':_0x4a065d};};Object[a44_0x27ce86(0x154)](exports,'__esModule',{'value':!![]}),exports[a44_0x27ce86(0x175)]=exports[a44_0x27ce86(0x164)]=exports[a44_0x27ce86(0x159)]=exports[a44_0x27ce86(0x179)]=exports['storeFromCompanySettings']=exports[a44_0x27ce86(0x16f)]=exports[a44_0x27ce86(0x156)]=void 0x0;function a44_0x4b49(){const _0x199756=['toString','ERR_NO_PERMISSION','864176lyKbrz','(((.+)+)+)+$','78593ReCTsQ','defineProperty','default','index','7437402rlcyDW','search','update','-mainchannel','params','getIO','350BVOWfM','isSuper','10985SeRlUz','O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa','company-','-user','32FHqjBQ','remove','emit','1199085APMcMG','../services/UserServices/ShowUserService','../helpers/CheckSettings','2468CkSiSC','../services/UserServices/DeleteUserService','create','json','userCreation','9144891hsOUVh','store','407891gjgiLj','disabled','body','status','28SGNSyH','list','ERR_USER_CREATION_DISABLED','../services/UserServices/SimpleListService','query','show','delete','url','User\x20deleted','companyId','profile','/signup','../services/UserServices/UpdateUserService','../services/UserServices/ListUsersService','constructor','Acesso\x20negado.','user','__importDefault','storeFromCompanySettings','__esModule','../libs/socket'];a44_0x4b49=function(){return _0x199756;};return a44_0x4b49();}const socket_1=require(a44_0x27ce86(0x14e)),CheckSettings_1=__importDefault(require(a44_0x27ce86(0x168))),AppError_1=__importDefault(require('../errors/AppError')),CreateUserService_1=__importDefault(require('../services/UserServices/CreateUserService')),ListUsersService_1=__importDefault(require(a44_0x27ce86(0x147))),UpdateUserService_1=__importDefault(require(a44_0x27ce86(0x146))),ShowUserService_1=__importDefault(require(a44_0x27ce86(0x167))),DeleteUserService_1=__importDefault(require(a44_0x27ce86(0x16a))),SimpleListService_1=__importDefault(require(a44_0x27ce86(0x177))),index=async(_0x42ff03,_0x5291b9)=>{const _0x197fec=a44_0x27ce86,{searchParam:_0x16406a,pageNumber:_0x1ae9f0}=_0x42ff03[_0x197fec(0x178)],{companyId:_0x14e878,profile:_0x1ab303}=_0x42ff03[_0x197fec(0x14a)],{users:_0x581f53,onlineCount:_0x14ba5e,offlineCount:_0x17b2aa,count:_0x534242,hasMore:_0x21cf78}=await(0x0,ListUsersService_1[_0x197fec(0x155)])({'searchParam':_0x16406a,'pageNumber':_0x1ae9f0,'companyId':_0x14e878,'profile':_0x1ab303});return _0x5291b9['json']({'users':_0x581f53,'onlineCount':_0x14ba5e,'offlineCount':_0x17b2aa,'count':_0x534242,'hasMore':_0x21cf78});};exports['index']=index;const store=async(_0x4d1daa,_0x3b671b)=>{const _0x3aa51a=a44_0x27ce86,{email:_0x5754c0,password:_0x5527e4,name:_0x95df19,profile:_0x2337eb,isTricked:_0x27aa8b,super:_0x2c6b5a,companyId:_0x2d6831,queueIds:_0xf50bd0,allTicket:_0x7bb15d,whatsappId:_0x365ff0,startWork:_0x43dd12,endWork:_0x49b152,profileState:_0x1cb51b,defaultMenu:_0x4d1fe5}=_0x4d1daa[_0x3aa51a(0x172)];let _0x183283=null;if(_0x4d1daa[_0x3aa51a(0x14a)]!==undefined){const {companyId:_0xb3582a}=_0x4d1daa[_0x3aa51a(0x14a)];_0x183283=_0xb3582a;}if(_0x4d1daa[_0x3aa51a(0x172)][_0x3aa51a(0x143)]&&_0x4d1daa[_0x3aa51a(0x14a)][_0x3aa51a(0x143)]!==_0x4d1daa[_0x3aa51a(0x172)][_0x3aa51a(0x143)])throw new AppError_1[(_0x3aa51a(0x155))](_0x3aa51a(0x160));if(!_0x4d1daa[_0x3aa51a(0x14a)][_0x3aa51a(0x15e)]&&_0x2c6b5a)throw new AppError_1[(_0x3aa51a(0x155))]('Acesso\x20negado.');if(_0x4d1daa[_0x3aa51a(0x141)]==='/signup'&&await(0x0,CheckSettings_1[_0x3aa51a(0x155)])(_0x3aa51a(0x16d))===_0x3aa51a(0x171))throw new AppError_1[(_0x3aa51a(0x155))](_0x3aa51a(0x176),0x193);else{if(_0x4d1daa['url']!=='/signup'&&_0x4d1daa[_0x3aa51a(0x14a)][_0x3aa51a(0x144)]!=='admin')throw new AppError_1['default'](_0x3aa51a(0x150),0x193);}const _0x5f3d07=await(0x0,CreateUserService_1['default'])({'email':_0x5754c0,'password':_0x5527e4,'name':_0x95df19,'profile':_0x2337eb,'isTricked':_0x27aa8b,'super':_0x2c6b5a,'companyId':_0x2d6831||_0x183283,'queueIds':_0xf50bd0,'allTicket':_0x7bb15d,'whatsappId':_0x365ff0,'startWork':_0x43dd12,'endWork':_0x49b152,'defaultMenu':_0x4d1fe5}),_0x3fa207=(0x0,socket_1[_0x3aa51a(0x15c)])();return _0x3fa207[_0x3aa51a(0x165)](_0x3aa51a(0x161)+_0x183283+'-user',{'action':_0x3aa51a(0x16b),'user':_0x5f3d07}),_0x3b671b[_0x3aa51a(0x173)](0xc8)[_0x3aa51a(0x16c)](_0x5f3d07);};exports[a44_0x27ce86(0x16f)]=store;const storeFromCompanySettings=async(_0x3c9aed,_0x40b532)=>{const _0xc512f=a44_0x27ce86,{email:_0x2812c3,password:_0x416c3b,name:_0x582ef4,profile:_0x18dd06,isTricked:_0x244424,super:_0x4e0569,companyId:_0x472bac,queueIds:_0x3c5583,allTicket:_0x3a4163,whatsappId:_0x3bd448,startWork:_0x1c2f6a,endWork:_0x2b654f,profileState:_0x11f13a,defaultMenu:_0x4d10c6}=_0x3c9aed[_0xc512f(0x172)];let _0xa4f02d=null;if(_0x3c9aed[_0xc512f(0x14a)]!==undefined){const {companyId:_0x3bce60}=_0x3c9aed[_0xc512f(0x14a)];_0xa4f02d=_0x3bce60;}if(_0x3c9aed[_0xc512f(0x172)][_0xc512f(0x143)]&&_0x3c9aed[_0xc512f(0x14a)][_0xc512f(0x143)]!==_0x3c9aed[_0xc512f(0x172)][_0xc512f(0x143)])throw new AppError_1[(_0xc512f(0x155))](_0xc512f(0x160));if(!_0x3c9aed[_0xc512f(0x14a)][_0xc512f(0x15e)]&&_0x4e0569)throw new AppError_1['default'](_0xc512f(0x149));if(_0x3c9aed[_0xc512f(0x141)]==='/signup'&&await(0x0,CheckSettings_1[_0xc512f(0x155)])(_0xc512f(0x16d))===_0xc512f(0x171))throw new AppError_1[(_0xc512f(0x155))](_0xc512f(0x176),0x193);else{if(_0x3c9aed[_0xc512f(0x141)]!==_0xc512f(0x145)&&_0x3c9aed['user'][_0xc512f(0x144)]!=='admin')throw new AppError_1[(_0xc512f(0x155))](_0xc512f(0x150),0x193);}const _0xf2bc2b=await(0x0,CreateUserService_1[_0xc512f(0x155)])({'email':_0x2812c3,'password':_0x416c3b,'name':_0x582ef4,'profile':_0x18dd06,'isTricked':_0x244424,'super':_0x4e0569,'companyId':_0x472bac||_0xa4f02d,'queueIds':_0x3c5583,'allTicket':_0x3a4163,'whatsappId':_0x3bd448,'startWork':_0x1c2f6a,'endWork':_0x2b654f,'defaultMenu':_0x4d10c6}),_0x2b0d34=(0x0,socket_1['getIO'])();return _0x2b0d34['to'](_0xc512f(0x161)+_0xa4f02d+_0xc512f(0x15a))[_0xc512f(0x165)]('company-'+_0xa4f02d+_0xc512f(0x162),{'action':_0xc512f(0x16b),'user':_0xf2bc2b}),_0x40b532[_0xc512f(0x173)](0xc8)[_0xc512f(0x16c)](_0xf2bc2b);};exports[a44_0x27ce86(0x14c)]=storeFromCompanySettings;const show=async(_0x22e82a,_0x3d4109)=>{const _0x1c3595=a44_0x27ce86,{userId:_0x167db1}=_0x22e82a[_0x1c3595(0x15b)],_0xcb4c51=await(0x0,ShowUserService_1[_0x1c3595(0x155)])(_0x167db1,_0x22e82a[_0x1c3595(0x14a)]['id']);return _0x3d4109['status'](0xc8)[_0x1c3595(0x16c)](_0xcb4c51);};exports[a44_0x27ce86(0x179)]=show;function a44_0x4749(_0x53547c,_0x58330a){const _0x847a75=a44_0x4b49();return a44_0x4749=function(_0xce8a94,_0x440a03){_0xce8a94=_0xce8a94-0x140;let _0x4b4913=_0x847a75[_0xce8a94];return _0x4b4913;},a44_0x4749(_0x53547c,_0x58330a);}const update=async(_0x497fdc,_0x10fb19)=>{const _0x20a168=a44_0x27ce86,{id:_0xdab611,companyId:_0x51f972}=_0x497fdc[_0x20a168(0x14a)],{userId:_0x3ca943}=_0x497fdc[_0x20a168(0x15b)],_0x429403=_0x497fdc['body'],_0x316520=await(0x0,UpdateUserService_1[_0x20a168(0x155)])({'userData':_0x429403,'userId':_0x3ca943,'requestUserId':+_0xdab611}),_0x37d1f6=(0x0,socket_1['getIO'])();return _0x37d1f6['to']('company-'+_0x51f972+_0x20a168(0x15a))[_0x20a168(0x165)](_0x20a168(0x161)+_0x51f972+'-user',{'action':'update','user':_0x316520}),_0x10fb19[_0x20a168(0x173)](0xc8)[_0x20a168(0x16c)](_0x316520);};exports[a44_0x27ce86(0x159)]=update;const remove=async(_0x488ad8,_0x80932e)=>{const _0x1e637a=a44_0x27ce86,{userId:_0x59506e}=_0x488ad8['params'],{companyId:_0x10b0aa}=_0x488ad8['user'];if(_0x488ad8[_0x1e637a(0x14a)][_0x1e637a(0x144)]!=='admin')throw new AppError_1[(_0x1e637a(0x155))]('ERR_NO_PERMISSION',0x193);await(0x0,DeleteUserService_1[_0x1e637a(0x155)])(_0x59506e,_0x488ad8[_0x1e637a(0x14a)]['id']);const _0x4ff724=(0x0,socket_1[_0x1e637a(0x15c)])();return _0x4ff724['to'](_0x1e637a(0x161)+_0x10b0aa+_0x1e637a(0x15a))[_0x1e637a(0x165)]('company-'+_0x10b0aa+_0x1e637a(0x162),{'action':_0x1e637a(0x140),'userId':_0x59506e}),_0x80932e[_0x1e637a(0x173)](0xc8)[_0x1e637a(0x16c)]({'message':_0x1e637a(0x142)});};exports['remove']=remove;const list=async(_0x2397d5,_0x581e86)=>{const _0x3b5513=a44_0x27ce86,{companyId:_0x247078}=_0x2397d5[_0x3b5513(0x178)],{companyId:_0x50354d}=_0x2397d5[_0x3b5513(0x14a)],_0x3f6ba3=await(0x0,SimpleListService_1[_0x3b5513(0x155)])({'companyId':_0x247078?+_0x247078:_0x50354d});return _0x581e86[_0x3b5513(0x173)](0xc8)[_0x3b5513(0x16c)](_0x3f6ba3);};exports[a44_0x27ce86(0x175)]=list;