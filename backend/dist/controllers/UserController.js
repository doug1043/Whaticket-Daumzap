const a44_0x265e37=a44_0x1a84;(function(_0x4e01ec,_0x2a14a1){const _0xd73ef2=a44_0x1a84,_0x5193bd=_0x4e01ec();while(!![]){try{const _0x4bf56f=-parseInt(_0xd73ef2(0x1f0))/0x1+-parseInt(_0xd73ef2(0x201))/0x2+parseInt(_0xd73ef2(0x20f))/0x3+-parseInt(_0xd73ef2(0x1f6))/0x4+parseInt(_0xd73ef2(0x206))/0x5+parseInt(_0xd73ef2(0x209))/0x6*(parseInt(_0xd73ef2(0x1fa))/0x7)+-parseInt(_0xd73ef2(0x216))/0x8;if(_0x4bf56f===_0x2a14a1)break;else _0x5193bd['push'](_0x5193bd['shift']());}catch(_0x130c6c){_0x5193bd['push'](_0x5193bd['shift']());}}}(a44_0x2839,0xdb335));const a44_0x3b4ab8=(function(){let _0x23f82b=!![];return function(_0x343d93,_0x45ba82){const _0x5785e9=_0x23f82b?function(){const _0x128b8c=a44_0x1a84;if(_0x45ba82){const _0x95fa16=_0x45ba82[_0x128b8c(0x1ff)](_0x343d93,arguments);return _0x45ba82=null,_0x95fa16;}}:function(){};return _0x23f82b=![],_0x5785e9;};}()),a44_0x55e30b=a44_0x3b4ab8(this,function(){const _0x16e156=a44_0x1a84;return a44_0x55e30b[_0x16e156(0x20e)]()[_0x16e156(0x1ee)](_0x16e156(0x1ed))['toString']()[_0x16e156(0x1f5)](a44_0x55e30b)[_0x16e156(0x1ee)]('(((.+)+)+)+$');});function a44_0x1a84(_0x1e95b2,_0x1370c5){const _0x569d31=a44_0x2839();return a44_0x1a84=function(_0x55e30b,_0x3b4ab8){_0x55e30b=_0x55e30b-0x1ea;let _0x283970=_0x569d31[_0x55e30b];return _0x283970;},a44_0x1a84(_0x1e95b2,_0x1370c5);}a44_0x55e30b();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x382ffe){const _0x5e0d41=a44_0x1a84;return _0x382ffe&&_0x382ffe[_0x5e0d41(0x214)]?_0x382ffe:{'default':_0x382ffe};};Object[a44_0x265e37(0x21b)](exports,a44_0x265e37(0x214),{'value':!![]}),exports[a44_0x265e37(0x1fd)]=exports['remove']=exports[a44_0x265e37(0x1f1)]=exports['show']=exports['storeFromCompanySettings']=exports[a44_0x265e37(0x1ec)]=exports[a44_0x265e37(0x1f7)]=void 0x0;const socket_1=require(a44_0x265e37(0x1eb)),CheckSettings_1=__importDefault(require('../helpers/CheckSettings')),AppError_1=__importDefault(require(a44_0x265e37(0x205))),CreateUserService_1=__importDefault(require(a44_0x265e37(0x21c))),ListUsersService_1=__importDefault(require(a44_0x265e37(0x1f2))),UpdateUserService_1=__importDefault(require(a44_0x265e37(0x21e))),ShowUserService_1=__importDefault(require(a44_0x265e37(0x204))),DeleteUserService_1=__importDefault(require(a44_0x265e37(0x1f4))),SimpleListService_1=__importDefault(require('../services/UserServices/SimpleListService')),index=async(_0x3997a7,_0x169817)=>{const _0x8a0bef=a44_0x265e37,{searchParam:_0xcd3621,pageNumber:_0x35f547}=_0x3997a7[_0x8a0bef(0x202)],{companyId:_0x3375c5,profile:_0x171761}=_0x3997a7['user'],{users:_0x411f7b,onlineCount:_0xc71aa0,offlineCount:_0x3b6ac8,count:_0x325318,hasMore:_0x203ba7}=await(0x0,ListUsersService_1[_0x8a0bef(0x21d)])({'searchParam':_0xcd3621,'pageNumber':_0x35f547,'companyId':_0x3375c5,'profile':_0x171761});return _0x169817[_0x8a0bef(0x208)]({'users':_0x411f7b,'onlineCount':_0xc71aa0,'offlineCount':_0x3b6ac8,'count':_0x325318,'hasMore':_0x203ba7});};exports[a44_0x265e37(0x1f7)]=index;const store=async(_0xae67ad,_0x4053d1)=>{const _0x4ece60=a44_0x265e37,{email:_0xa03d30,password:_0x122ace,name:_0x524d98,profile:_0x4e3bb3,isTricked:_0x196d9f,super:_0x508a91,companyId:_0x3e03a8,queueIds:_0x126b54,allTicket:_0x591e21,whatsappId:_0x47834f,startWork:_0x291efe,endWork:_0x1e3858,profileState:_0x251b29,defaultMenu:_0x43705b}=_0xae67ad[_0x4ece60(0x1fb)];let _0x2f249d=null;if(_0xae67ad[_0x4ece60(0x211)]!==undefined){const {companyId:_0x427530}=_0xae67ad[_0x4ece60(0x211)];_0x2f249d=_0x427530;}if(_0xae67ad[_0x4ece60(0x1fb)][_0x4ece60(0x1ef)]&&_0xae67ad['user']['companyId']!==_0xae67ad[_0x4ece60(0x1fb)][_0x4ece60(0x1ef)])throw new AppError_1[(_0x4ece60(0x21d))]('O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa');if(!_0xae67ad[_0x4ece60(0x211)][_0x4ece60(0x212)]&&_0x508a91)throw new AppError_1[(_0x4ece60(0x21d))]('Acesso\x20negado.');if(_0xae67ad['url']==='/signup'&&await(0x0,CheckSettings_1['default'])('userCreation')===_0x4ece60(0x20d))throw new AppError_1[(_0x4ece60(0x21d))](_0x4ece60(0x1ea),0x193);else{if(_0xae67ad[_0x4ece60(0x1f9)]!==_0x4ece60(0x1f8)&&_0xae67ad[_0x4ece60(0x211)][_0x4ece60(0x207)]!==_0x4ece60(0x203))throw new AppError_1[(_0x4ece60(0x21d))]('ERR_NO_PERMISSION',0x193);}const _0x216ffb=await(0x0,CreateUserService_1['default'])({'email':_0xa03d30,'password':_0x122ace,'name':_0x524d98,'profile':_0x4e3bb3,'isTricked':_0x196d9f,'super':_0x508a91,'companyId':_0x3e03a8||_0x2f249d,'queueIds':_0x126b54,'allTicket':_0x591e21,'whatsappId':_0x47834f,'startWork':_0x291efe,'endWork':_0x1e3858,'defaultMenu':_0x43705b}),_0x8f0ba2=(0x0,socket_1[_0x4ece60(0x217)])();return _0x8f0ba2['emit'](_0x4ece60(0x20b)+_0x2f249d+_0x4ece60(0x1fc),{'action':_0x4ece60(0x1fe),'user':_0x216ffb}),_0x4053d1[_0x4ece60(0x210)](0xc8)[_0x4ece60(0x208)](_0x216ffb);};exports[a44_0x265e37(0x1ec)]=store;const storeFromCompanySettings=async(_0x32e846,_0x3eb53f)=>{const _0x5cb52e=a44_0x265e37,{email:_0x1e89a5,password:_0x514158,name:_0x21149a,profile:_0x8e49a3,isTricked:_0xb87125,super:_0x52b0c,companyId:_0x2250be,queueIds:_0x10b400,allTicket:_0x14359a,whatsappId:_0x1d69ab,startWork:_0x5a559a,endWork:_0x49dc80,profileState:_0x38da2f,defaultMenu:_0x546ad4}=_0x32e846[_0x5cb52e(0x1fb)];let _0x4ecd1f=null;if(_0x32e846['user']!==undefined){const {companyId:_0x75a876}=_0x32e846['user'];_0x4ecd1f=_0x75a876;}if(_0x32e846[_0x5cb52e(0x1fb)][_0x5cb52e(0x1ef)]&&_0x32e846[_0x5cb52e(0x211)][_0x5cb52e(0x1ef)]!==_0x32e846['body']['companyId'])throw new AppError_1[(_0x5cb52e(0x21d))]('O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa');if(!_0x32e846[_0x5cb52e(0x211)]['isSuper']&&_0x52b0c)throw new AppError_1[(_0x5cb52e(0x21d))](_0x5cb52e(0x20c));if(_0x32e846[_0x5cb52e(0x1f9)]===_0x5cb52e(0x1f8)&&await(0x0,CheckSettings_1[_0x5cb52e(0x21d)])(_0x5cb52e(0x213))===_0x5cb52e(0x20d))throw new AppError_1[(_0x5cb52e(0x21d))](_0x5cb52e(0x1ea),0x193);else{if(_0x32e846[_0x5cb52e(0x1f9)]!==_0x5cb52e(0x1f8)&&_0x32e846[_0x5cb52e(0x211)][_0x5cb52e(0x207)]!==_0x5cb52e(0x203))throw new AppError_1['default'](_0x5cb52e(0x219),0x193);}const _0x1d9208=await(0x0,CreateUserService_1[_0x5cb52e(0x21d)])({'email':_0x1e89a5,'password':_0x514158,'name':_0x21149a,'profile':_0x8e49a3,'isTricked':_0xb87125,'super':_0x52b0c,'companyId':_0x2250be||_0x4ecd1f,'queueIds':_0x10b400,'allTicket':_0x14359a,'whatsappId':_0x1d69ab,'startWork':_0x5a559a,'endWork':_0x49dc80,'defaultMenu':_0x546ad4}),_0x498028=(0x0,socket_1[_0x5cb52e(0x217)])();return _0x498028['to'](_0x5cb52e(0x20b)+_0x4ecd1f+_0x5cb52e(0x21f))[_0x5cb52e(0x1f3)](_0x5cb52e(0x20b)+_0x4ecd1f+_0x5cb52e(0x1fc),{'action':_0x5cb52e(0x1fe),'user':_0x1d9208}),_0x3eb53f[_0x5cb52e(0x210)](0xc8)[_0x5cb52e(0x208)](_0x1d9208);};exports[a44_0x265e37(0x20a)]=storeFromCompanySettings;const show=async(_0x26c4a0,_0x91c6d1)=>{const _0x4aa7b0=a44_0x265e37,{userId:_0x2fd085}=_0x26c4a0['params'],_0x3d621e=await(0x0,ShowUserService_1[_0x4aa7b0(0x21d)])(_0x2fd085,_0x26c4a0[_0x4aa7b0(0x211)]['id']);return _0x91c6d1[_0x4aa7b0(0x210)](0xc8)[_0x4aa7b0(0x208)](_0x3d621e);};exports[a44_0x265e37(0x200)]=show;function a44_0x2839(){const _0x13d7c2=['User\x20deleted','9485128hGcZWQ','getIO','remove','ERR_NO_PERMISSION','params','defineProperty','../services/UserServices/CreateUserService','default','../services/UserServices/UpdateUserService','-mainchannel','ERR_USER_CREATION_DISABLED','../libs/socket','store','(((.+)+)+)+$','search','companyId','978471yKVgIq','update','../services/UserServices/ListUsersService','emit','../services/UserServices/DeleteUserService','constructor','211996IXJLBT','index','/signup','url','483jgcGAl','body','-user','list','create','apply','show','1273760akkjvy','query','admin','../services/UserServices/ShowUserService','../errors/AppError','3295425uQakBb','profile','json','131148absXUx','storeFromCompanySettings','company-','Acesso\x20negado.','disabled','toString','4753647ABFvwc','status','user','isSuper','userCreation','__esModule'];a44_0x2839=function(){return _0x13d7c2;};return a44_0x2839();}const update=async(_0x3bdcae,_0x692884)=>{const _0x285a63=a44_0x265e37,{id:_0x1c98f2,companyId:_0x256e29}=_0x3bdcae['user'],{userId:_0x22b7a7}=_0x3bdcae[_0x285a63(0x21a)],_0x3f9946=_0x3bdcae[_0x285a63(0x1fb)],_0x359202=await(0x0,UpdateUserService_1['default'])({'userData':_0x3f9946,'userId':_0x22b7a7,'requestUserId':+_0x1c98f2}),_0x2d13b1=(0x0,socket_1[_0x285a63(0x217)])();return _0x2d13b1['to'](_0x285a63(0x20b)+_0x256e29+_0x285a63(0x21f))['emit'](_0x285a63(0x20b)+_0x256e29+_0x285a63(0x1fc),{'action':_0x285a63(0x1f1),'user':_0x359202}),_0x692884['status'](0xc8)['json'](_0x359202);};exports['update']=update;const remove=async(_0x3e11ab,_0x40f4b8)=>{const _0xebb748=a44_0x265e37,{userId:_0x35503e}=_0x3e11ab[_0xebb748(0x21a)],{companyId:_0xf61993}=_0x3e11ab[_0xebb748(0x211)];if(_0x3e11ab[_0xebb748(0x211)][_0xebb748(0x207)]!==_0xebb748(0x203))throw new AppError_1['default'](_0xebb748(0x219),0x193);await(0x0,DeleteUserService_1['default'])(_0x35503e,_0x3e11ab['user']['id']);const _0x3a60b7=(0x0,socket_1[_0xebb748(0x217)])();return _0x3a60b7['to']('company-'+_0xf61993+'-mainchannel')[_0xebb748(0x1f3)](_0xebb748(0x20b)+_0xf61993+_0xebb748(0x1fc),{'action':'delete','userId':_0x35503e}),_0x40f4b8['status'](0xc8)[_0xebb748(0x208)]({'message':_0xebb748(0x215)});};exports[a44_0x265e37(0x218)]=remove;const list=async(_0xafb4aa,_0x2bb727)=>{const _0x59e91b=a44_0x265e37,{companyId:_0xe06a3f}=_0xafb4aa[_0x59e91b(0x202)],{companyId:_0x16baf5}=_0xafb4aa[_0x59e91b(0x211)],_0x363c83=await(0x0,SimpleListService_1[_0x59e91b(0x21d)])({'companyId':_0xe06a3f?+_0xe06a3f:_0x16baf5});return _0x2bb727[_0x59e91b(0x210)](0xc8)[_0x59e91b(0x208)](_0x363c83);};exports[a44_0x265e37(0x1fd)]=list;