const a44_0x3973d1=a44_0x4f5d;(function(_0x28d4d6,_0x476878){const _0x509c98=a44_0x4f5d,_0x21c9da=_0x28d4d6();while(!![]){try{const _0x332a0e=-parseInt(_0x509c98(0xa6))/0x1*(-parseInt(_0x509c98(0xa9))/0x2)+parseInt(_0x509c98(0xcb))/0x3*(parseInt(_0x509c98(0xd7))/0x4)+parseInt(_0x509c98(0xba))/0x5+parseInt(_0x509c98(0xd3))/0x6+-parseInt(_0x509c98(0xd2))/0x7*(parseInt(_0x509c98(0xad))/0x8)+parseInt(_0x509c98(0xd5))/0x9+-parseInt(_0x509c98(0xc9))/0xa*(parseInt(_0x509c98(0xcc))/0xb);if(_0x332a0e===_0x476878)break;else _0x21c9da['push'](_0x21c9da['shift']());}catch(_0x1e27b9){_0x21c9da['push'](_0x21c9da['shift']());}}}(a44_0x4a36,0x28880));const a44_0x1a65dd=(function(){let _0x5246f7=!![];return function(_0x9542da,_0x367025){const _0x27bb71=_0x5246f7?function(){const _0x3f12ed=a44_0x4f5d;if(_0x367025){const _0x538526=_0x367025[_0x3f12ed(0xc3)](_0x9542da,arguments);return _0x367025=null,_0x538526;}}:function(){};return _0x5246f7=![],_0x27bb71;};}()),a44_0xf0351a=a44_0x1a65dd(this,function(){const _0x55a658=a44_0x4f5d;return a44_0xf0351a['toString']()[_0x55a658(0xaa)](_0x55a658(0xb1))[_0x55a658(0xb7)]()[_0x55a658(0xb3)](a44_0xf0351a)['search'](_0x55a658(0xb1));});a44_0xf0351a();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4f3975){const _0x437fa4=a44_0x4f5d;return _0x4f3975&&_0x4f3975[_0x437fa4(0xbc)]?_0x4f3975:{'default':_0x4f3975};};Object['defineProperty'](exports,a44_0x3973d1(0xbc),{'value':!![]}),exports[a44_0x3973d1(0xa7)]=exports['remove']=exports[a44_0x3973d1(0xb2)]=exports[a44_0x3973d1(0xc8)]=exports[a44_0x3973d1(0xc6)]=exports[a44_0x3973d1(0xb6)]=exports['index']=void 0x0;function a44_0x4a36(){const _0x276477=['2WIDJyx','search','../services/UserServices/ListUsersService','getIO','16jpgxTe','../services/UserServices/SimpleListService','userCreation','create','(((.+)+)+)+$','update','constructor','../services/UserServices/ShowUserService','../errors/AppError','store','toString','delete','-mainchannel','695850emOrUU','admin','__esModule','ERR_USER_CREATION_DISABLED','profile','status','url','-user','O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa','apply','query','company-','storeFromCompanySettings','emit','show','3790nHvKIu','params','1902Zmxlzz','21967fHsjzo','isSuper','disabled','Acesso\x20negado.','remove','index','1125593tdYlBs','1735890anJfyv','default','2464947BlSQfu','User\x20deleted','1360TCgXWI','json','companyId','/signup','ERR_NO_PERMISSION','../services/UserServices/DeleteUserService','user','326549LkRERw','list','body'];a44_0x4a36=function(){return _0x276477;};return a44_0x4a36();}const socket_1=require('../libs/socket'),CheckSettings_1=__importDefault(require('../helpers/CheckSettings')),AppError_1=__importDefault(require(a44_0x3973d1(0xb5))),CreateUserService_1=__importDefault(require('../services/UserServices/CreateUserService')),ListUsersService_1=__importDefault(require(a44_0x3973d1(0xab))),UpdateUserService_1=__importDefault(require('../services/UserServices/UpdateUserService')),ShowUserService_1=__importDefault(require(a44_0x3973d1(0xb4))),DeleteUserService_1=__importDefault(require(a44_0x3973d1(0xa4))),SimpleListService_1=__importDefault(require(a44_0x3973d1(0xae))),index=async(_0x5ec3a3,_0x149761)=>{const _0x3fa03a=a44_0x3973d1,{searchParam:_0xe8af84,pageNumber:_0xbcf8ff}=_0x5ec3a3[_0x3fa03a(0xc4)],{companyId:_0x3faa42,profile:_0x546dec}=_0x5ec3a3[_0x3fa03a(0xa5)],{users:_0x4f544b,onlineCount:_0x578550,offlineCount:_0x36eeae,count:_0x3a9a12,hasMore:_0x4b1652}=await(0x0,ListUsersService_1[_0x3fa03a(0xd4)])({'searchParam':_0xe8af84,'pageNumber':_0xbcf8ff,'companyId':_0x3faa42,'profile':_0x546dec});return _0x149761[_0x3fa03a(0xd8)]({'users':_0x4f544b,'onlineCount':_0x578550,'offlineCount':_0x36eeae,'count':_0x3a9a12,'hasMore':_0x4b1652});};exports[a44_0x3973d1(0xd1)]=index;const store=async(_0x13d4df,_0x367ff0)=>{const _0x32bc59=a44_0x3973d1,{email:_0x569821,password:_0x5e8bdf,name:_0x38f00d,profile:_0x17849a,isTricked:_0x324d8c,super:_0x3ad27d,companyId:_0x337784,queueIds:_0x483f44,allTicket:_0x1a9264,whatsappId:_0x504056,startWork:_0x496ff2,endWork:_0x2bba49,profileState:_0x5ef5e9,defaultMenu:_0xc047a1}=_0x13d4df[_0x32bc59(0xa8)];let _0x9117b7=null;if(_0x13d4df[_0x32bc59(0xa5)]!==undefined){const {companyId:_0x36315c}=_0x13d4df[_0x32bc59(0xa5)];_0x9117b7=_0x36315c;}if(_0x13d4df[_0x32bc59(0xa8)][_0x32bc59(0xd9)]&&_0x13d4df[_0x32bc59(0xa5)][_0x32bc59(0xd9)]!==_0x13d4df[_0x32bc59(0xa8)]['companyId'])throw new AppError_1[(_0x32bc59(0xd4))](_0x32bc59(0xc2));if(!_0x13d4df[_0x32bc59(0xa5)][_0x32bc59(0xcd)]&&_0x3ad27d)throw new AppError_1[(_0x32bc59(0xd4))](_0x32bc59(0xcf));if(_0x13d4df[_0x32bc59(0xc0)]===_0x32bc59(0xda)&&await(0x0,CheckSettings_1[_0x32bc59(0xd4)])(_0x32bc59(0xaf))==='disabled')throw new AppError_1[(_0x32bc59(0xd4))]('ERR_USER_CREATION_DISABLED',0x193);else{if(_0x13d4df['url']!==_0x32bc59(0xda)&&_0x13d4df[_0x32bc59(0xa5)][_0x32bc59(0xbe)]!==_0x32bc59(0xbb))throw new AppError_1[(_0x32bc59(0xd4))](_0x32bc59(0xdb),0x193);}const _0x3932bb=await(0x0,CreateUserService_1['default'])({'email':_0x569821,'password':_0x5e8bdf,'name':_0x38f00d,'profile':_0x17849a,'isTricked':_0x324d8c,'super':_0x3ad27d,'companyId':_0x337784||_0x9117b7,'queueIds':_0x483f44,'allTicket':_0x1a9264,'whatsappId':_0x504056,'startWork':_0x496ff2,'endWork':_0x2bba49,'defaultMenu':_0xc047a1}),_0x34b6d8=(0x0,socket_1[_0x32bc59(0xac)])();return _0x34b6d8[_0x32bc59(0xc7)](_0x32bc59(0xc5)+_0x9117b7+_0x32bc59(0xc1),{'action':'create','user':_0x3932bb}),_0x367ff0[_0x32bc59(0xbf)](0xc8)[_0x32bc59(0xd8)](_0x3932bb);};exports[a44_0x3973d1(0xb6)]=store;const storeFromCompanySettings=async(_0x3e68f4,_0x3f9c5c)=>{const _0x591615=a44_0x3973d1,{email:_0x27fd93,password:_0x4b19cf,name:_0xfd4039,profile:_0x27ff61,isTricked:_0x5e91f1,super:_0x51bcf7,companyId:_0x413083,queueIds:_0x571dba,allTicket:_0x255f7b,whatsappId:_0x381658,startWork:_0x1f9565,endWork:_0x3b1e21,profileState:_0x172de5,defaultMenu:_0x273560}=_0x3e68f4[_0x591615(0xa8)];let _0x4cfc4d=null;if(_0x3e68f4[_0x591615(0xa5)]!==undefined){const {companyId:_0x20ef7e}=_0x3e68f4[_0x591615(0xa5)];_0x4cfc4d=_0x20ef7e;}if(_0x3e68f4[_0x591615(0xa8)][_0x591615(0xd9)]&&_0x3e68f4[_0x591615(0xa5)][_0x591615(0xd9)]!==_0x3e68f4[_0x591615(0xa8)][_0x591615(0xd9)])throw new AppError_1['default'](_0x591615(0xc2));if(!_0x3e68f4[_0x591615(0xa5)][_0x591615(0xcd)]&&_0x51bcf7)throw new AppError_1['default'](_0x591615(0xcf));if(_0x3e68f4[_0x591615(0xc0)]==='/signup'&&await(0x0,CheckSettings_1[_0x591615(0xd4)])(_0x591615(0xaf))===_0x591615(0xce))throw new AppError_1[(_0x591615(0xd4))](_0x591615(0xbd),0x193);else{if(_0x3e68f4['url']!==_0x591615(0xda)&&_0x3e68f4[_0x591615(0xa5)][_0x591615(0xbe)]!==_0x591615(0xbb))throw new AppError_1[(_0x591615(0xd4))](_0x591615(0xdb),0x193);}const _0x502be8=await(0x0,CreateUserService_1[_0x591615(0xd4)])({'email':_0x27fd93,'password':_0x4b19cf,'name':_0xfd4039,'profile':_0x27ff61,'isTricked':_0x5e91f1,'super':_0x51bcf7,'companyId':_0x413083||_0x4cfc4d,'queueIds':_0x571dba,'allTicket':_0x255f7b,'whatsappId':_0x381658,'startWork':_0x1f9565,'endWork':_0x3b1e21,'defaultMenu':_0x273560}),_0x574b9b=(0x0,socket_1[_0x591615(0xac)])();return _0x574b9b['to'](_0x591615(0xc5)+_0x4cfc4d+'-mainchannel')['emit'](_0x591615(0xc5)+_0x4cfc4d+_0x591615(0xc1),{'action':_0x591615(0xb0),'user':_0x502be8}),_0x3f9c5c['status'](0xc8)[_0x591615(0xd8)](_0x502be8);};exports[a44_0x3973d1(0xc6)]=storeFromCompanySettings;const show=async(_0x20c88e,_0x493234)=>{const _0x43703a=a44_0x3973d1,{userId:_0x446b85}=_0x20c88e[_0x43703a(0xca)],_0xe4fac4=await(0x0,ShowUserService_1['default'])(_0x446b85,_0x20c88e['user']['id']);return _0x493234[_0x43703a(0xbf)](0xc8)[_0x43703a(0xd8)](_0xe4fac4);};exports[a44_0x3973d1(0xc8)]=show;const update=async(_0x471648,_0x262981)=>{const _0x252819=a44_0x3973d1,{id:_0xddd547,companyId:_0x3ecd68}=_0x471648[_0x252819(0xa5)],{userId:_0x45241d}=_0x471648['params'],_0x241c1a=_0x471648[_0x252819(0xa8)],_0x238bf2=await(0x0,UpdateUserService_1[_0x252819(0xd4)])({'userData':_0x241c1a,'userId':_0x45241d,'requestUserId':+_0xddd547}),_0x2f396d=(0x0,socket_1[_0x252819(0xac)])();return _0x2f396d['to']('company-'+_0x3ecd68+'-mainchannel')[_0x252819(0xc7)](_0x252819(0xc5)+_0x3ecd68+_0x252819(0xc1),{'action':'update','user':_0x238bf2}),_0x262981[_0x252819(0xbf)](0xc8)['json'](_0x238bf2);};exports[a44_0x3973d1(0xb2)]=update;const remove=async(_0x2e49d1,_0x54b5c2)=>{const _0x27c4e6=a44_0x3973d1,{userId:_0x5457a4}=_0x2e49d1[_0x27c4e6(0xca)],{companyId:_0xd1363a}=_0x2e49d1[_0x27c4e6(0xa5)];if(_0x2e49d1[_0x27c4e6(0xa5)][_0x27c4e6(0xbe)]!==_0x27c4e6(0xbb))throw new AppError_1['default'](_0x27c4e6(0xdb),0x193);await(0x0,DeleteUserService_1[_0x27c4e6(0xd4)])(_0x5457a4,_0x2e49d1[_0x27c4e6(0xa5)]['id']);const _0x411deb=(0x0,socket_1[_0x27c4e6(0xac)])();return _0x411deb['to']('company-'+_0xd1363a+_0x27c4e6(0xb9))[_0x27c4e6(0xc7)](_0x27c4e6(0xc5)+_0xd1363a+_0x27c4e6(0xc1),{'action':_0x27c4e6(0xb8),'userId':_0x5457a4}),_0x54b5c2[_0x27c4e6(0xbf)](0xc8)[_0x27c4e6(0xd8)]({'message':_0x27c4e6(0xd6)});};exports[a44_0x3973d1(0xd0)]=remove;function a44_0x4f5d(_0x276d5a,_0x165d28){const _0x5db37e=a44_0x4a36();return a44_0x4f5d=function(_0xf0351a,_0x1a65dd){_0xf0351a=_0xf0351a-0xa4;let _0x4a3603=_0x5db37e[_0xf0351a];return _0x4a3603;},a44_0x4f5d(_0x276d5a,_0x165d28);}const list=async(_0x37b25c,_0x354c5d)=>{const _0x35f471=a44_0x3973d1,{companyId:_0x47f438}=_0x37b25c[_0x35f471(0xc4)],{companyId:_0x43799d}=_0x37b25c[_0x35f471(0xa5)],_0x47e15d=await(0x0,SimpleListService_1[_0x35f471(0xd4)])({'companyId':_0x47f438?+_0x47f438:_0x43799d});return _0x354c5d[_0x35f471(0xbf)](0xc8)[_0x35f471(0xd8)](_0x47e15d);};exports[a44_0x3973d1(0xa7)]=list;