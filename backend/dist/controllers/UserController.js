const a43_0x5c5170=a43_0x5a16;(function(_0xc7922c,_0x57015b){const _0x16d78d=a43_0x5a16,_0x58de17=_0xc7922c();while(!![]){try{const _0x1a3d4e=parseInt(_0x16d78d(0x11b))/0x1*(-parseInt(_0x16d78d(0x127))/0x2)+parseInt(_0x16d78d(0x136))/0x3+-parseInt(_0x16d78d(0x118))/0x4*(parseInt(_0x16d78d(0x107))/0x5)+parseInt(_0x16d78d(0x12a))/0x6*(parseInt(_0x16d78d(0x10a))/0x7)+parseInt(_0x16d78d(0x12d))/0x8*(parseInt(_0x16d78d(0x138))/0x9)+parseInt(_0x16d78d(0x121))/0xa+parseInt(_0x16d78d(0x124))/0xb*(-parseInt(_0x16d78d(0x112))/0xc);if(_0x1a3d4e===_0x57015b)break;else _0x58de17['push'](_0x58de17['shift']());}catch(_0x435ee7){_0x58de17['push'](_0x58de17['shift']());}}}(a43_0x1670,0x7d66d));const a43_0xe5ed65=(function(){let _0x2e12fe=!![];return function(_0x42c58d,_0x20a610){const _0x23c888=_0x2e12fe?function(){if(_0x20a610){const _0x220da7=_0x20a610['apply'](_0x42c58d,arguments);return _0x20a610=null,_0x220da7;}}:function(){};return _0x2e12fe=![],_0x23c888;};}()),a43_0x1de0cf=a43_0xe5ed65(this,function(){const _0xdf4e3c=a43_0x5a16;return a43_0x1de0cf[_0xdf4e3c(0x10f)]()[_0xdf4e3c(0x11a)](_0xdf4e3c(0x139))['toString']()[_0xdf4e3c(0x108)](a43_0x1de0cf)[_0xdf4e3c(0x11a)](_0xdf4e3c(0x139));});a43_0x1de0cf();'use strict';function a43_0x1670(){const _0x540bca=['constructor','ERR_FORBIDDEN','32172lMkoHR','params','default','../models/User','index','toString','../errors/AppError','store','12nnZQfE','profile','emit','json','update','ERR_NO_PERMISSION','2869224ZGrjIe','../services/UserServices/SimpleListService','search','19wALbMl','user','findByPk','../services/UserServices/DeleteUserService','ERR_NO_SUPER','../services/UserServices/CreateUserService','2186320HQneSZ','getIO','admin','4222141qnzeAg','remove','__importDefault','10126tMbUaw','company-','status','84gRpWIN','../services/UserServices/UpdateUserService','__esModule','7610008WlITqU','../libs/socket','-user','defineProperty','show','create','../services/UserServices/ListUsersService','body','companyId','1430256gaQyRA','query','9RDGuha','(((.+)+)+)+$','5bAxfty'];a43_0x1670=function(){return _0x540bca;};return a43_0x1670();}var __importDefault=this&&this[a43_0x5c5170(0x126)]||function(_0x549c65){const _0x26ce50=a43_0x5c5170;return _0x549c65&&_0x549c65[_0x26ce50(0x12c)]?_0x549c65:{'default':_0x549c65};};Object[a43_0x5c5170(0x130)](exports,a43_0x5c5170(0x12c),{'value':!![]}),exports['list']=exports[a43_0x5c5170(0x125)]=exports['update']=exports[a43_0x5c5170(0x131)]=exports['store']=exports[a43_0x5c5170(0x10e)]=void 0x0;const socket_1=require(a43_0x5c5170(0x12e)),AppError_1=__importDefault(require(a43_0x5c5170(0x110))),CreateUserService_1=__importDefault(require(a43_0x5c5170(0x120))),ListUsersService_1=__importDefault(require(a43_0x5c5170(0x133))),UpdateUserService_1=__importDefault(require(a43_0x5c5170(0x12b))),ShowUserService_1=__importDefault(require('../services/UserServices/ShowUserService')),DeleteUserService_1=__importDefault(require(a43_0x5c5170(0x11e))),SimpleListService_1=__importDefault(require(a43_0x5c5170(0x119))),User_1=__importDefault(require(a43_0x5c5170(0x10d))),index=async(_0x125363,_0x508ce8)=>{const _0xc32e11=a43_0x5c5170,{searchParam:_0x2072a7,pageNumber:_0x2158fe}=_0x125363[_0xc32e11(0x137)],{companyId:_0x16c41a,profile:_0x550d37}=_0x125363['user'],{users:_0x46732b,onlineCount:_0x46416e,offlineCount:_0x5ac3f0,count:_0x3d65ea,hasMore:_0x4cec97}=await(0x0,ListUsersService_1['default'])({'searchParam':_0x2072a7,'pageNumber':_0x2158fe,'companyId':_0x16c41a,'profile':_0x550d37});return _0x508ce8[_0xc32e11(0x115)]({'users':_0x46732b,'onlineCount':_0x46416e,'offlineCount':_0x5ac3f0,'count':_0x3d65ea,'hasMore':_0x4cec97});};function a43_0x5a16(_0x5cfc16,_0x361921){const _0x4ae40e=a43_0x1670();return a43_0x5a16=function(_0x1de0cf,_0xe5ed65){_0x1de0cf=_0x1de0cf-0x107;let _0x1670a0=_0x4ae40e[_0x1de0cf];return _0x1670a0;},a43_0x5a16(_0x5cfc16,_0x361921);}exports['index']=index;const store=async(_0x1e897e,_0x171a4f)=>{const _0x33aa75=a43_0x5c5170,{email:_0x999f53,password:_0x480b5d,name:_0x161496,profile:_0x3e4752,companyId:_0x460db4,queueIds:_0x140ec8}=_0x1e897e[_0x33aa75(0x134)];let _0x8fffcb=null,_0x905c9e=null;if(_0x1e897e[_0x33aa75(0x11c)]!==undefined){const {companyId:_0x2cfddd}=_0x1e897e[_0x33aa75(0x11c)];_0x8fffcb=_0x2cfddd,_0x905c9e=await User_1[_0x33aa75(0x10c)][_0x33aa75(0x11d)](_0x1e897e[_0x33aa75(0x11c)]['id']);}const _0x4357de=_0x460db4||_0x8fffcb;if(_0x1e897e[_0x33aa75(0x11c)]?.[_0x33aa75(0x113)]!==_0x33aa75(0x123))throw new AppError_1['default'](_0x33aa75(0x117),0x193);else{if(_0x4357de!==_0x1e897e[_0x33aa75(0x11c)]?.[_0x33aa75(0x135)]&&!_0x905c9e?.['super'])throw new AppError_1['default'](_0x33aa75(0x11f),0x193);}const _0x3122b8=await(0x0,CreateUserService_1[_0x33aa75(0x10c)])({'email':_0x999f53,'password':_0x480b5d,'name':_0x161496,'profile':_0x3e4752,'companyId':_0x4357de,'queueIds':_0x140ec8}),_0x4c629b=(0x0,socket_1['getIO'])();return _0x4c629b[_0x33aa75(0x114)](_0x33aa75(0x128)+_0x8fffcb+_0x33aa75(0x12f),{'action':_0x33aa75(0x132),'user':_0x3122b8}),_0x171a4f[_0x33aa75(0x129)](0xc8)['json'](_0x3122b8);};exports[a43_0x5c5170(0x111)]=store;const show=async(_0x54b1a4,_0x254da1)=>{const _0xc11f91=a43_0x5c5170,{userId:_0x2f1e13}=_0x54b1a4[_0xc11f91(0x10b)],_0x55b777=await(0x0,ShowUserService_1[_0xc11f91(0x10c)])(_0x2f1e13,_0x54b1a4[_0xc11f91(0x11c)]['id']);return _0x254da1[_0xc11f91(0x129)](0xc8)['json'](_0x55b777);};exports['show']=show;const update=async(_0x199123,_0x384c8e)=>{const _0x357fd5=a43_0x5c5170,{id:_0x1c5959,companyId:_0x4fadb3}=_0x199123[_0x357fd5(0x11c)],{userId:_0x58833a}=_0x199123['params'],_0x168e00=_0x199123[_0x357fd5(0x134)],_0x108292=await(0x0,UpdateUserService_1['default'])({'userData':_0x168e00,'userId':_0x58833a,'requestUserId':+_0x1c5959}),_0x3972ca=(0x0,socket_1[_0x357fd5(0x122)])();return _0x3972ca[_0x357fd5(0x114)](_0x357fd5(0x128)+_0x4fadb3+'-user',{'action':'update','user':_0x108292}),_0x384c8e[_0x357fd5(0x129)](0xc8)[_0x357fd5(0x115)](_0x108292);};exports[a43_0x5c5170(0x116)]=update;const remove=async(_0xb35b77,_0x3deee3)=>{const _0x40bf87=a43_0x5c5170,{userId:_0x3bff95}=_0xb35b77['params'],{companyId:_0x471a58}=_0xb35b77[_0x40bf87(0x11c)];if(_0xb35b77['user'][_0x40bf87(0x113)]!=='admin')throw new AppError_1['default'](_0x40bf87(0x117),0x193);if(Number(_0x3bff95)===0x1)throw new AppError_1['default'](_0x40bf87(0x109),0x193);await(0x0,DeleteUserService_1['default'])(_0x3bff95,_0xb35b77[_0x40bf87(0x11c)]['id']);const _0xbe9c94=(0x0,socket_1[_0x40bf87(0x122)])();return _0xbe9c94['emit'](_0x40bf87(0x128)+_0x471a58+_0x40bf87(0x12f),{'action':'delete','userId':_0x3bff95}),_0x3deee3[_0x40bf87(0x129)](0xc8)[_0x40bf87(0x115)]({'message':'User\x20deleted'});};exports[a43_0x5c5170(0x125)]=remove;const list=async(_0x4cdfbf,_0x4b23bd)=>{const _0x75d12d=a43_0x5c5170,{companyId:_0x32a1e1}=_0x4cdfbf['query'],{companyId:_0x205390}=_0x4cdfbf[_0x75d12d(0x11c)],_0x296c1c=await(0x0,SimpleListService_1[_0x75d12d(0x10c)])({'companyId':_0x32a1e1?+_0x32a1e1:_0x205390});return _0x4b23bd[_0x75d12d(0x129)](0xc8)[_0x75d12d(0x115)](_0x296c1c);};exports['list']=list;