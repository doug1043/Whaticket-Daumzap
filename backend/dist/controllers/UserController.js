const a43_0x1c079a=a43_0x3c5b;(function(_0x190ec2,_0x246ef4){const _0x1cf677=a43_0x3c5b,_0x52567d=_0x190ec2();while(!![]){try{const _0x3ae5b2=parseInt(_0x1cf677(0xf3))/0x1*(-parseInt(_0x1cf677(0xeb))/0x2)+parseInt(_0x1cf677(0xe6))/0x3*(parseInt(_0x1cf677(0xfd))/0x4)+-parseInt(_0x1cf677(0xd9))/0x5+parseInt(_0x1cf677(0xd7))/0x6+parseInt(_0x1cf677(0xdd))/0x7+parseInt(_0x1cf677(0xd6))/0x8+-parseInt(_0x1cf677(0xdf))/0x9;if(_0x3ae5b2===_0x246ef4)break;else _0x52567d['push'](_0x52567d['shift']());}catch(_0x5b64b6){_0x52567d['push'](_0x52567d['shift']());}}}(a43_0x1af4,0xc1808));const a43_0x28a2c5=(function(){let _0x314ee1=!![];return function(_0x3ce3ca,_0x347fc1){const _0x178d97=_0x314ee1?function(){const _0xead069=a43_0x3c5b;if(_0x347fc1){const _0x27f41a=_0x347fc1[_0xead069(0xda)](_0x3ce3ca,arguments);return _0x347fc1=null,_0x27f41a;}}:function(){};return _0x314ee1=![],_0x178d97;};}()),a43_0x1edb8e=a43_0x28a2c5(this,function(){const _0x3ebbaa=a43_0x3c5b;return a43_0x1edb8e[_0x3ebbaa(0xe8)]()['search'](_0x3ebbaa(0xe2))['toString']()[_0x3ebbaa(0xd2)](a43_0x1edb8e)[_0x3ebbaa(0xee)]('(((.+)+)+)+$');});a43_0x1edb8e();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x450f41){return _0x450f41&&_0x450f41['__esModule']?_0x450f41:{'default':_0x450f41};};Object[a43_0x1c079a(0xf9)](exports,a43_0x1c079a(0xf2),{'value':!![]}),exports[a43_0x1c079a(0xef)]=exports[a43_0x1c079a(0xea)]=exports[a43_0x1c079a(0xe0)]=exports[a43_0x1c079a(0xf7)]=exports[a43_0x1c079a(0xec)]=exports[a43_0x1c079a(0xd5)]=exports[a43_0x1c079a(0x100)]=void 0x0;const socket_1=require(a43_0x1c079a(0xe9)),CheckSettings_1=__importDefault(require(a43_0x1c079a(0xcf))),AppError_1=__importDefault(require('../errors/AppError')),CreateUserService_1=__importDefault(require(a43_0x1c079a(0xe4))),ListUsersService_1=__importDefault(require(a43_0x1c079a(0xce))),UpdateUserService_1=__importDefault(require(a43_0x1c079a(0xcb))),ShowUserService_1=__importDefault(require(a43_0x1c079a(0xfb))),DeleteUserService_1=__importDefault(require(a43_0x1c079a(0xfa))),SimpleListService_1=__importDefault(require('../services/UserServices/SimpleListService')),index=async(_0x33b905,_0x52faa1)=>{const _0x179a0d=a43_0x1c079a,{searchParam:_0x2bb445,pageNumber:_0x223abb}=_0x33b905[_0x179a0d(0xcc)],{companyId:_0xcb1829,profile:_0x33cb88}=_0x33b905[_0x179a0d(0xf5)],{users:_0x3eb394,onlineCount:_0x1ae414,offlineCount:_0x566ca2,count:_0x17d2e9,hasMore:_0x1257c7}=await(0x0,ListUsersService_1['default'])({'searchParam':_0x2bb445,'pageNumber':_0x223abb,'companyId':_0xcb1829,'profile':_0x33cb88});return _0x52faa1[_0x179a0d(0xc9)]({'users':_0x3eb394,'onlineCount':_0x1ae414,'offlineCount':_0x566ca2,'count':_0x17d2e9,'hasMore':_0x1257c7});};exports[a43_0x1c079a(0x100)]=index;const store=async(_0x54590b,_0xe5e077)=>{const _0x359e50=a43_0x1c079a,{email:_0x12b358,password:_0x440981,name:_0x4ad981,profile:_0x268d23,isTricked:_0x5f443f,super:_0x318bb7,companyId:_0x346750,queueIds:_0x3889bb,allTicket:_0x10494e,whatsappId:_0x1539f6,startWork:_0x3ca819,endWork:_0x3056c5,profileState:_0x2a2c6a,defaultMenu:_0x1f9897}=_0x54590b[_0x359e50(0xd8)];let _0x4f1001=null;if(_0x54590b[_0x359e50(0xf5)]!==undefined){const {companyId:_0x47cce6}=_0x54590b[_0x359e50(0xf5)];_0x4f1001=_0x47cce6;}if(_0x54590b['body'][_0x359e50(0xdb)]&&_0x54590b[_0x359e50(0xf5)][_0x359e50(0xdb)]!==_0x54590b[_0x359e50(0xd8)][_0x359e50(0xdb)])throw new AppError_1['default'](_0x359e50(0xff));if(!_0x54590b[_0x359e50(0xf5)][_0x359e50(0xd4)]&&_0x318bb7)throw new AppError_1['default'](_0x359e50(0xe3));if(_0x54590b[_0x359e50(0xf4)]===_0x359e50(0xd1)&&await(0x0,CheckSettings_1['default'])(_0x359e50(0xdc))===_0x359e50(0xcd))throw new AppError_1[(_0x359e50(0xe1))](_0x359e50(0xf6),0x193);else{if(_0x54590b['url']!=='/signup'&&_0x54590b[_0x359e50(0xf5)][_0x359e50(0xc8)]!==_0x359e50(0xe5))throw new AppError_1['default']('ERR_NO_PERMISSION',0x193);}const _0x3a3279=await(0x0,CreateUserService_1[_0x359e50(0xe1)])({'email':_0x12b358,'password':_0x440981,'name':_0x4ad981,'profile':_0x268d23,'isTricked':_0x5f443f,'super':_0x318bb7,'companyId':_0x346750||_0x4f1001,'queueIds':_0x3889bb,'allTicket':_0x10494e,'whatsappId':_0x1539f6,'startWork':_0x3ca819,'endWork':_0x3056c5,'defaultMenu':_0x1f9897}),_0x175cb4=(0x0,socket_1[_0x359e50(0xe7)])();return _0x175cb4[_0x359e50(0xf1)]('company-'+_0x4f1001+_0x359e50(0xfc),{'action':_0x359e50(0xfe),'user':_0x3a3279}),_0xe5e077[_0x359e50(0xd0)](0xc8)[_0x359e50(0xc9)](_0x3a3279);};exports[a43_0x1c079a(0xd5)]=store;const storeFromCompanySettings=async(_0x320873,_0x3373da)=>{const _0x32ebeb=a43_0x1c079a,{email:_0x313779,password:_0x577825,name:_0x9aea6d,profile:_0x4e6bc4,isTricked:_0x3a7ab0,super:_0x5f4c84,companyId:_0x1f7fe8,queueIds:_0x9462fd,allTicket:_0x356c84,whatsappId:_0x518d92,startWork:_0x31558a,endWork:_0x81f9b9,profileState:_0x214580,defaultMenu:_0x3e697a}=_0x320873[_0x32ebeb(0xd8)];let _0xa03707=null;if(_0x320873[_0x32ebeb(0xf5)]!==undefined){const {companyId:_0x1f6378}=_0x320873[_0x32ebeb(0xf5)];_0xa03707=_0x1f6378;}if(_0x320873['body'][_0x32ebeb(0xdb)]&&_0x320873['user'][_0x32ebeb(0xdb)]!==_0x320873[_0x32ebeb(0xd8)]['companyId'])throw new AppError_1[(_0x32ebeb(0xe1))](_0x32ebeb(0xff));if(!_0x320873[_0x32ebeb(0xf5)][_0x32ebeb(0xd4)]&&_0x5f4c84)throw new AppError_1[(_0x32ebeb(0xe1))](_0x32ebeb(0xe3));if(_0x320873['url']===_0x32ebeb(0xd1)&&await(0x0,CheckSettings_1['default'])(_0x32ebeb(0xdc))==='disabled')throw new AppError_1['default'](_0x32ebeb(0xf6),0x193);else{if(_0x320873[_0x32ebeb(0xf4)]!==_0x32ebeb(0xd1)&&_0x320873[_0x32ebeb(0xf5)][_0x32ebeb(0xc8)]!==_0x32ebeb(0xe5))throw new AppError_1[(_0x32ebeb(0xe1))]('ERR_NO_PERMISSION',0x193);}const _0x35f8d5=await(0x0,CreateUserService_1['default'])({'email':_0x313779,'password':_0x577825,'name':_0x9aea6d,'profile':_0x4e6bc4,'isTricked':_0x3a7ab0,'super':_0x5f4c84,'companyId':_0x1f7fe8||_0xa03707,'queueIds':_0x9462fd,'allTicket':_0x356c84,'whatsappId':_0x518d92,'startWork':_0x31558a,'endWork':_0x81f9b9,'defaultMenu':_0x3e697a}),_0x3dc31d=(0x0,socket_1['getIO'])();return _0x3dc31d['to'](_0x32ebeb(0xf8)+_0xa03707+'-mainchannel')[_0x32ebeb(0xf1)]('company-'+_0xa03707+_0x32ebeb(0xfc),{'action':_0x32ebeb(0xfe),'user':_0x35f8d5}),_0x3373da[_0x32ebeb(0xd0)](0xc8)[_0x32ebeb(0xc9)](_0x35f8d5);};exports[a43_0x1c079a(0xec)]=storeFromCompanySettings;const show=async(_0x299ff4,_0x5a9f5c)=>{const _0x21a30a=a43_0x1c079a,{userId:_0x14afa0}=_0x299ff4[_0x21a30a(0xd3)],_0x3b12d6=await(0x0,ShowUserService_1[_0x21a30a(0xe1)])(_0x14afa0,_0x299ff4[_0x21a30a(0xf5)]['id']);return _0x5a9f5c[_0x21a30a(0xd0)](0xc8)[_0x21a30a(0xc9)](_0x3b12d6);};exports[a43_0x1c079a(0xf7)]=show;const update=async(_0x4d6a85,_0x35e176)=>{const _0x6b2471=a43_0x1c079a,{id:_0x5a5c25,companyId:_0x112c7c}=_0x4d6a85[_0x6b2471(0xf5)],{userId:_0x2b650a}=_0x4d6a85[_0x6b2471(0xd3)],_0x3338b6=_0x4d6a85[_0x6b2471(0xd8)],_0x55b486=await(0x0,UpdateUserService_1[_0x6b2471(0xe1)])({'userData':_0x3338b6,'userId':_0x2b650a,'requestUserId':+_0x5a5c25}),_0x23d1ad=(0x0,socket_1['getIO'])();return _0x23d1ad['to'](_0x6b2471(0xf8)+_0x112c7c+_0x6b2471(0xde))['emit'](_0x6b2471(0xf8)+_0x112c7c+_0x6b2471(0xfc),{'action':'update','user':_0x55b486}),_0x35e176[_0x6b2471(0xd0)](0xc8)['json'](_0x55b486);};exports['update']=update;const remove=async(_0x1cc3e1,_0x28357e)=>{const _0x52535a=a43_0x1c079a,{userId:_0x5c752a}=_0x1cc3e1['params'],{companyId:_0x38044e}=_0x1cc3e1['user'];if(_0x1cc3e1[_0x52535a(0xf5)][_0x52535a(0xc8)]!=='admin')throw new AppError_1[(_0x52535a(0xe1))](_0x52535a(0xf0),0x193);await(0x0,DeleteUserService_1[_0x52535a(0xe1)])(_0x5c752a,_0x1cc3e1[_0x52535a(0xf5)]['id']);const _0x2794b4=(0x0,socket_1['getIO'])();return _0x2794b4['to'](_0x52535a(0xf8)+_0x38044e+_0x52535a(0xde))[_0x52535a(0xf1)](_0x52535a(0xf8)+_0x38044e+_0x52535a(0xfc),{'action':_0x52535a(0xed),'userId':_0x5c752a}),_0x28357e[_0x52535a(0xd0)](0xc8)[_0x52535a(0xc9)]({'message':_0x52535a(0xca)});};exports[a43_0x1c079a(0xea)]=remove;function a43_0x3c5b(_0x582286,_0x3f5690){const _0x470643=a43_0x1af4();return a43_0x3c5b=function(_0x1edb8e,_0x28a2c5){_0x1edb8e=_0x1edb8e-0xc8;let _0x1af411=_0x470643[_0x1edb8e];return _0x1af411;},a43_0x3c5b(_0x582286,_0x3f5690);}const list=async(_0x203e95,_0x5ef351)=>{const _0x3987db=a43_0x1c079a,{companyId:_0x2bd8df}=_0x203e95[_0x3987db(0xcc)],{companyId:_0x5851a8}=_0x203e95[_0x3987db(0xf5)],_0x2c4483=await(0x0,SimpleListService_1['default'])({'companyId':_0x2bd8df?+_0x2bd8df:_0x5851a8});return _0x5ef351[_0x3987db(0xd0)](0xc8)[_0x3987db(0xc9)](_0x2c4483);};exports['list']=list;function a43_0x1af4(){const _0x2219d6=['profile','json','User\x20deleted','../services/UserServices/UpdateUserService','query','disabled','../services/UserServices/ListUsersService','../helpers/CheckSettings','status','/signup','constructor','params','isSuper','store','2678088OytRGN','8328012FCPYfS','body','3696710dSBqDo','apply','companyId','userCreation','3057999mIKlrE','-mainchannel','5061186Xdoqwa','update','default','(((.+)+)+)+$','Acesso\x20negado.','../services/UserServices/CreateUserService','admin','48201IGQqfD','getIO','toString','../libs/socket','remove','6GDLNxa','storeFromCompanySettings','delete','search','list','ERR_NO_PERMISSION','emit','__esModule','118182yiFDQw','url','user','ERR_USER_CREATION_DISABLED','show','company-','defineProperty','../services/UserServices/DeleteUserService','../services/UserServices/ShowUserService','-user','72VGxHTB','create','O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa','index'];a43_0x1af4=function(){return _0x2219d6;};return a43_0x1af4();}