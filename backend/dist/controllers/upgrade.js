const a43_0x430c3a=a43_0x3129;(function(_0x4d46b6,_0x232f1c){const _0x2d5804=a43_0x3129,_0x5c126d=_0x4d46b6();while(!![]){try{const _0xac6dc8=-parseInt(_0x2d5804(0x161))/0x1*(-parseInt(_0x2d5804(0x13d))/0x2)+-parseInt(_0x2d5804(0x140))/0x3*(-parseInt(_0x2d5804(0x14d))/0x4)+parseInt(_0x2d5804(0x13b))/0x5+-parseInt(_0x2d5804(0x15b))/0x6+parseInt(_0x2d5804(0x147))/0x7+parseInt(_0x2d5804(0x14c))/0x8+-parseInt(_0x2d5804(0x150))/0x9*(parseInt(_0x2d5804(0x146))/0xa);if(_0xac6dc8===_0x232f1c)break;else _0x5c126d['push'](_0x5c126d['shift']());}catch(_0x1308ef){_0x5c126d['push'](_0x5c126d['shift']());}}}(a43_0x3450,0x457a6));const a43_0x3734cf=(function(){let _0x603841=!![];return function(_0x1d7cd0,_0x1cf640){const _0xa0b8f4=_0x603841?function(){const _0x5f2380=a43_0x3129;if(_0x1cf640){const _0x3a31a2=_0x1cf640[_0x5f2380(0x157)](_0x1d7cd0,arguments);return _0x1cf640=null,_0x3a31a2;}}:function(){};return _0x603841=![],_0xa0b8f4;};}()),a43_0x26c7f8=a43_0x3734cf(this,function(){const _0x319285=a43_0x3129;return a43_0x26c7f8[_0x319285(0x145)]()['search'](_0x319285(0x132))['toString']()[_0x319285(0x152)](a43_0x26c7f8)[_0x319285(0x162)](_0x319285(0x132));});a43_0x26c7f8();'use strict';var __importDefault=this&&this[a43_0x430c3a(0x164)]||function(_0x75cc9d){const _0x188a59=a43_0x430c3a;return _0x75cc9d&&_0x75cc9d[_0x188a59(0x148)]?_0x75cc9d:{'default':_0x75cc9d};};Object[a43_0x430c3a(0x13f)](exports,a43_0x430c3a(0x148),{'value':!![]}),exports[a43_0x430c3a(0x138)]=exports['checkUpgrade']=void 0x0;function a43_0x3450(){const _0x260760=['unknown','child_process','message','518272dogsBD','184KkThes','checkUpgrade','Ubuntu','8206929vjNoBf','stdout:\x20','constructor','exec','utf-8','ubuntu','./upgrade_backend.sh','apply','linux','Iniciando\x20verificação\x20de\x20atualizações\x20no\x20GitHub','axios','1359168ElzYpj','https://api.github.com/repos/doug1043/Whaticket-Daumzap/releases/latest','Script\x20executado\x20com\x20sucesso','platform','includes','json','13RWeqnw','search','docker','__importDefault','Ambiente\x20desconhecido.\x20Não\x20foi\x20possível\x20determinar\x20o\x20sistema\x20operacional.','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub','error','(((.+)+)+)+$','readFileSync','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:','Erro\x20ao\x20fazer\x20atualização:','Erro\x20ao\x20executar\x20o\x20script:\x20','Erro\x20de\x20atualização','upgradeBackend','status','data','1983345pVwgHm','Erro\x20ao\x20executar\x20o\x20script','34302NwlYrl','default','defineProperty','21273wQLcLv','log','statusText','/etc/os-release','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:\x20','toString','10UvIVjO','2886723WokljA','__esModule'];a43_0x3450=function(){return _0x260760;};return a43_0x3450();}function a43_0x3129(_0x2c6614,_0x3b70a4){const _0x5c73e5=a43_0x3450();return a43_0x3129=function(_0x26c7f8,_0x3734cf){_0x26c7f8=_0x26c7f8-0x12f;let _0x34508c=_0x5c73e5[_0x26c7f8];return _0x34508c;},a43_0x3129(_0x2c6614,_0x3b70a4);}const axios_1=__importDefault(require(a43_0x430c3a(0x15a))),child_process_1=require(a43_0x430c3a(0x14a)),os_1=__importDefault(require('os')),fs_1=require('fs'),githubApiUrl=a43_0x430c3a(0x15c),detectEnvironment=()=>{const _0x4c1a07=a43_0x430c3a,_0x196d44=os_1[_0x4c1a07(0x13e)][_0x4c1a07(0x15e)]();if(_0x196d44===_0x4c1a07(0x158)){const _0x4c59d2=(0x0,fs_1[_0x4c1a07(0x133)])(_0x4c1a07(0x143),_0x4c1a07(0x154));if(_0x4c59d2[_0x4c1a07(0x15f)]('Alpine'))return _0x4c1a07(0x163);else{if(_0x4c59d2[_0x4c1a07(0x15f)](_0x4c1a07(0x14f)))return _0x4c1a07(0x155);}}return _0x4c1a07(0x149);},checkUpgrade=async(_0x1716f8,_0x28a701)=>{const _0x122ddf=a43_0x430c3a;try{console[_0x122ddf(0x141)](_0x122ddf(0x159));const _0x1e19ee=await axios_1[_0x122ddf(0x13e)]['get'](githubApiUrl);if(_0x1e19ee[_0x122ddf(0x139)]===0xc8){const {tag_name:_0x5dd9bf,name:_0x449e97,html_url:_0x3cf8ce,body:_0x2054b4}=_0x1e19ee[_0x122ddf(0x13a)];_0x28a701['status'](0xc8)[_0x122ddf(0x160)]({'tag':_0x5dd9bf,'name':_0x449e97,'url':_0x3cf8ce,'changelog':_0x2054b4});}else _0x28a701[_0x122ddf(0x139)](_0x1e19ee['status'])['json']({'error':_0x122ddf(0x144)+_0x1e19ee[_0x122ddf(0x142)]});}catch(_0x517aa4){console['error'](_0x122ddf(0x134),_0x517aa4[_0x122ddf(0x14b)]),_0x28a701[_0x122ddf(0x139)](0x1f4)[_0x122ddf(0x160)]({'error':_0x122ddf(0x130)});}};exports[a43_0x430c3a(0x14e)]=checkUpgrade;const upgradeBackend=async(_0x5c8fe3,_0x5bb87a)=>{const _0x4d4cc5=a43_0x430c3a;try{const _0xe1a2da=detectEnvironment();let _0x1e5a21='';switch(_0xe1a2da){case _0x4d4cc5(0x163):_0x1e5a21='sh\x20upgrade_backend.sh';break;case _0x4d4cc5(0x155):_0x1e5a21=_0x4d4cc5(0x156);break;default:throw new Error(_0x4d4cc5(0x12f));}(0x0,child_process_1[_0x4d4cc5(0x153)])(_0x1e5a21,(_0x386dc0,_0x1d900f,_0x5fa65c)=>{const _0xaa9864=_0x4d4cc5;if(_0x386dc0)return console[_0xaa9864(0x131)](_0xaa9864(0x136)+_0x386dc0['message']),_0x5bb87a[_0xaa9864(0x139)](0x1f4)[_0xaa9864(0x160)]({'message':_0xaa9864(0x13c)});return _0x5fa65c&&console[_0xaa9864(0x131)]('stderr:\x20'+_0x5fa65c),console[_0xaa9864(0x141)](_0xaa9864(0x151)+_0x1d900f),_0x5bb87a[_0xaa9864(0x139)](0xc8)['json']({'message':_0xaa9864(0x15d)});});}catch(_0x483586){console[_0x4d4cc5(0x131)](_0x4d4cc5(0x135),_0x483586[_0x4d4cc5(0x14b)]),_0x5bb87a[_0x4d4cc5(0x139)](0x1f4)[_0x4d4cc5(0x160)]({'error':_0x4d4cc5(0x137)});}};exports[a43_0x430c3a(0x138)]=upgradeBackend;