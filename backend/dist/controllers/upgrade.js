const a43_0x1f0f34=a43_0x88a7;(function(_0x19554c,_0x2094c7){const _0x5567e5=a43_0x88a7,_0x2545bc=_0x19554c();while(!![]){try{const _0x2394b6=-parseInt(_0x5567e5(0x13a))/0x1*(-parseInt(_0x5567e5(0x13e))/0x2)+-parseInt(_0x5567e5(0x165))/0x3*(-parseInt(_0x5567e5(0x14c))/0x4)+parseInt(_0x5567e5(0x167))/0x5*(parseInt(_0x5567e5(0x14e))/0x6)+-parseInt(_0x5567e5(0x153))/0x7*(-parseInt(_0x5567e5(0x149))/0x8)+-parseInt(_0x5567e5(0x15b))/0x9+-parseInt(_0x5567e5(0x14f))/0xa*(parseInt(_0x5567e5(0x15a))/0xb)+-parseInt(_0x5567e5(0x142))/0xc;if(_0x2394b6===_0x2094c7)break;else _0x2545bc['push'](_0x2545bc['shift']());}catch(_0x853c9f){_0x2545bc['push'](_0x2545bc['shift']());}}}(a43_0x2c3a,0xa6b76));function a43_0x88a7(_0x22a3d9,_0x45bdda){const _0x58e111=a43_0x2c3a();return a43_0x88a7=function(_0x1c83b2,_0x254733){_0x1c83b2=_0x1c83b2-0x132;let _0x2c3a29=_0x58e111[_0x1c83b2];return _0x2c3a29;},a43_0x88a7(_0x22a3d9,_0x45bdda);}const a43_0x254733=(function(){let _0x5ced1b=!![];return function(_0x288e71,_0x2e38ab){const _0x3630d9=_0x5ced1b?function(){const _0x49b9e2=a43_0x88a7;if(_0x2e38ab){const _0x270409=_0x2e38ab[_0x49b9e2(0x162)](_0x288e71,arguments);return _0x2e38ab=null,_0x270409;}}:function(){};return _0x5ced1b=![],_0x3630d9;};}()),a43_0x1c83b2=a43_0x254733(this,function(){const _0x105561=a43_0x88a7;return a43_0x1c83b2[_0x105561(0x163)]()[_0x105561(0x138)]('(((.+)+)+)+$')['toString']()[_0x105561(0x158)](a43_0x1c83b2)['search'](_0x105561(0x14d));});function a43_0x2c3a(){const _0x2f4af0=['./upgrade_backend.sh','1673265tAQDut','11062665GsERpS','default','/etc/os-release','__importDefault','linux','Erro\x20de\x20atualização','child_process','apply','toString','get','4020477WezLNA','Ambiente\x20desconhecido.\x20Não\x20foi\x20possível\x20determinar\x20o\x20sistema\x20operacional.','7695MWeEIC','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:','includes','warn','https://api.github.com/repos/doug1043/Whaticket-Daumzap/releases/latest','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:\x20','utf-8','search','ubuntu','36137imcaos','json','Saída\x20do\x20script:\x0a','axios','38GwdVGR','platform','message','__esModule','9516768CAtZGV','docker','error','Erro\x20ao\x20executar\x20o\x20script','Erro\x20ao\x20executar\x20o\x20script:\x20','log','Erro\x20ao\x20fazer\x20atualização:','408SHCgdH','status','upgradeBackend','4yEwGMY','(((.+)+)+)+$','1794IwoSVX','10kMTbyF','exec','sh\x20upgrade_backend.sh','trim','50827BacyWK','Ubuntu','checkUpgrade','data','defineProperty','constructor'];a43_0x2c3a=function(){return _0x2f4af0;};return a43_0x2c3a();}a43_0x1c83b2();'use strict';var __importDefault=this&&this[a43_0x1f0f34(0x15e)]||function(_0x156060){const _0x564d8d=a43_0x1f0f34;return _0x156060&&_0x156060[_0x564d8d(0x141)]?_0x156060:{'default':_0x156060};};Object[a43_0x1f0f34(0x157)](exports,a43_0x1f0f34(0x141),{'value':!![]}),exports[a43_0x1f0f34(0x14b)]=exports[a43_0x1f0f34(0x155)]=void 0x0;const axios_1=__importDefault(require(a43_0x1f0f34(0x13d))),child_process_1=require(a43_0x1f0f34(0x161)),os_1=__importDefault(require('os')),fs_1=require('fs'),githubApiUrl=a43_0x1f0f34(0x135),detectEnvironment=()=>{const _0x4279e2=a43_0x1f0f34,_0x37d7f5=os_1[_0x4279e2(0x15c)][_0x4279e2(0x13f)]();if(_0x37d7f5===_0x4279e2(0x15f)){const _0x43ab41=(0x0,fs_1['readFileSync'])(_0x4279e2(0x15d),_0x4279e2(0x137));if(_0x43ab41[_0x4279e2(0x133)]('Alpine'))return _0x4279e2(0x143);else{if(_0x43ab41['includes'](_0x4279e2(0x154)))return _0x4279e2(0x139);}}return'unknown';},checkUpgrade=async(_0x3bf5e8,_0x20877f)=>{const _0x268c44=a43_0x1f0f34;try{console['log']('Iniciando\x20verificação\x20de\x20atualizações\x20no\x20GitHub');const _0x594c34=await axios_1[_0x268c44(0x15c)][_0x268c44(0x164)](githubApiUrl);if(_0x594c34[_0x268c44(0x14a)]===0xc8){const {tag_name:_0x3e279a,name:_0x2819b1,html_url:_0x3a2259,body:_0x247b50}=_0x594c34[_0x268c44(0x156)];_0x20877f[_0x268c44(0x14a)](0xc8)[_0x268c44(0x13b)]({'tag':_0x3e279a,'name':_0x2819b1,'url':_0x3a2259,'changelog':_0x247b50});}else _0x20877f[_0x268c44(0x14a)](_0x594c34[_0x268c44(0x14a)])[_0x268c44(0x13b)]({'error':_0x268c44(0x136)+_0x594c34['statusText']});}catch(_0x59ab51){console[_0x268c44(0x144)](_0x268c44(0x132),_0x59ab51[_0x268c44(0x140)]),_0x20877f['status'](0x1f4)[_0x268c44(0x13b)]({'error':'Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub'});}};exports[a43_0x1f0f34(0x155)]=checkUpgrade;const upgradeBackend=async(_0x419ea8,_0x26d1a6)=>{const _0x3fc89c=a43_0x1f0f34;try{const _0x4a65f7=detectEnvironment();let _0x2c987e='';switch(_0x4a65f7){case'docker':_0x2c987e=_0x3fc89c(0x151);break;case _0x3fc89c(0x139):_0x2c987e=_0x3fc89c(0x159);break;default:throw new Error(_0x3fc89c(0x166));}(0x0,child_process_1[_0x3fc89c(0x150)])(_0x2c987e,(_0x148754,_0x5e9559,_0x153387)=>{const _0x9ae56c=_0x3fc89c;if(_0x148754)return console[_0x9ae56c(0x144)](_0x9ae56c(0x146)+_0x148754[_0x9ae56c(0x140)]),_0x26d1a6[_0x9ae56c(0x14a)](0x1f4)['json']({'message':_0x9ae56c(0x145),'error':_0x148754['message']});return _0x153387&&console[_0x9ae56c(0x134)]('Avisos\x20durante\x20a\x20execução\x20do\x20script:\x20'+_0x153387),console[_0x9ae56c(0x147)](_0x9ae56c(0x13c)+_0x5e9559),_0x26d1a6[_0x9ae56c(0x14a)](0xc8)[_0x9ae56c(0x13b)]({'message':'Script\x20executado\x20com\x20sucesso','output':_0x5e9559,'warnings':_0x153387?_0x153387[_0x9ae56c(0x152)]():undefined});});}catch(_0x575486){return console[_0x3fc89c(0x144)](_0x3fc89c(0x148),_0x575486[_0x3fc89c(0x140)]),_0x26d1a6[_0x3fc89c(0x14a)](0x1f4)['json']({'error':_0x3fc89c(0x160),'details':_0x575486[_0x3fc89c(0x140)]});}};exports['upgradeBackend']=upgradeBackend;