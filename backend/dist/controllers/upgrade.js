const a43_0x1cfe15=a43_0x26da;function a43_0x51c9(){const _0x4cef6b=['Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:\x20','apply','defineProperty','Erro\x20ao\x20executar\x20o\x20script:\x20','1175083CcvMzc','2013603MgUKTj','default','./upgrade_backend.sh','includes','8RkhhOb','(((.+)+)+)+$','json','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:','warn','2961655dKMgEb','readFileSync','utf-8','status','Alpine','checkUpgrade','7974351npToia','Ambiente\x20desconhecido.\x20Não\x20foi\x20possível\x20determinar\x20o\x20sistema\x20operacional.','linux','3505336QfvhsV','https://api.github.com/repos/doug1043/Whaticket-Daumzap/releases/latest','Erro\x20ao\x20fazer\x20atualização:','Script\x20executado\x20com\x20sucesso','message','log','Avisos\x20durante\x20a\x20execução\x20do\x20script:\x20','unknown','6ZpqLfJ','2601319fegRCn','search','docker','6915790gaRfOl','error','Saída\x20do\x20script:\x0a','toString','2WfALsO','Iniciando\x20verificação\x20de\x20atualizações\x20no\x20GitHub','/etc/os-release','ubuntu','upgradeBackend','Erro\x20ao\x20executar\x20o\x20script','__esModule','exec','child_process','platform'];a43_0x51c9=function(){return _0x4cef6b;};return a43_0x51c9();}(function(_0x5a0c76,_0x182be8){const _0x5ab7a6=a43_0x26da,_0x241a88=_0x5a0c76();while(!![]){try{const _0x64850f=parseInt(_0x5ab7a6(0x1f1))/0x1+parseInt(_0x5ab7a6(0x1e3))/0x2*(-parseInt(_0x5ab7a6(0x1f2))/0x3)+-parseInt(_0x5ab7a6(0x204))/0x4+-parseInt(_0x5ab7a6(0x1fb))/0x5*(-parseInt(_0x5ab7a6(0x1db))/0x6)+-parseInt(_0x5ab7a6(0x1dc))/0x7*(-parseInt(_0x5ab7a6(0x1f6))/0x8)+parseInt(_0x5ab7a6(0x201))/0x9+-parseInt(_0x5ab7a6(0x1df))/0xa;if(_0x64850f===_0x182be8)break;else _0x241a88['push'](_0x241a88['shift']());}catch(_0x158e19){_0x241a88['push'](_0x241a88['shift']());}}}(a43_0x51c9,0xbfe24));const a43_0x2405bc=(function(){let _0x30dead=!![];return function(_0x33b0ca,_0x404b31){const _0x3779db=_0x30dead?function(){const _0x55305f=a43_0x26da;if(_0x404b31){const _0x3ae4a7=_0x404b31[_0x55305f(0x1ee)](_0x33b0ca,arguments);return _0x404b31=null,_0x3ae4a7;}}:function(){};return _0x30dead=![],_0x3779db;};}()),a43_0x3b8412=a43_0x2405bc(this,function(){const _0x34f4a6=a43_0x26da;return a43_0x3b8412[_0x34f4a6(0x1e2)]()[_0x34f4a6(0x1dd)](_0x34f4a6(0x1f7))[_0x34f4a6(0x1e2)]()['constructor'](a43_0x3b8412)[_0x34f4a6(0x1dd)](_0x34f4a6(0x1f7));});a43_0x3b8412();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x5a780b){return _0x5a780b&&_0x5a780b['__esModule']?_0x5a780b:{'default':_0x5a780b};};Object[a43_0x1cfe15(0x1ef)](exports,a43_0x1cfe15(0x1e9),{'value':!![]}),exports[a43_0x1cfe15(0x1e7)]=exports[a43_0x1cfe15(0x200)]=void 0x0;function a43_0x26da(_0x256748,_0x6c88db){const _0x24e254=a43_0x51c9();return a43_0x26da=function(_0x3b8412,_0x2405bc){_0x3b8412=_0x3b8412-0x1d6;let _0x51c977=_0x24e254[_0x3b8412];return _0x51c977;},a43_0x26da(_0x256748,_0x6c88db);}const axios_1=__importDefault(require('axios')),child_process_1=require(a43_0x1cfe15(0x1eb)),os_1=__importDefault(require('os')),fs_1=require('fs'),githubApiUrl=a43_0x1cfe15(0x205),detectEnvironment=()=>{const _0x3a4d8c=a43_0x1cfe15,_0x34a7ba=os_1[_0x3a4d8c(0x1f3)][_0x3a4d8c(0x1ec)]();if(_0x34a7ba===_0x3a4d8c(0x203)){const _0x286930=(0x0,fs_1[_0x3a4d8c(0x1fc)])(_0x3a4d8c(0x1e5),_0x3a4d8c(0x1fd));if(_0x286930['includes'](_0x3a4d8c(0x1ff)))return _0x3a4d8c(0x1de);else{if(_0x286930[_0x3a4d8c(0x1f5)]('Ubuntu'))return _0x3a4d8c(0x1e6);}}return _0x3a4d8c(0x1da);},checkUpgrade=async(_0x2826a7,_0x335dc5)=>{const _0x35d4a5=a43_0x1cfe15;try{console['log'](_0x35d4a5(0x1e4));const _0x473388=await axios_1[_0x35d4a5(0x1f3)]['get'](githubApiUrl);if(_0x473388[_0x35d4a5(0x1fe)]===0xc8){const {tag_name:_0x380852,name:_0x565407,html_url:_0x312420,body:_0x50aa43}=_0x473388['data'];_0x335dc5[_0x35d4a5(0x1fe)](0xc8)[_0x35d4a5(0x1f8)]({'tag':_0x380852,'name':_0x565407,'url':_0x312420,'changelog':_0x50aa43});}else _0x335dc5[_0x35d4a5(0x1fe)](_0x473388['status'])[_0x35d4a5(0x1f8)]({'error':_0x35d4a5(0x1ed)+_0x473388['statusText']});}catch(_0x513981){console[_0x35d4a5(0x1e0)](_0x35d4a5(0x1f9),_0x513981[_0x35d4a5(0x1d7)]),_0x335dc5[_0x35d4a5(0x1fe)](0x1f4)['json']({'error':'Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub'});}};exports[a43_0x1cfe15(0x200)]=checkUpgrade;const upgradeBackend=async(_0x270a42,_0x1f7a83)=>{const _0x1b439f=a43_0x1cfe15;try{const _0x391384=detectEnvironment();let _0x33e71b='';switch(_0x391384){case'docker':_0x33e71b='sh\x20upgrade_backend.sh';break;case _0x1b439f(0x1e6):_0x33e71b=_0x1b439f(0x1f4);break;default:throw new Error(_0x1b439f(0x202));}(0x0,child_process_1[_0x1b439f(0x1ea)])(_0x33e71b,(_0x4da965,_0x537e31,_0x29498f)=>{const _0xe8e916=_0x1b439f;if(_0x4da965)return console[_0xe8e916(0x1e0)](_0xe8e916(0x1f0)+_0x4da965['message']),_0x1f7a83[_0xe8e916(0x1fe)](0x1f4)['json']({'message':_0xe8e916(0x1e8),'error':_0x4da965['message']});return _0x29498f&&console[_0xe8e916(0x1fa)](_0xe8e916(0x1d9)+_0x29498f),console[_0xe8e916(0x1d8)](_0xe8e916(0x1e1)+_0x537e31),_0x1f7a83[_0xe8e916(0x1fe)](0xc8)[_0xe8e916(0x1f8)]({'message':_0xe8e916(0x1d6),'output':_0x537e31,'warnings':_0x29498f?_0x29498f['trim']():undefined});});}catch(_0xc8aa26){return console[_0x1b439f(0x1e0)](_0x1b439f(0x206),_0xc8aa26[_0x1b439f(0x1d7)]),_0x1f7a83['status'](0x1f4)[_0x1b439f(0x1f8)]({'error':'Erro\x20de\x20atualização','details':_0xc8aa26[_0x1b439f(0x1d7)]});}};exports[a43_0x1cfe15(0x1e7)]=upgradeBackend;