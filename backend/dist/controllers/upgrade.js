const a43_0x2a1a08=a43_0x319d;(function(_0x159164,_0x4fc303){const _0x1ef9f2=a43_0x319d,_0x71cd0c=_0x159164();while(!![]){try{const _0x89d70f=parseInt(_0x1ef9f2(0xe7))/0x1*(parseInt(_0x1ef9f2(0xdb))/0x2)+parseInt(_0x1ef9f2(0xdf))/0x3*(parseInt(_0x1ef9f2(0xeb))/0x4)+-parseInt(_0x1ef9f2(0xef))/0x5+-parseInt(_0x1ef9f2(0xd7))/0x6+parseInt(_0x1ef9f2(0xed))/0x7*(-parseInt(_0x1ef9f2(0xda))/0x8)+parseInt(_0x1ef9f2(0xe6))/0x9+parseInt(_0x1ef9f2(0xc5))/0xa*(parseInt(_0x1ef9f2(0xd0))/0xb);if(_0x89d70f===_0x4fc303)break;else _0x71cd0c['push'](_0x71cd0c['shift']());}catch(_0x316927){_0x71cd0c['push'](_0x71cd0c['shift']());}}}(a43_0x4d9a,0xda6f7));const a43_0x1b1421=(function(){let _0x2445e6=!![];return function(_0xa38e4d,_0x2518cb){const _0x4fdd4c=_0x2445e6?function(){const _0x58648b=a43_0x319d;if(_0x2518cb){const _0xb12fa7=_0x2518cb[_0x58648b(0xde)](_0xa38e4d,arguments);return _0x2518cb=null,_0xb12fa7;}}:function(){};return _0x2445e6=![],_0x4fdd4c;};}()),a43_0x3da6b5=a43_0x1b1421(this,function(){const _0x325b1e=a43_0x319d;return a43_0x3da6b5[_0x325b1e(0xf8)]()[_0x325b1e(0xf2)](_0x325b1e(0xe1))['toString']()[_0x325b1e(0xf0)](a43_0x3da6b5)['search'](_0x325b1e(0xe1));});a43_0x3da6b5();'use strict';function a43_0x4d9a(){const _0x156734=['includes','262270lRnNjZ','docker','upgradeBackend','Alpine','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub','ubuntu','checkUpgrade','exec','linux','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:\x20','__esModule','1045EGUHef','Ambiente\x20desconhecido.\x20Não\x20foi\x20possível\x20determinar\x20o\x20sistema\x20operacional.','./upgrade_backend.sh','unknown','error','Saída\x20do\x20script:\x0a','readFileSync','7609350ziaFhT','Ubuntu','child_process','8DPZSXL','17558VcJPDT','Erro\x20ao\x20executar\x20o\x20script','__importDefault','apply','19842dMnsKH','utf-8','(((.+)+)+)+$','warn','data','axios','https://api.github.com/repos/doug1043/Whaticket-Daumzap/releases/latest','13740678JMifYo','5wjdwbg','Iniciando\x20verificação\x20de\x20atualizações\x20no\x20GitHub','status','sh\x20upgrade_backend.sh','28SEUuYV','message','3859415ghpAfB','trim','6971095iKZdNS','constructor','json','search','Erro\x20ao\x20fazer\x20atualização:','Erro\x20ao\x20executar\x20o\x20script:\x20','Avisos\x20durante\x20a\x20execução\x20do\x20script:\x20','default','get','toString','log'];a43_0x4d9a=function(){return _0x156734;};return a43_0x4d9a();}function a43_0x319d(_0x3cc638,_0x5890a6){const _0x184bce=a43_0x4d9a();return a43_0x319d=function(_0x3da6b5,_0x1b1421){_0x3da6b5=_0x3da6b5-0xc3;let _0x4d9ad4=_0x184bce[_0x3da6b5];return _0x4d9ad4;},a43_0x319d(_0x3cc638,_0x5890a6);}var __importDefault=this&&this[a43_0x2a1a08(0xdd)]||function(_0x54b003){const _0x19ebbe=a43_0x2a1a08;return _0x54b003&&_0x54b003[_0x19ebbe(0xcf)]?_0x54b003:{'default':_0x54b003};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['upgradeBackend']=exports[a43_0x2a1a08(0xcb)]=void 0x0;const axios_1=__importDefault(require(a43_0x2a1a08(0xe4))),child_process_1=require(a43_0x2a1a08(0xd9)),os_1=__importDefault(require('os')),fs_1=require('fs'),githubApiUrl=a43_0x2a1a08(0xe5),detectEnvironment=()=>{const _0x3e4d2f=a43_0x2a1a08,_0x12e6eb=os_1[_0x3e4d2f(0xf6)]['platform']();if(_0x12e6eb===_0x3e4d2f(0xcd)){const _0x223657=(0x0,fs_1[_0x3e4d2f(0xd6)])('/etc/os-release',_0x3e4d2f(0xe0));if(_0x223657[_0x3e4d2f(0xc4)](_0x3e4d2f(0xc8)))return _0x3e4d2f(0xc6);else{if(_0x223657[_0x3e4d2f(0xc4)](_0x3e4d2f(0xd8)))return'ubuntu';}}return _0x3e4d2f(0xd3);},checkUpgrade=async(_0x228888,_0x1aa688)=>{const _0x5446ba=a43_0x2a1a08;try{console[_0x5446ba(0xc3)](_0x5446ba(0xe8));const _0x1d0190=await axios_1[_0x5446ba(0xf6)][_0x5446ba(0xf7)](githubApiUrl);if(_0x1d0190['status']===0xc8){const {tag_name:_0x426f84,name:_0x48dd93,html_url:_0xe74f3,body:_0x4d583f}=_0x1d0190[_0x5446ba(0xe3)];_0x1aa688[_0x5446ba(0xe9)](0xc8)[_0x5446ba(0xf1)]({'tag':_0x426f84,'name':_0x48dd93,'url':_0xe74f3,'changelog':_0x4d583f});}else _0x1aa688['status'](_0x1d0190[_0x5446ba(0xe9)])[_0x5446ba(0xf1)]({'error':_0x5446ba(0xce)+_0x1d0190['statusText']});}catch(_0x588fc7){console['error']('Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:',_0x588fc7[_0x5446ba(0xec)]),_0x1aa688[_0x5446ba(0xe9)](0x1f4)[_0x5446ba(0xf1)]({'error':_0x5446ba(0xc9)});}};exports[a43_0x2a1a08(0xcb)]=checkUpgrade;const upgradeBackend=async(_0x489782,_0x5e857e)=>{const _0x37ac24=a43_0x2a1a08;try{const _0x4401a2=detectEnvironment();let _0x4577dc='';switch(_0x4401a2){case'docker':_0x4577dc=_0x37ac24(0xea);break;case _0x37ac24(0xca):_0x4577dc=_0x37ac24(0xd2);break;default:throw new Error(_0x37ac24(0xd1));}(0x0,child_process_1[_0x37ac24(0xcc)])(_0x4577dc,(_0x576cca,_0x1d1721,_0x41a883)=>{const _0x39da4a=_0x37ac24;if(_0x576cca)return console[_0x39da4a(0xd4)](_0x39da4a(0xf4)+_0x576cca[_0x39da4a(0xec)]),_0x5e857e[_0x39da4a(0xe9)](0x1f4)[_0x39da4a(0xf1)]({'message':_0x39da4a(0xdc),'error':_0x576cca[_0x39da4a(0xec)]});return _0x41a883&&console[_0x39da4a(0xe2)](_0x39da4a(0xf5)+_0x41a883),console['log'](_0x39da4a(0xd5)+_0x1d1721),_0x5e857e[_0x39da4a(0xe9)](0xc8)[_0x39da4a(0xf1)]({'message':'Script\x20executado\x20com\x20sucesso','output':_0x1d1721,'warnings':_0x41a883?_0x41a883[_0x39da4a(0xee)]():undefined});});}catch(_0x23006a){return console['error'](_0x37ac24(0xf3),_0x23006a[_0x37ac24(0xec)]),_0x5e857e[_0x37ac24(0xe9)](0x1f4)[_0x37ac24(0xf1)]({'error':'Erro\x20de\x20atualização','details':_0x23006a[_0x37ac24(0xec)]});}};exports[a43_0x2a1a08(0xc7)]=upgradeBackend;