const a42_0x8c223a=a42_0x4645;(function(_0x17e133,_0x228f2e){const _0xf8d6b6=a42_0x4645,_0x2a6cc0=_0x17e133();while(!![]){try{const _0x3c4976=-parseInt(_0xf8d6b6(0xe8))/0x1+parseInt(_0xf8d6b6(0xc0))/0x2*(-parseInt(_0xf8d6b6(0xd3))/0x3)+-parseInt(_0xf8d6b6(0xd8))/0x4+parseInt(_0xf8d6b6(0xed))/0x5*(parseInt(_0xf8d6b6(0xd2))/0x6)+-parseInt(_0xf8d6b6(0xe5))/0x7*(parseInt(_0xf8d6b6(0xe2))/0x8)+parseInt(_0xf8d6b6(0xc3))/0x9*(parseInt(_0xf8d6b6(0xd9))/0xa)+parseInt(_0xf8d6b6(0xea))/0xb;if(_0x3c4976===_0x228f2e)break;else _0x2a6cc0['push'](_0x2a6cc0['shift']());}catch(_0x3255ef){_0x2a6cc0['push'](_0x2a6cc0['shift']());}}}(a42_0x3d00,0x51a12));const a42_0x550553=(function(){let _0x2c50eb=!![];return function(_0x57665f,_0x34bdc1){const _0x41c7b2=_0x2c50eb?function(){const _0x3670e8=a42_0x4645;if(_0x34bdc1){const _0x50ab5d=_0x34bdc1[_0x3670e8(0xbb)](_0x57665f,arguments);return _0x34bdc1=null,_0x50ab5d;}}:function(){};return _0x2c50eb=![],_0x41c7b2;};}()),a42_0x5ed3ed=a42_0x550553(this,function(){const _0x2d3f59=a42_0x4645;return a42_0x5ed3ed[_0x2d3f59(0xdc)]()[_0x2d3f59(0xe1)](_0x2d3f59(0xd5))[_0x2d3f59(0xdc)]()['constructor'](a42_0x5ed3ed)['search'](_0x2d3f59(0xd5));});a42_0x5ed3ed();'use strict';var __importDefault=this&&this[a42_0x8c223a(0xe0)]||function(_0x4b1067){return _0x4b1067&&_0x4b1067['__esModule']?_0x4b1067:{'default':_0x4b1067};};function a42_0x3d00(){const _0x51dc7c=['16083nCYYzu','log','readFileSync','Ambiente\x20desconhecido.\x20Não\x20foi\x20possível\x20determinar\x20o\x20sistema\x20operacional.','Avisos\x20durante\x20a\x20execução\x20do\x20script:\x20','/etc/os-release','data','Ubuntu','exec','docker','Alpine','message','utf-8','sh\x20upgrade_backend.sh','get','1854JZBaSz','573LQIKJl','Script\x20executado\x20com\x20sucesso','(((.+)+)+)+$','axios','ubuntu','1328332MskulN','2840oAFBdO','Saída\x20do\x20script:\x0a','error','toString','upgradeBackend','unknown','includes','__importDefault','search','688EwOXVq','trim','https://api.github.com/repos/doug1043/Whaticket-Daumzap/releases/latest','9345fnsjJL','Erro\x20ao\x20executar\x20o\x20script:\x20','status','139394LKOIxO','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:\x20','11620136ruFYpt','__esModule','checkUpgrade','10voLgAu','Erro\x20ao\x20executar\x20o\x20script','apply','Erro\x20ao\x20fazer\x20atualização:','default','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:','statusText','6742AIidrt','json','linux'];a42_0x3d00=function(){return _0x51dc7c;};return a42_0x3d00();}Object['defineProperty'](exports,a42_0x8c223a(0xeb),{'value':!![]}),exports[a42_0x8c223a(0xdd)]=exports[a42_0x8c223a(0xec)]=void 0x0;const axios_1=__importDefault(require(a42_0x8c223a(0xd6))),child_process_1=require('child_process'),os_1=__importDefault(require('os')),fs_1=require('fs'),githubApiUrl=a42_0x8c223a(0xe4),detectEnvironment=()=>{const _0x3dcb8d=a42_0x8c223a,_0x3727dd=os_1[_0x3dcb8d(0xbd)]['platform']();if(_0x3727dd===_0x3dcb8d(0xc2)){const _0x12dda2=(0x0,fs_1[_0x3dcb8d(0xc5)])(_0x3dcb8d(0xc8),_0x3dcb8d(0xcf));if(_0x12dda2[_0x3dcb8d(0xdf)](_0x3dcb8d(0xcd)))return'docker';else{if(_0x12dda2[_0x3dcb8d(0xdf)](_0x3dcb8d(0xca)))return'ubuntu';}}return _0x3dcb8d(0xde);},checkUpgrade=async(_0x4261b7,_0x75652c)=>{const _0x24d661=a42_0x8c223a;try{console[_0x24d661(0xc4)]('Iniciando\x20verificação\x20de\x20atualizações\x20no\x20GitHub');const _0x208afa=await axios_1[_0x24d661(0xbd)][_0x24d661(0xd1)](githubApiUrl);if(_0x208afa[_0x24d661(0xe7)]===0xc8){const {tag_name:_0x4f5a27,name:_0x502b76,html_url:_0x4e8674,body:_0xe617a2}=_0x208afa[_0x24d661(0xc9)];_0x75652c['status'](0xc8)[_0x24d661(0xc1)]({'tag':_0x4f5a27,'name':_0x502b76,'url':_0x4e8674,'changelog':_0xe617a2});}else _0x75652c['status'](_0x208afa[_0x24d661(0xe7)])[_0x24d661(0xc1)]({'error':_0x24d661(0xe9)+_0x208afa[_0x24d661(0xbf)]});}catch(_0x1c74ec){console[_0x24d661(0xdb)](_0x24d661(0xbe),_0x1c74ec[_0x24d661(0xce)]),_0x75652c['status'](0x1f4)[_0x24d661(0xc1)]({'error':'Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub'});}};exports['checkUpgrade']=checkUpgrade;function a42_0x4645(_0x39e2a8,_0x557175){const _0x26e0cb=a42_0x3d00();return a42_0x4645=function(_0x5ed3ed,_0x550553){_0x5ed3ed=_0x5ed3ed-0xbb;let _0x3d00d8=_0x26e0cb[_0x5ed3ed];return _0x3d00d8;},a42_0x4645(_0x39e2a8,_0x557175);}const upgradeBackend=async(_0x1f277a,_0x34054a)=>{const _0x43d3b7=a42_0x8c223a;try{const _0x2462e4=detectEnvironment();let _0x33da84='';switch(_0x2462e4){case _0x43d3b7(0xcc):_0x33da84=_0x43d3b7(0xd0);break;case _0x43d3b7(0xd7):_0x33da84='./upgrade_backend.sh';break;default:throw new Error(_0x43d3b7(0xc6));}(0x0,child_process_1[_0x43d3b7(0xcb)])(_0x33da84,(_0x487012,_0x195e7c,_0x139498)=>{const _0x29bd73=_0x43d3b7;if(_0x487012)return console['error'](_0x29bd73(0xe6)+_0x487012[_0x29bd73(0xce)]),_0x34054a[_0x29bd73(0xe7)](0x1f4)[_0x29bd73(0xc1)]({'message':_0x29bd73(0xee),'error':_0x487012[_0x29bd73(0xce)]});return _0x139498&&console['warn'](_0x29bd73(0xc7)+_0x139498),console['log'](_0x29bd73(0xda)+_0x195e7c),_0x34054a['status'](0xc8)['json']({'message':_0x29bd73(0xd4),'output':_0x195e7c,'warnings':_0x139498?_0x139498[_0x29bd73(0xe3)]():undefined});});}catch(_0x244cfb){return console[_0x43d3b7(0xdb)](_0x43d3b7(0xbc),_0x244cfb[_0x43d3b7(0xce)]),_0x34054a[_0x43d3b7(0xe7)](0x1f4)[_0x43d3b7(0xc1)]({'error':'Erro\x20de\x20atualização','details':_0x244cfb[_0x43d3b7(0xce)]});}};exports[a42_0x8c223a(0xdd)]=upgradeBackend;