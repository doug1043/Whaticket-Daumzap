const a43_0x23720d=a43_0x3bf1;(function(_0x2b8efb,_0x4c3c16){const _0x4b153c=a43_0x3bf1,_0x4837a5=_0x2b8efb();while(!![]){try{const _0x2dfd6c=-parseInt(_0x4b153c(0x91))/0x1*(parseInt(_0x4b153c(0x93))/0x2)+parseInt(_0x4b153c(0xa3))/0x3+parseInt(_0x4b153c(0xb9))/0x4+parseInt(_0x4b153c(0xa0))/0x5*(parseInt(_0x4b153c(0xbb))/0x6)+parseInt(_0x4b153c(0xa2))/0x7*(parseInt(_0x4b153c(0xa5))/0x8)+parseInt(_0x4b153c(0xc0))/0x9+-parseInt(_0x4b153c(0xb0))/0xa;if(_0x2dfd6c===_0x4c3c16)break;else _0x4837a5['push'](_0x4837a5['shift']());}catch(_0x4d8e51){_0x4837a5['push'](_0x4837a5['shift']());}}}(a43_0x44c4,0x81c71));const a43_0x10ec6b=(function(){let _0x2b7cc0=!![];return function(_0x3e46df,_0x1d233a){const _0x18c75=_0x2b7cc0?function(){const _0x50394b=a43_0x3bf1;if(_0x1d233a){const _0x474ee1=_0x1d233a[_0x50394b(0x8e)](_0x3e46df,arguments);return _0x1d233a=null,_0x474ee1;}}:function(){};return _0x2b7cc0=![],_0x18c75;};}()),a43_0x3c20c1=a43_0x10ec6b(this,function(){const _0x399dd3=a43_0x3bf1;return a43_0x3c20c1[_0x399dd3(0xb5)]()[_0x399dd3(0xb8)](_0x399dd3(0xb1))[_0x399dd3(0xb5)]()[_0x399dd3(0xbd)](a43_0x3c20c1)[_0x399dd3(0xb8)](_0x399dd3(0xb1));});a43_0x3c20c1();function a43_0x3bf1(_0x815708,_0x558b63){const _0x1b15cf=a43_0x44c4();return a43_0x3bf1=function(_0x3c20c1,_0x10ec6b){_0x3c20c1=_0x3c20c1-0x8d;let _0x44c4a0=_0x1b15cf[_0x3c20c1];return _0x44c4a0;},a43_0x3bf1(_0x815708,_0x558b63);}'use strict';var __importDefault=this&&this[a43_0x23720d(0xab)]||function(_0x36ba12){const _0x167dca=a43_0x23720d;return _0x36ba12&&_0x36ba12[_0x167dca(0x9b)]?_0x36ba12:{'default':_0x36ba12};};Object['defineProperty'](exports,a43_0x23720d(0x9b),{'value':!![]}),exports[a43_0x23720d(0xac)]=exports[a43_0x23720d(0x8d)]=void 0x0;const axios_1=__importDefault(require('axios')),child_process_1=require(a43_0x23720d(0x9a)),os_1=__importDefault(require('os')),fs_1=require('fs'),githubApiUrl=a43_0x23720d(0x96),detectEnvironment=()=>{const _0x8d7eb2=a43_0x23720d,_0x21cbe3=os_1[_0x8d7eb2(0xa9)][_0x8d7eb2(0xaa)]();if(_0x21cbe3==='linux'){const _0x250889=(0x0,fs_1['readFileSync'])(_0x8d7eb2(0x94),_0x8d7eb2(0xbe));if(_0x250889[_0x8d7eb2(0xb7)]('Alpine'))return _0x8d7eb2(0x8f);else{if(_0x250889[_0x8d7eb2(0xb7)](_0x8d7eb2(0xad)))return _0x8d7eb2(0xa4);}}return _0x8d7eb2(0xb3);},checkUpgrade=async(_0x5b6946,_0xe53d96)=>{const _0x20d81a=a43_0x23720d;try{console[_0x20d81a(0x92)](_0x20d81a(0xbc));const _0xbd37c1=await axios_1[_0x20d81a(0xa9)][_0x20d81a(0x9f)](githubApiUrl);if(_0xbd37c1[_0x20d81a(0xba)]===0xc8){const {tag_name:_0x4bdab6,name:_0x4dc19e,html_url:_0x2e6421,body:_0x5de359}=_0xbd37c1[_0x20d81a(0xaf)];_0xe53d96[_0x20d81a(0xba)](0xc8)[_0x20d81a(0x95)]({'tag':_0x4bdab6,'name':_0x4dc19e,'url':_0x2e6421,'changelog':_0x5de359});}else _0xe53d96[_0x20d81a(0xba)](_0xbd37c1['status'])['json']({'error':_0x20d81a(0x9d)+_0xbd37c1[_0x20d81a(0x98)]});}catch(_0x56eaed){console[_0x20d81a(0xb2)](_0x20d81a(0x9c),_0x56eaed['message']),_0xe53d96[_0x20d81a(0xba)](0x1f4)['json']({'error':_0x20d81a(0x9e)});}};exports['checkUpgrade']=checkUpgrade;const upgradeBackend=async(_0x230de5,_0x2426e2)=>{const _0x34892e=a43_0x23720d;try{const _0x4905e1=detectEnvironment();let _0x487c1c='';switch(_0x4905e1){case'docker':_0x487c1c=_0x34892e(0xa7);break;case _0x34892e(0xa4):_0x487c1c=_0x34892e(0x99);break;default:throw new Error('Ambiente\x20desconhecido.\x20Não\x20foi\x20possível\x20determinar\x20o\x20sistema\x20operacional.');}(0x0,child_process_1[_0x34892e(0xa1)])(_0x487c1c,(_0x266583,_0x330511,_0x1f402a)=>{const _0x273231=_0x34892e;if(_0x266583)return console['error']('Erro\x20ao\x20executar\x20o\x20script:\x20'+_0x266583['message']),_0x2426e2[_0x273231(0xba)](0x1f4)['json']({'message':_0x273231(0xae),'error':_0x266583[_0x273231(0xa6)]});return _0x1f402a&&console[_0x273231(0xb4)](_0x273231(0x90)+_0x1f402a),console['log'](_0x273231(0xbf)+_0x330511),_0x2426e2['status'](0xc8)['json']({'message':_0x273231(0xa8),'output':_0x330511,'warnings':_0x1f402a?_0x1f402a[_0x273231(0x97)]():undefined});});}catch(_0x40f554){return console[_0x34892e(0xb2)](_0x34892e(0xb6),_0x40f554[_0x34892e(0xa6)]),_0x2426e2[_0x34892e(0xba)](0x1f4)[_0x34892e(0x95)]({'error':'Erro\x20de\x20atualização','details':_0x40f554[_0x34892e(0xa6)]});}};function a43_0x44c4(){const _0x2a2f3a=['log','7842TNJsct','/etc/os-release','json','https://api.github.com/repos/doug1043/Whaticket-Daumzap/releases/latest','trim','statusText','./upgrade_backend.sh','child_process','__esModule','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:\x20','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub','get','380585CayWnM','exec','14hiZqgU','3169041xTRvDe','ubuntu','2108472fvZuqy','message','sh\x20upgrade_backend.sh','Script\x20executado\x20com\x20sucesso','default','platform','__importDefault','upgradeBackend','Ubuntu','Erro\x20ao\x20executar\x20o\x20script','data','16486150srfMQe','(((.+)+)+)+$','error','unknown','warn','toString','Erro\x20ao\x20fazer\x20atualização:','includes','search','978392IsLCSu','status','6ZalPMQ','Iniciando\x20verificação\x20de\x20atualizações\x20no\x20GitHub','constructor','utf-8','Saída\x20do\x20script:\x0a','9224235FSmfHl','checkUpgrade','apply','docker','Avisos\x20durante\x20a\x20execução\x20do\x20script:\x20','191QeFuwi'];a43_0x44c4=function(){return _0x2a2f3a;};return a43_0x44c4();}exports['upgradeBackend']=upgradeBackend;