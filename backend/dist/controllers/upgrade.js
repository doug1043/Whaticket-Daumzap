const a42_0x21bc8b=a42_0x23db;function a42_0x4682(){const _0x217f91=['unknown','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:\x20','Erro\x20ao\x20executar\x20o\x20script:\x20','constructor','Erro\x20ao\x20fazer\x20atualização:','apply','includes','2820723NDfOPD','data','2ITpPJM','child_process','docker','Ubuntu','json','10kyjEHL','axios','platform','default','56IZwHYN','ubuntu','checkUpgrade','761268dGOSzS','message','23529Bggdyh','trim','602310CPpaCt','(((.+)+)+)+$','4irzTjo','Avisos\x20durante\x20a\x20execução\x20do\x20script:\x20','__esModule','toString','warn','765PTuyLC','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub','get','statusText','47944xDpApe','upgradeBackend','error','readFileSync','defineProperty','Iniciando\x20verificação\x20de\x20atualizações\x20no\x20GitHub','./upgrade_backend.sh','728242SxUajA','search','linux','2490210BJAQPp','status','Ambiente\x20desconhecido.\x20Não\x20foi\x20possível\x20determinar\x20o\x20sistema\x20operacional.','__importDefault'];a42_0x4682=function(){return _0x217f91;};return a42_0x4682();}(function(_0x433449,_0x42bded){const _0x1a9026=a42_0x23db,_0x5dd482=_0x433449();while(!![]){try{const _0x4b18ac=-parseInt(_0x1a9026(0x9a))/0x1*(parseInt(_0x1a9026(0x89))/0x2)+-parseInt(_0x1a9026(0x98))/0x3*(-parseInt(_0x1a9026(0x79))/0x4)+parseInt(_0x1a9026(0x8c))/0x5+-parseInt(_0x1a9026(0xaa))/0x6*(parseInt(_0x1a9026(0xa3))/0x7)+-parseInt(_0x1a9026(0x82))/0x8*(-parseInt(_0x1a9026(0x7e))/0x9)+-parseInt(_0x1a9026(0x9f))/0xa*(parseInt(_0x1a9026(0xa8))/0xb)+parseInt(_0x1a9026(0xa6))/0xc;if(_0x4b18ac===_0x42bded)break;else _0x5dd482['push'](_0x5dd482['shift']());}catch(_0x36c637){_0x5dd482['push'](_0x5dd482['shift']());}}}(a42_0x4682,0x749e2));const a42_0x495b82=(function(){let _0x532400=!![];return function(_0x3af262,_0x11c07d){const _0x245d0f=_0x532400?function(){const _0x1ee541=a42_0x23db;if(_0x11c07d){const _0x10d34f=_0x11c07d[_0x1ee541(0x96)](_0x3af262,arguments);return _0x11c07d=null,_0x10d34f;}}:function(){};return _0x532400=![],_0x245d0f;};}()),a42_0x2b132f=a42_0x495b82(this,function(){const _0xedde79=a42_0x23db;return a42_0x2b132f[_0xedde79(0x7c)]()[_0xedde79(0x8a)](_0xedde79(0xab))[_0xedde79(0x7c)]()[_0xedde79(0x94)](a42_0x2b132f)[_0xedde79(0x8a)](_0xedde79(0xab));});a42_0x2b132f();'use strict';var __importDefault=this&&this[a42_0x21bc8b(0x8f)]||function(_0x96f33d){const _0x69eba=a42_0x21bc8b;return _0x96f33d&&_0x96f33d[_0x69eba(0x7b)]?_0x96f33d:{'default':_0x96f33d};};Object[a42_0x21bc8b(0x86)](exports,a42_0x21bc8b(0x7b),{'value':!![]}),exports[a42_0x21bc8b(0x83)]=exports[a42_0x21bc8b(0xa5)]=void 0x0;const axios_1=__importDefault(require(a42_0x21bc8b(0xa0))),child_process_1=require(a42_0x21bc8b(0x9b)),os_1=__importDefault(require('os')),fs_1=require('fs'),githubApiUrl='https://api.github.com/repos/doug1043/Whaticket-Daumzap/releases/latest',detectEnvironment=()=>{const _0x290d2e=a42_0x21bc8b,_0x1ed913=os_1['default'][_0x290d2e(0xa1)]();if(_0x1ed913===_0x290d2e(0x8b)){const _0x5e371a=(0x0,fs_1[_0x290d2e(0x85)])('/etc/os-release','utf-8');if(_0x5e371a[_0x290d2e(0x97)]('Alpine'))return'docker';else{if(_0x5e371a[_0x290d2e(0x97)](_0x290d2e(0x9d)))return _0x290d2e(0xa4);}}return _0x290d2e(0x90);},checkUpgrade=async(_0x3af28f,_0x41201b)=>{const _0x49a4b3=a42_0x21bc8b;try{console['log'](_0x49a4b3(0x87));const _0x178dab=await axios_1[_0x49a4b3(0xa2)][_0x49a4b3(0x80)](githubApiUrl);if(_0x178dab[_0x49a4b3(0x8d)]===0xc8){const {tag_name:_0x1e8c52,name:_0x3c0718,html_url:_0x3b060e,body:_0x4433ae}=_0x178dab[_0x49a4b3(0x99)];_0x41201b[_0x49a4b3(0x8d)](0xc8)[_0x49a4b3(0x9e)]({'tag':_0x1e8c52,'name':_0x3c0718,'url':_0x3b060e,'changelog':_0x4433ae});}else _0x41201b[_0x49a4b3(0x8d)](_0x178dab[_0x49a4b3(0x8d)])[_0x49a4b3(0x9e)]({'error':_0x49a4b3(0x92)+_0x178dab[_0x49a4b3(0x81)]});}catch(_0x53e154){console[_0x49a4b3(0x84)](_0x49a4b3(0x91),_0x53e154[_0x49a4b3(0xa7)]),_0x41201b[_0x49a4b3(0x8d)](0x1f4)['json']({'error':_0x49a4b3(0x7f)});}};function a42_0x23db(_0x31cf28,_0x342476){const _0x5b3969=a42_0x4682();return a42_0x23db=function(_0x2b132f,_0x495b82){_0x2b132f=_0x2b132f-0x79;let _0x4682cb=_0x5b3969[_0x2b132f];return _0x4682cb;},a42_0x23db(_0x31cf28,_0x342476);}exports[a42_0x21bc8b(0xa5)]=checkUpgrade;const upgradeBackend=async(_0x3bee71,_0x12ee4b)=>{const _0xf5b118=a42_0x21bc8b;try{const _0x2a7bdd=detectEnvironment();let _0x964da0='';switch(_0x2a7bdd){case _0xf5b118(0x9c):_0x964da0='sh\x20upgrade_backend.sh';break;case _0xf5b118(0xa4):_0x964da0=_0xf5b118(0x88);break;default:throw new Error(_0xf5b118(0x8e));}(0x0,child_process_1['exec'])(_0x964da0,(_0x188381,_0x510dad,_0x16637a)=>{const _0x42564a=_0xf5b118;if(_0x188381)return console[_0x42564a(0x84)](_0x42564a(0x93)+_0x188381[_0x42564a(0xa7)]),_0x12ee4b[_0x42564a(0x8d)](0x1f4)['json']({'message':'Erro\x20ao\x20executar\x20o\x20script','error':_0x188381[_0x42564a(0xa7)]});return _0x16637a&&console[_0x42564a(0x7d)](_0x42564a(0x7a)+_0x16637a),console['log']('Saída\x20do\x20script:\x0a'+_0x510dad),_0x12ee4b['status'](0xc8)['json']({'message':'Script\x20executado\x20com\x20sucesso','output':_0x510dad,'warnings':_0x16637a?_0x16637a[_0x42564a(0xa9)]():undefined});});}catch(_0x20c51b){return console[_0xf5b118(0x84)](_0xf5b118(0x95),_0x20c51b[_0xf5b118(0xa7)]),_0x12ee4b[_0xf5b118(0x8d)](0x1f4)[_0xf5b118(0x9e)]({'error':'Erro\x20de\x20atualização','details':_0x20c51b['message']});}};exports[a42_0x21bc8b(0x83)]=upgradeBackend;