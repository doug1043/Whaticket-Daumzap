const a42_0x42b156=a42_0x412f;(function(_0x5205ce,_0xfe31dd){const _0x246509=a42_0x412f,_0x3531c7=_0x5205ce();while(!![]){try{const _0x5ed9ef=parseInt(_0x246509(0x109))/0x1*(parseInt(_0x246509(0xda))/0x2)+parseInt(_0x246509(0xf0))/0x3+-parseInt(_0x246509(0xf8))/0x4+parseInt(_0x246509(0xe4))/0x5*(-parseInt(_0x246509(0xf6))/0x6)+parseInt(_0x246509(0xeb))/0x7+-parseInt(_0x246509(0x106))/0x8*(parseInt(_0x246509(0xf9))/0x9)+parseInt(_0x246509(0xef))/0xa;if(_0x5ed9ef===_0xfe31dd)break;else _0x3531c7['push'](_0x3531c7['shift']());}catch(_0x24ea5d){_0x3531c7['push'](_0x3531c7['shift']());}}}(a42_0x49c2,0x72de0));const a42_0x4c8e4c=(function(){let _0x2e7301=!![];return function(_0x94829,_0x4008c0){const _0x4bb846=_0x2e7301?function(){const _0x240882=a42_0x412f;if(_0x4008c0){const _0x4c0617=_0x4008c0[_0x240882(0xe0)](_0x94829,arguments);return _0x4008c0=null,_0x4c0617;}}:function(){};return _0x2e7301=![],_0x4bb846;};}()),a42_0x3f6c5c=a42_0x4c8e4c(this,function(){const _0x1f0bb6=a42_0x412f;return a42_0x3f6c5c['toString']()[_0x1f0bb6(0xe3)]('(((.+)+)+)+$')[_0x1f0bb6(0xdc)]()['constructor'](a42_0x3f6c5c)['search']('(((.+)+)+)+$');});a42_0x3f6c5c();function a42_0x49c2(){const _0x172234=['status','toString','Ambiente\x20desconhecido.\x20Não\x20foi\x20possível\x20determinar\x20o\x20sistema\x20operacional.','default','includes','apply','/etc/os-release','utf-8','search','10CDZgrb','data','get','linux','checkUpgrade','Iniciando\x20verificação\x20de\x20atualizações\x20no\x20GitHub','Ubuntu','2858779BiWvtB','Saída\x20do\x20script:\x0a','error','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub','10058330NlOFMU','2196486FGuAkY','message','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:\x20','child_process','warn','docker','2340360CRxfiC','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:','2250796iQzKsN','9hfiRyx','platform','Erro\x20ao\x20executar\x20o\x20script','json','readFileSync','ubuntu','sh\x20upgrade_backend.sh','./upgrade_backend.sh','upgradeBackend','statusText','trim','Alpine','log','3863784sqiZIj','__esModule','exec','457FlTDBs','656WongXI'];a42_0x49c2=function(){return _0x172234;};return a42_0x49c2();}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3d60f5){return _0x3d60f5&&_0x3d60f5['__esModule']?_0x3d60f5:{'default':_0x3d60f5};};Object['defineProperty'](exports,a42_0x42b156(0x107),{'value':!![]}),exports[a42_0x42b156(0x101)]=exports[a42_0x42b156(0xe8)]=void 0x0;const axios_1=__importDefault(require('axios')),child_process_1=require(a42_0x42b156(0xf3)),os_1=__importDefault(require('os')),fs_1=require('fs'),githubApiUrl='https://api.github.com/repos/doug1043/Whaticket-Daumzap/releases/latest',detectEnvironment=()=>{const _0x1549d9=a42_0x42b156,_0x22ddf7=os_1[_0x1549d9(0xde)][_0x1549d9(0xfa)]();if(_0x22ddf7===_0x1549d9(0xe7)){const _0x19c46b=(0x0,fs_1[_0x1549d9(0xfd)])(_0x1549d9(0xe1),_0x1549d9(0xe2));if(_0x19c46b[_0x1549d9(0xdf)](_0x1549d9(0x104)))return _0x1549d9(0xf5);else{if(_0x19c46b[_0x1549d9(0xdf)](_0x1549d9(0xea)))return _0x1549d9(0xfe);}}return'unknown';},checkUpgrade=async(_0x488c28,_0x3a9557)=>{const _0x51263d=a42_0x42b156;try{console[_0x51263d(0x105)](_0x51263d(0xe9));const _0x17c440=await axios_1[_0x51263d(0xde)][_0x51263d(0xe6)](githubApiUrl);if(_0x17c440['status']===0xc8){const {tag_name:_0x2fef8e,name:_0x53daba,html_url:_0xc9027,body:_0x10debf}=_0x17c440[_0x51263d(0xe5)];_0x3a9557['status'](0xc8)['json']({'tag':_0x2fef8e,'name':_0x53daba,'url':_0xc9027,'changelog':_0x10debf});}else _0x3a9557[_0x51263d(0xdb)](_0x17c440[_0x51263d(0xdb)])[_0x51263d(0xfc)]({'error':_0x51263d(0xf2)+_0x17c440[_0x51263d(0x102)]});}catch(_0x37636c){console['error'](_0x51263d(0xf7),_0x37636c[_0x51263d(0xf1)]),_0x3a9557[_0x51263d(0xdb)](0x1f4)['json']({'error':_0x51263d(0xee)});}};exports[a42_0x42b156(0xe8)]=checkUpgrade;const upgradeBackend=async(_0x455a88,_0x2605fd)=>{const _0x497cdb=a42_0x42b156;try{const _0x30952c=detectEnvironment();let _0x1d305e='';switch(_0x30952c){case'docker':_0x1d305e=_0x497cdb(0xff);break;case _0x497cdb(0xfe):_0x1d305e=_0x497cdb(0x100);break;default:throw new Error(_0x497cdb(0xdd));}(0x0,child_process_1[_0x497cdb(0x108)])(_0x1d305e,(_0x30d6ce,_0x59c762,_0x244b62)=>{const _0x2ca5da=_0x497cdb;if(_0x30d6ce)return console[_0x2ca5da(0xed)]('Erro\x20ao\x20executar\x20o\x20script:\x20'+_0x30d6ce[_0x2ca5da(0xf1)]),_0x2605fd[_0x2ca5da(0xdb)](0x1f4)['json']({'message':_0x2ca5da(0xfb),'error':_0x30d6ce[_0x2ca5da(0xf1)]});return _0x244b62&&console[_0x2ca5da(0xf4)]('Avisos\x20durante\x20a\x20execução\x20do\x20script:\x20'+_0x244b62),console[_0x2ca5da(0x105)](_0x2ca5da(0xec)+_0x59c762),_0x2605fd[_0x2ca5da(0xdb)](0xc8)[_0x2ca5da(0xfc)]({'message':'Script\x20executado\x20com\x20sucesso','output':_0x59c762,'warnings':_0x244b62?_0x244b62[_0x2ca5da(0x103)]():undefined});});}catch(_0x4abe2b){return console[_0x497cdb(0xed)]('Erro\x20ao\x20fazer\x20atualização:',_0x4abe2b['message']),_0x2605fd[_0x497cdb(0xdb)](0x1f4)[_0x497cdb(0xfc)]({'error':'Erro\x20de\x20atualização','details':_0x4abe2b['message']});}};function a42_0x412f(_0x599d52,_0x5e7f3e){const _0x1769ff=a42_0x49c2();return a42_0x412f=function(_0x3f6c5c,_0x4c8e4c){_0x3f6c5c=_0x3f6c5c-0xda;let _0x49c249=_0x1769ff[_0x3f6c5c];return _0x49c249;},a42_0x412f(_0x599d52,_0x5e7f3e);}exports[a42_0x42b156(0x101)]=upgradeBackend;