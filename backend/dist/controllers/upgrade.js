const a42_0x5dd5b0=a42_0x3cc9;(function(_0x42ecc7,_0x2c1748){const _0x528389=a42_0x3cc9,_0x13c89f=_0x42ecc7();while(!![]){try{const _0x4954c3=-parseInt(_0x528389(0x1e6))/0x1+parseInt(_0x528389(0x1bc))/0x2+-parseInt(_0x528389(0x1e2))/0x3*(-parseInt(_0x528389(0x1d2))/0x4)+parseInt(_0x528389(0x1d9))/0x5+parseInt(_0x528389(0x1db))/0x6+parseInt(_0x528389(0x1e5))/0x7*(-parseInt(_0x528389(0x1c0))/0x8)+-parseInt(_0x528389(0x1e3))/0x9;if(_0x4954c3===_0x2c1748)break;else _0x13c89f['push'](_0x13c89f['shift']());}catch(_0x101f62){_0x13c89f['push'](_0x13c89f['shift']());}}}(a42_0x4c53,0xcb8a1));const a42_0xa76813=(function(){let _0x22e3d2=!![];return function(_0x1bf111,_0x27a8fe){const _0x2e5cdc=_0x22e3d2?function(){const _0x142cbf=a42_0x3cc9;if(_0x27a8fe){const _0x2e6ea4=_0x27a8fe[_0x142cbf(0x1de)](_0x1bf111,arguments);return _0x27a8fe=null,_0x2e6ea4;}}:function(){};return _0x22e3d2=![],_0x2e5cdc;};}()),a42_0x1bd8bb=a42_0xa76813(this,function(){const _0x4ad639=a42_0x3cc9;return a42_0x1bd8bb[_0x4ad639(0x1bd)]()[_0x4ad639(0x1ba)](_0x4ad639(0x1e8))['toString']()[_0x4ad639(0x1e1)](a42_0x1bd8bb)[_0x4ad639(0x1ba)](_0x4ad639(0x1e8));});a42_0x1bd8bb();'use strict';function a42_0x4c53(){const _0x3d22dc=['4YcLrUb','Saída\x20do\x20script:\x0a','message','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub','data','exec','default','2797620igcWOp','statusText','4524780UnntXm','Avisos\x20durante\x20a\x20execução\x20do\x20script:\x20','platform','apply','Erro\x20ao\x20executar\x20o\x20script','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:','constructor','4587681sGrgXR','6579279uYkars','Erro\x20ao\x20fazer\x20atualização:','27741qjzqJf','743237BRPLAF','includes','(((.+)+)+)+$','Erro\x20de\x20atualização','readFileSync','trim','log','Erro\x20ao\x20executar\x20o\x20script:\x20','search','Iniciando\x20verificação\x20de\x20atualizações\x20no\x20GitHub','1006780FFjYHh','toString','linux','child_process','2096GgpPQV','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:\x20','__esModule','docker','Script\x20executado\x20com\x20sucesso','get','warn','error','upgradeBackend','axios','ubuntu','Alpine','defineProperty','checkUpgrade','unknown','Ambiente\x20desconhecido.\x20Não\x20foi\x20possível\x20determinar\x20o\x20sistema\x20operacional.','json','status'];a42_0x4c53=function(){return _0x3d22dc;};return a42_0x4c53();}var __importDefault=this&&this['__importDefault']||function(_0x2975ea){return _0x2975ea&&_0x2975ea['__esModule']?_0x2975ea:{'default':_0x2975ea};};Object[a42_0x5dd5b0(0x1cc)](exports,a42_0x5dd5b0(0x1c2),{'value':!![]}),exports[a42_0x5dd5b0(0x1c8)]=exports[a42_0x5dd5b0(0x1cd)]=void 0x0;const axios_1=__importDefault(require(a42_0x5dd5b0(0x1c9))),child_process_1=require(a42_0x5dd5b0(0x1bf)),os_1=__importDefault(require('os')),fs_1=require('fs'),githubApiUrl='https://api.github.com/repos/doug1043/Whaticket-Daumzap/releases/latest',detectEnvironment=()=>{const _0x2b0d0f=a42_0x5dd5b0,_0x2eb678=os_1[_0x2b0d0f(0x1d8)][_0x2b0d0f(0x1dd)]();if(_0x2eb678===_0x2b0d0f(0x1be)){const _0x41ba5e=(0x0,fs_1[_0x2b0d0f(0x1ea)])('/etc/os-release','utf-8');if(_0x41ba5e['includes'](_0x2b0d0f(0x1cb)))return _0x2b0d0f(0x1c3);else{if(_0x41ba5e[_0x2b0d0f(0x1e7)]('Ubuntu'))return'ubuntu';}}return _0x2b0d0f(0x1ce);},checkUpgrade=async(_0x1ac190,_0x33038c)=>{const _0x31acf1=a42_0x5dd5b0;try{console[_0x31acf1(0x1ec)](_0x31acf1(0x1bb));const _0x58ec28=await axios_1['default'][_0x31acf1(0x1c5)](githubApiUrl);if(_0x58ec28['status']===0xc8){const {tag_name:_0x39b2f7,name:_0x47d153,html_url:_0x556541,body:_0x3ebd85}=_0x58ec28[_0x31acf1(0x1d6)];_0x33038c['status'](0xc8)['json']({'tag':_0x39b2f7,'name':_0x47d153,'url':_0x556541,'changelog':_0x3ebd85});}else _0x33038c[_0x31acf1(0x1d1)](_0x58ec28['status'])['json']({'error':_0x31acf1(0x1c1)+_0x58ec28[_0x31acf1(0x1da)]});}catch(_0x5a247c){console[_0x31acf1(0x1c7)](_0x31acf1(0x1e0),_0x5a247c[_0x31acf1(0x1d4)]),_0x33038c['status'](0x1f4)[_0x31acf1(0x1d0)]({'error':_0x31acf1(0x1d5)});}};exports[a42_0x5dd5b0(0x1cd)]=checkUpgrade;function a42_0x3cc9(_0x27d1cb,_0x19ca4d){const _0x2d7b8d=a42_0x4c53();return a42_0x3cc9=function(_0x1bd8bb,_0xa76813){_0x1bd8bb=_0x1bd8bb-0x1ba;let _0x4c53bc=_0x2d7b8d[_0x1bd8bb];return _0x4c53bc;},a42_0x3cc9(_0x27d1cb,_0x19ca4d);}const upgradeBackend=async(_0x2cf819,_0x1e9d5b)=>{const _0x17a51d=a42_0x5dd5b0;try{const _0x4c7d03=detectEnvironment();let _0x141f77='';switch(_0x4c7d03){case'docker':_0x141f77='sh\x20upgrade_backend.sh';break;case _0x17a51d(0x1ca):_0x141f77='./upgrade_backend.sh';break;default:throw new Error(_0x17a51d(0x1cf));}(0x0,child_process_1[_0x17a51d(0x1d7)])(_0x141f77,(_0x2b8843,_0x4884b6,_0x210af2)=>{const _0x523a8a=_0x17a51d;if(_0x2b8843)return console[_0x523a8a(0x1c7)](_0x523a8a(0x1ed)+_0x2b8843[_0x523a8a(0x1d4)]),_0x1e9d5b[_0x523a8a(0x1d1)](0x1f4)[_0x523a8a(0x1d0)]({'message':_0x523a8a(0x1df),'error':_0x2b8843[_0x523a8a(0x1d4)]});return _0x210af2&&console[_0x523a8a(0x1c6)](_0x523a8a(0x1dc)+_0x210af2),console[_0x523a8a(0x1ec)](_0x523a8a(0x1d3)+_0x4884b6),_0x1e9d5b[_0x523a8a(0x1d1)](0xc8)[_0x523a8a(0x1d0)]({'message':_0x523a8a(0x1c4),'output':_0x4884b6,'warnings':_0x210af2?_0x210af2[_0x523a8a(0x1eb)]():undefined});});}catch(_0x3290c9){return console[_0x17a51d(0x1c7)](_0x17a51d(0x1e4),_0x3290c9[_0x17a51d(0x1d4)]),_0x1e9d5b[_0x17a51d(0x1d1)](0x1f4)[_0x17a51d(0x1d0)]({'error':_0x17a51d(0x1e9),'details':_0x3290c9[_0x17a51d(0x1d4)]});}};exports[a42_0x5dd5b0(0x1c8)]=upgradeBackend;