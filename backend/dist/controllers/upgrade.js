const a42_0xfb7da3=a42_0x4139;(function(_0x1a925a,_0x5050d5){const _0x1e1adb=a42_0x4139,_0x1f8aac=_0x1a925a();while(!![]){try{const _0x30e68d=-parseInt(_0x1e1adb(0x1e4))/0x1+parseInt(_0x1e1adb(0x207))/0x2*(-parseInt(_0x1e1adb(0x206))/0x3)+parseInt(_0x1e1adb(0x1e7))/0x4*(-parseInt(_0x1e1adb(0x1dd))/0x5)+parseInt(_0x1e1adb(0x1ec))/0x6+-parseInt(_0x1e1adb(0x1f6))/0x7+-parseInt(_0x1e1adb(0x205))/0x8+parseInt(_0x1e1adb(0x1db))/0x9;if(_0x30e68d===_0x5050d5)break;else _0x1f8aac['push'](_0x1f8aac['shift']());}catch(_0x13d5dd){_0x1f8aac['push'](_0x1f8aac['shift']());}}}(a42_0x74cd,0x52c9b));function a42_0x74cd(){const _0x5d56da=['67336rKgMQS','22443AbVAnk','26JpzeVy','Iniciando\x20verificação\x20de\x20atualizações\x20no\x20GitHub','axios','apply','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:','status','2980998GKKTRK','defineProperty','505MQoitW','log','checkUpgrade','search','child_process','docker','Saída\x20do\x20script:\x0a','289003sTnLaR','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:\x20','linux','1016bzErDE','utf-8','Erro\x20de\x20atualização','__esModule','upgradeBackend','3273078uJBDrL','error','default','Ambiente\x20desconhecido.\x20Não\x20foi\x20possível\x20determinar\x20o\x20sistema\x20operacional.','platform','message','exec','Ubuntu','sh\x20upgrade_backend.sh','warn','821163CWACEo','Erro\x20ao\x20executar\x20o\x20script:\x20','includes','trim','./upgrade_backend.sh','https://api.github.com/repos/doug1043/Whaticket-Daumzap/releases/latest','statusText','(((.+)+)+)+$','json','toString','ubuntu','Erro\x20ao\x20executar\x20o\x20script','Script\x20executado\x20com\x20sucesso','data','unknown'];a42_0x74cd=function(){return _0x5d56da;};return a42_0x74cd();}const a42_0x3fc176=(function(){let _0x4f4584=!![];return function(_0x4e939c,_0x1c2841){const _0x2ea036=_0x4f4584?function(){const _0x320199=a42_0x4139;if(_0x1c2841){const _0x3423cd=_0x1c2841[_0x320199(0x1d8)](_0x4e939c,arguments);return _0x1c2841=null,_0x3423cd;}}:function(){};return _0x4f4584=![],_0x2ea036;};}()),a42_0x18c18d=a42_0x3fc176(this,function(){const _0x786a04=a42_0x4139;return a42_0x18c18d['toString']()['search']('(((.+)+)+)+$')[_0x786a04(0x1ff)]()['constructor'](a42_0x18c18d)[_0x786a04(0x1e0)](_0x786a04(0x1fd));});a42_0x18c18d();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x589dd3){const _0x363e37=a42_0x4139;return _0x589dd3&&_0x589dd3[_0x363e37(0x1ea)]?_0x589dd3:{'default':_0x589dd3};};Object[a42_0xfb7da3(0x1dc)](exports,a42_0xfb7da3(0x1ea),{'value':!![]}),exports['upgradeBackend']=exports['checkUpgrade']=void 0x0;const axios_1=__importDefault(require(a42_0xfb7da3(0x1d7))),child_process_1=require(a42_0xfb7da3(0x1e1)),os_1=__importDefault(require('os')),fs_1=require('fs'),githubApiUrl=a42_0xfb7da3(0x1fb),detectEnvironment=()=>{const _0x4235d3=a42_0xfb7da3,_0x51cd25=os_1[_0x4235d3(0x1ee)][_0x4235d3(0x1f0)]();if(_0x51cd25===_0x4235d3(0x1e6)){const _0x5e168a=(0x0,fs_1['readFileSync'])('/etc/os-release',_0x4235d3(0x1e8));if(_0x5e168a['includes']('Alpine'))return'docker';else{if(_0x5e168a[_0x4235d3(0x1f8)](_0x4235d3(0x1f3)))return _0x4235d3(0x200);}}return _0x4235d3(0x204);},checkUpgrade=async(_0x4c0ebd,_0x47b35d)=>{const _0x278e81=a42_0xfb7da3;try{console[_0x278e81(0x1de)](_0x278e81(0x1d6));const _0x543c85=await axios_1[_0x278e81(0x1ee)]['get'](githubApiUrl);if(_0x543c85[_0x278e81(0x1da)]===0xc8){const {tag_name:_0x36fcc7,name:_0x2c2445,html_url:_0x283cc9,body:_0x23e71a}=_0x543c85[_0x278e81(0x203)];_0x47b35d[_0x278e81(0x1da)](0xc8)[_0x278e81(0x1fe)]({'tag':_0x36fcc7,'name':_0x2c2445,'url':_0x283cc9,'changelog':_0x23e71a});}else _0x47b35d['status'](_0x543c85[_0x278e81(0x1da)])[_0x278e81(0x1fe)]({'error':_0x278e81(0x1e5)+_0x543c85[_0x278e81(0x1fc)]});}catch(_0x1b86a1){console[_0x278e81(0x1ed)](_0x278e81(0x1d9),_0x1b86a1[_0x278e81(0x1f1)]),_0x47b35d[_0x278e81(0x1da)](0x1f4)[_0x278e81(0x1fe)]({'error':'Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub'});}};exports[a42_0xfb7da3(0x1df)]=checkUpgrade;const upgradeBackend=async(_0x4bc3b1,_0x137af9)=>{const _0x465d90=a42_0xfb7da3;try{const _0x442ea4=detectEnvironment();let _0x2a8d48='';switch(_0x442ea4){case _0x465d90(0x1e2):_0x2a8d48=_0x465d90(0x1f4);break;case'ubuntu':_0x2a8d48=_0x465d90(0x1fa);break;default:throw new Error(_0x465d90(0x1ef));}(0x0,child_process_1[_0x465d90(0x1f2)])(_0x2a8d48,(_0x37630b,_0x19a3e0,_0x52f95c)=>{const _0x19f33c=_0x465d90;if(_0x37630b)return console[_0x19f33c(0x1ed)](_0x19f33c(0x1f7)+_0x37630b['message']),_0x137af9[_0x19f33c(0x1da)](0x1f4)['json']({'message':_0x19f33c(0x201),'error':_0x37630b['message']});return _0x52f95c&&console[_0x19f33c(0x1f5)]('Avisos\x20durante\x20a\x20execução\x20do\x20script:\x20'+_0x52f95c),console[_0x19f33c(0x1de)](_0x19f33c(0x1e3)+_0x19a3e0),_0x137af9['status'](0xc8)['json']({'message':_0x19f33c(0x202),'output':_0x19a3e0,'warnings':_0x52f95c?_0x52f95c[_0x19f33c(0x1f9)]():undefined});});}catch(_0x22451f){return console[_0x465d90(0x1ed)]('Erro\x20ao\x20fazer\x20atualização:',_0x22451f['message']),_0x137af9[_0x465d90(0x1da)](0x1f4)[_0x465d90(0x1fe)]({'error':_0x465d90(0x1e9),'details':_0x22451f[_0x465d90(0x1f1)]});}};function a42_0x4139(_0x7ad9b5,_0x33baf5){const _0x47a600=a42_0x74cd();return a42_0x4139=function(_0x18c18d,_0x3fc176){_0x18c18d=_0x18c18d-0x1d6;let _0x74cd99=_0x47a600[_0x18c18d];return _0x74cd99;},a42_0x4139(_0x7ad9b5,_0x33baf5);}exports[a42_0xfb7da3(0x1eb)]=upgradeBackend;