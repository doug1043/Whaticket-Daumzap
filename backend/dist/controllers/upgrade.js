const a51_0x5f28e7=a51_0x25fe;function a51_0x369c(){const _0x3e8baa=['209964bKuJCD','/etc/os-release','includes','search','Ambiente\x20desconhecido.\x20Não\x20foi\x20possível\x20determinar\x20o\x20sistema\x20operacional.','530778JUFCGB','40734LAiMoV','platform','790314dhtNPZ','Erro\x20ao\x20executar\x20o\x20script:\x20','__esModule','Saída\x20do\x20script:\x0a','__importDefault','docker','9RfAvcA','statusText','843095iUmKOn','(((.+)+)+)+$','warn','child_process','apply','ubuntu','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:','linux','checkUpgrade','toString','unknown','Avisos\x20durante\x20a\x20execução\x20do\x20script:\x20','error','message','data','Erro\x20de\x20atualização','default','Ubuntu','get','Script\x20executado\x20com\x20sucesso','json','status','2599686RHeZab','5fKeZvS','upgradeBackend','Alpine','./upgrade_backend.sh','528280MbPRbs','trim','log'];a51_0x369c=function(){return _0x3e8baa;};return a51_0x369c();}(function(_0x1f6cbe,_0x27fca3){const _0x48b9f4=a51_0x25fe,_0x3f63df=_0x1f6cbe();while(!![]){try{const _0x581329=-parseInt(_0x48b9f4(0x1a9))/0x1*(-parseInt(_0x48b9f4(0x1b6))/0x2)+parseInt(_0x48b9f4(0x1be))/0x3*(parseInt(_0x48b9f4(0x1b0))/0x4)+parseInt(_0x48b9f4(0x1c0))/0x5+parseInt(_0x48b9f4(0x1b5))/0x6+-parseInt(_0x48b9f4(0x1b8))/0x7+parseInt(_0x48b9f4(0x1ad))/0x8+-parseInt(_0x48b9f4(0x1a8))/0x9;if(_0x581329===_0x27fca3)break;else _0x3f63df['push'](_0x3f63df['shift']());}catch(_0x49f698){_0x3f63df['push'](_0x3f63df['shift']());}}}(a51_0x369c,0x2c1bd));const a51_0x43d20e=(function(){let _0x2e86bc=!![];return function(_0xb1af9b,_0x4d3baa){const _0x2fd6eb=_0x2e86bc?function(){const _0x104041=a51_0x25fe;if(_0x4d3baa){const _0x42a562=_0x4d3baa[_0x104041(0x196)](_0xb1af9b,arguments);return _0x4d3baa=null,_0x42a562;}}:function(){};return _0x2e86bc=![],_0x2fd6eb;};}()),a51_0x12cf57=a51_0x43d20e(this,function(){const _0x487eda=a51_0x25fe;return a51_0x12cf57[_0x487eda(0x19b)]()[_0x487eda(0x1b3)](_0x487eda(0x193))['toString']()['constructor'](a51_0x12cf57)['search'](_0x487eda(0x193));});a51_0x12cf57();'use strict';var __importDefault=this&&this[a51_0x5f28e7(0x1bc)]||function(_0x19f5e6){const _0x1811c2=a51_0x5f28e7;return _0x19f5e6&&_0x19f5e6[_0x1811c2(0x1ba)]?_0x19f5e6:{'default':_0x19f5e6};};Object['defineProperty'](exports,a51_0x5f28e7(0x1ba),{'value':!![]}),exports['upgradeBackend']=exports[a51_0x5f28e7(0x19a)]=void 0x0;const axios_1=__importDefault(require('axios')),child_process_1=require(a51_0x5f28e7(0x195)),os_1=__importDefault(require('os')),fs_1=require('fs'),githubApiUrl='https://api.github.com/repos/doug1043/Whaticket-Daumzap/releases/latest',detectEnvironment=()=>{const _0x4c64c0=a51_0x5f28e7,_0x269851=os_1[_0x4c64c0(0x1a2)][_0x4c64c0(0x1b7)]();if(_0x269851===_0x4c64c0(0x199)){const _0x483875=(0x0,fs_1['readFileSync'])(_0x4c64c0(0x1b1),'utf-8');if(_0x483875[_0x4c64c0(0x1b2)](_0x4c64c0(0x1ab)))return _0x4c64c0(0x1bd);else{if(_0x483875['includes'](_0x4c64c0(0x1a3)))return _0x4c64c0(0x197);}}return _0x4c64c0(0x19c);},checkUpgrade=async(_0x374e60,_0x2de801)=>{const _0x38e240=a51_0x5f28e7;try{console[_0x38e240(0x1af)]('Iniciando\x20verificação\x20de\x20atualizações\x20no\x20GitHub');const _0x5e67b9=await axios_1[_0x38e240(0x1a2)][_0x38e240(0x1a4)](githubApiUrl);if(_0x5e67b9[_0x38e240(0x1a7)]===0xc8){const {tag_name:_0x1ccf4a,name:_0x1ee1d7,html_url:_0x500e4a,body:_0x5e4518}=_0x5e67b9[_0x38e240(0x1a0)];_0x2de801[_0x38e240(0x1a7)](0xc8)[_0x38e240(0x1a6)]({'tag':_0x1ccf4a,'name':_0x1ee1d7,'url':_0x500e4a,'changelog':_0x5e4518});}else _0x2de801[_0x38e240(0x1a7)](_0x5e67b9[_0x38e240(0x1a7)])[_0x38e240(0x1a6)]({'error':'Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:\x20'+_0x5e67b9[_0x38e240(0x1bf)]});}catch(_0x568926){console[_0x38e240(0x19e)](_0x38e240(0x198),_0x568926[_0x38e240(0x19f)]),_0x2de801[_0x38e240(0x1a7)](0x1f4)[_0x38e240(0x1a6)]({'error':'Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub'});}};exports[a51_0x5f28e7(0x19a)]=checkUpgrade;const upgradeBackend=async(_0x29ee22,_0x5d3fdc)=>{const _0x2903bf=a51_0x5f28e7;try{const _0x1d197a=detectEnvironment();let _0x45898e='';switch(_0x1d197a){case'docker':_0x45898e='sh\x20upgrade_backend.sh';break;case _0x2903bf(0x197):_0x45898e=_0x2903bf(0x1ac);break;default:throw new Error(_0x2903bf(0x1b4));}(0x0,child_process_1['exec'])(_0x45898e,(_0x474212,_0xb385db,_0x1a5363)=>{const _0x3514d6=_0x2903bf;if(_0x474212)return console[_0x3514d6(0x19e)](_0x3514d6(0x1b9)+_0x474212[_0x3514d6(0x19f)]),_0x5d3fdc[_0x3514d6(0x1a7)](0x1f4)[_0x3514d6(0x1a6)]({'message':'Erro\x20ao\x20executar\x20o\x20script','error':_0x474212[_0x3514d6(0x19f)]});return _0x1a5363&&console[_0x3514d6(0x194)](_0x3514d6(0x19d)+_0x1a5363),console['log'](_0x3514d6(0x1bb)+_0xb385db),_0x5d3fdc[_0x3514d6(0x1a7)](0xc8)[_0x3514d6(0x1a6)]({'message':_0x3514d6(0x1a5),'output':_0xb385db,'warnings':_0x1a5363?_0x1a5363[_0x3514d6(0x1ae)]():undefined});});}catch(_0x410368){return console[_0x2903bf(0x19e)]('Erro\x20ao\x20fazer\x20atualização:',_0x410368[_0x2903bf(0x19f)]),_0x5d3fdc[_0x2903bf(0x1a7)](0x1f4)[_0x2903bf(0x1a6)]({'error':_0x2903bf(0x1a1),'details':_0x410368[_0x2903bf(0x19f)]});}};function a51_0x25fe(_0x365ca8,_0x3218b2){const _0x1c550b=a51_0x369c();return a51_0x25fe=function(_0x12cf57,_0x43d20e){_0x12cf57=_0x12cf57-0x193;let _0x369cfd=_0x1c550b[_0x12cf57];return _0x369cfd;},a51_0x25fe(_0x365ca8,_0x3218b2);}exports[a51_0x5f28e7(0x1aa)]=upgradeBackend;