const a51_0x2667b9=a51_0xbcfb;(function(_0x47285,_0x2fc8c1){const _0x5c7859=a51_0xbcfb,_0x50c620=_0x47285();while(!![]){try{const _0xab1df3=-parseInt(_0x5c7859(0xf4))/0x1+-parseInt(_0x5c7859(0xea))/0x2*(-parseInt(_0x5c7859(0xd9))/0x3)+parseInt(_0x5c7859(0xee))/0x4+-parseInt(_0x5c7859(0xef))/0x5*(parseInt(_0x5c7859(0xde))/0x6)+-parseInt(_0x5c7859(0xdd))/0x7+-parseInt(_0x5c7859(0xe0))/0x8*(parseInt(_0x5c7859(0xe9))/0x9)+parseInt(_0x5c7859(0xfe))/0xa;if(_0xab1df3===_0x2fc8c1)break;else _0x50c620['push'](_0x50c620['shift']());}catch(_0x1e4f81){_0x50c620['push'](_0x50c620['shift']());}}}(a51_0xf45b,0x3beae));const a51_0x894532=(function(){let _0x3bb0b0=!![];return function(_0x2d90f9,_0x38ece0){const _0x32b0c0=_0x3bb0b0?function(){const _0x2d5232=a51_0xbcfb;if(_0x38ece0){const _0x3c1be5=_0x38ece0[_0x2d5232(0xed)](_0x2d90f9,arguments);return _0x38ece0=null,_0x3c1be5;}}:function(){};return _0x3bb0b0=![],_0x32b0c0;};}()),a51_0x34bbad=a51_0x894532(this,function(){const _0x3ef071=a51_0xbcfb;return a51_0x34bbad[_0x3ef071(0xe4)]()['search'](_0x3ef071(0xeb))[_0x3ef071(0xe4)]()[_0x3ef071(0xe2)](a51_0x34bbad)[_0x3ef071(0xf3)](_0x3ef071(0xeb));});a51_0x34bbad();'use strict';function a51_0xf45b(){const _0x14740e=['(((.+)+)+)+$','includes','apply','26940XmVXDc','1320XOrQAa','Erro\x20de\x20atualização','message','json','search','141067FWzVSG','Script\x20executado\x20com\x20sucesso','/etc/os-release','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:','Erro\x20ao\x20executar\x20o\x20script:\x20','Erro\x20ao\x20executar\x20o\x20script','readFileSync','Iniciando\x20verificação\x20de\x20atualizações\x20no\x20GitHub','Alpine','axios','8985080fKqlEW','checkUpgrade','./upgrade_backend.sh','upgradeBackend','warn','Ubuntu','statusText','docker','default','Ambiente\x20desconhecido.\x20Não\x20foi\x20possível\x20determinar\x20o\x20sistema\x20operacional.','platform','__importDefault','349329JrzMhw','log','https://api.github.com/repos/doug1043/Whaticket-Daumzap/releases/latest','utf-8','1758547ygFIwg','792WIpwYu','exec','8XCRwit','ubuntu','constructor','data','toString','status','__esModule','Erro\x20ao\x20fazer\x20atualização:','error','4190139Xnizuj','4wavnxX'];a51_0xf45b=function(){return _0x14740e;};return a51_0xf45b();}var __importDefault=this&&this[a51_0x2667b9(0xd8)]||function(_0x548dc8){const _0x214e08=a51_0x2667b9;return _0x548dc8&&_0x548dc8[_0x214e08(0xe6)]?_0x548dc8:{'default':_0x548dc8};};Object['defineProperty'](exports,a51_0x2667b9(0xe6),{'value':!![]}),exports[a51_0x2667b9(0x101)]=exports[a51_0x2667b9(0xff)]=void 0x0;const axios_1=__importDefault(require(a51_0x2667b9(0xfd))),child_process_1=require('child_process'),os_1=__importDefault(require('os')),fs_1=require('fs'),githubApiUrl=a51_0x2667b9(0xdb),detectEnvironment=()=>{const _0x2d8dca=a51_0x2667b9,_0x484caf=os_1['default'][_0x2d8dca(0x108)]();if(_0x484caf==='linux'){const _0x2b9b8c=(0x0,fs_1[_0x2d8dca(0xfa)])(_0x2d8dca(0xf6),_0x2d8dca(0xdc));if(_0x2b9b8c[_0x2d8dca(0xec)](_0x2d8dca(0xfc)))return'docker';else{if(_0x2b9b8c['includes'](_0x2d8dca(0x103)))return _0x2d8dca(0xe1);}}return'unknown';},checkUpgrade=async(_0x1c4961,_0x327065)=>{const _0x4166b4=a51_0x2667b9;try{console[_0x4166b4(0xda)](_0x4166b4(0xfb));const _0x39d91f=await axios_1[_0x4166b4(0x106)]['get'](githubApiUrl);if(_0x39d91f['status']===0xc8){const {tag_name:_0x30ede0,name:_0x3c574d,html_url:_0x43b29d,body:_0x41b859}=_0x39d91f[_0x4166b4(0xe3)];_0x327065[_0x4166b4(0xe5)](0xc8)['json']({'tag':_0x30ede0,'name':_0x3c574d,'url':_0x43b29d,'changelog':_0x41b859});}else _0x327065[_0x4166b4(0xe5)](_0x39d91f[_0x4166b4(0xe5)])[_0x4166b4(0xf2)]({'error':'Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:\x20'+_0x39d91f[_0x4166b4(0x104)]});}catch(_0x4155b2){console[_0x4166b4(0xe8)](_0x4166b4(0xf7),_0x4155b2['message']),_0x327065[_0x4166b4(0xe5)](0x1f4)[_0x4166b4(0xf2)]({'error':'Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub'});}};exports[a51_0x2667b9(0xff)]=checkUpgrade;function a51_0xbcfb(_0x21c28e,_0x5ac577){const _0x98c1ee=a51_0xf45b();return a51_0xbcfb=function(_0x34bbad,_0x894532){_0x34bbad=_0x34bbad-0xd8;let _0xf45b95=_0x98c1ee[_0x34bbad];return _0xf45b95;},a51_0xbcfb(_0x21c28e,_0x5ac577);}const upgradeBackend=async(_0x23f711,_0x35e389)=>{const _0x523b0b=a51_0x2667b9;try{const _0x6e6bf8=detectEnvironment();let _0x1edeb9='';switch(_0x6e6bf8){case _0x523b0b(0x105):_0x1edeb9='sh\x20upgrade_backend.sh';break;case'ubuntu':_0x1edeb9=_0x523b0b(0x100);break;default:throw new Error(_0x523b0b(0x107));}(0x0,child_process_1[_0x523b0b(0xdf)])(_0x1edeb9,(_0x39bd01,_0x51d281,_0x1d56e9)=>{const _0x79c0c4=_0x523b0b;if(_0x39bd01)return console['error'](_0x79c0c4(0xf8)+_0x39bd01[_0x79c0c4(0xf1)]),_0x35e389['status'](0x1f4)['json']({'message':_0x79c0c4(0xf9),'error':_0x39bd01[_0x79c0c4(0xf1)]});return _0x1d56e9&&console[_0x79c0c4(0x102)]('Avisos\x20durante\x20a\x20execução\x20do\x20script:\x20'+_0x1d56e9),console[_0x79c0c4(0xda)]('Saída\x20do\x20script:\x0a'+_0x51d281),_0x35e389['status'](0xc8)['json']({'message':_0x79c0c4(0xf5),'output':_0x51d281,'warnings':_0x1d56e9?_0x1d56e9['trim']():undefined});});}catch(_0x3e5334){return console[_0x523b0b(0xe8)](_0x523b0b(0xe7),_0x3e5334[_0x523b0b(0xf1)]),_0x35e389[_0x523b0b(0xe5)](0x1f4)['json']({'error':_0x523b0b(0xf0),'details':_0x3e5334[_0x523b0b(0xf1)]});}};exports[a51_0x2667b9(0x101)]=upgradeBackend;