const a43_0x56a1d0=a43_0xb27e;(function(_0x13dbf4,_0x5dc7a8){const _0x12f26a=a43_0xb27e,_0xfa9be1=_0x13dbf4();while(!![]){try{const _0x2eab5d=-parseInt(_0x12f26a(0xb7))/0x1+parseInt(_0x12f26a(0xbc))/0x2*(-parseInt(_0x12f26a(0xc0))/0x3)+parseInt(_0x12f26a(0xd4))/0x4*(parseInt(_0x12f26a(0xe3))/0x5)+parseInt(_0x12f26a(0xdd))/0x6+-parseInt(_0x12f26a(0xe8))/0x7+parseInt(_0x12f26a(0xcc))/0x8+-parseInt(_0x12f26a(0xd8))/0x9*(-parseInt(_0x12f26a(0xc6))/0xa);if(_0x2eab5d===_0x5dc7a8)break;else _0xfa9be1['push'](_0xfa9be1['shift']());}catch(_0x5bdaf4){_0xfa9be1['push'](_0xfa9be1['shift']());}}}(a43_0x2663,0xed7aa));const a43_0x39a63d=(function(){let _0x23f5b5=!![];return function(_0x13162d,_0x480338){const _0x2e6bff=_0x23f5b5?function(){const _0x41c404=a43_0xb27e;if(_0x480338){const _0x4c5f49=_0x480338[_0x41c404(0xd3)](_0x13162d,arguments);return _0x480338=null,_0x4c5f49;}}:function(){};return _0x23f5b5=![],_0x2e6bff;};}()),a43_0x1c7ec4=a43_0x39a63d(this,function(){const _0x369d53=a43_0xb27e;return a43_0x1c7ec4[_0x369d53(0xe6)]()[_0x369d53(0xe4)](_0x369d53(0xe1))[_0x369d53(0xe6)]()[_0x369d53(0xc4)](a43_0x1c7ec4)[_0x369d53(0xe4)](_0x369d53(0xe1));});a43_0x1c7ec4();function a43_0xb27e(_0x1f0d38,_0x2dbf01){const _0x47d54a=a43_0x2663();return a43_0xb27e=function(_0x1c7ec4,_0x39a63d){_0x1c7ec4=_0x1c7ec4-0xb6;let _0x266391=_0x47d54a[_0x1c7ec4];return _0x266391;},a43_0xb27e(_0x1f0d38,_0x2dbf01);}'use strict';var __importDefault=this&&this[a43_0x56a1d0(0xb8)]||function(_0x2316d9){const _0x278943=a43_0x56a1d0;return _0x2316d9&&_0x2316d9[_0x278943(0xd9)]?_0x2316d9:{'default':_0x2316d9};};Object[a43_0x56a1d0(0xcd)](exports,a43_0x56a1d0(0xd9),{'value':!![]}),exports[a43_0x56a1d0(0xda)]=exports[a43_0x56a1d0(0xde)]=void 0x0;const axios_1=__importDefault(require(a43_0x56a1d0(0xd0))),child_process_1=require(a43_0x56a1d0(0xbf)),os_1=__importDefault(require('os')),fs_1=require('fs'),githubApiUrl=a43_0x56a1d0(0xd1),detectEnvironment=()=>{const _0x224810=a43_0x56a1d0,_0x67c808=os_1[_0x224810(0xbb)]['platform']();if(_0x67c808===_0x224810(0xc9)){const _0xfc1f86=(0x0,fs_1['readFileSync'])(_0x224810(0xd7),_0x224810(0xb6));if(_0xfc1f86[_0x224810(0xb9)](_0x224810(0xd5)))return _0x224810(0xd2);else{if(_0xfc1f86[_0x224810(0xb9)](_0x224810(0xe2)))return _0x224810(0xce);}}return _0x224810(0xe7);},checkUpgrade=async(_0x2fe681,_0x2daa46)=>{const _0x4477b6=a43_0x56a1d0;try{console['log']('Iniciando\x20verificação\x20de\x20atualizações\x20no\x20GitHub');const _0xc84605=await axios_1[_0x4477b6(0xbb)][_0x4477b6(0xc1)](githubApiUrl);if(_0xc84605[_0x4477b6(0xc7)]===0xc8){const {tag_name:_0x5b74e4,name:_0x5b3ecd,html_url:_0x50ebee,body:_0x412dbc}=_0xc84605[_0x4477b6(0xbe)];_0x2daa46[_0x4477b6(0xc7)](0xc8)[_0x4477b6(0xc2)]({'tag':_0x5b74e4,'name':_0x5b3ecd,'url':_0x50ebee,'changelog':_0x412dbc});}else _0x2daa46['status'](_0xc84605[_0x4477b6(0xc7)])[_0x4477b6(0xc2)]({'error':_0x4477b6(0xdb)+_0xc84605['statusText']});}catch(_0x704d7a){console[_0x4477b6(0xc3)](_0x4477b6(0xe5),_0x704d7a['message']),_0x2daa46[_0x4477b6(0xc7)](0x1f4)[_0x4477b6(0xc2)]({'error':_0x4477b6(0xc5)});}};exports['checkUpgrade']=checkUpgrade;const upgradeBackend=async(_0xfffe1e,_0x18eb58)=>{const _0x32a461=a43_0x56a1d0;try{const _0x40c1ed=detectEnvironment();let _0x45b3f4='';switch(_0x40c1ed){case'docker':_0x45b3f4='sh\x20upgrade_backend.sh';break;case _0x32a461(0xce):_0x45b3f4=_0x32a461(0xc8);break;default:throw new Error(_0x32a461(0xcb));}(0x0,child_process_1[_0x32a461(0xba)])(_0x45b3f4,(_0x23c047,_0x8f4351,_0x4b06bf)=>{const _0x4e4d1c=_0x32a461;if(_0x23c047)return console['error']('Erro\x20ao\x20executar\x20o\x20script:\x20'+_0x23c047[_0x4e4d1c(0xdf)]),_0x18eb58['status'](0x1f4)[_0x4e4d1c(0xc2)]({'message':_0x4e4d1c(0xbd),'error':_0x23c047[_0x4e4d1c(0xdf)]});return _0x4b06bf&&console[_0x4e4d1c(0xcf)](_0x4e4d1c(0xdc)+_0x4b06bf),console[_0x4e4d1c(0xd6)]('Saída\x20do\x20script:\x0a'+_0x8f4351),_0x18eb58[_0x4e4d1c(0xc7)](0xc8)[_0x4e4d1c(0xc2)]({'message':'Script\x20executado\x20com\x20sucesso','output':_0x8f4351,'warnings':_0x4b06bf?_0x4b06bf[_0x4e4d1c(0xca)]():undefined});});}catch(_0xf7af02){return console[_0x32a461(0xc3)](_0x32a461(0xe0),_0xf7af02['message']),_0x18eb58['status'](0x1f4)[_0x32a461(0xc2)]({'error':'Erro\x20de\x20atualização','details':_0xf7af02['message']});}};exports[a43_0x56a1d0(0xda)]=upgradeBackend;function a43_0x2663(){const _0x3b86b4=['Ubuntu','358660NkpqQJ','search','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:','toString','unknown','11186945ngGePF','utf-8','256128HvoDKZ','__importDefault','includes','exec','default','186maFSqN','Erro\x20ao\x20executar\x20o\x20script','data','child_process','52881qOJfrn','get','json','error','constructor','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub','21592420KCxcaD','status','./upgrade_backend.sh','linux','trim','Ambiente\x20desconhecido.\x20Não\x20foi\x20possível\x20determinar\x20o\x20sistema\x20operacional.','9950992VwbWSJ','defineProperty','ubuntu','warn','axios','https://api.github.com/repos/doug1043/Whaticket-Daumzap/releases/latest','docker','apply','8jSeUCY','Alpine','log','/etc/os-release','9lflUtS','__esModule','upgradeBackend','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:\x20','Avisos\x20durante\x20a\x20execução\x20do\x20script:\x20','5518248Qmvfec','checkUpgrade','message','Erro\x20ao\x20fazer\x20atualização:','(((.+)+)+)+$'];a43_0x2663=function(){return _0x3b86b4;};return a43_0x2663();}