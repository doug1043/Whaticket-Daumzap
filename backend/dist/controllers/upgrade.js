const a42_0x3ca4c3=a42_0x222b;(function(_0x45885c,_0x34c3b9){const _0x52757f=a42_0x222b,_0x2ee8de=_0x45885c();while(!![]){try{const _0x58335c=-parseInt(_0x52757f(0x6a))/0x1+parseInt(_0x52757f(0x6f))/0x2+-parseInt(_0x52757f(0x90))/0x3+parseInt(_0x52757f(0x89))/0x4*(-parseInt(_0x52757f(0x8d))/0x5)+-parseInt(_0x52757f(0x8e))/0x6+parseInt(_0x52757f(0x74))/0x7+parseInt(_0x52757f(0x67))/0x8;if(_0x58335c===_0x34c3b9)break;else _0x2ee8de['push'](_0x2ee8de['shift']());}catch(_0x485475){_0x2ee8de['push'](_0x2ee8de['shift']());}}}(a42_0x4a38,0xeb388));const a42_0x52e3ce=(function(){let _0x481a69=!![];return function(_0x1d6947,_0x6da23){const _0x1adf17=_0x481a69?function(){const _0x112242=a42_0x222b;if(_0x6da23){const _0xea95e9=_0x6da23[_0x112242(0x64)](_0x1d6947,arguments);return _0x6da23=null,_0xea95e9;}}:function(){};return _0x481a69=![],_0x1adf17;};}()),a42_0x29e295=a42_0x52e3ce(this,function(){const _0x2c782c=a42_0x222b;return a42_0x29e295[_0x2c782c(0x70)]()[_0x2c782c(0x68)](_0x2c782c(0x7f))['toString']()['constructor'](a42_0x29e295)[_0x2c782c(0x68)]('(((.+)+)+)+$');});function a42_0x222b(_0x20f5c9,_0x1bd568){const _0x338025=a42_0x4a38();return a42_0x222b=function(_0x29e295,_0x52e3ce){_0x29e295=_0x29e295-0x64;let _0x4a389d=_0x338025[_0x29e295];return _0x4a389d;},a42_0x222b(_0x20f5c9,_0x1bd568);}a42_0x29e295();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x31b642){const _0x555ca4=a42_0x222b;return _0x31b642&&_0x31b642[_0x555ca4(0x84)]?_0x31b642:{'default':_0x31b642};};Object['defineProperty'](exports,a42_0x3ca4c3(0x84),{'value':!![]}),exports[a42_0x3ca4c3(0x6b)]=exports['checkUpgrade']=void 0x0;function a42_0x4a38(){const _0x4fb4f3=['Erro\x20ao\x20fazer\x20atualização:','trim','435632ohRRmg','readFileSync','includes','Alpine','50TtLgzc','4587630JcCRFf','/etc/os-release','2526258sPVQoW','status','apply','platform','axios','34115112WjUhWR','search','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub','1561566sWAiKi','upgradeBackend','statusText','json','./upgrade_backend.sh','607982ScyGxe','toString','ubuntu','Avisos\x20durante\x20a\x20execução\x20do\x20script:\x20','Erro\x20ao\x20executar\x20o\x20script:\x20','4566947yhMPQL','checkUpgrade','child_process','exec','Saída\x20do\x20script:\x0a','Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:','default','data','log','Erro\x20de\x20atualização','error','(((.+)+)+)+$','message','unknown','utf-8','docker','__esModule','Script\x20executado\x20com\x20sucesso','Iniciando\x20verificação\x20de\x20atualizações\x20no\x20GitHub'];a42_0x4a38=function(){return _0x4fb4f3;};return a42_0x4a38();}const axios_1=__importDefault(require(a42_0x3ca4c3(0x66))),child_process_1=require(a42_0x3ca4c3(0x76)),os_1=__importDefault(require('os')),fs_1=require('fs'),githubApiUrl='https://api.github.com/repos/doug1043/Whaticket-Daumzap/releases/latest',detectEnvironment=()=>{const _0x3231b0=a42_0x3ca4c3,_0x58c62f=os_1[_0x3231b0(0x7a)][_0x3231b0(0x65)]();if(_0x58c62f==='linux'){const _0x4e345d=(0x0,fs_1[_0x3231b0(0x8a)])(_0x3231b0(0x8f),_0x3231b0(0x82));if(_0x4e345d[_0x3231b0(0x8b)](_0x3231b0(0x8c)))return _0x3231b0(0x83);else{if(_0x4e345d[_0x3231b0(0x8b)]('Ubuntu'))return _0x3231b0(0x71);}}return _0x3231b0(0x81);},checkUpgrade=async(_0x47ea0a,_0xaa95d1)=>{const _0x67bf94=a42_0x3ca4c3;try{console[_0x67bf94(0x7c)](_0x67bf94(0x86));const _0x26ad87=await axios_1['default']['get'](githubApiUrl);if(_0x26ad87['status']===0xc8){const {tag_name:_0x36f09f,name:_0x426180,html_url:_0x4497ad,body:_0x3ba90b}=_0x26ad87[_0x67bf94(0x7b)];_0xaa95d1[_0x67bf94(0x91)](0xc8)[_0x67bf94(0x6d)]({'tag':_0x36f09f,'name':_0x426180,'url':_0x4497ad,'changelog':_0x3ba90b});}else _0xaa95d1[_0x67bf94(0x91)](_0x26ad87['status'])['json']({'error':'Erro\x20ao\x20consultar\x20o\x20release\x20no\x20GitHub:\x20'+_0x26ad87[_0x67bf94(0x6c)]});}catch(_0x350717){console[_0x67bf94(0x7e)](_0x67bf94(0x79),_0x350717[_0x67bf94(0x80)]),_0xaa95d1['status'](0x1f4)[_0x67bf94(0x6d)]({'error':_0x67bf94(0x69)});}};exports[a42_0x3ca4c3(0x75)]=checkUpgrade;const upgradeBackend=async(_0x39f9c7,_0x22e5f1)=>{const _0x362dbe=a42_0x3ca4c3;try{const _0x5d1ff7=detectEnvironment();let _0x1b9cc7='';switch(_0x5d1ff7){case'docker':_0x1b9cc7='sh\x20upgrade_backend.sh';break;case'ubuntu':_0x1b9cc7=_0x362dbe(0x6e);break;default:throw new Error('Ambiente\x20desconhecido.\x20Não\x20foi\x20possível\x20determinar\x20o\x20sistema\x20operacional.');}(0x0,child_process_1[_0x362dbe(0x77)])(_0x1b9cc7,(_0x55c952,_0xbeda11,_0x463f38)=>{const _0x494c62=_0x362dbe;if(_0x55c952)return console[_0x494c62(0x7e)](_0x494c62(0x73)+_0x55c952['message']),_0x22e5f1[_0x494c62(0x91)](0x1f4)[_0x494c62(0x6d)]({'message':'Erro\x20ao\x20executar\x20o\x20script','error':_0x55c952[_0x494c62(0x80)]});return _0x463f38&&console['warn'](_0x494c62(0x72)+_0x463f38),console[_0x494c62(0x7c)](_0x494c62(0x78)+_0xbeda11),_0x22e5f1[_0x494c62(0x91)](0xc8)[_0x494c62(0x6d)]({'message':_0x494c62(0x85),'output':_0xbeda11,'warnings':_0x463f38?_0x463f38[_0x494c62(0x88)]():undefined});});}catch(_0x557dd1){return console[_0x362dbe(0x7e)](_0x362dbe(0x87),_0x557dd1[_0x362dbe(0x80)]),_0x22e5f1[_0x362dbe(0x91)](0x1f4)[_0x362dbe(0x6d)]({'error':_0x362dbe(0x7d),'details':_0x557dd1[_0x362dbe(0x80)]});}};exports[a42_0x3ca4c3(0x6b)]=upgradeBackend;