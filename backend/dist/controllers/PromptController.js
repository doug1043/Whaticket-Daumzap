const a28_0x37a224=a28_0x111b;(function(_0x42ac6c,_0x19bb5d){const _0x2df8d0=a28_0x111b,_0x523bea=_0x42ac6c();while(!![]){try{const _0x4cf8af=-parseInt(_0x2df8d0(0x189))/0x1*(parseInt(_0x2df8d0(0x19a))/0x2)+parseInt(_0x2df8d0(0x170))/0x3*(parseInt(_0x2df8d0(0x17f))/0x4)+-parseInt(_0x2df8d0(0x18c))/0x5+-parseInt(_0x2df8d0(0x17b))/0x6*(parseInt(_0x2df8d0(0x174))/0x7)+parseInt(_0x2df8d0(0x18e))/0x8+-parseInt(_0x2df8d0(0x179))/0x9+parseInt(_0x2df8d0(0x17a))/0xa;if(_0x4cf8af===_0x19bb5d)break;else _0x523bea['push'](_0x523bea['shift']());}catch(_0x5a34cf){_0x523bea['push'](_0x523bea['shift']());}}}(a28_0x239b,0xb2d2f));const a28_0x3d10a6=(function(){let _0x281e51=!![];return function(_0x5cecf0,_0x4a3236){const _0x30e185=_0x281e51?function(){const _0x5402d3=a28_0x111b;if(_0x4a3236){const _0x221ecd=_0x4a3236[_0x5402d3(0x16f)](_0x5cecf0,arguments);return _0x4a3236=null,_0x221ecd;}}:function(){};return _0x281e51=![],_0x30e185;};}()),a28_0x27fe88=a28_0x3d10a6(this,function(){const _0x2cc600=a28_0x111b;return a28_0x27fe88[_0x2cc600(0x190)]()[_0x2cc600(0x194)](_0x2cc600(0x17c))[_0x2cc600(0x190)]()[_0x2cc600(0x18d)](a28_0x27fe88)[_0x2cc600(0x194)](_0x2cc600(0x17c));});a28_0x27fe88();'use strict';var __importDefault=this&&this[a28_0x37a224(0x191)]||function(_0x51d559){const _0x3daa59=a28_0x37a224;return _0x51d559&&_0x51d559[_0x3daa59(0x183)]?_0x51d559:{'default':_0x51d559};};Object['defineProperty'](exports,a28_0x37a224(0x183),{'value':!![]}),exports[a28_0x37a224(0x187)]=exports['update']=exports['show']=exports[a28_0x37a224(0x188)]=exports[a28_0x37a224(0x16d)]=void 0x0;const socket_1=require('../libs/socket'),CreatePromptService_1=__importDefault(require('../services/PromptServices/CreatePromptService')),DeletePromptService_1=__importDefault(require(a28_0x37a224(0x171))),ListPromptsService_1=__importDefault(require('../services/PromptServices/ListPromptsService')),ShowPromptService_1=__importDefault(require('../services/PromptServices/ShowPromptService')),UpdatePromptService_1=__importDefault(require('../services/PromptServices/UpdatePromptService')),Whatsapp_1=__importDefault(require(a28_0x37a224(0x181))),jsonwebtoken_1=require(a28_0x37a224(0x175)),auth_1=__importDefault(require(a28_0x37a224(0x198))),index=async(_0x5a7352,_0x37d397)=>{const _0x53fcb0=a28_0x37a224,{pageNumber:_0x1b05b8,searchParam:_0x47607d}=_0x5a7352[_0x53fcb0(0x192)],_0x1c6d30=_0x5a7352[_0x53fcb0(0x185)][_0x53fcb0(0x176)],[,_0x5499ac]=_0x1c6d30[_0x53fcb0(0x186)]('\x20'),_0x456c9d=(0x0,jsonwebtoken_1[_0x53fcb0(0x18f)])(_0x5499ac,auth_1[_0x53fcb0(0x18a)]['secret']),{companyId:_0x426832}=_0x456c9d,{prompts:_0x4c12b9,count:_0xe94e2,hasMore:_0x3a9e95}=await(0x0,ListPromptsService_1[_0x53fcb0(0x18a)])({'searchParam':_0x47607d,'pageNumber':_0x1b05b8,'companyId':_0x426832});return _0x37d397[_0x53fcb0(0x17d)](0xc8)['json']({'prompts':_0x4c12b9,'count':_0xe94e2,'hasMore':_0x3a9e95});};exports[a28_0x37a224(0x16d)]=index;const store=async(_0x442a67,_0x5e48c6)=>{const _0x324785=a28_0x37a224,_0x481faa=_0x442a67['headers'][_0x324785(0x176)],[,_0x501845]=_0x481faa[_0x324785(0x186)]('\x20'),_0x179a57=(0x0,jsonwebtoken_1['verify'])(_0x501845,auth_1[_0x324785(0x18a)][_0x324785(0x17e)]),{companyId:_0x1e15e0}=_0x179a57,{name:_0x2d446d,apiKey:_0x151e0a,prompt:_0x47f599,maxTokens:_0x292627,temperature:_0x2bdb55,promptTokens:_0x5b388f,completionTokens:_0x40077e,totalTokens:_0x3e904f,queueId:_0x5a874b,maxMessages:_0x580b32,voice:_0x4654ad,voiceKey:_0x4a9957,voiceRegion:_0x551201}=_0x442a67[_0x324785(0x199)],_0x4bedff=await(0x0,CreatePromptService_1[_0x324785(0x18a)])({'name':_0x2d446d,'apiKey':_0x151e0a,'prompt':_0x47f599,'maxTokens':_0x292627,'temperature':_0x2bdb55,'promptTokens':_0x5b388f,'completionTokens':_0x40077e,'totalTokens':_0x3e904f,'queueId':_0x5a874b,'maxMessages':_0x580b32,'companyId':_0x1e15e0,'voice':_0x4654ad,'voiceKey':_0x4a9957,'voiceRegion':_0x551201}),_0x1b453d=(0x0,socket_1['getIO'])();return _0x1b453d['to'](_0x324785(0x16e)+_0x1e15e0+_0x324785(0x172))['emit'](_0x324785(0x193),{'action':_0x324785(0x177),'prompt':_0x4bedff}),_0x5e48c6[_0x324785(0x17d)](0xc8)[_0x324785(0x196)](_0x4bedff);};exports['store']=store;const show=async(_0x2894c4,_0xfeafff)=>{const _0x343e8c=a28_0x37a224,{promptId:_0x3c69ea}=_0x2894c4[_0x343e8c(0x195)],_0x46e91a=_0x2894c4['headers'][_0x343e8c(0x176)],[,_0x421425]=_0x46e91a[_0x343e8c(0x186)]('\x20'),_0x1abf78=(0x0,jsonwebtoken_1['verify'])(_0x421425,auth_1[_0x343e8c(0x18a)][_0x343e8c(0x17e)]),{companyId:_0x388b19}=_0x1abf78,_0x1cf17e=await(0x0,ShowPromptService_1[_0x343e8c(0x18a)])({'promptId':_0x3c69ea,'companyId':_0x388b19});return _0xfeafff[_0x343e8c(0x17d)](0xc8)['json'](_0x1cf17e);};function a28_0x111b(_0x3317b8,_0x528c44){const _0x7d7975=a28_0x239b();return a28_0x111b=function(_0x27fe88,_0x3d10a6){_0x27fe88=_0x27fe88-0x16d;let _0x239b36=_0x7d7975[_0x27fe88];return _0x239b36;},a28_0x111b(_0x3317b8,_0x528c44);}exports[a28_0x37a224(0x180)]=show;const update=async(_0x416ad3,_0xd9df04)=>{const _0x461569=a28_0x37a224,{promptId:_0x4bbac8}=_0x416ad3['params'],_0x34361e=_0x416ad3[_0x461569(0x199)],_0x157152=_0x416ad3['headers']['authorization'],[,_0x5ce29f]=_0x157152[_0x461569(0x186)]('\x20'),_0x422dc8=(0x0,jsonwebtoken_1[_0x461569(0x18f)])(_0x5ce29f,auth_1[_0x461569(0x18a)][_0x461569(0x17e)]),{companyId:_0x9a4772}=_0x422dc8,_0x3f9750=await(0x0,UpdatePromptService_1['default'])({'promptData':_0x34361e,'promptId':_0x4bbac8,'companyId':_0x9a4772}),_0x186acb=(0x0,socket_1[_0x461569(0x184)])();return _0x186acb[_0x461569(0x182)](_0x461569(0x193),{'action':_0x461569(0x177),'prompt':_0x3f9750}),_0xd9df04[_0x461569(0x17d)](0xc8)[_0x461569(0x196)](_0x3f9750);};exports[a28_0x37a224(0x177)]=update;function a28_0x239b(){const _0x4b8c5c=['secret','18548XAkcVn','show','../models/Whatsapp','emit','__esModule','getIO','headers','split','remove','store','1397973KJnecQ','default','Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado\x20nas\x20conexões\x20Whatsapp!','5345085HFvLpb','constructor','4069816XwSwmQ','verify','toString','__importDefault','query','prompt','search','params','json','delete','../config/auth','body','2FgvFWE','index','company-','apply','669vKiCfB','../services/PromptServices/DeletePromptService','-mainchannel','findAndCountAll','7LlSJDk','jsonwebtoken','authorization','update','Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado!','10803501lbwSTe','40625700jNuBpS','7233036mFDUcO','(((.+)+)+)+$','status'];a28_0x239b=function(){return _0x4b8c5c;};return a28_0x239b();}const remove=async(_0x19cbaf,_0x17cf2a)=>{const _0x43f136=a28_0x37a224,{promptId:_0x153c27}=_0x19cbaf[_0x43f136(0x195)],_0x16fb5d=_0x19cbaf[_0x43f136(0x185)][_0x43f136(0x176)],[,_0x36e7d3]=_0x16fb5d[_0x43f136(0x186)]('\x20'),_0x571f57=(0x0,jsonwebtoken_1[_0x43f136(0x18f)])(_0x36e7d3,auth_1['default']['secret']),{companyId:_0xe5f5b2}=_0x571f57;try{const {count:_0x22e108}=await Whatsapp_1['default'][_0x43f136(0x173)]({'where':{'promptId':+_0x153c27,'companyId':_0xe5f5b2}});if(_0x22e108>0x0)return _0x17cf2a[_0x43f136(0x17d)](0xc8)[_0x43f136(0x196)]({'message':_0x43f136(0x18b)});await(0x0,DeletePromptService_1[_0x43f136(0x18a)])(_0x153c27,_0xe5f5b2);const _0x2fd117=(0x0,socket_1[_0x43f136(0x184)])();return _0x2fd117[_0x43f136(0x182)](_0x43f136(0x193),{'action':_0x43f136(0x197),'intelligenceId':+_0x153c27}),_0x17cf2a['status'](0xc8)[_0x43f136(0x196)]({'message':'Prompt\x20deleted'});}catch(_0x35d475){return _0x17cf2a[_0x43f136(0x17d)](0x1f4)[_0x43f136(0x196)]({'message':_0x43f136(0x178)});}};exports[a28_0x37a224(0x187)]=remove;