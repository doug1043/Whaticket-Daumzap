const a28_0x1dbc39=a28_0x5e26;(function(_0x1aec15,_0x2b8b71){const _0x4d7cc3=a28_0x5e26,_0x2d1ab2=_0x1aec15();while(!![]){try{const _0x51f733=parseInt(_0x4d7cc3(0x18e))/0x1+parseInt(_0x4d7cc3(0x184))/0x2+parseInt(_0x4d7cc3(0x187))/0x3+parseInt(_0x4d7cc3(0x18f))/0x4+-parseInt(_0x4d7cc3(0x191))/0x5*(parseInt(_0x4d7cc3(0x190))/0x6)+parseInt(_0x4d7cc3(0x179))/0x7+-parseInt(_0x4d7cc3(0x186))/0x8;if(_0x51f733===_0x2b8b71)break;else _0x2d1ab2['push'](_0x2d1ab2['shift']());}catch(_0x5b0d57){_0x2d1ab2['push'](_0x2d1ab2['shift']());}}}(a28_0x5e22,0x8bf90));const a28_0x5a27a9=(function(){let _0x6f6765=!![];return function(_0xf166a7,_0x400bdf){const _0x103739=_0x6f6765?function(){if(_0x400bdf){const _0x5ca15f=_0x400bdf['apply'](_0xf166a7,arguments);return _0x400bdf=null,_0x5ca15f;}}:function(){};return _0x6f6765=![],_0x103739;};}()),a28_0x2ea471=a28_0x5a27a9(this,function(){const _0x41a731=a28_0x5e26;return a28_0x2ea471[_0x41a731(0x18c)]()[_0x41a731(0x188)](_0x41a731(0x175))[_0x41a731(0x18c)]()['constructor'](a28_0x2ea471)[_0x41a731(0x188)](_0x41a731(0x175));});a28_0x2ea471();'use strict';var __importDefault=this&&this[a28_0x1dbc39(0x18d)]||function(_0x1b5715){const _0x2ca1ba=a28_0x1dbc39;return _0x1b5715&&_0x1b5715[_0x2ca1ba(0x189)]?_0x1b5715:{'default':_0x1b5715};};Object[a28_0x1dbc39(0x193)](exports,'__esModule',{'value':!![]}),exports['remove']=exports[a28_0x1dbc39(0x17e)]=exports[a28_0x1dbc39(0x195)]=exports[a28_0x1dbc39(0x17d)]=exports[a28_0x1dbc39(0x183)]=void 0x0;const socket_1=require('../libs/socket'),CreatePromptService_1=__importDefault(require(a28_0x1dbc39(0x17f))),DeletePromptService_1=__importDefault(require(a28_0x1dbc39(0x198))),ListPromptsService_1=__importDefault(require(a28_0x1dbc39(0x17c))),ShowPromptService_1=__importDefault(require(a28_0x1dbc39(0x177))),UpdatePromptService_1=__importDefault(require('../services/PromptServices/UpdatePromptService')),Whatsapp_1=__importDefault(require('../models/Whatsapp')),jsonwebtoken_1=require('jsonwebtoken'),auth_1=__importDefault(require('../config/auth')),index=async(_0x26e045,_0x19bb2d)=>{const _0x4cc9b3=a28_0x1dbc39,{pageNumber:_0x1375af,searchParam:_0x2d11b4}=_0x26e045[_0x4cc9b3(0x199)],_0x87f340=_0x26e045[_0x4cc9b3(0x19c)]['authorization'],[,_0x2d2e32]=_0x87f340[_0x4cc9b3(0x18a)]('\x20'),_0xdc36c3=(0x0,jsonwebtoken_1[_0x4cc9b3(0x182)])(_0x2d2e32,auth_1[_0x4cc9b3(0x19a)]['secret']),{companyId:_0x1da982}=_0xdc36c3,{prompts:_0x3d1ab4,count:_0x170218,hasMore:_0x242104}=await(0x0,ListPromptsService_1[_0x4cc9b3(0x19a)])({'searchParam':_0x2d11b4,'pageNumber':_0x1375af,'companyId':_0x1da982});return _0x19bb2d[_0x4cc9b3(0x18b)](0xc8)['json']({'prompts':_0x3d1ab4,'count':_0x170218,'hasMore':_0x242104});};function a28_0x5e26(_0x669f18,_0x105401){const _0x414158=a28_0x5e22();return a28_0x5e26=function(_0x2ea471,_0x5a27a9){_0x2ea471=_0x2ea471-0x173;let _0x5e22a8=_0x414158[_0x2ea471];return _0x5e22a8;},a28_0x5e26(_0x669f18,_0x105401);}function a28_0x5e22(){const _0x12718c=['../services/PromptServices/ListPromptsService','store','update','../services/PromptServices/CreatePromptService','json','authorization','verify','index','1530374wmromx','body','17151592IJlqit','3202656ugbCOX','search','__esModule','split','status','toString','__importDefault','650332IhPzBM','4130720nAycZg','60FiOpqF','530085ppfhPi','secret','defineProperty','Prompt\x20deleted','show','Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado!','delete','../services/PromptServices/DeletePromptService','query','default','getIO','headers','params','-mainchannel','(((.+)+)+)+$','findAndCountAll','../services/PromptServices/ShowPromptService','remove','1831872EhcMoJ','prompt','emit'];a28_0x5e22=function(){return _0x12718c;};return a28_0x5e22();}exports['index']=index;const store=async(_0x839c1d,_0x5e5347)=>{const _0x2a7273=a28_0x1dbc39,_0x2cc8b2=_0x839c1d[_0x2a7273(0x19c)][_0x2a7273(0x181)],[,_0x53198e]=_0x2cc8b2[_0x2a7273(0x18a)]('\x20'),_0xb4f9da=(0x0,jsonwebtoken_1[_0x2a7273(0x182)])(_0x53198e,auth_1[_0x2a7273(0x19a)][_0x2a7273(0x192)]),{companyId:_0x41dfa5}=_0xb4f9da,{name:_0x74cac,apiKey:_0x16ed6b,prompt:_0x29a5c9,maxTokens:_0x454e0e,temperature:_0x18bff3,promptTokens:_0x24a047,completionTokens:_0x206ddf,totalTokens:_0x2ad072,queueId:_0x297242,maxMessages:_0x5d3053,voice:_0x7733fd,voiceKey:_0x13db87,voiceRegion:_0x2ee302}=_0x839c1d[_0x2a7273(0x185)],_0x16f5de=await(0x0,CreatePromptService_1['default'])({'name':_0x74cac,'apiKey':_0x16ed6b,'prompt':_0x29a5c9,'maxTokens':_0x454e0e,'temperature':_0x18bff3,'promptTokens':_0x24a047,'completionTokens':_0x206ddf,'totalTokens':_0x2ad072,'queueId':_0x297242,'maxMessages':_0x5d3053,'companyId':_0x41dfa5,'voice':_0x7733fd,'voiceKey':_0x13db87,'voiceRegion':_0x2ee302}),_0x58d2f7=(0x0,socket_1[_0x2a7273(0x19b)])();return _0x58d2f7['to']('company-'+_0x41dfa5+_0x2a7273(0x174))[_0x2a7273(0x17b)]('prompt',{'action':'update','prompt':_0x16f5de}),_0x5e5347['status'](0xc8)[_0x2a7273(0x180)](_0x16f5de);};exports[a28_0x1dbc39(0x17d)]=store;const show=async(_0x32e237,_0x190bc4)=>{const _0x5b7189=a28_0x1dbc39,{promptId:_0x367e2c}=_0x32e237[_0x5b7189(0x173)],_0x375bdf=_0x32e237['headers'][_0x5b7189(0x181)],[,_0x187985]=_0x375bdf[_0x5b7189(0x18a)]('\x20'),_0x5f1e91=(0x0,jsonwebtoken_1[_0x5b7189(0x182)])(_0x187985,auth_1['default'][_0x5b7189(0x192)]),{companyId:_0x57b55d}=_0x5f1e91,_0x77616=await(0x0,ShowPromptService_1[_0x5b7189(0x19a)])({'promptId':_0x367e2c,'companyId':_0x57b55d});return _0x190bc4['status'](0xc8)[_0x5b7189(0x180)](_0x77616);};exports[a28_0x1dbc39(0x195)]=show;const update=async(_0x2bf97e,_0x40c5ac)=>{const _0x21317c=a28_0x1dbc39,{promptId:_0x20dbec}=_0x2bf97e[_0x21317c(0x173)],_0x4926aa=_0x2bf97e['body'],_0x289f0f=_0x2bf97e['headers']['authorization'],[,_0x18a0a7]=_0x289f0f['split']('\x20'),_0x3ca9d7=(0x0,jsonwebtoken_1[_0x21317c(0x182)])(_0x18a0a7,auth_1['default']['secret']),{companyId:_0x54b3cb}=_0x3ca9d7,_0xcff1f2=await(0x0,UpdatePromptService_1[_0x21317c(0x19a)])({'promptData':_0x4926aa,'promptId':_0x20dbec,'companyId':_0x54b3cb}),_0x334e81=(0x0,socket_1['getIO'])();return _0x334e81[_0x21317c(0x17b)](_0x21317c(0x17a),{'action':_0x21317c(0x17e),'prompt':_0xcff1f2}),_0x40c5ac['status'](0xc8)[_0x21317c(0x180)](_0xcff1f2);};exports[a28_0x1dbc39(0x17e)]=update;const remove=async(_0x1baf4c,_0x53576b)=>{const _0x1e447b=a28_0x1dbc39,{promptId:_0xaa967c}=_0x1baf4c[_0x1e447b(0x173)],_0x2fd7f9=_0x1baf4c['headers']['authorization'],[,_0x290128]=_0x2fd7f9[_0x1e447b(0x18a)]('\x20'),_0x24b24f=(0x0,jsonwebtoken_1[_0x1e447b(0x182)])(_0x290128,auth_1['default']['secret']),{companyId:_0x2ab4a2}=_0x24b24f;try{const {count:_0x14fe42}=await Whatsapp_1[_0x1e447b(0x19a)][_0x1e447b(0x176)]({'where':{'promptId':+_0xaa967c,'companyId':_0x2ab4a2}});if(_0x14fe42>0x0)return _0x53576b[_0x1e447b(0x18b)](0xc8)[_0x1e447b(0x180)]({'message':'Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado\x20nas\x20conexões\x20Whatsapp!'});await(0x0,DeletePromptService_1[_0x1e447b(0x19a)])(_0xaa967c,_0x2ab4a2);const _0x40f3ac=(0x0,socket_1[_0x1e447b(0x19b)])();return _0x40f3ac[_0x1e447b(0x17b)](_0x1e447b(0x17a),{'action':_0x1e447b(0x197),'intelligenceId':+_0xaa967c}),_0x53576b[_0x1e447b(0x18b)](0xc8)[_0x1e447b(0x180)]({'message':_0x1e447b(0x194)});}catch(_0x15f299){return _0x53576b[_0x1e447b(0x18b)](0x1f4)['json']({'message':_0x1e447b(0x196)});}};exports[a28_0x1dbc39(0x178)]=remove;