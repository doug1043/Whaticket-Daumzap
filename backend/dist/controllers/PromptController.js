const a28_0x4e4e2d=a28_0x2e9a;function a28_0x2e9a(_0x5ecb55,_0x4aecf6){const _0x4180ba=a28_0x2cf3();return a28_0x2e9a=function(_0x58fe62,_0x58e8ab){_0x58fe62=_0x58fe62-0x175;let _0x2cf3d8=_0x4180ba[_0x58fe62];return _0x2cf3d8;},a28_0x2e9a(_0x5ecb55,_0x4aecf6);}(function(_0x3758df,_0x116eba){const _0x3461cf=a28_0x2e9a,_0x507a32=_0x3758df();while(!![]){try{const _0x432529=parseInt(_0x3461cf(0x17f))/0x1*(-parseInt(_0x3461cf(0x197))/0x2)+parseInt(_0x3461cf(0x1a0))/0x3*(-parseInt(_0x3461cf(0x191))/0x4)+-parseInt(_0x3461cf(0x18e))/0x5+parseInt(_0x3461cf(0x194))/0x6+parseInt(_0x3461cf(0x196))/0x7+parseInt(_0x3461cf(0x178))/0x8+parseInt(_0x3461cf(0x188))/0x9;if(_0x432529===_0x116eba)break;else _0x507a32['push'](_0x507a32['shift']());}catch(_0x43f301){_0x507a32['push'](_0x507a32['shift']());}}}(a28_0x2cf3,0xb5c7e));const a28_0x58e8ab=(function(){let _0x24c3ab=!![];return function(_0x1d0ae2,_0x5eec8d){const _0x293675=_0x24c3ab?function(){const _0x26c017=a28_0x2e9a;if(_0x5eec8d){const _0x5e8466=_0x5eec8d[_0x26c017(0x19f)](_0x1d0ae2,arguments);return _0x5eec8d=null,_0x5e8466;}}:function(){};return _0x24c3ab=![],_0x293675;};}()),a28_0x58fe62=a28_0x58e8ab(this,function(){const _0x236bb6=a28_0x2e9a;return a28_0x58fe62[_0x236bb6(0x19d)]()[_0x236bb6(0x183)](_0x236bb6(0x19e))[_0x236bb6(0x19d)]()[_0x236bb6(0x186)](a28_0x58fe62)['search'](_0x236bb6(0x19e));});a28_0x58fe62();'use strict';var __importDefault=this&&this[a28_0x4e4e2d(0x19a)]||function(_0x250a12){const _0x63ffe1=a28_0x4e4e2d;return _0x250a12&&_0x250a12[_0x63ffe1(0x1a1)]?_0x250a12:{'default':_0x250a12};};Object[a28_0x4e4e2d(0x192)](exports,'__esModule',{'value':!![]}),exports[a28_0x4e4e2d(0x180)]=exports[a28_0x4e4e2d(0x184)]=exports[a28_0x4e4e2d(0x199)]=exports[a28_0x4e4e2d(0x18d)]=exports[a28_0x4e4e2d(0x189)]=void 0x0;const socket_1=require(a28_0x4e4e2d(0x182)),CreatePromptService_1=__importDefault(require(a28_0x4e4e2d(0x17d))),DeletePromptService_1=__importDefault(require('../services/PromptServices/DeletePromptService')),ListPromptsService_1=__importDefault(require('../services/PromptServices/ListPromptsService')),ShowPromptService_1=__importDefault(require(a28_0x4e4e2d(0x181))),UpdatePromptService_1=__importDefault(require(a28_0x4e4e2d(0x175))),Whatsapp_1=__importDefault(require('../models/Whatsapp')),jsonwebtoken_1=require(a28_0x4e4e2d(0x19b)),auth_1=__importDefault(require('../config/auth')),index=async(_0x17c1a1,_0x2c43f0)=>{const _0x4663f4=a28_0x4e4e2d,{pageNumber:_0x40d06c,searchParam:_0x199ec3}=_0x17c1a1[_0x4663f4(0x17b)],_0x49a7e2=_0x17c1a1[_0x4663f4(0x177)][_0x4663f4(0x176)],[,_0x219423]=_0x49a7e2[_0x4663f4(0x18f)]('\x20'),_0x54b8bd=(0x0,jsonwebtoken_1['verify'])(_0x219423,auth_1[_0x4663f4(0x19c)][_0x4663f4(0x18c)]),{companyId:_0x4c6e17}=_0x54b8bd,{prompts:_0x183cc7,count:_0x4002ec,hasMore:_0x2f8de2}=await(0x0,ListPromptsService_1[_0x4663f4(0x19c)])({'searchParam':_0x199ec3,'pageNumber':_0x40d06c,'companyId':_0x4c6e17});return _0x2c43f0[_0x4663f4(0x17e)](0xc8)[_0x4663f4(0x17a)]({'prompts':_0x183cc7,'count':_0x4002ec,'hasMore':_0x2f8de2});};exports['index']=index;const store=async(_0x331cd4,_0x193301)=>{const _0xf40d66=a28_0x4e4e2d,_0xdc3d34=_0x331cd4['headers'][_0xf40d66(0x176)],[,_0x125f1b]=_0xdc3d34['split']('\x20'),_0x159275=(0x0,jsonwebtoken_1[_0xf40d66(0x190)])(_0x125f1b,auth_1[_0xf40d66(0x19c)][_0xf40d66(0x18c)]),{companyId:_0x26f68f}=_0x159275,{name:_0x38ef5e,apiKey:_0x3b3097,prompt:_0x3fb016,maxTokens:_0x6dc794,temperature:_0x480f66,promptTokens:_0x56ce9e,completionTokens:_0x29b99c,totalTokens:_0x42483b,queueId:_0x17582c,maxMessages:_0x1f4413,voice:_0x37e269,voiceKey:_0x57e7ab,voiceRegion:_0x163084}=_0x331cd4[_0xf40d66(0x179)],_0xc8222c=await(0x0,CreatePromptService_1[_0xf40d66(0x19c)])({'name':_0x38ef5e,'apiKey':_0x3b3097,'prompt':_0x3fb016,'maxTokens':_0x6dc794,'temperature':_0x480f66,'promptTokens':_0x56ce9e,'completionTokens':_0x29b99c,'totalTokens':_0x42483b,'queueId':_0x17582c,'maxMessages':_0x1f4413,'companyId':_0x26f68f,'voice':_0x37e269,'voiceKey':_0x57e7ab,'voiceRegion':_0x163084}),_0x47993d=(0x0,socket_1[_0xf40d66(0x193)])();return _0x47993d['to'](_0xf40d66(0x18a)+_0x26f68f+'-mainchannel')[_0xf40d66(0x187)](_0xf40d66(0x195),{'action':_0xf40d66(0x184),'prompt':_0xc8222c}),_0x193301[_0xf40d66(0x17e)](0xc8)[_0xf40d66(0x17a)](_0xc8222c);};function a28_0x2cf3(){const _0x1b076f=['../services/PromptServices/UpdatePromptService','authorization','headers','1633808eCqXXI','body','json','query','delete','../services/PromptServices/CreatePromptService','status','1rrxmBm','remove','../services/PromptServices/ShowPromptService','../libs/socket','search','update','params','constructor','emit','19121949eWnWfe','index','company-','findAndCountAll','secret','store','5734995SRnoKM','split','verify','4BUwrtU','defineProperty','getIO','3028272PEznmI','prompt','4642092ncfrWA','775322AtxGMa','Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado\x20nas\x20conexões\x20Whatsapp!','show','__importDefault','jsonwebtoken','default','toString','(((.+)+)+)+$','apply','3652563zRMhiO','__esModule'];a28_0x2cf3=function(){return _0x1b076f;};return a28_0x2cf3();}exports['store']=store;const show=async(_0x3dcd9a,_0x1ac800)=>{const _0x37aab0=a28_0x4e4e2d,{promptId:_0x8b0d5b}=_0x3dcd9a['params'],_0x3ed7f2=_0x3dcd9a[_0x37aab0(0x177)][_0x37aab0(0x176)],[,_0x413405]=_0x3ed7f2[_0x37aab0(0x18f)]('\x20'),_0x55630b=(0x0,jsonwebtoken_1[_0x37aab0(0x190)])(_0x413405,auth_1['default'][_0x37aab0(0x18c)]),{companyId:_0x35aaa7}=_0x55630b,_0x4dfbb4=await(0x0,ShowPromptService_1[_0x37aab0(0x19c)])({'promptId':_0x8b0d5b,'companyId':_0x35aaa7});return _0x1ac800[_0x37aab0(0x17e)](0xc8)[_0x37aab0(0x17a)](_0x4dfbb4);};exports[a28_0x4e4e2d(0x199)]=show;const update=async(_0x16ebe0,_0xec26b0)=>{const _0x37d55b=a28_0x4e4e2d,{promptId:_0x37711a}=_0x16ebe0[_0x37d55b(0x185)],_0xc6d363=_0x16ebe0[_0x37d55b(0x179)],_0x6c2fdc=_0x16ebe0[_0x37d55b(0x177)][_0x37d55b(0x176)],[,_0x5cee89]=_0x6c2fdc['split']('\x20'),_0x19cc37=(0x0,jsonwebtoken_1['verify'])(_0x5cee89,auth_1[_0x37d55b(0x19c)][_0x37d55b(0x18c)]),{companyId:_0x3a4ba8}=_0x19cc37,_0x5f1efe=await(0x0,UpdatePromptService_1['default'])({'promptData':_0xc6d363,'promptId':_0x37711a,'companyId':_0x3a4ba8}),_0x269ec3=(0x0,socket_1[_0x37d55b(0x193)])();return _0x269ec3[_0x37d55b(0x187)](_0x37d55b(0x195),{'action':_0x37d55b(0x184),'prompt':_0x5f1efe}),_0xec26b0['status'](0xc8)['json'](_0x5f1efe);};exports['update']=update;const remove=async(_0x462677,_0x488905)=>{const _0x7b02ea=a28_0x4e4e2d,{promptId:_0x5bb1ba}=_0x462677[_0x7b02ea(0x185)],_0x1f8aef=_0x462677[_0x7b02ea(0x177)][_0x7b02ea(0x176)],[,_0x11fe61]=_0x1f8aef[_0x7b02ea(0x18f)]('\x20'),_0x55aa41=(0x0,jsonwebtoken_1[_0x7b02ea(0x190)])(_0x11fe61,auth_1[_0x7b02ea(0x19c)][_0x7b02ea(0x18c)]),{companyId:_0xccd464}=_0x55aa41;try{const {count:_0x1483f0}=await Whatsapp_1[_0x7b02ea(0x19c)][_0x7b02ea(0x18b)]({'where':{'promptId':+_0x5bb1ba,'companyId':_0xccd464}});if(_0x1483f0>0x0)return _0x488905[_0x7b02ea(0x17e)](0xc8)[_0x7b02ea(0x17a)]({'message':_0x7b02ea(0x198)});await(0x0,DeletePromptService_1['default'])(_0x5bb1ba,_0xccd464);const _0xa19cc1=(0x0,socket_1[_0x7b02ea(0x193)])();return _0xa19cc1[_0x7b02ea(0x187)](_0x7b02ea(0x195),{'action':_0x7b02ea(0x17c),'intelligenceId':+_0x5bb1ba}),_0x488905['status'](0xc8)[_0x7b02ea(0x17a)]({'message':'Prompt\x20deleted'});}catch(_0x547a2e){return _0x488905['status'](0x1f4)['json']({'message':'Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado!'});}};exports['remove']=remove;