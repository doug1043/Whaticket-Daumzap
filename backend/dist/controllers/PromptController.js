const a28_0x168bce=a28_0x1312;(function(_0x2c5b24,_0x5de269){const _0x27a59b=a28_0x1312,_0x21b4ad=_0x2c5b24();while(!![]){try{const _0xd2c64=parseInt(_0x27a59b(0x1ce))/0x1+parseInt(_0x27a59b(0x1b8))/0x2+parseInt(_0x27a59b(0x1a1))/0x3+-parseInt(_0x27a59b(0x1b9))/0x4+parseInt(_0x27a59b(0x1ba))/0x5*(-parseInt(_0x27a59b(0x1be))/0x6)+parseInt(_0x27a59b(0x1c2))/0x7+parseInt(_0x27a59b(0x1ab))/0x8*(parseInt(_0x27a59b(0x1ae))/0x9);if(_0xd2c64===_0x5de269)break;else _0x21b4ad['push'](_0x21b4ad['shift']());}catch(_0x1a6cc6){_0x21b4ad['push'](_0x21b4ad['shift']());}}}(a28_0x1ba1,0xe6b34));const a28_0x4cc1df=(function(){let _0x3cf4b4=!![];return function(_0x29ec43,_0x163397){const _0x2ebcdf=_0x3cf4b4?function(){if(_0x163397){const _0x5ca62b=_0x163397['apply'](_0x29ec43,arguments);return _0x163397=null,_0x5ca62b;}}:function(){};return _0x3cf4b4=![],_0x2ebcdf;};}()),a28_0x56ce72=a28_0x4cc1df(this,function(){const _0x1ebfc9=a28_0x1312;return a28_0x56ce72[_0x1ebfc9(0x1cb)]()[_0x1ebfc9(0x1b1)](_0x1ebfc9(0x1a4))[_0x1ebfc9(0x1cb)]()[_0x1ebfc9(0x1b6)](a28_0x56ce72)['search'](_0x1ebfc9(0x1a4));});a28_0x56ce72();function a28_0x1312(_0x3520a7,_0x44246f){const _0x142450=a28_0x1ba1();return a28_0x1312=function(_0x56ce72,_0x4cc1df){_0x56ce72=_0x56ce72-0x1a1;let _0x1ba13a=_0x142450[_0x56ce72];return _0x1ba13a;},a28_0x1312(_0x3520a7,_0x44246f);}function a28_0x1ba1(){const _0x59533b=['default','getIO','index','update','remove','headers','toString','query','../services/PromptServices/ShowPromptService','28478DrFrIY','622089uPaNrz','status','split','(((.+)+)+)+$','secret','verify','../services/PromptServices/ListPromptsService','__importDefault','__esModule','params','8tBzFmr','delete','jsonwebtoken','7420068NceEXo','../config/auth','../services/PromptServices/DeletePromptService','search','json','../models/Whatsapp','body','prompt','constructor','show','1245404FyPSsy','6059128tmEhVX','98885NSLLCk','emit','store','-mainchannel','336sraKjK','findAndCountAll','authorization','../services/PromptServices/UpdatePromptService','13189729uwHBXO','Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado\x20nas\x20conexões\x20Whatsapp!','../services/PromptServices/CreatePromptService'];a28_0x1ba1=function(){return _0x59533b;};return a28_0x1ba1();}'use strict';var __importDefault=this&&this[a28_0x168bce(0x1a8)]||function(_0x2775f9){const _0x51a1b8=a28_0x168bce;return _0x2775f9&&_0x2775f9[_0x51a1b8(0x1a9)]?_0x2775f9:{'default':_0x2775f9};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a28_0x168bce(0x1c9)]=exports['update']=exports[a28_0x168bce(0x1b7)]=exports['store']=exports[a28_0x168bce(0x1c7)]=void 0x0;const socket_1=require('../libs/socket'),CreatePromptService_1=__importDefault(require(a28_0x168bce(0x1c4))),DeletePromptService_1=__importDefault(require(a28_0x168bce(0x1b0))),ListPromptsService_1=__importDefault(require(a28_0x168bce(0x1a7))),ShowPromptService_1=__importDefault(require(a28_0x168bce(0x1cd))),UpdatePromptService_1=__importDefault(require(a28_0x168bce(0x1c1))),Whatsapp_1=__importDefault(require(a28_0x168bce(0x1b3))),jsonwebtoken_1=require(a28_0x168bce(0x1ad)),auth_1=__importDefault(require(a28_0x168bce(0x1af))),index=async(_0x41fa7e,_0x2c47da)=>{const _0x3da69a=a28_0x168bce,{pageNumber:_0x1c77a8,searchParam:_0x55e2e8}=_0x41fa7e[_0x3da69a(0x1cc)],_0x2b01b5=_0x41fa7e[_0x3da69a(0x1ca)]['authorization'],[,_0x239686]=_0x2b01b5['split']('\x20'),_0x4c37aa=(0x0,jsonwebtoken_1['verify'])(_0x239686,auth_1[_0x3da69a(0x1c5)][_0x3da69a(0x1a5)]),{companyId:_0x4104c7}=_0x4c37aa,{prompts:_0x2a5c27,count:_0x25031f,hasMore:_0x3eaa9b}=await(0x0,ListPromptsService_1['default'])({'searchParam':_0x55e2e8,'pageNumber':_0x1c77a8,'companyId':_0x4104c7});return _0x2c47da['status'](0xc8)[_0x3da69a(0x1b2)]({'prompts':_0x2a5c27,'count':_0x25031f,'hasMore':_0x3eaa9b});};exports['index']=index;const store=async(_0x54c760,_0x5eb903)=>{const _0x11e30c=a28_0x168bce,_0x3931fb=_0x54c760[_0x11e30c(0x1ca)][_0x11e30c(0x1c0)],[,_0x2ed4cb]=_0x3931fb[_0x11e30c(0x1a3)]('\x20'),_0x3d405e=(0x0,jsonwebtoken_1['verify'])(_0x2ed4cb,auth_1[_0x11e30c(0x1c5)]['secret']),{companyId:_0x27dcf0}=_0x3d405e,{name:_0x70373e,apiKey:_0x4b0963,prompt:_0x17e21a,maxTokens:_0x28f177,temperature:_0x5a7680,promptTokens:_0x5befbd,completionTokens:_0x39a3e2,totalTokens:_0x5420ac,queueId:_0xc8930d,maxMessages:_0x7331a,voice:_0x565ddb,voiceKey:_0x4ca891,voiceRegion:_0x16d7ad}=_0x54c760[_0x11e30c(0x1b4)],_0x54ccb5=await(0x0,CreatePromptService_1[_0x11e30c(0x1c5)])({'name':_0x70373e,'apiKey':_0x4b0963,'prompt':_0x17e21a,'maxTokens':_0x28f177,'temperature':_0x5a7680,'promptTokens':_0x5befbd,'completionTokens':_0x39a3e2,'totalTokens':_0x5420ac,'queueId':_0xc8930d,'maxMessages':_0x7331a,'companyId':_0x27dcf0,'voice':_0x565ddb,'voiceKey':_0x4ca891,'voiceRegion':_0x16d7ad}),_0x4fd2dd=(0x0,socket_1['getIO'])();return _0x4fd2dd['to']('company-'+_0x27dcf0+_0x11e30c(0x1bd))[_0x11e30c(0x1bb)]('prompt',{'action':'update','prompt':_0x54ccb5}),_0x5eb903[_0x11e30c(0x1a2)](0xc8)['json'](_0x54ccb5);};exports[a28_0x168bce(0x1bc)]=store;const show=async(_0x3fe948,_0x2b47b6)=>{const _0x34d8eb=a28_0x168bce,{promptId:_0x117255}=_0x3fe948[_0x34d8eb(0x1aa)],_0xd032b5=_0x3fe948[_0x34d8eb(0x1ca)][_0x34d8eb(0x1c0)],[,_0x3be306]=_0xd032b5[_0x34d8eb(0x1a3)]('\x20'),_0xd8e14a=(0x0,jsonwebtoken_1[_0x34d8eb(0x1a6)])(_0x3be306,auth_1[_0x34d8eb(0x1c5)][_0x34d8eb(0x1a5)]),{companyId:_0x311a1a}=_0xd8e14a,_0x23d7a5=await(0x0,ShowPromptService_1[_0x34d8eb(0x1c5)])({'promptId':_0x117255,'companyId':_0x311a1a});return _0x2b47b6['status'](0xc8)['json'](_0x23d7a5);};exports[a28_0x168bce(0x1b7)]=show;const update=async(_0x491e2c,_0x3e2ba5)=>{const _0x42322c=a28_0x168bce,{promptId:_0x48d67a}=_0x491e2c['params'],_0x172233=_0x491e2c[_0x42322c(0x1b4)],_0x44fdcb=_0x491e2c[_0x42322c(0x1ca)][_0x42322c(0x1c0)],[,_0xff2027]=_0x44fdcb[_0x42322c(0x1a3)]('\x20'),_0x18e4e9=(0x0,jsonwebtoken_1[_0x42322c(0x1a6)])(_0xff2027,auth_1[_0x42322c(0x1c5)][_0x42322c(0x1a5)]),{companyId:_0x530b6e}=_0x18e4e9,_0x22a114=await(0x0,UpdatePromptService_1[_0x42322c(0x1c5)])({'promptData':_0x172233,'promptId':_0x48d67a,'companyId':_0x530b6e}),_0x5e120c=(0x0,socket_1['getIO'])();return _0x5e120c[_0x42322c(0x1bb)](_0x42322c(0x1b5),{'action':_0x42322c(0x1c8),'prompt':_0x22a114}),_0x3e2ba5[_0x42322c(0x1a2)](0xc8)[_0x42322c(0x1b2)](_0x22a114);};exports['update']=update;const remove=async(_0x455776,_0x590725)=>{const _0x5569be=a28_0x168bce,{promptId:_0x83940e}=_0x455776[_0x5569be(0x1aa)],_0x9283d=_0x455776[_0x5569be(0x1ca)]['authorization'],[,_0x5e636b]=_0x9283d[_0x5569be(0x1a3)]('\x20'),_0x3644b1=(0x0,jsonwebtoken_1[_0x5569be(0x1a6)])(_0x5e636b,auth_1[_0x5569be(0x1c5)]['secret']),{companyId:_0x267ebc}=_0x3644b1;try{const {count:_0x1924aa}=await Whatsapp_1['default'][_0x5569be(0x1bf)]({'where':{'promptId':+_0x83940e,'companyId':_0x267ebc}});if(_0x1924aa>0x0)return _0x590725[_0x5569be(0x1a2)](0xc8)[_0x5569be(0x1b2)]({'message':_0x5569be(0x1c3)});await(0x0,DeletePromptService_1[_0x5569be(0x1c5)])(_0x83940e,_0x267ebc);const _0x2fd90c=(0x0,socket_1[_0x5569be(0x1c6)])();return _0x2fd90c[_0x5569be(0x1bb)](_0x5569be(0x1b5),{'action':_0x5569be(0x1ac),'intelligenceId':+_0x83940e}),_0x590725[_0x5569be(0x1a2)](0xc8)[_0x5569be(0x1b2)]({'message':'Prompt\x20deleted'});}catch(_0x304432){return _0x590725[_0x5569be(0x1a2)](0x1f4)[_0x5569be(0x1b2)]({'message':'Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado!'});}};exports['remove']=remove;