const a28_0xfca427=a28_0x13b1;(function(_0x55ba27,_0xc1f48f){const _0x5bba81=a28_0x13b1,_0x34f40c=_0x55ba27();while(!![]){try{const _0x475041=parseInt(_0x5bba81(0x139))/0x1*(parseInt(_0x5bba81(0x13b))/0x2)+-parseInt(_0x5bba81(0x152))/0x3+parseInt(_0x5bba81(0x127))/0x4+parseInt(_0x5bba81(0x159))/0x5*(parseInt(_0x5bba81(0x136))/0x6)+-parseInt(_0x5bba81(0x146))/0x7*(parseInt(_0x5bba81(0x145))/0x8)+-parseInt(_0x5bba81(0x13a))/0x9+-parseInt(_0x5bba81(0x150))/0xa*(-parseInt(_0x5bba81(0x155))/0xb);if(_0x475041===_0xc1f48f)break;else _0x34f40c['push'](_0x34f40c['shift']());}catch(_0x373f68){_0x34f40c['push'](_0x34f40c['shift']());}}}(a28_0xddd8,0x39c3f));const a28_0x484578=(function(){let _0x37eef9=!![];return function(_0x202c4f,_0x110812){const _0xde2820=_0x37eef9?function(){const _0x2f9285=a28_0x13b1;if(_0x110812){const _0x5e7bac=_0x110812[_0x2f9285(0x156)](_0x202c4f,arguments);return _0x110812=null,_0x5e7bac;}}:function(){};return _0x37eef9=![],_0xde2820;};}()),a28_0xdba031=a28_0x484578(this,function(){const _0x1bf58a=a28_0x13b1;return a28_0xdba031[_0x1bf58a(0x13e)]()[_0x1bf58a(0x15a)](_0x1bf58a(0x147))[_0x1bf58a(0x13e)]()[_0x1bf58a(0x154)](a28_0xdba031)['search'](_0x1bf58a(0x147));});a28_0xdba031();'use strict';var __importDefault=this&&this[a28_0xfca427(0x135)]||function(_0x7549f9){const _0x34da4f=a28_0xfca427;return _0x7549f9&&_0x7549f9[_0x34da4f(0x143)]?_0x7549f9:{'default':_0x7549f9};};Object[a28_0xfca427(0x14d)](exports,a28_0xfca427(0x143),{'value':!![]}),exports[a28_0xfca427(0x12e)]=exports[a28_0xfca427(0x151)]=exports[a28_0xfca427(0x14b)]=exports[a28_0xfca427(0x129)]=exports[a28_0xfca427(0x130)]=void 0x0;const socket_1=require(a28_0xfca427(0x134)),CreatePromptService_1=__importDefault(require(a28_0xfca427(0x153))),DeletePromptService_1=__importDefault(require(a28_0xfca427(0x13d))),ListPromptsService_1=__importDefault(require(a28_0xfca427(0x149))),ShowPromptService_1=__importDefault(require('../services/PromptServices/ShowPromptService')),UpdatePromptService_1=__importDefault(require(a28_0xfca427(0x12d))),Whatsapp_1=__importDefault(require(a28_0xfca427(0x142))),jsonwebtoken_1=require(a28_0xfca427(0x14f)),auth_1=__importDefault(require(a28_0xfca427(0x13f))),index=async(_0x151274,_0x4d9b06)=>{const _0xf2a6ce=a28_0xfca427,{pageNumber:_0x4ae143,searchParam:_0x1553a0}=_0x151274[_0xf2a6ce(0x140)],_0x58382a=_0x151274['headers'][_0xf2a6ce(0x14c)],[,_0x28450e]=_0x58382a[_0xf2a6ce(0x13c)]('\x20'),_0x278449=(0x0,jsonwebtoken_1['verify'])(_0x28450e,auth_1['default']['secret']),{companyId:_0x5a02dc}=_0x278449,{prompts:_0x11751f,count:_0x4c1dbc,hasMore:_0x184a0f}=await(0x0,ListPromptsService_1[_0xf2a6ce(0x128)])({'searchParam':_0x1553a0,'pageNumber':_0x4ae143,'companyId':_0x5a02dc});return _0x4d9b06[_0xf2a6ce(0x138)](0xc8)[_0xf2a6ce(0x148)]({'prompts':_0x11751f,'count':_0x4c1dbc,'hasMore':_0x184a0f});};exports['index']=index;function a28_0x13b1(_0x5abed2,_0x321858){const _0x56d3fe=a28_0xddd8();return a28_0x13b1=function(_0xdba031,_0x484578){_0xdba031=_0xdba031-0x127;let _0xddd887=_0x56d3fe[_0xdba031];return _0xddd887;},a28_0x13b1(_0x5abed2,_0x321858);}function a28_0xddd8(){const _0x2917cc=['../libs/socket','__importDefault','6Haptlj','secret','status','211YvxVaH','3215232UIIkZf','2732UDGufY','split','../services/PromptServices/DeletePromptService','toString','../config/auth','query','-mainchannel','../models/Whatsapp','__esModule','body','775696dqJFqK','7psmPnK','(((.+)+)+)+$','json','../services/PromptServices/ListPromptsService','params','show','authorization','defineProperty','verify','jsonwebtoken','73420QyMXth','update','1308702kGkWXq','../services/PromptServices/CreatePromptService','constructor','715acgSaB','apply','getIO','emit','517885xsHUos','search','1032072aHwcMW','default','store','headers','Prompt\x20deleted','findAndCountAll','../services/PromptServices/UpdatePromptService','remove','prompt','index','company-','Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado!','Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado\x20nas\x20conexões\x20Whatsapp!'];a28_0xddd8=function(){return _0x2917cc;};return a28_0xddd8();}const store=async(_0x40685b,_0x9d0122)=>{const _0x4d3fd3=a28_0xfca427,_0x3c3256=_0x40685b[_0x4d3fd3(0x12a)]['authorization'],[,_0x56c856]=_0x3c3256[_0x4d3fd3(0x13c)]('\x20'),_0x2c7640=(0x0,jsonwebtoken_1[_0x4d3fd3(0x14e)])(_0x56c856,auth_1['default']['secret']),{companyId:_0xacb437}=_0x2c7640,{name:_0x337258,apiKey:_0x10ffbb,prompt:_0x780cf0,maxTokens:_0xb4783,temperature:_0xd23e7,promptTokens:_0x1e868b,completionTokens:_0x124d6a,totalTokens:_0x186641,queueId:_0x1a8e23,maxMessages:_0x5aff18,voice:_0x3487f9,voiceKey:_0x7add34,voiceRegion:_0x323c76}=_0x40685b[_0x4d3fd3(0x144)],_0x21c676=await(0x0,CreatePromptService_1[_0x4d3fd3(0x128)])({'name':_0x337258,'apiKey':_0x10ffbb,'prompt':_0x780cf0,'maxTokens':_0xb4783,'temperature':_0xd23e7,'promptTokens':_0x1e868b,'completionTokens':_0x124d6a,'totalTokens':_0x186641,'queueId':_0x1a8e23,'maxMessages':_0x5aff18,'companyId':_0xacb437,'voice':_0x3487f9,'voiceKey':_0x7add34,'voiceRegion':_0x323c76}),_0x1ffd47=(0x0,socket_1[_0x4d3fd3(0x157)])();return _0x1ffd47['to'](_0x4d3fd3(0x131)+_0xacb437+_0x4d3fd3(0x141))['emit']('prompt',{'action':_0x4d3fd3(0x151),'prompt':_0x21c676}),_0x9d0122[_0x4d3fd3(0x138)](0xc8)[_0x4d3fd3(0x148)](_0x21c676);};exports[a28_0xfca427(0x129)]=store;const show=async(_0x22e383,_0x1e2233)=>{const _0x34ff5a=a28_0xfca427,{promptId:_0x522e8d}=_0x22e383[_0x34ff5a(0x14a)],_0x44c339=_0x22e383[_0x34ff5a(0x12a)][_0x34ff5a(0x14c)],[,_0x2e0b9a]=_0x44c339[_0x34ff5a(0x13c)]('\x20'),_0x25b2a4=(0x0,jsonwebtoken_1[_0x34ff5a(0x14e)])(_0x2e0b9a,auth_1[_0x34ff5a(0x128)][_0x34ff5a(0x137)]),{companyId:_0x441aad}=_0x25b2a4,_0x5e1454=await(0x0,ShowPromptService_1[_0x34ff5a(0x128)])({'promptId':_0x522e8d,'companyId':_0x441aad});return _0x1e2233[_0x34ff5a(0x138)](0xc8)[_0x34ff5a(0x148)](_0x5e1454);};exports[a28_0xfca427(0x14b)]=show;const update=async(_0x1152ba,_0x4d4de6)=>{const _0xef4824=a28_0xfca427,{promptId:_0x1f8218}=_0x1152ba[_0xef4824(0x14a)],_0x3894a0=_0x1152ba[_0xef4824(0x144)],_0x6de02f=_0x1152ba[_0xef4824(0x12a)][_0xef4824(0x14c)],[,_0x2041b2]=_0x6de02f[_0xef4824(0x13c)]('\x20'),_0x2de600=(0x0,jsonwebtoken_1[_0xef4824(0x14e)])(_0x2041b2,auth_1['default'][_0xef4824(0x137)]),{companyId:_0x3eb76e}=_0x2de600,_0x32c994=await(0x0,UpdatePromptService_1[_0xef4824(0x128)])({'promptData':_0x3894a0,'promptId':_0x1f8218,'companyId':_0x3eb76e}),_0xda87fc=(0x0,socket_1[_0xef4824(0x157)])();return _0xda87fc['emit'](_0xef4824(0x12f),{'action':'update','prompt':_0x32c994}),_0x4d4de6[_0xef4824(0x138)](0xc8)[_0xef4824(0x148)](_0x32c994);};exports[a28_0xfca427(0x151)]=update;const remove=async(_0x4ae791,_0x37af16)=>{const _0x42ea71=a28_0xfca427,{promptId:_0x453bc1}=_0x4ae791[_0x42ea71(0x14a)],_0x318dd5=_0x4ae791[_0x42ea71(0x12a)][_0x42ea71(0x14c)],[,_0x3a6aa4]=_0x318dd5[_0x42ea71(0x13c)]('\x20'),_0x433cd1=(0x0,jsonwebtoken_1[_0x42ea71(0x14e)])(_0x3a6aa4,auth_1[_0x42ea71(0x128)][_0x42ea71(0x137)]),{companyId:_0x3fc3bc}=_0x433cd1;try{const {count:_0x540ab1}=await Whatsapp_1[_0x42ea71(0x128)][_0x42ea71(0x12c)]({'where':{'promptId':+_0x453bc1,'companyId':_0x3fc3bc}});if(_0x540ab1>0x0)return _0x37af16[_0x42ea71(0x138)](0xc8)[_0x42ea71(0x148)]({'message':_0x42ea71(0x133)});await(0x0,DeletePromptService_1[_0x42ea71(0x128)])(_0x453bc1,_0x3fc3bc);const _0x15d339=(0x0,socket_1['getIO'])();return _0x15d339[_0x42ea71(0x158)](_0x42ea71(0x12f),{'action':'delete','intelligenceId':+_0x453bc1}),_0x37af16['status'](0xc8)[_0x42ea71(0x148)]({'message':_0x42ea71(0x12b)});}catch(_0x1dee4e){return _0x37af16[_0x42ea71(0x138)](0x1f4)[_0x42ea71(0x148)]({'message':_0x42ea71(0x132)});}};exports[a28_0xfca427(0x12e)]=remove;