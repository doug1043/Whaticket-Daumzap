const a28_0x465389=a28_0xaa36;(function(_0x311517,_0x8b1629){const _0x16e096=a28_0xaa36,_0x10f53c=_0x311517();while(!![]){try{const _0x162718=-parseInt(_0x16e096(0x20f))/0x1*(-parseInt(_0x16e096(0x208))/0x2)+-parseInt(_0x16e096(0x209))/0x3+-parseInt(_0x16e096(0x214))/0x4+parseInt(_0x16e096(0x215))/0x5+parseInt(_0x16e096(0x200))/0x6*(-parseInt(_0x16e096(0x1f9))/0x7)+parseInt(_0x16e096(0x21a))/0x8+parseInt(_0x16e096(0x1fd))/0x9;if(_0x162718===_0x8b1629)break;else _0x10f53c['push'](_0x10f53c['shift']());}catch(_0x35eeb1){_0x10f53c['push'](_0x10f53c['shift']());}}}(a28_0x29d9,0x3d0b7));const a28_0x13d880=(function(){let _0x6d3de6=!![];return function(_0xe9d76,_0x58afdf){const _0x48e804=_0x6d3de6?function(){const _0x3ea674=a28_0xaa36;if(_0x58afdf){const _0x1617d=_0x58afdf[_0x3ea674(0x202)](_0xe9d76,arguments);return _0x58afdf=null,_0x1617d;}}:function(){};return _0x6d3de6=![],_0x48e804;};}()),a28_0x29ce13=a28_0x13d880(this,function(){const _0x3300bf=a28_0xaa36;return a28_0x29ce13[_0x3300bf(0x210)]()[_0x3300bf(0x1ff)](_0x3300bf(0x205))[_0x3300bf(0x210)]()['constructor'](a28_0x29ce13)[_0x3300bf(0x1ff)](_0x3300bf(0x205));});a28_0x29ce13();'use strict';var __importDefault=this&&this[a28_0x465389(0x218)]||function(_0x34b6bf){const _0x590521=a28_0x465389;return _0x34b6bf&&_0x34b6bf[_0x590521(0x206)]?_0x34b6bf:{'default':_0x34b6bf};};Object[a28_0x465389(0x212)](exports,a28_0x465389(0x206),{'value':!![]}),exports['remove']=exports['update']=exports[a28_0x465389(0x1f6)]=exports['store']=exports[a28_0x465389(0x207)]=void 0x0;function a28_0x29d9(){const _0x28c71f=['body','show','findAndCountAll','Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado\x20nas\x20conexões\x20Whatsapp!','7dxsoqS','secret','update','delete','5257728WQZtMl','json','search','2260392fQBpKm','getIO','apply','emit','split','(((.+)+)+)+$','__esModule','index','74vShetf','1140345WjjvAF','jsonwebtoken','../services/PromptServices/UpdatePromptService','headers','company-','query','11947DsRlkX','toString','status','defineProperty','../services/PromptServices/ListPromptsService','1617452wIHPKm','49075vMZfRi','../services/PromptServices/CreatePromptService','params','__importDefault','prompt','3001624YpWbUb','default','../libs/socket','verify','authorization'];a28_0x29d9=function(){return _0x28c71f;};return a28_0x29d9();}const socket_1=require(a28_0x465389(0x21c)),CreatePromptService_1=__importDefault(require(a28_0x465389(0x216))),DeletePromptService_1=__importDefault(require('../services/PromptServices/DeletePromptService')),ListPromptsService_1=__importDefault(require(a28_0x465389(0x213))),ShowPromptService_1=__importDefault(require('../services/PromptServices/ShowPromptService')),UpdatePromptService_1=__importDefault(require(a28_0x465389(0x20b))),Whatsapp_1=__importDefault(require('../models/Whatsapp')),jsonwebtoken_1=require(a28_0x465389(0x20a)),auth_1=__importDefault(require('../config/auth')),index=async(_0x448c6f,_0xb8714d)=>{const _0x5c03ad=a28_0x465389,{pageNumber:_0x44a854,searchParam:_0x524dbb}=_0x448c6f[_0x5c03ad(0x20e)],_0x32c0ae=_0x448c6f[_0x5c03ad(0x20c)]['authorization'],[,_0xa1591b]=_0x32c0ae[_0x5c03ad(0x204)]('\x20'),_0xf979a3=(0x0,jsonwebtoken_1['verify'])(_0xa1591b,auth_1[_0x5c03ad(0x21b)][_0x5c03ad(0x1fa)]),{companyId:_0x1c556d}=_0xf979a3,{prompts:_0x30d6c0,count:_0x50496f,hasMore:_0x59c2f9}=await(0x0,ListPromptsService_1['default'])({'searchParam':_0x524dbb,'pageNumber':_0x44a854,'companyId':_0x1c556d});return _0xb8714d[_0x5c03ad(0x211)](0xc8)[_0x5c03ad(0x1fe)]({'prompts':_0x30d6c0,'count':_0x50496f,'hasMore':_0x59c2f9});};function a28_0xaa36(_0xc26666,_0x4eeef9){const _0x315a69=a28_0x29d9();return a28_0xaa36=function(_0x29ce13,_0x13d880){_0x29ce13=_0x29ce13-0x1f3;let _0x29d920=_0x315a69[_0x29ce13];return _0x29d920;},a28_0xaa36(_0xc26666,_0x4eeef9);}exports[a28_0x465389(0x207)]=index;const store=async(_0x66b633,_0x5663b1)=>{const _0xfc38b7=a28_0x465389,_0x568077=_0x66b633[_0xfc38b7(0x20c)]['authorization'],[,_0x2dd5b3]=_0x568077[_0xfc38b7(0x204)]('\x20'),_0xb4274a=(0x0,jsonwebtoken_1[_0xfc38b7(0x1f3)])(_0x2dd5b3,auth_1[_0xfc38b7(0x21b)][_0xfc38b7(0x1fa)]),{companyId:_0x4c47e2}=_0xb4274a,{name:_0x348ed8,apiKey:_0xb5a1fc,prompt:_0x55ecba,maxTokens:_0x2bd89a,temperature:_0x39aae3,promptTokens:_0x31e631,completionTokens:_0x49be60,totalTokens:_0x2901c8,queueId:_0x3707ec,maxMessages:_0x39f896,voice:_0xb95baf,voiceKey:_0x1ea33c,voiceRegion:_0x3b389d}=_0x66b633[_0xfc38b7(0x1f5)],_0x12a04e=await(0x0,CreatePromptService_1[_0xfc38b7(0x21b)])({'name':_0x348ed8,'apiKey':_0xb5a1fc,'prompt':_0x55ecba,'maxTokens':_0x2bd89a,'temperature':_0x39aae3,'promptTokens':_0x31e631,'completionTokens':_0x49be60,'totalTokens':_0x2901c8,'queueId':_0x3707ec,'maxMessages':_0x39f896,'companyId':_0x4c47e2,'voice':_0xb95baf,'voiceKey':_0x1ea33c,'voiceRegion':_0x3b389d}),_0x9edf84=(0x0,socket_1[_0xfc38b7(0x201)])();return _0x9edf84['to'](_0xfc38b7(0x20d)+_0x4c47e2+'-mainchannel')[_0xfc38b7(0x203)](_0xfc38b7(0x219),{'action':'update','prompt':_0x12a04e}),_0x5663b1[_0xfc38b7(0x211)](0xc8)['json'](_0x12a04e);};exports['store']=store;const show=async(_0x1e9356,_0x5f1736)=>{const _0xa5cc65=a28_0x465389,{promptId:_0xb7aa6b}=_0x1e9356['params'],_0x399d2b=_0x1e9356['headers']['authorization'],[,_0x512d5d]=_0x399d2b[_0xa5cc65(0x204)]('\x20'),_0x384d76=(0x0,jsonwebtoken_1[_0xa5cc65(0x1f3)])(_0x512d5d,auth_1[_0xa5cc65(0x21b)][_0xa5cc65(0x1fa)]),{companyId:_0x3161c9}=_0x384d76,_0x51fbba=await(0x0,ShowPromptService_1[_0xa5cc65(0x21b)])({'promptId':_0xb7aa6b,'companyId':_0x3161c9});return _0x5f1736['status'](0xc8)[_0xa5cc65(0x1fe)](_0x51fbba);};exports[a28_0x465389(0x1f6)]=show;const update=async(_0x337e1e,_0x59d6ec)=>{const _0x33435c=a28_0x465389,{promptId:_0x239dab}=_0x337e1e[_0x33435c(0x217)],_0x1d1f28=_0x337e1e['body'],_0x5ce1a7=_0x337e1e[_0x33435c(0x20c)][_0x33435c(0x1f4)],[,_0x2e9146]=_0x5ce1a7['split']('\x20'),_0x4d2337=(0x0,jsonwebtoken_1[_0x33435c(0x1f3)])(_0x2e9146,auth_1['default'][_0x33435c(0x1fa)]),{companyId:_0x2e61b5}=_0x4d2337,_0x5402d4=await(0x0,UpdatePromptService_1['default'])({'promptData':_0x1d1f28,'promptId':_0x239dab,'companyId':_0x2e61b5}),_0x51e7ec=(0x0,socket_1['getIO'])();return _0x51e7ec[_0x33435c(0x203)](_0x33435c(0x219),{'action':'update','prompt':_0x5402d4}),_0x59d6ec[_0x33435c(0x211)](0xc8)[_0x33435c(0x1fe)](_0x5402d4);};exports[a28_0x465389(0x1fb)]=update;const remove=async(_0x3a2720,_0x403474)=>{const _0xe5cfb0=a28_0x465389,{promptId:_0x53baec}=_0x3a2720['params'],_0x2798d6=_0x3a2720[_0xe5cfb0(0x20c)][_0xe5cfb0(0x1f4)],[,_0x2f8ebf]=_0x2798d6[_0xe5cfb0(0x204)]('\x20'),_0x175287=(0x0,jsonwebtoken_1['verify'])(_0x2f8ebf,auth_1['default'][_0xe5cfb0(0x1fa)]),{companyId:_0x8765e6}=_0x175287;try{const {count:_0x3d5bc6}=await Whatsapp_1[_0xe5cfb0(0x21b)][_0xe5cfb0(0x1f7)]({'where':{'promptId':+_0x53baec,'companyId':_0x8765e6}});if(_0x3d5bc6>0x0)return _0x403474[_0xe5cfb0(0x211)](0xc8)['json']({'message':_0xe5cfb0(0x1f8)});await(0x0,DeletePromptService_1['default'])(_0x53baec,_0x8765e6);const _0x550d55=(0x0,socket_1[_0xe5cfb0(0x201)])();return _0x550d55[_0xe5cfb0(0x203)](_0xe5cfb0(0x219),{'action':_0xe5cfb0(0x1fc),'intelligenceId':+_0x53baec}),_0x403474[_0xe5cfb0(0x211)](0xc8)[_0xe5cfb0(0x1fe)]({'message':'Prompt\x20deleted'});}catch(_0x2c25f2){return _0x403474[_0xe5cfb0(0x211)](0x1f4)[_0xe5cfb0(0x1fe)]({'message':'Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado!'});}};exports['remove']=remove;