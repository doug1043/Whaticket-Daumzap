function a27_0x1ac4(){const _0x2c94b2=['1236JQAkJc','539SlymJQ','save','index','../services/QueueService/DeleteQueueService','json','filename','6QfctRa','__esModule','apply','company-','files','emit','lodash','getIO','../models/Queue','mediaPath','mediaUpload','2908895fmtUUW','84Iclths','originalname','Arquivo\x20excluÃ­do','14215005riSbbn','16TGkLrR','(((.+)+)+)+$','default','status','../services/QueueService/ShowQueueService','search','message','../services/QueueService/CreateQueueService','query','10nXgTof','1794280ffJHOL','40640080viGNXE','send','params','resolve','../errors/AppError','path','__importDefault','../libs/socket','8862EVWkTA','../services/QueueService/UpdateQueueService','public','findByPk','../services/QueueService/ListQueuesService','defineProperty','update','show','body','store','deleteMedia','-queue','remove','96xPbWAz','toString','14025LRbllM','user','existsSync'];a27_0x1ac4=function(){return _0x2c94b2;};return a27_0x1ac4();}const a27_0x577a57=a27_0x1751;(function(_0x2a76a4,_0x2d2319){const _0x8676b=a27_0x1751,_0x1f2bc3=_0x2a76a4();while(!![]){try{const _0x2c50cd=parseInt(_0x8676b(0x15d))/0x1*(-parseInt(_0x8676b(0x150))/0x2)+parseInt(_0x8676b(0x15f))/0x3*(parseInt(_0x8676b(0x162))/0x4)+-parseInt(_0x8676b(0x147))/0x5*(parseInt(_0x8676b(0x169))/0x6)+parseInt(_0x8676b(0x163))/0x7*(parseInt(_0x8676b(0x13d))/0x8)+parseInt(_0x8676b(0x13c))/0x9*(parseInt(_0x8676b(0x146))/0xa)+parseInt(_0x8676b(0x138))/0xb*(parseInt(_0x8676b(0x139))/0xc)+-parseInt(_0x8676b(0x148))/0xd;if(_0x2c50cd===_0x2d2319)break;else _0x1f2bc3['push'](_0x1f2bc3['shift']());}catch(_0x3c3436){_0x1f2bc3['push'](_0x1f2bc3['shift']());}}}(a27_0x1ac4,0xeb921));const a27_0x28eb67=(function(){let _0x292377=!![];return function(_0x32f421,_0x50486d){const _0x2f69b5=_0x292377?function(){const _0x379caf=a27_0x1751;if(_0x50486d){const _0x3c9ae3=_0x50486d[_0x379caf(0x16b)](_0x32f421,arguments);return _0x50486d=null,_0x3c9ae3;}}:function(){};return _0x292377=![],_0x2f69b5;};}()),a27_0x31f68e=a27_0x28eb67(this,function(){const _0x13f419=a27_0x1751;return a27_0x31f68e[_0x13f419(0x15e)]()[_0x13f419(0x142)](_0x13f419(0x13e))[_0x13f419(0x15e)]()['constructor'](a27_0x31f68e)[_0x13f419(0x142)](_0x13f419(0x13e));});a27_0x31f68e();'use strict';var __importDefault=this&&this[a27_0x577a57(0x14e)]||function(_0x3a53ff){return _0x3a53ff&&_0x3a53ff['__esModule']?_0x3a53ff:{'default':_0x3a53ff};};Object[a27_0x577a57(0x155)](exports,a27_0x577a57(0x16a),{'value':!![]}),exports[a27_0x577a57(0x15a)]=exports[a27_0x577a57(0x137)]=exports['remove']=exports[a27_0x577a57(0x156)]=exports[a27_0x577a57(0x157)]=exports[a27_0x577a57(0x159)]=exports[a27_0x577a57(0x165)]=void 0x0;const socket_1=require(a27_0x577a57(0x14f)),CreateQueueService_1=__importDefault(require(a27_0x577a57(0x144))),DeleteQueueService_1=__importDefault(require(a27_0x577a57(0x166))),ListQueuesService_1=__importDefault(require(a27_0x577a57(0x154))),ShowQueueService_1=__importDefault(require(a27_0x577a57(0x141))),UpdateQueueService_1=__importDefault(require(a27_0x577a57(0x151))),lodash_1=require(a27_0x577a57(0x133)),Queue_1=__importDefault(require(a27_0x577a57(0x135))),lodash_2=require(a27_0x577a57(0x133)),fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a27_0x577a57(0x14d))),AppError_1=__importDefault(require(a27_0x577a57(0x14c))),index=async(_0x42bc4c,_0x132aa1)=>{const _0x50fcb6=a27_0x577a57,{companyId:_0xe92671}=_0x42bc4c[_0x50fcb6(0x160)],{companyId:_0x359ff2}=_0x42bc4c[_0x50fcb6(0x145)];let _0x22219b=_0xe92671;!(0x0,lodash_1['isNil'])(_0x359ff2)&&(_0x22219b=+_0x359ff2);const _0x52122f=await(0x0,ListQueuesService_1[_0x50fcb6(0x13f)])({'companyId':_0x22219b});return _0x132aa1[_0x50fcb6(0x140)](0xc8)[_0x50fcb6(0x167)](_0x52122f);};exports[a27_0x577a57(0x165)]=index;const store=async(_0x4c884e,_0x21d6f4)=>{const _0x606709=a27_0x577a57,{name:_0x39def8,color:_0x401d10,greetingMessage:_0x5bccc1,outOfHoursMessage:_0xd4015f}=_0x4c884e['body'],{companyId:_0x51e05b}=_0x4c884e[_0x606709(0x160)],_0x46b910=await(0x0,CreateQueueService_1[_0x606709(0x13f)])({'name':_0x39def8,'color':_0x401d10,'greetingMessage':_0x5bccc1,'companyId':_0x51e05b,'outOfHoursMessage':_0xd4015f}),_0x30389e=(0x0,socket_1['getIO'])();return _0x30389e['emit'](_0x606709(0x16c)+_0x51e05b+_0x606709(0x15b),{'action':_0x606709(0x156),'queue':_0x46b910}),_0x21d6f4[_0x606709(0x140)](0xc8)[_0x606709(0x167)](_0x46b910);};exports[a27_0x577a57(0x159)]=store;const show=async(_0x1d3d33,_0x1da583)=>{const _0x2f2b3c=a27_0x577a57,{queueId:_0x2812ac}=_0x1d3d33['params'],{companyId:_0x54bab8}=_0x1d3d33[_0x2f2b3c(0x160)],_0x21a00d=await(0x0,ShowQueueService_1[_0x2f2b3c(0x13f)])(_0x2812ac,_0x54bab8);return _0x1da583[_0x2f2b3c(0x140)](0xc8)['json'](_0x21a00d);};exports[a27_0x577a57(0x157)]=show;const update=async(_0x22944d,_0x1d2f0f)=>{const _0x185527=a27_0x577a57,{queueId:_0x39c79f}=_0x22944d['params'],{companyId:_0x3aae12}=_0x22944d['user'],_0x21092c=await(0x0,UpdateQueueService_1['default'])(_0x39c79f,_0x22944d[_0x185527(0x158)],_0x3aae12),_0x496a13=(0x0,socket_1[_0x185527(0x134)])();return _0x496a13[_0x185527(0x132)](_0x185527(0x16c)+_0x3aae12+_0x185527(0x15b),{'action':_0x185527(0x156),'queue':_0x21092c}),_0x1d2f0f[_0x185527(0x140)](0xc9)[_0x185527(0x167)](_0x21092c);};exports['update']=update;const remove=async(_0x229b5a,_0x21e2c6)=>{const _0x494571=a27_0x577a57,{queueId:_0x5df086}=_0x229b5a[_0x494571(0x14a)],{companyId:_0x41100c}=_0x229b5a[_0x494571(0x160)];await(0x0,DeleteQueueService_1[_0x494571(0x13f)])(_0x5df086,_0x41100c);const _0x24f9db=(0x0,socket_1['getIO'])();return _0x24f9db[_0x494571(0x132)]('company-'+_0x41100c+_0x494571(0x15b),{'action':'delete','queueId':+_0x5df086}),_0x21e2c6[_0x494571(0x140)](0xc8)[_0x494571(0x149)]();};exports[a27_0x577a57(0x15c)]=remove;const mediaUpload=async(_0x1d36eb,_0x47783a)=>{const _0x51bece=a27_0x577a57,{queueId:_0x23aeb6}=_0x1d36eb[_0x51bece(0x14a)],_0x5f0434=_0x1d36eb[_0x51bece(0x16d)],_0x2e3b43=(0x0,lodash_2['head'])(_0x5f0434);try{const _0x4838ad=await Queue_1[_0x51bece(0x13f)][_0x51bece(0x153)](_0x23aeb6);return _0x4838ad[_0x51bece(0x156)]({'mediaPath':_0x2e3b43[_0x51bece(0x168)],'mediaName':_0x2e3b43[_0x51bece(0x13a)]}),_0x47783a['send']({'mensagem':'Arquivo\x20Salvo'});}catch(_0x3edcfe){throw new AppError_1[(_0x51bece(0x13f))](_0x3edcfe[_0x51bece(0x143)]);}};function a27_0x1751(_0x5507dc,_0x4df5cc){const _0x5bdd75=a27_0x1ac4();return a27_0x1751=function(_0x31f68e,_0x28eb67){_0x31f68e=_0x31f68e-0x132;let _0x1ac4a3=_0x5bdd75[_0x31f68e];return _0x1ac4a3;},a27_0x1751(_0x5507dc,_0x4df5cc);}exports[a27_0x577a57(0x137)]=mediaUpload;const deleteMedia=async(_0x2ab1b3,_0x3ba097)=>{const _0x4fa4f3=a27_0x577a57,{queueId:_0xb17dad}=_0x2ab1b3[_0x4fa4f3(0x14a)];try{const _0x3dffe1=await Queue_1[_0x4fa4f3(0x13f)]['findByPk'](_0xb17dad),_0x3364a4=path_1['default'][_0x4fa4f3(0x14b)](_0x4fa4f3(0x152),_0x3dffe1['mediaPath']),_0x46df08=fs_1[_0x4fa4f3(0x13f)][_0x4fa4f3(0x161)](_0x3364a4);return _0x46df08&&fs_1[_0x4fa4f3(0x13f)]['unlinkSync'](_0x3364a4),_0x3dffe1[_0x4fa4f3(0x136)]=null,_0x3dffe1['mediaName']=null,await _0x3dffe1[_0x4fa4f3(0x164)](),_0x3ba097[_0x4fa4f3(0x149)]({'mensagem':_0x4fa4f3(0x13b)});}catch(_0x5d9658){throw new AppError_1[(_0x4fa4f3(0x13f))](_0x5d9658[_0x4fa4f3(0x143)]);}};exports[a27_0x577a57(0x15a)]=deleteMedia;