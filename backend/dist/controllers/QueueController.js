const a27_0xd23067=a27_0x355e;(function(_0xa35fe9,_0x5d0b2b){const _0x349e22=a27_0x355e,_0x22598d=_0xa35fe9();while(!![]){try{const _0x2941f6=-parseInt(_0x349e22(0xcd))/0x1*(parseInt(_0x349e22(0xe3))/0x2)+-parseInt(_0x349e22(0xe7))/0x3*(-parseInt(_0x349e22(0xf1))/0x4)+-parseInt(_0x349e22(0xdc))/0x5*(-parseInt(_0x349e22(0xee))/0x6)+parseInt(_0x349e22(0xdf))/0x7*(-parseInt(_0x349e22(0xf6))/0x8)+-parseInt(_0x349e22(0xfa))/0x9*(-parseInt(_0x349e22(0xc4))/0xa)+parseInt(_0x349e22(0xfd))/0xb+-parseInt(_0x349e22(0xd5))/0xc;if(_0x2941f6===_0x5d0b2b)break;else _0x22598d['push'](_0x22598d['shift']());}catch(_0x42bccf){_0x22598d['push'](_0x22598d['shift']());}}}(a27_0x1c41,0xa371d));const a27_0x541a40=(function(){let _0x374436=!![];return function(_0x5eebe9,_0x532c84){const _0x46178e=_0x374436?function(){const _0x35c19e=a27_0x355e;if(_0x532c84){const _0x560664=_0x532c84[_0x35c19e(0xe1)](_0x5eebe9,arguments);return _0x532c84=null,_0x560664;}}:function(){};return _0x374436=![],_0x46178e;};}()),a27_0x2d731d=a27_0x541a40(this,function(){const _0x3a0741=a27_0x355e;return a27_0x2d731d[_0x3a0741(0xe2)]()[_0x3a0741(0xdd)](_0x3a0741(0xc9))[_0x3a0741(0xe2)]()[_0x3a0741(0xcb)](a27_0x2d731d)['search'](_0x3a0741(0xc9));});a27_0x2d731d();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x52cfc3){const _0x29dcce=a27_0x355e;return _0x52cfc3&&_0x52cfc3[_0x29dcce(0xf7)]?_0x52cfc3:{'default':_0x52cfc3};};Object[a27_0xd23067(0xe4)](exports,a27_0xd23067(0xf7),{'value':!![]}),exports['deleteMedia']=exports[a27_0xd23067(0xfb)]=exports[a27_0xd23067(0xec)]=exports[a27_0xd23067(0xf9)]=exports['show']=exports[a27_0xd23067(0xce)]=exports[a27_0xd23067(0xd2)]=void 0x0;const socket_1=require(a27_0xd23067(0xe9)),CreateQueueService_1=__importDefault(require(a27_0xd23067(0xe8))),DeleteQueueService_1=__importDefault(require(a27_0xd23067(0xca))),ListQueuesService_1=__importDefault(require(a27_0xd23067(0xd8))),ShowQueueService_1=__importDefault(require(a27_0xd23067(0xf0))),UpdateQueueService_1=__importDefault(require(a27_0xd23067(0xfc))),lodash_1=require('lodash'),Queue_1=__importDefault(require(a27_0xd23067(0xd0))),lodash_2=require('lodash'),fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path')),AppError_1=__importDefault(require(a27_0xd23067(0xc3))),index=async(_0x9f8924,_0x573a35)=>{const _0x214bb7=a27_0xd23067,{companyId:_0x3f5b85}=_0x9f8924[_0x214bb7(0xef)],{companyId:_0x5ce367}=_0x9f8924[_0x214bb7(0xc5)];let _0x22ff4b=_0x3f5b85;!(0x0,lodash_1[_0x214bb7(0xd9)])(_0x5ce367)&&(_0x22ff4b=+_0x5ce367);const _0x3d5615=await(0x0,ListQueuesService_1[_0x214bb7(0xf8)])({'companyId':_0x22ff4b});return _0x573a35[_0x214bb7(0xda)](0xc8)[_0x214bb7(0xc2)](_0x3d5615);};exports[a27_0xd23067(0xd2)]=index;const store=async(_0x448956,_0x30e007)=>{const _0x87ec3a=a27_0xd23067,{name:_0x4d0757,color:_0x355fa1,greetingMessage:_0x12b280,outOfHoursMessage:_0xe190c6}=_0x448956['body'],{companyId:_0x1327b9}=_0x448956[_0x87ec3a(0xef)],_0x55dd52=await(0x0,CreateQueueService_1['default'])({'name':_0x4d0757,'color':_0x355fa1,'greetingMessage':_0x12b280,'companyId':_0x1327b9,'outOfHoursMessage':_0xe190c6}),_0x7cd3af=(0x0,socket_1[_0x87ec3a(0xd4)])();return _0x7cd3af[_0x87ec3a(0xe0)](_0x87ec3a(0xc6)+_0x1327b9+_0x87ec3a(0xf2),{'action':_0x87ec3a(0xf9),'queue':_0x55dd52}),_0x30e007['status'](0xc8)['json'](_0x55dd52);};exports[a27_0xd23067(0xce)]=store;const show=async(_0x5c8182,_0x3beb61)=>{const _0x5bd07b=a27_0xd23067,{queueId:_0x413b61}=_0x5c8182[_0x5bd07b(0xf4)],{companyId:_0x26dee8}=_0x5c8182[_0x5bd07b(0xef)],_0xe167c0=await(0x0,ShowQueueService_1[_0x5bd07b(0xf8)])(_0x413b61,_0x26dee8);return _0x3beb61[_0x5bd07b(0xda)](0xc8)['json'](_0xe167c0);};exports[a27_0xd23067(0xed)]=show;const update=async(_0x3ff6b9,_0x1b7ce4)=>{const _0x26492f=a27_0xd23067,{queueId:_0x50bd4e}=_0x3ff6b9[_0x26492f(0xf4)],{companyId:_0x36e920}=_0x3ff6b9['user'],_0x4697ab=await(0x0,UpdateQueueService_1[_0x26492f(0xf8)])(_0x50bd4e,_0x3ff6b9[_0x26492f(0xc8)],_0x36e920),_0x1b4b84=(0x0,socket_1[_0x26492f(0xd4)])();return _0x1b4b84[_0x26492f(0xe0)](_0x26492f(0xc6)+_0x36e920+_0x26492f(0xf2),{'action':_0x26492f(0xf9),'queue':_0x4697ab}),_0x1b7ce4['status'](0xc9)[_0x26492f(0xc2)](_0x4697ab);};exports['update']=update;const remove=async(_0x3e0417,_0x4ad7cc)=>{const _0x1d6399=a27_0xd23067,{queueId:_0x20490e}=_0x3e0417['params'],{companyId:_0x16a51a}=_0x3e0417[_0x1d6399(0xef)];await(0x0,DeleteQueueService_1[_0x1d6399(0xf8)])(_0x20490e,_0x16a51a);const _0x4c5c4e=(0x0,socket_1['getIO'])();return _0x4c5c4e['emit'](_0x1d6399(0xc6)+_0x16a51a+_0x1d6399(0xf2),{'action':_0x1d6399(0xde),'queueId':+_0x20490e}),_0x4ad7cc['status'](0xc8)[_0x1d6399(0xd3)]();};exports['remove']=remove;const mediaUpload=async(_0x304e32,_0x1ad21b)=>{const _0x5de005=a27_0xd23067,{queueId:_0x1fe29e}=_0x304e32['params'],_0x1a4b88=_0x304e32[_0x5de005(0xcf)],_0xfe37b8=(0x0,lodash_2[_0x5de005(0xea)])(_0x1a4b88);try{const _0x1add8=await Queue_1['default'][_0x5de005(0xdb)](_0x1fe29e);return _0x1add8['update']({'mediaPath':_0xfe37b8[_0x5de005(0xe6)],'mediaName':_0xfe37b8[_0x5de005(0xd6)]}),_0x1ad21b['send']({'mensagem':_0x5de005(0xcc)});}catch(_0x5117af){throw new AppError_1[(_0x5de005(0xf8))](_0x5117af['message']);}};exports[a27_0xd23067(0xfb)]=mediaUpload;const deleteMedia=async(_0x31780b,_0xa57dba)=>{const _0x26a9d9=a27_0xd23067,{queueId:_0x2d514a}=_0x31780b[_0x26a9d9(0xf4)];try{const _0xfdf504=await Queue_1[_0x26a9d9(0xf8)]['findByPk'](_0x2d514a),_0x135ffe=path_1[_0x26a9d9(0xf8)][_0x26a9d9(0xd7)](_0x26a9d9(0xd1),_0xfdf504[_0x26a9d9(0xfe)]),_0x129ca6=fs_1[_0x26a9d9(0xf8)][_0x26a9d9(0xf3)](_0x135ffe);return _0x129ca6&&fs_1[_0x26a9d9(0xf8)][_0x26a9d9(0xc1)](_0x135ffe),_0xfdf504[_0x26a9d9(0xfe)]=null,_0xfdf504[_0x26a9d9(0xe5)]=null,await _0xfdf504[_0x26a9d9(0xeb)](),_0xa57dba[_0x26a9d9(0xd3)]({'mensagem':_0x26a9d9(0xc7)});}catch(_0x167b08){throw new AppError_1[(_0x26a9d9(0xf8))](_0x167b08[_0x26a9d9(0xf5)]);}};exports['deleteMedia']=deleteMedia;function a27_0x355e(_0x348a22,_0xc316fd){const _0x33bb8d=a27_0x1c41();return a27_0x355e=function(_0x2d731d,_0x541a40){_0x2d731d=_0x2d731d-0xc1;let _0x1c4137=_0x33bb8d[_0x2d731d];return _0x1c4137;},a27_0x355e(_0x348a22,_0xc316fd);}function a27_0x1c41(){const _0x2ef5f8=['resolve','../services/QueueService/ListQueuesService','isNil','status','findByPk','905HYBLCd','search','delete','70hrSjTg','emit','apply','toString','20lBoLFs','defineProperty','mediaName','filename','472296aayjLY','../services/QueueService/CreateQueueService','../libs/socket','head','save','remove','show','24078QMXuvV','user','../services/QueueService/ShowQueueService','16cWrddE','-queue','existsSync','params','message','554776aHcdBn','__esModule','default','update','18297hwdXTH','mediaUpload','../services/QueueService/UpdateQueueService','161282WPykkH','mediaPath','unlinkSync','json','../errors/AppError','3740niOGNB','query','company-','Arquivo\x20exclu√≠do','body','(((.+)+)+)+$','../services/QueueService/DeleteQueueService','constructor','Arquivo\x20Salvo','30643TLQuoj','store','files','../models/Queue','public','index','send','getIO','5540592giynsP','originalname'];a27_0x1c41=function(){return _0x2ef5f8;};return a27_0x1c41();}