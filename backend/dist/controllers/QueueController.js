const a27_0x1bb274=a27_0x48df;function a27_0x48df(_0x48e7ef,_0x5affc7){const _0x212eb3=a27_0x7b73();return a27_0x48df=function(_0x481609,_0x2e5a37){_0x481609=_0x481609-0x18d;let _0x7b7355=_0x212eb3[_0x481609];return _0x7b7355;},a27_0x48df(_0x48e7ef,_0x5affc7);}(function(_0x15e3f4,_0x562a8d){const _0x4522b1=a27_0x48df,_0xe80734=_0x15e3f4();while(!![]){try{const _0x84fd2=parseInt(_0x4522b1(0x1be))/0x1*(parseInt(_0x4522b1(0x196))/0x2)+parseInt(_0x4522b1(0x1b7))/0x3*(parseInt(_0x4522b1(0x1b9))/0x4)+-parseInt(_0x4522b1(0x18f))/0x5*(parseInt(_0x4522b1(0x1c0))/0x6)+parseInt(_0x4522b1(0x1ab))/0x7*(-parseInt(_0x4522b1(0x1bd))/0x8)+-parseInt(_0x4522b1(0x1b5))/0x9+-parseInt(_0x4522b1(0x1a6))/0xa+parseInt(_0x4522b1(0x199))/0xb*(parseInt(_0x4522b1(0x1c1))/0xc);if(_0x84fd2===_0x562a8d)break;else _0xe80734['push'](_0xe80734['shift']());}catch(_0xab7bbe){_0xe80734['push'](_0xe80734['shift']());}}}(a27_0x7b73,0xb0c3b));const a27_0x2e5a37=(function(){let _0x419861=!![];return function(_0x360aac,_0x16ebf1){const _0x15c959=_0x419861?function(){const _0x59dce4=a27_0x48df;if(_0x16ebf1){const _0x3986de=_0x16ebf1[_0x59dce4(0x1b6)](_0x360aac,arguments);return _0x16ebf1=null,_0x3986de;}}:function(){};return _0x419861=![],_0x15c959;};}()),a27_0x481609=a27_0x2e5a37(this,function(){const _0x4c9baa=a27_0x48df;return a27_0x481609[_0x4c9baa(0x1c3)]()[_0x4c9baa(0x1a2)](_0x4c9baa(0x190))[_0x4c9baa(0x1c3)]()[_0x4c9baa(0x1a8)](a27_0x481609)[_0x4c9baa(0x1a2)](_0x4c9baa(0x190));});a27_0x481609();'use strict';function a27_0x7b73(){const _0x45099e=['../services/QueueService/UpdateQueueService','index','32989jQBzgy','originalname','mediaName','../services/QueueService/DeleteQueueService','send','defineProperty','resolve','../models/Queue','head','search','save','files','store','10772110HVAqnu','-queue','constructor','findByPk','mediaUpload','959rxtrlh','mediaPath','../libs/socket','../services/QueueService/CreateQueueService','getIO','Arquivo\x20Salvo','default','isNil','show','deleteMedia','6606234wdGWZw','apply','2586PZkkpy','emit','6076QZkzFi','user','body','message','4376UFcHyv','23bcPsEp','query','6kYUtLX','6156cFxMWq','existsSync','toString','json','status','params','update','__esModule','3605955FHKduX','(((.+)+)+)+$','../services/QueueService/ListQueuesService','lodash','company-','remove','__importDefault','42046nbkuIV'];a27_0x7b73=function(){return _0x45099e;};return a27_0x7b73();}var __importDefault=this&&this[a27_0x1bb274(0x195)]||function(_0x2b4b65){const _0x16512d=a27_0x1bb274;return _0x2b4b65&&_0x2b4b65[_0x16512d(0x18e)]?_0x2b4b65:{'default':_0x2b4b65};};Object[a27_0x1bb274(0x19e)](exports,a27_0x1bb274(0x18e),{'value':!![]}),exports[a27_0x1bb274(0x1b4)]=exports[a27_0x1bb274(0x1aa)]=exports['remove']=exports[a27_0x1bb274(0x18d)]=exports[a27_0x1bb274(0x1b3)]=exports[a27_0x1bb274(0x1a5)]=exports[a27_0x1bb274(0x198)]=void 0x0;const socket_1=require(a27_0x1bb274(0x1ad)),CreateQueueService_1=__importDefault(require(a27_0x1bb274(0x1ae))),DeleteQueueService_1=__importDefault(require(a27_0x1bb274(0x19c))),ListQueuesService_1=__importDefault(require(a27_0x1bb274(0x191))),ShowQueueService_1=__importDefault(require('../services/QueueService/ShowQueueService')),UpdateQueueService_1=__importDefault(require(a27_0x1bb274(0x197))),lodash_1=require(a27_0x1bb274(0x192)),Queue_1=__importDefault(require(a27_0x1bb274(0x1a0))),lodash_2=require(a27_0x1bb274(0x192)),fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path')),AppError_1=__importDefault(require('../errors/AppError')),index=async(_0x870ce9,_0x47d796)=>{const _0x31af2f=a27_0x1bb274,{companyId:_0x120769}=_0x870ce9[_0x31af2f(0x1ba)],{companyId:_0x1f2b3c}=_0x870ce9[_0x31af2f(0x1bf)];let _0x172f69=_0x120769;!(0x0,lodash_1[_0x31af2f(0x1b2)])(_0x1f2b3c)&&(_0x172f69=+_0x1f2b3c);const _0x148fae=await(0x0,ListQueuesService_1[_0x31af2f(0x1b1)])({'companyId':_0x172f69});return _0x47d796['status'](0xc8)[_0x31af2f(0x1c4)](_0x148fae);};exports['index']=index;const store=async(_0x43e085,_0x1e0c3d)=>{const _0x2ca23b=a27_0x1bb274,{name:_0x27ba54,color:_0x101d90,greetingMessage:_0x1e4291,outOfHoursMessage:_0x3ecf42}=_0x43e085[_0x2ca23b(0x1bb)],{companyId:_0x58d91e}=_0x43e085[_0x2ca23b(0x1ba)],_0x1c0935=await(0x0,CreateQueueService_1[_0x2ca23b(0x1b1)])({'name':_0x27ba54,'color':_0x101d90,'greetingMessage':_0x1e4291,'companyId':_0x58d91e,'outOfHoursMessage':_0x3ecf42}),_0x568168=(0x0,socket_1[_0x2ca23b(0x1af)])();return _0x568168[_0x2ca23b(0x1b8)](_0x2ca23b(0x193)+_0x58d91e+_0x2ca23b(0x1a7),{'action':_0x2ca23b(0x18d),'queue':_0x1c0935}),_0x1e0c3d['status'](0xc8)['json'](_0x1c0935);};exports[a27_0x1bb274(0x1a5)]=store;const show=async(_0x1a6a15,_0x576285)=>{const _0x4f951=a27_0x1bb274,{queueId:_0x400921}=_0x1a6a15[_0x4f951(0x1c6)],{companyId:_0x11f7fb}=_0x1a6a15['user'],_0x253491=await(0x0,ShowQueueService_1[_0x4f951(0x1b1)])(_0x400921,_0x11f7fb);return _0x576285['status'](0xc8)[_0x4f951(0x1c4)](_0x253491);};exports[a27_0x1bb274(0x1b3)]=show;const update=async(_0x1f7f8d,_0x43c897)=>{const _0x5919e3=a27_0x1bb274,{queueId:_0x49c2a0}=_0x1f7f8d[_0x5919e3(0x1c6)],{companyId:_0x30c510}=_0x1f7f8d[_0x5919e3(0x1ba)],_0x4e3d35=await(0x0,UpdateQueueService_1[_0x5919e3(0x1b1)])(_0x49c2a0,_0x1f7f8d[_0x5919e3(0x1bb)],_0x30c510),_0x216e35=(0x0,socket_1[_0x5919e3(0x1af)])();return _0x216e35[_0x5919e3(0x1b8)](_0x5919e3(0x193)+_0x30c510+_0x5919e3(0x1a7),{'action':_0x5919e3(0x18d),'queue':_0x4e3d35}),_0x43c897[_0x5919e3(0x1c5)](0xc9)[_0x5919e3(0x1c4)](_0x4e3d35);};exports[a27_0x1bb274(0x18d)]=update;const remove=async(_0x9bbb97,_0x42d7e8)=>{const _0x27bf5e=a27_0x1bb274,{queueId:_0x368cc2}=_0x9bbb97[_0x27bf5e(0x1c6)],{companyId:_0x385e88}=_0x9bbb97['user'];await(0x0,DeleteQueueService_1[_0x27bf5e(0x1b1)])(_0x368cc2,_0x385e88);const _0x515722=(0x0,socket_1[_0x27bf5e(0x1af)])();return _0x515722['emit']('company-'+_0x385e88+'-queue',{'action':'delete','queueId':+_0x368cc2}),_0x42d7e8['status'](0xc8)[_0x27bf5e(0x19d)]();};exports[a27_0x1bb274(0x194)]=remove;const mediaUpload=async(_0x25b3b1,_0x419b4f)=>{const _0x5a4ecb=a27_0x1bb274,{queueId:_0x3fabfc}=_0x25b3b1['params'],_0x4271b7=_0x25b3b1[_0x5a4ecb(0x1a4)],_0x4e437f=(0x0,lodash_2[_0x5a4ecb(0x1a1)])(_0x4271b7);try{const _0x44a90c=await Queue_1[_0x5a4ecb(0x1b1)][_0x5a4ecb(0x1a9)](_0x3fabfc);return _0x44a90c['update']({'mediaPath':_0x4e437f['filename'],'mediaName':_0x4e437f[_0x5a4ecb(0x19a)]}),_0x419b4f[_0x5a4ecb(0x19d)]({'mensagem':_0x5a4ecb(0x1b0)});}catch(_0x3333ea){throw new AppError_1[(_0x5a4ecb(0x1b1))](_0x3333ea[_0x5a4ecb(0x1bc)]);}};exports['mediaUpload']=mediaUpload;const deleteMedia=async(_0x3d5e5b,_0x494a69)=>{const _0x31d2eb=a27_0x1bb274,{queueId:_0x41309f}=_0x3d5e5b[_0x31d2eb(0x1c6)];try{const _0x4a63ed=await Queue_1[_0x31d2eb(0x1b1)][_0x31d2eb(0x1a9)](_0x41309f),_0x10ae40=path_1[_0x31d2eb(0x1b1)][_0x31d2eb(0x19f)]('public',_0x4a63ed[_0x31d2eb(0x1ac)]),_0x53a301=fs_1[_0x31d2eb(0x1b1)][_0x31d2eb(0x1c2)](_0x10ae40);return _0x53a301&&fs_1[_0x31d2eb(0x1b1)]['unlinkSync'](_0x10ae40),_0x4a63ed[_0x31d2eb(0x1ac)]=null,_0x4a63ed[_0x31d2eb(0x19b)]=null,await _0x4a63ed[_0x31d2eb(0x1a3)](),_0x494a69[_0x31d2eb(0x19d)]({'mensagem':'Arquivo\x20exclu√≠do'});}catch(_0x2f4252){throw new AppError_1['default'](_0x2f4252['message']);}};exports[a27_0x1bb274(0x1b4)]=deleteMedia;