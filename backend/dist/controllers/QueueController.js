const a29_0x622574=a29_0x4d5f;function a29_0x4d5f(_0x203186,_0x2f524b){const _0x57ba28=a29_0x5a42();return a29_0x4d5f=function(_0x1d1680,_0x1d02dc){_0x1d1680=_0x1d1680-0x110;let _0x5a42e1=_0x57ba28[_0x1d1680];return _0x5a42e1;},a29_0x4d5f(_0x203186,_0x2f524b);}(function(_0x4c66e4,_0x1caedc){const _0x12a099=a29_0x4d5f,_0xd54774=_0x4c66e4();while(!![]){try{const _0x334608=-parseInt(_0x12a099(0x152))/0x1*(parseInt(_0x12a099(0x12e))/0x2)+-parseInt(_0x12a099(0x113))/0x3*(parseInt(_0x12a099(0x151))/0x4)+parseInt(_0x12a099(0x112))/0x5*(parseInt(_0x12a099(0x13a))/0x6)+parseInt(_0x12a099(0x14f))/0x7+parseInt(_0x12a099(0x13d))/0x8*(-parseInt(_0x12a099(0x140))/0x9)+parseInt(_0x12a099(0x117))/0xa*(-parseInt(_0x12a099(0x136))/0xb)+-parseInt(_0x12a099(0x135))/0xc*(-parseInt(_0x12a099(0x115))/0xd);if(_0x334608===_0x1caedc)break;else _0xd54774['push'](_0xd54774['shift']());}catch(_0x5945a2){_0xd54774['push'](_0xd54774['shift']());}}}(a29_0x5a42,0xe06d3));const a29_0x1d02dc=(function(){let _0x56cf34=!![];return function(_0x5590d9,_0xcddc9d){const _0x5e3a3e=_0x56cf34?function(){const _0x324fc1=a29_0x4d5f;if(_0xcddc9d){const _0x2cf824=_0xcddc9d[_0x324fc1(0x120)](_0x5590d9,arguments);return _0xcddc9d=null,_0x2cf824;}}:function(){};return _0x56cf34=![],_0x5e3a3e;};}()),a29_0x1d1680=a29_0x1d02dc(this,function(){const _0x322194=a29_0x4d5f;return a29_0x1d1680['toString']()[_0x322194(0x14a)]('(((.+)+)+)+$')[_0x322194(0x137)]()[_0x322194(0x12a)](a29_0x1d1680)[_0x322194(0x14a)](_0x322194(0x116));});a29_0x1d1680();'use strict';var __importDefault=this&&this[a29_0x622574(0x119)]||function(_0x1ed29b){const _0x3347dd=a29_0x622574;return _0x1ed29b&&_0x1ed29b[_0x3347dd(0x129)]?_0x1ed29b:{'default':_0x1ed29b};};Object[a29_0x622574(0x11f)](exports,a29_0x622574(0x129),{'value':!![]}),exports[a29_0x622574(0x144)]=exports[a29_0x622574(0x114)]=exports[a29_0x622574(0x122)]=exports[a29_0x622574(0x125)]=exports['show']=exports[a29_0x622574(0x14b)]=exports[a29_0x622574(0x146)]=void 0x0;const socket_1=require('../libs/socket'),CreateQueueService_1=__importDefault(require('../services/QueueService/CreateQueueService')),DeleteQueueService_1=__importDefault(require(a29_0x622574(0x12c))),ListQueuesService_1=__importDefault(require(a29_0x622574(0x126))),ShowQueueService_1=__importDefault(require(a29_0x622574(0x149))),UpdateQueueService_1=__importDefault(require(a29_0x622574(0x128))),lodash_1=require(a29_0x622574(0x12b)),Queue_1=__importDefault(require(a29_0x622574(0x148))),lodash_2=require(a29_0x622574(0x12b)),fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a29_0x622574(0x12f))),AppError_1=__importDefault(require(a29_0x622574(0x124))),index=async(_0x5b1643,_0x154056)=>{const _0x1996fa=a29_0x622574,{companyId:_0x1571af}=_0x5b1643[_0x1996fa(0x110)],{companyId:_0xc4dc1d}=_0x5b1643[_0x1996fa(0x123)];let _0x1d8da9=_0x1571af;!(0x0,lodash_1[_0x1996fa(0x13e)])(_0xc4dc1d)&&(_0x1d8da9=+_0xc4dc1d);const _0x5827a3=await(0x0,ListQueuesService_1[_0x1996fa(0x121)])({'companyId':_0x1d8da9});return _0x154056[_0x1996fa(0x138)](0xc8)[_0x1996fa(0x142)](_0x5827a3);};exports[a29_0x622574(0x146)]=index;function a29_0x5a42(){const _0x4ae815=['originalname','54996gIktqT','154FowFEw','toString','status','public','24ylKfrv','findByPk','-queue','4504lYJZEf','isNil','company-','5391GJxnso','emit','json','send','deleteMedia','show','index','companyId','../models/Queue','../services/QueueService/ShowQueueService','search','store','head','-mainchannel','existsSync','2551759KiuCOl','delete','231764mnCfzb','3rrYNtS','user','mediaName','286115ZsjsYS','57WyZsaY','mediaUpload','12974adVJxn','(((.+)+)+)+$','1145010KeAsTs','filename','__importDefault','company','unlinkSync','Arquivo\x20excluÃ­do','message','resolve','defineProperty','apply','default','remove','query','../errors/AppError','update','../services/QueueService/ListQueuesService','mediaPath','../services/QueueService/UpdateQueueService','__esModule','constructor','lodash','../services/QueueService/DeleteQueueService','params','804588MCYlOR','path','body','getIO','files','save'];a29_0x5a42=function(){return _0x4ae815;};return a29_0x5a42();}const store=async(_0x5c6b8d,_0x57abf9)=>{const _0x31da20=a29_0x622574,{name:_0x111582,color:_0x4768f6,greetingMessage:_0x48bd84,outOfHoursMessage:_0x27f859,keywords:_0x2a09c9,schedules:_0x98a44c,orderQueue:_0x498bc4,integrationId:_0x3cd500,promptId:_0xcaa1fc}=_0x5c6b8d[_0x31da20(0x130)],{companyId:_0x490c8b}=_0x5c6b8d[_0x31da20(0x110)],_0x12ca58=await(0x0,CreateQueueService_1[_0x31da20(0x121)])({'name':_0x111582,'color':_0x4768f6,'greetingMessage':_0x48bd84,'companyId':_0x490c8b,'outOfHoursMessage':_0x27f859,'keywords':_0x2a09c9,'schedules':_0x98a44c,'orderQueue':_0x498bc4===''?null:_0x498bc4,'integrationId':_0x3cd500===''?null:_0x3cd500,'promptId':_0xcaa1fc===''?null:_0xcaa1fc}),_0x3df26e=(0x0,socket_1['getIO'])();return _0x3df26e['to'](_0x31da20(0x13f)+_0x490c8b+_0x31da20(0x14d))[_0x31da20(0x141)]('company-'+_0x490c8b+_0x31da20(0x13c),{'action':'update','queue':_0x12ca58}),_0x57abf9[_0x31da20(0x138)](0xc8)[_0x31da20(0x142)](_0x12ca58);};exports['store']=store;const show=async(_0x3d49dc,_0x36ed2e)=>{const _0x881384=a29_0x622574,{queueId:_0x36b47e}=_0x3d49dc[_0x881384(0x12d)],{companyId:_0x36d2e5}=_0x3d49dc['user'],_0x45eb2d=await(0x0,ShowQueueService_1[_0x881384(0x121)])(_0x36b47e,_0x36d2e5);return _0x36ed2e['status'](0xc8)[_0x881384(0x142)](_0x45eb2d);};exports[a29_0x622574(0x145)]=show;const update=async(_0x495526,_0x39b49d)=>{const _0x35dd24=a29_0x622574,{queueId:_0x1b47a3}=_0x495526[_0x35dd24(0x12d)],{companyId:_0x2b3da2}=_0x495526[_0x35dd24(0x110)],{name:_0x1e5727,color:_0x342102,greetingMessage:_0x1835b9,outOfHoursMessage:_0x278316,keywords:_0x542f3f,newTicketOnTransfer:_0x47b410,schedules:_0xd4aa54,orderQueue:_0x26a7cb,integrationId:_0x3d902f,promptId:_0x45941b}=_0x495526['body'],_0x31ba77=await(0x0,UpdateQueueService_1[_0x35dd24(0x121)])(_0x1b47a3,{'name':_0x1e5727,'color':_0x342102,'greetingMessage':_0x1835b9,'outOfHoursMessage':_0x278316,'keywords':_0x542f3f,'newTicketOnTransfer':_0x47b410,'schedules':_0xd4aa54,'orderQueue':_0x26a7cb===''?null:_0x26a7cb,'integrationId':_0x3d902f===''?null:_0x3d902f,'promptId':_0x45941b===''?null:_0x45941b},_0x2b3da2),_0xc2eb5f=(0x0,socket_1[_0x35dd24(0x131)])();return _0xc2eb5f['to'](_0x35dd24(0x13f)+_0x2b3da2+_0x35dd24(0x14d))[_0x35dd24(0x141)](_0x35dd24(0x13f)+_0x2b3da2+_0x35dd24(0x13c),{'action':'update','queue':_0x31ba77}),_0x39b49d['status'](0xc9)[_0x35dd24(0x142)](_0x31ba77);};exports['update']=update;const remove=async(_0x353dc1,_0x1cb412)=>{const _0x80019b=a29_0x622574,{queueId:_0x39741a}=_0x353dc1[_0x80019b(0x12d)],{companyId:_0x307e6a}=_0x353dc1['user'];await(0x0,DeleteQueueService_1[_0x80019b(0x121)])(_0x39741a,_0x307e6a);const _0x399e1a=(0x0,socket_1[_0x80019b(0x131)])();return _0x399e1a['to']('company-'+_0x307e6a+_0x80019b(0x14d))[_0x80019b(0x141)](_0x80019b(0x13f)+_0x307e6a+_0x80019b(0x13c),{'action':_0x80019b(0x150),'queueId':+_0x39741a}),_0x1cb412['status'](0xc8)[_0x80019b(0x143)]();};exports[a29_0x622574(0x122)]=remove;const mediaUpload=async(_0x122077,_0x554ebb)=>{const _0x4bdea9=a29_0x622574,{queueId:_0x1a24d7}=_0x122077['params'],_0x48cc7=_0x122077[_0x4bdea9(0x132)],_0x8bd457=(0x0,lodash_2[_0x4bdea9(0x14c)])(_0x48cc7);try{const _0x3a0aba=await Queue_1['default'][_0x4bdea9(0x13b)](_0x1a24d7);return _0x3a0aba['update']({'mediaPath':_0x8bd457[_0x4bdea9(0x118)],'mediaName':_0x8bd457[_0x4bdea9(0x134)]}),_0x554ebb['send']({'mensagem':'Arquivo\x20Salvo'});}catch(_0x459e87){throw new AppError_1[(_0x4bdea9(0x121))](_0x459e87[_0x4bdea9(0x11d)]);}};exports['mediaUpload']=mediaUpload;const deleteMedia=async(_0x41a059,_0x316e88)=>{const _0x5ad90f=a29_0x622574,{queueId:_0x443a68}=_0x41a059[_0x5ad90f(0x12d)];try{const _0x4aee76=await Queue_1[_0x5ad90f(0x121)][_0x5ad90f(0x13b)](_0x443a68),_0x3c5fb6=path_1[_0x5ad90f(0x121)][_0x5ad90f(0x11e)](_0x5ad90f(0x139),_0x5ad90f(0x11a)+_0x4aee76[_0x5ad90f(0x147)],_0x4aee76[_0x5ad90f(0x127)]),_0x6853d=fs_1[_0x5ad90f(0x121)][_0x5ad90f(0x14e)](_0x3c5fb6);return _0x6853d&&fs_1[_0x5ad90f(0x121)][_0x5ad90f(0x11b)](_0x3c5fb6),_0x4aee76[_0x5ad90f(0x127)]=null,_0x4aee76[_0x5ad90f(0x111)]=null,await _0x4aee76[_0x5ad90f(0x133)](),_0x316e88[_0x5ad90f(0x143)]({'mensagem':_0x5ad90f(0x11c)});}catch(_0x85a425){throw new AppError_1[(_0x5ad90f(0x121))](_0x85a425['message']);}};exports['deleteMedia']=deleteMedia;