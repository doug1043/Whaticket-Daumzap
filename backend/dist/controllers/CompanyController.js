const a13_0x450768=a13_0x474f;(function(_0x5c74c2,_0x57e104){const _0x24723d=a13_0x474f,_0x4cd831=_0x5c74c2();while(!![]){try{const _0x56f12e=parseInt(_0x24723d(0x19c))/0x1+parseInt(_0x24723d(0x173))/0x2*(-parseInt(_0x24723d(0x1a4))/0x3)+parseInt(_0x24723d(0x1a8))/0x4*(-parseInt(_0x24723d(0x17e))/0x5)+parseInt(_0x24723d(0x1c5))/0x6*(-parseInt(_0x24723d(0x1bd))/0x7)+parseInt(_0x24723d(0x19b))/0x8*(-parseInt(_0x24723d(0x193))/0x9)+-parseInt(_0x24723d(0x1b5))/0xa*(-parseInt(_0x24723d(0x1b2))/0xb)+parseInt(_0x24723d(0x178))/0xc;if(_0x56f12e===_0x57e104)break;else _0x4cd831['push'](_0x4cd831['shift']());}catch(_0x3e7fb5){_0x4cd831['push'](_0x4cd831['shift']());}}}(a13_0x5627,0x69955));const a13_0x29be10=(function(){let _0x5b7da9=!![];return function(_0x4f116f,_0x487d1b){const _0x3c40b5=_0x5b7da9?function(){if(_0x487d1b){const _0x471359=_0x487d1b['apply'](_0x4f116f,arguments);return _0x487d1b=null,_0x471359;}}:function(){};return _0x5b7da9=![],_0x3c40b5;};}()),a13_0x37a46c=a13_0x29be10(this,function(){const _0x46c7c7=a13_0x474f;return a13_0x37a46c['toString']()['search'](_0x46c7c7(0x1b1))['toString']()[_0x46c7c7(0x198)](a13_0x37a46c)['search'](_0x46c7c7(0x1b1));});a13_0x37a46c();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a13_0x450768(0x199)]?function(_0x845707,_0x4bc45c,_0x1d67bc,_0x5b4839){const _0x179231=a13_0x450768;if(_0x5b4839===undefined)_0x5b4839=_0x1d67bc;var _0x1200a6=Object['getOwnPropertyDescriptor'](_0x4bc45c,_0x1d67bc);(!_0x1200a6||(_0x179231(0x16f)in _0x1200a6?!_0x4bc45c['__esModule']:_0x1200a6[_0x179231(0x176)]||_0x1200a6[_0x179231(0x1ac)]))&&(_0x1200a6={'enumerable':!![],'get':function(){return _0x4bc45c[_0x1d67bc];}}),Object[_0x179231(0x181)](_0x845707,_0x5b4839,_0x1200a6);}:function(_0x21cf18,_0x4dbbab,_0x5086db,_0xf30e93){if(_0xf30e93===undefined)_0xf30e93=_0x5086db;_0x21cf18[_0xf30e93]=_0x4dbbab[_0x5086db];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a13_0x450768(0x199)]?function(_0x3419c4,_0x7db6f4){const _0x303169=a13_0x450768;Object[_0x303169(0x181)](_0x3419c4,_0x303169(0x1b8),{'enumerable':!![],'value':_0x7db6f4});}:function(_0xc0f2cd,_0x49af76){const _0x24f1e5=a13_0x450768;_0xc0f2cd[_0x24f1e5(0x1b8)]=_0x49af76;}),__importStar=this&&this['__importStar']||function(_0x2cb104){const _0x978902=a13_0x450768;if(_0x2cb104&&_0x2cb104[_0x978902(0x1a7)])return _0x2cb104;var _0x31f046={};if(_0x2cb104!=null){for(var _0x5efc88 in _0x2cb104)if(_0x5efc88!==_0x978902(0x1b8)&&Object[_0x978902(0x17f)][_0x978902(0x1ab)][_0x978902(0x1c4)](_0x2cb104,_0x5efc88))__createBinding(_0x31f046,_0x2cb104,_0x5efc88);}return __setModuleDefault(_0x31f046,_0x2cb104),_0x31f046;},__importDefault=this&&this[a13_0x450768(0x174)]||function(_0x556ed8){const _0xd60609=a13_0x450768;return _0x556ed8&&_0x556ed8[_0xd60609(0x1a7)]?_0x556ed8:{'default':_0x556ed8};};Object[a13_0x450768(0x181)](exports,a13_0x450768(0x1a7),{'value':!![]}),exports[a13_0x450768(0x18c)]=exports[a13_0x450768(0x1ba)]=exports[a13_0x450768(0x1a5)]=exports['updateSchedules']=exports[a13_0x450768(0x183)]=exports[a13_0x450768(0x1a2)]=exports[a13_0x450768(0x1c2)]=exports[a13_0x450768(0x1a3)]=exports[a13_0x450768(0x1b6)]=exports[a13_0x450768(0x1a9)]=void 0x0;const Yup=__importStar(require(a13_0x450768(0x18a))),AppError_1=__importDefault(require(a13_0x450768(0x1bc))),auth_1=__importDefault(require(a13_0x450768(0x1a0))),ListCompaniesService_1=__importDefault(require(a13_0x450768(0x170))),CreateCompanyService_1=__importDefault(require(a13_0x450768(0x1bf))),UpdateCompanyService_1=__importDefault(require(a13_0x450768(0x188))),ShowCompanyService_1=__importDefault(require(a13_0x450768(0x17d))),UpdateSchedulesService_1=__importDefault(require(a13_0x450768(0x19d))),DeleteCompanyService_1=__importDefault(require(a13_0x450768(0x184))),FindAllCompaniesService_1=__importDefault(require(a13_0x450768(0x1c3))),jsonwebtoken_1=require('jsonwebtoken'),User_1=__importDefault(require(a13_0x450768(0x1a6))),ShowPlanCompanyService_1=__importDefault(require(a13_0x450768(0x1c1))),ListCompaniesPlanService_1=__importDefault(require(a13_0x450768(0x172))),CheckSettings_1=__importDefault(require('../helpers/CheckSettings')),moment_1=__importDefault(require(a13_0x450768(0x197))),fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a13_0x450768(0x17a))),publicFolder=path_1['default'][a13_0x450768(0x191)](__dirname,'..','..','public'),index=async(_0x2a64b9,_0x4cea36)=>{const _0x3073b6=a13_0x450768,{searchParam:_0x5eca1f,pageNumber:_0x989aa8}=_0x2a64b9[_0x3073b6(0x18f)],{companies:_0x11684e,count:_0x24a5df,hasMore:_0x14f71e}=await(0x0,ListCompaniesService_1[_0x3073b6(0x1b8)])({'searchParam':_0x5eca1f,'pageNumber':_0x989aa8});return _0x4cea36[_0x3073b6(0x19a)]({'companies':_0x11684e,'count':_0x24a5df,'hasMore':_0x14f71e});};exports['index']=index;const signup=async(_0x9e187b,_0x2dee95)=>{const _0x5168ea=a13_0x450768;if(await(0x0,CheckSettings_1['default'])(_0x5168ea(0x1aa))!==_0x5168ea(0x19f))return _0x2dee95[_0x5168ea(0x19e)](0x191)[_0x5168ea(0x19a)]('🙎🏻‍♂️\x20Signup\x20disabled');return await(0x0,exports['store'])(_0x9e187b,_0x2dee95);};exports[a13_0x450768(0x1b6)]=signup;const store=async(_0x3acbfd,_0x53d3ab)=>{const _0x4ad7c6=a13_0x450768,_0x26b053=_0x3acbfd['body'];try{const _0x6c98e7=await(0x0,CheckSettings_1['default'])(_0x4ad7c6(0x1a1)),_0x47ab42=parseInt(_0x6c98e7,0xa);isNaN(_0x47ab42)||_0x47ab42<=0x0?_0x26b053['dueDate']=(0x0,moment_1[_0x4ad7c6(0x1b8)])()[_0x4ad7c6(0x18d)](0x7,'days')[_0x4ad7c6(0x171)]():_0x26b053[_0x4ad7c6(0x179)]=(0x0,moment_1[_0x4ad7c6(0x1b8)])()['add'](_0x47ab42,'days')[_0x4ad7c6(0x171)]();const _0x3c7a61=await(0x0,CreateCompanyService_1[_0x4ad7c6(0x1b8)])(_0x26b053);return _0x53d3ab[_0x4ad7c6(0x19e)](0xc9)[_0x4ad7c6(0x19a)](_0x3c7a61);}catch(_0x405229){return _0x53d3ab[_0x4ad7c6(0x19e)](0x1f4)[_0x4ad7c6(0x19a)]({'message':_0x4ad7c6(0x1b3),'error':_0x405229});}};exports[a13_0x450768(0x1a3)]=store;const show=async(_0x18209a,_0x12ead5)=>{const _0x2a839d=a13_0x450768,{id:_0x191f02}=_0x18209a[_0x2a839d(0x1ae)],_0x46be38=await User_1[_0x2a839d(0x1b8)][_0x2a839d(0x196)](_0x18209a[_0x2a839d(0x17c)]['id']);if(!_0x46be38['super']&&Number[_0x2a839d(0x1b7)](_0x191f02,0xa)!==_0x46be38['companyId'])throw new AppError_1['default'](_0x2a839d(0x1b4),0x193);const _0x249131=await(0x0,ShowCompanyService_1[_0x2a839d(0x1b8)])(_0x191f02);return _0x12ead5[_0x2a839d(0x19e)](0xc8)[_0x2a839d(0x19a)](_0x249131);};exports[a13_0x450768(0x1c2)]=show;const list=async(_0x2f5d7b,_0x35111f)=>{const _0x171410=a13_0x450768,_0x392bb3=await(0x0,FindAllCompaniesService_1[_0x171410(0x1b8)])();return _0x35111f[_0x171410(0x19e)](0xc8)[_0x171410(0x19a)](_0x392bb3);};exports[a13_0x450768(0x1a2)]=list;const update=async(_0x340c3f,_0x4b7fe4)=>{const _0x5a0866=a13_0x450768,_0x5f5020=_0x340c3f[_0x5a0866(0x1af)],_0x141a26=Yup[_0x5a0866(0x17b)]()[_0x5a0866(0x187)]({'name':Yup[_0x5a0866(0x175)]()[_0x5a0866(0x1b9)](),'email':Yup[_0x5a0866(0x175)]()[_0x5a0866(0x18b)]()[_0x5a0866(0x194)](),'phone':Yup[_0x5a0866(0x175)]()[_0x5a0866(0x194)](),'status':Yup[_0x5a0866(0x195)]()[_0x5a0866(0x194)](),'planId':Yup[_0x5a0866(0x1bb)]()[_0x5a0866(0x194)](),'campaignsEnabled':Yup[_0x5a0866(0x195)]()[_0x5a0866(0x194)](),'dueDate':Yup['date']()[_0x5a0866(0x194)](),'recurrence':Yup[_0x5a0866(0x175)]()['nullable']()});try{await _0x141a26[_0x5a0866(0x1b0)](_0x5f5020);}catch(_0x2dc6cd){throw new AppError_1[(_0x5a0866(0x1b8))](_0x2dc6cd[_0x5a0866(0x192)]);}const {id:_0x8646a6}=_0x340c3f[_0x5a0866(0x1ae)],_0xb1b85b=await(0x0,UpdateCompanyService_1[_0x5a0866(0x1b8)])({'id':_0x8646a6,..._0x5f5020});return _0x4b7fe4['status'](0xc8)[_0x5a0866(0x19a)](_0xb1b85b);};function a13_0x5627(){const _0x565ab8=['verify','../services/CompanyService/ShowPlanCompanyService','show','../services/CompanyService/FindAllCompaniesService','call','10770qpVlpK','get','../services/CompanyService/ListCompaniesService','toDate','../services/CompanyService/ListCompaniesPlanService','5044CVxbyf','__importDefault','string','writable','headers','11403600DdkyjD','dueDate','path','object','user','../services/CompanyService/ShowCompanyService','5wynFMz','prototype','secret','defineProperty','split','update','../services/CompanyService/DeleteCompanyService','/company','Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!','shape','../services/CompanyService/UpdateCompanyService','existsSync','yup','email','indexPlan','add','toString','query','authorization','resolve','message','9XdaaVk','nullable','boolean','findByPk','moment','constructor','create','json','2338984zxAlXq','320724vakyeZ','../services/CompanyService/UpdateSchedulesService','status','enabled','../config/auth','trialExpiration','list','store','69GzcRFT','remove','../models/User','__esModule','1118492gmVlwG','index','allowSignup','hasOwnProperty','configurable','super','params','body','validate','(((.+)+)+)+$','1991lorHgH','Error\x20creating\x20company','ERR_FORBIDDEN','19320DBAGVX','signup','parseInt','default','required','listPlan','number','../errors/AppError','2177xeRSWS','updateSchedules','../services/CompanyService/CreateCompanyService'];a13_0x5627=function(){return _0x565ab8;};return a13_0x5627();}exports[a13_0x450768(0x183)]=update;const updateSchedules=async(_0x2ac582,_0x50e76e)=>{const _0x76e26d=a13_0x450768,{schedules:_0x5a357b}=_0x2ac582['body'],{id:_0x5172c3}=_0x2ac582[_0x76e26d(0x1ae)],_0xd5fcd1=await User_1[_0x76e26d(0x1b8)][_0x76e26d(0x196)](_0x2ac582['user']['id']);if(!_0xd5fcd1[_0x76e26d(0x1ad)]&&Number['parseInt'](_0x5172c3,0xa)!==_0xd5fcd1['companyId'])throw new AppError_1[(_0x76e26d(0x1b8))](_0x76e26d(0x1b4),0x193);const _0x2d4aa1=await(0x0,UpdateSchedulesService_1['default'])({'id':_0x5172c3,'schedules':_0x5a357b});return _0x50e76e[_0x76e26d(0x19e)](0xc8)['json'](_0x2d4aa1);};exports[a13_0x450768(0x1be)]=updateSchedules;function a13_0x474f(_0x57d62c,_0x51019f){const _0x426856=a13_0x5627();return a13_0x474f=function(_0x37a46c,_0x29be10){_0x37a46c=_0x37a46c-0x16f;let _0x5627a6=_0x426856[_0x37a46c];return _0x5627a6;},a13_0x474f(_0x57d62c,_0x51019f);}const remove=async(_0x41fc91,_0x18366d)=>{const _0x52d3e1=a13_0x450768,{id:_0x23e69f}=_0x41fc91[_0x52d3e1(0x1ae)];fs_1[_0x52d3e1(0x1b8)][_0x52d3e1(0x189)](publicFolder+_0x52d3e1(0x185)+_0x23e69f+'/')&&fs_1[_0x52d3e1(0x1b8)]['rmdirSync'](publicFolder+'/company'+_0x23e69f+'/',{'recursive':!![]});const _0x316f47=await(0x0,DeleteCompanyService_1[_0x52d3e1(0x1b8)])(_0x23e69f);return _0x18366d[_0x52d3e1(0x19e)](0xc8)[_0x52d3e1(0x19a)](_0x316f47);};exports[a13_0x450768(0x1a5)]=remove;const listPlan=async(_0x3a6ef1,_0x7a2426)=>{const _0x35d67c=a13_0x450768,{id:_0x38c7b1}=_0x3a6ef1['params'],_0x183909=_0x3a6ef1[_0x35d67c(0x177)][_0x35d67c(0x190)],[,_0x453449]=_0x183909[_0x35d67c(0x182)]('\x20'),_0x22bf41=(0x0,jsonwebtoken_1['verify'])(_0x453449,auth_1[_0x35d67c(0x1b8)]['secret']),{id:_0x4213ca,profile:_0x3e58b8,companyId:_0x4e7f4e}=_0x22bf41,_0x1a29db=await User_1[_0x35d67c(0x1b8)]['findByPk'](_0x4213ca);if(_0x1a29db[_0x35d67c(0x1ad)]===!![]||_0x4e7f4e[_0x35d67c(0x18e)]()===_0x38c7b1){const _0x501d34=await(0x0,ShowPlanCompanyService_1[_0x35d67c(0x1b8)])(_0x38c7b1);return _0x7a2426[_0x35d67c(0x19e)](0xc8)[_0x35d67c(0x19a)](_0x501d34);}else return _0x7a2426[_0x35d67c(0x19e)](0x190)['json']({'error':'Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!'});};exports[a13_0x450768(0x1ba)]=listPlan;const indexPlan=async(_0x41c18f,_0x483b78)=>{const _0x3fc150=a13_0x450768,{searchParam:_0x59a729,pageNumber:_0x403fa1}=_0x41c18f[_0x3fc150(0x18f)],_0x5ee4ac=_0x41c18f[_0x3fc150(0x177)]['authorization'],[,_0x3b7406]=_0x5ee4ac[_0x3fc150(0x182)]('\x20'),_0x25c8c7=(0x0,jsonwebtoken_1[_0x3fc150(0x1c0)])(_0x3b7406,auth_1[_0x3fc150(0x1b8)][_0x3fc150(0x180)]),{id:_0x2d6e7d,profile:_0x1f1803,companyId:_0x2313ca}=_0x25c8c7,_0x5c4569=await User_1[_0x3fc150(0x1b8)][_0x3fc150(0x196)](_0x2d6e7d);if(_0x5c4569['super']===!![]){const _0x58d1bb=await(0x0,ListCompaniesPlanService_1['default'])();return _0x483b78['json']({'companies':_0x58d1bb});}else return _0x483b78[_0x3fc150(0x19e)](0x190)[_0x3fc150(0x19a)]({'error':_0x3fc150(0x186)});};exports[a13_0x450768(0x18c)]=indexPlan;