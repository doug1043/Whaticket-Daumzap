const a13_0x180849=a13_0x28f4;(function(_0x3a9b2b,_0x70541e){const _0x363515=a13_0x28f4,_0x3010ea=_0x3a9b2b();while(!![]){try{const _0x9323b0=-parseInt(_0x363515(0xf8))/0x1+-parseInt(_0x363515(0xcd))/0x2*(parseInt(_0x363515(0xc3))/0x3)+-parseInt(_0x363515(0xe9))/0x4*(parseInt(_0x363515(0xe2))/0x5)+parseInt(_0x363515(0xcb))/0x6+-parseInt(_0x363515(0xc1))/0x7+parseInt(_0x363515(0xb1))/0x8*(parseInt(_0x363515(0xc5))/0x9)+parseInt(_0x363515(0xea))/0xa*(parseInt(_0x363515(0xd0))/0xb);if(_0x9323b0===_0x70541e)break;else _0x3010ea['push'](_0x3010ea['shift']());}catch(_0x27ccdd){_0x3010ea['push'](_0x3010ea['shift']());}}}(a13_0x2f3c,0xa36c8));const a13_0x16f036=(function(){let _0xb720d6=!![];return function(_0x5536d8,_0x35efd8){const _0x4c538d=_0xb720d6?function(){const _0x2f0dcd=a13_0x28f4;if(_0x35efd8){const _0x32804f=_0x35efd8[_0x2f0dcd(0xca)](_0x5536d8,arguments);return _0x35efd8=null,_0x32804f;}}:function(){};return _0xb720d6=![],_0x4c538d;};}()),a13_0x3df112=a13_0x16f036(this,function(){const _0x52bea3=a13_0x28f4;return a13_0x3df112['toString']()['search'](_0x52bea3(0xec))[_0x52bea3(0xaf)]()['constructor'](a13_0x3df112)[_0x52bea3(0xe0)](_0x52bea3(0xec));});a13_0x3df112();'use strict';var __createBinding=this&&this[a13_0x180849(0xce)]||(Object['create']?function(_0x4b6780,_0x159817,_0x111ee8,_0x5e70f5){const _0x56fc00=a13_0x180849;if(_0x5e70f5===undefined)_0x5e70f5=_0x111ee8;var _0x23a8d1=Object['getOwnPropertyDescriptor'](_0x159817,_0x111ee8);(!_0x23a8d1||('get'in _0x23a8d1?!_0x159817[_0x56fc00(0xde)]:_0x23a8d1[_0x56fc00(0xe1)]||_0x23a8d1[_0x56fc00(0xd6)]))&&(_0x23a8d1={'enumerable':!![],'get':function(){return _0x159817[_0x111ee8];}}),Object[_0x56fc00(0xc2)](_0x4b6780,_0x5e70f5,_0x23a8d1);}:function(_0x3ed526,_0x45dbc1,_0x41f0a5,_0xf38eef){if(_0xf38eef===undefined)_0xf38eef=_0x41f0a5;_0x3ed526[_0xf38eef]=_0x45dbc1[_0x41f0a5];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a13_0x180849(0xad)]?function(_0x475d83,_0x34b18c){const _0x2a742e=a13_0x180849;Object[_0x2a742e(0xc2)](_0x475d83,_0x2a742e(0xa6),{'enumerable':!![],'value':_0x34b18c});}:function(_0x123c7f,_0x4f195b){_0x123c7f['default']=_0x4f195b;}),__importStar=this&&this[a13_0x180849(0xb6)]||function(_0x3232cd){const _0x4796b2=a13_0x180849;if(_0x3232cd&&_0x3232cd[_0x4796b2(0xde)])return _0x3232cd;var _0x35495b={};if(_0x3232cd!=null){for(var _0x183c4d in _0x3232cd)if(_0x183c4d!==_0x4796b2(0xa6)&&Object['prototype'][_0x4796b2(0xbd)][_0x4796b2(0xe4)](_0x3232cd,_0x183c4d))__createBinding(_0x35495b,_0x3232cd,_0x183c4d);}return __setModuleDefault(_0x35495b,_0x3232cd),_0x35495b;},__importDefault=this&&this['__importDefault']||function(_0x565f2f){const _0x2d9357=a13_0x180849;return _0x565f2f&&_0x565f2f[_0x2d9357(0xde)]?_0x565f2f:{'default':_0x565f2f};};Object[a13_0x180849(0xc2)](exports,'__esModule',{'value':!![]}),exports[a13_0x180849(0xa7)]=exports['listPlan']=exports[a13_0x180849(0xe3)]=exports[a13_0x180849(0xd2)]=exports['update']=exports['list']=exports['show']=exports[a13_0x180849(0xb7)]=exports[a13_0x180849(0xee)]=exports[a13_0x180849(0xa9)]=void 0x0;const Yup=__importStar(require(a13_0x180849(0xf4))),AppError_1=__importDefault(require('../errors/AppError')),auth_1=__importDefault(require(a13_0x180849(0xcc))),ListCompaniesService_1=__importDefault(require(a13_0x180849(0xf0))),CreateCompanyService_1=__importDefault(require('../services/CompanyService/CreateCompanyService')),UpdateCompanyService_1=__importDefault(require(a13_0x180849(0xb3))),ShowCompanyService_1=__importDefault(require('../services/CompanyService/ShowCompanyService')),UpdateSchedulesService_1=__importDefault(require(a13_0x180849(0xe6))),DeleteCompanyService_1=__importDefault(require(a13_0x180849(0xba))),FindAllCompaniesService_1=__importDefault(require('../services/CompanyService/FindAllCompaniesService')),jsonwebtoken_1=require(a13_0x180849(0xbe)),User_1=__importDefault(require(a13_0x180849(0xa5))),ShowPlanCompanyService_1=__importDefault(require(a13_0x180849(0xdb))),ListCompaniesPlanService_1=__importDefault(require(a13_0x180849(0xda))),CheckSettings_1=__importDefault(require(a13_0x180849(0xbf))),moment_1=__importDefault(require(a13_0x180849(0xac))),fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a13_0x180849(0xc8))),publicFolder=path_1[a13_0x180849(0xa6)][a13_0x180849(0xef)](__dirname,'..','..',a13_0x180849(0xf7)),index=async(_0x1db315,_0x5d0eaf)=>{const _0x15caed=a13_0x180849,{searchParam:_0x1bb70b,pageNumber:_0x546161}=_0x1db315['query'],{companies:_0x54c02b,count:_0x654e86,hasMore:_0x2abe5b}=await(0x0,ListCompaniesService_1[_0x15caed(0xa6)])({'searchParam':_0x1bb70b,'pageNumber':_0x546161});return _0x5d0eaf[_0x15caed(0xb2)]({'companies':_0x54c02b,'count':_0x654e86,'hasMore':_0x2abe5b});};exports[a13_0x180849(0xa9)]=index;const signup=async(_0x5b8d4a,_0x56eb32)=>{const _0x9bb2e8=a13_0x180849;if(await(0x0,CheckSettings_1['default'])(_0x9bb2e8(0xe8))!==_0x9bb2e8(0xb0))return _0x56eb32['status'](0x191)[_0x9bb2e8(0xb2)](_0x9bb2e8(0xf5));return await(0x0,exports[_0x9bb2e8(0xb7)])(_0x5b8d4a,_0x56eb32);};exports[a13_0x180849(0xee)]=signup;function a13_0x28f4(_0x1b5592,_0x483ad4){const _0x30d2ec=a13_0x2f3c();return a13_0x28f4=function(_0x3df112,_0x16f036){_0x3df112=_0x3df112-0xa4;let _0x2f3c12=_0x30d2ec[_0x3df112];return _0x2f3c12;},a13_0x28f4(_0x1b5592,_0x483ad4);}function a13_0x2f3c(){const _0x5bf2a7=['authorization','path','/company','apply','4116690giXRlL','../config/auth','2BFfhjz','__createBinding','show','1265oFNVGI','user','updateSchedules','query','message','secret','configurable','params','ERR_FORBIDDEN','validate','../services/CompanyService/ListCompaniesPlanService','../services/CompanyService/ShowPlanCompanyService','Error\x20creating\x20company','findByPk','__esModule','boolean','search','writable','93595rnYdMR','remove','call','status','../services/CompanyService/UpdateSchedulesService','super','allowSignup','244tVuwYm','174410IsXlQX','list','(((.+)+)+)+$','existsSync','signup','resolve','../services/CompanyService/ListCompaniesService','string','headers','number','yup','🙎🏻‍♂️\x20Signup\x20disabled','dueDate','public','24942iFAfYC','Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!','../models/User','default','indexPlan','days','index','nullable','split','moment','create','verify','toString','enabled','381328mnJfkq','json','../services/CompanyService/UpdateCompanyService','update','object','__importStar','store','body','date','../services/CompanyService/DeleteCompanyService','email','shape','hasOwnProperty','jsonwebtoken','../helpers/CheckSettings','add','7566412FCHGvm','defineProperty','611169zAhqXO','parseInt','81PHrSbx','toDate'];a13_0x2f3c=function(){return _0x5bf2a7;};return a13_0x2f3c();}const store=async(_0x329b9f,_0x7b1ffe)=>{const _0x1fbc31=a13_0x180849,_0x1dfb0b=_0x329b9f[_0x1fbc31(0xb8)];try{const _0x289ddd=await(0x0,CheckSettings_1['default'])('trialExpiration'),_0x29772c=parseInt(_0x289ddd,0xa);isNaN(_0x29772c)||_0x29772c<=0x0?_0x1dfb0b['dueDate']=(0x0,moment_1[_0x1fbc31(0xa6)])()[_0x1fbc31(0xc0)](0x7,_0x1fbc31(0xa8))[_0x1fbc31(0xc6)]():_0x1dfb0b[_0x1fbc31(0xf6)]=(0x0,moment_1[_0x1fbc31(0xa6)])()[_0x1fbc31(0xc0)](_0x29772c,_0x1fbc31(0xa8))[_0x1fbc31(0xc6)]();const _0x488a05=await(0x0,CreateCompanyService_1[_0x1fbc31(0xa6)])(_0x1dfb0b);return _0x7b1ffe['status'](0xc9)[_0x1fbc31(0xb2)](_0x488a05);}catch(_0x388097){return _0x7b1ffe[_0x1fbc31(0xe5)](0x1f4)[_0x1fbc31(0xb2)]({'message':_0x1fbc31(0xdc),'error':_0x388097});}};exports['store']=store;const show=async(_0x218c9f,_0x3779a7)=>{const _0x2e8afe=a13_0x180849,{id:_0x53bc29}=_0x218c9f[_0x2e8afe(0xd7)],_0x5b2e63=await User_1[_0x2e8afe(0xa6)][_0x2e8afe(0xdd)](_0x218c9f[_0x2e8afe(0xd1)]['id']);if(!_0x5b2e63[_0x2e8afe(0xe7)]&&Number[_0x2e8afe(0xc4)](_0x53bc29,0xa)!==_0x5b2e63['companyId'])throw new AppError_1['default']('ERR_FORBIDDEN',0x193);const _0x17cc9e=await(0x0,ShowCompanyService_1['default'])(_0x53bc29);return _0x3779a7['status'](0xc8)[_0x2e8afe(0xb2)](_0x17cc9e);};exports[a13_0x180849(0xcf)]=show;const list=async(_0x37e118,_0x446c45)=>{const _0x11e60f=a13_0x180849,_0x9b96f5=await(0x0,FindAllCompaniesService_1[_0x11e60f(0xa6)])();return _0x446c45[_0x11e60f(0xe5)](0xc8)['json'](_0x9b96f5);};exports[a13_0x180849(0xeb)]=list;const update=async(_0x394eaf,_0x1a39ee)=>{const _0x47addd=a13_0x180849,_0x12142f=_0x394eaf[_0x47addd(0xb8)],_0xda7aea=Yup[_0x47addd(0xb5)]()[_0x47addd(0xbc)]({'name':Yup[_0x47addd(0xf1)]()['required'](),'email':Yup[_0x47addd(0xf1)]()[_0x47addd(0xbb)]()[_0x47addd(0xaa)](),'phone':Yup[_0x47addd(0xf1)]()['nullable'](),'status':Yup['boolean']()[_0x47addd(0xaa)](),'planId':Yup[_0x47addd(0xf3)]()[_0x47addd(0xaa)](),'campaignsEnabled':Yup[_0x47addd(0xdf)]()[_0x47addd(0xaa)](),'dueDate':Yup[_0x47addd(0xb9)]()[_0x47addd(0xaa)](),'recurrence':Yup['string']()['nullable']()});try{await _0xda7aea[_0x47addd(0xd9)](_0x12142f);}catch(_0x4fc608){throw new AppError_1[(_0x47addd(0xa6))](_0x4fc608[_0x47addd(0xd4)]);}const {id:_0x498a4b}=_0x394eaf['params'],_0x48dbae=await(0x0,UpdateCompanyService_1['default'])({'id':_0x498a4b,..._0x12142f});return _0x1a39ee['status'](0xc8)[_0x47addd(0xb2)](_0x48dbae);};exports[a13_0x180849(0xb4)]=update;const updateSchedules=async(_0x456341,_0x166481)=>{const _0xe78653=a13_0x180849,{schedules:_0x250c54}=_0x456341[_0xe78653(0xb8)],{id:_0x55bf24}=_0x456341['params'],_0x2ee9fb=await User_1['default']['findByPk'](_0x456341['user']['id']);if(!_0x2ee9fb[_0xe78653(0xe7)]&&Number[_0xe78653(0xc4)](_0x55bf24,0xa)!==_0x2ee9fb['companyId'])throw new AppError_1[(_0xe78653(0xa6))](_0xe78653(0xd8),0x193);const _0x4309fa=await(0x0,UpdateSchedulesService_1[_0xe78653(0xa6)])({'id':_0x55bf24,'schedules':_0x250c54});return _0x166481[_0xe78653(0xe5)](0xc8)[_0xe78653(0xb2)](_0x4309fa);};exports[a13_0x180849(0xd2)]=updateSchedules;const remove=async(_0x4d8188,_0x34ad15)=>{const _0x315155=a13_0x180849,{id:_0x24b370}=_0x4d8188[_0x315155(0xd7)];fs_1['default'][_0x315155(0xed)](publicFolder+_0x315155(0xc9)+_0x24b370+'/')&&fs_1[_0x315155(0xa6)]['rmdirSync'](publicFolder+_0x315155(0xc9)+_0x24b370+'/',{'recursive':!![]});const _0x44b09d=await(0x0,DeleteCompanyService_1['default'])(_0x24b370);return _0x34ad15[_0x315155(0xe5)](0xc8)[_0x315155(0xb2)](_0x44b09d);};exports[a13_0x180849(0xe3)]=remove;const listPlan=async(_0x317e48,_0x4c4115)=>{const _0x44e5d7=a13_0x180849,{id:_0x30cbdc}=_0x317e48[_0x44e5d7(0xd7)],_0x3173a1=_0x317e48[_0x44e5d7(0xf2)][_0x44e5d7(0xc7)],[,_0x587af5]=_0x3173a1['split']('\x20'),_0x2203f0=(0x0,jsonwebtoken_1['verify'])(_0x587af5,auth_1[_0x44e5d7(0xa6)][_0x44e5d7(0xd5)]),{id:_0x10ae43,profile:_0x5d0db6,companyId:_0x4ff015}=_0x2203f0,_0x166847=await User_1['default'][_0x44e5d7(0xdd)](_0x10ae43);if(_0x166847[_0x44e5d7(0xe7)]===!![]||_0x4ff015[_0x44e5d7(0xaf)]()===_0x30cbdc){const _0x2dae6d=await(0x0,ShowPlanCompanyService_1[_0x44e5d7(0xa6)])(_0x30cbdc);return _0x4c4115[_0x44e5d7(0xe5)](0xc8)[_0x44e5d7(0xb2)](_0x2dae6d);}else return _0x4c4115[_0x44e5d7(0xe5)](0x190)['json']({'error':_0x44e5d7(0xa4)});};exports['listPlan']=listPlan;const indexPlan=async(_0x360939,_0x41571)=>{const _0x1d368e=a13_0x180849,{searchParam:_0x57c49c,pageNumber:_0x1bf63a}=_0x360939[_0x1d368e(0xd3)],_0x321c53=_0x360939[_0x1d368e(0xf2)]['authorization'],[,_0x37b6ae]=_0x321c53[_0x1d368e(0xab)]('\x20'),_0x146161=(0x0,jsonwebtoken_1[_0x1d368e(0xae)])(_0x37b6ae,auth_1[_0x1d368e(0xa6)][_0x1d368e(0xd5)]),{id:_0x3bf921,profile:_0x5d1ecc,companyId:_0x484dfb}=_0x146161,_0x2b2d44=await User_1['default'][_0x1d368e(0xdd)](_0x3bf921);if(_0x2b2d44[_0x1d368e(0xe7)]===!![]){const _0x1e79b7=await(0x0,ListCompaniesPlanService_1[_0x1d368e(0xa6)])();return _0x41571[_0x1d368e(0xb2)]({'companies':_0x1e79b7});}else return _0x41571[_0x1d368e(0xe5)](0x190)[_0x1d368e(0xb2)]({'error':_0x1d368e(0xa4)});};exports[a13_0x180849(0xa7)]=indexPlan;