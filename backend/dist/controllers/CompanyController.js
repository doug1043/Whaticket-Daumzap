const a13_0x22f054=a13_0x2502;(function(_0x30659c,_0x5df22c){const _0x1f6175=a13_0x2502,_0x38f518=_0x30659c();while(!![]){try{const _0x5edbeb=-parseInt(_0x1f6175(0x16f))/0x1*(-parseInt(_0x1f6175(0x15a))/0x2)+parseInt(_0x1f6175(0x11e))/0x3+parseInt(_0x1f6175(0x127))/0x4*(-parseInt(_0x1f6175(0x120))/0x5)+parseInt(_0x1f6175(0x13d))/0x6*(parseInt(_0x1f6175(0x131))/0x7)+parseInt(_0x1f6175(0x16e))/0x8+-parseInt(_0x1f6175(0x139))/0x9+-parseInt(_0x1f6175(0x143))/0xa;if(_0x5edbeb===_0x5df22c)break;else _0x38f518['push'](_0x38f518['shift']());}catch(_0x2a1ca0){_0x38f518['push'](_0x38f518['shift']());}}}(a13_0x50c0,0x71dad));const a13_0x37b259=(function(){let _0x2d23a8=!![];return function(_0x4ab063,_0x25300c){const _0x570ddd=_0x2d23a8?function(){const _0xbe0044=a13_0x2502;if(_0x25300c){const _0x2e8120=_0x25300c[_0xbe0044(0x133)](_0x4ab063,arguments);return _0x25300c=null,_0x2e8120;}}:function(){};return _0x2d23a8=![],_0x570ddd;};}()),a13_0x48eb3a=a13_0x37b259(this,function(){const _0x347c31=a13_0x2502;return a13_0x48eb3a[_0x347c31(0x129)]()[_0x347c31(0x145)]('(((.+)+)+)+$')[_0x347c31(0x129)]()[_0x347c31(0x172)](a13_0x48eb3a)[_0x347c31(0x145)](_0x347c31(0x135));});a13_0x48eb3a();'use strict';var __createBinding=this&&this[a13_0x22f054(0x13c)]||(Object['create']?function(_0x5a8ec9,_0x552721,_0x1de65c,_0x50c404){const _0x241f9b=a13_0x22f054;if(_0x50c404===undefined)_0x50c404=_0x1de65c;var _0x375d07=Object[_0x241f9b(0x160)](_0x552721,_0x1de65c);(!_0x375d07||('get'in _0x375d07?!_0x552721[_0x241f9b(0x142)]:_0x375d07[_0x241f9b(0x14a)]||_0x375d07[_0x241f9b(0x157)]))&&(_0x375d07={'enumerable':!![],'get':function(){return _0x552721[_0x1de65c];}}),Object[_0x241f9b(0x15b)](_0x5a8ec9,_0x50c404,_0x375d07);}:function(_0x54543d,_0x37dd76,_0x1e2f2d,_0x539981){if(_0x539981===undefined)_0x539981=_0x1e2f2d;_0x54543d[_0x539981]=_0x37dd76[_0x1e2f2d];}),__setModuleDefault=this&&this[a13_0x22f054(0x14d)]||(Object[a13_0x22f054(0x152)]?function(_0x3634fa,_0x129400){const _0x31efd6=a13_0x22f054;Object[_0x31efd6(0x15b)](_0x3634fa,_0x31efd6(0x14f),{'enumerable':!![],'value':_0x129400});}:function(_0x1ab348,_0x29f38d){_0x1ab348['default']=_0x29f38d;}),__importStar=this&&this['__importStar']||function(_0x22930b){const _0x4bf366=a13_0x22f054;if(_0x22930b&&_0x22930b[_0x4bf366(0x142)])return _0x22930b;var _0x26f69f={};if(_0x22930b!=null){for(var _0x287c7d in _0x22930b)if(_0x287c7d!==_0x4bf366(0x14f)&&Object[_0x4bf366(0x140)][_0x4bf366(0x173)][_0x4bf366(0x138)](_0x22930b,_0x287c7d))__createBinding(_0x26f69f,_0x22930b,_0x287c7d);}return __setModuleDefault(_0x26f69f,_0x22930b),_0x26f69f;},__importDefault=this&&this['__importDefault']||function(_0x307f6f){return _0x307f6f&&_0x307f6f['__esModule']?_0x307f6f:{'default':_0x307f6f};};Object[a13_0x22f054(0x15b)](exports,a13_0x22f054(0x142),{'value':!![]}),exports[a13_0x22f054(0x159)]=exports['listPlan']=exports[a13_0x22f054(0x169)]=exports[a13_0x22f054(0x155)]=exports[a13_0x22f054(0x132)]=exports[a13_0x22f054(0x16c)]=exports[a13_0x22f054(0x121)]=exports[a13_0x22f054(0x154)]=exports[a13_0x22f054(0x148)]=exports[a13_0x22f054(0x14e)]=void 0x0;const Yup=__importStar(require(a13_0x22f054(0x13f))),AppError_1=__importDefault(require(a13_0x22f054(0x13b))),auth_1=__importDefault(require(a13_0x22f054(0x15e))),ListCompaniesService_1=__importDefault(require(a13_0x22f054(0x136))),CreateCompanyService_1=__importDefault(require(a13_0x22f054(0x167))),UpdateCompanyService_1=__importDefault(require('../services/CompanyService/UpdateCompanyService')),ShowCompanyService_1=__importDefault(require(a13_0x22f054(0x12b))),UpdateSchedulesService_1=__importDefault(require(a13_0x22f054(0x146))),DeleteCompanyService_1=__importDefault(require(a13_0x22f054(0x128))),FindAllCompaniesService_1=__importDefault(require(a13_0x22f054(0x15d))),jsonwebtoken_1=require('jsonwebtoken'),User_1=__importDefault(require(a13_0x22f054(0x12c))),ShowPlanCompanyService_1=__importDefault(require(a13_0x22f054(0x147))),ListCompaniesPlanService_1=__importDefault(require(a13_0x22f054(0x16a))),CheckSettings_1=__importDefault(require(a13_0x22f054(0x125))),moment_1=__importDefault(require('moment')),fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a13_0x22f054(0x153))),publicFolder=path_1[a13_0x22f054(0x14f)][a13_0x22f054(0x144)](__dirname,'..','..','public'),index=async(_0x19c9d4,_0x4ee435)=>{const _0x3332e8=a13_0x22f054,{searchParam:_0x1b1872,pageNumber:_0x5648c3}=_0x19c9d4[_0x3332e8(0x13a)],{companies:_0x193895,count:_0x416351,hasMore:_0x4ce9b4}=await(0x0,ListCompaniesService_1[_0x3332e8(0x14f)])({'searchParam':_0x1b1872,'pageNumber':_0x5648c3});return _0x4ee435[_0x3332e8(0x16b)]({'companies':_0x193895,'count':_0x416351,'hasMore':_0x4ce9b4});};exports[a13_0x22f054(0x14e)]=index;const signup=async(_0x59bc7d,_0x2683aa)=>{const _0x2145aa=a13_0x22f054;if(await(0x0,CheckSettings_1[_0x2145aa(0x14f)])(_0x2145aa(0x151))!==_0x2145aa(0x11f))return _0x2683aa[_0x2145aa(0x161)](0x191)[_0x2145aa(0x16b)](_0x2145aa(0x149));return await(0x0,exports[_0x2145aa(0x154)])(_0x59bc7d,_0x2683aa);};exports[a13_0x22f054(0x148)]=signup;const store=async(_0x9ccebd,_0x3b4aaa)=>{const _0x55f296=a13_0x22f054,_0x57d699=_0x9ccebd[_0x55f296(0x134)];try{const _0x921418=await(0x0,CheckSettings_1['default'])('trialExpiration'),_0xe12d8a=parseInt(_0x921418,0xa);isNaN(_0xe12d8a)||_0xe12d8a<=0x0?_0x57d699['dueDate']=(0x0,moment_1[_0x55f296(0x14f)])()[_0x55f296(0x12e)](0x7,_0x55f296(0x11d))['toDate']():_0x57d699[_0x55f296(0x126)]=(0x0,moment_1[_0x55f296(0x14f)])()[_0x55f296(0x12e)](_0xe12d8a,_0x55f296(0x11d))['toDate']();const _0x3c4621=await(0x0,CreateCompanyService_1['default'])(_0x57d699);return _0x3b4aaa[_0x55f296(0x161)](0xc9)['json'](_0x3c4621);}catch(_0x57f051){return _0x3b4aaa['status'](0x1f4)[_0x55f296(0x16b)]({'message':_0x55f296(0x12f),'error':_0x57f051});}};function a13_0x50c0(){const _0x4fd45c=['getOwnPropertyDescriptor','status','message','super','authorization','parseInt','nullable','../services/CompanyService/CreateCompanyService','date','remove','../services/CompanyService/ListCompaniesPlanService','json','list','validate','1251928uBrTDT','14NhwbQj','split','params','constructor','hasOwnProperty','days','2532675tanJjN','enabled','1938565LZKFGO','show','number','string','secret','../helpers/CheckSettings','dueDate','8jClUrz','../services/CompanyService/DeleteCompanyService','toString','listPlan','../services/CompanyService/ShowCompanyService','../models/User','findByPk','add','Error\x20creating\x20company','/company','14987UYVLXc','update','apply','body','(((.+)+)+)+$','../services/CompanyService/ListCompaniesService','rmdirSync','call','6416460usbLYO','query','../errors/AppError','__createBinding','1278PJunvx','user','yup','prototype','boolean','__esModule','1269240eGfeNU','resolve','search','../services/CompanyService/UpdateSchedulesService','../services/CompanyService/ShowPlanCompanyService','signup','🙎🏻‍♂️\x20Signup\x20disabled','writable','verify','existsSync','__setModuleDefault','index','default','email','allowSignup','create','path','store','updateSchedules','headers','configurable','ERR_FORBIDDEN','indexPlan','89270sVlfyW','defineProperty','required','../services/CompanyService/FindAllCompaniesService','../config/auth','companyId'];a13_0x50c0=function(){return _0x4fd45c;};return a13_0x50c0();}exports['store']=store;const show=async(_0x313e9e,_0x32d384)=>{const _0x5cb28b=a13_0x22f054,{id:_0x15638d}=_0x313e9e['params'],_0x7b1530=await User_1[_0x5cb28b(0x14f)][_0x5cb28b(0x12d)](_0x313e9e[_0x5cb28b(0x13e)]['id']);if(!_0x7b1530[_0x5cb28b(0x163)]&&Number['parseInt'](_0x15638d,0xa)!==_0x7b1530[_0x5cb28b(0x15f)])throw new AppError_1['default']('ERR_FORBIDDEN',0x193);const _0x5c14c1=await(0x0,ShowCompanyService_1[_0x5cb28b(0x14f)])(_0x15638d);return _0x32d384[_0x5cb28b(0x161)](0xc8)[_0x5cb28b(0x16b)](_0x5c14c1);};exports[a13_0x22f054(0x121)]=show;const list=async(_0x206d08,_0x5970ce)=>{const _0xfbbf4d=a13_0x22f054,_0x31785f=await(0x0,FindAllCompaniesService_1['default'])();return _0x5970ce[_0xfbbf4d(0x161)](0xc8)[_0xfbbf4d(0x16b)](_0x31785f);};exports['list']=list;const update=async(_0x3715ac,_0x133b55)=>{const _0x2b78c3=a13_0x22f054,_0x416dd2=_0x3715ac[_0x2b78c3(0x134)],_0x1c639a=Yup['object']()['shape']({'name':Yup[_0x2b78c3(0x123)]()[_0x2b78c3(0x15c)](),'email':Yup['string']()[_0x2b78c3(0x150)]()[_0x2b78c3(0x166)](),'phone':Yup[_0x2b78c3(0x123)]()[_0x2b78c3(0x166)](),'status':Yup[_0x2b78c3(0x141)]()[_0x2b78c3(0x166)](),'planId':Yup[_0x2b78c3(0x122)]()['nullable'](),'campaignsEnabled':Yup['boolean']()[_0x2b78c3(0x166)](),'dueDate':Yup[_0x2b78c3(0x168)]()[_0x2b78c3(0x166)](),'recurrence':Yup[_0x2b78c3(0x123)]()['nullable']()});try{await _0x1c639a[_0x2b78c3(0x16d)](_0x416dd2);}catch(_0x52a175){throw new AppError_1[(_0x2b78c3(0x14f))](_0x52a175[_0x2b78c3(0x162)]);}const {id:_0x45eaf3}=_0x3715ac['params'],_0x456ff2=await(0x0,UpdateCompanyService_1[_0x2b78c3(0x14f)])({'id':_0x45eaf3,..._0x416dd2});return _0x133b55[_0x2b78c3(0x161)](0xc8)[_0x2b78c3(0x16b)](_0x456ff2);};exports[a13_0x22f054(0x132)]=update;const updateSchedules=async(_0x5bfead,_0x116403)=>{const _0x5ed4af=a13_0x22f054,{schedules:_0x29a338}=_0x5bfead['body'],{id:_0x1667e1}=_0x5bfead[_0x5ed4af(0x171)],_0x3449ed=await User_1[_0x5ed4af(0x14f)][_0x5ed4af(0x12d)](_0x5bfead['user']['id']);if(!_0x3449ed[_0x5ed4af(0x163)]&&Number[_0x5ed4af(0x165)](_0x1667e1,0xa)!==_0x3449ed['companyId'])throw new AppError_1[(_0x5ed4af(0x14f))](_0x5ed4af(0x158),0x193);const _0x1d0da8=await(0x0,UpdateSchedulesService_1[_0x5ed4af(0x14f)])({'id':_0x1667e1,'schedules':_0x29a338});return _0x116403[_0x5ed4af(0x161)](0xc8)[_0x5ed4af(0x16b)](_0x1d0da8);};exports[a13_0x22f054(0x155)]=updateSchedules;const remove=async(_0x207c82,_0x2b4c81)=>{const _0x3378cd=a13_0x22f054,{id:_0x16d4ba}=_0x207c82[_0x3378cd(0x171)];fs_1[_0x3378cd(0x14f)][_0x3378cd(0x14c)](publicFolder+_0x3378cd(0x130)+_0x16d4ba+'/')&&fs_1[_0x3378cd(0x14f)][_0x3378cd(0x137)](publicFolder+'/company'+_0x16d4ba+'/',{'recursive':!![]});const _0x1d204f=await(0x0,DeleteCompanyService_1[_0x3378cd(0x14f)])(_0x16d4ba);return _0x2b4c81[_0x3378cd(0x161)](0xc8)['json'](_0x1d204f);};exports[a13_0x22f054(0x169)]=remove;function a13_0x2502(_0x4d0208,_0x147cca){const _0x1e006b=a13_0x50c0();return a13_0x2502=function(_0x48eb3a,_0x37b259){_0x48eb3a=_0x48eb3a-0x11d;let _0x50c026=_0x1e006b[_0x48eb3a];return _0x50c026;},a13_0x2502(_0x4d0208,_0x147cca);}const listPlan=async(_0x522371,_0x4a0add)=>{const _0x38b87e=a13_0x22f054,{id:_0x4d216c}=_0x522371[_0x38b87e(0x171)],_0x41c732=_0x522371['headers'][_0x38b87e(0x164)],[,_0x59ce5e]=_0x41c732[_0x38b87e(0x170)]('\x20'),_0x3836bc=(0x0,jsonwebtoken_1[_0x38b87e(0x14b)])(_0x59ce5e,auth_1[_0x38b87e(0x14f)][_0x38b87e(0x124)]),{id:_0x1168c7,profile:_0x4b9c77,companyId:_0x496b4a}=_0x3836bc,_0x35365e=await User_1[_0x38b87e(0x14f)][_0x38b87e(0x12d)](_0x1168c7);if(_0x35365e[_0x38b87e(0x163)]===!![]||_0x496b4a[_0x38b87e(0x129)]()===_0x4d216c){const _0x9b5523=await(0x0,ShowPlanCompanyService_1[_0x38b87e(0x14f)])(_0x4d216c);return _0x4a0add[_0x38b87e(0x161)](0xc8)[_0x38b87e(0x16b)](_0x9b5523);}else return _0x4a0add[_0x38b87e(0x161)](0x190)['json']({'error':'Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!'});};exports[a13_0x22f054(0x12a)]=listPlan;const indexPlan=async(_0x466b3f,_0x2abcbe)=>{const _0x19c866=a13_0x22f054,{searchParam:_0x5703f7,pageNumber:_0x2015b3}=_0x466b3f[_0x19c866(0x13a)],_0x413401=_0x466b3f[_0x19c866(0x156)][_0x19c866(0x164)],[,_0xc948a6]=_0x413401[_0x19c866(0x170)]('\x20'),_0x19a180=(0x0,jsonwebtoken_1[_0x19c866(0x14b)])(_0xc948a6,auth_1['default']['secret']),{id:_0x532463,profile:_0x573148,companyId:_0x49764d}=_0x19a180,_0x5dddb5=await User_1[_0x19c866(0x14f)][_0x19c866(0x12d)](_0x532463);if(_0x5dddb5['super']===!![]){const _0x529895=await(0x0,ListCompaniesPlanService_1['default'])();return _0x2abcbe[_0x19c866(0x16b)]({'companies':_0x529895});}else return _0x2abcbe['status'](0x190)[_0x19c866(0x16b)]({'error':'Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!'});};exports[a13_0x22f054(0x159)]=indexPlan;