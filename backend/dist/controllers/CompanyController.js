const a13_0x586343=a13_0x12e8;(function(_0xc92552,_0x1b9b1a){const _0x74f814=a13_0x12e8,_0x1efd1a=_0xc92552();while(!![]){try{const _0x3f3546=parseInt(_0x74f814(0x171))/0x1*(parseInt(_0x74f814(0x16c))/0x2)+-parseInt(_0x74f814(0x14c))/0x3+-parseInt(_0x74f814(0x151))/0x4*(parseInt(_0x74f814(0x145))/0x5)+-parseInt(_0x74f814(0x14d))/0x6+parseInt(_0x74f814(0x13f))/0x7*(parseInt(_0x74f814(0x16a))/0x8)+-parseInt(_0x74f814(0x138))/0x9*(-parseInt(_0x74f814(0x142))/0xa)+-parseInt(_0x74f814(0x132))/0xb*(-parseInt(_0x74f814(0x174))/0xc);if(_0x3f3546===_0x1b9b1a)break;else _0x1efd1a['push'](_0x1efd1a['shift']());}catch(_0x284ab1){_0x1efd1a['push'](_0x1efd1a['shift']());}}}(a13_0x1e7c,0xf3105));const a13_0x199895=(function(){let _0x156818=!![];return function(_0x258ced,_0x132c27){const _0x55c9e7=_0x156818?function(){const _0x30d27c=a13_0x12e8;if(_0x132c27){const _0xaa4a34=_0x132c27[_0x30d27c(0x16e)](_0x258ced,arguments);return _0x132c27=null,_0xaa4a34;}}:function(){};return _0x156818=![],_0x55c9e7;};}()),a13_0x425afd=a13_0x199895(this,function(){const _0x2de275=a13_0x12e8;return a13_0x425afd['toString']()['search']('(((.+)+)+)+$')[_0x2de275(0x143)]()['constructor'](a13_0x425afd)[_0x2de275(0x165)](_0x2de275(0x12e));});function a13_0x12e8(_0x114055,_0x3b790e){const _0x3adc10=a13_0x1e7c();return a13_0x12e8=function(_0x425afd,_0x199895){_0x425afd=_0x425afd-0x122;let _0x1e7c7f=_0x3adc10[_0x425afd];return _0x1e7c7f;},a13_0x12e8(_0x114055,_0x3b790e);}a13_0x425afd();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a13_0x586343(0x14b)]?function(_0x1075ea,_0x4e923a,_0x30203f,_0x34a5ee){const _0x6b8198=a13_0x586343;if(_0x34a5ee===undefined)_0x34a5ee=_0x30203f;var _0x4b6fd9=Object[_0x6b8198(0x139)](_0x4e923a,_0x30203f);(!_0x4b6fd9||(_0x6b8198(0x127)in _0x4b6fd9?!_0x4e923a[_0x6b8198(0x141)]:_0x4b6fd9['writable']||_0x4b6fd9[_0x6b8198(0x147)]))&&(_0x4b6fd9={'enumerable':!![],'get':function(){return _0x4e923a[_0x30203f];}}),Object['defineProperty'](_0x1075ea,_0x34a5ee,_0x4b6fd9);}:function(_0x306dac,_0xf70e8e,_0x3d5363,_0x16d532){if(_0x16d532===undefined)_0x16d532=_0x3d5363;_0x306dac[_0x16d532]=_0xf70e8e[_0x3d5363];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a13_0x586343(0x14b)]?function(_0x1b046b,_0x57dcf0){const _0x5ce93e=a13_0x586343;Object[_0x5ce93e(0x146)](_0x1b046b,_0x5ce93e(0x16d),{'enumerable':!![],'value':_0x57dcf0});}:function(_0xf2ff9c,_0x3aa8da){const _0x30b09f=a13_0x586343;_0xf2ff9c[_0x30b09f(0x16d)]=_0x3aa8da;}),__importStar=this&&this['__importStar']||function(_0x5f46ed){const _0x4c25c3=a13_0x586343;if(_0x5f46ed&&_0x5f46ed[_0x4c25c3(0x141)])return _0x5f46ed;var _0x497465={};if(_0x5f46ed!=null){for(var _0x2feecf in _0x5f46ed)if(_0x2feecf!=='default'&&Object['prototype'][_0x4c25c3(0x12a)][_0x4c25c3(0x148)](_0x5f46ed,_0x2feecf))__createBinding(_0x497465,_0x5f46ed,_0x2feecf);}return __setModuleDefault(_0x497465,_0x5f46ed),_0x497465;},__importDefault=this&&this[a13_0x586343(0x13d)]||function(_0x53292c){const _0x51ee7e=a13_0x586343;return _0x53292c&&_0x53292c[_0x51ee7e(0x141)]?_0x53292c:{'default':_0x53292c};};Object[a13_0x586343(0x146)](exports,a13_0x586343(0x141),{'value':!![]}),exports[a13_0x586343(0x153)]=exports[a13_0x586343(0x163)]=exports[a13_0x586343(0x173)]=exports['updateSchedules']=exports[a13_0x586343(0x126)]=exports[a13_0x586343(0x162)]=exports[a13_0x586343(0x135)]=exports[a13_0x586343(0x134)]=exports[a13_0x586343(0x16f)]=exports[a13_0x586343(0x15d)]=void 0x0;const Yup=__importStar(require(a13_0x586343(0x137))),AppError_1=__importDefault(require('../errors/AppError')),auth_1=__importDefault(require('../config/auth')),ListCompaniesService_1=__importDefault(require(a13_0x586343(0x164))),CreateCompanyService_1=__importDefault(require(a13_0x586343(0x13b))),UpdateCompanyService_1=__importDefault(require('../services/CompanyService/UpdateCompanyService')),ShowCompanyService_1=__importDefault(require(a13_0x586343(0x12c))),UpdateSchedulesService_1=__importDefault(require(a13_0x586343(0x130))),DeleteCompanyService_1=__importDefault(require(a13_0x586343(0x157))),FindAllCompaniesService_1=__importDefault(require(a13_0x586343(0x14f))),jsonwebtoken_1=require(a13_0x586343(0x158)),User_1=__importDefault(require(a13_0x586343(0x123))),ShowPlanCompanyService_1=__importDefault(require('../services/CompanyService/ShowPlanCompanyService')),ListCompaniesPlanService_1=__importDefault(require(a13_0x586343(0x15a))),CheckSettings_1=__importDefault(require('../helpers/CheckSettings')),moment_1=__importDefault(require('moment')),fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a13_0x586343(0x14e))),publicFolder=path_1[a13_0x586343(0x16d)]['resolve'](__dirname,'..','..',a13_0x586343(0x13e)),index=async(_0x4b9a50,_0x2ef42d)=>{const _0x2a647e=a13_0x586343,{searchParam:_0x3c4aef,pageNumber:_0x2291a0}=_0x4b9a50[_0x2a647e(0x149)],{companies:_0x4c9a03,count:_0x3bae42,hasMore:_0x522c99}=await(0x0,ListCompaniesService_1[_0x2a647e(0x16d)])({'searchParam':_0x3c4aef,'pageNumber':_0x2291a0});return _0x2ef42d[_0x2a647e(0x15b)]({'companies':_0x4c9a03,'count':_0x3bae42,'hasMore':_0x522c99});};exports[a13_0x586343(0x15d)]=index;function a13_0x1e7c(){const _0x5ebe5e=['authorization','54608goLFQo','params','2USDmwx','default','apply','signup','parseInt','1189158ultnQq','super','remove','504zyHobw','rmdirSync','string','../models/User','toDate','nullable','update','get','trialExpiration','boolean','hasOwnProperty','/company','../services/CompanyService/ShowCompanyService','days','(((.+)+)+)+$','Error\x20creating\x20company','../services/CompanyService/UpdateSchedulesService','headers','19833nJwvjI','verify','store','show','Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!','yup','19935okypfj','getOwnPropertyDescriptor','updateSchedules','../services/CompanyService/CreateCompanyService','add','__importDefault','public','1477SRUJer','email','__esModule','4810ZuFeSj','toString','shape','5kuusEf','defineProperty','configurable','call','query','user','create','2312859imRaTk','10505460lnAUHK','path','../services/CompanyService/FindAllCompaniesService','message','1012532hGkDGx','dueDate','indexPlan','validate','required','allowSignup','../services/CompanyService/DeleteCompanyService','jsonwebtoken','enabled','../services/CompanyService/ListCompaniesPlanService','json','ERR_FORBIDDEN','index','findByPk','status','split','number','list','listPlan','../services/CompanyService/ListCompaniesService','search','companyId','body','existsSync'];a13_0x1e7c=function(){return _0x5ebe5e;};return a13_0x1e7c();}const signup=async(_0x2db1ec,_0x4ceb89)=>{const _0x2a1a7d=a13_0x586343;if(await(0x0,CheckSettings_1[_0x2a1a7d(0x16d)])(_0x2a1a7d(0x156))!==_0x2a1a7d(0x159))return _0x4ceb89[_0x2a1a7d(0x15f)](0x191)[_0x2a1a7d(0x15b)]('🙎🏻‍♂️\x20Signup\x20disabled');return await(0x0,exports[_0x2a1a7d(0x134)])(_0x2db1ec,_0x4ceb89);};exports[a13_0x586343(0x16f)]=signup;const store=async(_0x30a4df,_0x1e8865)=>{const _0x4ed12a=a13_0x586343,_0x3534ef=_0x30a4df[_0x4ed12a(0x167)];try{const _0x1f9595=await(0x0,CheckSettings_1['default'])(_0x4ed12a(0x128)),_0x584417=parseInt(_0x1f9595,0xa);isNaN(_0x584417)||_0x584417<=0x0?_0x3534ef['dueDate']=(0x0,moment_1[_0x4ed12a(0x16d)])()[_0x4ed12a(0x13c)](0x7,_0x4ed12a(0x12d))[_0x4ed12a(0x124)]():_0x3534ef[_0x4ed12a(0x152)]=(0x0,moment_1[_0x4ed12a(0x16d)])()[_0x4ed12a(0x13c)](_0x584417,_0x4ed12a(0x12d))[_0x4ed12a(0x124)]();const _0x1ae682=await(0x0,CreateCompanyService_1[_0x4ed12a(0x16d)])(_0x3534ef);return _0x1e8865['status'](0xc9)[_0x4ed12a(0x15b)](_0x1ae682);}catch(_0x287154){return _0x1e8865[_0x4ed12a(0x15f)](0x1f4)[_0x4ed12a(0x15b)]({'message':_0x4ed12a(0x12f),'error':_0x287154});}};exports[a13_0x586343(0x134)]=store;const show=async(_0x40096a,_0x1ab8c3)=>{const _0x3bbac6=a13_0x586343,{id:_0x236ffe}=_0x40096a[_0x3bbac6(0x16b)],_0x33596d=await User_1[_0x3bbac6(0x16d)][_0x3bbac6(0x15e)](_0x40096a[_0x3bbac6(0x14a)]['id']);if(!_0x33596d['super']&&Number[_0x3bbac6(0x170)](_0x236ffe,0xa)!==_0x33596d[_0x3bbac6(0x166)])throw new AppError_1['default']('ERR_FORBIDDEN',0x193);const _0x1bf2db=await(0x0,ShowCompanyService_1[_0x3bbac6(0x16d)])(_0x236ffe);return _0x1ab8c3['status'](0xc8)[_0x3bbac6(0x15b)](_0x1bf2db);};exports[a13_0x586343(0x135)]=show;const list=async(_0x2b5b6c,_0x58d116)=>{const _0x698b3b=a13_0x586343,_0x24bd2c=await(0x0,FindAllCompaniesService_1[_0x698b3b(0x16d)])();return _0x58d116[_0x698b3b(0x15f)](0xc8)['json'](_0x24bd2c);};exports[a13_0x586343(0x162)]=list;const update=async(_0x22380f,_0x2469e2)=>{const _0xa7b501=a13_0x586343,_0x50191a=_0x22380f['body'],_0x20094=Yup['object']()[_0xa7b501(0x144)]({'name':Yup[_0xa7b501(0x122)]()[_0xa7b501(0x155)](),'email':Yup[_0xa7b501(0x122)]()[_0xa7b501(0x140)]()[_0xa7b501(0x125)](),'phone':Yup[_0xa7b501(0x122)]()['nullable'](),'status':Yup[_0xa7b501(0x129)]()[_0xa7b501(0x125)](),'planId':Yup[_0xa7b501(0x161)]()[_0xa7b501(0x125)](),'campaignsEnabled':Yup[_0xa7b501(0x129)]()[_0xa7b501(0x125)](),'dueDate':Yup['date']()[_0xa7b501(0x125)](),'recurrence':Yup[_0xa7b501(0x122)]()[_0xa7b501(0x125)]()});try{await _0x20094[_0xa7b501(0x154)](_0x50191a);}catch(_0x39a33c){throw new AppError_1[(_0xa7b501(0x16d))](_0x39a33c[_0xa7b501(0x150)]);}const {id:_0x27de32}=_0x22380f[_0xa7b501(0x16b)],_0x562a7f=await(0x0,UpdateCompanyService_1['default'])({'id':_0x27de32,..._0x50191a});return _0x2469e2[_0xa7b501(0x15f)](0xc8)[_0xa7b501(0x15b)](_0x562a7f);};exports[a13_0x586343(0x126)]=update;const updateSchedules=async(_0x3931b3,_0x37b0ab)=>{const _0x56ea83=a13_0x586343,{schedules:_0x20041a}=_0x3931b3[_0x56ea83(0x167)],{id:_0x9976bc}=_0x3931b3[_0x56ea83(0x16b)],_0xc327d8=await User_1[_0x56ea83(0x16d)]['findByPk'](_0x3931b3[_0x56ea83(0x14a)]['id']);if(!_0xc327d8['super']&&Number['parseInt'](_0x9976bc,0xa)!==_0xc327d8['companyId'])throw new AppError_1['default'](_0x56ea83(0x15c),0x193);const _0x2ba2c0=await(0x0,UpdateSchedulesService_1['default'])({'id':_0x9976bc,'schedules':_0x20041a});return _0x37b0ab[_0x56ea83(0x15f)](0xc8)[_0x56ea83(0x15b)](_0x2ba2c0);};exports[a13_0x586343(0x13a)]=updateSchedules;const remove=async(_0x5b1639,_0x334e69)=>{const _0x630ffb=a13_0x586343,{id:_0x389eb0}=_0x5b1639[_0x630ffb(0x16b)];fs_1[_0x630ffb(0x16d)][_0x630ffb(0x168)](publicFolder+_0x630ffb(0x12b)+_0x389eb0+'/')&&fs_1[_0x630ffb(0x16d)][_0x630ffb(0x175)](publicFolder+_0x630ffb(0x12b)+_0x389eb0+'/',{'recursive':!![]});const _0x5c7bb8=await(0x0,DeleteCompanyService_1['default'])(_0x389eb0);return _0x334e69[_0x630ffb(0x15f)](0xc8)['json'](_0x5c7bb8);};exports[a13_0x586343(0x173)]=remove;const listPlan=async(_0x41207e,_0x288c56)=>{const _0x495427=a13_0x586343,{id:_0x1d790a}=_0x41207e['params'],_0x42b539=_0x41207e[_0x495427(0x131)]['authorization'],[,_0x17845d]=_0x42b539['split']('\x20'),_0x32d543=(0x0,jsonwebtoken_1[_0x495427(0x133)])(_0x17845d,auth_1[_0x495427(0x16d)]['secret']),{id:_0x1073e8,profile:_0x3301ba,companyId:_0x696662}=_0x32d543,_0x14d876=await User_1[_0x495427(0x16d)][_0x495427(0x15e)](_0x1073e8);if(_0x14d876[_0x495427(0x172)]===!![]||_0x696662[_0x495427(0x143)]()===_0x1d790a){const _0x3f1c16=await(0x0,ShowPlanCompanyService_1[_0x495427(0x16d)])(_0x1d790a);return _0x288c56[_0x495427(0x15f)](0xc8)[_0x495427(0x15b)](_0x3f1c16);}else return _0x288c56[_0x495427(0x15f)](0x190)[_0x495427(0x15b)]({'error':_0x495427(0x136)});};exports[a13_0x586343(0x163)]=listPlan;const indexPlan=async(_0x17ac38,_0x30b0d2)=>{const _0x45351a=a13_0x586343,{searchParam:_0x2eaf81,pageNumber:_0x24ea1b}=_0x17ac38[_0x45351a(0x149)],_0x17f8b8=_0x17ac38[_0x45351a(0x131)][_0x45351a(0x169)],[,_0x57d270]=_0x17f8b8[_0x45351a(0x160)]('\x20'),_0x5a3d8e=(0x0,jsonwebtoken_1[_0x45351a(0x133)])(_0x57d270,auth_1[_0x45351a(0x16d)]['secret']),{id:_0x166875,profile:_0x360298,companyId:_0x9ccbc1}=_0x5a3d8e,_0x37ebbb=await User_1['default'][_0x45351a(0x15e)](_0x166875);if(_0x37ebbb[_0x45351a(0x172)]===!![]){const _0x92ed0d=await(0x0,ListCompaniesPlanService_1[_0x45351a(0x16d)])();return _0x30b0d2[_0x45351a(0x15b)]({'companies':_0x92ed0d});}else return _0x30b0d2[_0x45351a(0x15f)](0x190)[_0x45351a(0x15b)]({'error':_0x45351a(0x136)});};exports['indexPlan']=indexPlan;