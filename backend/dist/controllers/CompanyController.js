const a13_0x373024=a13_0x4b12;(function(_0x2b344d,_0x1bd630){const _0x115e32=a13_0x4b12,_0x1ab005=_0x2b344d();while(!![]){try{const _0x198fee=parseInt(_0x115e32(0x151))/0x1+-parseInt(_0x115e32(0x138))/0x2+parseInt(_0x115e32(0x147))/0x3+parseInt(_0x115e32(0x15b))/0x4*(parseInt(_0x115e32(0x12b))/0x5)+-parseInt(_0x115e32(0x119))/0x6*(-parseInt(_0x115e32(0x12d))/0x7)+parseInt(_0x115e32(0x115))/0x8+-parseInt(_0x115e32(0x12a))/0x9;if(_0x198fee===_0x1bd630)break;else _0x1ab005['push'](_0x1ab005['shift']());}catch(_0x446fa4){_0x1ab005['push'](_0x1ab005['shift']());}}}(a13_0x15d2,0x3aad5));const a13_0xa43557=(function(){let _0x3b43dc=!![];return function(_0x4dd8e3,_0x1194d6){const _0x483b61=_0x3b43dc?function(){const _0x28969f=a13_0x4b12;if(_0x1194d6){const _0x4e207e=_0x1194d6[_0x28969f(0x15c)](_0x4dd8e3,arguments);return _0x1194d6=null,_0x4e207e;}}:function(){};return _0x3b43dc=![],_0x483b61;};}()),a13_0x2a2616=a13_0xa43557(this,function(){const _0x2bbf58=a13_0x4b12;return a13_0x2a2616[_0x2bbf58(0x15d)]()[_0x2bbf58(0x13d)](_0x2bbf58(0x161))['toString']()[_0x2bbf58(0x129)](a13_0x2a2616)[_0x2bbf58(0x13d)](_0x2bbf58(0x161));});a13_0x2a2616();'use strict';var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x3d2c28,_0x30de1f,_0x2bf001,_0x338b2f){const _0x4a9e12=a13_0x4b12;if(_0x338b2f===undefined)_0x338b2f=_0x2bf001;var _0x3f2a81=Object[_0x4a9e12(0x14b)](_0x30de1f,_0x2bf001);(!_0x3f2a81||(_0x4a9e12(0x13b)in _0x3f2a81?!_0x30de1f[_0x4a9e12(0x114)]:_0x3f2a81['writable']||_0x3f2a81['configurable']))&&(_0x3f2a81={'enumerable':!![],'get':function(){return _0x30de1f[_0x2bf001];}}),Object[_0x4a9e12(0x144)](_0x3d2c28,_0x338b2f,_0x3f2a81);}:function(_0x10b23e,_0x4e74ad,_0x1ff1ce,_0x290133){if(_0x290133===undefined)_0x290133=_0x1ff1ce;_0x10b23e[_0x290133]=_0x4e74ad[_0x1ff1ce];}),__setModuleDefault=this&&this[a13_0x373024(0x128)]||(Object[a13_0x373024(0x136)]?function(_0x3d4011,_0x3b46bd){const _0x29073e=a13_0x373024;Object[_0x29073e(0x144)](_0x3d4011,_0x29073e(0x145),{'enumerable':!![],'value':_0x3b46bd});}:function(_0x5fbc8e,_0x55f6a7){const _0x362391=a13_0x373024;_0x5fbc8e[_0x362391(0x145)]=_0x55f6a7;}),__importStar=this&&this[a13_0x373024(0x154)]||function(_0x15b7ea){const _0x42bdff=a13_0x373024;if(_0x15b7ea&&_0x15b7ea[_0x42bdff(0x114)])return _0x15b7ea;var _0x2e7d6c={};if(_0x15b7ea!=null){for(var _0x459bf5 in _0x15b7ea)if(_0x459bf5!==_0x42bdff(0x145)&&Object[_0x42bdff(0x116)]['hasOwnProperty'][_0x42bdff(0x153)](_0x15b7ea,_0x459bf5))__createBinding(_0x2e7d6c,_0x15b7ea,_0x459bf5);}return __setModuleDefault(_0x2e7d6c,_0x15b7ea),_0x2e7d6c;},__importDefault=this&&this['__importDefault']||function(_0x1784cb){const _0x3dfbba=a13_0x373024;return _0x1784cb&&_0x1784cb[_0x3dfbba(0x114)]?_0x1784cb:{'default':_0x1784cb};};Object[a13_0x373024(0x144)](exports,'__esModule',{'value':!![]}),exports[a13_0x373024(0x11b)]=exports['listPlan']=exports[a13_0x373024(0x124)]=exports[a13_0x373024(0x157)]=exports[a13_0x373024(0x122)]=exports['list']=exports[a13_0x373024(0x14a)]=exports[a13_0x373024(0x158)]=exports[a13_0x373024(0x126)]=exports['index']=void 0x0;const Yup=__importStar(require(a13_0x373024(0x121))),AppError_1=__importDefault(require(a13_0x373024(0x13a))),auth_1=__importDefault(require(a13_0x373024(0x113))),ListCompaniesService_1=__importDefault(require(a13_0x373024(0x159))),CreateCompanyService_1=__importDefault(require(a13_0x373024(0x135))),UpdateCompanyService_1=__importDefault(require(a13_0x373024(0x143))),ShowCompanyService_1=__importDefault(require(a13_0x373024(0x125))),UpdateSchedulesService_1=__importDefault(require(a13_0x373024(0x12e))),DeleteCompanyService_1=__importDefault(require(a13_0x373024(0x11e))),FindAllCompaniesService_1=__importDefault(require('../services/CompanyService/FindAllCompaniesService')),jsonwebtoken_1=require('jsonwebtoken'),User_1=__importDefault(require(a13_0x373024(0x12f))),ShowPlanCompanyService_1=__importDefault(require(a13_0x373024(0x117))),ListCompaniesPlanService_1=__importDefault(require(a13_0x373024(0x15e))),CheckSettings_1=__importDefault(require(a13_0x373024(0x156))),moment_1=__importDefault(require(a13_0x373024(0x10e))),fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a13_0x373024(0x13f))),publicFolder=path_1[a13_0x373024(0x145)][a13_0x373024(0x160)](__dirname,'..','..',a13_0x373024(0x14c)),index=async(_0x2340c5,_0x5166cd)=>{const _0x37350e=a13_0x373024,{searchParam:_0x12dc4b,pageNumber:_0x376c47}=_0x2340c5[_0x37350e(0x14d)],{companies:_0x44849a,count:_0x2bcbc3,hasMore:_0xe42e34}=await(0x0,ListCompaniesService_1[_0x37350e(0x145)])({'searchParam':_0x12dc4b,'pageNumber':_0x376c47});return _0x5166cd[_0x37350e(0x146)]({'companies':_0x44849a,'count':_0x2bcbc3,'hasMore':_0xe42e34});};exports['index']=index;const signup=async(_0x1b4c82,_0x277ee5)=>{const _0x115b2c=a13_0x373024;if(await(0x0,CheckSettings_1[_0x115b2c(0x145)])('allowSignup')!==_0x115b2c(0x112))return _0x277ee5[_0x115b2c(0x148)](0x191)['json'](_0x115b2c(0x13c));return await(0x0,exports[_0x115b2c(0x158)])(_0x1b4c82,_0x277ee5);};function a13_0x4b12(_0xbe7ddf,_0x566730){const _0x15c0a2=a13_0x15d2();return a13_0x4b12=function(_0x2a2616,_0xa43557){_0x2a2616=_0x2a2616-0x10e;let _0x15d2ab=_0x15c0a2[_0x2a2616];return _0x15d2ab;},a13_0x4b12(_0xbe7ddf,_0x566730);}exports[a13_0x373024(0x126)]=signup;const store=async(_0x172ac9,_0x460e69)=>{const _0x513ba6=a13_0x373024,_0x259895=_0x172ac9['body'];try{const _0x35a266=await(0x0,CheckSettings_1[_0x513ba6(0x145)])(_0x513ba6(0x123)),_0x565526=parseInt(_0x35a266,0xa);isNaN(_0x565526)||_0x565526<=0x0?_0x259895[_0x513ba6(0x130)]=(0x0,moment_1['default'])()[_0x513ba6(0x11a)](0x7,_0x513ba6(0x127))[_0x513ba6(0x14f)]():_0x259895[_0x513ba6(0x130)]=(0x0,moment_1[_0x513ba6(0x145)])()[_0x513ba6(0x11a)](_0x565526,_0x513ba6(0x127))[_0x513ba6(0x14f)]();const _0x11be80=await(0x0,CreateCompanyService_1[_0x513ba6(0x145)])(_0x259895);return _0x460e69[_0x513ba6(0x148)](0xc9)['json'](_0x11be80);}catch(_0x23e18f){return _0x460e69[_0x513ba6(0x148)](0x1f4)['json']({'message':'Error\x20creating\x20company','error':_0x23e18f});}};exports['store']=store;const show=async(_0x39a839,_0x3562b0)=>{const _0x54a583=a13_0x373024,{id:_0x41e913}=_0x39a839[_0x54a583(0x137)],_0x3ba256=await User_1[_0x54a583(0x145)][_0x54a583(0x14e)](_0x39a839[_0x54a583(0x12c)]['id']);if(!_0x3ba256[_0x54a583(0x134)]&&Number[_0x54a583(0x118)](_0x41e913,0xa)!==_0x3ba256[_0x54a583(0x139)])throw new AppError_1[(_0x54a583(0x145))]('ERR_FORBIDDEN',0x193);const _0x143f0b=await(0x0,ShowCompanyService_1['default'])(_0x41e913);return _0x3562b0['status'](0xc8)[_0x54a583(0x146)](_0x143f0b);};exports[a13_0x373024(0x14a)]=show;const list=async(_0x2ee741,_0x4a472f)=>{const _0x5e8cd8=a13_0x373024,_0x549288=await(0x0,FindAllCompaniesService_1[_0x5e8cd8(0x145)])();return _0x4a472f[_0x5e8cd8(0x148)](0xc8)[_0x5e8cd8(0x146)](_0x549288);};exports[a13_0x373024(0x11f)]=list;const update=async(_0x13b3c9,_0x4cee71)=>{const _0x526cf3=a13_0x373024,_0x5909c8=_0x13b3c9[_0x526cf3(0x133)],_0x462472=Yup[_0x526cf3(0x120)]()[_0x526cf3(0x141)]({'name':Yup['string']()[_0x526cf3(0x132)](),'email':Yup[_0x526cf3(0x155)]()[_0x526cf3(0x131)]()['nullable'](),'phone':Yup[_0x526cf3(0x155)]()[_0x526cf3(0x11c)](),'status':Yup[_0x526cf3(0x11d)]()[_0x526cf3(0x11c)](),'planId':Yup[_0x526cf3(0x15f)]()[_0x526cf3(0x11c)](),'campaignsEnabled':Yup['boolean']()[_0x526cf3(0x11c)](),'dueDate':Yup['date']()[_0x526cf3(0x11c)](),'recurrence':Yup[_0x526cf3(0x155)]()[_0x526cf3(0x11c)]()});try{await _0x462472['validate'](_0x5909c8);}catch(_0x1486c4){throw new AppError_1[(_0x526cf3(0x145))](_0x1486c4['message']);}const {id:_0x3a97ba}=_0x13b3c9[_0x526cf3(0x137)],_0x4ea040=await(0x0,UpdateCompanyService_1[_0x526cf3(0x145)])({'id':_0x3a97ba,..._0x5909c8});return _0x4cee71[_0x526cf3(0x148)](0xc8)[_0x526cf3(0x146)](_0x4ea040);};exports[a13_0x373024(0x122)]=update;const updateSchedules=async(_0x225131,_0x177856)=>{const _0x2f279e=a13_0x373024,{schedules:_0x238968}=_0x225131['body'],{id:_0x1f39f9}=_0x225131[_0x2f279e(0x137)],_0x114a6b=await User_1[_0x2f279e(0x145)]['findByPk'](_0x225131['user']['id']);if(!_0x114a6b[_0x2f279e(0x134)]&&Number['parseInt'](_0x1f39f9,0xa)!==_0x114a6b[_0x2f279e(0x139)])throw new AppError_1['default'](_0x2f279e(0x15a),0x193);const _0x29efd7=await(0x0,UpdateSchedulesService_1[_0x2f279e(0x145)])({'id':_0x1f39f9,'schedules':_0x238968});return _0x177856[_0x2f279e(0x148)](0xc8)[_0x2f279e(0x146)](_0x29efd7);};exports[a13_0x373024(0x157)]=updateSchedules;const remove=async(_0x56a42f,_0x58c22f)=>{const _0x32479a=a13_0x373024,{id:_0x4af6fd}=_0x56a42f[_0x32479a(0x137)];fs_1[_0x32479a(0x145)][_0x32479a(0x110)](publicFolder+'/company'+_0x4af6fd+'/')&&fs_1[_0x32479a(0x145)]['rmdirSync'](publicFolder+_0x32479a(0x152)+_0x4af6fd+'/',{'recursive':!![]});const _0x33802a=await(0x0,DeleteCompanyService_1[_0x32479a(0x145)])(_0x4af6fd);return _0x58c22f[_0x32479a(0x148)](0xc8)[_0x32479a(0x146)](_0x33802a);};exports[a13_0x373024(0x124)]=remove;const listPlan=async(_0x367e21,_0x21ebed)=>{const _0x18e461=a13_0x373024,{id:_0x457203}=_0x367e21[_0x18e461(0x137)],_0x2c4c1c=_0x367e21[_0x18e461(0x149)][_0x18e461(0x111)],[,_0x106e0a]=_0x2c4c1c[_0x18e461(0x150)]('\x20'),_0x2f86f0=(0x0,jsonwebtoken_1[_0x18e461(0x13e)])(_0x106e0a,auth_1['default'][_0x18e461(0x10f)]),{id:_0x2214a0,profile:_0x33485d,companyId:_0x1f29e6}=_0x2f86f0,_0x5a9cb2=await User_1[_0x18e461(0x145)][_0x18e461(0x14e)](_0x2214a0);if(_0x5a9cb2[_0x18e461(0x134)]===!![]||_0x1f29e6[_0x18e461(0x15d)]()===_0x457203){const _0x3be20f=await(0x0,ShowPlanCompanyService_1[_0x18e461(0x145)])(_0x457203);return _0x21ebed[_0x18e461(0x148)](0xc8)[_0x18e461(0x146)](_0x3be20f);}else return _0x21ebed[_0x18e461(0x148)](0x190)[_0x18e461(0x146)]({'error':_0x18e461(0x140)});};function a13_0x15d2(){const _0x6b9112=['verify','path','Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!','shape','listPlan','../services/CompanyService/UpdateCompanyService','defineProperty','default','json','863778WAnknm','status','headers','show','getOwnPropertyDescriptor','public','query','findByPk','toDate','split','2834JWkZhE','/company','call','__importStar','string','../helpers/CheckSettings','updateSchedules','store','../services/CompanyService/ListCompaniesService','ERR_FORBIDDEN','4kkXVpc','apply','toString','../services/CompanyService/ListCompaniesPlanService','number','resolve','(((.+)+)+)+$','moment','secret','existsSync','authorization','enabled','../config/auth','__esModule','3366800UWQNqB','prototype','../services/CompanyService/ShowPlanCompanyService','parseInt','2261928eGsSsA','add','indexPlan','nullable','boolean','../services/CompanyService/DeleteCompanyService','list','object','yup','update','trialExpiration','remove','../services/CompanyService/ShowCompanyService','signup','days','__setModuleDefault','constructor','4582764FszBec','242710orZtfw','user','7TPZVlW','../services/CompanyService/UpdateSchedulesService','../models/User','dueDate','email','required','body','super','../services/CompanyService/CreateCompanyService','create','params','775206lYqFng','companyId','../errors/AppError','get','🙎🏻‍♂️\x20Signup\x20disabled','search'];a13_0x15d2=function(){return _0x6b9112;};return a13_0x15d2();}exports[a13_0x373024(0x142)]=listPlan;const indexPlan=async(_0x4cafe3,_0x18301e)=>{const _0x55fafd=a13_0x373024,{searchParam:_0xca720a,pageNumber:_0x2448ef}=_0x4cafe3[_0x55fafd(0x14d)],_0x351b11=_0x4cafe3[_0x55fafd(0x149)][_0x55fafd(0x111)],[,_0x515709]=_0x351b11[_0x55fafd(0x150)]('\x20'),_0x1f05a2=(0x0,jsonwebtoken_1[_0x55fafd(0x13e)])(_0x515709,auth_1[_0x55fafd(0x145)]['secret']),{id:_0x56c483,profile:_0x231032,companyId:_0x27eb5f}=_0x1f05a2,_0x3b86c0=await User_1[_0x55fafd(0x145)][_0x55fafd(0x14e)](_0x56c483);if(_0x3b86c0[_0x55fafd(0x134)]===!![]){const _0x4abe3c=await(0x0,ListCompaniesPlanService_1[_0x55fafd(0x145)])();return _0x18301e[_0x55fafd(0x146)]({'companies':_0x4abe3c});}else return _0x18301e[_0x55fafd(0x148)](0x190)[_0x55fafd(0x146)]({'error':_0x55fafd(0x140)});};exports[a13_0x373024(0x11b)]=indexPlan;