const a13_0x34a858=a13_0x2513;function a13_0x2642(){const _0x76cecf=['status','apply','../helpers/CheckSettings','add','../services/CompanyService/CreateCompanyService','hasOwnProperty','verify','show','split','__esModule','store','secret','required','2183400xZDWbU','820120XrhBGC','authorization','167316JdsMXe','create','boolean','call','params','../models/User','existsSync','../services/CompanyService/UpdateSchedulesService','(((.+)+)+)+$','configurable','update','299474VMSydT','email','136ucKTxd','constructor','parseInt','/company','__importDefault','21410eTAbcu','writable','query','message','list','jsonwebtoken','findByPk','shape','2200464nVjKQN','number','search','remove','signup','../services/CompanyService/ShowPlanCompanyService','defineProperty','trialExpiration','__importStar','public','date','132aKNVbz','Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!','../errors/AppError','super','../services/CompanyService/ShowCompanyService','listPlan','toDate','json','days','rmdirSync','headers','../services/CompanyService/UpdateCompanyService','body','companyId','updateSchedules','prototype','../config/auth','../services/CompanyService/ListCompaniesPlanService','indexPlan','moment','🙎🏻‍♂️\x20Signup\x20disabled','default','toString','nullable','ERR_FORBIDDEN','index','user','473373aJyFph','resolve','string','dueDate'];a13_0x2642=function(){return _0x76cecf;};return a13_0x2642();}(function(_0x253c3e,_0x3181b2){const _0x408ef2=a13_0x2513,_0x20294b=_0x253c3e();while(!![]){try{const _0x57be68=-parseInt(_0x408ef2(0x11c))/0x1+parseInt(_0x408ef2(0x10f))/0x2+parseInt(_0x408ef2(0x111))/0x3+-parseInt(_0x408ef2(0x10e))/0x4+parseInt(_0x408ef2(0x123))/0x5*(parseInt(_0x408ef2(0x136))/0x6)+-parseInt(_0x408ef2(0x12b))/0x7+parseInt(_0x408ef2(0x11e))/0x8*(parseInt(_0x408ef2(0xfd))/0x9);if(_0x57be68===_0x3181b2)break;else _0x20294b['push'](_0x20294b['shift']());}catch(_0x15b299){_0x20294b['push'](_0x20294b['shift']());}}}(a13_0x2642,0x47e6d));const a13_0x4b01cb=(function(){let _0xa216e8=!![];return function(_0xfc439f,_0x48f1a3){const _0xa533e9=_0xa216e8?function(){const _0x4b2935=a13_0x2513;if(_0x48f1a3){const _0x262774=_0x48f1a3[_0x4b2935(0x102)](_0xfc439f,arguments);return _0x48f1a3=null,_0x262774;}}:function(){};return _0xa216e8=![],_0xa533e9;};}()),a13_0x1fba17=a13_0x4b01cb(this,function(){const _0x514b68=a13_0x2513;return a13_0x1fba17[_0x514b68(0x14c)]()['search'](_0x514b68(0x119))['toString']()[_0x514b68(0x11f)](a13_0x1fba17)[_0x514b68(0x12d)](_0x514b68(0x119));});a13_0x1fba17();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a13_0x34a858(0x112)]?function(_0x2cef53,_0x36963e,_0x3f413e,_0x41381b){const _0x14aed7=a13_0x34a858;if(_0x41381b===undefined)_0x41381b=_0x3f413e;var _0x11734e=Object['getOwnPropertyDescriptor'](_0x36963e,_0x3f413e);(!_0x11734e||('get'in _0x11734e?!_0x36963e[_0x14aed7(0x10a)]:_0x11734e[_0x14aed7(0x124)]||_0x11734e[_0x14aed7(0x11a)]))&&(_0x11734e={'enumerable':!![],'get':function(){return _0x36963e[_0x3f413e];}}),Object[_0x14aed7(0x131)](_0x2cef53,_0x41381b,_0x11734e);}:function(_0x47d208,_0x1012bb,_0x907ca7,_0x366a10){if(_0x366a10===undefined)_0x366a10=_0x907ca7;_0x47d208[_0x366a10]=_0x1012bb[_0x907ca7];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a13_0x34a858(0x112)]?function(_0x498cd6,_0x380923){const _0x316c40=a13_0x34a858;Object[_0x316c40(0x131)](_0x498cd6,_0x316c40(0x14b),{'enumerable':!![],'value':_0x380923});}:function(_0x42daf8,_0x450aa1){_0x42daf8['default']=_0x450aa1;}),__importStar=this&&this[a13_0x34a858(0x133)]||function(_0x36853d){const _0x4add6a=a13_0x34a858;if(_0x36853d&&_0x36853d['__esModule'])return _0x36853d;var _0xc73783={};if(_0x36853d!=null){for(var _0x409113 in _0x36853d)if(_0x409113!=='default'&&Object[_0x4add6a(0x145)][_0x4add6a(0x106)][_0x4add6a(0x114)](_0x36853d,_0x409113))__createBinding(_0xc73783,_0x36853d,_0x409113);}return __setModuleDefault(_0xc73783,_0x36853d),_0xc73783;},__importDefault=this&&this[a13_0x34a858(0x122)]||function(_0xbefd33){return _0xbefd33&&_0xbefd33['__esModule']?_0xbefd33:{'default':_0xbefd33};};Object[a13_0x34a858(0x131)](exports,'__esModule',{'value':!![]}),exports[a13_0x34a858(0x148)]=exports[a13_0x34a858(0x13b)]=exports[a13_0x34a858(0x12e)]=exports[a13_0x34a858(0x144)]=exports[a13_0x34a858(0x11b)]=exports[a13_0x34a858(0x127)]=exports['show']=exports[a13_0x34a858(0x10b)]=exports[a13_0x34a858(0x12f)]=exports[a13_0x34a858(0xfb)]=void 0x0;const Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a13_0x34a858(0x138))),auth_1=__importDefault(require(a13_0x34a858(0x146))),ListCompaniesService_1=__importDefault(require('../services/CompanyService/ListCompaniesService')),CreateCompanyService_1=__importDefault(require(a13_0x34a858(0x105))),UpdateCompanyService_1=__importDefault(require(a13_0x34a858(0x141))),ShowCompanyService_1=__importDefault(require(a13_0x34a858(0x13a))),UpdateSchedulesService_1=__importDefault(require(a13_0x34a858(0x118))),DeleteCompanyService_1=__importDefault(require('../services/CompanyService/DeleteCompanyService')),FindAllCompaniesService_1=__importDefault(require('../services/CompanyService/FindAllCompaniesService')),jsonwebtoken_1=require(a13_0x34a858(0x128)),User_1=__importDefault(require(a13_0x34a858(0x116))),ShowPlanCompanyService_1=__importDefault(require(a13_0x34a858(0x130))),ListCompaniesPlanService_1=__importDefault(require(a13_0x34a858(0x147))),CheckSettings_1=__importDefault(require(a13_0x34a858(0x103))),moment_1=__importDefault(require(a13_0x34a858(0x149))),fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path')),publicFolder=path_1[a13_0x34a858(0x14b)][a13_0x34a858(0xfe)](__dirname,'..','..',a13_0x34a858(0x134)),index=async(_0x349987,_0x6fe860)=>{const _0x16f515=a13_0x34a858,{searchParam:_0x5d554f,pageNumber:_0x87a4b6}=_0x349987['query'],{companies:_0x36075c,count:_0x328ee2,hasMore:_0xc0906f}=await(0x0,ListCompaniesService_1[_0x16f515(0x14b)])({'searchParam':_0x5d554f,'pageNumber':_0x87a4b6});return _0x6fe860[_0x16f515(0x13d)]({'companies':_0x36075c,'count':_0x328ee2,'hasMore':_0xc0906f});};exports[a13_0x34a858(0xfb)]=index;const signup=async(_0x28f8af,_0x301a9e)=>{const _0x34aca4=a13_0x34a858;if(await(0x0,CheckSettings_1[_0x34aca4(0x14b)])('allowSignup')!=='enabled')return _0x301a9e[_0x34aca4(0x101)](0x191)[_0x34aca4(0x13d)](_0x34aca4(0x14a));return await(0x0,exports['store'])(_0x28f8af,_0x301a9e);};function a13_0x2513(_0x4c8a35,_0x32d99b){const _0x56c8ac=a13_0x2642();return a13_0x2513=function(_0x1fba17,_0x4b01cb){_0x1fba17=_0x1fba17-0xfb;let _0x2642cc=_0x56c8ac[_0x1fba17];return _0x2642cc;},a13_0x2513(_0x4c8a35,_0x32d99b);}exports[a13_0x34a858(0x12f)]=signup;const store=async(_0x2e849f,_0x5cbdcd)=>{const _0x5cc124=a13_0x34a858,_0xdaca82=_0x2e849f[_0x5cc124(0x142)];try{const _0x232893=await(0x0,CheckSettings_1[_0x5cc124(0x14b)])(_0x5cc124(0x132)),_0x87458a=parseInt(_0x232893,0xa);isNaN(_0x87458a)||_0x87458a<=0x0?_0xdaca82[_0x5cc124(0x100)]=(0x0,moment_1[_0x5cc124(0x14b)])()[_0x5cc124(0x104)](0x7,_0x5cc124(0x13e))[_0x5cc124(0x13c)]():_0xdaca82[_0x5cc124(0x100)]=(0x0,moment_1[_0x5cc124(0x14b)])()[_0x5cc124(0x104)](_0x87458a,_0x5cc124(0x13e))[_0x5cc124(0x13c)]();const _0x543c2d=await(0x0,CreateCompanyService_1['default'])(_0xdaca82);return _0x5cbdcd[_0x5cc124(0x101)](0xc9)['json'](_0x543c2d);}catch(_0x2b92b5){return _0x5cbdcd[_0x5cc124(0x101)](0x1f4)[_0x5cc124(0x13d)]({'message':'Error\x20creating\x20company','error':_0x2b92b5});}};exports['store']=store;const show=async(_0x4e71bb,_0x2d2a40)=>{const _0x509b28=a13_0x34a858,{id:_0x5c0c13}=_0x4e71bb['params'],_0xcb1f13=await User_1['default'][_0x509b28(0x129)](_0x4e71bb['user']['id']);if(!_0xcb1f13['super']&&Number[_0x509b28(0x120)](_0x5c0c13,0xa)!==_0xcb1f13[_0x509b28(0x143)])throw new AppError_1[(_0x509b28(0x14b))](_0x509b28(0x14e),0x193);const _0x736a2e=await(0x0,ShowCompanyService_1[_0x509b28(0x14b)])(_0x5c0c13);return _0x2d2a40[_0x509b28(0x101)](0xc8)[_0x509b28(0x13d)](_0x736a2e);};exports[a13_0x34a858(0x108)]=show;const list=async(_0x52b62c,_0x113c6d)=>{const _0x1d8352=a13_0x34a858,_0x44db3e=await(0x0,FindAllCompaniesService_1['default'])();return _0x113c6d[_0x1d8352(0x101)](0xc8)[_0x1d8352(0x13d)](_0x44db3e);};exports[a13_0x34a858(0x127)]=list;const update=async(_0x307be0,_0x3c72e4)=>{const _0x16f4ad=a13_0x34a858,_0xf873e2=_0x307be0[_0x16f4ad(0x142)],_0xc8647b=Yup['object']()[_0x16f4ad(0x12a)]({'name':Yup['string']()[_0x16f4ad(0x10d)](),'email':Yup[_0x16f4ad(0xff)]()[_0x16f4ad(0x11d)]()[_0x16f4ad(0x14d)](),'phone':Yup[_0x16f4ad(0xff)]()[_0x16f4ad(0x14d)](),'status':Yup[_0x16f4ad(0x113)]()[_0x16f4ad(0x14d)](),'planId':Yup[_0x16f4ad(0x12c)]()[_0x16f4ad(0x14d)](),'campaignsEnabled':Yup['boolean']()[_0x16f4ad(0x14d)](),'dueDate':Yup[_0x16f4ad(0x135)]()[_0x16f4ad(0x14d)](),'recurrence':Yup[_0x16f4ad(0xff)]()[_0x16f4ad(0x14d)]()});try{await _0xc8647b['validate'](_0xf873e2);}catch(_0x328e31){throw new AppError_1['default'](_0x328e31[_0x16f4ad(0x126)]);}const {id:_0x550dc8}=_0x307be0[_0x16f4ad(0x115)],_0x583f51=await(0x0,UpdateCompanyService_1[_0x16f4ad(0x14b)])({'id':_0x550dc8,..._0xf873e2});return _0x3c72e4[_0x16f4ad(0x101)](0xc8)[_0x16f4ad(0x13d)](_0x583f51);};exports[a13_0x34a858(0x11b)]=update;const updateSchedules=async(_0x4cf4ae,_0x5207bf)=>{const _0x2629dd=a13_0x34a858,{schedules:_0x4cb496}=_0x4cf4ae[_0x2629dd(0x142)],{id:_0x64d899}=_0x4cf4ae[_0x2629dd(0x115)],_0x3babca=await User_1[_0x2629dd(0x14b)][_0x2629dd(0x129)](_0x4cf4ae[_0x2629dd(0xfc)]['id']);if(!_0x3babca[_0x2629dd(0x139)]&&Number[_0x2629dd(0x120)](_0x64d899,0xa)!==_0x3babca[_0x2629dd(0x143)])throw new AppError_1[(_0x2629dd(0x14b))](_0x2629dd(0x14e),0x193);const _0xdb45cf=await(0x0,UpdateSchedulesService_1[_0x2629dd(0x14b)])({'id':_0x64d899,'schedules':_0x4cb496});return _0x5207bf[_0x2629dd(0x101)](0xc8)[_0x2629dd(0x13d)](_0xdb45cf);};exports[a13_0x34a858(0x144)]=updateSchedules;const remove=async(_0x26103a,_0x5e23d3)=>{const _0x239940=a13_0x34a858,{id:_0x3b8e1b}=_0x26103a['params'];fs_1[_0x239940(0x14b)][_0x239940(0x117)](publicFolder+'/company'+_0x3b8e1b+'/')&&fs_1[_0x239940(0x14b)][_0x239940(0x13f)](publicFolder+_0x239940(0x121)+_0x3b8e1b+'/',{'recursive':!![]});const _0x3d83ee=await(0x0,DeleteCompanyService_1['default'])(_0x3b8e1b);return _0x5e23d3['status'](0xc8)[_0x239940(0x13d)](_0x3d83ee);};exports[a13_0x34a858(0x12e)]=remove;const listPlan=async(_0xdd401a,_0x24bb2c)=>{const _0x5c477d=a13_0x34a858,{id:_0x3eb7f6}=_0xdd401a['params'],_0x4d680e=_0xdd401a[_0x5c477d(0x140)][_0x5c477d(0x110)],[,_0xac1aea]=_0x4d680e['split']('\x20'),_0x3cd823=(0x0,jsonwebtoken_1[_0x5c477d(0x107)])(_0xac1aea,auth_1[_0x5c477d(0x14b)][_0x5c477d(0x10c)]),{id:_0x37aa81,profile:_0x58f5e2,companyId:_0x5434dd}=_0x3cd823,_0x206a55=await User_1[_0x5c477d(0x14b)][_0x5c477d(0x129)](_0x37aa81);if(_0x206a55[_0x5c477d(0x139)]===!![]||_0x5434dd['toString']()===_0x3eb7f6){const _0x53f756=await(0x0,ShowPlanCompanyService_1[_0x5c477d(0x14b)])(_0x3eb7f6);return _0x24bb2c[_0x5c477d(0x101)](0xc8)[_0x5c477d(0x13d)](_0x53f756);}else return _0x24bb2c[_0x5c477d(0x101)](0x190)[_0x5c477d(0x13d)]({'error':_0x5c477d(0x137)});};exports[a13_0x34a858(0x13b)]=listPlan;const indexPlan=async(_0x1e6155,_0x2a59a9)=>{const _0x236d7e=a13_0x34a858,{searchParam:_0x2f71b3,pageNumber:_0x387b8d}=_0x1e6155[_0x236d7e(0x125)],_0x561b1a=_0x1e6155[_0x236d7e(0x140)][_0x236d7e(0x110)],[,_0x40328a]=_0x561b1a[_0x236d7e(0x109)]('\x20'),_0x48a4a4=(0x0,jsonwebtoken_1[_0x236d7e(0x107)])(_0x40328a,auth_1['default'][_0x236d7e(0x10c)]),{id:_0x3422a3,profile:_0x4ccf97,companyId:_0x5e4cd7}=_0x48a4a4,_0x58ce3f=await User_1['default']['findByPk'](_0x3422a3);if(_0x58ce3f[_0x236d7e(0x139)]===!![]){const _0xca8a41=await(0x0,ListCompaniesPlanService_1[_0x236d7e(0x14b)])();return _0x2a59a9[_0x236d7e(0x13d)]({'companies':_0xca8a41});}else return _0x2a59a9[_0x236d7e(0x101)](0x190)[_0x236d7e(0x13d)]({'error':_0x236d7e(0x137)});};exports[a13_0x34a858(0x148)]=indexPlan;