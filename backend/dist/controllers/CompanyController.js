const a13_0x2ec25b=a13_0x5c08;(function(_0x11bbd4,_0x3f7ca1){const _0x8678e4=a13_0x5c08,_0x6437f1=_0x11bbd4();while(!![]){try{const _0x4b47f0=parseInt(_0x8678e4(0x1a2))/0x1+parseInt(_0x8678e4(0x19f))/0x2*(-parseInt(_0x8678e4(0x1a7))/0x3)+parseInt(_0x8678e4(0x16f))/0x4*(parseInt(_0x8678e4(0x16b))/0x5)+-parseInt(_0x8678e4(0x196))/0x6+parseInt(_0x8678e4(0x184))/0x7*(parseInt(_0x8678e4(0x17e))/0x8)+parseInt(_0x8678e4(0x174))/0x9*(parseInt(_0x8678e4(0x194))/0xa)+parseInt(_0x8678e4(0x169))/0xb*(-parseInt(_0x8678e4(0x182))/0xc);if(_0x4b47f0===_0x3f7ca1)break;else _0x6437f1['push'](_0x6437f1['shift']());}catch(_0x107cf8){_0x6437f1['push'](_0x6437f1['shift']());}}}(a13_0xe185,0xd7f6e));const a13_0x15bc7e=(function(){let _0x196e57=!![];return function(_0x1ecf14,_0x49c518){const _0x3bedcc=_0x196e57?function(){const _0x3f47a1=a13_0x5c08;if(_0x49c518){const _0x4a143f=_0x49c518[_0x3f47a1(0x189)](_0x1ecf14,arguments);return _0x49c518=null,_0x4a143f;}}:function(){};return _0x196e57=![],_0x3bedcc;};}()),a13_0x2cdc9c=a13_0x15bc7e(this,function(){const _0x1d2ebc=a13_0x5c08;return a13_0x2cdc9c[_0x1d2ebc(0x1b6)]()[_0x1d2ebc(0x195)]('(((.+)+)+)+$')['toString']()['constructor'](a13_0x2cdc9c)[_0x1d2ebc(0x195)](_0x1d2ebc(0x18f));});a13_0x2cdc9c();'use strict';function a13_0x5c08(_0x343815,_0x11c335){const _0x78b133=a13_0xe185();return a13_0x5c08=function(_0x2cdc9c,_0x15bc7e){_0x2cdc9c=_0x2cdc9c-0x160;let _0xe185ed=_0x78b133[_0x2cdc9c];return _0xe185ed;},a13_0x5c08(_0x343815,_0x11c335);}var __createBinding=this&&this[a13_0x2ec25b(0x16a)]||(Object[a13_0x2ec25b(0x1a6)]?function(_0x3e2e7f,_0x5158e2,_0x87600f,_0x2e1ab4){const _0x4625d0=a13_0x2ec25b;if(_0x2e1ab4===undefined)_0x2e1ab4=_0x87600f;var _0x41d5b8=Object['getOwnPropertyDescriptor'](_0x5158e2,_0x87600f);(!_0x41d5b8||(_0x4625d0(0x177)in _0x41d5b8?!_0x5158e2[_0x4625d0(0x1b2)]:_0x41d5b8[_0x4625d0(0x18e)]||_0x41d5b8['configurable']))&&(_0x41d5b8={'enumerable':!![],'get':function(){return _0x5158e2[_0x87600f];}}),Object[_0x4625d0(0x170)](_0x3e2e7f,_0x2e1ab4,_0x41d5b8);}:function(_0x23c83a,_0x11bdbc,_0x36b67f,_0x2a0627){if(_0x2a0627===undefined)_0x2a0627=_0x36b67f;_0x23c83a[_0x2a0627]=_0x11bdbc[_0x36b67f];}),__setModuleDefault=this&&this[a13_0x2ec25b(0x16d)]||(Object[a13_0x2ec25b(0x1a6)]?function(_0xaf3632,_0x3425dd){const _0x5a5ae8=a13_0x2ec25b;Object[_0x5a5ae8(0x170)](_0xaf3632,_0x5a5ae8(0x1a5),{'enumerable':!![],'value':_0x3425dd});}:function(_0x4b443c,_0x3cbc7b){const _0x2e5fcc=a13_0x2ec25b;_0x4b443c[_0x2e5fcc(0x1a5)]=_0x3cbc7b;}),__importStar=this&&this[a13_0x2ec25b(0x1ad)]||function(_0x3c4beb){const _0x19f4b2=a13_0x2ec25b;if(_0x3c4beb&&_0x3c4beb[_0x19f4b2(0x1b2)])return _0x3c4beb;var _0x2db3ac={};if(_0x3c4beb!=null){for(var _0x267455 in _0x3c4beb)if(_0x267455!==_0x19f4b2(0x1a5)&&Object[_0x19f4b2(0x1ab)][_0x19f4b2(0x161)][_0x19f4b2(0x181)](_0x3c4beb,_0x267455))__createBinding(_0x2db3ac,_0x3c4beb,_0x267455);}return __setModuleDefault(_0x2db3ac,_0x3c4beb),_0x2db3ac;},__importDefault=this&&this[a13_0x2ec25b(0x16c)]||function(_0x149762){const _0x2bc5f9=a13_0x2ec25b;return _0x149762&&_0x149762[_0x2bc5f9(0x1b2)]?_0x149762:{'default':_0x149762};};Object[a13_0x2ec25b(0x170)](exports,'__esModule',{'value':!![]}),exports[a13_0x2ec25b(0x16e)]=exports[a13_0x2ec25b(0x164)]=exports[a13_0x2ec25b(0x17b)]=exports[a13_0x2ec25b(0x1aa)]=exports['update']=exports[a13_0x2ec25b(0x19b)]=exports[a13_0x2ec25b(0x1a0)]=exports['store']=exports[a13_0x2ec25b(0x17f)]=exports[a13_0x2ec25b(0x19a)]=void 0x0;const Yup=__importStar(require(a13_0x2ec25b(0x1a4))),AppError_1=__importDefault(require(a13_0x2ec25b(0x175))),auth_1=__importDefault(require(a13_0x2ec25b(0x1ac))),ListCompaniesService_1=__importDefault(require('../services/CompanyService/ListCompaniesService')),CreateCompanyService_1=__importDefault(require(a13_0x2ec25b(0x17c))),UpdateCompanyService_1=__importDefault(require(a13_0x2ec25b(0x18b))),ShowCompanyService_1=__importDefault(require(a13_0x2ec25b(0x1a9))),UpdateSchedulesService_1=__importDefault(require('../services/CompanyService/UpdateSchedulesService')),DeleteCompanyService_1=__importDefault(require(a13_0x2ec25b(0x198))),FindAllCompaniesService_1=__importDefault(require('../services/CompanyService/FindAllCompaniesService')),jsonwebtoken_1=require('jsonwebtoken'),User_1=__importDefault(require(a13_0x2ec25b(0x1b3))),ShowPlanCompanyService_1=__importDefault(require(a13_0x2ec25b(0x168))),ListCompaniesPlanService_1=__importDefault(require(a13_0x2ec25b(0x1ae))),CheckSettings_1=__importDefault(require(a13_0x2ec25b(0x179))),moment_1=__importDefault(require(a13_0x2ec25b(0x193))),fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path')),publicFolder=path_1[a13_0x2ec25b(0x1a5)][a13_0x2ec25b(0x17a)](__dirname,'..','..',a13_0x2ec25b(0x17d)),index=async(_0x1ead53,_0x4a5210)=>{const _0x11cead=a13_0x2ec25b,{searchParam:_0xfeb3a7,pageNumber:_0x5d55f4}=_0x1ead53[_0x11cead(0x199)],{companies:_0x5a3af5,count:_0x34df9c,hasMore:_0x2522d3}=await(0x0,ListCompaniesService_1[_0x11cead(0x1a5)])({'searchParam':_0xfeb3a7,'pageNumber':_0x5d55f4});return _0x4a5210[_0x11cead(0x180)]({'companies':_0x5a3af5,'count':_0x34df9c,'hasMore':_0x2522d3});};exports[a13_0x2ec25b(0x19a)]=index;function a13_0xe185(){const _0x22d3f9=['secret','add','hasOwnProperty','days','nullable','listPlan','companyId','user','ERR_FORBIDDEN','../services/CompanyService/ShowPlanCompanyService','24189xKyBnB','__createBinding','3035pNXZsK','__importDefault','__setModuleDefault','indexPlan','8652LvywZv','defineProperty','boolean','params','validate','3812229HBIeWJ','../errors/AppError','Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!','get','findByPk','../helpers/CheckSettings','resolve','remove','../services/CompanyService/CreateCompanyService','public','136jkfAYm','signup','json','call','6648ygYoSJ','dueDate','356657zaeCJc','existsSync','enabled','status','parseInt','apply','update','../services/CompanyService/UpdateCompanyService','super','required','writable','(((.+)+)+)+$','Error\x20creating\x20company','object','number','moment','10EdaZso','search','9107844dFvEbu','shape','../services/CompanyService/DeleteCompanyService','query','index','list','store','string','rmdirSync','148738zemQbQ','show','/company','1538704wvKPtJ','headers','yup','default','create','21DDolYj','verify','../services/CompanyService/ShowCompanyService','updateSchedules','prototype','../config/auth','__importStar','../services/CompanyService/ListCompaniesPlanService','body','toDate','allowSignup','__esModule','../models/User','date','authorization','toString'];a13_0xe185=function(){return _0x22d3f9;};return a13_0xe185();}const signup=async(_0x5429ea,_0x379b35)=>{const _0xbb93f9=a13_0x2ec25b;if(await(0x0,CheckSettings_1[_0xbb93f9(0x1a5)])(_0xbb93f9(0x1b1))!==_0xbb93f9(0x186))return _0x379b35['status'](0x191)[_0xbb93f9(0x180)]('🙎🏻‍♂️\x20Signup\x20disabled');return await(0x0,exports[_0xbb93f9(0x19c)])(_0x5429ea,_0x379b35);};exports[a13_0x2ec25b(0x17f)]=signup;const store=async(_0x2c4c57,_0x4793d8)=>{const _0xf23a25=a13_0x2ec25b,_0x300f50=_0x2c4c57[_0xf23a25(0x1af)];try{const _0x5976d5=await(0x0,CheckSettings_1[_0xf23a25(0x1a5)])('trialExpiration'),_0x523102=parseInt(_0x5976d5,0xa);isNaN(_0x523102)||_0x523102<=0x0?_0x300f50['dueDate']=(0x0,moment_1[_0xf23a25(0x1a5)])()[_0xf23a25(0x160)](0x7,_0xf23a25(0x162))[_0xf23a25(0x1b0)]():_0x300f50[_0xf23a25(0x183)]=(0x0,moment_1['default'])()[_0xf23a25(0x160)](_0x523102,_0xf23a25(0x162))['toDate']();const _0xd07970=await(0x0,CreateCompanyService_1[_0xf23a25(0x1a5)])(_0x300f50);return _0x4793d8[_0xf23a25(0x187)](0xc9)[_0xf23a25(0x180)](_0xd07970);}catch(_0x38aa0c){return _0x4793d8[_0xf23a25(0x187)](0x1f4)[_0xf23a25(0x180)]({'message':_0xf23a25(0x190),'error':_0x38aa0c});}};exports[a13_0x2ec25b(0x19c)]=store;const show=async(_0x1ab4b8,_0x724957)=>{const _0x3fd5dc=a13_0x2ec25b,{id:_0x26bbc0}=_0x1ab4b8[_0x3fd5dc(0x172)],_0x5c5670=await User_1[_0x3fd5dc(0x1a5)][_0x3fd5dc(0x178)](_0x1ab4b8[_0x3fd5dc(0x166)]['id']);if(!_0x5c5670[_0x3fd5dc(0x18c)]&&Number[_0x3fd5dc(0x188)](_0x26bbc0,0xa)!==_0x5c5670[_0x3fd5dc(0x165)])throw new AppError_1[(_0x3fd5dc(0x1a5))](_0x3fd5dc(0x167),0x193);const _0x5c4995=await(0x0,ShowCompanyService_1[_0x3fd5dc(0x1a5)])(_0x26bbc0);return _0x724957[_0x3fd5dc(0x187)](0xc8)[_0x3fd5dc(0x180)](_0x5c4995);};exports[a13_0x2ec25b(0x1a0)]=show;const list=async(_0x19e2e8,_0x245f62)=>{const _0x4702c6=a13_0x2ec25b,_0x36b525=await(0x0,FindAllCompaniesService_1[_0x4702c6(0x1a5)])();return _0x245f62[_0x4702c6(0x187)](0xc8)[_0x4702c6(0x180)](_0x36b525);};exports[a13_0x2ec25b(0x19b)]=list;const update=async(_0x3593f4,_0x1378d5)=>{const _0x44bfd9=a13_0x2ec25b,_0x192215=_0x3593f4[_0x44bfd9(0x1af)],_0x49bd24=Yup[_0x44bfd9(0x191)]()[_0x44bfd9(0x197)]({'name':Yup[_0x44bfd9(0x19d)]()[_0x44bfd9(0x18d)](),'email':Yup[_0x44bfd9(0x19d)]()['email']()[_0x44bfd9(0x163)](),'phone':Yup['string']()[_0x44bfd9(0x163)](),'status':Yup[_0x44bfd9(0x171)]()['nullable'](),'planId':Yup[_0x44bfd9(0x192)]()[_0x44bfd9(0x163)](),'campaignsEnabled':Yup[_0x44bfd9(0x171)]()[_0x44bfd9(0x163)](),'dueDate':Yup[_0x44bfd9(0x1b4)]()[_0x44bfd9(0x163)](),'recurrence':Yup[_0x44bfd9(0x19d)]()[_0x44bfd9(0x163)]()});try{await _0x49bd24[_0x44bfd9(0x173)](_0x192215);}catch(_0x5e709f){throw new AppError_1[(_0x44bfd9(0x1a5))](_0x5e709f['message']);}const {id:_0xcbe631}=_0x3593f4[_0x44bfd9(0x172)],_0x3dd51b=await(0x0,UpdateCompanyService_1['default'])({'id':_0xcbe631,..._0x192215});return _0x1378d5[_0x44bfd9(0x187)](0xc8)[_0x44bfd9(0x180)](_0x3dd51b);};exports[a13_0x2ec25b(0x18a)]=update;const updateSchedules=async(_0x29e055,_0x319e3c)=>{const _0x49cb69=a13_0x2ec25b,{schedules:_0x463f35}=_0x29e055[_0x49cb69(0x1af)],{id:_0x55d5a0}=_0x29e055[_0x49cb69(0x172)],_0x20f3a0=await User_1[_0x49cb69(0x1a5)][_0x49cb69(0x178)](_0x29e055['user']['id']);if(!_0x20f3a0[_0x49cb69(0x18c)]&&Number[_0x49cb69(0x188)](_0x55d5a0,0xa)!==_0x20f3a0['companyId'])throw new AppError_1[(_0x49cb69(0x1a5))](_0x49cb69(0x167),0x193);const _0x1eeaca=await(0x0,UpdateSchedulesService_1[_0x49cb69(0x1a5)])({'id':_0x55d5a0,'schedules':_0x463f35});return _0x319e3c[_0x49cb69(0x187)](0xc8)[_0x49cb69(0x180)](_0x1eeaca);};exports[a13_0x2ec25b(0x1aa)]=updateSchedules;const remove=async(_0x487c6e,_0x2a4ce6)=>{const _0x221487=a13_0x2ec25b,{id:_0x4f831b}=_0x487c6e['params'];fs_1[_0x221487(0x1a5)][_0x221487(0x185)](publicFolder+_0x221487(0x1a1)+_0x4f831b+'/')&&fs_1[_0x221487(0x1a5)][_0x221487(0x19e)](publicFolder+_0x221487(0x1a1)+_0x4f831b+'/',{'recursive':!![]});const _0x4a093d=await(0x0,DeleteCompanyService_1[_0x221487(0x1a5)])(_0x4f831b);return _0x2a4ce6['status'](0xc8)[_0x221487(0x180)](_0x4a093d);};exports['remove']=remove;const listPlan=async(_0x389dde,_0x3f2b58)=>{const _0x1619ff=a13_0x2ec25b,{id:_0x1f7d65}=_0x389dde[_0x1619ff(0x172)],_0x498aca=_0x389dde[_0x1619ff(0x1a3)][_0x1619ff(0x1b5)],[,_0x29c895]=_0x498aca['split']('\x20'),_0x15e2d1=(0x0,jsonwebtoken_1[_0x1619ff(0x1a8)])(_0x29c895,auth_1[_0x1619ff(0x1a5)][_0x1619ff(0x1b7)]),{id:_0x5bbd9a,profile:_0x20e573,companyId:_0x449b9a}=_0x15e2d1,_0x2e4e46=await User_1['default']['findByPk'](_0x5bbd9a);if(_0x2e4e46[_0x1619ff(0x18c)]===!![]||_0x449b9a[_0x1619ff(0x1b6)]()===_0x1f7d65){const _0x1bfb45=await(0x0,ShowPlanCompanyService_1[_0x1619ff(0x1a5)])(_0x1f7d65);return _0x3f2b58['status'](0xc8)['json'](_0x1bfb45);}else return _0x3f2b58[_0x1619ff(0x187)](0x190)[_0x1619ff(0x180)]({'error':_0x1619ff(0x176)});};exports[a13_0x2ec25b(0x164)]=listPlan;const indexPlan=async(_0x1546b2,_0x4d96d5)=>{const _0x4e1cd1=a13_0x2ec25b,{searchParam:_0x2dd3e9,pageNumber:_0xb5af60}=_0x1546b2[_0x4e1cd1(0x199)],_0x175cd9=_0x1546b2[_0x4e1cd1(0x1a3)]['authorization'],[,_0x4c45a4]=_0x175cd9['split']('\x20'),_0x219382=(0x0,jsonwebtoken_1[_0x4e1cd1(0x1a8)])(_0x4c45a4,auth_1[_0x4e1cd1(0x1a5)][_0x4e1cd1(0x1b7)]),{id:_0x14371b,profile:_0x58e4c9,companyId:_0x1d1065}=_0x219382,_0x412635=await User_1['default']['findByPk'](_0x14371b);if(_0x412635[_0x4e1cd1(0x18c)]===!![]){const _0x45e5a4=await(0x0,ListCompaniesPlanService_1[_0x4e1cd1(0x1a5)])();return _0x4d96d5[_0x4e1cd1(0x180)]({'companies':_0x45e5a4});}else return _0x4d96d5[_0x4e1cd1(0x187)](0x190)[_0x4e1cd1(0x180)]({'error':_0x4e1cd1(0x176)});};exports[a13_0x2ec25b(0x16e)]=indexPlan;