const a13_0x2593d1=a13_0x393e;(function(_0x253a33,_0x167b73){const _0xb74636=a13_0x393e,_0x1cf03c=_0x253a33();while(!![]){try{const _0x1d5616=-parseInt(_0xb74636(0x162))/0x1+parseInt(_0xb74636(0x168))/0x2*(-parseInt(_0xb74636(0x14d))/0x3)+parseInt(_0xb74636(0x179))/0x4+parseInt(_0xb74636(0x147))/0x5+parseInt(_0xb74636(0x176))/0x6+parseInt(_0xb74636(0x14f))/0x7*(-parseInt(_0xb74636(0x148))/0x8)+parseInt(_0xb74636(0x167))/0x9*(parseInt(_0xb74636(0x16a))/0xa);if(_0x1d5616===_0x167b73)break;else _0x1cf03c['push'](_0x1cf03c['shift']());}catch(_0x565dbb){_0x1cf03c['push'](_0x1cf03c['shift']());}}}(a13_0x3f96,0xbe0a3));const a13_0x10ef8f=(function(){let _0x7198e4=!![];return function(_0x269283,_0x47e9bb){const _0x238fcb=_0x7198e4?function(){const _0x5d9c87=a13_0x393e;if(_0x47e9bb){const _0x48d86d=_0x47e9bb[_0x5d9c87(0x18d)](_0x269283,arguments);return _0x47e9bb=null,_0x48d86d;}}:function(){};return _0x7198e4=![],_0x238fcb;};}()),a13_0x21999c=a13_0x10ef8f(this,function(){const _0x47f5f9=a13_0x393e;return a13_0x21999c['toString']()[_0x47f5f9(0x18c)](_0x47f5f9(0x165))[_0x47f5f9(0x159)]()[_0x47f5f9(0x17d)](a13_0x21999c)['search'](_0x47f5f9(0x165));});a13_0x21999c();'use strict';function a13_0x393e(_0x163bf7,_0xf52614){const _0xddbd04=a13_0x3f96();return a13_0x393e=function(_0x21999c,_0x10ef8f){_0x21999c=_0x21999c-0x144;let _0x3f9601=_0xddbd04[_0x21999c];return _0x3f9601;},a13_0x393e(_0x163bf7,_0xf52614);}var __createBinding=this&&this[a13_0x2593d1(0x15d)]||(Object['create']?function(_0x514173,_0x13a7e8,_0x2e45a2,_0x2bd4a3){const _0x5aa67e=a13_0x2593d1;if(_0x2bd4a3===undefined)_0x2bd4a3=_0x2e45a2;var _0x55df11=Object[_0x5aa67e(0x194)](_0x13a7e8,_0x2e45a2);(!_0x55df11||('get'in _0x55df11?!_0x13a7e8[_0x5aa67e(0x199)]:_0x55df11[_0x5aa67e(0x17c)]||_0x55df11[_0x5aa67e(0x197)]))&&(_0x55df11={'enumerable':!![],'get':function(){return _0x13a7e8[_0x2e45a2];}}),Object[_0x5aa67e(0x178)](_0x514173,_0x2bd4a3,_0x55df11);}:function(_0x311860,_0x3f9789,_0x3f1e4b,_0x54b42e){if(_0x54b42e===undefined)_0x54b42e=_0x3f1e4b;_0x311860[_0x54b42e]=_0x3f9789[_0x3f1e4b];}),__setModuleDefault=this&&this[a13_0x2593d1(0x17e)]||(Object[a13_0x2593d1(0x146)]?function(_0x4d4e4a,_0x316145){const _0x5ed421=a13_0x2593d1;Object[_0x5ed421(0x178)](_0x4d4e4a,_0x5ed421(0x198),{'enumerable':!![],'value':_0x316145});}:function(_0x50175b,_0x40da4e){_0x50175b['default']=_0x40da4e;}),__importStar=this&&this['__importStar']||function(_0x206c32){const _0x1168c2=a13_0x2593d1;if(_0x206c32&&_0x206c32[_0x1168c2(0x199)])return _0x206c32;var _0x37187={};if(_0x206c32!=null){for(var _0x1c7b43 in _0x206c32)if(_0x1c7b43!==_0x1168c2(0x198)&&Object[_0x1168c2(0x14c)][_0x1168c2(0x166)][_0x1168c2(0x187)](_0x206c32,_0x1c7b43))__createBinding(_0x37187,_0x206c32,_0x1c7b43);}return __setModuleDefault(_0x37187,_0x206c32),_0x37187;},__importDefault=this&&this[a13_0x2593d1(0x14b)]||function(_0x28d1cb){const _0x105e1c=a13_0x2593d1;return _0x28d1cb&&_0x28d1cb[_0x105e1c(0x199)]?_0x28d1cb:{'default':_0x28d1cb};};Object[a13_0x2593d1(0x178)](exports,a13_0x2593d1(0x199),{'value':!![]}),exports[a13_0x2593d1(0x190)]=exports[a13_0x2593d1(0x158)]=exports['remove']=exports['updateSchedules']=exports[a13_0x2593d1(0x18a)]=exports[a13_0x2593d1(0x160)]=exports[a13_0x2593d1(0x16f)]=exports[a13_0x2593d1(0x18b)]=exports[a13_0x2593d1(0x18f)]=exports[a13_0x2593d1(0x185)]=void 0x0;const Yup=__importStar(require(a13_0x2593d1(0x183))),AppError_1=__importDefault(require(a13_0x2593d1(0x163))),auth_1=__importDefault(require('../config/auth')),ListCompaniesService_1=__importDefault(require(a13_0x2593d1(0x170))),CreateCompanyService_1=__importDefault(require(a13_0x2593d1(0x193))),UpdateCompanyService_1=__importDefault(require(a13_0x2593d1(0x181))),ShowCompanyService_1=__importDefault(require(a13_0x2593d1(0x15b))),UpdateSchedulesService_1=__importDefault(require(a13_0x2593d1(0x173))),DeleteCompanyService_1=__importDefault(require(a13_0x2593d1(0x184))),FindAllCompaniesService_1=__importDefault(require(a13_0x2593d1(0x153))),jsonwebtoken_1=require(a13_0x2593d1(0x188)),User_1=__importDefault(require('../models/User')),ShowPlanCompanyService_1=__importDefault(require(a13_0x2593d1(0x145))),ListCompaniesPlanService_1=__importDefault(require(a13_0x2593d1(0x151))),CheckSettings_1=__importDefault(require('../helpers/CheckSettings')),moment_1=__importDefault(require(a13_0x2593d1(0x195))),fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a13_0x2593d1(0x164))),publicFolder=path_1[a13_0x2593d1(0x198)][a13_0x2593d1(0x17a)](__dirname,'..','..','public'),index=async(_0x453e37,_0x120729)=>{const _0x54e00c=a13_0x2593d1,{searchParam:_0x106bb7,pageNumber:_0x25b9a2}=_0x453e37[_0x54e00c(0x154)],{companies:_0x8059fd,count:_0x3b6ef4,hasMore:_0x1cd1ba}=await(0x0,ListCompaniesService_1[_0x54e00c(0x198)])({'searchParam':_0x106bb7,'pageNumber':_0x25b9a2});return _0x120729[_0x54e00c(0x177)]({'companies':_0x8059fd,'count':_0x3b6ef4,'hasMore':_0x1cd1ba});};exports['index']=index;const signup=async(_0x52419d,_0x32f55d)=>{const _0x6061a1=a13_0x2593d1;if(await(0x0,CheckSettings_1[_0x6061a1(0x198)])('allowSignup')!==_0x6061a1(0x196))return _0x32f55d[_0x6061a1(0x18e)](0x191)[_0x6061a1(0x177)](_0x6061a1(0x15c));return await(0x0,exports['store'])(_0x52419d,_0x32f55d);};exports[a13_0x2593d1(0x18f)]=signup;const store=async(_0x4637a3,_0x1b3cd4)=>{const _0x246ee4=a13_0x2593d1,_0x58a7b2=_0x4637a3[_0x246ee4(0x152)];try{const _0x413490=await(0x0,CheckSettings_1[_0x246ee4(0x198)])('trialExpiration'),_0xba298b=parseInt(_0x413490,0xa);isNaN(_0xba298b)||_0xba298b<=0x0?_0x58a7b2[_0x246ee4(0x16b)]=(0x0,moment_1[_0x246ee4(0x198)])()[_0x246ee4(0x172)](0x7,_0x246ee4(0x155))[_0x246ee4(0x17f)]():_0x58a7b2['dueDate']=(0x0,moment_1['default'])()[_0x246ee4(0x172)](_0xba298b,'days')['toDate']();const _0x23ffb5=await(0x0,CreateCompanyService_1[_0x246ee4(0x198)])(_0x58a7b2);return _0x1b3cd4['status'](0xc9)['json'](_0x23ffb5);}catch(_0x3b3f76){return _0x1b3cd4[_0x246ee4(0x18e)](0x1f4)[_0x246ee4(0x177)]({'message':_0x246ee4(0x14a),'error':_0x3b3f76});}};exports[a13_0x2593d1(0x18b)]=store;const show=async(_0x4d7777,_0x58087e)=>{const _0x3e1de8=a13_0x2593d1,{id:_0x38c013}=_0x4d7777[_0x3e1de8(0x186)],_0x1b98ae=await User_1['default'][_0x3e1de8(0x149)](_0x4d7777[_0x3e1de8(0x169)]['id']);if(!_0x1b98ae[_0x3e1de8(0x161)]&&Number[_0x3e1de8(0x156)](_0x38c013,0xa)!==_0x1b98ae[_0x3e1de8(0x16e)])throw new AppError_1['default'](_0x3e1de8(0x171),0x193);const _0x5a0849=await(0x0,ShowCompanyService_1[_0x3e1de8(0x198)])(_0x38c013);return _0x58087e['status'](0xc8)[_0x3e1de8(0x177)](_0x5a0849);};exports[a13_0x2593d1(0x16f)]=show;const list=async(_0x2060f4,_0x32c181)=>{const _0x160c44=a13_0x2593d1,_0x56d84c=await(0x0,FindAllCompaniesService_1[_0x160c44(0x198)])();return _0x32c181['status'](0xc8)[_0x160c44(0x177)](_0x56d84c);};exports['list']=list;const update=async(_0x228789,_0x5df967)=>{const _0x385e9e=a13_0x2593d1,_0x1b41c0=_0x228789[_0x385e9e(0x152)],_0x40e3d1=Yup[_0x385e9e(0x157)]()[_0x385e9e(0x191)]({'name':Yup[_0x385e9e(0x16d)]()['required'](),'email':Yup[_0x385e9e(0x16d)]()[_0x385e9e(0x17b)]()[_0x385e9e(0x192)](),'phone':Yup[_0x385e9e(0x16d)]()[_0x385e9e(0x192)](),'status':Yup[_0x385e9e(0x14e)]()['nullable'](),'planId':Yup['number']()['nullable'](),'campaignsEnabled':Yup['boolean']()[_0x385e9e(0x192)](),'dueDate':Yup[_0x385e9e(0x182)]()[_0x385e9e(0x192)](),'recurrence':Yup[_0x385e9e(0x16d)]()['nullable']()});try{await _0x40e3d1[_0x385e9e(0x16c)](_0x1b41c0);}catch(_0x439042){throw new AppError_1['default'](_0x439042['message']);}const {id:_0x155206}=_0x228789[_0x385e9e(0x186)],_0x4b04e4=await(0x0,UpdateCompanyService_1[_0x385e9e(0x198)])({'id':_0x155206,..._0x1b41c0});return _0x5df967['status'](0xc8)[_0x385e9e(0x177)](_0x4b04e4);};exports[a13_0x2593d1(0x18a)]=update;const updateSchedules=async(_0x4b114d,_0x1d6e05)=>{const _0x30ac5f=a13_0x2593d1,{schedules:_0xff968}=_0x4b114d[_0x30ac5f(0x152)],{id:_0x2041dc}=_0x4b114d[_0x30ac5f(0x186)],_0x1afb56=await User_1['default']['findByPk'](_0x4b114d[_0x30ac5f(0x169)]['id']);if(!_0x1afb56[_0x30ac5f(0x161)]&&Number[_0x30ac5f(0x156)](_0x2041dc,0xa)!==_0x1afb56[_0x30ac5f(0x16e)])throw new AppError_1['default'](_0x30ac5f(0x171),0x193);const _0x7fe947=await(0x0,UpdateSchedulesService_1[_0x30ac5f(0x198)])({'id':_0x2041dc,'schedules':_0xff968});return _0x1d6e05[_0x30ac5f(0x18e)](0xc8)[_0x30ac5f(0x177)](_0x7fe947);};function a13_0x3f96(){const _0x31f2c4=['status','signup','indexPlan','shape','nullable','../services/CompanyService/CreateCompanyService','getOwnPropertyDescriptor','moment','enabled','configurable','default','__esModule','updateSchedules','secret','../services/CompanyService/ShowPlanCompanyService','create','1034515lqGIdA','502848MKmGbN','findByPk','Error\x20creating\x20company','__importDefault','prototype','50910mQsujG','boolean','98qBQOex','authorization','../services/CompanyService/ListCompaniesPlanService','body','../services/CompanyService/FindAllCompaniesService','query','days','parseInt','object','listPlan','toString','verify','../services/CompanyService/ShowCompanyService','🙎🏻‍♂️\x20Signup\x20disabled','__createBinding','/company','Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!','list','super','1229770kLcQqu','../errors/AppError','path','(((.+)+)+)+$','hasOwnProperty','715446muBhUq','8atyNaN','user','130cuccBO','dueDate','validate','string','companyId','show','../services/CompanyService/ListCompaniesService','ERR_FORBIDDEN','add','../services/CompanyService/UpdateSchedulesService','rmdirSync','existsSync','1982670jfeNHS','json','defineProperty','5541068uzUDTj','resolve','email','writable','constructor','__setModuleDefault','toDate','split','../services/CompanyService/UpdateCompanyService','date','yup','../services/CompanyService/DeleteCompanyService','index','params','call','jsonwebtoken','headers','update','store','search','apply'];a13_0x3f96=function(){return _0x31f2c4;};return a13_0x3f96();}exports[a13_0x2593d1(0x19a)]=updateSchedules;const remove=async(_0x14494e,_0x26f856)=>{const _0x1360c0=a13_0x2593d1,{id:_0x2a189f}=_0x14494e[_0x1360c0(0x186)];fs_1[_0x1360c0(0x198)][_0x1360c0(0x175)](publicFolder+'/company'+_0x2a189f+'/')&&fs_1[_0x1360c0(0x198)][_0x1360c0(0x174)](publicFolder+_0x1360c0(0x15e)+_0x2a189f+'/',{'recursive':!![]});const _0x11c496=await(0x0,DeleteCompanyService_1[_0x1360c0(0x198)])(_0x2a189f);return _0x26f856['status'](0xc8)[_0x1360c0(0x177)](_0x11c496);};exports['remove']=remove;const listPlan=async(_0x50da25,_0x3ed54e)=>{const _0x4e887c=a13_0x2593d1,{id:_0x2f1919}=_0x50da25[_0x4e887c(0x186)],_0x30a639=_0x50da25[_0x4e887c(0x189)][_0x4e887c(0x150)],[,_0x469eac]=_0x30a639[_0x4e887c(0x180)]('\x20'),_0x8cf55=(0x0,jsonwebtoken_1[_0x4e887c(0x15a)])(_0x469eac,auth_1[_0x4e887c(0x198)]['secret']),{id:_0x34b9eb,profile:_0x204ca7,companyId:_0x4cee57}=_0x8cf55,_0x3c0943=await User_1[_0x4e887c(0x198)]['findByPk'](_0x34b9eb);if(_0x3c0943[_0x4e887c(0x161)]===!![]||_0x4cee57[_0x4e887c(0x159)]()===_0x2f1919){const _0x5a4e53=await(0x0,ShowPlanCompanyService_1[_0x4e887c(0x198)])(_0x2f1919);return _0x3ed54e[_0x4e887c(0x18e)](0xc8)[_0x4e887c(0x177)](_0x5a4e53);}else return _0x3ed54e['status'](0x190)[_0x4e887c(0x177)]({'error':_0x4e887c(0x15f)});};exports[a13_0x2593d1(0x158)]=listPlan;const indexPlan=async(_0x586560,_0x3d5265)=>{const _0x1231d7=a13_0x2593d1,{searchParam:_0x3e97e3,pageNumber:_0x2b5e74}=_0x586560[_0x1231d7(0x154)],_0x3d0655=_0x586560['headers']['authorization'],[,_0xa63dd6]=_0x3d0655[_0x1231d7(0x180)]('\x20'),_0x3fafa9=(0x0,jsonwebtoken_1[_0x1231d7(0x15a)])(_0xa63dd6,auth_1['default'][_0x1231d7(0x144)]),{id:_0x138db6,profile:_0x5474ec,companyId:_0x985f93}=_0x3fafa9,_0x180e4e=await User_1['default'][_0x1231d7(0x149)](_0x138db6);if(_0x180e4e[_0x1231d7(0x161)]===!![]){const _0x49967e=await(0x0,ListCompaniesPlanService_1[_0x1231d7(0x198)])();return _0x3d5265[_0x1231d7(0x177)]({'companies':_0x49967e});}else return _0x3d5265['status'](0x190)[_0x1231d7(0x177)]({'error':_0x1231d7(0x15f)});};exports['indexPlan']=indexPlan;