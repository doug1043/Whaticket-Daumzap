const a9_0x58f980=a9_0x3ee8;(function(_0x1b81d6,_0x459cb7){const _0x813a51=a9_0x3ee8,_0x235663=_0x1b81d6();while(!![]){try{const _0x5ccfd2=parseInt(_0x813a51(0x101))/0x1+-parseInt(_0x813a51(0x18c))/0x2+-parseInt(_0x813a51(0x17c))/0x3*(parseInt(_0x813a51(0x19f))/0x4)+parseInt(_0x813a51(0x16b))/0x5*(parseInt(_0x813a51(0x132))/0x6)+parseInt(_0x813a51(0x1ba))/0x7*(-parseInt(_0x813a51(0xf6))/0x8)+-parseInt(_0x813a51(0x1a7))/0x9*(parseInt(_0x813a51(0x1b4))/0xa)+parseInt(_0x813a51(0x1a8))/0xb*(parseInt(_0x813a51(0x191))/0xc);if(_0x5ccfd2===_0x459cb7)break;else _0x235663['push'](_0x235663['shift']());}catch(_0x5f4f94){_0x235663['push'](_0x235663['shift']());}}}(a9_0x4068,0xd968b));const a9_0x40e906=(function(){let _0x2ecceb=!![];return function(_0x2e2b47,_0xd1bdde){const _0x313a3e=_0x2ecceb?function(){const _0x7dff2f=a9_0x3ee8;if(_0xd1bdde){const _0x1fcdfd=_0xd1bdde[_0x7dff2f(0xfd)](_0x2e2b47,arguments);return _0xd1bdde=null,_0x1fcdfd;}}:function(){};return _0x2ecceb=![],_0x313a3e;};}()),a9_0x26b43a=a9_0x40e906(this,function(){const _0x568fb8=a9_0x3ee8;return a9_0x26b43a[_0x568fb8(0x124)]()[_0x568fb8(0x172)]('(((.+)+)+)+$')[_0x568fb8(0x124)]()[_0x568fb8(0x1c3)](a9_0x26b43a)[_0x568fb8(0x172)](_0x568fb8(0x171));});a9_0x26b43a();'use strict';var __createBinding=this&&this[a9_0x58f980(0x100)]||(Object[a9_0x58f980(0x1b6)]?function(_0x5c63b1,_0x3e9d72,_0x37d1cc,_0x1f21e3){const _0x4b48b1=a9_0x58f980;if(_0x1f21e3===undefined)_0x1f21e3=_0x37d1cc;var _0x40e004=Object[_0x4b48b1(0x10c)](_0x3e9d72,_0x37d1cc);(!_0x40e004||(_0x4b48b1(0x19b)in _0x40e004?!_0x3e9d72[_0x4b48b1(0x197)]:_0x40e004[_0x4b48b1(0x133)]||_0x40e004['configurable']))&&(_0x40e004={'enumerable':!![],'get':function(){return _0x3e9d72[_0x37d1cc];}}),Object[_0x4b48b1(0x10e)](_0x5c63b1,_0x1f21e3,_0x40e004);}:function(_0xe472d,_0x3a832f,_0x4c40ac,_0x547c56){if(_0x547c56===undefined)_0x547c56=_0x4c40ac;_0xe472d[_0x547c56]=_0x3a832f[_0x4c40ac];}),__setModuleDefault=this&&this[a9_0x58f980(0x159)]||(Object[a9_0x58f980(0x1b6)]?function(_0x440195,_0x1295d2){const _0x192684=a9_0x58f980;Object[_0x192684(0x10e)](_0x440195,_0x192684(0x131),{'enumerable':!![],'value':_0x1295d2});}:function(_0x454397,_0x3cbd07){_0x454397['default']=_0x3cbd07;}),__importStar=this&&this[a9_0x58f980(0x1ca)]||function(_0x3a496b){const _0x2ac7af=a9_0x58f980;if(_0x3a496b&&_0x3a496b[_0x2ac7af(0x197)])return _0x3a496b;var _0x73507={};if(_0x3a496b!=null){for(var _0x132fe0 in _0x3a496b)if(_0x132fe0!==_0x2ac7af(0x131)&&Object[_0x2ac7af(0x1b7)][_0x2ac7af(0x135)]['call'](_0x3a496b,_0x132fe0))__createBinding(_0x73507,_0x3a496b,_0x132fe0);}return __setModuleDefault(_0x73507,_0x3a496b),_0x73507;},__importDefault=this&&this[a9_0x58f980(0xfa)]||function(_0x105733){const _0x50cd9c=a9_0x58f980;return _0x105733&&_0x105733[_0x50cd9c(0x197)]?_0x105733:{'default':_0x105733};};Object[a9_0x58f980(0x10e)](exports,a9_0x58f980(0x197),{'value':!![]}),exports[a9_0x58f980(0x17b)]=exports[a9_0x58f980(0x1aa)]=exports['removeContacts']=exports['updateContacts']=exports['removeAllContacts']=exports[a9_0x58f980(0x146)]=exports['findOrCreateContacts']=exports[a9_0x58f980(0xf1)]=exports['listContacts']=exports[a9_0x58f980(0x15a)]=exports[a9_0x58f980(0x1cd)]=exports[a9_0x58f980(0x13d)]=exports['showAllApi']=exports['showApi']=exports[a9_0x58f980(0x12f)]=exports[a9_0x58f980(0x19d)]=exports[a9_0x58f980(0x140)]=exports[a9_0x58f980(0x164)]=exports[a9_0x58f980(0x12a)]=exports[a9_0x58f980(0x10d)]=exports[a9_0x58f980(0x108)]=exports['updateTicketTag']=exports['closeTicket']=exports['updateQueueId']=exports['indexWhatsappsId']=exports[a9_0x58f980(0x15c)]=exports[a9_0x58f980(0x152)]=exports[a9_0x58f980(0x141)]=exports[a9_0x58f980(0x1cc)]=exports[a9_0x58f980(0x134)]=exports[a9_0x58f980(0x17d)]=exports[a9_0x58f980(0x1ce)]=exports[a9_0x58f980(0x11f)]=void 0x0;const axios_1=__importDefault(require(a9_0x58f980(0x125))),fs_1=__importDefault(require('fs')),Yup=__importStar(require(a9_0x58f980(0x18f))),lodash_1=require('lodash'),GetDefaultWhatsApp_1=__importDefault(require(a9_0x58f980(0x128))),SetTicketMessagesAsRead_1=__importDefault(require(a9_0x58f980(0x13b))),socket_1=require('../libs/socket'),Whatsapp_1=__importDefault(require(a9_0x58f980(0x158))),Queue_1=__importDefault(require(a9_0x58f980(0x143))),User_1=__importDefault(require('../models/User')),CreateOrUpdateContactService_1=__importDefault(require(a9_0x58f980(0x1ac))),FindOrCreateTicketService_1=__importDefault(require(a9_0x58f980(0x137))),ShowTicketService_1=__importDefault(require(a9_0x58f980(0x138))),GetProfilePicUrl_1=__importDefault(require('../services/WbotServices/GetProfilePicUrl')),SendWhatsAppMedia_1=__importDefault(require(a9_0x58f980(0x161))),UpdateTicketService_1=__importDefault(require('../services/TicketServices/UpdateTicketService')),wbot_1=require('../libs/wbot'),SendWhatsAppMessageLink_1=__importDefault(require(a9_0x58f980(0x184))),SendWhatsAppMessageAPI_1=__importDefault(require(a9_0x58f980(0x15f))),SendWhatsappMediaImage_1=__importDefault(require(a9_0x58f980(0x12c))),ListInvoicesServices_1=__importDefault(require(a9_0x58f980(0x11a))),ShowInvoiceService_1=__importDefault(require(a9_0x58f980(0x19a))),UpdateInvoiceService_1=__importDefault(require(a9_0x58f980(0xfc))),Invoices_1=__importDefault(require(a9_0x58f980(0x102))),ListContactsService_1=__importDefault(require(a9_0x58f980(0x12e))),CreateContactService_1=__importDefault(require(a9_0x58f980(0x1c5))),ShowContactService_1=__importDefault(require(a9_0x58f980(0x175))),UpdateContactService_1=__importDefault(require('../services/ContactServices/UpdateContactService')),DeleteContactService_1=__importDefault(require(a9_0x58f980(0x1b3))),GetContactService_1=__importDefault(require(a9_0x58f980(0x1a4))),ToggleDisableBotService_1=__importDefault(require(a9_0x58f980(0x118))),CheckNumber_1=__importDefault(require(a9_0x58f980(0xf0))),CheckIsValidContact_1=__importDefault(require(a9_0x58f980(0xfb))),AppError_1=__importDefault(require(a9_0x58f980(0x121))),SimpleListService_1=__importDefault(require(a9_0x58f980(0x154))),ImportXLSContactsService_1=require(a9_0x58f980(0x13a)),ApiUsages_1=__importDefault(require(a9_0x58f980(0x18e))),useDate_1=require('../utils/useDate'),TicketTag_1=__importDefault(require(a9_0x58f980(0x106))),Tag_1=__importDefault(require(a9_0x58f980(0x15e))),moment_1=__importDefault(require(a9_0x58f980(0x18d))),path_1=__importDefault(require(a9_0x58f980(0x17e))),Ticket_1=__importDefault(require('../models/Ticket')),Contact_1=__importDefault(require(a9_0x58f980(0x10a))),Company_1=__importDefault(require('../models/Company')),SendPresenceStatus_1=require(a9_0x58f980(0x17f));class OnWhatsAppDto{constructor(_0xa60fe5,_0x1cff2a){const _0x266379=a9_0x58f980;this[_0x266379(0x166)]=_0xa60fe5,this[_0x266379(0x1ae)]=_0x1cff2a;}}exports[a9_0x58f980(0x11f)]=OnWhatsAppDto;const CompanySchema=Yup[a9_0x58f980(0xff)]()[a9_0x58f980(0x123)]({'name':Yup[a9_0x58f980(0x1ad)]()[a9_0x58f980(0x127)](),'id':Yup['number'](),'phone':Yup['string']()[a9_0x58f980(0x195)](),'email':Yup[a9_0x58f980(0x1ad)]()[a9_0x58f980(0x119)]()['nullable'](),'status':Yup[a9_0x58f980(0x114)]()[a9_0x58f980(0x195)](),'planId':Yup[a9_0x58f980(0x180)]()[a9_0x58f980(0x195)](),'campaignsEnabled':Yup[a9_0x58f980(0x114)]()[a9_0x58f980(0x195)](),'dueDate':Yup[a9_0x58f980(0x10f)]()[a9_0x58f980(0x195)](),'recurrence':Yup[a9_0x58f980(0x1ad)]()[a9_0x58f980(0x195)]()}),createCompany=async(_0x5805a1,_0x211a48)=>{const _0x459729=a9_0x58f980;try{await CompanySchema[_0x459729(0x1c0)](_0x5805a1[_0x459729(0x15b)]);const _0x1e7491=await Company_1['default'][_0x459729(0x1b6)](_0x5805a1[_0x459729(0x15b)]);_0x211a48['status'](0xc9)['json'](_0x1e7491);}catch(_0x14ff7c){_0x211a48[_0x459729(0x198)](0x190)[_0x459729(0x10b)]({'error':_0x14ff7c['message']});}};exports[a9_0x58f980(0x1ce)]=createCompany;const updateCompany=async(_0x5dbcf8,_0x4750d7)=>{const _0x2bd093=a9_0x58f980;try{await CompanySchema[_0x2bd093(0x1c0)](_0x5dbcf8[_0x2bd093(0x15b)]);const {id:_0xa9b835}=_0x5dbcf8['params'],[_0x29ca3c]=await Company_1[_0x2bd093(0x131)][_0x2bd093(0x183)](_0x5dbcf8[_0x2bd093(0x15b)],{'where':{'id':_0xa9b835}});if(_0x29ca3c){const _0x2b0720=await Company_1[_0x2bd093(0x131)][_0x2bd093(0x122)](_0xa9b835);_0x4750d7[_0x2bd093(0x198)](0xc8)[_0x2bd093(0x10b)](_0x2b0720);}else _0x4750d7['status'](0x194)[_0x2bd093(0x10b)]({'error':'Company\x20not\x20found'});}catch(_0x76419d){_0x4750d7['status'](0x190)[_0x2bd093(0x10b)]({'error':_0x76419d[_0x2bd093(0x104)]});}};exports[a9_0x58f980(0x17d)]=updateCompany;const blockCompany=async(_0x51f4e5,_0x4fdf28)=>{const _0x513d89=a9_0x58f980;try{const {id:_0x7dfde8}=_0x51f4e5['params'],[_0x536368]=await Company_1[_0x513d89(0x131)][_0x513d89(0x183)]({'status':![]},{'where':{'id':_0x7dfde8}});if(_0x536368){const _0x347067=await Company_1[_0x513d89(0x131)][_0x513d89(0x122)](_0x7dfde8);_0x4fdf28[_0x513d89(0x198)](0xc8)[_0x513d89(0x10b)](_0x347067);}else _0x4fdf28[_0x513d89(0x198)](0x194)[_0x513d89(0x10b)]({'error':'Company\x20not\x20found'});}catch(_0x82aff8){_0x4fdf28[_0x513d89(0x198)](0x190)[_0x513d89(0x10b)]({'error':_0x82aff8[_0x513d89(0x104)]});}};exports['blockCompany']=blockCompany;const createContact=async(_0x151abd,_0x4776df,_0x10e1e7)=>{const _0x99088b=a9_0x58f980;await(0x0,CheckIsValidContact_1['default'])(_0x10e1e7,_0x4776df);const _0xfc33d3=await(0x0,CheckNumber_1[_0x99088b(0x131)])(_0x10e1e7,_0x4776df),_0x44ffe3=await(0x0,GetProfilePicUrl_1[_0x99088b(0x131)])(_0xfc33d3,_0x4776df),_0x58b6bd=_0xfc33d3,_0x3de5f9={'name':''+_0x58b6bd,'number':_0x58b6bd,'profilePicUrl':_0x44ffe3,'isGroup':![],'companyId':_0x4776df},_0x69f152=await(0x0,CreateOrUpdateContactService_1[_0x99088b(0x131)])(_0x3de5f9,null,null);let _0x4976c2;if(_0x151abd===undefined)_0x4976c2=await(0x0,GetDefaultWhatsApp_1[_0x99088b(0x131)])(_0x4776df);else{_0x4976c2=await Whatsapp_1['default'][_0x99088b(0x122)](_0x151abd);if(_0x4976c2===null)throw new AppError_1[(_0x99088b(0x131))](_0x99088b(0x182)+_0x151abd+_0x99088b(0x1c2));}const _0x45f723=await(0x0,FindOrCreateTicketService_1[_0x99088b(0x131)])(_0x69f152,_0x4976c2['id'],0x0,_0x4776df),_0x5667e0=await(0x0,ShowTicketService_1[_0x99088b(0x131)])(_0x45f723['id'],_0x4776df);return(0x0,SetTicketMessagesAsRead_1['default'])(_0x5667e0),_0x5667e0;};function formatBRNumber(_0x43fcc9){const _0x3d072c=a9_0x58f980,_0xf8ae21=new RegExp(/^(\d{2})(\d{2})\d{1}(\d{8})$/);if(_0xf8ae21[_0x3d072c(0x136)](_0x43fcc9)){const _0x20e4bb=_0xf8ae21[_0x3d072c(0x1be)](_0x43fcc9);if(_0x20e4bb&&_0x20e4bb[0x1]==='55'&&Number[_0x3d072c(0x190)](Number[_0x3d072c(0x1bd)](_0x20e4bb[0x2]))){const _0x5aa523=Number[_0x3d072c(0x1bd)](_0x20e4bb[0x2]);if(_0x5aa523<0x1f)return _0x20e4bb[0x0];else{if(_0x5aa523>=0x1f)return _0x20e4bb[0x1]+_0x20e4bb[0x2]+_0x20e4bb[0x3];}}}else return _0x43fcc9;}function createJid(_0xbb20ea){const _0x31c181=a9_0x58f980;if(_0xbb20ea[_0x31c181(0x150)](_0x31c181(0x1a0))||_0xbb20ea['includes'](_0x31c181(0x11d)))return formatBRNumber(_0xbb20ea);return _0xbb20ea[_0x31c181(0x150)]('-')?_0xbb20ea+_0x31c181(0x1a0):formatBRNumber(_0xbb20ea)+'@s.whatsapp.net';}const indexLink=async(_0x3ddff0,_0x5da62a)=>{const _0x1206a8=a9_0x58f980,_0x502a73=_0x3ddff0[_0x1206a8(0x15b)],{whatsappId:_0x4f90e0}=_0x3ddff0[_0x1206a8(0x15b)],{msdelay:_0xa549e1}=_0x3ddff0['body'],_0x7a1d3d=_0x3ddff0[_0x1206a8(0x15b)][_0x1206a8(0x1bc)],_0x1748d2=_0x3ddff0['body'][_0x1206a8(0x11c)],_0x793e94=_0x3ddff0['headers'][_0x1206a8(0x120)],[,_0xeaf043]=_0x793e94[_0x1206a8(0x1b0)]('\x20'),_0x14a50f=await Whatsapp_1[_0x1206a8(0x131)][_0x1206a8(0x13e)]({'where':{'token':_0xeaf043}}),_0x3ba74f=_0x14a50f[_0x1206a8(0x1c1)];_0x502a73[_0x1206a8(0x180)]=_0x502a73[_0x1206a8(0x180)]['replace']('-','')[_0x1206a8(0x107)]('\x20','');const _0x1e591f=Yup[_0x1206a8(0xff)]()[_0x1206a8(0x123)]({'number':Yup[_0x1206a8(0x1ad)]()['required']()[_0x1206a8(0xf7)](/^\d+$/,_0x1206a8(0x144))});try{await _0x1e591f['validate'](_0x502a73);}catch(_0x2d8619){throw new AppError_1[(_0x1206a8(0x131))](_0x2d8619['message']);}const _0x24a89e=await createContact(_0x4f90e0,_0x3ba74f,_0x502a73[_0x1206a8(0x180)]);return await(0x0,SendWhatsAppMessageLink_1[_0x1206a8(0x131)])({'ticket':_0x24a89e,'url':_0x7a1d3d,'caption':_0x1748d2,'msdelay':_0xa549e1}),setTimeout(async()=>{const _0x4b930f=_0x1206a8;await(0x0,UpdateTicketService_1[_0x4b930f(0x131)])({'ticketId':_0x24a89e['id'],'ticketData':{'status':'pending','sendFarewellMessage':![],'amountUsedBotQueues':0x0},'companyId':_0x3ba74f});},0xc8),setTimeout(async()=>{const _0x396f90=_0x1206a8,{dateToClient:_0x544827}=(0x0,useDate_1[_0x396f90(0x178)])(),_0x2ee3d3=_0x544827(new Date()['toString']()),_0x2cbe73=(0x0,moment_1[_0x396f90(0x131)])()['format'](),_0x496262=await ApiUsages_1[_0x396f90(0x131)][_0x396f90(0x13e)]({'where':{'dateUsed':_0x2ee3d3,'companyId':_0x3ba74f}});if(_0x496262)await _0x496262[_0x396f90(0x183)]({'usedPDF':_0x496262['dataValues']['usedPDF']+0x1,'UsedOnDay':_0x496262['dataValues'][_0x396f90(0x1a6)]+0x1,'updatedAt':_0x2cbe73});else{const _0x1706f3=await ApiUsages_1[_0x396f90(0x131)][_0x396f90(0x1b6)]({'companyId':_0x3ba74f,'dateUsed':_0x2ee3d3});await _0x1706f3[_0x396f90(0x183)]({'usedPDF':_0x1706f3[_0x396f90(0x109)][_0x396f90(0x187)]+0x1,'UsedOnDay':_0x1706f3[_0x396f90(0x109)][_0x396f90(0x1a6)]+0x1,'updatedAt':_0x2cbe73});}},0x64),_0x5da62a[_0x1206a8(0x1bf)]({'status':_0x1206a8(0x142)});};exports['indexLink']=indexLink;const index=async(_0x2a1c92,_0xf398c0)=>{const _0x242512=a9_0x58f980,_0x28b092=_0x2a1c92[_0x242512(0x15b)],{whatsappId:_0x498d55}=_0x2a1c92[_0x242512(0x15b)],{msdelay:_0x41c0aa}=_0x2a1c92[_0x242512(0x15b)],{body:_0x35374b,quotedMsg:_0x3400fc}=_0x2a1c92[_0x242512(0x15b)],_0x18d0e6=_0x2a1c92[_0x242512(0xef)],_0x30e47b=_0x2a1c92[_0x242512(0x1a2)][_0x242512(0x120)],[,_0x3e9fa2]=_0x30e47b[_0x242512(0x1b0)]('\x20'),_0x3513c3=await Whatsapp_1[_0x242512(0x131)]['findOne']({'where':{'token':_0x3e9fa2}}),_0x47111e=_0x3513c3['companyId'];_0x28b092['number']=_0x28b092[_0x242512(0x180)][_0x242512(0x107)]('-','')[_0x242512(0x107)]('\x20','');const _0x331d9a=Yup['object']()[_0x242512(0x123)]({'number':Yup[_0x242512(0x1ad)]()[_0x242512(0x127)]()[_0x242512(0xf7)](/^\d+$/,_0x242512(0x144))});try{await _0x331d9a[_0x242512(0x1c0)](_0x28b092);}catch(_0x3c4db0){throw new AppError_1[(_0x242512(0x131))](_0x3c4db0[_0x242512(0x104)]);}const _0x4d93fa=await createContact(_0x498d55,_0x47111e,_0x28b092['number']);return _0x18d0e6?await Promise[_0x242512(0x14d)](_0x18d0e6['map'](async _0x64a6dc=>{const _0x2f42ca=_0x242512;await(0x0,SendWhatsAppMedia_1[_0x2f42ca(0x131)])({'body':_0x35374b,'media':_0x64a6dc,'ticket':_0x4d93fa});})):await(0x0,SendWhatsAppMessageAPI_1[_0x242512(0x131)])({'body':_0x35374b,'ticket':_0x4d93fa,'quotedMsg':_0x3400fc,'msdelay':_0x41c0aa}),setTimeout(async()=>{const _0x49da2a=_0x242512;await(0x0,UpdateTicketService_1[_0x49da2a(0x131)])({'ticketId':_0x4d93fa['id'],'ticketData':{'status':'pending','sendFarewellMessage':![],'amountUsedBotQueues':0x0},'companyId':_0x47111e});},0x64),setTimeout(async()=>{const _0x2a0306=_0x242512,{dateToClient:_0x5db978}=(0x0,useDate_1[_0x2a0306(0x178)])(),_0x1fbf22=_0x5db978(new Date()[_0x2a0306(0x124)]()),_0x2220ad=(0x0,moment_1['default'])()['format'](),_0x49baa4=await ApiUsages_1[_0x2a0306(0x131)][_0x2a0306(0x13e)]({'where':{'dateUsed':_0x1fbf22,'companyId':_0x47111e}});_0x49baa4?_0x18d0e6?await Promise['all'](_0x18d0e6[_0x2a0306(0x153)](async _0x221a6e=>{const _0x40ff20=_0x2a0306;console[_0x40ff20(0x11b)](_0x40ff20(0x1b9),_0x221a6e);const _0x207e4e=path_1[_0x40ff20(0x131)][_0x40ff20(0x145)](_0x221a6e[_0x40ff20(0x12d)]);console[_0x40ff20(0x11b)](_0x40ff20(0xf5),_0x207e4e);if(_0x221a6e['mimetype'][_0x40ff20(0x150)](_0x40ff20(0x169)))await _0x49baa4['update']({'usedPDF':_0x49baa4[_0x40ff20(0x109)][_0x40ff20(0x187)]+0x1,'UsedOnDay':_0x49baa4[_0x40ff20(0x109)][_0x40ff20(0x1a6)]+0x1,'updatedAt':_0x2220ad});else{if(_0x221a6e[_0x40ff20(0xee)][_0x40ff20(0x150)]('image'))await _0x49baa4[_0x40ff20(0x183)]({'usedImage':_0x49baa4[_0x40ff20(0x109)][_0x40ff20(0x174)]+0x1,'UsedOnDay':_0x49baa4[_0x40ff20(0x109)]['UsedOnDay']+0x1,'updatedAt':_0x2220ad});else _0x221a6e[_0x40ff20(0xee)][_0x40ff20(0x150)](_0x40ff20(0x1cb))?await _0x49baa4[_0x40ff20(0x183)]({'usedVideo':_0x49baa4['dataValues'][_0x40ff20(0x110)]+0x1,'UsedOnDay':_0x49baa4[_0x40ff20(0x109)][_0x40ff20(0x1a6)]+0x1,'updatedAt':_0x2220ad}):await _0x49baa4['update']({'usedOther':_0x49baa4[_0x40ff20(0x109)][_0x40ff20(0x1c4)]+0x1,'UsedOnDay':_0x49baa4[_0x40ff20(0x109)][_0x40ff20(0x1a6)]+0x1,'updatedAt':_0x2220ad});}})):await _0x49baa4[_0x2a0306(0x183)]({'usedText':_0x49baa4['dataValues'][_0x2a0306(0x113)]+0x1,'UsedOnDay':_0x49baa4['dataValues'][_0x2a0306(0x1a6)]+0x1,'updatedAt':_0x2220ad}):(await ApiUsages_1[_0x2a0306(0x131)][_0x2a0306(0x1b6)]({'companyId':_0x47111e,'dateUsed':_0x1fbf22}),_0x18d0e6?await Promise[_0x2a0306(0x14d)](_0x18d0e6[_0x2a0306(0x153)](async _0x2fadf0=>{const _0xca8bc6=_0x2a0306;console[_0xca8bc6(0x11b)](_0xca8bc6(0x1b9),_0x2fadf0);const _0x21d04a=path_1[_0xca8bc6(0x131)][_0xca8bc6(0x145)](_0x2fadf0[_0xca8bc6(0x12d)]);console[_0xca8bc6(0x11b)]('type',_0x21d04a);if(_0x2fadf0['mimetype'][_0xca8bc6(0x150)](_0xca8bc6(0x169)))await _0x49baa4['update']({'usedPDF':_0x49baa4[_0xca8bc6(0x109)]['usedPDF']+0x1,'UsedOnDay':_0x49baa4[_0xca8bc6(0x109)][_0xca8bc6(0x1a6)]+0x1,'updatedAt':_0x2220ad});else{if(_0x2fadf0[_0xca8bc6(0xee)][_0xca8bc6(0x150)](_0xca8bc6(0x116)))await _0x49baa4['update']({'usedImage':_0x49baa4[_0xca8bc6(0x109)]['usedImage']+0x1,'UsedOnDay':_0x49baa4['dataValues'][_0xca8bc6(0x1a6)]+0x1,'updatedAt':_0x2220ad});else _0x2fadf0[_0xca8bc6(0xee)][_0xca8bc6(0x150)]('video')?await _0x49baa4['update']({'usedVideo':_0x49baa4['dataValues']['usedVideo']+0x1,'UsedOnDay':_0x49baa4[_0xca8bc6(0x109)][_0xca8bc6(0x1a6)]+0x1,'updatedAt':_0x2220ad}):await _0x49baa4[_0xca8bc6(0x183)]({'usedOther':_0x49baa4['dataValues']['usedOther']+0x1,'UsedOnDay':_0x49baa4[_0xca8bc6(0x109)][_0xca8bc6(0x1a6)]+0x1,'updatedAt':_0x2220ad});}})):await _0x49baa4[_0x2a0306(0x183)]({'usedText':_0x49baa4[_0x2a0306(0x109)][_0x2a0306(0x113)]+0x1,'UsedOnDay':_0x49baa4[_0x2a0306(0x109)][_0x2a0306(0x1a6)]+0x1,'updatedAt':_0x2220ad}));},0x64),_0xf398c0[_0x242512(0x1bf)]({'status':'SUCCESS'});};exports[a9_0x58f980(0x141)]=index;const indexImage=async(_0x3514de,_0x346141)=>{const _0xec4fcd=a9_0x58f980,_0x44e4e4=_0x3514de['body'],{whatsappId:_0x44ccae}=_0x3514de['body'],{msdelay:_0x21c435}=_0x3514de[_0xec4fcd(0x15b)],_0x7d11e9=_0x3514de[_0xec4fcd(0x15b)][_0xec4fcd(0x1bc)],_0x38402d=_0x3514de[_0xec4fcd(0x15b)][_0xec4fcd(0x11c)],_0x526842=_0x3514de[_0xec4fcd(0x1a2)]['authorization'],[,_0x6a984b]=_0x526842[_0xec4fcd(0x1b0)]('\x20'),_0x4bd06b=await Whatsapp_1['default'][_0xec4fcd(0x13e)]({'where':{'token':_0x6a984b}}),_0x226b58=_0x4bd06b[_0xec4fcd(0x1c1)];_0x44e4e4[_0xec4fcd(0x180)]=_0x44e4e4[_0xec4fcd(0x180)][_0xec4fcd(0x107)]('-','')[_0xec4fcd(0x107)]('\x20','');const _0x4e0e85=Yup[_0xec4fcd(0xff)]()[_0xec4fcd(0x123)]({'number':Yup[_0xec4fcd(0x1ad)]()[_0xec4fcd(0x127)]()[_0xec4fcd(0xf7)](/^\d+$/,_0xec4fcd(0x144))});try{await _0x4e0e85['validate'](_0x44e4e4);}catch(_0x1c1707){throw new AppError_1['default'](_0x1c1707[_0xec4fcd(0x104)]);}const _0x8822ba=await createContact(_0x44ccae,_0x226b58,_0x44e4e4[_0xec4fcd(0x180)]);return _0x7d11e9&&await(0x0,SendWhatsappMediaImage_1[_0xec4fcd(0x131)])({'ticket':_0x8822ba,'url':_0x7d11e9,'caption':_0x38402d,'msdelay':_0x21c435}),setTimeout(async()=>{const _0x5c8703=_0xec4fcd;await(0x0,UpdateTicketService_1[_0x5c8703(0x131)])({'ticketId':_0x8822ba['id'],'ticketData':{'status':'pending','sendFarewellMessage':![],'amountUsedBotQueues':0x0},'companyId':_0x226b58});},0x64),setTimeout(async()=>{const _0x5cb5a4=_0xec4fcd,{dateToClient:_0x10b067}=(0x0,useDate_1[_0x5cb5a4(0x178)])(),_0x360ad7=_0x10b067(new Date()[_0x5cb5a4(0x124)]()),_0x24cb1f=(0x0,moment_1['default'])()['format'](),_0x405861=await ApiUsages_1[_0x5cb5a4(0x131)][_0x5cb5a4(0x13e)]({'where':{'dateUsed':_0x360ad7,'companyId':_0x226b58}});if(_0x405861)await _0x405861['update']({'usedImage':_0x405861['dataValues'][_0x5cb5a4(0x174)]+0x1,'UsedOnDay':_0x405861['dataValues']['UsedOnDay']+0x1,'updatedAt':_0x24cb1f});else{const _0x230caa=await ApiUsages_1[_0x5cb5a4(0x131)][_0x5cb5a4(0x1b6)]({'companyId':_0x226b58,'dateUsed':_0x360ad7});await _0x230caa[_0x5cb5a4(0x183)]({'usedImage':_0x230caa['dataValues']['usedImage']+0x1,'UsedOnDay':_0x230caa[_0x5cb5a4(0x109)][_0x5cb5a4(0x1a6)]+0x1,'updatedAt':_0x24cb1f});}},0x64),_0x346141[_0xec4fcd(0x1bf)]({'status':_0xec4fcd(0x142)});};exports[a9_0x58f980(0x152)]=indexImage;const checkNumber=async(_0x47a840,_0x1a7a64)=>{const _0x155a70=a9_0x58f980,_0x42ccf2=_0x47a840['body'],_0x27485d=_0x47a840['headers']['authorization'],[,_0x7763b3]=_0x27485d[_0x155a70(0x1b0)]('\x20'),_0x40a8e9=await Whatsapp_1[_0x155a70(0x131)][_0x155a70(0x13e)]({'where':{'token':_0x7763b3}}),_0x2e1c63=_0x40a8e9[_0x155a70(0x1c1)],_0x32a614=_0x42ccf2[_0x155a70(0x180)][_0x155a70(0x107)]('-','')[_0x155a70(0x107)]('\x20',''),_0x175213=await(0x0,GetDefaultWhatsApp_1[_0x155a70(0x131)])(_0x2e1c63),_0x177adc=(0x0,wbot_1[_0x155a70(0x112)])(_0x175213['id']),_0x3155a3=createJid(_0x32a614);try{const [_0x3b646c]=await _0x177adc[_0x155a70(0x149)](_0x3155a3);if(_0x3b646c[_0x155a70(0x1ae)])return setTimeout(async()=>{const _0x5a2d2a=_0x155a70,{dateToClient:_0x41430a}=(0x0,useDate_1[_0x5a2d2a(0x178)])(),_0x4a6519=_0x41430a(new Date()[_0x5a2d2a(0x124)]()),_0xed4b8d=(0x0,moment_1['default'])()[_0x5a2d2a(0x162)](),_0x1b5011=await ApiUsages_1[_0x5a2d2a(0x131)][_0x5a2d2a(0x13e)]({'where':{'dateUsed':_0x4a6519,'companyId':_0x2e1c63}});if(_0x1b5011)await _0x1b5011[_0x5a2d2a(0x183)]({'usedCheckNumber':_0x1b5011[_0x5a2d2a(0x109)][_0x5a2d2a(0xf9)]+0x1,'UsedOnDay':_0x1b5011[_0x5a2d2a(0x109)][_0x5a2d2a(0x1a6)]+0x1,'updatedAt':_0xed4b8d});else{const _0x31b83e=await ApiUsages_1[_0x5a2d2a(0x131)][_0x5a2d2a(0x1b6)]({'companyId':_0x2e1c63,'dateUsed':_0x4a6519});await _0x31b83e[_0x5a2d2a(0x183)]({'usedCheckNumber':_0x31b83e[_0x5a2d2a(0x109)][_0x5a2d2a(0xf9)]+0x1,'UsedOnDay':_0x31b83e[_0x5a2d2a(0x109)][_0x5a2d2a(0x1a6)]+0x1,'updatedAt':_0xed4b8d});}},0x64),_0x1a7a64[_0x155a70(0x198)](0xc8)[_0x155a70(0x10b)]({'existsInWhatsapp':!![],'number':_0x32a614,'numberFormatted':_0x3b646c[_0x155a70(0x166)]});}catch(_0x196101){return _0x1a7a64['status'](0x190)[_0x155a70(0x10b)]({'existsInWhatsapp':![],'number':_0x3155a3,'error':_0x155a70(0x16e)});}};exports[a9_0x58f980(0x15c)]=checkNumber;const indexWhatsappsId=async(_0x1e6968,_0x2e4bf1)=>{const _0x5c8320=a9_0x58f980;return console[_0x5c8320(0x11b)]('req',_0x1e6968),console[_0x5c8320(0x11b)](_0x5c8320(0x16c),_0x1e6968[_0x5c8320(0x13f)]),_0x2e4bf1[_0x5c8320(0x198)](0xc8)[_0x5c8320(0x10b)]('oi');};exports[a9_0x58f980(0x18b)]=indexWhatsappsId;const updateQueueId=async(_0x29a380,_0x519656)=>{const _0x237457=a9_0x58f980,{ticketId:_0x1b9c84}=_0x29a380['params'],{queueId:_0x3c96c2}=_0x29a380[_0x237457(0x15b)],_0x428db8=_0x29a380[_0x237457(0x1a2)]['authorization'],[,_0x4f3ab7]=_0x428db8[_0x237457(0x1b0)]('\x20'),_0x2d2412=await Whatsapp_1[_0x237457(0x131)][_0x237457(0x13e)]({'where':{'token':_0x4f3ab7}}),_0x388c12=_0x2d2412[_0x237457(0x1c1)];try{const _0x5ed35a=await Queue_1['default']['findOne']({'where':{'id':_0x3c96c2,'companyId':_0x388c12}});if(!_0x5ed35a)return _0x519656[_0x237457(0x198)](0x190)['json']({'status':_0x237457(0x13c),'error':_0x237457(0x1ab)});return await(0x0,UpdateTicketService_1['default'])({'ticketId':_0x1b9c84,'ticketData':{'queueId':_0x3c96c2},'companyId':_0x388c12}),_0x519656[_0x237457(0x198)](0xc8)[_0x237457(0x10b)]({'status':_0x237457(0x142)});}catch(_0x4a1edf){return console[_0x237457(0x199)](_0x4a1edf),_0x519656[_0x237457(0x198)](0x1f4)[_0x237457(0x10b)]({'status':_0x237457(0x13c),'error':_0x237457(0x167)});}};exports[a9_0x58f980(0x157)]=updateQueueId;const closeTicket=async(_0x39ab01,_0x3b33dd)=>{const _0x5d7ce6=a9_0x58f980,_0x5471f5=_0x39ab01[_0x5d7ce6(0x1a2)][_0x5d7ce6(0x120)],[,_0x552370]=_0x5471f5[_0x5d7ce6(0x1b0)]('\x20'),_0x592a52=await Whatsapp_1['default']['findOne']({'where':{'token':_0x552370}}),_0x4f7995=_0x592a52[_0x5d7ce6(0x1c1)],{ticketId:_0x21fae1}=_0x39ab01[_0x5d7ce6(0x1bb)],_0x4aa235=await(0x0,ShowTicketService_1[_0x5d7ce6(0x131)])(_0x21fae1,_0x4f7995);_0x4aa235[_0x5d7ce6(0x198)]=_0x39ab01[_0x5d7ce6(0x15b)][_0x5d7ce6(0xf2)][_0x5d7ce6(0x198)],console[_0x5d7ce6(0x11b)](_0x4aa235[_0x5d7ce6(0x198)]);const {ticket:_0x2240b9}=await(0x0,UpdateTicketService_1[_0x5d7ce6(0x131)])({'ticketData':_0x4aa235,'ticketId':_0x21fae1,'companyId':_0x4f7995});return _0x3b33dd[_0x5d7ce6(0x198)](0xc8)['json'](_0x2240b9);};exports[a9_0x58f980(0xf3)]=closeTicket;const updateTicketTag=async(_0x5a6242,_0xb37fcc)=>{const _0x5f1f01=a9_0x58f980,{ticketId:_0x33239b,tagId:_0x4f7035}=_0x5a6242[_0x5f1f01(0x15b)],_0xc94134=_0x5a6242[_0x5f1f01(0x1a2)]['authorization'],[,_0x291575]=_0xc94134[_0x5f1f01(0x1b0)]('\x20');try{const _0x3a7387=await Whatsapp_1[_0x5f1f01(0x131)][_0x5f1f01(0x13e)]({'where':{'token':_0x291575}}),_0x25984f=_0x3a7387[_0x5f1f01(0x1c1)],_0x1a3975=await Tag_1['default'][_0x5f1f01(0x13e)]({'where':{'id':_0x4f7035,'companyId':_0x25984f}});if(!_0x1a3975)return _0xb37fcc[_0x5f1f01(0x198)](0x190)[_0x5f1f01(0x10b)]({'status':'ERROR','error':'Tag\x20does\x20not\x20belong\x20to\x20the\x20specified\x20company'});const _0x1d506b=await TicketTag_1[_0x5f1f01(0x131)]['findOne']({'where':{'ticketId':_0x33239b,'tagId':_0x4f7035}});if(_0x1d506b)return _0xb37fcc[_0x5f1f01(0x198)](0x190)['json']({'status':'ERROR','error':'Tag\x20already\x20associated\x20with\x20the\x20ticket'});const _0x8356fc=await TicketTag_1['default'][_0x5f1f01(0x1b6)]({'ticketId':_0x33239b,'tagId':_0x4f7035});return _0xb37fcc[_0x5f1f01(0x198)](0xc8)[_0x5f1f01(0x10b)]({'status':'SUCCESS','ticketTag':_0x8356fc});}catch(_0x1f2432){return console['error'](_0x1f2432),_0xb37fcc[_0x5f1f01(0x198)](0x1f4)[_0x5f1f01(0x10b)]({'status':_0x5f1f01(0x13c),'error':_0x5f1f01(0x11e)});}};exports[a9_0x58f980(0x1b5)]=updateTicketTag;const removeTicketTag=async(_0x42f4f6,_0x3f37f1)=>{const _0x33ca6b=a9_0x58f980,{ticketId:_0x426e0d,tagId:_0x56ee93}=_0x42f4f6['body'];try{const _0x30afeb=await TicketTag_1['default'][_0x33ca6b(0x13e)]({'where':{'ticketId':_0x426e0d,'tagId':_0x56ee93}});if(!_0x30afeb)return _0x3f37f1['status'](0x190)[_0x33ca6b(0x10b)]({'status':_0x33ca6b(0x13c),'error':_0x33ca6b(0x117)});return await _0x30afeb[_0x33ca6b(0x185)](),_0x3f37f1[_0x33ca6b(0x198)](0xc8)[_0x33ca6b(0x10b)]({'status':_0x33ca6b(0x142)});}catch(_0x315e1a){return console['error'](_0x315e1a),_0x3f37f1['status'](0x1f4)[_0x33ca6b(0x10b)]({'status':'ERROR','error':_0x33ca6b(0x139)});}};exports[a9_0x58f980(0x108)]=removeTicketTag;const listTicketsByCompany=async(_0x37dcc6,_0x5aa46c)=>{const _0x195f1c=a9_0x58f980,_0x63e51=_0x37dcc6[_0x195f1c(0x1a2)]['authorization'],[,_0x57c7db]=_0x63e51[_0x195f1c(0x1b0)]('\x20'),_0x53f398=await Whatsapp_1['default']['findOne']({'where':{'token':_0x57c7db}}),_0x3f8d66=_0x53f398['companyId'];try{const _0x392ff3=await Ticket_1[_0x195f1c(0x131)][_0x195f1c(0x111)]({'where':{'companyId':_0x3f8d66},'include':[{'model':Contact_1[_0x195f1c(0x131)],'as':'contact','attributes':['id',_0x195f1c(0xfe),_0x195f1c(0x180),_0x195f1c(0x119),_0x195f1c(0x14a),'acceptAudioMessage','active',_0x195f1c(0x115)],'include':[_0x195f1c(0x192)]},{'model':Queue_1[_0x195f1c(0x131)],'as':_0x195f1c(0x14b),'attributes':['id',_0x195f1c(0xfe),_0x195f1c(0x16a)]},{'model':User_1['default'],'as':_0x195f1c(0x13f),'attributes':['id',_0x195f1c(0xfe)]},{'model':Tag_1[_0x195f1c(0x131)],'as':_0x195f1c(0x163),'attributes':['id',_0x195f1c(0xfe),_0x195f1c(0x16a)]},{'model':Whatsapp_1[_0x195f1c(0x131)],'as':_0x195f1c(0x105),'attributes':[_0x195f1c(0xfe),_0x195f1c(0x155),'facebookUserId']},{'model':Company_1['default'],'as':_0x195f1c(0x165),'attributes':[_0x195f1c(0xfe)]}]});return _0x5aa46c[_0x195f1c(0x198)](0xc8)[_0x195f1c(0x10b)]({'status':_0x195f1c(0x142),'tickets':_0x392ff3});}catch(_0x363ec0){return console[_0x195f1c(0x199)](_0x363ec0),_0x5aa46c[_0x195f1c(0x198)](0x1f4)['json']({'status':_0x195f1c(0x13c),'error':'Internal\x20Server\x20Error'});}};exports['listTicketsByCompany']=listTicketsByCompany;const listTicketsByTag=async(_0x49b08c,_0x4dc45e)=>{const _0x1a637a=a9_0x58f980,{tagId:_0x599e63}=_0x49b08c['params'],_0x6ebb9d=_0x49b08c[_0x1a637a(0x1a2)]['authorization'],[,_0x6c5795]=_0x6ebb9d['split']('\x20');try{const _0x47fc11=await Whatsapp_1[_0x1a637a(0x131)][_0x1a637a(0x13e)]({'where':{'token':_0x6c5795}}),_0x1a6376=_0x47fc11[_0x1a637a(0x1c1)],_0x256c93=await Tag_1[_0x1a637a(0x131)][_0x1a637a(0x13e)]({'where':{'id':_0x599e63,'companyId':_0x1a6376}});if(!_0x256c93)return _0x4dc45e[_0x1a637a(0x198)](0x190)['json']({'status':'ERROR','error':_0x1a637a(0x18a)});const _0x539645=await Ticket_1[_0x1a637a(0x131)]['findAll']({'include':[{'model':Tag_1[_0x1a637a(0x131)],'as':'tags','attributes':['id',_0x1a637a(0xfe)],'through':{'attributes':[],'where':{'tagId':_0x599e63}}},{'model':Contact_1[_0x1a637a(0x131)],'as':_0x1a637a(0x147),'attributes':['id',_0x1a637a(0xfe),_0x1a637a(0x180),'email',_0x1a637a(0x14a),_0x1a637a(0x151),'active',_0x1a637a(0x115)],'include':[_0x1a637a(0x192)]},{'model':Queue_1[_0x1a637a(0x131)],'as':_0x1a637a(0x14b),'attributes':['id',_0x1a637a(0xfe),_0x1a637a(0x16a)]},{'model':User_1[_0x1a637a(0x131)],'as':_0x1a637a(0x13f),'attributes':['id',_0x1a637a(0xfe)]},{'model':Whatsapp_1[_0x1a637a(0x131)],'as':_0x1a637a(0x105),'attributes':['name',_0x1a637a(0x155),_0x1a637a(0x177)]},{'model':Company_1[_0x1a637a(0x131)],'as':_0x1a637a(0x165),'attributes':[_0x1a637a(0xfe)]}],'where':{'companyId':_0x1a6376,'$tags.id$':_0x599e63}});return _0x4dc45e[_0x1a637a(0x198)](0xc8)[_0x1a637a(0x10b)]({'status':'SUCCESS','tickets':_0x539645});}catch(_0x15ab18){return console[_0x1a637a(0x199)](_0x15ab18),_0x4dc45e['status'](0x1f4)[_0x1a637a(0x10b)]({'status':'ERROR','error':_0x1a637a(0x167)});}};exports[a9_0x58f980(0x12a)]=listTicketsByTag;const listTicketsByTagIsAuth=async(_0x57f968,_0x5d56e8)=>{const _0x423f62=a9_0x58f980,{tagId:_0x3ec9bd}=_0x57f968[_0x423f62(0x1bb)];try{const _0xda241e=await Ticket_1['default'][_0x423f62(0x111)]({'include':[{'model':Contact_1[_0x423f62(0x131)],'as':_0x423f62(0x147),'attributes':['name',_0x423f62(0x180),_0x423f62(0x119)],'include':[_0x423f62(0x192)]},{'model':Tag_1['default'],'as':_0x423f62(0x163),'attributes':['id',_0x423f62(0xfe),_0x423f62(0x16a)],'where':{'id':_0x3ec9bd}},{'model':Whatsapp_1['default'],'as':_0x423f62(0x105),'attributes':[_0x423f62(0xfe),'facebookUserToken',_0x423f62(0x177)]},{'model':Company_1[_0x423f62(0x131)],'as':_0x423f62(0x165),'attributes':['name']}]});return _0x5d56e8[_0x423f62(0x198)](0xc8)[_0x423f62(0x10b)]({'status':_0x423f62(0x142),'tickets':_0xda241e});}catch(_0x4a329a){return console[_0x423f62(0x199)](_0x4a329a),_0x5d56e8[_0x423f62(0x198)](0x1f4)['json']({'status':_0x423f62(0x13c),'error':'Internal\x20Server\x20Error'});}};exports['listTicketsByTagIsAuth']=listTicketsByTagIsAuth;function makeid(_0x24d3f3){const _0x1a7e92=a9_0x58f980;var _0x4947ca='',_0x3b19dc='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',_0x4ccca0=_0x3b19dc[_0x1a7e92(0x189)];for(var _0x430e5f=0x0;_0x430e5f<_0x24d3f3;_0x430e5f++){_0x4947ca+=_0x3b19dc[_0x1a7e92(0x14c)](Math[_0x1a7e92(0x1a1)](Math[_0x1a7e92(0x179)]()*_0x4ccca0));}return _0x4947ca;}exports['makeid']=makeid;const handleAudioLink=async(_0x292c21,_0x17855d)=>{const _0x15b800=a9_0x58f980,{link:_0x56dab8,contactNumber:_0x52653b}=_0x292c21[_0x15b800(0x15b)];try{const _0x321921=_0x292c21[_0x15b800(0x1a2)]['authorization'],[,_0x32a1b9]=_0x321921[_0x15b800(0x1b0)]('\x20'),_0x560224=await Whatsapp_1[_0x15b800(0x131)][_0x15b800(0x13e)]({'where':{'token':_0x32a1b9}}),_0x35c7f9=_0x560224['companyId'],_0x3325a2=await(0x0,GetDefaultWhatsApp_1[_0x15b800(0x131)])(_0x35c7f9),_0x363807=(0x0,wbot_1['getWbot'])(_0x3325a2['id']),_0x415d6e=_0x15b800(0x1b8)+_0x35c7f9+'/'+makeid(0xa)+_0x15b800(0x1a3);if(!_0x560224)return _0x17855d[_0x15b800(0x198)](0x191)[_0x15b800(0x10b)]({'status':_0x15b800(0x160),'error':_0x15b800(0x19c)});const _0x5afb69=await axios_1[_0x15b800(0x131)]['get'](_0x56dab8,{'responseType':_0x15b800(0x19e)});fs_1['default'][_0x15b800(0x170)](_0x415d6e,Buffer[_0x15b800(0x188)](_0x5afb69[_0x15b800(0x196)]));const _0x569ee1=_0x15b800(0x17a);return await(0x0,SendPresenceStatus_1['SendPresenceStatus'])(_0x363807,_0x52653b),await _0x363807[_0x15b800(0x14f)](_0x52653b+'@s.whatsapp.net',{'audio':fs_1[_0x15b800(0x131)][_0x15b800(0xf4)](_0x415d6e),'fileName':_0x569ee1,'caption':_0x569ee1,'mimetype':'audio/mp4','ptt':!![]}),_0x17855d['status'](0xc8)['json']({'status':_0x15b800(0x1a9)});}catch(_0x3e7494){return console['error'](_0x3e7494),_0x17855d[_0x15b800(0x198)](0x1f4)[_0x15b800(0x10b)]({'status':_0x15b800(0x160),'error':'Erro\x20ao\x20lidar\x20com\x20o\x20link\x20de\x20áudio'});}};exports[a9_0x58f980(0x19d)]=handleAudioLink;const indexApi=async(_0xf0473,_0x953602)=>{const _0x5b8d32=a9_0x58f980,_0x4ace32=_0xf0473['headers'][_0x5b8d32(0x120)],[,_0x52a38b]=_0x4ace32[_0x5b8d32(0x1b0)]('\x20'),_0x171373=await Whatsapp_1[_0x5b8d32(0x131)]['findOne']({'where':{'token':_0x52a38b}}),_0x685238=_0x171373['companyId'],{searchParam:_0x297910,pageNumber:_0x224dc5}=_0xf0473['query'];if(_0x685238===0x1){const {invoices:_0x213f8a,count:_0x3df6b2,hasMore:_0x12e8dc}=await(0x0,ListInvoicesServices_1[_0x5b8d32(0x131)])({'searchParam':_0x297910,'pageNumber':_0x224dc5});return _0x953602['json']({'invoices':_0x213f8a,'count':_0x3df6b2,'hasMore':_0x12e8dc});}else return _0x953602[_0x5b8d32(0x198)](0x191)[_0x5b8d32(0x10b)]({'status':_0x5b8d32(0x160),'error':_0x5b8d32(0x1af)});};exports[a9_0x58f980(0x12f)]=indexApi;const showApi=async(_0x381aa6,_0x1b3ee5)=>{const _0x2f2dea=a9_0x58f980,_0x595093=_0x381aa6[_0x2f2dea(0x1a2)][_0x2f2dea(0x120)],[,_0x1103d4]=_0x595093['split']('\x20'),_0x5480b7=await Whatsapp_1['default'][_0x2f2dea(0x13e)]({'where':{'token':_0x1103d4}}),_0x711e7a=_0x5480b7['companyId'],{Invoiceid:_0x3f5e1d}=_0x381aa6[_0x2f2dea(0x1bb)],_0x3f3aaa=await(0x0,ShowInvoiceService_1[_0x2f2dea(0x131)])(_0x3f5e1d);return _0x1b3ee5[_0x2f2dea(0x198)](0xc8)[_0x2f2dea(0x10b)](_0x3f3aaa);};exports[a9_0x58f980(0x14e)]=showApi;const showAllApi=async(_0x13542f,_0x3f884e)=>{const _0xdbb2b1=a9_0x58f980;try{const _0x2a449a=_0x13542f['headers'][_0xdbb2b1(0x120)],[,_0x463262]=_0x2a449a[_0xdbb2b1(0x1b0)]('\x20'),_0x4e6b33=await Whatsapp_1['default'][_0xdbb2b1(0x13e)]({'where':{'token':_0x463262}}),_0x12bd68=_0x4e6b33[_0xdbb2b1(0x1c1)],{companyId:_0x4eb5bf,status:_0x49e1f6}=_0x13542f[_0xdbb2b1(0x15b)];if(_0x12bd68===0x1){const _0x5eda7b=await Invoices_1[_0xdbb2b1(0x131)][_0xdbb2b1(0x111)]({'where':{'companyId':_0x4eb5bf,'status':_0x49e1f6}});return _0x3f884e[_0xdbb2b1(0x198)](0xc8)[_0xdbb2b1(0x10b)](_0x5eda7b);}else return _0x3f884e[_0xdbb2b1(0x198)](0x191)[_0xdbb2b1(0x10b)]({'status':_0xdbb2b1(0x160),'error':'Acesso\x20não\x20autorizado.\x20Por\x20favor,\x20forneça\x20credenciais\x20válidas.'});}catch(_0x330b43){return console[_0xdbb2b1(0x199)](_0xdbb2b1(0x103),_0x330b43),_0x3f884e[_0xdbb2b1(0x198)](0x1f4)[_0xdbb2b1(0x10b)]({'error':_0xdbb2b1(0x12b)});}};exports['showAllApi']=showAllApi;const updateApi=async(_0x358865,_0x35297f)=>{const _0x77127b=a9_0x58f980,_0x59d661=_0x358865[_0x77127b(0x1a2)]['authorization'],[,_0x2520b1]=_0x59d661[_0x77127b(0x1b0)]('\x20'),_0x1cc160=await Whatsapp_1[_0x77127b(0x131)][_0x77127b(0x13e)]({'where':{'token':_0x2520b1}}),_0x5e8358=_0x1cc160['companyId'],_0x495cf1=_0x358865[_0x77127b(0x15b)],_0x1c32aa=Yup[_0x77127b(0xff)]()[_0x77127b(0x123)]({'name':Yup[_0x77127b(0x1ad)]()});try{await _0x1c32aa[_0x77127b(0x1c0)](_0x495cf1);}catch(_0x4bb516){throw new AppError_1[(_0x77127b(0x131))](_0x4bb516['message']);}const {id:_0x4552ed,status:_0x38baaf}=_0x495cf1;if(_0x5e8358===0x1){const _0x368c13=await(0x0,UpdateInvoiceService_1['default'])({'id':_0x4552ed,'status':_0x38baaf}),_0x547aed=await Invoices_1[_0x77127b(0x131)][_0x77127b(0x122)](_0x4552ed),_0x4a23f9=_0x547aed['companyId'],_0x2cccaa=await Company_1[_0x77127b(0x131)][_0x77127b(0x122)](_0x4a23f9),_0x590923=new Date(_0x2cccaa[_0x77127b(0x126)]);_0x590923[_0x77127b(0x156)](_0x590923[_0x77127b(0x1b1)]()+0x1e);const _0x376bcf=_0x590923[_0x77127b(0x15d)]()[_0x77127b(0x1b0)]('T')[0x0];if(_0x2cccaa){await _0x2cccaa[_0x77127b(0x183)]({'dueDate':_0x376bcf});const _0x7e8aab=await _0x547aed['update']({'id':_0x4552ed,'status':_0x77127b(0x130)});await _0x2cccaa['reload']();const _0x4d10f2=(0x0,socket_1[_0x77127b(0x16d)])(),_0x4c81ab=await Company_1['default'][_0x77127b(0x13e)]({'where':{'id':_0x4a23f9}});}return _0x35297f['status'](0xc8)[_0x77127b(0x10b)](_0x368c13);}else return _0x35297f[_0x77127b(0x198)](0x191)[_0x77127b(0x10b)]({'status':_0x77127b(0x160),'error':_0x77127b(0x1af)});};exports['updateApi']=updateApi;const updateUsageStats=async(_0x685eed,_0x2aa5cc)=>{const _0x2cecac=a9_0x58f980;if(!_0x685eed[_0x2cecac(0x13f)]||!_0x685eed[_0x2cecac(0x13f)]['companyId'])return _0x2aa5cc[_0x2cecac(0x198)](0x190)[_0x2cecac(0x1bf)]({'status':_0x2cecac(0x13c),'message':_0x2cecac(0x1c6)});const {companyId:_0x329bd1}=_0x685eed[_0x2cecac(0x13f)],{contactId:_0x764cdd}=_0x685eed[_0x2cecac(0x1bb)];return setTimeout(async()=>{const _0x1d9d7d=_0x2cecac,{dateToClient:_0x2e2b43}=(0x0,useDate_1['useDate'])(),_0x4299d5=_0x2e2b43(new Date()[_0x1d9d7d(0x124)]()),_0x29c135=(0x0,moment_1['default'])()[_0x1d9d7d(0x162)]();try{const _0x33f00e=await ApiUsages_1[_0x1d9d7d(0x131)][_0x1d9d7d(0x13e)]({'where':{'dateUsed':_0x4299d5,'companyId':_0x329bd1}});if(_0x33f00e)await _0x33f00e[_0x1d9d7d(0x183)]({'usedOther':_0x33f00e[_0x1d9d7d(0x109)]['usedOther']+0x1,'UsedOnDay':_0x33f00e[_0x1d9d7d(0x109)][_0x1d9d7d(0x1a6)]+0x1,'updatedAt':_0x29c135});else{const _0x280b4b=await ApiUsages_1[_0x1d9d7d(0x131)][_0x1d9d7d(0x1b6)]({'companyId':_0x329bd1,'dateUsed':_0x4299d5});await _0x280b4b[_0x1d9d7d(0x183)]({'usedOther':_0x280b4b[_0x1d9d7d(0x109)][_0x1d9d7d(0x1c4)]+0x1,'UsedOnDay':_0x280b4b[_0x1d9d7d(0x109)][_0x1d9d7d(0x1a6)]+0x1,'updatedAt':_0x29c135});}}catch(_0x3f7176){return console[_0x1d9d7d(0x199)](_0x1d9d7d(0x173),_0x3f7176),_0x2aa5cc['status'](0x1f4)['send']({'status':_0x1d9d7d(0x13c),'message':_0x1d9d7d(0x1c9)});}},0x64),_0x2aa5cc[_0x2cecac(0x1bf)]({'status':_0x2cecac(0x142)});};exports['updateUsageStats']=updateUsageStats;const indexContacts=async(_0x1977b5,_0x5df5a3)=>{const _0x4cc368=a9_0x58f980,{searchParam:_0x5f5812,pageNumber:_0x4cca80}=_0x1977b5['query'],{companyId:_0x869033}=_0x1977b5[_0x4cc368(0x13f)],{contacts:_0x43937d,count:_0x94a62a,hasMore:_0x1e84c3}=await(0x0,ListContactsService_1[_0x4cc368(0x131)])({'searchParam':_0x5f5812,'pageNumber':_0x4cca80,'companyId':_0x869033});return _0x5df5a3[_0x4cc368(0x10b)]({'contacts':_0x43937d,'count':_0x94a62a,'hasMore':_0x1e84c3});};exports[a9_0x58f980(0x15a)]=indexContacts;const listContacts=async(_0x5f1978,_0x44d026)=>{const _0x14156a=a9_0x58f980,{name:_0x428edf}=_0x5f1978['query'],{companyId:_0x19ef9b}=_0x5f1978['user'],_0x35eca7=await(0x0,SimpleListService_1[_0x14156a(0x131)])({'name':_0x428edf,'companyId':_0x19ef9b});return _0x44d026[_0x14156a(0x10b)](_0x35eca7);};exports[a9_0x58f980(0x16f)]=listContacts;const showContacts=async(_0xdc0746,_0x148c46)=>{const _0x402ff3=a9_0x58f980,{contactId:_0x3ca68d}=_0xdc0746[_0x402ff3(0x1bb)],{companyId:_0x5edaff}=_0xdc0746['user'],_0x117605=await(0x0,ShowContactService_1[_0x402ff3(0x131)])(_0x3ca68d,_0x5edaff);return _0x148c46['status'](0xc8)['json'](_0x117605);};exports[a9_0x58f980(0xf1)]=showContacts;const findOrCreateContacts=async(_0x51781d,_0x1fa807)=>{const _0x2ced15=a9_0x58f980,{name:_0x20d3d2,number:_0x374d08}=_0x51781d[_0x2ced15(0x15b)],{companyId:_0x11388e}=_0x51781d[_0x2ced15(0x13f)],_0x278a3f=await(0x0,GetContactService_1[_0x2ced15(0x131)])({'name':_0x20d3d2,'number':_0x374d08,'companyId':_0x11388e});return _0x1fa807['status'](0xc8)[_0x2ced15(0x10b)](_0x278a3f);};function a9_0x3ee8(_0x208c6a,_0x13ca5e){const _0x16a592=a9_0x4068();return a9_0x3ee8=function(_0x26b43a,_0x40e906){_0x26b43a=_0x26b43a-0xee;let _0x4068b1=_0x16a592[_0x26b43a];return _0x4068b1;},a9_0x3ee8(_0x208c6a,_0x13ca5e);}exports['findOrCreateContacts']=findOrCreateContacts;const storeContacts=async(_0x55c7ef,_0x57d5cc)=>{const _0x2c87b7=a9_0x58f980,{companyId:_0x277457}=_0x55c7ef[_0x2c87b7(0x13f)],_0x2dfe76=_0x55c7ef[_0x2c87b7(0x15b)];_0x2dfe76[_0x2c87b7(0x180)]=_0x2dfe76[_0x2c87b7(0x180)]['replace']('-','')['replace']('\x20','');const _0x20407a=Yup[_0x2c87b7(0xff)]()[_0x2c87b7(0x123)]({'name':Yup[_0x2c87b7(0x1ad)]()['required'](),'number':Yup['string']()['required']()[_0x2c87b7(0xf7)](/^\d+$/,_0x2c87b7(0x144))});try{await _0x20407a[_0x2c87b7(0x1c0)](_0x2dfe76);}catch(_0x77a76){throw new AppError_1['default'](_0x77a76['message']);}await(0x0,CheckIsValidContact_1['default'])(_0x2dfe76['number'],_0x277457);const _0x3fd2be=await(0x0,CheckNumber_1[_0x2c87b7(0x131)])(_0x2dfe76[_0x2c87b7(0x180)],_0x277457),_0x358599=_0x3fd2be[_0x2c87b7(0x166)][_0x2c87b7(0x107)](/\D/g,'');_0x2dfe76[_0x2c87b7(0x180)]=_0x358599;const _0x39fd2e=await(0x0,CreateContactService_1['default'])({..._0x2dfe76,'companyId':_0x277457}),_0x23b5a4=(0x0,socket_1[_0x2c87b7(0x16d)])();return _0x23b5a4[_0x2c87b7(0x168)]('company-'+_0x277457+_0x2c87b7(0x129),{'action':_0x2c87b7(0x1b6),'contact':_0x39fd2e}),_0x57d5cc['status'](0xc8)[_0x2c87b7(0x10b)](_0x39fd2e);};exports['storeContacts']=storeContacts;function a9_0x4068(){const _0xfd48db=['updateQueueId','../models/Whatsapp','__setModuleDefault','indexContacts','body','checkNumber','toISOString','../models/Tag','../services/WbotServices/SendWhatsAppMessageAPI','ERRO','../services/WbotServices/SendWhatsAppMedia','format','tags','listTicketsByTagIsAuth','company','jid','Internal\x20Server\x20Error','emit','pdf','color','20qxtfVh','req','getIO','Not\x20exists\x20on\x20Whatsapp','listContacts','writeFileSync','(((.+)+)+)+$','search','Error\x20updating\x20usage\x20stats:','usedImage','../services/ContactServices/ShowContactService','head','facebookUserId','useDate','random','Legenda\x20do\x20áudio','toggleDisableBotContacts','1465761kdjrhZ','updateCompany','path','../helpers/SendPresenceStatus','number','company-','whatsapp\x20#','update','../services/WbotServices/SendWhatsAppMessageLink','destroy','All\x20contacts\x20removed\x20successfully','usedPDF','from','length','Tag\x20does\x20not\x20belong\x20to\x20the\x20specified\x20company','indexWhatsappsId','3031320WwDREw','moment','../models/ApiUsages','yup','isInteger','12reVHwD','extraInfo','removeAllContacts','delete','nullable','data','__esModule','status','error','../services/InvoicesService/ShowInvoiceService','get','Token\x20de\x20autorização\x20inválido','handleAudioLink','arraybuffer','4PFRBOR','@g.us','floor','headers','.mp3','../services/ContactServices/GetContactService','ImportXLSContactsService','UsedOnDay','1494DwKOLH','24147354hquMtq','SUCESSO','uploadContacts','Invalid\x20queue\x20for\x20the\x20company','../services/ContactServices/CreateOrUpdateContactService','string','exists','Acesso\x20não\x20autorizado.\x20Por\x20favor,\x20forneça\x20credenciais\x20válidas.','split','getDate','deleteAll','../services/ContactServices/DeleteContactService','57140QJvedF','updateTicketTag','create','prototype','./public/company','media','2060464ETKeer','params','url','parseInt','exec','send','validate','companyId','\x20not\x20found','constructor','usedOther','../services/ContactServices/CreateContactService','Missing\x20user\x20or\x20companyId','Contact\x20deleted','removeContacts','Internal\x20server\x20error','__importStar','video','indexLink','updateUsageStats','createCompany','mimetype','files','../services/WbotServices/CheckNumber','showContacts','ticketData','closeTicket','readFileSync','type','32KSpxZz','matches','reload','usedCheckNumber','__importDefault','../services/WbotServices/CheckIsValidContact','../services/InvoicesService/UpdateInvoiceService','apply','name','object','__createBinding','1540676GibcqH','../models/Invoices','Erro\x20ao\x20buscar\x20invoices:','message','whatsapp','../models/TicketTag','replace','removeTicketTag','dataValues','../models/Contact','json','getOwnPropertyDescriptor','listTicketsByCompany','defineProperty','date','usedVideo','findAll','getWbot','usedText','boolean','disableBot','image','Tag\x20is\x20not\x20associated\x20with\x20the\x20ticket','../services/ContactServices/ToggleDisableBotService','email','../services/InvoicesService/ListInvoicesServices','log','caption','@s.whatsapp.net','Failed\x20to\x20update\x20ticket\x20tag','OnWhatsAppDto','authorization','../errors/AppError','findByPk','shape','toString','axios','dueDate','required','../helpers/GetDefaultWhatsApp','-contact','listTicketsByTag','Erro\x20ao\x20buscar\x20invoices','../services/WbotServices/SendWhatsappMediaImage','originalname','../services/ContactServices/ListContactsService','indexApi','paid','default','1927194XPhXLN','writable','blockCompany','hasOwnProperty','test','../services/TicketServices/FindOrCreateTicketService','../services/TicketServices/ShowTicketService','Failed\x20to\x20remove\x20ticket\x20tag','../services/ContactServices/ImportXLSContactsService','../helpers/SetTicketMessagesAsRead','ERROR','updateApi','findOne','user','makeid','index','SUCCESS','../models/Queue','Invalid\x20number\x20format.\x20Only\x20numbers\x20is\x20allowed.','extname','storeContacts','contact','-mainchannel','onWhatsApp','profilePicUrl','queue','charAt','all','showApi','sendMessage','includes','acceptAudioMessage','indexImage','map','../services/ContactServices/SimpleListService','facebookUserToken','setDate'];a9_0x4068=function(){return _0xfd48db;};return a9_0x4068();}const removeAllContacts=async(_0x3f855f,_0x32ada1)=>{const _0x292029=a9_0x58f980,{companyId:_0x191b5d}=_0x3f855f[_0x292029(0x13f)];try{await Contact_1['default'][_0x292029(0x185)]({'where':{'companyId':_0x191b5d}});const _0x39fa47=(0x0,socket_1[_0x292029(0x16d)])();return _0x39fa47[_0x292029(0x168)](_0x292029(0x181)+_0x191b5d+_0x292029(0x129),{'action':_0x292029(0x1b2)}),setTimeout(async()=>{const _0x42516d=_0x292029,{dateToClient:_0x353fb7}=(0x0,useDate_1['useDate'])(),_0x275dee=_0x353fb7(new Date()[_0x42516d(0x124)]()),_0x397e03=(0x0,moment_1['default'])()[_0x42516d(0x162)]();try{const _0x43d1c6=await ApiUsages_1[_0x42516d(0x131)][_0x42516d(0x13e)]({'where':{'dateUsed':_0x275dee,'companyId':_0x191b5d}});if(_0x43d1c6)await _0x43d1c6[_0x42516d(0x183)]({'usedOther':_0x43d1c6['dataValues'][_0x42516d(0x1c4)]+0x1,'UsedOnDay':_0x43d1c6['dataValues'][_0x42516d(0x1a6)]+0x1,'updatedAt':_0x397e03});else{const _0x225a7f=await ApiUsages_1[_0x42516d(0x131)]['create']({'companyId':_0x191b5d,'dateUsed':_0x275dee});await _0x225a7f[_0x42516d(0x183)]({'usedOther':_0x225a7f[_0x42516d(0x109)][_0x42516d(0x1c4)]+0x1,'UsedOnDay':_0x225a7f[_0x42516d(0x109)]['UsedOnDay']+0x1,'updatedAt':_0x397e03});}}catch(_0x4b9e2d){return console['error'](_0x42516d(0x173),_0x4b9e2d),_0x32ada1[_0x42516d(0x198)](0x1f4)[_0x42516d(0x1bf)]({'status':_0x42516d(0x13c),'message':_0x42516d(0x1c9)});}},0x64),_0x32ada1[_0x292029(0x198)](0xc8)[_0x292029(0x1bf)]({'status':_0x292029(0x142),'message':_0x292029(0x186)});}catch(_0x484f24){return console['error']('Error\x20removing\x20all\x20contacts:',_0x484f24),_0x32ada1['status'](0x1f4)[_0x292029(0x1bf)]({'status':_0x292029(0x13c),'message':_0x292029(0x1c9)});}};exports[a9_0x58f980(0x193)]=removeAllContacts;const updateContacts=async(_0x38c6bf,_0x3ee64b)=>{const _0x511e7c=a9_0x58f980,_0x56f1ab=_0x38c6bf[_0x511e7c(0x15b)],{companyId:_0x19e463}=_0x38c6bf['user'],_0x29b426=Yup[_0x511e7c(0xff)]()[_0x511e7c(0x123)]({'name':Yup[_0x511e7c(0x1ad)](),'number':Yup[_0x511e7c(0x1ad)]()[_0x511e7c(0xf7)](/^\d+$/,_0x511e7c(0x144))});try{await _0x29b426[_0x511e7c(0x1c0)](_0x56f1ab);}catch(_0x5d1a81){throw new AppError_1[(_0x511e7c(0x131))](_0x5d1a81[_0x511e7c(0x104)]);}await(0x0,CheckIsValidContact_1['default'])(_0x56f1ab[_0x511e7c(0x180)],_0x19e463);const _0x1e3cdb=await(0x0,CheckNumber_1[_0x511e7c(0x131)])(_0x56f1ab['number'],_0x19e463),_0x1b4b13=_0x1e3cdb[_0x511e7c(0x166)][_0x511e7c(0x107)](/\D/g,'');_0x56f1ab[_0x511e7c(0x180)]=_0x1b4b13;const {contactId:_0x294d86}=_0x38c6bf[_0x511e7c(0x1bb)],_0x3be361=await(0x0,UpdateContactService_1[_0x511e7c(0x131)])({'contactData':_0x56f1ab,'contactId':_0x294d86,'companyId':_0x19e463}),_0xc47f8=(0x0,socket_1['getIO'])();return _0xc47f8[_0x511e7c(0x168)]('company-'+_0x19e463+_0x511e7c(0x129),{'action':'update','contact':_0x3be361}),_0x3ee64b['status'](0xc8)[_0x511e7c(0x10b)](_0x3be361);};exports['updateContacts']=updateContacts;const removeContacts=async(_0x14541b,_0x128b10)=>{const _0x48ea9a=a9_0x58f980,{contactId:_0xd40fa4}=_0x14541b['params'],{companyId:_0xc1e287}=_0x14541b['user'];await(0x0,ShowContactService_1[_0x48ea9a(0x131)])(_0xd40fa4,_0xc1e287),await(0x0,DeleteContactService_1[_0x48ea9a(0x131)])(_0xd40fa4);const _0x352ae0=(0x0,socket_1[_0x48ea9a(0x16d)])();return _0x352ae0[_0x48ea9a(0x168)](_0x48ea9a(0x181)+_0xc1e287+_0x48ea9a(0x129),{'action':_0x48ea9a(0x194),'contactId':_0xd40fa4}),_0x128b10['status'](0xc8)[_0x48ea9a(0x10b)]({'message':_0x48ea9a(0x1c7)});};exports[a9_0x58f980(0x1c8)]=removeContacts;const uploadContacts=async(_0x4ed5a3,_0x55b4bc)=>{const _0x4abb04=a9_0x58f980,_0x12b831=_0x4ed5a3[_0x4abb04(0xef)],_0x717044=(0x0,lodash_1[_0x4abb04(0x176)])(_0x12b831),{companyId:_0x14ace4}=_0x4ed5a3[_0x4abb04(0x13f)],_0x31da78=await(0x0,ImportXLSContactsService_1[_0x4abb04(0x1a5)])(_0x14ace4,_0x717044),_0xce8841=(0x0,socket_1['getIO'])(),_0x18bc3b={'action':_0x4abb04(0xf8),'records':_0x31da78};return _0xce8841['to'](_0x4abb04(0x181)+_0x14ace4+_0x4abb04(0x148))[_0x4abb04(0x168)]('company-'+_0x14ace4+_0x4abb04(0x129),_0x18bc3b),_0x55b4bc[_0x4abb04(0x198)](0xc8)[_0x4abb04(0x10b)](_0x31da78);};exports[a9_0x58f980(0x1aa)]=uploadContacts;const toggleDisableBotContacts=async(_0x3a4236,_0x1fbb04)=>{const _0x2a4f31=a9_0x58f980,{contactId:_0x1144ad}=_0x3a4236[_0x2a4f31(0x1bb)],{companyId:_0x3726ca}=_0x3a4236[_0x2a4f31(0x13f)],_0xf0114f=await(0x0,ToggleDisableBotService_1[_0x2a4f31(0x131)])(_0x1144ad,_0x3726ca),_0x1a6c1a=(0x0,socket_1[_0x2a4f31(0x16d)])();return _0x1a6c1a['emit'](_0x2a4f31(0x181)+_0x3726ca+_0x2a4f31(0x129),{'action':_0x2a4f31(0x183),'contact':_0xf0114f}),_0x1fbb04[_0x2a4f31(0x198)](0xc8)[_0x2a4f31(0x10b)](_0xf0114f);};exports[a9_0x58f980(0x17b)]=toggleDisableBotContacts;