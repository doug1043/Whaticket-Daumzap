'use strict';const a39_0x192e42=a39_0x3ca6;(function(_0x1445ab,_0x54c6dc){const _0x173b8e=a39_0x3ca6,_0x5e403c=_0x1445ab();while(!![]){try{const _0x4827f2=-parseInt(_0x173b8e(0x13c))/0x1+parseInt(_0x173b8e(0x14a))/0x2+parseInt(_0x173b8e(0x14d))/0x3*(parseInt(_0x173b8e(0x15a))/0x4)+-parseInt(_0x173b8e(0x144))/0x5+parseInt(_0x173b8e(0x160))/0x6*(-parseInt(_0x173b8e(0x145))/0x7)+-parseInt(_0x173b8e(0x149))/0x8+parseInt(_0x173b8e(0x136))/0x9;if(_0x4827f2===_0x54c6dc)break;else _0x5e403c['push'](_0x5e403c['shift']());}catch(_0x73ad02){_0x5e403c['push'](_0x5e403c['shift']());}}}(a39_0x42b8,0xccab3));var __createBinding=this&&this[a39_0x192e42(0x13d)]||(Object[a39_0x192e42(0x137)]?function(_0x3adb4b,_0x5149df,_0x19b658,_0x579f11){const _0x7c67f5=a39_0x192e42;if(_0x579f11===undefined)_0x579f11=_0x19b658;var _0x4c75a7=Object[_0x7c67f5(0x146)](_0x5149df,_0x19b658);(!_0x4c75a7||(_0x7c67f5(0x159)in _0x4c75a7?!_0x5149df[_0x7c67f5(0x150)]:_0x4c75a7[_0x7c67f5(0x12e)]||_0x4c75a7['configurable']))&&(_0x4c75a7={'enumerable':!![],'get':function(){return _0x5149df[_0x19b658];}}),Object[_0x7c67f5(0x156)](_0x3adb4b,_0x579f11,_0x4c75a7);}:function(_0x5068e6,_0x34b76c,_0x9c1433,_0x219d0a){if(_0x219d0a===undefined)_0x219d0a=_0x9c1433;_0x5068e6[_0x219d0a]=_0x34b76c[_0x9c1433];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0xcfbbca,_0x13281d){const _0x4819bc=a39_0x192e42;Object[_0x4819bc(0x156)](_0xcfbbca,_0x4819bc(0x151),{'enumerable':!![],'value':_0x13281d});}:function(_0x6c3cc1,_0x325184){const _0x26003f=a39_0x192e42;_0x6c3cc1[_0x26003f(0x151)]=_0x325184;}),__importStar=this&&this['__importStar']||(function(){const _0x36ec19=(function(){let _0x15a948=!![];return function(_0x2facb1,_0x38481a){const _0x438123=_0x15a948?function(){const _0x26164e=a39_0x3ca6;if(_0x38481a){const _0x180f5b=_0x38481a[_0x26164e(0x13b)](_0x2facb1,arguments);return _0x38481a=null,_0x180f5b;}}:function(){};return _0x15a948=![],_0x438123;};}()),_0x1efe85=_0x36ec19(this,function(){const _0x808736=a39_0x3ca6;return _0x1efe85['toString']()[_0x808736(0x154)](_0x808736(0x13a))[_0x808736(0x15c)]()[_0x808736(0x139)](_0x1efe85)[_0x808736(0x154)](_0x808736(0x13a));});_0x1efe85();var _0x1ab0af=function(_0x246db2){return _0x1ab0af=Object['getOwnPropertyNames']||function(_0x25067d){const _0x69d9=a39_0x3ca6;var _0x127987=[];for(var _0x53ee52 in _0x25067d)if(Object['prototype'][_0x69d9(0x14b)]['call'](_0x25067d,_0x53ee52))_0x127987[_0x127987[_0x69d9(0x14c)]]=_0x53ee52;return _0x127987;},_0x1ab0af(_0x246db2);};return function(_0x4d97ee){const _0x4104bc=a39_0x3ca6;if(_0x4d97ee&&_0x4d97ee['__esModule'])return _0x4d97ee;var _0x17b9f9={};if(_0x4d97ee!=null){for(var _0x3fb883=_0x1ab0af(_0x4d97ee),_0x5f113b=0x0;_0x5f113b<_0x3fb883[_0x4104bc(0x14c)];_0x5f113b++)if(_0x3fb883[_0x5f113b]!==_0x4104bc(0x151))__createBinding(_0x17b9f9,_0x4d97ee,_0x3fb883[_0x5f113b]);}return __setModuleDefault(_0x17b9f9,_0x4d97ee),_0x17b9f9;};}()),__importDefault=this&&this['__importDefault']||function(_0x450eaa){const _0x55df28=a39_0x192e42;return _0x450eaa&&_0x450eaa[_0x55df28(0x150)]?_0x450eaa:{'default':_0x450eaa};};Object[a39_0x192e42(0x156)](exports,a39_0x192e42(0x150),{'value':!![]}),exports[a39_0x192e42(0x148)]=exports['remove']=exports[a39_0x192e42(0x153)]=exports[a39_0x192e42(0x15e)]=exports['store']=exports[a39_0x192e42(0x13e)]=exports[a39_0x192e42(0x162)]=void 0x0;const Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a39_0x192e42(0x158))),ListTicketNotesService_1=__importDefault(require(a39_0x192e42(0x161))),CreateTicketNoteService_1=__importDefault(require(a39_0x192e42(0x140))),UpdateTicketNoteService_1=__importDefault(require(a39_0x192e42(0x14f))),ShowTicketNoteService_1=__importDefault(require(a39_0x192e42(0x135))),FindAllTicketNotesService_1=__importDefault(require(a39_0x192e42(0x138))),DeleteTicketNoteService_1=__importDefault(require(a39_0x192e42(0x157))),FindNotesByContactIdAndTicketId_1=__importDefault(require(a39_0x192e42(0x14e))),index=async(_0x30fb1c,_0x294c35)=>{const _0x775571=a39_0x192e42,{searchParam:_0x146115,pageNumber:_0x4f9f68}=_0x30fb1c[_0x775571(0x147)],{ticketNotes:_0xc7dc59,count:_0x20b757,hasMore:_0x30dad6}=await(0x0,ListTicketNotesService_1[_0x775571(0x151)])({'searchParam':_0x146115,'pageNumber':_0x4f9f68});return _0x294c35['json']({'ticketNotes':_0xc7dc59,'count':_0x20b757,'hasMore':_0x30dad6});};exports[a39_0x192e42(0x162)]=index;const list=async(_0x517275,_0x17660a)=>{const _0x4cca4c=a39_0x192e42,_0x4c39c0=await(0x0,FindAllTicketNotesService_1['default'])();return _0x17660a[_0x4cca4c(0x134)](0xc8)[_0x4cca4c(0x143)](_0x4c39c0);};function a39_0x42b8(){const _0x224255=['query','findFilteredList','8676848MREaoC','143252LgiWrS','hasOwnProperty','length','9sqxRkg','../services/TicketNoteService/FindNotesByContactIdAndTicketId','../services/TicketNoteService/UpdateTicketNoteService','__esModule','default','user','update','search','Observação\x20removida','defineProperty','../services/TicketNoteService/DeleteTicketNoteService','../errors/AppError','get','2040860PBfuJU','parseInt','toString','params','show','required','6YeQGtL','../services/TicketNoteService/ListTicketNotesService','index','writable','validate','profile','shape','object','message','status','../services/TicketNoteService/ShowTicketNoteService','29877903wpLsuF','create','../services/TicketNoteService/FindAllTicketNotesService','constructor','(((.+)+)+)+$','apply','1566727uMsLWU','__createBinding','list','store','../services/TicketNoteService/CreateTicketNoteService','string','body','json','5854125wjyiCs','1830899AtMWfY','getOwnPropertyDescriptor'];a39_0x42b8=function(){return _0x224255;};return a39_0x42b8();}exports[a39_0x192e42(0x13e)]=list;const store=async(_0x4bfa64,_0x2d3a21)=>{const _0x1529c5=a39_0x192e42,_0xaa8f92=_0x4bfa64['body'],{id:_0x33d33f}=_0x4bfa64['user'],_0x42e5bd=Yup[_0x1529c5(0x132)]()[_0x1529c5(0x131)]({'note':Yup[_0x1529c5(0x141)]()[_0x1529c5(0x15f)]()});try{await _0x42e5bd[_0x1529c5(0x12f)](_0xaa8f92);}catch(_0x59bb68){throw new AppError_1[(_0x1529c5(0x151))](_0x59bb68['message']);}const _0x4a0312=await(0x0,CreateTicketNoteService_1[_0x1529c5(0x151)])({..._0xaa8f92,'userId':Number[_0x1529c5(0x15b)](_0x33d33f,0xa)});return _0x2d3a21[_0x1529c5(0x134)](0xc8)[_0x1529c5(0x143)](_0x4a0312);};function a39_0x3ca6(_0x4ca643,_0x2f2f22){const _0x253d40=a39_0x42b8();return a39_0x3ca6=function(_0x1935a0,_0x3e403b){_0x1935a0=_0x1935a0-0x12e;let _0x42b886=_0x253d40[_0x1935a0];return _0x42b886;},a39_0x3ca6(_0x4ca643,_0x2f2f22);}exports[a39_0x192e42(0x13f)]=store;const show=async(_0x281544,_0x50ce49)=>{const _0x312510=a39_0x192e42,{id:_0x1fe868}=_0x281544['params'],_0x39a042=await(0x0,ShowTicketNoteService_1['default'])(_0x1fe868);return _0x50ce49[_0x312510(0x134)](0xc8)[_0x312510(0x143)](_0x39a042);};exports['show']=show;const update=async(_0x6bf4a9,_0x56ed86)=>{const _0x2648b3=a39_0x192e42,_0x1fe285=_0x6bf4a9[_0x2648b3(0x142)],_0x1c91d0=Yup['object']()[_0x2648b3(0x131)]({'note':Yup['string']()});try{await _0x1c91d0[_0x2648b3(0x12f)](_0x1fe285);}catch(_0x534304){throw new AppError_1['default'](_0x534304[_0x2648b3(0x133)]);}const _0x52384c=await(0x0,UpdateTicketNoteService_1['default'])(_0x1fe285);return _0x56ed86[_0x2648b3(0x134)](0xc8)[_0x2648b3(0x143)](_0x52384c);};exports[a39_0x192e42(0x153)]=update;const remove=async(_0x38b364,_0x7c4dbc)=>{const _0x2ac946=a39_0x192e42,{id:_0x265aec}=_0x38b364[_0x2ac946(0x15d)];if(_0x38b364[_0x2ac946(0x152)][_0x2ac946(0x130)]!=='admin')throw new AppError_1[(_0x2ac946(0x151))]('ERR_NO_PERMISSION',0x193);return await(0x0,DeleteTicketNoteService_1[_0x2ac946(0x151)])(_0x265aec),_0x7c4dbc['status'](0xc8)['json']({'message':_0x2ac946(0x155)});};exports['remove']=remove;const findFilteredList=async(_0x4f0660,_0x56b19d)=>{const _0x281769=a39_0x192e42;try{const {contactId:_0x2f7bd3,ticketId:_0x29330c}=_0x4f0660[_0x281769(0x147)],_0x3f3e4c=await(0x0,FindNotesByContactIdAndTicketId_1[_0x281769(0x151)])({'contactId':_0x2f7bd3,'ticketId':_0x29330c});return _0x56b19d[_0x281769(0x134)](0xc8)[_0x281769(0x143)](_0x3f3e4c);}catch(_0x31cb65){return _0x56b19d[_0x281769(0x134)](0x1f4)[_0x281769(0x143)]({'message':_0x31cb65});}};exports[a39_0x192e42(0x148)]=findFilteredList;