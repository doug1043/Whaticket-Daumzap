const a35_0x20368b=a35_0x2d48;(function(_0x130ead,_0x258e08){const _0x5827d4=a35_0x2d48,_0x2b226e=_0x130ead();while(!![]){try{const _0xa26090=-parseInt(_0x5827d4(0xd9))/0x1*(parseInt(_0x5827d4(0xec))/0x2)+parseInt(_0x5827d4(0xdb))/0x3+parseInt(_0x5827d4(0xe3))/0x4+-parseInt(_0x5827d4(0xed))/0x5*(-parseInt(_0x5827d4(0xe6))/0x6)+parseInt(_0x5827d4(0xf5))/0x7*(-parseInt(_0x5827d4(0xfc))/0x8)+parseInt(_0x5827d4(0xf8))/0x9+-parseInt(_0x5827d4(0xfa))/0xa*(parseInt(_0x5827d4(0xdd))/0xb);if(_0xa26090===_0x258e08)break;else _0x2b226e['push'](_0x2b226e['shift']());}catch(_0x1222e0){_0x2b226e['push'](_0x2b226e['shift']());}}}(a35_0x218c,0x7c793));const a35_0x4a3806=(function(){let _0x462082=!![];return function(_0x5b1a22,_0x3bb196){const _0x1e4f87=_0x462082?function(){const _0x21c1f6=a35_0x2d48;if(_0x3bb196){const _0x2b4977=_0x3bb196[_0x21c1f6(0xfd)](_0x5b1a22,arguments);return _0x3bb196=null,_0x2b4977;}}:function(){};return _0x462082=![],_0x1e4f87;};}()),a35_0x600c20=a35_0x4a3806(this,function(){const _0x183c5d=a35_0x2d48;return a35_0x600c20[_0x183c5d(0xe4)]()[_0x183c5d(0xdc)](_0x183c5d(0xf1))[_0x183c5d(0xe4)]()[_0x183c5d(0xeb)](a35_0x600c20)[_0x183c5d(0xdc)](_0x183c5d(0xf1));});a35_0x600c20();'use strict';var __importDefault=this&&this[a35_0x20368b(0xda)]||function(_0x5e0517){const _0x19b00f=a35_0x20368b;return _0x5e0517&&_0x5e0517[_0x19b00f(0xe0)]?_0x5e0517:{'default':_0x5e0517};};Object[a35_0x20368b(0xf6)](exports,a35_0x20368b(0xe0),{'value':!![]}),exports[a35_0x20368b(0xe9)]=exports['me']=exports[a35_0x20368b(0xf9)]=exports[a35_0x20368b(0xe1)]=void 0x0;const AppError_1=__importDefault(require(a35_0x20368b(0xe7))),socket_1=require('../libs/socket'),AuthUserService_1=__importDefault(require(a35_0x20368b(0xe2))),SendRefreshToken_1=require(a35_0x20368b(0x100)),RefreshTokenService_1=require(a35_0x20368b(0xee)),FindUserFromToken_1=__importDefault(require('../services/AuthServices/FindUserFromToken')),User_1=__importDefault(require('../models/User')),store=async(_0x10b48f,_0x4afdbd)=>{const _0x2a3159=a35_0x20368b,{email:_0x17da5c,password:_0x8a5609}=_0x10b48f['body'],{token:_0x53c1b1,serializedUser:_0x13fa88,refreshToken:_0x2db811}=await(0x0,AuthUserService_1['default'])({'email':_0x17da5c,'password':_0x8a5609});(0x0,SendRefreshToken_1[_0x2a3159(0xdf)])(_0x4afdbd,_0x2db811);const _0x32e5ce=(0x0,socket_1['getIO'])();return _0x32e5ce['to'](_0x2a3159(0xd8)+_0x13fa88[_0x2a3159(0xfb)]+_0x2a3159(0xf4))['emit'](_0x2a3159(0xd8)+_0x13fa88[_0x2a3159(0xfb)]+_0x2a3159(0xf0),{'action':_0x2a3159(0xf9),'user':{'id':_0x13fa88['id'],'email':_0x13fa88[_0x2a3159(0xea)],'companyId':_0x13fa88[_0x2a3159(0xfb)]}}),_0x4afdbd[_0x2a3159(0xf3)](0xc8)['json']({'token':_0x53c1b1,'user':_0x13fa88});};exports[a35_0x20368b(0xe1)]=store;const update=async(_0x2c7168,_0xb130fe)=>{const _0x12d40a=a35_0x20368b,_0x438449=_0x2c7168[_0x12d40a(0xf2)][_0x12d40a(0xef)];if(!_0x438449)throw new AppError_1[(_0x12d40a(0xf7))](_0x12d40a(0xde),0x191);const {user:_0x303881,newToken:_0xdfe626,refreshToken:_0x57715f}=await(0x0,RefreshTokenService_1[_0x12d40a(0xe8)])(_0xb130fe,_0x438449);return(0x0,SendRefreshToken_1[_0x12d40a(0xdf)])(_0xb130fe,_0x57715f),_0xb130fe[_0x12d40a(0xfe)]({'token':_0xdfe626,'user':_0x303881});};exports[a35_0x20368b(0xf9)]=update;function a35_0x218c(){const _0x12bd80=['store','../services/UserServices/AuthUserService','2945904NgNgxC','toString','user','3103362KlxCtW','../errors/AppError','RefreshTokenService','remove','email','constructor','2KahBga','5FidYCq','../services/AuthServices/RefreshTokenService','jrt','-auth','(((.+)+)+)+$','cookies','status','-mainchannel','14TKzSHf','defineProperty','default','8867655RCBbhO','update','14691410eDdtJH','companyId','1817224goCYsu','apply','json','send','../helpers/SendRefreshToken','company-','555526AeKrFF','__importDefault','2249454sEmwMH','search','11yKnZzp','ERR_SESSION_EXPIRED','SendRefreshToken','__esModule'];a35_0x218c=function(){return _0x12bd80;};return a35_0x218c();}const me=async(_0x4bf4c8,_0xb1cfdb)=>{const _0x2cfe0d=a35_0x20368b,_0xf6810b=_0x4bf4c8[_0x2cfe0d(0xf2)]['jrt'],_0x5cd0cb=await(0x0,FindUserFromToken_1[_0x2cfe0d(0xf7)])(_0xf6810b),{id:_0x3851a1,profile:_0x1be8ef,super:_0x47bb62}=_0x5cd0cb;if(!_0xf6810b)throw new AppError_1[(_0x2cfe0d(0xf7))]('ERR_SESSION_EXPIRED',0x191);return _0xb1cfdb[_0x2cfe0d(0xfe)]({'id':_0x3851a1,'profile':_0x1be8ef,'super':_0x47bb62});};exports['me']=me;const remove=async(_0xd51089,_0x4277c8)=>{const _0x14de46=a35_0x20368b,{id:_0x5e4122}=_0xd51089[_0x14de46(0xe5)],_0x307dd7=await User_1[_0x14de46(0xf7)]['findByPk'](_0x5e4122);return await _0x307dd7[_0x14de46(0xf9)]({'online':![]}),_0x4277c8['clearCookie'](_0x14de46(0xef)),_0x4277c8[_0x14de46(0xff)]();};function a35_0x2d48(_0x2d7897,_0x5682e3){const _0x1f33be=a35_0x218c();return a35_0x2d48=function(_0x600c20,_0x4a3806){_0x600c20=_0x600c20-0xd8;let _0x218c55=_0x1f33be[_0x600c20];return _0x218c55;},a35_0x2d48(_0x2d7897,_0x5682e3);}exports[a35_0x20368b(0xe9)]=remove;