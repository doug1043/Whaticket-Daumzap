const a34_0x404399=a34_0xa7b7;(function(_0x5009af,_0x2ab675){const _0x591e24=a34_0xa7b7,_0x4c96e9=_0x5009af();while(!![]){try{const _0x538241=-parseInt(_0x591e24(0x191))/0x1*(-parseInt(_0x591e24(0x188))/0x2)+-parseInt(_0x591e24(0x199))/0x3*(-parseInt(_0x591e24(0x187))/0x4)+parseInt(_0x591e24(0x184))/0x5+-parseInt(_0x591e24(0x18d))/0x6*(-parseInt(_0x591e24(0x19b))/0x7)+-parseInt(_0x591e24(0x18a))/0x8*(parseInt(_0x591e24(0x1a0))/0x9)+-parseInt(_0x591e24(0x19e))/0xa*(parseInt(_0x591e24(0x1a4))/0xb)+parseInt(_0x591e24(0x1aa))/0xc*(-parseInt(_0x591e24(0x192))/0xd);if(_0x538241===_0x2ab675)break;else _0x4c96e9['push'](_0x4c96e9['shift']());}catch(_0x56fb0c){_0x4c96e9['push'](_0x4c96e9['shift']());}}}(a34_0xbae5,0x9c2c0));const a34_0x2931ee=(function(){let _0x34691a=!![];return function(_0x1cc8e8,_0x177f0b){const _0x357d44=_0x34691a?function(){const _0x44cee2=a34_0xa7b7;if(_0x177f0b){const _0x85183e=_0x177f0b[_0x44cee2(0x19a)](_0x1cc8e8,arguments);return _0x177f0b=null,_0x85183e;}}:function(){};return _0x34691a=![],_0x357d44;};}()),a34_0x313844=a34_0x2931ee(this,function(){const _0x356779=a34_0xa7b7;return a34_0x313844[_0x356779(0x19f)]()[_0x356779(0x185)](_0x356779(0x1af))[_0x356779(0x19f)]()[_0x356779(0x190)](a34_0x313844)[_0x356779(0x185)](_0x356779(0x1af));});a34_0x313844();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x56ddd4){const _0x126659=a34_0xa7b7;return _0x56ddd4&&_0x56ddd4[_0x126659(0x1ab)]?_0x56ddd4:{'default':_0x56ddd4};};Object[a34_0x404399(0x1ac)](exports,'__esModule',{'value':!![]}),exports['remove']=exports['me']=exports[a34_0x404399(0x1a9)]=exports[a34_0x404399(0x195)]=void 0x0;const AppError_1=__importDefault(require('../errors/AppError')),socket_1=require('../libs/socket'),AuthUserService_1=__importDefault(require(a34_0x404399(0x1a5))),SendRefreshToken_1=require(a34_0x404399(0x1a8)),RefreshTokenService_1=require(a34_0x404399(0x1a6)),FindUserFromToken_1=__importDefault(require(a34_0x404399(0x18e))),User_1=__importDefault(require(a34_0x404399(0x19c))),store=async(_0x5f0204,_0x5815a3)=>{const _0x3ca76f=a34_0x404399,{email:_0x27de56,password:_0x522d1b}=_0x5f0204[_0x3ca76f(0x194)],{token:_0x2b0384,serializedUser:_0x51d9c2,refreshToken:_0x4dbbfb}=await(0x0,AuthUserService_1[_0x3ca76f(0x1a3)])({'email':_0x27de56,'password':_0x522d1b});(0x0,SendRefreshToken_1[_0x3ca76f(0x1a1)])(_0x5815a3,_0x4dbbfb);const _0x542035=(0x0,socket_1[_0x3ca76f(0x18c)])();return _0x542035['to'](_0x3ca76f(0x186)+_0x51d9c2['companyId']+_0x3ca76f(0x18b))[_0x3ca76f(0x197)](_0x3ca76f(0x186)+_0x51d9c2[_0x3ca76f(0x196)]+_0x3ca76f(0x1ad),{'action':_0x3ca76f(0x1a9),'user':{'id':_0x51d9c2['id'],'email':_0x51d9c2['email'],'companyId':_0x51d9c2['companyId']}}),_0x5815a3['status'](0xc8)['json']({'token':_0x2b0384,'user':_0x51d9c2});};exports[a34_0x404399(0x195)]=store;const update=async(_0x129679,_0x3a2d3f)=>{const _0x1c55ff=a34_0x404399,_0x2847c6=_0x129679[_0x1c55ff(0x18f)]['jrt'];if(!_0x2847c6)throw new AppError_1[(_0x1c55ff(0x1a3))](_0x1c55ff(0x19d),0x191);const {user:_0x1d931b,newToken:_0x251284,refreshToken:_0x4ce404}=await(0x0,RefreshTokenService_1[_0x1c55ff(0x1a2)])(_0x3a2d3f,_0x2847c6);return(0x0,SendRefreshToken_1[_0x1c55ff(0x1a1)])(_0x3a2d3f,_0x4ce404),_0x3a2d3f['json']({'token':_0x251284,'user':_0x1d931b});};function a34_0xa7b7(_0x29254b,_0x25f043){const _0x1baa0d=a34_0xbae5();return a34_0xa7b7=function(_0x313844,_0x2931ee){_0x313844=_0x313844-0x184;let _0xbae565=_0x1baa0d[_0x313844];return _0xbae565;},a34_0xa7b7(_0x29254b,_0x25f043);}exports['update']=update;function a34_0xbae5(){const _0x4c521c=['6960591veHkCA','SendRefreshToken','RefreshTokenService','default','48532BqiRdd','../services/UserServices/AuthUserService','../services/AuthServices/RefreshTokenService','clearCookie','../helpers/SendRefreshToken','update','708VypBML','__esModule','defineProperty','-auth','findByPk','(((.+)+)+)+$','5898000HFfduS','search','company-','4NrABjJ','622ZJfhBS','remove','8riZBKO','-mainchannel','getIO','42WysSfx','../services/AuthServices/FindUserFromToken','cookies','constructor','302pdbMtM','309049LcPVRY','send','body','store','companyId','emit','json','2316243MNXAkT','apply','1003919SqUpbJ','../models/User','ERR_SESSION_EXPIRED','530ufZcpt','toString'];a34_0xbae5=function(){return _0x4c521c;};return a34_0xbae5();}const me=async(_0x214744,_0x246782)=>{const _0x48987e=a34_0x404399,_0x468f1d=_0x214744['cookies']['jrt'],_0x51bb8d=await(0x0,FindUserFromToken_1['default'])(_0x468f1d),{id:_0xd48040,profile:_0x135491,super:_0x3be516}=_0x51bb8d;if(!_0x468f1d)throw new AppError_1[(_0x48987e(0x1a3))](_0x48987e(0x19d),0x191);return _0x246782[_0x48987e(0x198)]({'id':_0xd48040,'profile':_0x135491,'super':_0x3be516});};exports['me']=me;const remove=async(_0x84d29c,_0x514bf3)=>{const _0xc67687=a34_0x404399,{id:_0x25df26}=_0x84d29c['user'],_0x243dae=await User_1[_0xc67687(0x1a3)][_0xc67687(0x1ae)](_0x25df26);return await _0x243dae[_0xc67687(0x1a9)]({'online':![]}),_0x514bf3[_0xc67687(0x1a7)]('jrt'),_0x514bf3[_0xc67687(0x193)]();};exports[a34_0x404399(0x189)]=remove;