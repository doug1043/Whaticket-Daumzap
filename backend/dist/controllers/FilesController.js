const a19_0x47ea22=a19_0xa718;(function(_0x5f4c42,_0x17027e){const _0x5146c1=a19_0xa718,_0x23d945=_0x5f4c42();while(!![]){try{const _0x197da4=-parseInt(_0x5146c1(0xa7))/0x1*(parseInt(_0x5146c1(0x9f))/0x2)+parseInt(_0x5146c1(0x87))/0x3*(parseInt(_0x5146c1(0x72))/0x4)+-parseInt(_0x5146c1(0x74))/0x5+parseInt(_0x5146c1(0x9d))/0x6*(-parseInt(_0x5146c1(0x90))/0x7)+parseInt(_0x5146c1(0x7b))/0x8*(-parseInt(_0x5146c1(0x99))/0x9)+-parseInt(_0x5146c1(0x83))/0xa+parseInt(_0x5146c1(0x77))/0xb;if(_0x197da4===_0x17027e)break;else _0x23d945['push'](_0x23d945['shift']());}catch(_0x4b5a27){_0x23d945['push'](_0x23d945['shift']());}}}(a19_0x34f8,0x35f7e));function a19_0x34f8(){const _0x19c31d=['filename','25290iNvkKI','-file','profile','remove','defineProperty','../services/FileServices/SimpleListService','../errors/AppError','../libs/socket','../services/FileServices/DeleteAllService','4004rSGGlG','removeAll','json','isArray','admin','update','status','../services/FileServices/UpdateService','delete','20745ZgZHFj','body','getIO','../services/FileServices/CreateService','3642nhGCJZ','replace','589102CKqGpL','../services/FileServices/ListService','user','__esModule','message','length','uploadMedias','files','1kuDKgM','send','store','show','search','emit','query','index','apply','88HNEHwS','(((.+)+)+)+$','1780825wdMSMO','../models/FilesOptions','entries','19486093HLlvOO','toString','list','default','1384wpoPry','-mainchannel','params','findOne','company','File\x20List\x20deleted','ERR_NO_PERMISSION','__importDefault','3391840OPvwbs','company-','../services/FileServices/DeleteService'];a19_0x34f8=function(){return _0x19c31d;};return a19_0x34f8();}const a19_0x3fdd04=(function(){let _0x2a3dfa=!![];return function(_0x1a1571,_0x413c70){const _0x3bb5f1=_0x2a3dfa?function(){const _0x1df43c=a19_0xa718;if(_0x413c70){const _0x1bdf8e=_0x413c70[_0x1df43c(0x71)](_0x1a1571,arguments);return _0x413c70=null,_0x1bdf8e;}}:function(){};return _0x2a3dfa=![],_0x3bb5f1;};}()),a19_0x3e70ae=a19_0x3fdd04(this,function(){const _0x3a1471=a19_0xa718;return a19_0x3e70ae[_0x3a1471(0x78)]()['search'](_0x3a1471(0x73))[_0x3a1471(0x78)]()['constructor'](a19_0x3e70ae)[_0x3a1471(0x6d)](_0x3a1471(0x73));});a19_0x3e70ae();'use strict';var __importDefault=this&&this[a19_0x47ea22(0x82)]||function(_0x392169){const _0x5f256a=a19_0x47ea22;return _0x392169&&_0x392169[_0x5f256a(0xa2)]?_0x392169:{'default':_0x392169};};function a19_0xa718(_0x14f8d2,_0x4b74c5){const _0x10e431=a19_0x34f8();return a19_0xa718=function(_0x3e70ae,_0x3fdd04){_0x3e70ae=_0x3e70ae-0x6a;let _0x34f825=_0x10e431[_0x3e70ae];return _0x34f825;},a19_0xa718(_0x14f8d2,_0x4b74c5);}Object[a19_0x47ea22(0x8b)](exports,a19_0x47ea22(0xa2),{'value':!![]}),exports[a19_0x47ea22(0x79)]=exports[a19_0x47ea22(0x91)]=exports[a19_0x47ea22(0x8a)]=exports[a19_0x47ea22(0x95)]=exports['uploadMedias']=exports[a19_0x47ea22(0x6c)]=exports['store']=exports[a19_0x47ea22(0x70)]=void 0x0;const socket_1=require(a19_0x47ea22(0x8e)),AppError_1=__importDefault(require(a19_0x47ea22(0x8d))),lodash_1=require('lodash'),CreateService_1=__importDefault(require(a19_0x47ea22(0x9c))),ListService_1=__importDefault(require(a19_0x47ea22(0xa0))),UpdateService_1=__importDefault(require(a19_0x47ea22(0x97))),ShowService_1=__importDefault(require('../services/FileServices/ShowService')),DeleteService_1=__importDefault(require(a19_0x47ea22(0x85))),SimpleListService_1=__importDefault(require(a19_0x47ea22(0x8c))),DeleteAllService_1=__importDefault(require(a19_0x47ea22(0x8f))),FilesOptions_1=__importDefault(require(a19_0x47ea22(0x75))),index=async(_0x3df4af,_0xb0cba9)=>{const _0x4a426d=a19_0x47ea22,{pageNumber:_0xf4a3ac,searchParam:_0x2695d6}=_0x3df4af[_0x4a426d(0x6f)],{companyId:_0x43acf0}=_0x3df4af[_0x4a426d(0xa1)],{files:_0x2481f5,count:_0x594040,hasMore:_0x36bef7}=await(0x0,ListService_1[_0x4a426d(0x7a)])({'searchParam':_0x2695d6,'pageNumber':_0xf4a3ac,'companyId':_0x43acf0});return _0xb0cba9[_0x4a426d(0x92)]({'files':_0x2481f5,'count':_0x594040,'hasMore':_0x36bef7});};exports[a19_0x47ea22(0x70)]=index;const store=async(_0x19c77d,_0x308038)=>{const _0x5abe0b=a19_0x47ea22,{name:_0x3a0838,message:_0x363260,options:_0x42ddae}=_0x19c77d['body'],{companyId:_0x5b5ae7}=_0x19c77d[_0x5abe0b(0xa1)],_0x58f77a=await(0x0,CreateService_1[_0x5abe0b(0x7a)])({'name':_0x3a0838,'message':_0x363260,'options':_0x42ddae,'companyId':_0x5b5ae7}),_0x3fbe61=(0x0,socket_1[_0x5abe0b(0x9b)])();return _0x3fbe61['to'](_0x5abe0b(0x84)+_0x5b5ae7+_0x5abe0b(0x7c))['emit'](_0x5abe0b(0x7f)+_0x5b5ae7+_0x5abe0b(0x88),{'action':'create','fileList':_0x58f77a}),_0x308038[_0x5abe0b(0x96)](0xc8)['json'](_0x58f77a);};exports[a19_0x47ea22(0x6b)]=store;const show=async(_0x3cdbbd,_0x165582)=>{const _0x3c8eee=a19_0x47ea22,{fileId:_0x31bb09}=_0x3cdbbd['params'],{companyId:_0x113694}=_0x3cdbbd[_0x3c8eee(0xa1)],_0x1ffc7=await(0x0,ShowService_1['default'])(_0x31bb09,_0x113694);return _0x165582['status'](0xc8)[_0x3c8eee(0x92)](_0x1ffc7);};exports[a19_0x47ea22(0x6c)]=show;const uploadMedias=async(_0x32d262,_0x21b362)=>{const _0x22bc4f=a19_0x47ea22,{fileId:_0x22f46c,id:_0x3104e1,mediaType:_0x22e532}=_0x32d262[_0x22bc4f(0x9a)],_0x422ffd=_0x32d262[_0x22bc4f(0xa6)],_0x41b68d=(0x0,lodash_1['head'])(_0x422ffd);try{let _0x19445f;if(_0x422ffd[_0x22bc4f(0xa4)]>0x0)for(const [_0x3046e3,_0x3c6403]of _0x422ffd[_0x22bc4f(0x76)]()){_0x19445f=await FilesOptions_1[_0x22bc4f(0x7a)][_0x22bc4f(0x7e)]({'where':{'fileId':_0x22f46c,'id':Array[_0x22bc4f(0x93)](_0x3104e1)?_0x3104e1[_0x3046e3]:_0x3104e1}}),_0x19445f[_0x22bc4f(0x95)]({'path':_0x3c6403[_0x22bc4f(0x86)][_0x22bc4f(0x9e)]('/','-'),'mediaType':Array[_0x22bc4f(0x93)](_0x22e532)?_0x22e532[_0x3046e3]:_0x22e532});}return _0x21b362[_0x22bc4f(0x6a)]({'mensagem':'Arquivos\x20atualizados'});}catch(_0x385891){throw new AppError_1[(_0x22bc4f(0x7a))](_0x385891[_0x22bc4f(0xa3)]);}};exports[a19_0x47ea22(0xa5)]=uploadMedias;const update=async(_0x49a5db,_0x1880b2)=>{const _0x1d12c8=a19_0x47ea22;if(_0x49a5db['user'][_0x1d12c8(0x89)]!==_0x1d12c8(0x94))throw new AppError_1[(_0x1d12c8(0x7a))](_0x1d12c8(0x81),0x193);const {fileId:_0x222aa3}=_0x49a5db[_0x1d12c8(0x7d)],_0x16c034=_0x49a5db[_0x1d12c8(0x9a)],{companyId:_0x15ed39}=_0x49a5db[_0x1d12c8(0xa1)],_0x1501c1=await(0x0,UpdateService_1['default'])({'fileData':_0x16c034,'id':_0x222aa3,'companyId':_0x15ed39}),_0x2bee6e=(0x0,socket_1[_0x1d12c8(0x9b)])();return _0x2bee6e['to'](_0x1d12c8(0x84)+_0x15ed39+'-mainchannel')[_0x1d12c8(0x6e)](_0x1d12c8(0x7f)+_0x15ed39+_0x1d12c8(0x88),{'action':_0x1d12c8(0x95),'fileList':_0x1501c1}),_0x1880b2[_0x1d12c8(0x96)](0xc8)[_0x1d12c8(0x92)](_0x1501c1);};exports['update']=update;const remove=async(_0x8d67e4,_0x544db1)=>{const _0x4268be=a19_0x47ea22,{fileId:_0x44f762}=_0x8d67e4[_0x4268be(0x7d)],{companyId:_0x21a676}=_0x8d67e4['user'];await(0x0,DeleteService_1[_0x4268be(0x7a)])(_0x44f762,_0x21a676);const _0x2f05e1=(0x0,socket_1['getIO'])();return _0x2f05e1['to'](_0x4268be(0x84)+_0x21a676+_0x4268be(0x7c))[_0x4268be(0x6e)](_0x4268be(0x7f)+_0x21a676+_0x4268be(0x88),{'action':_0x4268be(0x98),'fileId':_0x44f762}),_0x544db1[_0x4268be(0x96)](0xc8)[_0x4268be(0x92)]({'message':_0x4268be(0x80)});};exports[a19_0x47ea22(0x8a)]=remove;const removeAll=async(_0x256a1e,_0x313e71)=>{const _0x45426a=a19_0x47ea22,{companyId:_0xd3f5a4}=_0x256a1e[_0x45426a(0xa1)];return await(0x0,DeleteAllService_1[_0x45426a(0x7a)])(_0xd3f5a4),_0x313e71[_0x45426a(0x6a)]();};exports[a19_0x47ea22(0x91)]=removeAll;const list=async(_0x427716,_0x9a9681)=>{const _0x4d5493=a19_0x47ea22,{searchParam:_0x5146c0}=_0x427716[_0x4d5493(0x6f)],{companyId:_0x53d401}=_0x427716[_0x4d5493(0xa1)],_0x4565c3=await(0x0,SimpleListService_1['default'])({'searchParam':_0x5146c0,'companyId':_0x53d401});return _0x9a9681['json'](_0x4565c3);};exports['list']=list;