const a19_0x333f88=a19_0x41b0;(function(_0x43f5ae,_0x402862){const _0x1eddc3=a19_0x41b0,_0x292bc4=_0x43f5ae();while(!![]){try{const _0x31de7a=-parseInt(_0x1eddc3(0x115))/0x1*(-parseInt(_0x1eddc3(0xfd))/0x2)+parseInt(_0x1eddc3(0x111))/0x3+parseInt(_0x1eddc3(0x114))/0x4*(-parseInt(_0x1eddc3(0xef))/0x5)+parseInt(_0x1eddc3(0x104))/0x6*(-parseInt(_0x1eddc3(0xf3))/0x7)+-parseInt(_0x1eddc3(0xf8))/0x8*(parseInt(_0x1eddc3(0xf2))/0x9)+parseInt(_0x1eddc3(0x11b))/0xa+parseInt(_0x1eddc3(0xfa))/0xb*(parseInt(_0x1eddc3(0xfe))/0xc);if(_0x31de7a===_0x402862)break;else _0x292bc4['push'](_0x292bc4['shift']());}catch(_0x300bb8){_0x292bc4['push'](_0x292bc4['shift']());}}}(a19_0x2d30,0xdb437));const a19_0x5c8a3b=(function(){let _0x4f8c55=!![];return function(_0x6443d1,_0x5007a4){const _0x2a3d40=_0x4f8c55?function(){const _0x1b918b=a19_0x41b0;if(_0x5007a4){const _0x5472d0=_0x5007a4[_0x1b918b(0x100)](_0x6443d1,arguments);return _0x5007a4=null,_0x5472d0;}}:function(){};return _0x4f8c55=![],_0x2a3d40;};}()),a19_0x39e17c=a19_0x5c8a3b(this,function(){const _0x3ea5f7=a19_0x41b0;return a19_0x39e17c[_0x3ea5f7(0xf7)]()[_0x3ea5f7(0x106)](_0x3ea5f7(0xf0))[_0x3ea5f7(0xf7)]()[_0x3ea5f7(0xee)](a19_0x39e17c)[_0x3ea5f7(0x106)](_0x3ea5f7(0xf0));});a19_0x39e17c();'use strict';function a19_0x2d30(){const _0x1d07e0=['replace','414066SvSYFa','defineProperty','search','status','default','__esModule','company','File\x20List\x20deleted','head','remove','../services/FileServices/SimpleListService','query','entries','15027rSiFaP','params','user','4jQbZTY','576081CKeHoZ','index','filename','../models/FilesOptions','delete','../services/FileServices/DeleteService','12865870RyWpjC','store','length','Arquivos\x20atualizados','json','../libs/socket','removeAll','findOne','isArray','uploadMedias','../services/FileServices/UpdateService','admin','profile','getIO','-mainchannel','__importDefault','constructor','2009495mZXztP','(((.+)+)+)+$','ERR_NO_PERMISSION','4707vdALvC','140nutNUd','body','-file','../services/FileServices/DeleteAllService','toString','18632jNddhp','company-','22GIAVHT','../errors/AppError','emit','2poNtOu','12183672LoDXki','update','apply','show','message'];a19_0x2d30=function(){return _0x1d07e0;};return a19_0x2d30();}var __importDefault=this&&this[a19_0x333f88(0xed)]||function(_0x5308d4){const _0x56f0c4=a19_0x333f88;return _0x5308d4&&_0x5308d4[_0x56f0c4(0x109)]?_0x5308d4:{'default':_0x5308d4};};Object[a19_0x333f88(0x105)](exports,a19_0x333f88(0x109),{'value':!![]}),exports['list']=exports['removeAll']=exports[a19_0x333f88(0x10d)]=exports[a19_0x333f88(0xff)]=exports[a19_0x333f88(0xe7)]=exports['show']=exports[a19_0x333f88(0x11c)]=exports[a19_0x333f88(0x116)]=void 0x0;function a19_0x41b0(_0x412dca,_0x416e8a){const _0x34c6a9=a19_0x2d30();return a19_0x41b0=function(_0x39e17c,_0x5c8a3b){_0x39e17c=_0x39e17c-0xe1;let _0x2d3069=_0x34c6a9[_0x39e17c];return _0x2d3069;},a19_0x41b0(_0x412dca,_0x416e8a);}const socket_1=require(a19_0x333f88(0xe3)),AppError_1=__importDefault(require(a19_0x333f88(0xfb))),lodash_1=require('lodash'),CreateService_1=__importDefault(require('../services/FileServices/CreateService')),ListService_1=__importDefault(require('../services/FileServices/ListService')),UpdateService_1=__importDefault(require(a19_0x333f88(0xe8))),ShowService_1=__importDefault(require('../services/FileServices/ShowService')),DeleteService_1=__importDefault(require(a19_0x333f88(0x11a))),SimpleListService_1=__importDefault(require(a19_0x333f88(0x10e))),DeleteAllService_1=__importDefault(require(a19_0x333f88(0xf6))),FilesOptions_1=__importDefault(require(a19_0x333f88(0x118))),index=async(_0x4aefcb,_0x443ccd)=>{const _0x257e5d=a19_0x333f88,{pageNumber:_0x17b967,searchParam:_0x201c49}=_0x4aefcb['query'],{companyId:_0x5dbe0e}=_0x4aefcb[_0x257e5d(0x113)],{files:_0x527e9d,count:_0x2a02e2,hasMore:_0x646791}=await(0x0,ListService_1[_0x257e5d(0x108)])({'searchParam':_0x201c49,'pageNumber':_0x17b967,'companyId':_0x5dbe0e});return _0x443ccd[_0x257e5d(0xe2)]({'files':_0x527e9d,'count':_0x2a02e2,'hasMore':_0x646791});};exports['index']=index;const store=async(_0x48be9d,_0x43e0c3)=>{const _0x3ad370=a19_0x333f88,{name:_0x520086,message:_0x2d730a,options:_0x39f50e}=_0x48be9d[_0x3ad370(0xf4)],{companyId:_0xb351bf}=_0x48be9d[_0x3ad370(0x113)],_0x3222a0=await(0x0,CreateService_1[_0x3ad370(0x108)])({'name':_0x520086,'message':_0x2d730a,'options':_0x39f50e,'companyId':_0xb351bf}),_0x1311da=(0x0,socket_1[_0x3ad370(0xeb)])();return _0x1311da['to'](_0x3ad370(0xf9)+_0xb351bf+'-mainchannel')[_0x3ad370(0xfc)]('company'+_0xb351bf+'-file',{'action':'create','fileList':_0x3222a0}),_0x43e0c3['status'](0xc8)[_0x3ad370(0xe2)](_0x3222a0);};exports[a19_0x333f88(0x11c)]=store;const show=async(_0x25524f,_0x5e8284)=>{const _0x39bf9c=a19_0x333f88,{fileId:_0x2bd9ad}=_0x25524f[_0x39bf9c(0x112)],{companyId:_0xa92128}=_0x25524f['user'],_0x14a7f9=await(0x0,ShowService_1[_0x39bf9c(0x108)])(_0x2bd9ad,_0xa92128);return _0x5e8284[_0x39bf9c(0x107)](0xc8)[_0x39bf9c(0xe2)](_0x14a7f9);};exports[a19_0x333f88(0x101)]=show;const uploadMedias=async(_0x5f570a,_0x596c29)=>{const _0x3a112d=a19_0x333f88,{fileId:_0x385151,id:_0x4adb73,mediaType:_0xc517b0}=_0x5f570a[_0x3a112d(0xf4)],_0x46da30=_0x5f570a['files'],_0x2ff671=(0x0,lodash_1[_0x3a112d(0x10c)])(_0x46da30);try{let _0x133472;if(_0x46da30[_0x3a112d(0x11d)]>0x0)for(const [_0x33f2ab,_0x3de063]of _0x46da30[_0x3a112d(0x110)]()){_0x133472=await FilesOptions_1[_0x3a112d(0x108)][_0x3a112d(0xe5)]({'where':{'fileId':_0x385151,'id':Array[_0x3a112d(0xe6)](_0x4adb73)?_0x4adb73[_0x33f2ab]:_0x4adb73}}),_0x133472[_0x3a112d(0xff)]({'path':_0x3de063[_0x3a112d(0x117)][_0x3a112d(0x103)]('/','-'),'mediaType':Array[_0x3a112d(0xe6)](_0xc517b0)?_0xc517b0[_0x33f2ab]:_0xc517b0});}return _0x596c29['send']({'mensagem':_0x3a112d(0xe1)});}catch(_0x3826b1){throw new AppError_1[(_0x3a112d(0x108))](_0x3826b1[_0x3a112d(0x102)]);}};exports[a19_0x333f88(0xe7)]=uploadMedias;const update=async(_0x3202e8,_0x21b6e1)=>{const _0x1f93da=a19_0x333f88;if(_0x3202e8['user'][_0x1f93da(0xea)]!==_0x1f93da(0xe9))throw new AppError_1[(_0x1f93da(0x108))](_0x1f93da(0xf1),0x193);const {fileId:_0x2720a6}=_0x3202e8['params'],_0x247bfd=_0x3202e8[_0x1f93da(0xf4)],{companyId:_0x5d81e4}=_0x3202e8[_0x1f93da(0x113)],_0x5b33ff=await(0x0,UpdateService_1['default'])({'fileData':_0x247bfd,'id':_0x2720a6,'companyId':_0x5d81e4}),_0x5d02a3=(0x0,socket_1[_0x1f93da(0xeb)])();return _0x5d02a3['to']('company-'+_0x5d81e4+_0x1f93da(0xec))[_0x1f93da(0xfc)](_0x1f93da(0x10a)+_0x5d81e4+_0x1f93da(0xf5),{'action':'update','fileList':_0x5b33ff}),_0x21b6e1[_0x1f93da(0x107)](0xc8)[_0x1f93da(0xe2)](_0x5b33ff);};exports['update']=update;const remove=async(_0xe9424f,_0x143a91)=>{const _0x964eee=a19_0x333f88,{fileId:_0x1e1c77}=_0xe9424f[_0x964eee(0x112)],{companyId:_0x4278f8}=_0xe9424f['user'];await(0x0,DeleteService_1[_0x964eee(0x108)])(_0x1e1c77,_0x4278f8);const _0x42716d=(0x0,socket_1['getIO'])();return _0x42716d['to'](_0x964eee(0xf9)+_0x4278f8+_0x964eee(0xec))['emit']('company'+_0x4278f8+_0x964eee(0xf5),{'action':_0x964eee(0x119),'fileId':_0x1e1c77}),_0x143a91[_0x964eee(0x107)](0xc8)[_0x964eee(0xe2)]({'message':_0x964eee(0x10b)});};exports['remove']=remove;const removeAll=async(_0x559437,_0x2634f8)=>{const _0x2ff444=a19_0x333f88,{companyId:_0x307a37}=_0x559437[_0x2ff444(0x113)];return await(0x0,DeleteAllService_1[_0x2ff444(0x108)])(_0x307a37),_0x2634f8['send']();};exports[a19_0x333f88(0xe4)]=removeAll;const list=async(_0x4f6327,_0x1a02b7)=>{const _0x55090d=a19_0x333f88,{searchParam:_0x5b385a}=_0x4f6327[_0x55090d(0x10f)],{companyId:_0x2cce93}=_0x4f6327[_0x55090d(0x113)],_0x165a8a=await(0x0,SimpleListService_1[_0x55090d(0x108)])({'searchParam':_0x5b385a,'companyId':_0x2cce93});return _0x1a02b7[_0x55090d(0xe2)](_0x165a8a);};exports['list']=list;