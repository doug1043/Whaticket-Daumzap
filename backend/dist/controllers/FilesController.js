const a18_0x420303=a18_0x4217;(function(_0x802a1d,_0x22acb0){const _0x4cac73=a18_0x4217,_0x7a9f2e=_0x802a1d();while(!![]){try{const _0x260960=-parseInt(_0x4cac73(0x116))/0x1*(-parseInt(_0x4cac73(0x129))/0x2)+parseInt(_0x4cac73(0xf3))/0x3+parseInt(_0x4cac73(0x110))/0x4+-parseInt(_0x4cac73(0x12b))/0x5+-parseInt(_0x4cac73(0x10f))/0x6*(-parseInt(_0x4cac73(0x11c))/0x7)+-parseInt(_0x4cac73(0x120))/0x8+-parseInt(_0x4cac73(0x10e))/0x9;if(_0x260960===_0x22acb0)break;else _0x7a9f2e['push'](_0x7a9f2e['shift']());}catch(_0x30da98){_0x7a9f2e['push'](_0x7a9f2e['shift']());}}}(a18_0xc5ec,0xbdddb));const a18_0x3e1a2f=(function(){let _0x2577a3=!![];return function(_0x1ac0ff,_0x333325){const _0x2460d4=_0x2577a3?function(){const _0xfd0dbd=a18_0x4217;if(_0x333325){const _0x49443f=_0x333325[_0xfd0dbd(0xfc)](_0x1ac0ff,arguments);return _0x333325=null,_0x49443f;}}:function(){};return _0x2577a3=![],_0x2460d4;};}()),a18_0x4e0971=a18_0x3e1a2f(this,function(){const _0x5d755a=a18_0x4217;return a18_0x4e0971['toString']()[_0x5d755a(0x115)](_0x5d755a(0x122))[_0x5d755a(0x101)]()[_0x5d755a(0xf6)](a18_0x4e0971)['search'](_0x5d755a(0x122));});a18_0x4e0971();'use strict';var __importDefault=this&&this[a18_0x420303(0x107)]||function(_0x2066a9){const _0x433f6b=a18_0x420303;return _0x2066a9&&_0x2066a9[_0x433f6b(0xfb)]?_0x2066a9:{'default':_0x2066a9};};function a18_0x4217(_0x57cd6a,_0x11ef56){const _0x29621c=a18_0xc5ec();return a18_0x4217=function(_0x4e0971,_0x3e1a2f){_0x4e0971=_0x4e0971-0xf3;let _0xc5ecc6=_0x29621c[_0x4e0971];return _0xc5ecc6;},a18_0x4217(_0x57cd6a,_0x11ef56);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['list']=exports[a18_0x420303(0xf5)]=exports[a18_0x420303(0x11b)]=exports[a18_0x420303(0x11a)]=exports[a18_0x420303(0xfa)]=exports[a18_0x420303(0x128)]=exports[a18_0x420303(0x12a)]=exports[a18_0x420303(0x126)]=void 0x0;const socket_1=require(a18_0x420303(0x10c)),AppError_1=__importDefault(require(a18_0x420303(0x100))),lodash_1=require(a18_0x420303(0x10b)),CreateService_1=__importDefault(require(a18_0x420303(0x113))),ListService_1=__importDefault(require('../services/FileServices/ListService')),UpdateService_1=__importDefault(require(a18_0x420303(0xff))),ShowService_1=__importDefault(require('../services/FileServices/ShowService')),DeleteService_1=__importDefault(require('../services/FileServices/DeleteService')),SimpleListService_1=__importDefault(require(a18_0x420303(0x112))),DeleteAllService_1=__importDefault(require(a18_0x420303(0xf8))),FilesOptions_1=__importDefault(require('../models/FilesOptions')),index=async(_0x43b92,_0x1d9602)=>{const _0x13e427=a18_0x420303,{pageNumber:_0x20d7b6,searchParam:_0x5953f9}=_0x43b92['query'],{companyId:_0x4b95a9}=_0x43b92[_0x13e427(0x10d)],{files:_0x3f9cbe,count:_0x13c827,hasMore:_0x38e6a8}=await(0x0,ListService_1['default'])({'searchParam':_0x5953f9,'pageNumber':_0x20d7b6,'companyId':_0x4b95a9});return _0x1d9602[_0x13e427(0x121)]({'files':_0x3f9cbe,'count':_0x13c827,'hasMore':_0x38e6a8});};exports[a18_0x420303(0x126)]=index;const store=async(_0x17abb5,_0x249304)=>{const _0x198718=a18_0x420303,{name:_0x45be8a,message:_0x1d3da0,options:_0x517525}=_0x17abb5[_0x198718(0x105)],{companyId:_0x331a85}=_0x17abb5[_0x198718(0x10d)],_0x420c27=await(0x0,CreateService_1['default'])({'name':_0x45be8a,'message':_0x1d3da0,'options':_0x517525,'companyId':_0x331a85}),_0x4eea76=(0x0,socket_1[_0x198718(0x111)])();return _0x4eea76['to']('company-'+_0x331a85+_0x198718(0xf9))['emit'](_0x198718(0x124)+_0x331a85+'-file',{'action':'create','fileList':_0x420c27}),_0x249304[_0x198718(0x103)](0xc8)[_0x198718(0x121)](_0x420c27);};exports['store']=store;const show=async(_0xf9464d,_0x4f26cd)=>{const _0x51a153=a18_0x420303,{fileId:_0x4b6133}=_0xf9464d['params'],{companyId:_0x496252}=_0xf9464d['user'],_0x39d30c=await(0x0,ShowService_1[_0x51a153(0x11d)])(_0x4b6133,_0x496252);return _0x4f26cd[_0x51a153(0x103)](0xc8)[_0x51a153(0x121)](_0x39d30c);};exports[a18_0x420303(0x128)]=show;const uploadMedias=async(_0x511aff,_0x14a744)=>{const _0x2fd2f3=a18_0x420303,{fileId:_0x6e2723,id:_0x551b0f,mediaType:_0x15aebd}=_0x511aff['body'],_0x29fa58=_0x511aff[_0x2fd2f3(0xf7)],_0x5dc201=(0x0,lodash_1[_0x2fd2f3(0xfe)])(_0x29fa58);try{let _0x42f581;if(_0x29fa58[_0x2fd2f3(0x11f)]>0x0)for(const [_0xf8aa55,_0x330680]of _0x29fa58['entries']()){_0x42f581=await FilesOptions_1[_0x2fd2f3(0x11d)][_0x2fd2f3(0x106)]({'where':{'fileId':_0x6e2723,'id':Array[_0x2fd2f3(0x109)](_0x551b0f)?_0x551b0f[_0xf8aa55]:_0x551b0f}}),_0x42f581['update']({'path':_0x330680['filename']['replace']('/','-'),'mediaType':Array[_0x2fd2f3(0x109)](_0x15aebd)?_0x15aebd[_0xf8aa55]:_0x15aebd});}return _0x14a744[_0x2fd2f3(0x119)]({'mensagem':_0x2fd2f3(0xfd)});}catch(_0x3c9c16){throw new AppError_1[(_0x2fd2f3(0x11d))](_0x3c9c16[_0x2fd2f3(0xf4)]);}};exports[a18_0x420303(0xfa)]=uploadMedias;const update=async(_0x568ef6,_0x1bb9b2)=>{const _0x4b6a22=a18_0x420303;if(_0x568ef6[_0x4b6a22(0x10d)][_0x4b6a22(0x102)]!==_0x4b6a22(0x104))throw new AppError_1[(_0x4b6a22(0x11d))](_0x4b6a22(0x117),0x193);const {fileId:_0x22e32c}=_0x568ef6['params'],_0xce0645=_0x568ef6['body'],{companyId:_0xae0452}=_0x568ef6['user'],_0xf8da19=await(0x0,UpdateService_1['default'])({'fileData':_0xce0645,'id':_0x22e32c,'companyId':_0xae0452}),_0x4e2814=(0x0,socket_1[_0x4b6a22(0x111)])();return _0x4e2814['to'](_0x4b6a22(0x11e)+_0xae0452+'-mainchannel')[_0x4b6a22(0x123)]('company'+_0xae0452+'-file',{'action':'update','fileList':_0xf8da19}),_0x1bb9b2[_0x4b6a22(0x103)](0xc8)[_0x4b6a22(0x121)](_0xf8da19);};exports[a18_0x420303(0x11a)]=update;const remove=async(_0x1a91df,_0x2867af)=>{const _0x3a1d77=a18_0x420303,{fileId:_0x1a493b}=_0x1a91df[_0x3a1d77(0x10a)],{companyId:_0x4220d1}=_0x1a91df[_0x3a1d77(0x10d)];await(0x0,DeleteService_1[_0x3a1d77(0x11d)])(_0x1a493b,_0x4220d1);const _0x7a41d8=(0x0,socket_1['getIO'])();return _0x7a41d8['to'](_0x3a1d77(0x11e)+_0x4220d1+_0x3a1d77(0xf9))[_0x3a1d77(0x123)](_0x3a1d77(0x124)+_0x4220d1+_0x3a1d77(0x125),{'action':_0x3a1d77(0x127),'fileId':_0x1a493b}),_0x2867af['status'](0xc8)['json']({'message':_0x3a1d77(0x114)});};exports[a18_0x420303(0x11b)]=remove;const removeAll=async(_0x1f5511,_0x340e36)=>{const _0x2768f7=a18_0x420303,{companyId:_0x171fba}=_0x1f5511[_0x2768f7(0x10d)];return await(0x0,DeleteAllService_1[_0x2768f7(0x11d)])(_0x171fba),_0x340e36[_0x2768f7(0x119)]();};exports[a18_0x420303(0xf5)]=removeAll;function a18_0xc5ec(){const _0x4ab4d9=['user','8362548HRxgeT','174NgDeoT','2723948asNYCx','getIO','../services/FileServices/SimpleListService','../services/FileServices/CreateService','File\x20List\x20deleted','search','89119POwGZP','ERR_NO_PERMISSION','list','send','update','remove','157409tuMMtK','default','company-','length','9862040kQhchK','json','(((.+)+)+)+$','emit','company','-file','index','delete','show','26CfMfXL','store','673365SFgUCT','1747902CweTal','message','removeAll','constructor','files','../services/FileServices/DeleteAllService','-mainchannel','uploadMedias','__esModule','apply','Arquivos\x20atualizados','head','../services/FileServices/UpdateService','../errors/AppError','toString','profile','status','admin','body','findOne','__importDefault','query','isArray','params','lodash','../libs/socket'];a18_0xc5ec=function(){return _0x4ab4d9;};return a18_0xc5ec();}const list=async(_0x359455,_0x37de44)=>{const _0x3db424=a18_0x420303,{searchParam:_0x446f63}=_0x359455[_0x3db424(0x108)],{companyId:_0x55b480}=_0x359455[_0x3db424(0x10d)],_0x241b02=await(0x0,SimpleListService_1[_0x3db424(0x11d)])({'searchParam':_0x446f63,'companyId':_0x55b480});return _0x37de44[_0x3db424(0x121)](_0x241b02);};exports[a18_0x420303(0x118)]=list;