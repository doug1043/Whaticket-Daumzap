const a19_0x29888a=a19_0x1fb5;(function(_0x4716f5,_0x3206f7){const _0x5a3392=a19_0x1fb5,_0x3ae65c=_0x4716f5();while(!![]){try{const _0x3d7ced=-parseInt(_0x5a3392(0xbb))/0x1*(-parseInt(_0x5a3392(0x92))/0x2)+-parseInt(_0x5a3392(0xb7))/0x3+parseInt(_0x5a3392(0xa5))/0x4+parseInt(_0x5a3392(0xbe))/0x5*(parseInt(_0x5a3392(0xa2))/0x6)+parseInt(_0x5a3392(0xa9))/0x7+-parseInt(_0x5a3392(0xb0))/0x8*(parseInt(_0x5a3392(0xa3))/0x9)+parseInt(_0x5a3392(0x93))/0xa*(parseInt(_0x5a3392(0xac))/0xb);if(_0x3d7ced===_0x3206f7)break;else _0x3ae65c['push'](_0x3ae65c['shift']());}catch(_0x2a959b){_0x3ae65c['push'](_0x3ae65c['shift']());}}}(a19_0xf951,0x91f13));const a19_0x4403a8=(function(){let _0x2be8f8=!![];return function(_0x1402df,_0x4efff8){const _0xf81c04=_0x2be8f8?function(){const _0x3031d7=a19_0x1fb5;if(_0x4efff8){const _0x512b30=_0x4efff8[_0x3031d7(0xc3)](_0x1402df,arguments);return _0x4efff8=null,_0x512b30;}}:function(){};return _0x2be8f8=![],_0xf81c04;};}()),a19_0x24d7e8=a19_0x4403a8(this,function(){const _0x3dc206=a19_0x1fb5;return a19_0x24d7e8[_0x3dc206(0x9d)]()['search'](_0x3dc206(0xc0))[_0x3dc206(0x9d)]()[_0x3dc206(0x9f)](a19_0x24d7e8)[_0x3dc206(0xa1)]('(((.+)+)+)+$');});a19_0x24d7e8();'use strict';var __importDefault=this&&this[a19_0x29888a(0xa8)]||function(_0xeb0b5d){const _0x58c1c5=a19_0x29888a;return _0xeb0b5d&&_0xeb0b5d[_0x58c1c5(0xbd)]?_0xeb0b5d:{'default':_0xeb0b5d};};Object[a19_0x29888a(0xb6)](exports,a19_0x29888a(0xbd),{'value':!![]}),exports[a19_0x29888a(0xb8)]=exports['removeAll']=exports['remove']=exports[a19_0x29888a(0xb4)]=exports[a19_0x29888a(0xaf)]=exports[a19_0x29888a(0xba)]=exports[a19_0x29888a(0x94)]=exports[a19_0x29888a(0xb5)]=void 0x0;const socket_1=require(a19_0x29888a(0xae)),AppError_1=__importDefault(require(a19_0x29888a(0xc8))),lodash_1=require(a19_0x29888a(0xad)),CreateService_1=__importDefault(require(a19_0x29888a(0xc7))),ListService_1=__importDefault(require(a19_0x29888a(0xc9))),UpdateService_1=__importDefault(require(a19_0x29888a(0xb1))),ShowService_1=__importDefault(require(a19_0x29888a(0x95))),DeleteService_1=__importDefault(require(a19_0x29888a(0xa4))),SimpleListService_1=__importDefault(require('../services/FileServices/SimpleListService')),DeleteAllService_1=__importDefault(require(a19_0x29888a(0xc4))),FilesOptions_1=__importDefault(require('../models/FilesOptions')),index=async(_0x5e60c9,_0x1c2c56)=>{const _0x44ad7c=a19_0x29888a,{pageNumber:_0x4a94d1,searchParam:_0x10c5a8}=_0x5e60c9['query'],{companyId:_0xcb0010}=_0x5e60c9[_0x44ad7c(0x8f)],{files:_0x38f27f,count:_0x3b5da9,hasMore:_0x334234}=await(0x0,ListService_1[_0x44ad7c(0x8e)])({'searchParam':_0x10c5a8,'pageNumber':_0x4a94d1,'companyId':_0xcb0010});return _0x1c2c56[_0x44ad7c(0x99)]({'files':_0x38f27f,'count':_0x3b5da9,'hasMore':_0x334234});};exports['index']=index;const store=async(_0x1d18f0,_0x1eb58c)=>{const _0x3e55a7=a19_0x29888a,{name:_0x13ff00,message:_0x505668,options:_0x49a61c}=_0x1d18f0[_0x3e55a7(0x90)],{companyId:_0x2fb971}=_0x1d18f0[_0x3e55a7(0x8f)],_0x5c18a5=await(0x0,CreateService_1[_0x3e55a7(0x8e)])({'name':_0x13ff00,'message':_0x505668,'options':_0x49a61c,'companyId':_0x2fb971}),_0x23502a=(0x0,socket_1[_0x3e55a7(0x98)])();return _0x23502a['to'](_0x3e55a7(0x8d)+_0x2fb971+'-mainchannel')['emit']('company'+_0x2fb971+_0x3e55a7(0x9a),{'action':_0x3e55a7(0xb9),'fileList':_0x5c18a5}),_0x1eb58c[_0x3e55a7(0xab)](0xc8)[_0x3e55a7(0x99)](_0x5c18a5);};exports[a19_0x29888a(0x94)]=store;function a19_0x1fb5(_0x1da262,_0x545c5c){const _0x3e22cc=a19_0xf951();return a19_0x1fb5=function(_0x24d7e8,_0x4403a8){_0x24d7e8=_0x24d7e8-0x8c;let _0xf95132=_0x3e22cc[_0x24d7e8];return _0xf95132;},a19_0x1fb5(_0x1da262,_0x545c5c);}const show=async(_0x151340,_0x152ed9)=>{const _0x380eb8=a19_0x29888a,{fileId:_0x2213f7}=_0x151340['params'],{companyId:_0x596a15}=_0x151340[_0x380eb8(0x8f)],_0x3b8620=await(0x0,ShowService_1[_0x380eb8(0x8e)])(_0x2213f7,_0x596a15);return _0x152ed9[_0x380eb8(0xab)](0xc8)[_0x380eb8(0x99)](_0x3b8620);};exports[a19_0x29888a(0xba)]=show;function a19_0xf951(){const _0x2b8d10=['apply','../services/FileServices/DeleteAllService','query','params','../services/FileServices/CreateService','../errors/AppError','../services/FileServices/ListService','profile','company-','default','user','body','ERR_NO_PERMISSION','3324QJhGnX','1710vRhaZI','store','../services/FileServices/ShowService','entries','remove','getIO','json','-file','head','-mainchannel','toString','message','constructor','replace','search','112734EahImn','2681919eYjGSo','../services/FileServices/DeleteService','48956cymtNA','admin','filename','__importDefault','3069738bsQMaG','findOne','status','39413mFESgh','lodash','../libs/socket','uploadMedias','32qRfKER','../services/FileServices/UpdateService','delete','emit','update','index','defineProperty','714570vGnJCp','list','create','show','569FTLXEt','send','__esModule','5mtSnWE','removeAll','(((.+)+)+)+$','isArray','Arquivos\x20atualizados'];a19_0xf951=function(){return _0x2b8d10;};return a19_0xf951();}const uploadMedias=async(_0x3d3493,_0x2742f6)=>{const _0x11a08c=a19_0x29888a,{fileId:_0x4d67cb,id:_0x43a3af,mediaType:_0x56d757}=_0x3d3493[_0x11a08c(0x90)],_0x5715b9=_0x3d3493['files'],_0xc82884=(0x0,lodash_1[_0x11a08c(0x9b)])(_0x5715b9);try{let _0x35e64b;if(_0x5715b9['length']>0x0)for(const [_0x53ad14,_0x25840e]of _0x5715b9[_0x11a08c(0x96)]()){_0x35e64b=await FilesOptions_1['default'][_0x11a08c(0xaa)]({'where':{'fileId':_0x4d67cb,'id':Array[_0x11a08c(0xc1)](_0x43a3af)?_0x43a3af[_0x53ad14]:_0x43a3af}}),_0x35e64b['update']({'path':_0x25840e[_0x11a08c(0xa7)][_0x11a08c(0xa0)]('/','-'),'mediaType':Array[_0x11a08c(0xc1)](_0x56d757)?_0x56d757[_0x53ad14]:_0x56d757});}return _0x2742f6[_0x11a08c(0xbc)]({'mensagem':_0x11a08c(0xc2)});}catch(_0x4df966){throw new AppError_1[(_0x11a08c(0x8e))](_0x4df966[_0x11a08c(0x9e)]);}};exports['uploadMedias']=uploadMedias;const update=async(_0x31535b,_0x115de3)=>{const _0x8e927d=a19_0x29888a;if(_0x31535b[_0x8e927d(0x8f)][_0x8e927d(0x8c)]!==_0x8e927d(0xa6))throw new AppError_1[(_0x8e927d(0x8e))](_0x8e927d(0x91),0x193);const {fileId:_0x467f9d}=_0x31535b['params'],_0x4c66d8=_0x31535b[_0x8e927d(0x90)],{companyId:_0x3dac9a}=_0x31535b['user'],_0x5ddc8b=await(0x0,UpdateService_1[_0x8e927d(0x8e)])({'fileData':_0x4c66d8,'id':_0x467f9d,'companyId':_0x3dac9a}),_0x1f24fe=(0x0,socket_1[_0x8e927d(0x98)])();return _0x1f24fe['to']('company-'+_0x3dac9a+_0x8e927d(0x9c))[_0x8e927d(0xb3)]('company'+_0x3dac9a+'-file',{'action':'update','fileList':_0x5ddc8b}),_0x115de3['status'](0xc8)[_0x8e927d(0x99)](_0x5ddc8b);};exports[a19_0x29888a(0xb4)]=update;const remove=async(_0x459ab6,_0x547e1f)=>{const _0x3513ad=a19_0x29888a,{fileId:_0x4fe5e1}=_0x459ab6[_0x3513ad(0xc6)],{companyId:_0x484a08}=_0x459ab6['user'];await(0x0,DeleteService_1['default'])(_0x4fe5e1,_0x484a08);const _0x2b7158=(0x0,socket_1[_0x3513ad(0x98)])();return _0x2b7158['to'](_0x3513ad(0x8d)+_0x484a08+_0x3513ad(0x9c))['emit']('company'+_0x484a08+_0x3513ad(0x9a),{'action':_0x3513ad(0xb2),'fileId':_0x4fe5e1}),_0x547e1f[_0x3513ad(0xab)](0xc8)[_0x3513ad(0x99)]({'message':'File\x20List\x20deleted'});};exports[a19_0x29888a(0x97)]=remove;const removeAll=async(_0x5afb96,_0x3d47c4)=>{const _0x2f9cdd=a19_0x29888a,{companyId:_0x4af53c}=_0x5afb96['user'];return await(0x0,DeleteAllService_1['default'])(_0x4af53c),_0x3d47c4[_0x2f9cdd(0xbc)]();};exports[a19_0x29888a(0xbf)]=removeAll;const list=async(_0x127fff,_0x1ade54)=>{const _0x1e8415=a19_0x29888a,{searchParam:_0x53cebd}=_0x127fff[_0x1e8415(0xc5)],{companyId:_0x131908}=_0x127fff[_0x1e8415(0x8f)],_0x4db63f=await(0x0,SimpleListService_1[_0x1e8415(0x8e)])({'searchParam':_0x53cebd,'companyId':_0x131908});return _0x1ade54[_0x1e8415(0x99)](_0x4db63f);};exports[a19_0x29888a(0xb8)]=list;