const a21_0x5c9f73=a21_0x3b90;(function(_0x1c8bb9,_0x1671ab){const _0x2a01d4=a21_0x3b90,_0x120a46=_0x1c8bb9();while(!![]){try{const _0x27bd96=-parseInt(_0x2a01d4(0x1eb))/0x1+-parseInt(_0x2a01d4(0x1e4))/0x2*(-parseInt(_0x2a01d4(0x1fb))/0x3)+-parseInt(_0x2a01d4(0x1da))/0x4*(parseInt(_0x2a01d4(0x1be))/0x5)+-parseInt(_0x2a01d4(0x1d8))/0x6*(-parseInt(_0x2a01d4(0x1ca))/0x7)+-parseInt(_0x2a01d4(0x1d4))/0x8+parseInt(_0x2a01d4(0x1dd))/0x9*(-parseInt(_0x2a01d4(0x1e5))/0xa)+-parseInt(_0x2a01d4(0x1f3))/0xb*(-parseInt(_0x2a01d4(0x1e7))/0xc);if(_0x27bd96===_0x1671ab)break;else _0x120a46['push'](_0x120a46['shift']());}catch(_0x1c3676){_0x120a46['push'](_0x120a46['shift']());}}}(a21_0x2145,0x467e9));const a21_0x3d04b1=(function(){let _0x32968a=!![];return function(_0x2d2934,_0x4c68b0){const _0x30d848=_0x32968a?function(){const _0x267479=a21_0x3b90;if(_0x4c68b0){const _0x2ea8e3=_0x4c68b0[_0x267479(0x1d6)](_0x2d2934,arguments);return _0x4c68b0=null,_0x2ea8e3;}}:function(){};return _0x32968a=![],_0x30d848;};}()),a21_0x22ff00=a21_0x3d04b1(this,function(){const _0x2ffdab=a21_0x3b90;return a21_0x22ff00[_0x2ffdab(0x1f4)]()['search'](_0x2ffdab(0x1c6))['toString']()[_0x2ffdab(0x1c3)](a21_0x22ff00)[_0x2ffdab(0x1de)](_0x2ffdab(0x1c6));});a21_0x22ff00();'use strict';var __importDefault=this&&this[a21_0x5c9f73(0x1ed)]||function(_0x3ff5ac){const _0xbb4b9d=a21_0x5c9f73;return _0x3ff5ac&&_0x3ff5ac[_0xbb4b9d(0x1ce)]?_0x3ff5ac:{'default':_0x3ff5ac};};Object['defineProperty'](exports,a21_0x5c9f73(0x1ce),{'value':!![]}),exports[a21_0x5c9f73(0x1c4)]=exports['removeAll']=exports[a21_0x5c9f73(0x1ea)]=exports[a21_0x5c9f73(0x1f1)]=exports['uploadMedias']=exports[a21_0x5c9f73(0x1e8)]=exports[a21_0x5c9f73(0x1e9)]=exports[a21_0x5c9f73(0x1e3)]=void 0x0;const socket_1=require(a21_0x5c9f73(0x1dc)),AppError_1=__importDefault(require(a21_0x5c9f73(0x1c5))),lodash_1=require(a21_0x5c9f73(0x1ef)),CreateService_1=__importDefault(require(a21_0x5c9f73(0x1e6))),ListService_1=__importDefault(require(a21_0x5c9f73(0x1c7))),UpdateService_1=__importDefault(require(a21_0x5c9f73(0x1f8))),ShowService_1=__importDefault(require(a21_0x5c9f73(0x1d1))),DeleteService_1=__importDefault(require(a21_0x5c9f73(0x1ee))),SimpleListService_1=__importDefault(require(a21_0x5c9f73(0x1bf))),DeleteAllService_1=__importDefault(require(a21_0x5c9f73(0x1e1))),FilesOptions_1=__importDefault(require(a21_0x5c9f73(0x1d9))),StorageService_1=__importDefault(require(a21_0x5c9f73(0x1e2))),index=async(_0x57d902,_0x5b8df2)=>{const _0x52ac10=a21_0x5c9f73,{pageNumber:_0x37e407,searchParam:_0x4b82ad}=_0x57d902[_0x52ac10(0x1df)],{companyId:_0x2169ad}=_0x57d902[_0x52ac10(0x1ec)],{files:_0x2c6566,count:_0x40c07f,hasMore:_0x3ed6df}=await(0x0,ListService_1[_0x52ac10(0x1e0)])({'searchParam':_0x4b82ad,'pageNumber':_0x37e407,'companyId':_0x2169ad});return _0x5b8df2[_0x52ac10(0x200)]({'files':_0x2c6566,'count':_0x40c07f,'hasMore':_0x3ed6df});};exports['index']=index;const store=async(_0x5500b1,_0x24a049)=>{const _0xc5c02e=a21_0x5c9f73,{name:_0x4e6323,message:_0x466f95,options:_0x2d82af}=_0x5500b1[_0xc5c02e(0x1fe)],{companyId:_0x238339}=_0x5500b1[_0xc5c02e(0x1ec)],_0x19e676=await(0x0,CreateService_1['default'])({'name':_0x4e6323,'message':_0x466f95,'options':_0x2d82af,'companyId':_0x238339}),_0x203695=(0x0,socket_1['getIO'])();return _0x203695['to']('company-'+_0x238339+_0xc5c02e(0x1f7))[_0xc5c02e(0x1cc)](_0xc5c02e(0x1db)+_0x238339+'-file',{'action':'create','fileList':_0x19e676}),_0x24a049[_0xc5c02e(0x1f6)](0xc8)[_0xc5c02e(0x200)](_0x19e676);};exports['store']=store;const show=async(_0x1971d9,_0x41b7dd)=>{const _0x4d9a60=a21_0x5c9f73,{fileId:_0x1eacd3}=_0x1971d9[_0x4d9a60(0x1cd)],{companyId:_0x1ae6a4}=_0x1971d9[_0x4d9a60(0x1ec)],_0x5a98bb=await(0x0,ShowService_1[_0x4d9a60(0x1e0)])(_0x1eacd3,_0x1ae6a4);return _0x41b7dd[_0x4d9a60(0x1f6)](0xc8)[_0x4d9a60(0x200)](_0x5a98bb);};function a21_0x2145(){const _0x3214c5=['../services/FileServices/ShowService','files','message','4569264ubsLoX','send','apply','findOne','22878zibQKv','../models/FilesOptions','57208fOtAEj','company','../libs/socket','1944eQdTmX','search','query','default','../services/FileServices/DeleteAllService','../services/StorageService/StorageService','index','562070MeLXOY','13840nbUABi','../services/FileServices/CreateService','12lbOjMY','show','store','remove','264287yxtNjM','user','__importDefault','../services/FileServices/DeleteService','lodash','head','update','getIO','13990009timUSP','toString','isArray','status','-mainchannel','../services/FileServices/UpdateService','path','uploadMedias','3yYuOye','company-','replace','body','profile','json','length','120HxflHb','../services/FileServices/SimpleListService','filename','admin','mimetype','constructor','list','../errors/AppError','(((.+)+)+)+$','../services/FileServices/ListService','Arquivos\x20atualizados','File\x20List\x20deleted','392wsTzGj','uploads','emit','params','__esModule','removeAll','delete'];a21_0x2145=function(){return _0x3214c5;};return a21_0x2145();}exports['show']=show;const uploadMedias=async(_0xa97a7e,_0x418909)=>{const _0xfe6674=a21_0x5c9f73,{fileId:_0x2b5475,id:_0x2521bf,mediaType:_0x294eb5}=_0xa97a7e[_0xfe6674(0x1fe)],{companyId:_0x5bb08b}=_0xa97a7e[_0xfe6674(0x1ec)],_0x4ea01b=_0xa97a7e[_0xfe6674(0x1d2)],_0x265cc4=(0x0,lodash_1[_0xfe6674(0x1f0)])(_0x4ea01b);try{let _0x48104d;if(_0x4ea01b[_0xfe6674(0x201)]>0x0)for(const [_0x5da8ed,_0x3aeeb7]of _0x4ea01b['entries']()){const {url:_0x2c3aa9}=await StorageService_1['default']['uploadFile'](_0x5bb08b,_0xfe6674(0x1cb),_0x3aeeb7[_0xfe6674(0x1c0)][_0xfe6674(0x1fd)]('/','-'),_0x3aeeb7[_0xfe6674(0x1f9)],_0x3aeeb7[_0xfe6674(0x1c2)]);_0x48104d=await FilesOptions_1[_0xfe6674(0x1e0)][_0xfe6674(0x1d7)]({'where':{'fileId':_0x2b5475,'id':Array[_0xfe6674(0x1f5)](_0x2521bf)?_0x2521bf[_0x5da8ed]:_0x2521bf}}),_0x48104d[_0xfe6674(0x1f1)]({'path':_0x2c3aa9,'mediaType':Array['isArray'](_0x294eb5)?_0x294eb5[_0x5da8ed]:_0x294eb5});}return _0x418909['send']({'mensagem':_0xfe6674(0x1c8)});}catch(_0x148adb){throw new AppError_1[(_0xfe6674(0x1e0))](_0x148adb[_0xfe6674(0x1d3)]);}};exports[a21_0x5c9f73(0x1fa)]=uploadMedias;const update=async(_0x4b5d19,_0x1c0e51)=>{const _0x4d8536=a21_0x5c9f73;if(_0x4b5d19[_0x4d8536(0x1ec)][_0x4d8536(0x1ff)]!==_0x4d8536(0x1c1))throw new AppError_1['default']('ERR_NO_PERMISSION',0x193);const {fileId:_0x550d9f}=_0x4b5d19[_0x4d8536(0x1cd)],_0x44e93b=_0x4b5d19[_0x4d8536(0x1fe)],{companyId:_0x4336d0}=_0x4b5d19[_0x4d8536(0x1ec)],_0x253cd4=await(0x0,UpdateService_1['default'])({'fileData':_0x44e93b,'id':_0x550d9f,'companyId':_0x4336d0}),_0x22e6f3=(0x0,socket_1[_0x4d8536(0x1f2)])();return _0x22e6f3['to'](_0x4d8536(0x1fc)+_0x4336d0+'-mainchannel')[_0x4d8536(0x1cc)](_0x4d8536(0x1db)+_0x4336d0+'-file',{'action':_0x4d8536(0x1f1),'fileList':_0x253cd4}),_0x1c0e51[_0x4d8536(0x1f6)](0xc8)['json'](_0x253cd4);};exports['update']=update;const remove=async(_0x4fac79,_0x4f0bf2)=>{const _0x5c50c0=a21_0x5c9f73,{fileId:_0x1a8d01}=_0x4fac79[_0x5c50c0(0x1cd)],{companyId:_0x4ab0c9}=_0x4fac79[_0x5c50c0(0x1ec)];await(0x0,DeleteService_1['default'])(_0x1a8d01,_0x4ab0c9);const _0x5e9093=(0x0,socket_1[_0x5c50c0(0x1f2)])();return _0x5e9093['to']('company-'+_0x4ab0c9+_0x5c50c0(0x1f7))[_0x5c50c0(0x1cc)](_0x5c50c0(0x1db)+_0x4ab0c9+'-file',{'action':_0x5c50c0(0x1d0),'fileId':_0x1a8d01}),_0x4f0bf2[_0x5c50c0(0x1f6)](0xc8)[_0x5c50c0(0x200)]({'message':_0x5c50c0(0x1c9)});};exports['remove']=remove;function a21_0x3b90(_0x35204f,_0x632f1){const _0x30fe32=a21_0x2145();return a21_0x3b90=function(_0x22ff00,_0x3d04b1){_0x22ff00=_0x22ff00-0x1be;let _0x21458c=_0x30fe32[_0x22ff00];return _0x21458c;},a21_0x3b90(_0x35204f,_0x632f1);}const removeAll=async(_0x31f786,_0x260179)=>{const _0x5687b1=a21_0x5c9f73,{companyId:_0x35096a}=_0x31f786[_0x5687b1(0x1ec)];return await(0x0,DeleteAllService_1[_0x5687b1(0x1e0)])(_0x35096a),_0x260179[_0x5687b1(0x1d5)]();};exports[a21_0x5c9f73(0x1cf)]=removeAll;const list=async(_0x13e821,_0x54cb6a)=>{const _0x36c977=a21_0x5c9f73,{searchParam:_0x3e8c12}=_0x13e821[_0x36c977(0x1df)],{companyId:_0x51c975}=_0x13e821[_0x36c977(0x1ec)],_0x10a6ef=await(0x0,SimpleListService_1[_0x36c977(0x1e0)])({'searchParam':_0x3e8c12,'companyId':_0x51c975});return _0x54cb6a['json'](_0x10a6ef);};exports[a21_0x5c9f73(0x1c4)]=list;