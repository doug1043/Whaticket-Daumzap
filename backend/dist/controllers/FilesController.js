const a18_0xd86175=a18_0x2de7;(function(_0x2072a0,_0x49038a){const _0x48cf1b=a18_0x2de7,_0x1cb14e=_0x2072a0();while(!![]){try{const _0x56e12b=parseInt(_0x48cf1b(0x197))/0x1*(parseInt(_0x48cf1b(0x19d))/0x2)+-parseInt(_0x48cf1b(0x19a))/0x3+parseInt(_0x48cf1b(0x1b2))/0x4+-parseInt(_0x48cf1b(0x18f))/0x5+parseInt(_0x48cf1b(0x194))/0x6*(parseInt(_0x48cf1b(0x199))/0x7)+parseInt(_0x48cf1b(0x1a8))/0x8*(parseInt(_0x48cf1b(0x1a9))/0x9)+-parseInt(_0x48cf1b(0x1bd))/0xa*(parseInt(_0x48cf1b(0x1aa))/0xb);if(_0x56e12b===_0x49038a)break;else _0x1cb14e['push'](_0x1cb14e['shift']());}catch(_0xda615b){_0x1cb14e['push'](_0x1cb14e['shift']());}}}(a18_0x3b88,0x6a50f));const a18_0x121847=(function(){let _0xa38c99=!![];return function(_0x303774,_0x3d6da2){const _0x2a8d21=_0xa38c99?function(){const _0x2c5156=a18_0x2de7;if(_0x3d6da2){const _0x1f15d2=_0x3d6da2[_0x2c5156(0x1a1)](_0x303774,arguments);return _0x3d6da2=null,_0x1f15d2;}}:function(){};return _0xa38c99=![],_0x2a8d21;};}()),a18_0x1a1f93=a18_0x121847(this,function(){const _0x1460e6=a18_0x2de7;return a18_0x1a1f93['toString']()[_0x1460e6(0x19b)](_0x1460e6(0x198))[_0x1460e6(0x1ab)]()[_0x1460e6(0x1b4)](a18_0x1a1f93)['search']('(((.+)+)+)+$');});a18_0x1a1f93();'use strict';var __importDefault=this&&this[a18_0xd86175(0x1bf)]||function(_0x258f5f){const _0x4b2671=a18_0xd86175;return _0x258f5f&&_0x258f5f[_0x4b2671(0x18a)]?_0x258f5f:{'default':_0x258f5f};};Object[a18_0xd86175(0x1a6)](exports,a18_0xd86175(0x18a),{'value':!![]}),exports[a18_0xd86175(0x18b)]=exports[a18_0xd86175(0x1a4)]=exports[a18_0xd86175(0x18d)]=exports[a18_0xd86175(0x191)]=exports[a18_0xd86175(0x189)]=exports['show']=exports[a18_0xd86175(0x192)]=exports[a18_0xd86175(0x19f)]=void 0x0;const socket_1=require(a18_0xd86175(0x1b1)),AppError_1=__importDefault(require(a18_0xd86175(0x196))),lodash_1=require('lodash'),CreateService_1=__importDefault(require('../services/FileServices/CreateService')),ListService_1=__importDefault(require(a18_0xd86175(0x1b5))),UpdateService_1=__importDefault(require(a18_0xd86175(0x1b0))),ShowService_1=__importDefault(require('../services/FileServices/ShowService')),DeleteService_1=__importDefault(require('../services/FileServices/DeleteService')),SimpleListService_1=__importDefault(require(a18_0xd86175(0x1bc))),DeleteAllService_1=__importDefault(require(a18_0xd86175(0x1a7))),FilesOptions_1=__importDefault(require(a18_0xd86175(0x1b7))),index=async(_0x582405,_0x2fdb30)=>{const _0xe89a9d=a18_0xd86175,{pageNumber:_0x27840c,searchParam:_0x27e5f0}=_0x582405[_0xe89a9d(0x1af)],{companyId:_0x50eaf5}=_0x582405[_0xe89a9d(0x190)],{files:_0x3a0c57,count:_0x402c5a,hasMore:_0x5d045f}=await(0x0,ListService_1[_0xe89a9d(0x1a3)])({'searchParam':_0x27e5f0,'pageNumber':_0x27840c,'companyId':_0x50eaf5});return _0x2fdb30['json']({'files':_0x3a0c57,'count':_0x402c5a,'hasMore':_0x5d045f});};exports[a18_0xd86175(0x19f)]=index;const store=async(_0x563a42,_0x2ab8bd)=>{const _0x167875=a18_0xd86175,{name:_0x5a0fab,message:_0x50f1cc,options:_0x219c7a}=_0x563a42[_0x167875(0x1a5)],{companyId:_0x14f709}=_0x563a42['user'],_0x551180=await(0x0,CreateService_1[_0x167875(0x1a3)])({'name':_0x5a0fab,'message':_0x50f1cc,'options':_0x219c7a,'companyId':_0x14f709}),_0x2f5424=(0x0,socket_1[_0x167875(0x1b6)])();return _0x2f5424['to'](_0x167875(0x1ba)+_0x14f709+_0x167875(0x18e))[_0x167875(0x1be)]('company'+_0x14f709+_0x167875(0x1b9),{'action':'create','fileList':_0x551180}),_0x2ab8bd[_0x167875(0x1ac)](0xc8)[_0x167875(0x1b8)](_0x551180);};function a18_0x2de7(_0x1004ec,_0x3006dc){const _0x952339=a18_0x3b88();return a18_0x2de7=function(_0x1a1f93,_0x121847){_0x1a1f93=_0x1a1f93-0x187;let _0x3b8817=_0x952339[_0x1a1f93];return _0x3b8817;},a18_0x2de7(_0x1004ec,_0x3006dc);}exports[a18_0xd86175(0x192)]=store;const show=async(_0x265a8d,_0x474abe)=>{const _0x442428=a18_0xd86175,{fileId:_0x4c5953}=_0x265a8d[_0x442428(0x1bb)],{companyId:_0x201fc1}=_0x265a8d[_0x442428(0x190)],_0x4ff75f=await(0x0,ShowService_1[_0x442428(0x1a3)])(_0x4c5953,_0x201fc1);return _0x474abe[_0x442428(0x1ac)](0xc8)[_0x442428(0x1b8)](_0x4ff75f);};exports[a18_0xd86175(0x1c0)]=show;const uploadMedias=async(_0x1be8d4,_0x94116)=>{const _0x5b2dfb=a18_0xd86175,{fileId:_0x32b9c4,id:_0x5abb17,mediaType:_0x488bbb}=_0x1be8d4[_0x5b2dfb(0x1a5)],_0x2c25cf=_0x1be8d4[_0x5b2dfb(0x1b3)],_0x97b162=(0x0,lodash_1[_0x5b2dfb(0x19e)])(_0x2c25cf);try{let _0x1bad67;if(_0x2c25cf[_0x5b2dfb(0x187)]>0x0)for(const [_0x2e77d4,_0xe7afee]of _0x2c25cf['entries']()){_0x1bad67=await FilesOptions_1[_0x5b2dfb(0x1a3)][_0x5b2dfb(0x18c)]({'where':{'fileId':_0x32b9c4,'id':Array['isArray'](_0x5abb17)?_0x5abb17[_0x2e77d4]:_0x5abb17}}),_0x1bad67[_0x5b2dfb(0x191)]({'path':_0xe7afee['filename'][_0x5b2dfb(0x19c)]('/','-'),'mediaType':Array[_0x5b2dfb(0x193)](_0x488bbb)?_0x488bbb[_0x2e77d4]:_0x488bbb});}return _0x94116['send']({'mensagem':_0x5b2dfb(0x1a0)});}catch(_0x1213d0){throw new AppError_1[(_0x5b2dfb(0x1a3))](_0x1213d0[_0x5b2dfb(0x188)]);}};exports[a18_0xd86175(0x189)]=uploadMedias;const update=async(_0x66006f,_0x2e1c4a)=>{const _0x246d5c=a18_0xd86175;if(_0x66006f[_0x246d5c(0x190)]['profile']!==_0x246d5c(0x1ad))throw new AppError_1[(_0x246d5c(0x1a3))]('ERR_NO_PERMISSION',0x193);const {fileId:_0x1f1833}=_0x66006f[_0x246d5c(0x1bb)],_0x2ae6df=_0x66006f['body'],{companyId:_0x500170}=_0x66006f[_0x246d5c(0x190)],_0x516bc3=await(0x0,UpdateService_1[_0x246d5c(0x1a3)])({'fileData':_0x2ae6df,'id':_0x1f1833,'companyId':_0x500170}),_0x560f09=(0x0,socket_1['getIO'])();return _0x560f09['to'](_0x246d5c(0x1ba)+_0x500170+_0x246d5c(0x18e))[_0x246d5c(0x1be)](_0x246d5c(0x1ae)+_0x500170+_0x246d5c(0x1b9),{'action':_0x246d5c(0x191),'fileList':_0x516bc3}),_0x2e1c4a[_0x246d5c(0x1ac)](0xc8)[_0x246d5c(0x1b8)](_0x516bc3);};exports['update']=update;const remove=async(_0x40a9da,_0x530d25)=>{const _0x4e015f=a18_0xd86175,{fileId:_0x11b1b1}=_0x40a9da[_0x4e015f(0x1bb)],{companyId:_0xddf901}=_0x40a9da['user'];await(0x0,DeleteService_1[_0x4e015f(0x1a3)])(_0x11b1b1,_0xddf901);const _0x179cdf=(0x0,socket_1[_0x4e015f(0x1b6)])();return _0x179cdf['to'](_0x4e015f(0x1ba)+_0xddf901+'-mainchannel')['emit']('company'+_0xddf901+_0x4e015f(0x1b9),{'action':'delete','fileId':_0x11b1b1}),_0x530d25[_0x4e015f(0x1ac)](0xc8)[_0x4e015f(0x1b8)]({'message':_0x4e015f(0x195)});};exports['remove']=remove;function a18_0x3b88(){const _0x1e83da=['__importDefault','show','length','message','uploadMedias','__esModule','list','findOne','remove','-mainchannel','1403400WOOIEM','user','update','store','isArray','25656kehQrV','File\x20List\x20deleted','../errors/AppError','1FuWtvC','(((.+)+)+)+$','938cRLCAV','303747xIRaDu','search','replace','1383544YTMWzn','head','index','Arquivos\x20atualizados','apply','send','default','removeAll','body','defineProperty','../services/FileServices/DeleteAllService','112RtySfa','526446ICwHxx','472637kkCDFq','toString','status','admin','company','query','../services/FileServices/UpdateService','../libs/socket','3012708fgicqS','files','constructor','../services/FileServices/ListService','getIO','../models/FilesOptions','json','-file','company-','params','../services/FileServices/SimpleListService','470nBfjqS','emit'];a18_0x3b88=function(){return _0x1e83da;};return a18_0x3b88();}const removeAll=async(_0x9a0935,_0x1aea64)=>{const _0x23ca14=a18_0xd86175,{companyId:_0x191ce5}=_0x9a0935['user'];return await(0x0,DeleteAllService_1[_0x23ca14(0x1a3)])(_0x191ce5),_0x1aea64[_0x23ca14(0x1a2)]();};exports[a18_0xd86175(0x1a4)]=removeAll;const list=async(_0x1830d8,_0x12b415)=>{const _0x54f4bd=a18_0xd86175,{searchParam:_0x23333e}=_0x1830d8['query'],{companyId:_0x196699}=_0x1830d8[_0x54f4bd(0x190)],_0x25574e=await(0x0,SimpleListService_1[_0x54f4bd(0x1a3)])({'searchParam':_0x23333e,'companyId':_0x196699});return _0x12b415[_0x54f4bd(0x1b8)](_0x25574e);};exports[a18_0xd86175(0x18b)]=list;