const a19_0x2458fe=a19_0x466e;(function(_0x1c5c65,_0x178f3e){const _0x3291b1=a19_0x466e,_0x19a8dd=_0x1c5c65();while(!![]){try{const _0x56f5c5=parseInt(_0x3291b1(0x106))/0x1*(-parseInt(_0x3291b1(0xf0))/0x2)+-parseInt(_0x3291b1(0xec))/0x3*(-parseInt(_0x3291b1(0xf2))/0x4)+-parseInt(_0x3291b1(0xe5))/0x5*(parseInt(_0x3291b1(0xf6))/0x6)+parseInt(_0x3291b1(0x105))/0x7+parseInt(_0x3291b1(0xe0))/0x8+-parseInt(_0x3291b1(0xf4))/0x9*(-parseInt(_0x3291b1(0x10c))/0xa)+parseInt(_0x3291b1(0x102))/0xb*(-parseInt(_0x3291b1(0xfb))/0xc);if(_0x56f5c5===_0x178f3e)break;else _0x19a8dd['push'](_0x19a8dd['shift']());}catch(_0x4f5706){_0x19a8dd['push'](_0x19a8dd['shift']());}}}(a19_0x8233,0x1d219));function a19_0x466e(_0x2e4dd5,_0x514b68){const _0x10997e=a19_0x8233();return a19_0x466e=function(_0x10e8c6,_0x95e9f9){_0x10e8c6=_0x10e8c6-0xdc;let _0x8233ef=_0x10997e[_0x10e8c6];return _0x8233ef;},a19_0x466e(_0x2e4dd5,_0x514b68);}const a19_0x95e9f9=(function(){let _0x51fe46=!![];return function(_0x39c41e,_0x2daca6){const _0x293675=_0x51fe46?function(){if(_0x2daca6){const _0x3ec673=_0x2daca6['apply'](_0x39c41e,arguments);return _0x2daca6=null,_0x3ec673;}}:function(){};return _0x51fe46=![],_0x293675;};}()),a19_0x10e8c6=a19_0x95e9f9(this,function(){const _0x1b4af5=a19_0x466e;return a19_0x10e8c6[_0x1b4af5(0xfa)]()[_0x1b4af5(0x10a)](_0x1b4af5(0xf1))[_0x1b4af5(0xfa)]()[_0x1b4af5(0xfe)](a19_0x10e8c6)[_0x1b4af5(0x10a)](_0x1b4af5(0xf1));});a19_0x10e8c6();'use strict';var __importDefault=this&&this[a19_0x2458fe(0xf7)]||function(_0x2a8338){return _0x2a8338&&_0x2a8338['__esModule']?_0x2a8338:{'default':_0x2a8338};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a19_0x2458fe(0x110)]=exports[a19_0x2458fe(0xef)]=exports[a19_0x2458fe(0xe1)]=exports['update']=exports['uploadMedias']=exports['show']=exports[a19_0x2458fe(0xff)]=exports[a19_0x2458fe(0x104)]=void 0x0;const socket_1=require(a19_0x2458fe(0xdf)),AppError_1=__importDefault(require('../errors/AppError')),lodash_1=require(a19_0x2458fe(0xea)),CreateService_1=__importDefault(require(a19_0x2458fe(0x111))),ListService_1=__importDefault(require(a19_0x2458fe(0xee))),UpdateService_1=__importDefault(require('../services/FileServices/UpdateService')),ShowService_1=__importDefault(require(a19_0x2458fe(0x10f))),DeleteService_1=__importDefault(require(a19_0x2458fe(0xfd))),SimpleListService_1=__importDefault(require(a19_0x2458fe(0xf3))),DeleteAllService_1=__importDefault(require(a19_0x2458fe(0x113))),FilesOptions_1=__importDefault(require('../models/FilesOptions')),index=async(_0x456906,_0x2e79d5)=>{const _0x361d14=a19_0x2458fe,{pageNumber:_0x201fbc,searchParam:_0x2b2edd}=_0x456906['query'],{companyId:_0x26afa5}=_0x456906[_0x361d14(0x100)],{files:_0x32fa41,count:_0x36518c,hasMore:_0x28cc4b}=await(0x0,ListService_1[_0x361d14(0xf8)])({'searchParam':_0x2b2edd,'pageNumber':_0x201fbc,'companyId':_0x26afa5});return _0x2e79d5[_0x361d14(0xe4)]({'files':_0x32fa41,'count':_0x36518c,'hasMore':_0x28cc4b});};exports[a19_0x2458fe(0x104)]=index;const store=async(_0x4532f4,_0xbf461e)=>{const _0x51176c=a19_0x2458fe,{name:_0x3f78a2,message:_0x50d1be,options:_0x4e44ff}=_0x4532f4[_0x51176c(0xdd)],{companyId:_0x1a59bc}=_0x4532f4[_0x51176c(0x100)],_0xe328ee=await(0x0,CreateService_1[_0x51176c(0xf8)])({'name':_0x3f78a2,'message':_0x50d1be,'options':_0x4e44ff,'companyId':_0x1a59bc}),_0x4a34bd=(0x0,socket_1[_0x51176c(0xe7)])();return _0x4a34bd['to'](_0x51176c(0x112)+_0x1a59bc+_0x51176c(0x109))['emit'](_0x51176c(0x10d)+_0x1a59bc+_0x51176c(0xf5),{'action':'create','fileList':_0xe328ee}),_0xbf461e['status'](0xc8)[_0x51176c(0xe4)](_0xe328ee);};exports['store']=store;const show=async(_0x4b8c07,_0xde7396)=>{const _0x28c07f=a19_0x2458fe,{fileId:_0xb02b3a}=_0x4b8c07[_0x28c07f(0xe2)],{companyId:_0x29501f}=_0x4b8c07['user'],_0x3ba303=await(0x0,ShowService_1[_0x28c07f(0xf8)])(_0xb02b3a,_0x29501f);return _0xde7396[_0x28c07f(0xe8)](0xc8)['json'](_0x3ba303);};exports['show']=show;const uploadMedias=async(_0x1c9e29,_0x10ced8)=>{const _0x3bef14=a19_0x2458fe,{fileId:_0x4abb81,id:_0x33377d,mediaType:_0x3484a0}=_0x1c9e29['body'],_0x465b12=_0x1c9e29['files'],_0x4bf279=(0x0,lodash_1[_0x3bef14(0x10b)])(_0x465b12);try{let _0x58bd70;if(_0x465b12[_0x3bef14(0xf9)]>0x0)for(const [_0x1caf1f,_0x2e60e2]of _0x465b12[_0x3bef14(0xdc)]()){_0x58bd70=await FilesOptions_1[_0x3bef14(0xf8)]['findOne']({'where':{'fileId':_0x4abb81,'id':Array[_0x3bef14(0x101)](_0x33377d)?_0x33377d[_0x1caf1f]:_0x33377d}}),_0x58bd70[_0x3bef14(0xeb)]({'path':_0x2e60e2[_0x3bef14(0xe9)][_0x3bef14(0x10e)]('/','-'),'mediaType':Array['isArray'](_0x3484a0)?_0x3484a0[_0x1caf1f]:_0x3484a0});}return _0x10ced8['send']({'mensagem':_0x3bef14(0x107)});}catch(_0x356b15){throw new AppError_1['default'](_0x356b15[_0x3bef14(0xde)]);}};function a19_0x8233(){const _0x4c9f66=['remove','params','admin','json','1205iwrVVp','query','getIO','status','filename','lodash','update','27CRBnIu','send','../services/FileServices/ListService','removeAll','18dtYYSu','(((.+)+)+)+$','2472GhhPzg','../services/FileServices/SimpleListService','853218YYTqCF','-file','1854VTNumD','__importDefault','default','length','toString','20652TZUcyd','emit','../services/FileServices/DeleteService','constructor','store','user','isArray','847gxrNRR','uploadMedias','index','1506183OHalAx','10347XklksF','Arquivos\x20atualizados','delete','-mainchannel','search','head','20uFdzEK','company','replace','../services/FileServices/ShowService','list','../services/FileServices/CreateService','company-','../services/FileServices/DeleteAllService','entries','body','message','../libs/socket','72760cDmhNj'];a19_0x8233=function(){return _0x4c9f66;};return a19_0x8233();}exports[a19_0x2458fe(0x103)]=uploadMedias;const update=async(_0x497ae2,_0x5e41dc)=>{const _0xc26e97=a19_0x2458fe;if(_0x497ae2[_0xc26e97(0x100)]['profile']!==_0xc26e97(0xe3))throw new AppError_1[(_0xc26e97(0xf8))]('ERR_NO_PERMISSION',0x193);const {fileId:_0x199c80}=_0x497ae2['params'],_0x25ec79=_0x497ae2['body'],{companyId:_0x3350ad}=_0x497ae2[_0xc26e97(0x100)],_0x4edd6c=await(0x0,UpdateService_1[_0xc26e97(0xf8)])({'fileData':_0x25ec79,'id':_0x199c80,'companyId':_0x3350ad}),_0x38fc71=(0x0,socket_1['getIO'])();return _0x38fc71['to']('company-'+_0x3350ad+_0xc26e97(0x109))[_0xc26e97(0xfc)](_0xc26e97(0x10d)+_0x3350ad+_0xc26e97(0xf5),{'action':_0xc26e97(0xeb),'fileList':_0x4edd6c}),_0x5e41dc[_0xc26e97(0xe8)](0xc8)[_0xc26e97(0xe4)](_0x4edd6c);};exports[a19_0x2458fe(0xeb)]=update;const remove=async(_0x56f4cf,_0x21c6d6)=>{const _0x3ce823=a19_0x2458fe,{fileId:_0x4efec8}=_0x56f4cf[_0x3ce823(0xe2)],{companyId:_0x2d9e4}=_0x56f4cf['user'];await(0x0,DeleteService_1[_0x3ce823(0xf8)])(_0x4efec8,_0x2d9e4);const _0x29a6b4=(0x0,socket_1[_0x3ce823(0xe7)])();return _0x29a6b4['to']('company-'+_0x2d9e4+'-mainchannel')[_0x3ce823(0xfc)](_0x3ce823(0x10d)+_0x2d9e4+'-file',{'action':_0x3ce823(0x108),'fileId':_0x4efec8}),_0x21c6d6[_0x3ce823(0xe8)](0xc8)['json']({'message':'File\x20List\x20deleted'});};exports[a19_0x2458fe(0xe1)]=remove;const removeAll=async(_0x32e02d,_0x1d9b22)=>{const _0x188bcb=a19_0x2458fe,{companyId:_0x3c7469}=_0x32e02d[_0x188bcb(0x100)];return await(0x0,DeleteAllService_1['default'])(_0x3c7469),_0x1d9b22[_0x188bcb(0xed)]();};exports[a19_0x2458fe(0xef)]=removeAll;const list=async(_0x3da79c,_0x46adba)=>{const _0x4f91ad=a19_0x2458fe,{searchParam:_0x324062}=_0x3da79c[_0x4f91ad(0xe6)],{companyId:_0x218a06}=_0x3da79c[_0x4f91ad(0x100)],_0x33ff4f=await(0x0,SimpleListService_1['default'])({'searchParam':_0x324062,'companyId':_0x218a06});return _0x46adba[_0x4f91ad(0xe4)](_0x33ff4f);};exports[a19_0x2458fe(0x110)]=list;