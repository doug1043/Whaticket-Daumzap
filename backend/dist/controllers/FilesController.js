const a18_0x1af9b7=a18_0x596d;(function(_0x1bed7b,_0x219424){const _0x18c6da=a18_0x596d,_0x3331dd=_0x1bed7b();while(!![]){try{const _0x1487d5=-parseInt(_0x18c6da(0x1f2))/0x1*(parseInt(_0x18c6da(0x1db))/0x2)+-parseInt(_0x18c6da(0x1d6))/0x3+parseInt(_0x18c6da(0x202))/0x4+parseInt(_0x18c6da(0x1ff))/0x5+-parseInt(_0x18c6da(0x1f3))/0x6+parseInt(_0x18c6da(0x1da))/0x7+-parseInt(_0x18c6da(0x1e3))/0x8;if(_0x1487d5===_0x219424)break;else _0x3331dd['push'](_0x3331dd['shift']());}catch(_0x396883){_0x3331dd['push'](_0x3331dd['shift']());}}}(a18_0xdfa2,0x91bdf));const a18_0x251583=(function(){let _0x5b1315=!![];return function(_0x5b7fb0,_0x11bbcd){const _0x384b02=_0x5b1315?function(){const _0x556193=a18_0x596d;if(_0x11bbcd){const _0x5de7fc=_0x11bbcd[_0x556193(0x1f8)](_0x5b7fb0,arguments);return _0x11bbcd=null,_0x5de7fc;}}:function(){};return _0x5b1315=![],_0x384b02;};}()),a18_0x25e479=a18_0x251583(this,function(){const _0x7f036a=a18_0x596d;return a18_0x25e479[_0x7f036a(0x1cf)]()[_0x7f036a(0x1e4)](_0x7f036a(0x1d3))['toString']()['constructor'](a18_0x25e479)[_0x7f036a(0x1e4)](_0x7f036a(0x1d3));});a18_0x25e479();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3d78fc){return _0x3d78fc&&_0x3d78fc['__esModule']?_0x3d78fc:{'default':_0x3d78fc};};Object[a18_0x1af9b7(0x1cc)](exports,'__esModule',{'value':!![]}),exports['list']=exports['removeAll']=exports['remove']=exports[a18_0x1af9b7(0x1ee)]=exports[a18_0x1af9b7(0x1df)]=exports[a18_0x1af9b7(0x1d5)]=exports['store']=exports['index']=void 0x0;const socket_1=require(a18_0x1af9b7(0x1dc)),AppError_1=__importDefault(require('../errors/AppError')),lodash_1=require(a18_0x1af9b7(0x1e7)),CreateService_1=__importDefault(require(a18_0x1af9b7(0x1cd))),ListService_1=__importDefault(require(a18_0x1af9b7(0x1d4))),UpdateService_1=__importDefault(require(a18_0x1af9b7(0x1fa))),ShowService_1=__importDefault(require('../services/FileServices/ShowService')),DeleteService_1=__importDefault(require(a18_0x1af9b7(0x203))),SimpleListService_1=__importDefault(require(a18_0x1af9b7(0x1ef))),DeleteAllService_1=__importDefault(require(a18_0x1af9b7(0x1d1))),FilesOptions_1=__importDefault(require(a18_0x1af9b7(0x1ce))),index=async(_0x43e0b4,_0x558f6b)=>{const _0x27f8a5=a18_0x1af9b7,{pageNumber:_0x4e1c41,searchParam:_0x45bcf6}=_0x43e0b4['query'],{companyId:_0x118127}=_0x43e0b4[_0x27f8a5(0x1fe)],{files:_0x3f882e,count:_0x1d2167,hasMore:_0x29a09e}=await(0x0,ListService_1['default'])({'searchParam':_0x45bcf6,'pageNumber':_0x4e1c41,'companyId':_0x118127});return _0x558f6b[_0x27f8a5(0x200)]({'files':_0x3f882e,'count':_0x1d2167,'hasMore':_0x29a09e});};exports[a18_0x1af9b7(0x1e6)]=index;const store=async(_0x53c1d5,_0x236e3c)=>{const _0x43ce49=a18_0x1af9b7,{name:_0x27abed,message:_0x3c36c1,options:_0x177bd5}=_0x53c1d5['body'],{companyId:_0x3a709d}=_0x53c1d5[_0x43ce49(0x1fe)],_0x2fa7b3=await(0x0,CreateService_1[_0x43ce49(0x1ed)])({'name':_0x27abed,'message':_0x3c36c1,'options':_0x177bd5,'companyId':_0x3a709d}),_0x5d5470=(0x0,socket_1[_0x43ce49(0x201)])();return _0x5d5470['to'](_0x43ce49(0x1e8)+_0x3a709d+_0x43ce49(0x1f0))['emit'](_0x43ce49(0x1d0)+_0x3a709d+_0x43ce49(0x1ec),{'action':_0x43ce49(0x1e0),'fileList':_0x2fa7b3}),_0x236e3c[_0x43ce49(0x1f6)](0xc8)[_0x43ce49(0x200)](_0x2fa7b3);};exports[a18_0x1af9b7(0x1fd)]=store;const show=async(_0x3fce40,_0x260e85)=>{const _0x117f5a=a18_0x1af9b7,{fileId:_0x243b55}=_0x3fce40[_0x117f5a(0x1ea)],{companyId:_0x301464}=_0x3fce40[_0x117f5a(0x1fe)],_0x2dc0f4=await(0x0,ShowService_1[_0x117f5a(0x1ed)])(_0x243b55,_0x301464);return _0x260e85[_0x117f5a(0x1f6)](0xc8)[_0x117f5a(0x200)](_0x2dc0f4);};function a18_0x596d(_0x55f135,_0x3303f4){const _0x4d03ac=a18_0xdfa2();return a18_0x596d=function(_0x25e479,_0x251583){_0x25e479=_0x25e479-0x1cc;let _0xdfa287=_0x4d03ac[_0x25e479];return _0xdfa287;},a18_0x596d(_0x55f135,_0x3303f4);}exports['show']=show;const uploadMedias=async(_0x12a9aa,_0x15e5a7)=>{const _0x16cdff=a18_0x1af9b7,{fileId:_0x130688,id:_0x2dc306,mediaType:_0xaa6a0c}=_0x12a9aa[_0x16cdff(0x1dd)],_0x3d067a=_0x12a9aa[_0x16cdff(0x1f7)],_0x471740=(0x0,lodash_1[_0x16cdff(0x1f9)])(_0x3d067a);try{let _0x33fbb9;if(_0x3d067a[_0x16cdff(0x1eb)]>0x0)for(const [_0x11bd65,_0x428aab]of _0x3d067a['entries']()){_0x33fbb9=await FilesOptions_1[_0x16cdff(0x1ed)][_0x16cdff(0x1d7)]({'where':{'fileId':_0x130688,'id':Array['isArray'](_0x2dc306)?_0x2dc306[_0x11bd65]:_0x2dc306}}),_0x33fbb9[_0x16cdff(0x1ee)]({'path':_0x428aab[_0x16cdff(0x1d2)][_0x16cdff(0x1e1)]('/','-'),'mediaType':Array[_0x16cdff(0x1d8)](_0xaa6a0c)?_0xaa6a0c[_0x11bd65]:_0xaa6a0c});}return _0x15e5a7[_0x16cdff(0x1fb)]({'mensagem':_0x16cdff(0x1f5)});}catch(_0x78c93a){throw new AppError_1[(_0x16cdff(0x1ed))](_0x78c93a[_0x16cdff(0x1f4)]);}};exports[a18_0x1af9b7(0x1df)]=uploadMedias;const update=async(_0x1aed90,_0x2383e5)=>{const _0x18f78c=a18_0x1af9b7;if(_0x1aed90[_0x18f78c(0x1fe)][_0x18f78c(0x1e5)]!==_0x18f78c(0x1d9))throw new AppError_1[(_0x18f78c(0x1ed))]('ERR_NO_PERMISSION',0x193);const {fileId:_0x2e48ec}=_0x1aed90['params'],_0x5c0518=_0x1aed90[_0x18f78c(0x1dd)],{companyId:_0x33a23b}=_0x1aed90['user'],_0x40d73d=await(0x0,UpdateService_1['default'])({'fileData':_0x5c0518,'id':_0x2e48ec,'companyId':_0x33a23b}),_0x4ed45e=(0x0,socket_1[_0x18f78c(0x201)])();return _0x4ed45e['to'](_0x18f78c(0x1e8)+_0x33a23b+'-mainchannel')[_0x18f78c(0x1e2)](_0x18f78c(0x1d0)+_0x33a23b+_0x18f78c(0x1ec),{'action':'update','fileList':_0x40d73d}),_0x2383e5[_0x18f78c(0x1f6)](0xc8)['json'](_0x40d73d);};exports[a18_0x1af9b7(0x1ee)]=update;function a18_0xdfa2(){const _0x2c1207=['remove','uploadMedias','create','replace','emit','2142952wrCdwW','search','profile','index','lodash','company-','delete','params','length','-file','default','update','../services/FileServices/SimpleListService','-mainchannel','removeAll','4565wJlTeK','1192968YEPFco','message','Arquivos\x20atualizados','status','files','apply','head','../services/FileServices/UpdateService','send','File\x20List\x20deleted','store','user','3524830ApBJsp','json','getIO','1999608jtRXIz','../services/FileServices/DeleteService','defineProperty','../services/FileServices/CreateService','../models/FilesOptions','toString','company','../services/FileServices/DeleteAllService','filename','(((.+)+)+)+$','../services/FileServices/ListService','show','310572LXhZRZ','findOne','isArray','admin','7756889kNjfFj','502WwoozT','../libs/socket','body'];a18_0xdfa2=function(){return _0x2c1207;};return a18_0xdfa2();}const remove=async(_0x36f68b,_0x3e055a)=>{const _0x393b6d=a18_0x1af9b7,{fileId:_0x282fbd}=_0x36f68b['params'],{companyId:_0x220e48}=_0x36f68b[_0x393b6d(0x1fe)];await(0x0,DeleteService_1['default'])(_0x282fbd,_0x220e48);const _0x3011a7=(0x0,socket_1[_0x393b6d(0x201)])();return _0x3011a7['to'](_0x393b6d(0x1e8)+_0x220e48+_0x393b6d(0x1f0))[_0x393b6d(0x1e2)](_0x393b6d(0x1d0)+_0x220e48+_0x393b6d(0x1ec),{'action':_0x393b6d(0x1e9),'fileId':_0x282fbd}),_0x3e055a[_0x393b6d(0x1f6)](0xc8)['json']({'message':_0x393b6d(0x1fc)});};exports[a18_0x1af9b7(0x1de)]=remove;const removeAll=async(_0x1476ba,_0x50d3ae)=>{const _0x5a79a1=a18_0x1af9b7,{companyId:_0x39d393}=_0x1476ba[_0x5a79a1(0x1fe)];return await(0x0,DeleteAllService_1[_0x5a79a1(0x1ed)])(_0x39d393),_0x50d3ae[_0x5a79a1(0x1fb)]();};exports[a18_0x1af9b7(0x1f1)]=removeAll;const list=async(_0x19596a,_0x36f0c4)=>{const _0x429010=a18_0x1af9b7,{searchParam:_0x18745c}=_0x19596a['query'],{companyId:_0x188e68}=_0x19596a['user'],_0x500f9a=await(0x0,SimpleListService_1[_0x429010(0x1ed)])({'searchParam':_0x18745c,'companyId':_0x188e68});return _0x36f0c4[_0x429010(0x200)](_0x500f9a);};exports['list']=list;