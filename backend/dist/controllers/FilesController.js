const a19_0x215124=a19_0xf799;(function(_0x271c34,_0x47b382){const _0x4e730d=a19_0xf799,_0x3a805e=_0x271c34();while(!![]){try{const _0x369ca3=parseInt(_0x4e730d(0x156))/0x1*(-parseInt(_0x4e730d(0x165))/0x2)+-parseInt(_0x4e730d(0x16d))/0x3+parseInt(_0x4e730d(0x140))/0x4*(parseInt(_0x4e730d(0x174))/0x5)+-parseInt(_0x4e730d(0x159))/0x6*(-parseInt(_0x4e730d(0x142))/0x7)+parseInt(_0x4e730d(0x14c))/0x8+parseInt(_0x4e730d(0x166))/0x9+-parseInt(_0x4e730d(0x16f))/0xa*(-parseInt(_0x4e730d(0x163))/0xb);if(_0x369ca3===_0x47b382)break;else _0x3a805e['push'](_0x3a805e['shift']());}catch(_0x568c71){_0x3a805e['push'](_0x3a805e['shift']());}}}(a19_0x1343,0xc0ac1));const a19_0x3a43fa=(function(){let _0x2a43b4=!![];return function(_0x2a33bc,_0x451d8a){const _0x5c356b=_0x2a43b4?function(){const _0x5e914f=a19_0xf799;if(_0x451d8a){const _0x21c477=_0x451d8a[_0x5e914f(0x16a)](_0x2a33bc,arguments);return _0x451d8a=null,_0x21c477;}}:function(){};return _0x2a43b4=![],_0x5c356b;};}()),a19_0x15a458=a19_0x3a43fa(this,function(){const _0x103826=a19_0xf799;return a19_0x15a458[_0x103826(0x170)]()[_0x103826(0x172)](_0x103826(0x13e))[_0x103826(0x170)]()[_0x103826(0x145)](a19_0x15a458)[_0x103826(0x172)](_0x103826(0x13e));});a19_0x15a458();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x59ca14){return _0x59ca14&&_0x59ca14['__esModule']?_0x59ca14:{'default':_0x59ca14};};Object[a19_0x215124(0x16c)](exports,a19_0x215124(0x169),{'value':!![]}),exports['list']=exports[a19_0x215124(0x146)]=exports[a19_0x215124(0x158)]=exports[a19_0x215124(0x14a)]=exports[a19_0x215124(0x15c)]=exports[a19_0x215124(0x164)]=exports[a19_0x215124(0x13c)]=exports[a19_0x215124(0x15d)]=void 0x0;const socket_1=require(a19_0x215124(0x175)),AppError_1=__importDefault(require(a19_0x215124(0x15f))),lodash_1=require(a19_0x215124(0x171)),CreateService_1=__importDefault(require(a19_0x215124(0x147))),ListService_1=__importDefault(require(a19_0x215124(0x14f))),UpdateService_1=__importDefault(require(a19_0x215124(0x152))),ShowService_1=__importDefault(require(a19_0x215124(0x162))),DeleteService_1=__importDefault(require(a19_0x215124(0x16e))),SimpleListService_1=__importDefault(require(a19_0x215124(0x161))),DeleteAllService_1=__importDefault(require(a19_0x215124(0x154))),FilesOptions_1=__importDefault(require(a19_0x215124(0x155))),index=async(_0x43e7e5,_0x86ae3d)=>{const _0xd0bf37=a19_0x215124,{pageNumber:_0x1e75c6,searchParam:_0x3374ea}=_0x43e7e5[_0xd0bf37(0x13f)],{companyId:_0x34163b}=_0x43e7e5[_0xd0bf37(0x141)],{files:_0x4946ac,count:_0x460f29,hasMore:_0x3dc360}=await(0x0,ListService_1[_0xd0bf37(0x176)])({'searchParam':_0x3374ea,'pageNumber':_0x1e75c6,'companyId':_0x34163b});return _0x86ae3d['json']({'files':_0x4946ac,'count':_0x460f29,'hasMore':_0x3dc360});};function a19_0x1343(){const _0xb23404=['length','update','status','1127072xXbPpO','message','Arquivos\x20atualizados','../services/FileServices/ListService','isArray','profile','../services/FileServices/UpdateService','body','../services/FileServices/DeleteAllService','../models/FilesOptions','304999kfKrSL','company-','remove','2151384LnXmAP','files','create','uploadMedias','index','-mainchannel','../errors/AppError','send','../services/FileServices/SimpleListService','../services/FileServices/ShowService','21604EjWRQR','show','8TzbFOB','9555435rkKyVb','json','findOne','__esModule','apply','getIO','defineProperty','3469752LXxPWZ','../services/FileServices/DeleteService','6730BRPaUQ','toString','lodash','search','admin','25QtavZB','../libs/socket','default','File\x20List\x20deleted','-file','store','ERR_NO_PERMISSION','(((.+)+)+)+$','query','226264HIOywW','user','7TtODTr','emit','params','constructor','removeAll','../services/FileServices/CreateService','list'];a19_0x1343=function(){return _0xb23404;};return a19_0x1343();}exports[a19_0x215124(0x15d)]=index;const store=async(_0x250f5a,_0x4c2de3)=>{const _0x47d00f=a19_0x215124,{name:_0x3821ad,message:_0x387bb5,options:_0x4122bb}=_0x250f5a['body'],{companyId:_0x1a03b8}=_0x250f5a[_0x47d00f(0x141)],_0xc4823f=await(0x0,CreateService_1['default'])({'name':_0x3821ad,'message':_0x387bb5,'options':_0x4122bb,'companyId':_0x1a03b8}),_0x51a31a=(0x0,socket_1[_0x47d00f(0x16b)])();return _0x51a31a['to'](_0x47d00f(0x157)+_0x1a03b8+'-mainchannel')[_0x47d00f(0x143)]('company'+_0x1a03b8+_0x47d00f(0x13b),{'action':_0x47d00f(0x15b),'fileList':_0xc4823f}),_0x4c2de3[_0x47d00f(0x14b)](0xc8)['json'](_0xc4823f);};exports[a19_0x215124(0x13c)]=store;function a19_0xf799(_0x3df9f4,_0xb69525){const _0x5436ab=a19_0x1343();return a19_0xf799=function(_0x15a458,_0x3a43fa){_0x15a458=_0x15a458-0x13a;let _0x1343c0=_0x5436ab[_0x15a458];return _0x1343c0;},a19_0xf799(_0x3df9f4,_0xb69525);}const show=async(_0x21e74f,_0xf9eba3)=>{const _0x4fe548=a19_0x215124,{fileId:_0x8843d4}=_0x21e74f[_0x4fe548(0x144)],{companyId:_0x2799a3}=_0x21e74f[_0x4fe548(0x141)],_0x5dff5c=await(0x0,ShowService_1[_0x4fe548(0x176)])(_0x8843d4,_0x2799a3);return _0xf9eba3[_0x4fe548(0x14b)](0xc8)['json'](_0x5dff5c);};exports[a19_0x215124(0x164)]=show;const uploadMedias=async(_0x5f0b60,_0x4674e1)=>{const _0x4e2d6c=a19_0x215124,{fileId:_0x158e77,id:_0x47bada,mediaType:_0x40d695}=_0x5f0b60[_0x4e2d6c(0x153)],_0xd101dd=_0x5f0b60[_0x4e2d6c(0x15a)],_0xc0d88a=(0x0,lodash_1['head'])(_0xd101dd);try{let _0x2a952d;if(_0xd101dd[_0x4e2d6c(0x149)]>0x0)for(const [_0x3c7171,_0x48a306]of _0xd101dd['entries']()){_0x2a952d=await FilesOptions_1['default'][_0x4e2d6c(0x168)]({'where':{'fileId':_0x158e77,'id':Array[_0x4e2d6c(0x150)](_0x47bada)?_0x47bada[_0x3c7171]:_0x47bada}}),_0x2a952d['update']({'path':_0x48a306['filename']['replace']('/','-'),'mediaType':Array[_0x4e2d6c(0x150)](_0x40d695)?_0x40d695[_0x3c7171]:_0x40d695});}return _0x4674e1[_0x4e2d6c(0x160)]({'mensagem':_0x4e2d6c(0x14e)});}catch(_0x37c9b4){throw new AppError_1[(_0x4e2d6c(0x176))](_0x37c9b4[_0x4e2d6c(0x14d)]);}};exports['uploadMedias']=uploadMedias;const update=async(_0x27d16b,_0x5c0317)=>{const _0xb42fcb=a19_0x215124;if(_0x27d16b['user'][_0xb42fcb(0x151)]!==_0xb42fcb(0x173))throw new AppError_1['default'](_0xb42fcb(0x13d),0x193);const {fileId:_0x326366}=_0x27d16b[_0xb42fcb(0x144)],_0x2bf5e3=_0x27d16b[_0xb42fcb(0x153)],{companyId:_0xda0243}=_0x27d16b[_0xb42fcb(0x141)],_0x1c6958=await(0x0,UpdateService_1[_0xb42fcb(0x176)])({'fileData':_0x2bf5e3,'id':_0x326366,'companyId':_0xda0243}),_0x1ea4bc=(0x0,socket_1[_0xb42fcb(0x16b)])();return _0x1ea4bc['to'](_0xb42fcb(0x157)+_0xda0243+_0xb42fcb(0x15e))[_0xb42fcb(0x143)]('company'+_0xda0243+_0xb42fcb(0x13b),{'action':_0xb42fcb(0x14a),'fileList':_0x1c6958}),_0x5c0317['status'](0xc8)['json'](_0x1c6958);};exports[a19_0x215124(0x14a)]=update;const remove=async(_0x3b2fd4,_0x1e40a8)=>{const _0x134353=a19_0x215124,{fileId:_0x5b6539}=_0x3b2fd4['params'],{companyId:_0x3a75fc}=_0x3b2fd4[_0x134353(0x141)];await(0x0,DeleteService_1['default'])(_0x5b6539,_0x3a75fc);const _0x334589=(0x0,socket_1['getIO'])();return _0x334589['to'](_0x134353(0x157)+_0x3a75fc+_0x134353(0x15e))[_0x134353(0x143)]('company'+_0x3a75fc+_0x134353(0x13b),{'action':'delete','fileId':_0x5b6539}),_0x1e40a8[_0x134353(0x14b)](0xc8)[_0x134353(0x167)]({'message':_0x134353(0x13a)});};exports[a19_0x215124(0x158)]=remove;const removeAll=async(_0x5355e2,_0x51d133)=>{const _0x27c5bc=a19_0x215124,{companyId:_0x58a7de}=_0x5355e2[_0x27c5bc(0x141)];return await(0x0,DeleteAllService_1[_0x27c5bc(0x176)])(_0x58a7de),_0x51d133[_0x27c5bc(0x160)]();};exports['removeAll']=removeAll;const list=async(_0x14fb9a,_0x350eaa)=>{const _0x9bb471=a19_0x215124,{searchParam:_0x219ede}=_0x14fb9a['query'],{companyId:_0x11bee1}=_0x14fb9a['user'],_0x37a7df=await(0x0,SimpleListService_1[_0x9bb471(0x176)])({'searchParam':_0x219ede,'companyId':_0x11bee1});return _0x350eaa[_0x9bb471(0x167)](_0x37a7df);};exports[a19_0x215124(0x148)]=list;