const a18_0x1dc09e=a18_0x40bc;(function(_0x37c121,_0x34f921){const _0x112d7c=a18_0x40bc,_0x4a10b1=_0x37c121();while(!![]){try{const _0x2989ea=-parseInt(_0x112d7c(0xd6))/0x1+parseInt(_0x112d7c(0xdc))/0x2+parseInt(_0x112d7c(0xdf))/0x3+parseInt(_0x112d7c(0xcc))/0x4+-parseInt(_0x112d7c(0xb7))/0x5+parseInt(_0x112d7c(0xc9))/0x6+-parseInt(_0x112d7c(0xc5))/0x7*(parseInt(_0x112d7c(0xb3))/0x8);if(_0x2989ea===_0x34f921)break;else _0x4a10b1['push'](_0x4a10b1['shift']());}catch(_0x1b2661){_0x4a10b1['push'](_0x4a10b1['shift']());}}}(a18_0x5143,0x81cc2));const a18_0x2352e2=(function(){let _0x507257=!![];return function(_0x31b261,_0x44e74b){const _0xa25cdb=_0x507257?function(){if(_0x44e74b){const _0x33638f=_0x44e74b['apply'](_0x31b261,arguments);return _0x44e74b=null,_0x33638f;}}:function(){};return _0x507257=![],_0xa25cdb;};}()),a18_0x3a4b8f=a18_0x2352e2(this,function(){const _0x9d185f=a18_0x40bc;return a18_0x3a4b8f[_0x9d185f(0xe0)]()[_0x9d185f(0xbb)]('(((.+)+)+)+$')[_0x9d185f(0xe0)]()[_0x9d185f(0xd8)](a18_0x3a4b8f)[_0x9d185f(0xbb)]('(((.+)+)+)+$');});a18_0x3a4b8f();'use strict';function a18_0x40bc(_0x3e5773,_0x5cb2f0){const _0x4e701f=a18_0x5143();return a18_0x40bc=function(_0x3a4b8f,_0x2352e2){_0x3a4b8f=_0x3a4b8f-0xb1;let _0x5143aa=_0x4e701f[_0x3a4b8f];return _0x5143aa;},a18_0x40bc(_0x3e5773,_0x5cb2f0);}var __importDefault=this&&this[a18_0x1dc09e(0xd3)]||function(_0x2d6709){const _0x131c07=a18_0x1dc09e;return _0x2d6709&&_0x2d6709[_0x131c07(0xda)]?_0x2d6709:{'default':_0x2d6709};};Object[a18_0x1dc09e(0xdb)](exports,a18_0x1dc09e(0xda),{'value':!![]}),exports['list']=exports[a18_0x1dc09e(0xc4)]=exports[a18_0x1dc09e(0xb1)]=exports['update']=exports[a18_0x1dc09e(0xb9)]=exports['show']=exports['store']=exports[a18_0x1dc09e(0xbf)]=void 0x0;const socket_1=require(a18_0x1dc09e(0xb4)),AppError_1=__importDefault(require('../errors/AppError')),lodash_1=require(a18_0x1dc09e(0xcb)),CreateService_1=__importDefault(require(a18_0x1dc09e(0xc0))),ListService_1=__importDefault(require(a18_0x1dc09e(0xd4))),UpdateService_1=__importDefault(require('../services/FileServices/UpdateService')),ShowService_1=__importDefault(require('../services/FileServices/ShowService')),DeleteService_1=__importDefault(require(a18_0x1dc09e(0xdd))),SimpleListService_1=__importDefault(require(a18_0x1dc09e(0xd5))),DeleteAllService_1=__importDefault(require('../services/FileServices/DeleteAllService')),FilesOptions_1=__importDefault(require(a18_0x1dc09e(0xc7))),index=async(_0x81b3f,_0x552540)=>{const _0x1b2ea0=a18_0x1dc09e,{pageNumber:_0x43f206,searchParam:_0x5dfa7b}=_0x81b3f[_0x1b2ea0(0xe3)],{companyId:_0x37f5a8}=_0x81b3f['user'],{files:_0x1dd791,count:_0xf6cfd8,hasMore:_0x5b895c}=await(0x0,ListService_1['default'])({'searchParam':_0x5dfa7b,'pageNumber':_0x43f206,'companyId':_0x37f5a8});return _0x552540['json']({'files':_0x1dd791,'count':_0xf6cfd8,'hasMore':_0x5b895c});};exports[a18_0x1dc09e(0xbf)]=index;const store=async(_0x491e19,_0x131532)=>{const _0x5510f6=a18_0x1dc09e,{name:_0x57dab3,message:_0x471390,options:_0x5d1111}=_0x491e19[_0x5510f6(0xb5)],{companyId:_0x4ee917}=_0x491e19[_0x5510f6(0xe4)],_0x5cdad9=await(0x0,CreateService_1['default'])({'name':_0x57dab3,'message':_0x471390,'options':_0x5d1111,'companyId':_0x4ee917}),_0x14bc84=(0x0,socket_1[_0x5510f6(0xbd)])();return _0x14bc84['to'](_0x5510f6(0xcd)+_0x4ee917+'-mainchannel')['emit']('company'+_0x4ee917+_0x5510f6(0xe5),{'action':_0x5510f6(0xb8),'fileList':_0x5cdad9}),_0x131532[_0x5510f6(0xc1)](0xc8)[_0x5510f6(0xd1)](_0x5cdad9);};exports['store']=store;function a18_0x5143(){const _0x34207b=['entries','../models/FilesOptions','company','1744218hZRlin','length','lodash','1366200QKcUgN','company-','emit','send','isArray','json','params','__importDefault','../services/FileServices/ListService','../services/FileServices/SimpleListService','543606eamQAF','ERR_NO_PERMISSION','constructor','delete','__esModule','defineProperty','82248fOAoUJ','../services/FileServices/DeleteService','default','2066685brjEUU','toString','files','show','query','user','-file','File\x20List\x20deleted','findOne','remove','head','47208rUUzaf','../libs/socket','body','profile','1405575THcagm','create','uploadMedias','update','search','-mainchannel','getIO','admin','index','../services/FileServices/CreateService','status','filename','message','removeAll','7YcofJt'];a18_0x5143=function(){return _0x34207b;};return a18_0x5143();}const show=async(_0x539f1a,_0x1c094f)=>{const _0x4290f5=a18_0x1dc09e,{fileId:_0x3c63ef}=_0x539f1a['params'],{companyId:_0x40daf4}=_0x539f1a['user'],_0x4c77c4=await(0x0,ShowService_1[_0x4290f5(0xde)])(_0x3c63ef,_0x40daf4);return _0x1c094f[_0x4290f5(0xc1)](0xc8)['json'](_0x4c77c4);};exports[a18_0x1dc09e(0xe2)]=show;const uploadMedias=async(_0x1f2dab,_0x524e84)=>{const _0x1ff8f0=a18_0x1dc09e,{fileId:_0x3c2347,id:_0x2269f5,mediaType:_0x35eb9f}=_0x1f2dab[_0x1ff8f0(0xb5)],_0xf4a8c8=_0x1f2dab[_0x1ff8f0(0xe1)],_0x4b1655=(0x0,lodash_1[_0x1ff8f0(0xb2)])(_0xf4a8c8);try{let _0x48dc5d;if(_0xf4a8c8[_0x1ff8f0(0xca)]>0x0)for(const [_0x8ed506,_0x3e1f06]of _0xf4a8c8[_0x1ff8f0(0xc6)]()){_0x48dc5d=await FilesOptions_1[_0x1ff8f0(0xde)][_0x1ff8f0(0xe7)]({'where':{'fileId':_0x3c2347,'id':Array[_0x1ff8f0(0xd0)](_0x2269f5)?_0x2269f5[_0x8ed506]:_0x2269f5}}),_0x48dc5d[_0x1ff8f0(0xba)]({'path':_0x3e1f06[_0x1ff8f0(0xc2)]['replace']('/','-'),'mediaType':Array[_0x1ff8f0(0xd0)](_0x35eb9f)?_0x35eb9f[_0x8ed506]:_0x35eb9f});}return _0x524e84[_0x1ff8f0(0xcf)]({'mensagem':'Arquivos\x20atualizados'});}catch(_0x3f42b2){throw new AppError_1[(_0x1ff8f0(0xde))](_0x3f42b2[_0x1ff8f0(0xc3)]);}};exports[a18_0x1dc09e(0xb9)]=uploadMedias;const update=async(_0x39c5d1,_0x208f1a)=>{const _0x45a7cf=a18_0x1dc09e;if(_0x39c5d1[_0x45a7cf(0xe4)][_0x45a7cf(0xb6)]!==_0x45a7cf(0xbe))throw new AppError_1[(_0x45a7cf(0xde))](_0x45a7cf(0xd7),0x193);const {fileId:_0x1dca0f}=_0x39c5d1['params'],_0x1241c0=_0x39c5d1[_0x45a7cf(0xb5)],{companyId:_0x59b48a}=_0x39c5d1[_0x45a7cf(0xe4)],_0x424022=await(0x0,UpdateService_1[_0x45a7cf(0xde)])({'fileData':_0x1241c0,'id':_0x1dca0f,'companyId':_0x59b48a}),_0x4cc115=(0x0,socket_1['getIO'])();return _0x4cc115['to'](_0x45a7cf(0xcd)+_0x59b48a+_0x45a7cf(0xbc))[_0x45a7cf(0xce)](_0x45a7cf(0xc8)+_0x59b48a+'-file',{'action':_0x45a7cf(0xba),'fileList':_0x424022}),_0x208f1a[_0x45a7cf(0xc1)](0xc8)[_0x45a7cf(0xd1)](_0x424022);};exports[a18_0x1dc09e(0xba)]=update;const remove=async(_0x489aff,_0x53a306)=>{const _0x29395a=a18_0x1dc09e,{fileId:_0x5dac85}=_0x489aff[_0x29395a(0xd2)],{companyId:_0x1f6775}=_0x489aff[_0x29395a(0xe4)];await(0x0,DeleteService_1[_0x29395a(0xde)])(_0x5dac85,_0x1f6775);const _0x5d1e17=(0x0,socket_1['getIO'])();return _0x5d1e17['to']('company-'+_0x1f6775+_0x29395a(0xbc))[_0x29395a(0xce)](_0x29395a(0xc8)+_0x1f6775+'-file',{'action':_0x29395a(0xd9),'fileId':_0x5dac85}),_0x53a306[_0x29395a(0xc1)](0xc8)[_0x29395a(0xd1)]({'message':_0x29395a(0xe6)});};exports['remove']=remove;const removeAll=async(_0x5cc24f,_0x5a2d1d)=>{const _0x22f4e4=a18_0x1dc09e,{companyId:_0x590114}=_0x5cc24f[_0x22f4e4(0xe4)];return await(0x0,DeleteAllService_1[_0x22f4e4(0xde)])(_0x590114),_0x5a2d1d[_0x22f4e4(0xcf)]();};exports['removeAll']=removeAll;const list=async(_0x503707,_0x52df23)=>{const _0x36f519=a18_0x1dc09e,{searchParam:_0x11277d}=_0x503707[_0x36f519(0xe3)],{companyId:_0x3b8de9}=_0x503707[_0x36f519(0xe4)],_0x56974d=await(0x0,SimpleListService_1[_0x36f519(0xde)])({'searchParam':_0x11277d,'companyId':_0x3b8de9});return _0x52df23['json'](_0x56974d);};exports['list']=list;