const a18_0x3c8c2d=a18_0x424c;(function(_0x9f099c,_0xf694a0){const _0x487504=a18_0x424c,_0x3e6661=_0x9f099c();while(!![]){try{const _0x55778c=-parseInt(_0x487504(0x145))/0x1*(parseInt(_0x487504(0x170))/0x2)+-parseInt(_0x487504(0x16f))/0x3*(-parseInt(_0x487504(0x17c))/0x4)+parseInt(_0x487504(0x153))/0x5+-parseInt(_0x487504(0x16d))/0x6*(parseInt(_0x487504(0x163))/0x7)+-parseInt(_0x487504(0x179))/0x8+parseInt(_0x487504(0x15d))/0x9*(parseInt(_0x487504(0x144))/0xa)+-parseInt(_0x487504(0x149))/0xb;if(_0x55778c===_0xf694a0)break;else _0x3e6661['push'](_0x3e6661['shift']());}catch(_0x588127){_0x3e6661['push'](_0x3e6661['shift']());}}}(a18_0x57e1,0xbe83a));const a18_0x2bb168=(function(){let _0x45c43b=!![];return function(_0x32aa76,_0x45fb39){const _0x54ce99=_0x45c43b?function(){if(_0x45fb39){const _0x28b2c=_0x45fb39['apply'](_0x32aa76,arguments);return _0x45fb39=null,_0x28b2c;}}:function(){};return _0x45c43b=![],_0x54ce99;};}()),a18_0x409594=a18_0x2bb168(this,function(){const _0xdc504c=a18_0x424c;return a18_0x409594[_0xdc504c(0x173)]()['search'](_0xdc504c(0x14d))[_0xdc504c(0x173)]()['constructor'](a18_0x409594)[_0xdc504c(0x16a)](_0xdc504c(0x14d));});a18_0x409594();'use strict';var __importDefault=this&&this[a18_0x3c8c2d(0x166)]||function(_0x54fde4){return _0x54fde4&&_0x54fde4['__esModule']?_0x54fde4:{'default':_0x54fde4};};Object['defineProperty'](exports,a18_0x3c8c2d(0x16b),{'value':!![]}),exports['list']=exports[a18_0x3c8c2d(0x178)]=exports[a18_0x3c8c2d(0x143)]=exports['update']=exports[a18_0x3c8c2d(0x15b)]=exports[a18_0x3c8c2d(0x17b)]=exports[a18_0x3c8c2d(0x174)]=exports[a18_0x3c8c2d(0x148)]=void 0x0;const socket_1=require(a18_0x3c8c2d(0x161)),AppError_1=__importDefault(require(a18_0x3c8c2d(0x167))),lodash_1=require(a18_0x3c8c2d(0x176)),CreateService_1=__importDefault(require('../services/FileServices/CreateService')),ListService_1=__importDefault(require('../services/FileServices/ListService')),UpdateService_1=__importDefault(require(a18_0x3c8c2d(0x164))),ShowService_1=__importDefault(require(a18_0x3c8c2d(0x14e))),DeleteService_1=__importDefault(require(a18_0x3c8c2d(0x175))),SimpleListService_1=__importDefault(require('../services/FileServices/SimpleListService')),DeleteAllService_1=__importDefault(require(a18_0x3c8c2d(0x169))),FilesOptions_1=__importDefault(require('../models/FilesOptions')),index=async(_0xfd21b4,_0x17e680)=>{const _0x104f2c=a18_0x3c8c2d,{pageNumber:_0x359162,searchParam:_0x2686b1}=_0xfd21b4['query'],{companyId:_0x3d3275}=_0xfd21b4[_0x104f2c(0x147)],{files:_0x5dec15,count:_0x2c513e,hasMore:_0x12758b}=await(0x0,ListService_1['default'])({'searchParam':_0x2686b1,'pageNumber':_0x359162,'companyId':_0x3d3275});return _0x17e680[_0x104f2c(0x15f)]({'files':_0x5dec15,'count':_0x2c513e,'hasMore':_0x12758b});};exports['index']=index;const store=async(_0x2be045,_0x26f071)=>{const _0x10ac0e=a18_0x3c8c2d,{name:_0x278eaa,message:_0xba581,options:_0x30310c}=_0x2be045[_0x10ac0e(0x155)],{companyId:_0x332c37}=_0x2be045[_0x10ac0e(0x147)],_0x418006=await(0x0,CreateService_1[_0x10ac0e(0x17a)])({'name':_0x278eaa,'message':_0xba581,'options':_0x30310c,'companyId':_0x332c37}),_0x4de3f6=(0x0,socket_1[_0x10ac0e(0x162)])();return _0x4de3f6['to']('company-'+_0x332c37+_0x10ac0e(0x14b))[_0x10ac0e(0x168)](_0x10ac0e(0x152)+_0x332c37+_0x10ac0e(0x14a),{'action':_0x10ac0e(0x160),'fileList':_0x418006}),_0x26f071[_0x10ac0e(0x15a)](0xc8)[_0x10ac0e(0x15f)](_0x418006);};exports[a18_0x3c8c2d(0x174)]=store;const show=async(_0xf1bd7d,_0x33eb01)=>{const _0x550d51=a18_0x3c8c2d,{fileId:_0x30e833}=_0xf1bd7d[_0x550d51(0x151)],{companyId:_0xd26ae1}=_0xf1bd7d['user'],_0x37c363=await(0x0,ShowService_1[_0x550d51(0x17a)])(_0x30e833,_0xd26ae1);return _0x33eb01['status'](0xc8)[_0x550d51(0x15f)](_0x37c363);};exports['show']=show;function a18_0x424c(_0x389033,_0x2fbebe){const _0x452fc8=a18_0x57e1();return a18_0x424c=function(_0x409594,_0x2bb168){_0x409594=_0x409594-0x143;let _0x57e158=_0x452fc8[_0x409594];return _0x57e158;},a18_0x424c(_0x389033,_0x2fbebe);}const uploadMedias=async(_0x26d555,_0x39999a)=>{const _0x2d8c83=a18_0x3c8c2d,{fileId:_0x1c9b62,id:_0x328bbe,mediaType:_0x4b85d1}=_0x26d555['body'],_0x475afe=_0x26d555[_0x2d8c83(0x15e)],_0x6b80b2=(0x0,lodash_1[_0x2d8c83(0x16e)])(_0x475afe);try{let _0x16fc64;if(_0x475afe[_0x2d8c83(0x172)]>0x0)for(const [_0x3f7019,_0x277218]of _0x475afe[_0x2d8c83(0x17d)]()){_0x16fc64=await FilesOptions_1[_0x2d8c83(0x17a)][_0x2d8c83(0x14c)]({'where':{'fileId':_0x1c9b62,'id':Array[_0x2d8c83(0x16c)](_0x328bbe)?_0x328bbe[_0x3f7019]:_0x328bbe}}),_0x16fc64[_0x2d8c83(0x14f)]({'path':_0x277218[_0x2d8c83(0x165)][_0x2d8c83(0x146)]('/','-'),'mediaType':Array[_0x2d8c83(0x16c)](_0x4b85d1)?_0x4b85d1[_0x3f7019]:_0x4b85d1});}return _0x39999a[_0x2d8c83(0x159)]({'mensagem':_0x2d8c83(0x150)});}catch(_0x109aa0){throw new AppError_1[(_0x2d8c83(0x17a))](_0x109aa0[_0x2d8c83(0x15c)]);}};exports['uploadMedias']=uploadMedias;const update=async(_0x3a7299,_0x11158c)=>{const _0x52b010=a18_0x3c8c2d;if(_0x3a7299['user'][_0x52b010(0x171)]!==_0x52b010(0x158))throw new AppError_1[(_0x52b010(0x17a))](_0x52b010(0x154),0x193);const {fileId:_0x2f3ba9}=_0x3a7299[_0x52b010(0x151)],_0x34d694=_0x3a7299[_0x52b010(0x155)],{companyId:_0x4f454a}=_0x3a7299[_0x52b010(0x147)],_0x4adffd=await(0x0,UpdateService_1[_0x52b010(0x17a)])({'fileData':_0x34d694,'id':_0x2f3ba9,'companyId':_0x4f454a}),_0x57ae2c=(0x0,socket_1[_0x52b010(0x162)])();return _0x57ae2c['to'](_0x52b010(0x157)+_0x4f454a+_0x52b010(0x14b))[_0x52b010(0x168)](_0x52b010(0x152)+_0x4f454a+_0x52b010(0x14a),{'action':'update','fileList':_0x4adffd}),_0x11158c[_0x52b010(0x15a)](0xc8)['json'](_0x4adffd);};exports[a18_0x3c8c2d(0x14f)]=update;function a18_0x57e1(){const _0x40c6c5=['user','index','475442oKUgFU','-file','-mainchannel','findOne','(((.+)+)+)+$','../services/FileServices/ShowService','update','Arquivos\x20atualizados','params','company','1404215UzmpgK','ERR_NO_PERMISSION','body','File\x20List\x20deleted','company-','admin','send','status','uploadMedias','message','3257316jzalgT','files','json','create','../libs/socket','getIO','280BSvtVV','../services/FileServices/UpdateService','filename','__importDefault','../errors/AppError','emit','../services/FileServices/DeleteAllService','search','__esModule','isArray','133638ejVrVI','head','139953zIjyba','14wgDYfu','profile','length','toString','store','../services/FileServices/DeleteService','lodash','delete','removeAll','8485712qdarGE','default','show','124SqtFcR','entries','remove','40AAlSmy','57074hToWzZ','replace'];a18_0x57e1=function(){return _0x40c6c5;};return a18_0x57e1();}const remove=async(_0x66f404,_0x272f63)=>{const _0x4427b1=a18_0x3c8c2d,{fileId:_0x380438}=_0x66f404[_0x4427b1(0x151)],{companyId:_0x1e43ca}=_0x66f404[_0x4427b1(0x147)];await(0x0,DeleteService_1[_0x4427b1(0x17a)])(_0x380438,_0x1e43ca);const _0x3956a2=(0x0,socket_1[_0x4427b1(0x162)])();return _0x3956a2['to'](_0x4427b1(0x157)+_0x1e43ca+_0x4427b1(0x14b))['emit'](_0x4427b1(0x152)+_0x1e43ca+_0x4427b1(0x14a),{'action':_0x4427b1(0x177),'fileId':_0x380438}),_0x272f63[_0x4427b1(0x15a)](0xc8)['json']({'message':_0x4427b1(0x156)});};exports[a18_0x3c8c2d(0x143)]=remove;const removeAll=async(_0x1aa584,_0x5448f5)=>{const _0x24ad6f=a18_0x3c8c2d,{companyId:_0x2b32a4}=_0x1aa584['user'];return await(0x0,DeleteAllService_1['default'])(_0x2b32a4),_0x5448f5[_0x24ad6f(0x159)]();};exports[a18_0x3c8c2d(0x178)]=removeAll;const list=async(_0x70b6ed,_0x5547e4)=>{const _0x32ce50=a18_0x3c8c2d,{searchParam:_0x1b75f7}=_0x70b6ed['query'],{companyId:_0x2a21f5}=_0x70b6ed[_0x32ce50(0x147)],_0xda42e6=await(0x0,SimpleListService_1['default'])({'searchParam':_0x1b75f7,'companyId':_0x2a21f5});return _0x5547e4[_0x32ce50(0x15f)](_0xda42e6);};exports['list']=list;