const a19_0x1504f4=a19_0x2a86;(function(_0x4a1c14,_0x3557eb){const _0x2c19e0=a19_0x2a86,_0x21b9eb=_0x4a1c14();while(!![]){try{const _0x59ef31=-parseInt(_0x2c19e0(0x16c))/0x1*(-parseInt(_0x2c19e0(0x17d))/0x2)+parseInt(_0x2c19e0(0x17f))/0x3*(-parseInt(_0x2c19e0(0x176))/0x4)+-parseInt(_0x2c19e0(0x178))/0x5*(-parseInt(_0x2c19e0(0x189))/0x6)+-parseInt(_0x2c19e0(0x196))/0x7+parseInt(_0x2c19e0(0x166))/0x8+parseInt(_0x2c19e0(0x174))/0x9*(parseInt(_0x2c19e0(0x162))/0xa)+parseInt(_0x2c19e0(0x17e))/0xb;if(_0x59ef31===_0x3557eb)break;else _0x21b9eb['push'](_0x21b9eb['shift']());}catch(_0x1fa24c){_0x21b9eb['push'](_0x21b9eb['shift']());}}}(a19_0x34e1,0xa4207));const a19_0x3d6b04=(function(){let _0x1733c7=!![];return function(_0x4f3679,_0x99495e){const _0x5bb222=_0x1733c7?function(){if(_0x99495e){const _0x4bf307=_0x99495e['apply'](_0x4f3679,arguments);return _0x99495e=null,_0x4bf307;}}:function(){};return _0x1733c7=![],_0x5bb222;};}()),a19_0x3ba9c2=a19_0x3d6b04(this,function(){const _0x453db8=a19_0x2a86;return a19_0x3ba9c2[_0x453db8(0x180)]()['search'](_0x453db8(0x16a))['toString']()[_0x453db8(0x16d)](a19_0x3ba9c2)[_0x453db8(0x18f)](_0x453db8(0x16a));});a19_0x3ba9c2();'use strict';function a19_0x2a86(_0x6f6c16,_0x4be3a6){const _0x5993aa=a19_0x34e1();return a19_0x2a86=function(_0x3ba9c2,_0x3d6b04){_0x3ba9c2=_0x3ba9c2-0x15a;let _0x34e16c=_0x5993aa[_0x3ba9c2];return _0x34e16c;},a19_0x2a86(_0x6f6c16,_0x4be3a6);}function a19_0x34e1(){const _0x49d608=['130JTKYMJ','4632221OXcCZS','3MZBfEK','toString','length','-file','company-','default','ERR_NO_PERMISSION','json','delete','query','30Uyhukk','company','user','admin','../libs/socket','getIO','search','uploadMedias','message','body','files','store','send','3971072SctgLA','File\x20List\x20deleted','index','head','../services/FileServices/ShowService','removeAll','findOne','create','lodash','filename','8270QJVgPY','defineProperty','profile','emit','1515672SiGpJx','replace','../errors/AppError','remove','(((.+)+)+)+$','isArray','8795zcXpdF','constructor','show','list','../services/FileServices/SimpleListService','__esModule','../models/FilesOptions','status','5679uPJCSS','update','1943132FAZtjk','entries','21260JNossa','../services/FileServices/UpdateService','params','-mainchannel','../services/FileServices/CreateService'];a19_0x34e1=function(){return _0x49d608;};return a19_0x34e1();}var __importDefault=this&&this['__importDefault']||function(_0x3d15ab){const _0xdd40bf=a19_0x2a86;return _0x3d15ab&&_0x3d15ab[_0xdd40bf(0x171)]?_0x3d15ab:{'default':_0x3d15ab};};Object[a19_0x1504f4(0x163)](exports,a19_0x1504f4(0x171),{'value':!![]}),exports[a19_0x1504f4(0x16f)]=exports[a19_0x1504f4(0x15d)]=exports[a19_0x1504f4(0x169)]=exports[a19_0x1504f4(0x175)]=exports[a19_0x1504f4(0x190)]=exports[a19_0x1504f4(0x16e)]=exports[a19_0x1504f4(0x194)]=exports[a19_0x1504f4(0x15a)]=void 0x0;const socket_1=require(a19_0x1504f4(0x18d)),AppError_1=__importDefault(require(a19_0x1504f4(0x168))),lodash_1=require(a19_0x1504f4(0x160)),CreateService_1=__importDefault(require(a19_0x1504f4(0x17c))),ListService_1=__importDefault(require('../services/FileServices/ListService')),UpdateService_1=__importDefault(require(a19_0x1504f4(0x179))),ShowService_1=__importDefault(require(a19_0x1504f4(0x15c))),DeleteService_1=__importDefault(require('../services/FileServices/DeleteService')),SimpleListService_1=__importDefault(require(a19_0x1504f4(0x170))),DeleteAllService_1=__importDefault(require('../services/FileServices/DeleteAllService')),FilesOptions_1=__importDefault(require(a19_0x1504f4(0x172))),index=async(_0x21b060,_0x57cffe)=>{const _0x42b86d=a19_0x1504f4,{pageNumber:_0x32c68a,searchParam:_0x1ad3af}=_0x21b060[_0x42b86d(0x188)],{companyId:_0x243cab}=_0x21b060[_0x42b86d(0x18b)],{files:_0x5c62ad,count:_0x35ebdb,hasMore:_0x291fcd}=await(0x0,ListService_1[_0x42b86d(0x184)])({'searchParam':_0x1ad3af,'pageNumber':_0x32c68a,'companyId':_0x243cab});return _0x57cffe[_0x42b86d(0x186)]({'files':_0x5c62ad,'count':_0x35ebdb,'hasMore':_0x291fcd});};exports[a19_0x1504f4(0x15a)]=index;const store=async(_0x5ccfa3,_0x1ca62b)=>{const _0x751bdc=a19_0x1504f4,{name:_0x2c5d7a,message:_0x2984d2,options:_0x15487f}=_0x5ccfa3[_0x751bdc(0x192)],{companyId:_0x56a363}=_0x5ccfa3['user'],_0x2429e0=await(0x0,CreateService_1[_0x751bdc(0x184)])({'name':_0x2c5d7a,'message':_0x2984d2,'options':_0x15487f,'companyId':_0x56a363}),_0x3d8674=(0x0,socket_1['getIO'])();return _0x3d8674['to']('company-'+_0x56a363+'-mainchannel')[_0x751bdc(0x165)]('company'+_0x56a363+_0x751bdc(0x182),{'action':_0x751bdc(0x15f),'fileList':_0x2429e0}),_0x1ca62b[_0x751bdc(0x173)](0xc8)[_0x751bdc(0x186)](_0x2429e0);};exports['store']=store;const show=async(_0x41645c,_0x4d8630)=>{const _0x54ca21=a19_0x1504f4,{fileId:_0x52dd1d}=_0x41645c[_0x54ca21(0x17a)],{companyId:_0x4f4899}=_0x41645c[_0x54ca21(0x18b)],_0x1486f6=await(0x0,ShowService_1['default'])(_0x52dd1d,_0x4f4899);return _0x4d8630[_0x54ca21(0x173)](0xc8)[_0x54ca21(0x186)](_0x1486f6);};exports['show']=show;const uploadMedias=async(_0x4cf57e,_0x1992e0)=>{const _0x18c437=a19_0x1504f4,{fileId:_0x3ff080,id:_0x3456d9,mediaType:_0x12c584}=_0x4cf57e[_0x18c437(0x192)],_0x4c3b09=_0x4cf57e[_0x18c437(0x193)],_0x4ad4b8=(0x0,lodash_1[_0x18c437(0x15b)])(_0x4c3b09);try{let _0xdd2e57;if(_0x4c3b09[_0x18c437(0x181)]>0x0)for(const [_0x36b2d8,_0xb2d3b]of _0x4c3b09[_0x18c437(0x177)]()){_0xdd2e57=await FilesOptions_1['default'][_0x18c437(0x15e)]({'where':{'fileId':_0x3ff080,'id':Array['isArray'](_0x3456d9)?_0x3456d9[_0x36b2d8]:_0x3456d9}}),_0xdd2e57[_0x18c437(0x175)]({'path':_0xb2d3b[_0x18c437(0x161)][_0x18c437(0x167)]('/','-'),'mediaType':Array[_0x18c437(0x16b)](_0x12c584)?_0x12c584[_0x36b2d8]:_0x12c584});}return _0x1992e0[_0x18c437(0x195)]({'mensagem':'Arquivos\x20atualizados'});}catch(_0x274c82){throw new AppError_1[(_0x18c437(0x184))](_0x274c82[_0x18c437(0x191)]);}};exports[a19_0x1504f4(0x190)]=uploadMedias;const update=async(_0x753aa8,_0xe016e0)=>{const _0x1bfc38=a19_0x1504f4;if(_0x753aa8['user'][_0x1bfc38(0x164)]!==_0x1bfc38(0x18c))throw new AppError_1['default'](_0x1bfc38(0x185),0x193);const {fileId:_0x5cd807}=_0x753aa8[_0x1bfc38(0x17a)],_0x87914f=_0x753aa8['body'],{companyId:_0x2d647e}=_0x753aa8[_0x1bfc38(0x18b)],_0x55c2ab=await(0x0,UpdateService_1['default'])({'fileData':_0x87914f,'id':_0x5cd807,'companyId':_0x2d647e}),_0x4ec222=(0x0,socket_1['getIO'])();return _0x4ec222['to'](_0x1bfc38(0x183)+_0x2d647e+'-mainchannel')['emit'](_0x1bfc38(0x18a)+_0x2d647e+_0x1bfc38(0x182),{'action':_0x1bfc38(0x175),'fileList':_0x55c2ab}),_0xe016e0[_0x1bfc38(0x173)](0xc8)[_0x1bfc38(0x186)](_0x55c2ab);};exports[a19_0x1504f4(0x175)]=update;const remove=async(_0x1f0b04,_0x37ac5a)=>{const _0x4a7c1e=a19_0x1504f4,{fileId:_0x56ff00}=_0x1f0b04[_0x4a7c1e(0x17a)],{companyId:_0x103253}=_0x1f0b04['user'];await(0x0,DeleteService_1[_0x4a7c1e(0x184)])(_0x56ff00,_0x103253);const _0x123337=(0x0,socket_1[_0x4a7c1e(0x18e)])();return _0x123337['to'](_0x4a7c1e(0x183)+_0x103253+_0x4a7c1e(0x17b))[_0x4a7c1e(0x165)](_0x4a7c1e(0x18a)+_0x103253+'-file',{'action':_0x4a7c1e(0x187),'fileId':_0x56ff00}),_0x37ac5a[_0x4a7c1e(0x173)](0xc8)['json']({'message':_0x4a7c1e(0x197)});};exports['remove']=remove;const removeAll=async(_0x4fc0ee,_0x1fef84)=>{const _0x28c84b=a19_0x1504f4,{companyId:_0x365b92}=_0x4fc0ee[_0x28c84b(0x18b)];return await(0x0,DeleteAllService_1[_0x28c84b(0x184)])(_0x365b92),_0x1fef84['send']();};exports['removeAll']=removeAll;const list=async(_0x3dbfe5,_0x1695c3)=>{const _0x2ea744=a19_0x1504f4,{searchParam:_0x344017}=_0x3dbfe5[_0x2ea744(0x188)],{companyId:_0x594c48}=_0x3dbfe5[_0x2ea744(0x18b)],_0x1c1702=await(0x0,SimpleListService_1['default'])({'searchParam':_0x344017,'companyId':_0x594c48});return _0x1695c3['json'](_0x1c1702);};exports[a19_0x1504f4(0x16f)]=list;