const a18_0x1b693a=a18_0x3d92;(function(_0x1390eb,_0x271cf9){const _0x1e0005=a18_0x3d92,_0xb22e43=_0x1390eb();while(!![]){try{const _0x2fdc55=-parseInt(_0x1e0005(0x116))/0x1+-parseInt(_0x1e0005(0xfd))/0x2*(parseInt(_0x1e0005(0x11e))/0x3)+parseInt(_0x1e0005(0x12e))/0x4+parseInt(_0x1e0005(0x11d))/0x5*(parseInt(_0x1e0005(0x104))/0x6)+parseInt(_0x1e0005(0x11b))/0x7+parseInt(_0x1e0005(0x110))/0x8+parseInt(_0x1e0005(0x112))/0x9;if(_0x2fdc55===_0x271cf9)break;else _0xb22e43['push'](_0xb22e43['shift']());}catch(_0x3b343e){_0xb22e43['push'](_0xb22e43['shift']());}}}(a18_0x3f90,0x8a8c6));const a18_0x532031=(function(){let _0x43aa1b=!![];return function(_0x1b755f,_0x58b134){const _0x42ca70=_0x43aa1b?function(){const _0x55e421=a18_0x3d92;if(_0x58b134){const _0xa5bae8=_0x58b134[_0x55e421(0x118)](_0x1b755f,arguments);return _0x58b134=null,_0xa5bae8;}}:function(){};return _0x43aa1b=![],_0x42ca70;};}()),a18_0x498b54=a18_0x532031(this,function(){const _0xa5f759=a18_0x3d92;return a18_0x498b54[_0xa5f759(0xfc)]()[_0xa5f759(0x12d)](_0xa5f759(0x11c))[_0xa5f759(0xfc)]()['constructor'](a18_0x498b54)[_0xa5f759(0x12d)](_0xa5f759(0x11c));});a18_0x498b54();'use strict';var __importDefault=this&&this[a18_0x1b693a(0x12b)]||function(_0x109504){const _0x3361ba=a18_0x1b693a;return _0x109504&&_0x109504[_0x3361ba(0x114)]?_0x109504:{'default':_0x109504};};Object['defineProperty'](exports,a18_0x1b693a(0x114),{'value':!![]}),exports[a18_0x1b693a(0x113)]=exports[a18_0x1b693a(0x106)]=exports[a18_0x1b693a(0x109)]=exports[a18_0x1b693a(0x102)]=exports['uploadMedias']=exports[a18_0x1b693a(0xf8)]=exports[a18_0x1b693a(0x103)]=exports[a18_0x1b693a(0x10d)]=void 0x0;const socket_1=require('../libs/socket'),AppError_1=__importDefault(require(a18_0x1b693a(0x111))),lodash_1=require(a18_0x1b693a(0x120)),CreateService_1=__importDefault(require(a18_0x1b693a(0x11a))),ListService_1=__importDefault(require(a18_0x1b693a(0x121))),UpdateService_1=__importDefault(require('../services/FileServices/UpdateService')),ShowService_1=__importDefault(require(a18_0x1b693a(0x10f))),DeleteService_1=__importDefault(require(a18_0x1b693a(0xf6))),SimpleListService_1=__importDefault(require(a18_0x1b693a(0x11f))),DeleteAllService_1=__importDefault(require('../services/FileServices/DeleteAllService')),FilesOptions_1=__importDefault(require(a18_0x1b693a(0x119))),index=async(_0x4ab2b8,_0x43df17)=>{const _0x151f78=a18_0x1b693a,{pageNumber:_0x3b98cb,searchParam:_0x12bea4}=_0x4ab2b8['query'],{companyId:_0x3162b8}=_0x4ab2b8[_0x151f78(0x12c)],{files:_0x54a566,count:_0x1acc2a,hasMore:_0x50074d}=await(0x0,ListService_1['default'])({'searchParam':_0x12bea4,'pageNumber':_0x3b98cb,'companyId':_0x3162b8});return _0x43df17[_0x151f78(0x10a)]({'files':_0x54a566,'count':_0x1acc2a,'hasMore':_0x50074d});};exports[a18_0x1b693a(0x10d)]=index;const store=async(_0x185310,_0x40d682)=>{const _0x52e2d4=a18_0x1b693a,{name:_0x3485af,message:_0x21316d,options:_0x3c6371}=_0x185310[_0x52e2d4(0x12a)],{companyId:_0x582283}=_0x185310[_0x52e2d4(0x12c)],_0x1020ef=await(0x0,CreateService_1[_0x52e2d4(0x124)])({'name':_0x3485af,'message':_0x21316d,'options':_0x3c6371,'companyId':_0x582283}),_0x2c6611=(0x0,socket_1[_0x52e2d4(0x10e)])();return _0x2c6611['to'](_0x52e2d4(0x100)+_0x582283+_0x52e2d4(0x123))[_0x52e2d4(0x107)]('company'+_0x582283+_0x52e2d4(0xf9),{'action':_0x52e2d4(0x122),'fileList':_0x1020ef}),_0x40d682[_0x52e2d4(0x105)](0xc8)[_0x52e2d4(0x10a)](_0x1020ef);};exports[a18_0x1b693a(0x103)]=store;const show=async(_0x42acd6,_0x372b3e)=>{const _0x54651b=a18_0x1b693a,{fileId:_0x33924b}=_0x42acd6[_0x54651b(0x10b)],{companyId:_0x356782}=_0x42acd6[_0x54651b(0x12c)],_0x43f4ba=await(0x0,ShowService_1['default'])(_0x33924b,_0x356782);return _0x372b3e[_0x54651b(0x105)](0xc8)[_0x54651b(0x10a)](_0x43f4ba);};exports[a18_0x1b693a(0xf8)]=show;const uploadMedias=async(_0x1a398e,_0x2731ea)=>{const _0x3baa65=a18_0x1b693a,{fileId:_0x868bb6,id:_0x2c8e6e,mediaType:_0x671eff}=_0x1a398e[_0x3baa65(0x12a)],_0x599bdd=_0x1a398e[_0x3baa65(0x108)],_0x5a9820=(0x0,lodash_1['head'])(_0x599bdd);try{let _0x32dfed;if(_0x599bdd[_0x3baa65(0x115)]>0x0)for(const [_0x38ae56,_0x14d333]of _0x599bdd[_0x3baa65(0xf5)]()){_0x32dfed=await FilesOptions_1[_0x3baa65(0x124)][_0x3baa65(0x127)]({'where':{'fileId':_0x868bb6,'id':Array[_0x3baa65(0x125)](_0x2c8e6e)?_0x2c8e6e[_0x38ae56]:_0x2c8e6e}}),_0x32dfed[_0x3baa65(0x102)]({'path':_0x14d333[_0x3baa65(0x126)][_0x3baa65(0x101)]('/','-'),'mediaType':Array[_0x3baa65(0x125)](_0x671eff)?_0x671eff[_0x38ae56]:_0x671eff});}return _0x2731ea[_0x3baa65(0x12f)]({'mensagem':_0x3baa65(0xfe)});}catch(_0x273766){throw new AppError_1['default'](_0x273766[_0x3baa65(0xff)]);}};exports[a18_0x1b693a(0x129)]=uploadMedias;const update=async(_0x7fbb77,_0x529f5b)=>{const _0xd86ff2=a18_0x1b693a;if(_0x7fbb77[_0xd86ff2(0x12c)][_0xd86ff2(0x10c)]!==_0xd86ff2(0xf7))throw new AppError_1[(_0xd86ff2(0x124))]('ERR_NO_PERMISSION',0x193);const {fileId:_0x104cb1}=_0x7fbb77['params'],_0x1109d6=_0x7fbb77[_0xd86ff2(0x12a)],{companyId:_0x431b19}=_0x7fbb77[_0xd86ff2(0x12c)],_0x431dc2=await(0x0,UpdateService_1[_0xd86ff2(0x124)])({'fileData':_0x1109d6,'id':_0x104cb1,'companyId':_0x431b19}),_0x515148=(0x0,socket_1[_0xd86ff2(0x10e)])();return _0x515148['to']('company-'+_0x431b19+_0xd86ff2(0x123))[_0xd86ff2(0x107)](_0xd86ff2(0xfa)+_0x431b19+'-file',{'action':_0xd86ff2(0x102),'fileList':_0x431dc2}),_0x529f5b['status'](0xc8)[_0xd86ff2(0x10a)](_0x431dc2);};exports[a18_0x1b693a(0x102)]=update;function a18_0x3d92(_0x27df33,_0xbbfd01){const _0x46cdff=a18_0x3f90();return a18_0x3d92=function(_0x498b54,_0x532031){_0x498b54=_0x498b54-0xf5;let _0x3f90c6=_0x46cdff[_0x498b54];return _0x3f90c6;},a18_0x3d92(_0x27df33,_0xbbfd01);}const remove=async(_0xfb53a4,_0x4c2064)=>{const _0x499a05=a18_0x1b693a,{fileId:_0x34d5d4}=_0xfb53a4['params'],{companyId:_0x451d78}=_0xfb53a4[_0x499a05(0x12c)];await(0x0,DeleteService_1[_0x499a05(0x124)])(_0x34d5d4,_0x451d78);const _0x3a6e53=(0x0,socket_1[_0x499a05(0x10e)])();return _0x3a6e53['to'](_0x499a05(0x100)+_0x451d78+_0x499a05(0x123))['emit'](_0x499a05(0xfa)+_0x451d78+'-file',{'action':_0x499a05(0x117),'fileId':_0x34d5d4}),_0x4c2064[_0x499a05(0x105)](0xc8)[_0x499a05(0x10a)]({'message':_0x499a05(0x128)});};exports[a18_0x1b693a(0x109)]=remove;const removeAll=async(_0x1246c8,_0x31198a)=>{const _0x436b46=a18_0x1b693a,{companyId:_0x57953c}=_0x1246c8[_0x436b46(0x12c)];return await(0x0,DeleteAllService_1[_0x436b46(0x124)])(_0x57953c),_0x31198a[_0x436b46(0x12f)]();};exports['removeAll']=removeAll;const list=async(_0x237f31,_0x5a67ce)=>{const _0x4f5362=a18_0x1b693a,{searchParam:_0x47909e}=_0x237f31[_0x4f5362(0xfb)],{companyId:_0x25de25}=_0x237f31[_0x4f5362(0x12c)],_0x5ecd6b=await(0x0,SimpleListService_1[_0x4f5362(0x124)])({'searchParam':_0x47909e,'companyId':_0x25de25});return _0x5a67ce[_0x4f5362(0x10a)](_0x5ecd6b);};exports[a18_0x1b693a(0x113)]=list;function a18_0x3f90(){const _0x4bd863=['search','3727952tCYUVg','send','entries','../services/FileServices/DeleteService','admin','show','-file','company','query','toString','1874VrDWSF','Arquivos\x20atualizados','message','company-','replace','update','store','12QWQtAF','status','removeAll','emit','files','remove','json','params','profile','index','getIO','../services/FileServices/ShowService','1489320hSkjwN','../errors/AppError','6110037xgtEVE','list','__esModule','length','943546QZSOha','delete','apply','../models/FilesOptions','../services/FileServices/CreateService','3749165RJhfqo','(((.+)+)+)+$','192455YbmhBd','2877fdaXdy','../services/FileServices/SimpleListService','lodash','../services/FileServices/ListService','create','-mainchannel','default','isArray','filename','findOne','File\x20List\x20deleted','uploadMedias','body','__importDefault','user'];a18_0x3f90=function(){return _0x4bd863;};return a18_0x3f90();}