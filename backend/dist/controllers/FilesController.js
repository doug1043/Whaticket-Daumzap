const a19_0xfef40b=a19_0x3fb7;(function(_0x39db7f,_0x5a7242){const _0x2ce382=a19_0x3fb7,_0x12674e=_0x39db7f();while(!![]){try{const _0x3cd4ea=-parseInt(_0x2ce382(0xbd))/0x1+-parseInt(_0x2ce382(0xae))/0x2*(-parseInt(_0x2ce382(0x94))/0x3)+parseInt(_0x2ce382(0xb9))/0x4+parseInt(_0x2ce382(0x92))/0x5*(-parseInt(_0x2ce382(0xbf))/0x6)+parseInt(_0x2ce382(0x98))/0x7+-parseInt(_0x2ce382(0xa2))/0x8*(parseInt(_0x2ce382(0x9d))/0x9)+-parseInt(_0x2ce382(0xa0))/0xa*(-parseInt(_0x2ce382(0xb2))/0xb);if(_0x3cd4ea===_0x5a7242)break;else _0x12674e['push'](_0x12674e['shift']());}catch(_0x3ce63c){_0x12674e['push'](_0x12674e['shift']());}}}(a19_0xf100,0x352db));const a19_0x2f9267=(function(){let _0x2ef0e1=!![];return function(_0x26922a,_0x4a8a4c){const _0x470191=_0x2ef0e1?function(){if(_0x4a8a4c){const _0x15ad35=_0x4a8a4c['apply'](_0x26922a,arguments);return _0x4a8a4c=null,_0x15ad35;}}:function(){};return _0x2ef0e1=![],_0x470191;};}()),a19_0x58749a=a19_0x2f9267(this,function(){const _0x5481cd=a19_0x3fb7;return a19_0x58749a[_0x5481cd(0x8f)]()[_0x5481cd(0x9a)](_0x5481cd(0x8c))[_0x5481cd(0x8f)]()['constructor'](a19_0x58749a)[_0x5481cd(0x9a)](_0x5481cd(0x8c));});a19_0x58749a();'use strict';var __importDefault=this&&this[a19_0xfef40b(0xc0)]||function(_0x48fceb){const _0x357337=a19_0xfef40b;return _0x48fceb&&_0x48fceb[_0x357337(0xaf)]?_0x48fceb:{'default':_0x48fceb};};Object[a19_0xfef40b(0x9c)](exports,a19_0xfef40b(0xaf),{'value':!![]}),exports[a19_0xfef40b(0xbc)]=exports[a19_0xfef40b(0x9e)]=exports[a19_0xfef40b(0xb5)]=exports[a19_0xfef40b(0x95)]=exports[a19_0xfef40b(0x96)]=exports[a19_0xfef40b(0xa1)]=exports[a19_0xfef40b(0x8b)]=exports[a19_0xfef40b(0xb0)]=void 0x0;const socket_1=require(a19_0xfef40b(0x8a)),AppError_1=__importDefault(require(a19_0xfef40b(0xb6))),lodash_1=require(a19_0xfef40b(0xc1)),CreateService_1=__importDefault(require('../services/FileServices/CreateService')),ListService_1=__importDefault(require(a19_0xfef40b(0xba))),UpdateService_1=__importDefault(require(a19_0xfef40b(0xaa))),ShowService_1=__importDefault(require(a19_0xfef40b(0xac))),DeleteService_1=__importDefault(require(a19_0xfef40b(0x8d))),SimpleListService_1=__importDefault(require('../services/FileServices/SimpleListService')),DeleteAllService_1=__importDefault(require(a19_0xfef40b(0x91))),FilesOptions_1=__importDefault(require('../models/FilesOptions')),index=async(_0x3bffc1,_0xa3424a)=>{const _0x4c42d8=a19_0xfef40b,{pageNumber:_0x77a5d1,searchParam:_0x145b98}=_0x3bffc1[_0x4c42d8(0xbb)],{companyId:_0x14c501}=_0x3bffc1[_0x4c42d8(0x87)],{files:_0x10b8ca,count:_0x533b13,hasMore:_0x14b376}=await(0x0,ListService_1['default'])({'searchParam':_0x145b98,'pageNumber':_0x77a5d1,'companyId':_0x14c501});return _0xa3424a['json']({'files':_0x10b8ca,'count':_0x533b13,'hasMore':_0x14b376});};exports['index']=index;const store=async(_0x89e953,_0x112e0a)=>{const _0x4ce5c0=a19_0xfef40b,{name:_0xd6ee5a,message:_0x2999df,options:_0x1dd5a3}=_0x89e953[_0x4ce5c0(0x88)],{companyId:_0x3525e0}=_0x89e953[_0x4ce5c0(0x87)],_0x14fdfc=await(0x0,CreateService_1[_0x4ce5c0(0xa5)])({'name':_0xd6ee5a,'message':_0x2999df,'options':_0x1dd5a3,'companyId':_0x3525e0}),_0x2f5883=(0x0,socket_1[_0x4ce5c0(0xab)])();return _0x2f5883['to'](_0x4ce5c0(0xa9)+_0x3525e0+_0x4ce5c0(0x8e))[_0x4ce5c0(0xad)](_0x4ce5c0(0xa7)+_0x3525e0+_0x4ce5c0(0x90),{'action':_0x4ce5c0(0x89),'fileList':_0x14fdfc}),_0x112e0a['status'](0xc8)['json'](_0x14fdfc);};exports[a19_0xfef40b(0x8b)]=store;const show=async(_0x26f17f,_0x58ff02)=>{const _0x4c2473=a19_0xfef40b,{fileId:_0x2ac870}=_0x26f17f[_0x4c2473(0xa3)],{companyId:_0x35f4b5}=_0x26f17f[_0x4c2473(0x87)],_0x1f23ed=await(0x0,ShowService_1['default'])(_0x2ac870,_0x35f4b5);return _0x58ff02['status'](0xc8)[_0x4c2473(0x9f)](_0x1f23ed);};exports['show']=show;const uploadMedias=async(_0x52e3de,_0x20e900)=>{const _0x41bd7b=a19_0xfef40b,{fileId:_0xd4c643,id:_0x4ecb05,mediaType:_0x4cfb8a}=_0x52e3de[_0x41bd7b(0x88)],_0x313007=_0x52e3de[_0x41bd7b(0xa8)],_0x4a7a52=(0x0,lodash_1['head'])(_0x313007);try{let _0x46d668;if(_0x313007['length']>0x0)for(const [_0x3b6ff3,_0x3f16bc]of _0x313007[_0x41bd7b(0x97)]()){_0x46d668=await FilesOptions_1['default']['findOne']({'where':{'fileId':_0xd4c643,'id':Array[_0x41bd7b(0xb7)](_0x4ecb05)?_0x4ecb05[_0x3b6ff3]:_0x4ecb05}}),_0x46d668[_0x41bd7b(0x95)]({'path':_0x3f16bc[_0x41bd7b(0xa6)][_0x41bd7b(0xb3)]('/','-'),'mediaType':Array[_0x41bd7b(0xb7)](_0x4cfb8a)?_0x4cfb8a[_0x3b6ff3]:_0x4cfb8a});}return _0x20e900[_0x41bd7b(0x93)]({'mensagem':_0x41bd7b(0x9b)});}catch(_0x431542){throw new AppError_1[(_0x41bd7b(0xa5))](_0x431542[_0x41bd7b(0xb1)]);}};exports[a19_0xfef40b(0x96)]=uploadMedias;const update=async(_0x3d8814,_0x387d84)=>{const _0x2c4592=a19_0xfef40b;if(_0x3d8814[_0x2c4592(0x87)][_0x2c4592(0xb4)]!==_0x2c4592(0xbe))throw new AppError_1[(_0x2c4592(0xa5))]('ERR_NO_PERMISSION',0x193);const {fileId:_0x4ece86}=_0x3d8814[_0x2c4592(0xa3)],_0x4a2c59=_0x3d8814[_0x2c4592(0x88)],{companyId:_0x1dd235}=_0x3d8814[_0x2c4592(0x87)],_0x2b72e6=await(0x0,UpdateService_1[_0x2c4592(0xa5)])({'fileData':_0x4a2c59,'id':_0x4ece86,'companyId':_0x1dd235}),_0x1fc258=(0x0,socket_1[_0x2c4592(0xab)])();return _0x1fc258['to'](_0x2c4592(0xa9)+_0x1dd235+_0x2c4592(0x8e))[_0x2c4592(0xad)](_0x2c4592(0xa7)+_0x1dd235+_0x2c4592(0x90),{'action':_0x2c4592(0x95),'fileList':_0x2b72e6}),_0x387d84[_0x2c4592(0x99)](0xc8)[_0x2c4592(0x9f)](_0x2b72e6);};exports[a19_0xfef40b(0x95)]=update;const remove=async(_0x5ecb59,_0x3b7cce)=>{const _0x503a5e=a19_0xfef40b,{fileId:_0x2113db}=_0x5ecb59[_0x503a5e(0xa3)],{companyId:_0x4f7a25}=_0x5ecb59['user'];await(0x0,DeleteService_1[_0x503a5e(0xa5)])(_0x2113db,_0x4f7a25);const _0x1f4166=(0x0,socket_1[_0x503a5e(0xab)])();return _0x1f4166['to']('company-'+_0x4f7a25+_0x503a5e(0x8e))['emit']('company'+_0x4f7a25+'-file',{'action':_0x503a5e(0xb8),'fileId':_0x2113db}),_0x3b7cce[_0x503a5e(0x99)](0xc8)['json']({'message':_0x503a5e(0xa4)});};function a19_0xf100(){const _0x235a1f=['files','company-','../services/FileServices/UpdateService','getIO','../services/FileServices/ShowService','emit','13218NBRcnE','__esModule','index','message','323257OPFQFA','replace','profile','remove','../errors/AppError','isArray','delete','117944PqmPPJ','../services/FileServices/ListService','query','list','128797jFZtts','admin','23208UCswWT','__importDefault','lodash','user','body','create','../libs/socket','store','(((.+)+)+)+$','../services/FileServices/DeleteService','-mainchannel','toString','-file','../services/FileServices/DeleteAllService','65DbWSkp','send','99SeIyay','update','uploadMedias','entries','2752309hZYyfD','status','search','Arquivos\x20atualizados','defineProperty','3252762GgBdqF','removeAll','json','40NbTANe','show','8xCRbWy','params','File\x20List\x20deleted','default','filename','company'];a19_0xf100=function(){return _0x235a1f;};return a19_0xf100();}exports[a19_0xfef40b(0xb5)]=remove;const removeAll=async(_0xc82c1e,_0xd133cd)=>{const _0x3826a4=a19_0xfef40b,{companyId:_0x34c845}=_0xc82c1e[_0x3826a4(0x87)];return await(0x0,DeleteAllService_1['default'])(_0x34c845),_0xd133cd[_0x3826a4(0x93)]();};exports[a19_0xfef40b(0x9e)]=removeAll;const list=async(_0x19a25a,_0x369631)=>{const _0x2f5823=a19_0xfef40b,{searchParam:_0xa982d0}=_0x19a25a[_0x2f5823(0xbb)],{companyId:_0x5b46b5}=_0x19a25a[_0x2f5823(0x87)],_0x5bacd4=await(0x0,SimpleListService_1[_0x2f5823(0xa5)])({'searchParam':_0xa982d0,'companyId':_0x5b46b5});return _0x369631[_0x2f5823(0x9f)](_0x5bacd4);};function a19_0x3fb7(_0x414c85,_0x237f93){const _0x16db25=a19_0xf100();return a19_0x3fb7=function(_0x58749a,_0x2f9267){_0x58749a=_0x58749a-0x87;let _0xf10031=_0x16db25[_0x58749a];return _0xf10031;},a19_0x3fb7(_0x414c85,_0x237f93);}exports['list']=list;