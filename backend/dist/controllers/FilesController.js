const a21_0x1610e7=a21_0x2872;(function(_0x3cd3bb,_0x51aa6f){const _0x420459=a21_0x2872,_0x3e50b7=_0x3cd3bb();while(!![]){try{const _0x5a4e1e=parseInt(_0x420459(0x206))/0x1+parseInt(_0x420459(0x200))/0x2+parseInt(_0x420459(0x1f0))/0x3*(-parseInt(_0x420459(0x1ef))/0x4)+-parseInt(_0x420459(0x1e7))/0x5*(parseInt(_0x420459(0x210))/0x6)+-parseInt(_0x420459(0x20d))/0x7*(-parseInt(_0x420459(0x1f6))/0x8)+-parseInt(_0x420459(0x1dc))/0x9*(-parseInt(_0x420459(0x1d5))/0xa)+parseInt(_0x420459(0x1d2))/0xb*(-parseInt(_0x420459(0x215))/0xc);if(_0x5a4e1e===_0x51aa6f)break;else _0x3e50b7['push'](_0x3e50b7['shift']());}catch(_0x2f57e9){_0x3e50b7['push'](_0x3e50b7['shift']());}}}(a21_0x1f67,0xd8edd));const a21_0x1d5c7e=(function(){let _0x2de293=!![];return function(_0x48061f,_0x57d76c){const _0x2ab904=_0x2de293?function(){const _0x102afb=a21_0x2872;if(_0x57d76c){const _0x59ab24=_0x57d76c[_0x102afb(0x1f3)](_0x48061f,arguments);return _0x57d76c=null,_0x59ab24;}}:function(){};return _0x2de293=![],_0x2ab904;};}()),a21_0x3c2cc2=a21_0x1d5c7e(this,function(){const _0x11f33d=a21_0x2872;return a21_0x3c2cc2[_0x11f33d(0x1fd)]()[_0x11f33d(0x1e9)](_0x11f33d(0x20a))[_0x11f33d(0x1fd)]()[_0x11f33d(0x1fc)](a21_0x3c2cc2)['search'](_0x11f33d(0x20a));});a21_0x3c2cc2();'use strict';var __importDefault=this&&this[a21_0x1610e7(0x1d7)]||function(_0x349b2a){const _0x3cab30=a21_0x1610e7;return _0x349b2a&&_0x349b2a[_0x3cab30(0x1e2)]?_0x349b2a:{'default':_0x349b2a};};function a21_0x1f67(){const _0x518358=['params','30rMBUTc','body','__importDefault','files','lodash','query','uploadMedias','5201829klmVVb','delete','json','replace','File\x20List\x20deleted','defineProperty','__esModule','length','send','company','-file','45xWuAsT','list','search','mimetype','../libs/socket','../services/StorageService/StorageService','Arquivos\x20atualizados','company-','11348KPiyrJ','1017xjyvYv','../services/FileServices/ShowService','isArray','apply','filename','findOne','4530488FaQfqG','../errors/AppError','show','create','../models/FilesOptions','entries','constructor','toString','user','status','1770614PKbTyi','store','getIO','uploadFile','-mainchannel','../services/FileServices/ListService','802214bAXPKk','removeAll','index','../services/FileServices/UpdateService','(((.+)+)+)+$','emit','default','14LDmhYm','../services/FileServices/SimpleListService','../services/FileServices/DeleteAllService','1159194AICENB','remove','update','uploads','path','276CKjPVz','461527NyNDZA','head'];a21_0x1f67=function(){return _0x518358;};return a21_0x1f67();}Object[a21_0x1610e7(0x1e1)](exports,a21_0x1610e7(0x1e2),{'value':!![]}),exports[a21_0x1610e7(0x1e8)]=exports[a21_0x1610e7(0x207)]=exports[a21_0x1610e7(0x211)]=exports[a21_0x1610e7(0x212)]=exports['uploadMedias']=exports[a21_0x1610e7(0x1f8)]=exports[a21_0x1610e7(0x201)]=exports[a21_0x1610e7(0x208)]=void 0x0;const socket_1=require(a21_0x1610e7(0x1eb)),AppError_1=__importDefault(require(a21_0x1610e7(0x1f7))),lodash_1=require(a21_0x1610e7(0x1d9)),CreateService_1=__importDefault(require('../services/FileServices/CreateService')),ListService_1=__importDefault(require(a21_0x1610e7(0x205))),UpdateService_1=__importDefault(require(a21_0x1610e7(0x209))),ShowService_1=__importDefault(require(a21_0x1610e7(0x1f1))),DeleteService_1=__importDefault(require('../services/FileServices/DeleteService')),SimpleListService_1=__importDefault(require(a21_0x1610e7(0x20e))),DeleteAllService_1=__importDefault(require(a21_0x1610e7(0x20f))),FilesOptions_1=__importDefault(require(a21_0x1610e7(0x1fa))),StorageService_1=__importDefault(require(a21_0x1610e7(0x1ec))),index=async(_0x15d689,_0x5964cd)=>{const _0x54c6d2=a21_0x1610e7,{pageNumber:_0x59ed4c,searchParam:_0x2eccf6}=_0x15d689[_0x54c6d2(0x1da)],{companyId:_0x32124e}=_0x15d689[_0x54c6d2(0x1fe)],{files:_0x4c5bf1,count:_0x36d53c,hasMore:_0x90485c}=await(0x0,ListService_1['default'])({'searchParam':_0x2eccf6,'pageNumber':_0x59ed4c,'companyId':_0x32124e});return _0x5964cd[_0x54c6d2(0x1de)]({'files':_0x4c5bf1,'count':_0x36d53c,'hasMore':_0x90485c});};exports[a21_0x1610e7(0x208)]=index;const store=async(_0x1a468d,_0xa2094d)=>{const _0x1f0308=a21_0x1610e7,{name:_0x236415,message:_0x228349,options:_0x330962}=_0x1a468d['body'],{companyId:_0xf2de4d}=_0x1a468d['user'],_0x6a1e94=await(0x0,CreateService_1[_0x1f0308(0x20c)])({'name':_0x236415,'message':_0x228349,'options':_0x330962,'companyId':_0xf2de4d}),_0x173f62=(0x0,socket_1[_0x1f0308(0x202)])();return _0x173f62['to'](_0x1f0308(0x1ee)+_0xf2de4d+_0x1f0308(0x204))[_0x1f0308(0x20b)](_0x1f0308(0x1e5)+_0xf2de4d+_0x1f0308(0x1e6),{'action':_0x1f0308(0x1f9),'fileList':_0x6a1e94}),_0xa2094d[_0x1f0308(0x1ff)](0xc8)['json'](_0x6a1e94);};function a21_0x2872(_0x29f033,_0x5bc4da){const _0x50e763=a21_0x1f67();return a21_0x2872=function(_0x3c2cc2,_0x1d5c7e){_0x3c2cc2=_0x3c2cc2-0x1d2;let _0x1f67f2=_0x50e763[_0x3c2cc2];return _0x1f67f2;},a21_0x2872(_0x29f033,_0x5bc4da);}exports[a21_0x1610e7(0x201)]=store;const show=async(_0x140001,_0x89a59)=>{const _0x2beca6=a21_0x1610e7,{fileId:_0x3ec030}=_0x140001[_0x2beca6(0x1d4)],{companyId:_0x4542c0}=_0x140001[_0x2beca6(0x1fe)],_0xe9bf33=await(0x0,ShowService_1[_0x2beca6(0x20c)])(_0x3ec030,_0x4542c0);return _0x89a59[_0x2beca6(0x1ff)](0xc8)['json'](_0xe9bf33);};exports['show']=show;const uploadMedias=async(_0x3217af,_0x38b7ec)=>{const _0x3da932=a21_0x1610e7,{fileId:_0x1034dc,id:_0x340368,mediaType:_0x1574b7}=_0x3217af[_0x3da932(0x1d6)],{companyId:_0x58c5b9}=_0x3217af['user'],_0x56d3d6=_0x3217af[_0x3da932(0x1d8)],_0x934229=(0x0,lodash_1[_0x3da932(0x1d3)])(_0x56d3d6);try{let _0x486744;if(_0x56d3d6[_0x3da932(0x1e3)]>0x0)for(const [_0xabd277,_0x28a798]of _0x56d3d6[_0x3da932(0x1fb)]()){const {url:_0x3e7b08}=await StorageService_1[_0x3da932(0x20c)][_0x3da932(0x203)](_0x58c5b9,_0x3da932(0x213),_0x28a798[_0x3da932(0x1f4)][_0x3da932(0x1df)]('/','-'),_0x28a798[_0x3da932(0x214)],_0x28a798[_0x3da932(0x1ea)]);_0x486744=await FilesOptions_1[_0x3da932(0x20c)][_0x3da932(0x1f5)]({'where':{'fileId':_0x1034dc,'id':Array[_0x3da932(0x1f2)](_0x340368)?_0x340368[_0xabd277]:_0x340368}}),_0x486744['update']({'path':_0x3e7b08,'mediaType':Array[_0x3da932(0x1f2)](_0x1574b7)?_0x1574b7[_0xabd277]:_0x1574b7});}return _0x38b7ec[_0x3da932(0x1e4)]({'mensagem':_0x3da932(0x1ed)});}catch(_0x3eed46){throw new AppError_1['default'](_0x3eed46['message']);}};exports[a21_0x1610e7(0x1db)]=uploadMedias;const update=async(_0x1c0bfc,_0x26f692)=>{const _0xd3c69d=a21_0x1610e7;if(_0x1c0bfc[_0xd3c69d(0x1fe)]['profile']!=='admin')throw new AppError_1[(_0xd3c69d(0x20c))]('ERR_NO_PERMISSION',0x193);const {fileId:_0x1ab63c}=_0x1c0bfc[_0xd3c69d(0x1d4)],_0x1b0c06=_0x1c0bfc[_0xd3c69d(0x1d6)],{companyId:_0x5c7442}=_0x1c0bfc['user'],_0x24bf0d=await(0x0,UpdateService_1[_0xd3c69d(0x20c)])({'fileData':_0x1b0c06,'id':_0x1ab63c,'companyId':_0x5c7442}),_0x460fdc=(0x0,socket_1[_0xd3c69d(0x202)])();return _0x460fdc['to'](_0xd3c69d(0x1ee)+_0x5c7442+_0xd3c69d(0x204))['emit']('company'+_0x5c7442+_0xd3c69d(0x1e6),{'action':_0xd3c69d(0x212),'fileList':_0x24bf0d}),_0x26f692['status'](0xc8)[_0xd3c69d(0x1de)](_0x24bf0d);};exports['update']=update;const remove=async(_0x2f0cb9,_0x122f6d)=>{const _0x41e015=a21_0x1610e7,{fileId:_0xe2a37a}=_0x2f0cb9[_0x41e015(0x1d4)],{companyId:_0x100d70}=_0x2f0cb9[_0x41e015(0x1fe)];await(0x0,DeleteService_1[_0x41e015(0x20c)])(_0xe2a37a,_0x100d70);const _0x1ed648=(0x0,socket_1[_0x41e015(0x202)])();return _0x1ed648['to'](_0x41e015(0x1ee)+_0x100d70+'-mainchannel')[_0x41e015(0x20b)](_0x41e015(0x1e5)+_0x100d70+_0x41e015(0x1e6),{'action':_0x41e015(0x1dd),'fileId':_0xe2a37a}),_0x122f6d[_0x41e015(0x1ff)](0xc8)['json']({'message':_0x41e015(0x1e0)});};exports[a21_0x1610e7(0x211)]=remove;const removeAll=async(_0x5d4b60,_0x3a48ef)=>{const _0x34a40c=a21_0x1610e7,{companyId:_0x44016e}=_0x5d4b60[_0x34a40c(0x1fe)];return await(0x0,DeleteAllService_1['default'])(_0x44016e),_0x3a48ef[_0x34a40c(0x1e4)]();};exports[a21_0x1610e7(0x207)]=removeAll;const list=async(_0x5573f7,_0x382c7d)=>{const _0x378fe3=a21_0x1610e7,{searchParam:_0x5627e1}=_0x5573f7[_0x378fe3(0x1da)],{companyId:_0x33c73b}=_0x5573f7[_0x378fe3(0x1fe)],_0x48ae8e=await(0x0,SimpleListService_1[_0x378fe3(0x20c)])({'searchParam':_0x5627e1,'companyId':_0x33c73b});return _0x382c7d[_0x378fe3(0x1de)](_0x48ae8e);};exports[a21_0x1610e7(0x1e8)]=list;