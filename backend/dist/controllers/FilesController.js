const a18_0x219fdf=a18_0x1adc;(function(_0x197cea,_0x7b828d){const _0x33e614=a18_0x1adc,_0x22dd45=_0x197cea();while(!![]){try{const _0x2e1cea=parseInt(_0x33e614(0x16d))/0x1+parseInt(_0x33e614(0x154))/0x2+parseInt(_0x33e614(0x150))/0x3*(-parseInt(_0x33e614(0x178))/0x4)+parseInt(_0x33e614(0x159))/0x5+parseInt(_0x33e614(0x168))/0x6*(-parseInt(_0x33e614(0x160))/0x7)+-parseInt(_0x33e614(0x165))/0x8+parseInt(_0x33e614(0x16b))/0x9;if(_0x2e1cea===_0x7b828d)break;else _0x22dd45['push'](_0x22dd45['shift']());}catch(_0x33ab50){_0x22dd45['push'](_0x22dd45['shift']());}}}(a18_0x160c,0xe830f));function a18_0x1adc(_0x48b4d3,_0x1711b7){const _0x1d835a=a18_0x160c();return a18_0x1adc=function(_0x16a26f,_0x2236c3){_0x16a26f=_0x16a26f-0x146;let _0x160ccd=_0x1d835a[_0x16a26f];return _0x160ccd;},a18_0x1adc(_0x48b4d3,_0x1711b7);}const a18_0x2236c3=(function(){let _0x528092=!![];return function(_0x1bd72b,_0xb81cf3){const _0x30765a=_0x528092?function(){if(_0xb81cf3){const _0xa1c6ab=_0xb81cf3['apply'](_0x1bd72b,arguments);return _0xb81cf3=null,_0xa1c6ab;}}:function(){};return _0x528092=![],_0x30765a;};}()),a18_0x16a26f=a18_0x2236c3(this,function(){const _0x3d54ea=a18_0x1adc;return a18_0x16a26f[_0x3d54ea(0x157)]()[_0x3d54ea(0x14c)]('(((.+)+)+)+$')['toString']()['constructor'](a18_0x16a26f)[_0x3d54ea(0x14c)](_0x3d54ea(0x156));});a18_0x16a26f();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x44dd22){const _0x496656=a18_0x1adc;return _0x44dd22&&_0x44dd22[_0x496656(0x14d)]?_0x44dd22:{'default':_0x44dd22};};Object['defineProperty'](exports,a18_0x219fdf(0x14d),{'value':!![]}),exports[a18_0x219fdf(0x16f)]=exports['removeAll']=exports[a18_0x219fdf(0x15e)]=exports[a18_0x219fdf(0x169)]=exports[a18_0x219fdf(0x155)]=exports[a18_0x219fdf(0x161)]=exports[a18_0x219fdf(0x14e)]=exports[a18_0x219fdf(0x146)]=void 0x0;const socket_1=require(a18_0x219fdf(0x14a)),AppError_1=__importDefault(require(a18_0x219fdf(0x158))),lodash_1=require(a18_0x219fdf(0x170)),CreateService_1=__importDefault(require(a18_0x219fdf(0x176))),ListService_1=__importDefault(require(a18_0x219fdf(0x162))),UpdateService_1=__importDefault(require(a18_0x219fdf(0x17a))),ShowService_1=__importDefault(require(a18_0x219fdf(0x16e))),DeleteService_1=__importDefault(require(a18_0x219fdf(0x151))),SimpleListService_1=__importDefault(require('../services/FileServices/SimpleListService')),DeleteAllService_1=__importDefault(require(a18_0x219fdf(0x177))),FilesOptions_1=__importDefault(require(a18_0x219fdf(0x179))),index=async(_0x28543d,_0x221dfc)=>{const _0x49008a=a18_0x219fdf,{pageNumber:_0x205068,searchParam:_0xc5d76a}=_0x28543d[_0x49008a(0x167)],{companyId:_0x1dc59a}=_0x28543d[_0x49008a(0x16c)],{files:_0x3e5240,count:_0x401dca,hasMore:_0x950259}=await(0x0,ListService_1[_0x49008a(0x152)])({'searchParam':_0xc5d76a,'pageNumber':_0x205068,'companyId':_0x1dc59a});return _0x221dfc[_0x49008a(0x173)]({'files':_0x3e5240,'count':_0x401dca,'hasMore':_0x950259});};exports[a18_0x219fdf(0x146)]=index;const store=async(_0x238fd8,_0x26c26e)=>{const _0x5a7807=a18_0x219fdf,{name:_0x5037c5,message:_0x2d8e1b,options:_0x254a1f}=_0x238fd8[_0x5a7807(0x17b)],{companyId:_0x48dbc8}=_0x238fd8['user'],_0x336d4a=await(0x0,CreateService_1[_0x5a7807(0x152)])({'name':_0x5037c5,'message':_0x2d8e1b,'options':_0x254a1f,'companyId':_0x48dbc8}),_0x563e9a=(0x0,socket_1[_0x5a7807(0x15d)])();return _0x563e9a['to'](_0x5a7807(0x14b)+_0x48dbc8+_0x5a7807(0x171))[_0x5a7807(0x147)](_0x5a7807(0x166)+_0x48dbc8+_0x5a7807(0x174),{'action':_0x5a7807(0x153),'fileList':_0x336d4a}),_0x26c26e[_0x5a7807(0x15a)](0xc8)[_0x5a7807(0x173)](_0x336d4a);};exports[a18_0x219fdf(0x14e)]=store;const show=async(_0x54a268,_0x4c144b)=>{const _0x1b32c5=a18_0x219fdf,{fileId:_0xb5afcd}=_0x54a268[_0x1b32c5(0x15f)],{companyId:_0x4b0475}=_0x54a268[_0x1b32c5(0x16c)],_0x53a0f6=await(0x0,ShowService_1[_0x1b32c5(0x152)])(_0xb5afcd,_0x4b0475);return _0x4c144b[_0x1b32c5(0x15a)](0xc8)[_0x1b32c5(0x173)](_0x53a0f6);};function a18_0x160c(){const _0xc9928f=['../services/FileServices/ListService','send','removeAll','7038576gBHOGy','company','query','6aAYBEd','update','head','5170284VLdhKg','user','1554230IxKRTG','../services/FileServices/ShowService','list','lodash','-mainchannel','filename','json','-file','ERR_NO_PERMISSION','../services/FileServices/CreateService','../services/FileServices/DeleteAllService','3412JVrifk','../models/FilesOptions','../services/FileServices/UpdateService','body','index','emit','message','isArray','../libs/socket','company-','search','__esModule','store','admin','2319BPAnGV','../services/FileServices/DeleteService','default','create','826778owmXiL','uploadMedias','(((.+)+)+)+$','toString','../errors/AppError','7481990ytySTx','status','files','replace','getIO','remove','params','10837729uxXNUy','show'];a18_0x160c=function(){return _0xc9928f;};return a18_0x160c();}exports[a18_0x219fdf(0x161)]=show;const uploadMedias=async(_0x5b8d94,_0x3ec94a)=>{const _0x1fc707=a18_0x219fdf,{fileId:_0x4794d5,id:_0x2a16ec,mediaType:_0x219873}=_0x5b8d94['body'],_0x127ee4=_0x5b8d94[_0x1fc707(0x15b)],_0x3f4c98=(0x0,lodash_1[_0x1fc707(0x16a)])(_0x127ee4);try{let _0x40daa8;if(_0x127ee4['length']>0x0)for(const [_0x433a9e,_0x594f05]of _0x127ee4['entries']()){_0x40daa8=await FilesOptions_1[_0x1fc707(0x152)]['findOne']({'where':{'fileId':_0x4794d5,'id':Array[_0x1fc707(0x149)](_0x2a16ec)?_0x2a16ec[_0x433a9e]:_0x2a16ec}}),_0x40daa8[_0x1fc707(0x169)]({'path':_0x594f05[_0x1fc707(0x172)][_0x1fc707(0x15c)]('/','-'),'mediaType':Array['isArray'](_0x219873)?_0x219873[_0x433a9e]:_0x219873});}return _0x3ec94a[_0x1fc707(0x163)]({'mensagem':'Arquivos\x20atualizados'});}catch(_0x5ec4dc){throw new AppError_1['default'](_0x5ec4dc[_0x1fc707(0x148)]);}};exports[a18_0x219fdf(0x155)]=uploadMedias;const update=async(_0x5ca84e,_0x354230)=>{const _0x4c6b56=a18_0x219fdf;if(_0x5ca84e[_0x4c6b56(0x16c)]['profile']!==_0x4c6b56(0x14f))throw new AppError_1[(_0x4c6b56(0x152))](_0x4c6b56(0x175),0x193);const {fileId:_0x56f43c}=_0x5ca84e[_0x4c6b56(0x15f)],_0x494516=_0x5ca84e['body'],{companyId:_0x52bb9c}=_0x5ca84e['user'],_0x44e9c6=await(0x0,UpdateService_1[_0x4c6b56(0x152)])({'fileData':_0x494516,'id':_0x56f43c,'companyId':_0x52bb9c}),_0x2fc0ef=(0x0,socket_1[_0x4c6b56(0x15d)])();return _0x2fc0ef['to']('company-'+_0x52bb9c+_0x4c6b56(0x171))[_0x4c6b56(0x147)](_0x4c6b56(0x166)+_0x52bb9c+_0x4c6b56(0x174),{'action':_0x4c6b56(0x169),'fileList':_0x44e9c6}),_0x354230[_0x4c6b56(0x15a)](0xc8)[_0x4c6b56(0x173)](_0x44e9c6);};exports[a18_0x219fdf(0x169)]=update;const remove=async(_0x1ab80f,_0x2d8f4b)=>{const _0x4db996=a18_0x219fdf,{fileId:_0xad5a55}=_0x1ab80f['params'],{companyId:_0x4175d4}=_0x1ab80f['user'];await(0x0,DeleteService_1[_0x4db996(0x152)])(_0xad5a55,_0x4175d4);const _0x3a73db=(0x0,socket_1[_0x4db996(0x15d)])();return _0x3a73db['to'](_0x4db996(0x14b)+_0x4175d4+_0x4db996(0x171))[_0x4db996(0x147)](_0x4db996(0x166)+_0x4175d4+_0x4db996(0x174),{'action':'delete','fileId':_0xad5a55}),_0x2d8f4b[_0x4db996(0x15a)](0xc8)[_0x4db996(0x173)]({'message':'File\x20List\x20deleted'});};exports[a18_0x219fdf(0x15e)]=remove;const removeAll=async(_0x22abcc,_0x1e37e8)=>{const _0x2544e9=a18_0x219fdf,{companyId:_0xf733ad}=_0x22abcc[_0x2544e9(0x16c)];return await(0x0,DeleteAllService_1['default'])(_0xf733ad),_0x1e37e8[_0x2544e9(0x163)]();};exports[a18_0x219fdf(0x164)]=removeAll;const list=async(_0x56a5cc,_0x3c5c31)=>{const _0x7d2f7=a18_0x219fdf,{searchParam:_0xb9c3d0}=_0x56a5cc[_0x7d2f7(0x167)],{companyId:_0x4c8b77}=_0x56a5cc['user'],_0x3a1d3f=await(0x0,SimpleListService_1[_0x7d2f7(0x152)])({'searchParam':_0xb9c3d0,'companyId':_0x4c8b77});return _0x3c5c31[_0x7d2f7(0x173)](_0x3a1d3f);};exports[a18_0x219fdf(0x16f)]=list;