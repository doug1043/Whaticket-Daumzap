const a26_0x194732=a26_0x1355;function a26_0x1355(_0x1e2e81,_0x5da91e){const _0x74486b=a26_0x1c10();return a26_0x1355=function(_0x580391,_0x9df4e5){_0x580391=_0x580391-0xa1;let _0x1c1066=_0x74486b[_0x580391];return _0x1c1066;},a26_0x1355(_0x1e2e81,_0x5da91e);}(function(_0x1d6611,_0x4cd155){const _0x105c7f=a26_0x1355,_0x41d9d6=_0x1d6611();while(!![]){try{const _0x2f7759=-parseInt(_0x105c7f(0x100))/0x1+parseInt(_0x105c7f(0x102))/0x2+-parseInt(_0x105c7f(0x110))/0x3+parseInt(_0x105c7f(0x10b))/0x4*(-parseInt(_0x105c7f(0xd8))/0x5)+parseInt(_0x105c7f(0xc1))/0x6+-parseInt(_0x105c7f(0x11f))/0x7+parseInt(_0x105c7f(0xaf))/0x8;if(_0x2f7759===_0x4cd155)break;else _0x41d9d6['push'](_0x41d9d6['shift']());}catch(_0x2ea2df){_0x41d9d6['push'](_0x41d9d6['shift']());}}}(a26_0x1c10,0x6c2c8));const a26_0x9df4e5=(function(){let _0x3ecb79=!![];return function(_0xca5585,_0x2581e0){const _0x4c1133=_0x3ecb79?function(){const _0x5693fd=a26_0x1355;if(_0x2581e0){const _0x2fb4e3=_0x2581e0[_0x5693fd(0xf2)](_0xca5585,arguments);return _0x2581e0=null,_0x2fb4e3;}}:function(){};return _0x3ecb79=![],_0x4c1133;};}()),a26_0x580391=a26_0x9df4e5(this,function(){const _0x20e6b6=a26_0x1355;return a26_0x580391[_0x20e6b6(0x111)]()[_0x20e6b6(0x128)]('(((.+)+)+)+$')[_0x20e6b6(0x111)]()['constructor'](a26_0x580391)[_0x20e6b6(0x128)](_0x20e6b6(0xd7));});a26_0x580391();'use strict';var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x40a90c,_0xa93210,_0x489afb,_0x5828f0){const _0x42a973=a26_0x1355;if(_0x5828f0===undefined)_0x5828f0=_0x489afb;var _0xf7b3b7=Object['getOwnPropertyDescriptor'](_0xa93210,_0x489afb);(!_0xf7b3b7||(_0x42a973(0xb2)in _0xf7b3b7?!_0xa93210['__esModule']:_0xf7b3b7[_0x42a973(0x118)]||_0xf7b3b7[_0x42a973(0x130)]))&&(_0xf7b3b7={'enumerable':!![],'get':function(){return _0xa93210[_0x489afb];}}),Object['defineProperty'](_0x40a90c,_0x5828f0,_0xf7b3b7);}:function(_0x4ae032,_0x2dcd18,_0x385820,_0x2608ac){if(_0x2608ac===undefined)_0x2608ac=_0x385820;_0x4ae032[_0x2608ac]=_0x2dcd18[_0x385820];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x345887,_0x3025bf){Object['defineProperty'](_0x345887,'default',{'enumerable':!![],'value':_0x3025bf});}:function(_0x2449ba,_0xa47d8f){const _0xc58b5c=a26_0x1355;_0x2449ba[_0xc58b5c(0x105)]=_0xa47d8f;}),__importStar=this&&this[a26_0x194732(0xb1)]||function(_0x480ed2){const _0x27dc7f=a26_0x194732;if(_0x480ed2&&_0x480ed2[_0x27dc7f(0x10d)])return _0x480ed2;var _0x58313d={};if(_0x480ed2!=null){for(var _0x3bfb6c in _0x480ed2)if(_0x3bfb6c!==_0x27dc7f(0x105)&&Object[_0x27dc7f(0xfa)]['hasOwnProperty'][_0x27dc7f(0x113)](_0x480ed2,_0x3bfb6c))__createBinding(_0x58313d,_0x480ed2,_0x3bfb6c);}return __setModuleDefault(_0x58313d,_0x480ed2),_0x58313d;},__importDefault=this&&this[a26_0x194732(0x125)]||function(_0x22424a){const _0x177bba=a26_0x194732;return _0x22424a&&_0x22424a[_0x177bba(0x10d)]?_0x22424a:{'default':_0x22424a};};Object[a26_0x194732(0xfe)](exports,a26_0x194732(0x10d),{'value':!![]}),exports[a26_0x194732(0xf3)]=exports[a26_0x194732(0xdb)]=exports['addReaction']=exports[a26_0x194732(0xed)]=exports[a26_0x194732(0xd0)]=exports['remove']=exports[a26_0x194732(0x124)]=exports['getAll']=exports[a26_0x194732(0xd1)]=exports[a26_0x194732(0xcd)]=void 0x0;const AppError_1=__importDefault(require(a26_0x194732(0xe2))),SetTicketMessagesAsRead_1=__importDefault(require(a26_0x194732(0x123))),socket_1=require(a26_0x194732(0x11e)),Message_1=__importDefault(require('../models/Message')),Ticket_1=__importDefault(require(a26_0x194732(0x117))),Queue_1=__importDefault(require(a26_0x194732(0xde))),User_1=__importDefault(require(a26_0x194732(0xd9))),Whatsapp_1=__importDefault(require(a26_0x194732(0xf0))),Mustache_1=__importDefault(require('../helpers/Mustache')),ListMessagesService_1=__importDefault(require('../services/MessageServices/ListMessagesService')),ShowTicketService_1=__importDefault(require(a26_0x194732(0x138))),FindOrCreateTicketService_1=__importDefault(require(a26_0x194732(0x10e))),UpdateTicketService_1=__importDefault(require(a26_0x194732(0xa3))),DeleteWhatsAppMessage_1=__importDefault(require(a26_0x194732(0xb7))),SendWhatsAppMedia_1=__importStar(require(a26_0x194732(0x133))),SendWhatsAppMessage_1=__importDefault(require(a26_0x194732(0xee))),SendWhatsAppReaction_1=__importDefault(require(a26_0x194732(0xe1))),CheckNumber_1=__importDefault(require(a26_0x194732(0xaa))),EditWhatsAppMessage_1=__importDefault(require(a26_0x194732(0xb0))),TranslateAudioService_1=__importDefault(require(a26_0x194732(0xfd))),CreateOrUpdateContactService_1=__importDefault(require(a26_0x194732(0xe0))),ShowMessageService_1=__importStar(require(a26_0x194732(0xe4))),ShowContactService_1=require(a26_0x194732(0x12a)),ShowUserService_1=__importDefault(require(a26_0x194732(0x114))),user_1=require(a26_0x194732(0xb8)),UpdateTicketService_2=require(a26_0x194732(0xa3)),ListAllMessagesService_1=__importDefault(require(a26_0x194732(0xb5))),validator_1=require(a26_0x194732(0xbe)),ffmpeg_static_1=__importDefault(require(a26_0x194732(0xae))),fluent_ffmpeg_1=__importDefault(require(a26_0x194732(0x10f))),crypto_1=__importDefault(require(a26_0x194732(0x134))),GetWhatsappWbot_1=__importDefault(require(a26_0x194732(0x131))),wbot_1=require(a26_0x194732(0xd6)),SendPresenceStatus_1=require(a26_0x194732(0xf4));fluent_ffmpeg_1[a26_0x194732(0x105)]['setFfmpegPath'](ffmpeg_static_1[a26_0x194732(0x105)]);const index=async(_0x506962,_0x439bcb)=>{const _0x27c64e=a26_0x194732,{ticketId:_0x16a791}=_0x506962[_0x27c64e(0xcf)],{pageNumber:_0x2a356d}=_0x506962[_0x27c64e(0xef)],{companyId:_0x5b5c1b,profile:_0x10ddb0}=_0x506962[_0x27c64e(0xa5)],_0x474b3a=[];if(_0x10ddb0!==_0x27c64e(0x112)){const _0x1769df=await User_1[_0x27c64e(0x105)][_0x27c64e(0xb9)](_0x506962[_0x27c64e(0xa5)]['id'],{'include':[{'model':Queue_1[_0x27c64e(0x105)],'as':_0x27c64e(0xfc)}]});_0x1769df[_0x27c64e(0xfc)][_0x27c64e(0xda)](_0x18b44b=>{const _0x5e421d=_0x27c64e;_0x474b3a[_0x5e421d(0xab)](_0x18b44b['id']);});}const {count:_0x366eb0,messages:_0x36304c,ticket:_0x2e6c04,hasMore:_0xea985b}=await(0x0,ListMessagesService_1['default'])({'pageNumber':_0x2a356d,'ticketId':_0x16a791,'companyId':_0x5b5c1b,'queues':_0x474b3a});return(0x0,SetTicketMessagesAsRead_1[_0x27c64e(0x105)])(_0x2e6c04),_0x439bcb['json']({'count':_0x366eb0,'messages':_0x36304c,'ticket':_0x2e6c04,'hasMore':_0xea985b});};exports[a26_0x194732(0xcd)]=index;const store=async(_0x298cb4,_0x13ab9c)=>{const _0x4f62d6=a26_0x194732,{ticketId:_0x2bd6eb}=_0x298cb4[_0x4f62d6(0xcf)],{body:_0x2c9276,quotedMsg:_0x2e9520,vCard:_0xb1f323}=_0x298cb4['body'],_0x50ce9b=_0x298cb4[_0x4f62d6(0x132)],{companyId:_0x26f5df,id:_0x534978}=_0x298cb4['user'],_0x3a5708=await(0x0,ShowTicketService_1[_0x4f62d6(0x105)])(_0x2bd6eb,_0x26f5df);_0x3a5708[_0x4f62d6(0xe8)]!==_0x4f62d6(0xb4)&&await(0x0,UpdateTicketService_1[_0x4f62d6(0x105)])({'ticketId':_0x3a5708['id'],'ticketData':{'status':_0x4f62d6(0xb4),'userId':parseInt(_0x534978)},'companyId':_0x26f5df});if(_0x3a5708[_0x4f62d6(0x115)]>0x0)(0x0,SetTicketMessagesAsRead_1[_0x4f62d6(0x105)])(_0x3a5708);if(_0x50ce9b)await Promise[_0x4f62d6(0x104)](_0x50ce9b[_0x4f62d6(0x11a)](async(_0x1faac3,_0x5ee517)=>{const _0x208e5d=_0x4f62d6;return(0x0,SendWhatsAppMedia_1[_0x208e5d(0x105)])({'media':_0x1faac3,'ticket':_0x3a5708,'body':Array[_0x208e5d(0xc4)](_0x2c9276)?_0x2c9276[_0x5ee517]:_0x2c9276});}));else{const _0x5025c0=await(0x0,SendWhatsAppMessage_1[_0x4f62d6(0x105)])({'body':_0x2c9276,'ticket':_0x3a5708,'quotedMsg':_0x2e9520,'vCard':_0xb1f323});}return _0x13ab9c[_0x4f62d6(0xed)]();};exports[a26_0x194732(0xd1)]=store;const getAll=async(_0x41576c,_0x188f0f)=>{const _0x1c2547=a26_0x194732,_0xd47493=_0x41576c[_0x1c2547(0xef)][_0x1c2547(0xbf)],_0x55ed8d=_0x41576c[_0x1c2547(0xef)][_0x1c2547(0x11c)],_0x5aa7d6=(0x0,validator_1[_0x1c2547(0xe9)])(_0x41576c[_0x1c2547(0xef)][_0x1c2547(0xa7)]),{companyId:_0x4dc6e9}=_0x41576c[_0x1c2547(0xa5)],{count:_0x305c44}=await(0x0,ListAllMessagesService_1[_0x1c2547(0x105)])({'companyId':_0x4dc6e9,'fromMe':_0x5aa7d6,'dateStart':_0xd47493,'dateEnd':_0x55ed8d});return _0x188f0f[_0x1c2547(0xa6)]({'count':_0x305c44});};exports[a26_0x194732(0xb3)]=getAll;const edit=async(_0x395ee7,_0x47007a)=>{const _0x4e8fd7=a26_0x194732,{messageId:_0x48a1ad}=_0x395ee7['params'],{companyId:_0x631e84}=_0x395ee7[_0x4e8fd7(0xa5)],{body:_0x114efb}=_0x395ee7[_0x4e8fd7(0xc6)],{ticketId:_0xa83b59,message:_0x339d57}=await(0x0,EditWhatsAppMessage_1['default'])({'messageId':_0x48a1ad,'companyId':_0x631e84,'body':_0x114efb}),_0x1b0c3f=(0x0,socket_1[_0x4e8fd7(0xd4)])();return _0x1b0c3f['to'](_0xa83b59[_0x4e8fd7(0x111)]())[_0x4e8fd7(0x135)]('company-'+_0x631e84+'-appMessage',{'action':_0x4e8fd7(0x109),'message':_0x339d57}),_0x47007a[_0x4e8fd7(0xed)]();};exports[a26_0x194732(0x124)]=edit;function a26_0x1c10(){const _0x12c25c=['TicketId\x20is\x20required','903600JyKspX','toFormat','all','default','Transcrição\x20não\x20disponível','Não\x20foi\x20possível\x20enviar\x20a\x20mensagem,\x20tente\x20novamente\x20em\x20alguns\x20instantes','\x20enviado\x20com\x20sucesso','update','getWbot','5904IIfOGA','jid','__esModule','../services/TicketServices/FindOrCreateTicketService','fluent-ffmpeg','292866nGnTYA','toString','admin','call','../services/UserServices/ShowUserService','unreadMessages','./public/company','../models/Ticket','writable','MessageId\x20or\x20ContactId\x20not\x20found','map','replace','dateEnd','Ticket\x20not\x20found','../libs/socket','1629320VmYaOp','company-','companyId','extendedTextMessage','../helpers/SetTicketMessagesAsRead','edit','__importDefault','saveToFile','userId','search','message','../services/ContactServices/ShowContactService','add','.mp3','reactions','Contact\x20not\x20found','hex','configurable','../helpers/GetWhatsappWbot','files','../services/WbotServices/SendWhatsAppMedia','crypto','emit','s.whatsapp.net','O\x20número\x20é\x20obrigatório','../services/TicketServices/ShowTicketService','remove','Mensagem\x20enviada','../services/TicketServices/UpdateTicketService','save','user','json','fromMe','closed','addReaction','../services/WbotServices/CheckNumber','push','error','mediaUrl','ffmpeg-static','6881368xiUiqR','../services/WbotServices/EditWhatsAppMessage','__importStar','get','getAll','open','../services/MessageServices/ListAllMessagesService','messageQueue','../services/WbotServices/DeleteWhatsAppMessage','../utils/user','findByPk','Whatsapp\x20from\x20message\x20not\x20found','randomBytes','Erro\x20na\x20conversão\x20do\x20áudio:','Erro\x20ao\x20adicionar\x20reação:','validator','dateStart','number','2664900ZrUcUI','contact','closeTicket','isArray','Não\x20foi\x20possível\x20realizar\x20a\x20operação','body','filename','isGroup','Erro\x20ao\x20adicionar\x20reação','g.us','SendWhatsAppMediaFileAddress','-appMessage','index','mediaType','params','typing','store','SendMessage','includes','getIO','messageId','../libs/wbot','(((.+)+)+)+$','1065kQmQHr','../models/User','forEach','storeAudio','ticketId','true','../models/Queue','app','../services/ContactServices/CreateOrUpdateContactService','../services/WbotServices/SendWhatsAppReaction','../errors/AppError','originalname','../services/MessageServices/ShowMessageService','conversation','log','end','status','toBoolean','mp3','Reação\x20adicionada\x20com\x20sucesso!','file','send','../services/WbotServices/SendWhatsAppMessage','query','../models/Whatsapp','firstQueueThisUser','apply','forwardMessage','../helpers/SendPresenceStatus','@g.us','path','Mensagem\x20não\x20encontrada','keys','Message\x20not\x20found','prototype','contactId','queues','../services/MessageServices/TranslateAudioService','defineProperty','notifyUpdate','668271avzeiG'];a26_0x1c10=function(){return _0x12c25c;};return a26_0x1c10();}const remove=async(_0x2d1069,_0x28a06a)=>{const _0x28ee3e=a26_0x194732,{messageId:_0x36e6b5}=_0x2d1069[_0x28ee3e(0xcf)],{companyId:_0x482a61}=_0x2d1069[_0x28ee3e(0xa5)],_0x4e8dcb=await(0x0,DeleteWhatsAppMessage_1['default'])(_0x36e6b5),_0x217e28=(0x0,socket_1['getIO'])();return _0x217e28['to'](_0x4e8dcb[_0x28ee3e(0xdc)]['toString']())[_0x28ee3e(0x135)](_0x28ee3e(0x120)+_0x482a61+_0x28ee3e(0xcc),{'action':_0x28ee3e(0x109),'message':_0x4e8dcb}),_0x28a06a[_0x28ee3e(0xed)]();};exports[a26_0x194732(0xa1)]=remove;const typing=async(_0x352d14,_0x2ad8d9)=>{const _0x19caad=a26_0x194732,{ticketId:_0x340b20}=_0x352d14['params'],{companyId:_0x31c74f}=_0x352d14['user'],{status:_0x2e48be}=_0x352d14[_0x19caad(0xef)];if(!_0x340b20)return _0x2ad8d9['status'](0x190)[_0x19caad(0xed)](_0x19caad(0x101));const _0x4e08bb=await(0x0,ShowTicketService_1[_0x19caad(0x105)])(_0x340b20,_0x31c74f);if(!_0x4e08bb)return _0x2ad8d9[_0x19caad(0xe8)](0x194)['send'](_0x19caad(0x11d));let _0x47570e=(0x0,wbot_1[_0x19caad(0x10a)])(_0x4e08bb['whatsappId']);return _0x2e48be==_0x19caad(0xdd)?await(0x0,SendPresenceStatus_1['SendTypingStatus'])(_0x47570e,_0x4e08bb['contact']['number']+'@'+(_0x4e08bb[_0x19caad(0xc8)]?'g.us':_0x19caad(0x136))):await(0x0,SendPresenceStatus_1['SendPausedStatus'])(_0x47570e,_0x4e08bb['contact'][_0x19caad(0xc0)]+'@'+(_0x4e08bb[_0x19caad(0xc8)]?_0x19caad(0xca):_0x19caad(0x136))),_0x2ad8d9['status'](0xc8)[_0x19caad(0xed)]('Status\x20'+_0x2e48be+_0x19caad(0x108));};exports[a26_0x194732(0xd0)]=typing;const send=async(_0x4fcd3b,_0x1896ee)=>{const _0xc9841a=a26_0x194732,{whatsappId:_0x189ae6}=_0x4fcd3b[_0xc9841a(0xcf)],_0x17a830=_0x4fcd3b['body'],_0x56fead=_0x4fcd3b[_0xc9841a(0x132)];try{const _0x32bed8=await Whatsapp_1[_0xc9841a(0x105)][_0xc9841a(0xb9)](_0x189ae6);if(!_0x32bed8)throw new Error(_0xc9841a(0xc5));if(_0x17a830[_0xc9841a(0xc0)]===undefined)throw new Error(_0xc9841a(0x137));const _0x55b7ac=_0x17a830[_0xc9841a(0xc0)],_0x263115=_0x17a830[_0xc9841a(0xc6)],_0x516a13=_0x32bed8['companyId'],_0x450067=await(0x0,CheckNumber_1[_0xc9841a(0x105)])(_0x55b7ac,_0x516a13);var _0x1d21fb=_0x450067[_0xc9841a(0x10c)][_0xc9841a(0xd3)](_0xc9841a(0xf5));console[_0xc9841a(0xe6)](_0x1d21fb);const _0x554695=_0x450067[_0xc9841a(0x10c)][_0xc9841a(0x11b)]('@s.whatsapp.net','')['replace'](_0xc9841a(0xf5),''),_0x1cceef={'name':''+_0x554695,'number':_0x554695,'isGroup':_0x1d21fb,'companyId':_0x516a13},_0x345205=await(0x0,GetWhatsappWbot_1['default'])(_0x32bed8),_0x13f78c=await(0x0,CreateOrUpdateContactService_1[_0xc9841a(0x105)])(_0x1cceef,_0x345205,_0x450067[_0xc9841a(0x10c)]),_0x146d1d=await(0x0,FindOrCreateTicketService_1[_0xc9841a(0x105)])(_0x13f78c,_0x32bed8['id'],0x0,_0x516a13);return _0x56fead?await Promise[_0xc9841a(0x104)](_0x56fead[_0xc9841a(0x11a)](async _0x4ff6fd=>{const _0x2d57f4=_0xc9841a;await _0x4fcd3b[_0x2d57f4(0xdf)]['get'](_0x2d57f4(0xfc))[_0x2d57f4(0xb6)][_0x2d57f4(0x12b)](_0x2d57f4(0xd2),{'whatsappId':_0x189ae6,'data':{'number':_0x554695,'body':_0x263115?(0x0,Mustache_1[_0x2d57f4(0x105)])(_0x263115,_0x146d1d):_0x4ff6fd[_0x2d57f4(0xe3)],'mediaPath':_0x4ff6fd[_0x2d57f4(0xf6)],'finalName':_0x4ff6fd[_0x2d57f4(0xc7)],'fileName':_0x4ff6fd[_0x2d57f4(0xe3)]}},{'removeOnComplete':!![],'attempts':0x3});})):await(0x0,SendWhatsAppMessage_1['default'])({'body':(0x0,Mustache_1[_0xc9841a(0x105)])(_0x263115,_0x146d1d),'ticket':_0x146d1d}),_0x17a830[_0xc9841a(0xc3)]&&setTimeout(async()=>{const _0x143a58=_0xc9841a;await(0x0,UpdateTicketService_1['default'])({'ticketId':_0x146d1d['id'],'ticketData':{'status':_0x143a58(0xa8)},'companyId':_0x516a13});},0x3e8),await(0x0,SetTicketMessagesAsRead_1[_0xc9841a(0x105)])(_0x146d1d),_0x1896ee[_0xc9841a(0xed)]({'mensagem':_0xc9841a(0xa2)});}catch(_0x51a951){console[_0xc9841a(0xe6)](_0x51a951);if(Object[_0xc9841a(0xf8)](_0x51a951)['length']===0x0)throw new AppError_1[(_0xc9841a(0x105))](_0xc9841a(0x107));else throw new AppError_1[(_0xc9841a(0x105))](_0x51a951[_0xc9841a(0x129)]);}};exports[a26_0x194732(0xed)]=send;const addReaction=async(_0x2a1a83,_0x2d3e59)=>{const _0x4c7426=a26_0x194732;try{const {messageId:_0x10b46d}=_0x2a1a83[_0x4c7426(0xcf)],{type:_0x2cbc9e}=_0x2a1a83[_0x4c7426(0xc6)],{companyId:_0x564868,id:_0x261a74}=_0x2a1a83[_0x4c7426(0xa5)],_0x3be481=await Message_1[_0x4c7426(0x105)][_0x4c7426(0xb9)](_0x10b46d),_0x3098d9=await Ticket_1[_0x4c7426(0x105)][_0x4c7426(0xb9)](_0x3be481[_0x4c7426(0xdc)],{'include':[_0x4c7426(0xc2)]});if(!_0x3be481)return _0x2d3e59[_0x4c7426(0xe8)](0x194)['send']({'message':_0x4c7426(0xf7)});const _0x2933b1=await(0x0,SendWhatsAppReaction_1[_0x4c7426(0x105)])({'messageId':_0x10b46d,'ticket':_0x3098d9,'reactionType':_0x2cbc9e}),_0x47e43d=await _0x3be481[_0x4c7426(0x109)]({'reactions':[..._0x3be481[_0x4c7426(0x12d)],{'type':_0x2cbc9e,'userId':_0x261a74}]}),_0x5eb62c=(0x0,socket_1[_0x4c7426(0xd4)])();return _0x5eb62c['to'](_0x3be481[_0x4c7426(0xdc)][_0x4c7426(0x111)]())[_0x4c7426(0x135)]('company-'+_0x564868+_0x4c7426(0xcc),{'action':_0x4c7426(0x109),'message':_0x3be481}),_0x2d3e59[_0x4c7426(0xe8)](0xc8)['send']({'message':_0x4c7426(0xeb),'reactionResult':_0x2933b1,'reactions':_0x47e43d[_0x4c7426(0x12d)]});}catch(_0x3803fc){console['error'](_0x4c7426(0xbd),_0x3803fc);if(_0x3803fc instanceof AppError_1['default'])return _0x2d3e59[_0x4c7426(0xe8)](0x190)[_0x4c7426(0xed)]({'message':_0x3803fc['message']});return _0x2d3e59[_0x4c7426(0xe8)](0x1f4)[_0x4c7426(0xed)]({'message':_0x4c7426(0xc9),'error':_0x3803fc['message']});}};exports[a26_0x194732(0xa9)]=addReaction;const storeAudio=async(_0x5262f0,_0x59d5e9)=>{const _0xfbf7c8=a26_0x194732,_0x2b9dce=_0x5262f0[_0xfbf7c8(0xa5)][_0xfbf7c8(0x121)],_0x171b3b=_0x5262f0[_0xfbf7c8(0xec)];let _0x39be9b='';const _0x2885f3=generateRandomFilename(),_0x54bb0c=_0xfbf7c8(0x116)+_0x2b9dce+'/'+_0x2885f3;return await convertToMp3(_0x171b3b[_0xfbf7c8(0xf6)],_0x54bb0c),_0x171b3b&&(_0x39be9b=await(0x0,TranslateAudioService_1[_0xfbf7c8(0x105)])(_0x54bb0c)),_0x59d5e9[_0xfbf7c8(0xed)](_0x39be9b||_0xfbf7c8(0x106));};exports[a26_0x194732(0xdb)]=storeAudio;function convertToMp3(_0x26a19e,_0x421fc1){return new Promise((_0x254847,_0x4b8b77)=>{const _0x532a65=a26_0x1355;(0x0,fluent_ffmpeg_1[_0x532a65(0x105)])(_0x26a19e)[_0x532a65(0x103)](_0x532a65(0xea))['on'](_0x532a65(0xe7),()=>{_0x254847(_0x421fc1);})['on'](_0x532a65(0xac),_0x14bd46=>{const _0x239887=_0x532a65;console[_0x239887(0xac)](_0x239887(0xbc),_0x14bd46),_0x4b8b77(_0x14bd46);})[_0x532a65(0x126)](_0x421fc1);});}function generateRandomFilename(){const _0x5b83c7=a26_0x194732,_0x41542a=crypto_1['default'][_0x5b83c7(0xbb)](0x10)['toString'](_0x5b83c7(0x12f));return _0x41542a+_0x5b83c7(0x12c);}const forwardMessage=async(_0x590163,_0xf1fa19)=>{const _0xd1a1a9=a26_0x194732;console['log']('>>>>>>>>>>>>>>>>>forwardMessage\x20X<<<<<<<<<<<<<<<<<<<');const {body:_0x23fd95,quotedMsg:_0x2cfc6e}=_0x590163['body'],_0x78479d=_0x590163[_0xd1a1a9(0xc6)][_0xd1a1a9(0xd5)],_0x6d2444=_0x590163[_0xd1a1a9(0xc6)][_0xd1a1a9(0xfb)];if(!_0x78479d||!_0x6d2444)return _0xf1fa19[_0xd1a1a9(0xe8)](0xc8)[_0xd1a1a9(0xed)](_0xd1a1a9(0x119));const _0x80b9f9=await(0x0,ShowMessageService_1[_0xd1a1a9(0x105)])(_0x78479d),_0x5b58ef=await(0x0,ShowContactService_1['ShowContactService1'])(_0x6d2444);if(!_0x80b9f9)return _0xf1fa19['status'](0x194)[_0xd1a1a9(0xed)](_0xd1a1a9(0xf9));if(!_0x5b58ef)return _0xf1fa19[_0xd1a1a9(0xe8)](0x194)[_0xd1a1a9(0xed)](_0xd1a1a9(0x12e));const _0x4eea9f=await(0x0,ShowMessageService_1['GetWhatsAppFromMessage'])(_0x80b9f9);if(!_0x4eea9f)return _0xf1fa19[_0xd1a1a9(0xe8)](0x194)['send'](_0xd1a1a9(0xba));const _0x26e0b8=_0x590163[_0xd1a1a9(0xa5)][_0xd1a1a9(0x121)],_0x353618=await(0x0,FindOrCreateTicketService_1['default'])(_0x5b58ef,_0x4eea9f,0x0,_0x26e0b8);await(0x0,SetTicketMessagesAsRead_1[_0xd1a1a9(0x105)])(_0x353618);_0x80b9f9[_0xd1a1a9(0xce)]===_0xd1a1a9(0xe5)||_0x80b9f9[_0xd1a1a9(0xce)]===_0xd1a1a9(0x122)?await(0x0,SendWhatsAppMessage_1[_0xd1a1a9(0x105)])({'body':_0x80b9f9['body'],'ticket':_0x353618,'quotedMsg':_0x2cfc6e}):await(0x0,SendWhatsAppMedia_1[_0xd1a1a9(0xcb)])(_0x80b9f9[_0xd1a1a9(0xad)]||'',_0x353618,_0x80b9f9[_0xd1a1a9(0xc6)]);const _0x404e0f=await(0x0,ShowUserService_1[_0xd1a1a9(0x105)])(_0x590163[_0xd1a1a9(0xa5)]['id']),_0x3b474d=await(0x0,user_1[_0xd1a1a9(0xf1)])(_0x404e0f);_0x353618[_0xd1a1a9(0xe8)]=_0xd1a1a9(0xb4),_0x353618['queueId']=_0x3b474d?.['id']||null,_0x353618[_0xd1a1a9(0x127)]=_0x404e0f['id'],_0x353618[_0xd1a1a9(0xa4)]();const _0x31e9d3=(0x0,socket_1[_0xd1a1a9(0xd4)])();return(0x0,UpdateTicketService_2[_0xd1a1a9(0xff)])(_0x31e9d3,_0x353618,_0x353618['id'],_0x26e0b8),_0xf1fa19[_0xd1a1a9(0xed)]();};exports[a26_0x194732(0xf3)]=forwardMessage;