const a26_0x38cb78=a26_0x2d13;(function(_0x47c529,_0x2b3f90){const _0xdef53f=a26_0x2d13,_0x3cf906=_0x47c529();while(!![]){try{const _0x402b0e=-parseInt(_0xdef53f(0xd2))/0x1*(-parseInt(_0xdef53f(0xbc))/0x2)+-parseInt(_0xdef53f(0xba))/0x3*(parseInt(_0xdef53f(0x9e))/0x4)+-parseInt(_0xdef53f(0xae))/0x5*(-parseInt(_0xdef53f(0xd7))/0x6)+-parseInt(_0xdef53f(0x103))/0x7*(-parseInt(_0xdef53f(0x9c))/0x8)+parseInt(_0xdef53f(0x101))/0x9*(-parseInt(_0xdef53f(0xbd))/0xa)+-parseInt(_0xdef53f(0x121))/0xb*(parseInt(_0xdef53f(0xfe))/0xc)+-parseInt(_0xdef53f(0xa4))/0xd*(-parseInt(_0xdef53f(0xc6))/0xe);if(_0x402b0e===_0x2b3f90)break;else _0x3cf906['push'](_0x3cf906['shift']());}catch(_0x47de77){_0x3cf906['push'](_0x3cf906['shift']());}}}(a26_0x1d84,0x77c11));function a26_0x2d13(_0x1d3a3b,_0x2037c7){const _0x571794=a26_0x1d84();return a26_0x2d13=function(_0x240f72,_0x18650b){_0x240f72=_0x240f72-0x97;let _0x1d8465=_0x571794[_0x240f72];return _0x1d8465;},a26_0x2d13(_0x1d3a3b,_0x2037c7);}const a26_0x18650b=(function(){let _0x306008=!![];return function(_0x366ec1,_0x26c60a){const _0x25c072=_0x306008?function(){if(_0x26c60a){const _0x4c13d0=_0x26c60a['apply'](_0x366ec1,arguments);return _0x26c60a=null,_0x4c13d0;}}:function(){};return _0x306008=![],_0x25c072;};}()),a26_0x240f72=a26_0x18650b(this,function(){const _0x2094b0=a26_0x2d13;return a26_0x240f72[_0x2094b0(0xc0)]()['search'](_0x2094b0(0x10d))['toString']()[_0x2094b0(0x114)](a26_0x240f72)[_0x2094b0(0xa9)](_0x2094b0(0x10d));});a26_0x240f72();'use strict';var __createBinding=this&&this[a26_0x38cb78(0xfc)]||(Object[a26_0x38cb78(0xdd)]?function(_0x45275b,_0x271dd7,_0x4e9cc7,_0x570d0c){const _0x3ebf01=a26_0x38cb78;if(_0x570d0c===undefined)_0x570d0c=_0x4e9cc7;var _0x471bc0=Object['getOwnPropertyDescriptor'](_0x271dd7,_0x4e9cc7);(!_0x471bc0||('get'in _0x471bc0?!_0x271dd7[_0x3ebf01(0xca)]:_0x471bc0[_0x3ebf01(0xcf)]||_0x471bc0[_0x3ebf01(0xfb)]))&&(_0x471bc0={'enumerable':!![],'get':function(){return _0x271dd7[_0x4e9cc7];}}),Object[_0x3ebf01(0x11b)](_0x45275b,_0x570d0c,_0x471bc0);}:function(_0x36eaab,_0x37fa0c,_0x5c2dea,_0xdd3630){if(_0xdd3630===undefined)_0xdd3630=_0x5c2dea;_0x36eaab[_0xdd3630]=_0x37fa0c[_0x5c2dea];}),__setModuleDefault=this&&this[a26_0x38cb78(0xc4)]||(Object[a26_0x38cb78(0xdd)]?function(_0x1b1c9e,_0x31bba5){const _0x425b3a=a26_0x38cb78;Object[_0x425b3a(0x11b)](_0x1b1c9e,_0x425b3a(0x99),{'enumerable':!![],'value':_0x31bba5});}:function(_0x2415e6,_0x48dc0f){const _0x2ae333=a26_0x38cb78;_0x2415e6[_0x2ae333(0x99)]=_0x48dc0f;}),__importStar=this&&this[a26_0x38cb78(0xf5)]||function(_0x22d5a7){const _0x5ce255=a26_0x38cb78;if(_0x22d5a7&&_0x22d5a7[_0x5ce255(0xca)])return _0x22d5a7;var _0x28d95b={};if(_0x22d5a7!=null){for(var _0x3ecf0a in _0x22d5a7)if(_0x3ecf0a!==_0x5ce255(0x99)&&Object[_0x5ce255(0xdb)]['hasOwnProperty'][_0x5ce255(0xc1)](_0x22d5a7,_0x3ecf0a))__createBinding(_0x28d95b,_0x22d5a7,_0x3ecf0a);}return __setModuleDefault(_0x28d95b,_0x22d5a7),_0x28d95b;},__importDefault=this&&this[a26_0x38cb78(0xfa)]||function(_0x5e47d8){const _0x45c5eb=a26_0x38cb78;return _0x5e47d8&&_0x5e47d8[_0x45c5eb(0xca)]?_0x5e47d8:{'default':_0x5e47d8};};Object[a26_0x38cb78(0x11b)](exports,a26_0x38cb78(0xca),{'value':!![]}),exports[a26_0x38cb78(0xd3)]=exports[a26_0x38cb78(0x10e)]=exports[a26_0x38cb78(0xe7)]=exports[a26_0x38cb78(0xfd)]=exports['typing']=exports[a26_0x38cb78(0xb2)]=exports[a26_0x38cb78(0xb9)]=exports['getAll']=exports[a26_0x38cb78(0x125)]=exports[a26_0x38cb78(0xe0)]=void 0x0;const AppError_1=__importDefault(require(a26_0x38cb78(0xd4))),SetTicketMessagesAsRead_1=__importDefault(require(a26_0x38cb78(0x11c))),socket_1=require(a26_0x38cb78(0xed)),Message_1=__importDefault(require(a26_0x38cb78(0xff))),Ticket_1=__importDefault(require(a26_0x38cb78(0x11f))),Queue_1=__importDefault(require(a26_0x38cb78(0xe1))),User_1=__importDefault(require(a26_0x38cb78(0xcc))),Whatsapp_1=__importDefault(require('../models/Whatsapp')),Mustache_1=__importDefault(require(a26_0x38cb78(0x119))),ListMessagesService_1=__importDefault(require(a26_0x38cb78(0x124))),ShowTicketService_1=__importDefault(require('../services/TicketServices/ShowTicketService')),FindOrCreateTicketService_1=__importDefault(require('../services/TicketServices/FindOrCreateTicketService')),UpdateTicketService_1=__importDefault(require(a26_0x38cb78(0x118))),DeleteWhatsAppMessage_1=__importDefault(require(a26_0x38cb78(0xf1))),SendWhatsAppMedia_1=__importStar(require(a26_0x38cb78(0xd0))),SendWhatsAppMessage_1=__importDefault(require('../services/WbotServices/SendWhatsAppMessage')),SendWhatsAppReaction_1=__importDefault(require(a26_0x38cb78(0xb7))),CheckNumber_1=__importDefault(require(a26_0x38cb78(0xef))),EditWhatsAppMessage_1=__importDefault(require(a26_0x38cb78(0x109))),TranslateAudioService_1=__importDefault(require('../services/MessageServices/TranslateAudioService')),CreateOrUpdateContactService_1=__importDefault(require('../services/ContactServices/CreateOrUpdateContactService')),ShowMessageService_1=__importStar(require('../services/MessageServices/ShowMessageService')),ShowContactService_1=require(a26_0x38cb78(0xc2)),ShowUserService_1=__importDefault(require(a26_0x38cb78(0x123))),user_1=require(a26_0x38cb78(0xb1)),UpdateTicketService_2=require('../services/TicketServices/UpdateTicketService'),ListAllMessagesService_1=__importDefault(require('../services/MessageServices/ListAllMessagesService')),validator_1=require(a26_0x38cb78(0x9f)),ffmpeg_static_1=__importDefault(require(a26_0x38cb78(0xde))),fluent_ffmpeg_1=__importDefault(require(a26_0x38cb78(0xeb))),crypto_1=__importDefault(require('crypto')),GetWhatsappWbot_1=__importDefault(require(a26_0x38cb78(0xd6))),wbot_1=require('../libs/wbot'),SendPresenceStatus_1=require(a26_0x38cb78(0x128));fluent_ffmpeg_1['default'][a26_0x38cb78(0xcd)](ffmpeg_static_1[a26_0x38cb78(0x99)]);function a26_0x1d84(){const _0x4a0f0b=['emit','toString','call','../services/ContactServices/ShowContactService','map','__setModuleDefault','-appMessage','14gghcGv','whatsappId','end','forEach','__esModule','keys','../models/User','setFfmpegPath','user','writable','../services/WbotServices/SendWhatsAppMedia','Message\x20not\x20found','57663HQcPfy','forwardMessage','../errors/AppError','jid','../helpers/GetWhatsappWbot','4088850iAAlXE','length','closeTicket','typing','prototype','getIO','create','ffmpeg-static','Ticket\x20not\x20found','index','../models/Queue','admin','findByPk','firstQueueThisUser','saveToFile','g.us','addReaction','queues','json','\x20enviado\x20com\x20sucesso','fluent-ffmpeg','contact','../libs/socket','MessageId\x20or\x20ContactId\x20not\x20found','../services/WbotServices/CheckNumber','save','../services/WbotServices/DeleteWhatsAppMessage','companyId','O\x20número\x20é\x20obrigatório','filename','__importStar','mp3','reactions','dateEnd','body','__importDefault','configurable','__createBinding','send','470388LKsFXI','../models/Message','closed','3609JgqHoF','status','35vjSUvD','Mensagem\x20não\x20encontrada','contactId','randomBytes','hex','SendMessage','../services/WbotServices/EditWhatsAppMessage','error','ticketId','.mp3','(((.+)+)+)+$','storeAudio','message','notifyUpdate','SendTypingStatus','mediaType','s.whatsapp.net','constructor','messageId','originalname','push','../services/TicketServices/UpdateTicketService','../helpers/Mustache','userId','defineProperty','../helpers/SetTicketMessagesAsRead','TicketId\x20is\x20required','Erro\x20na\x20conversão\x20do\x20áudio:','../models/Ticket','Reação\x20adicionada\x20com\x20sucesso!','198oFSnKN','Não\x20foi\x20possível\x20realizar\x20a\x20operação','../services/UserServices/ShowUserService','../services/MessageServices/ListMessagesService','store','fromMe','ShowContactService1','../helpers/SendPresenceStatus','toFormat','queueId','default','true','files','963376XuZzdX','Não\x20foi\x20possível\x20enviar\x20a\x20mensagem,\x20tente\x20novamente\x20em\x20alguns\x20instantes','666056QSFBlg','validator','Status\x20','@g.us','Mensagem\x20enviada','replace','5786885MJWpBE','number','includes','messageQueue','all','search','open','Contact\x20not\x20found','path','company-','5gXLxxh','params','getWbot','../utils/user','remove','./public/company','get','query','SendWhatsAppMediaFileAddress','../services/WbotServices/SendWhatsAppReaction','update','edit','3gldeQx','log','20JdJoKJ','23510gxQquJ','isGroup'];a26_0x1d84=function(){return _0x4a0f0b;};return a26_0x1d84();}const index=async(_0x461793,_0x8f0c09)=>{const _0x216300=a26_0x38cb78,{ticketId:_0x2b0cd9}=_0x461793[_0x216300(0xaf)],{pageNumber:_0x161e7c}=_0x461793[_0x216300(0xb5)],{companyId:_0xc6e582,profile:_0x4c9feb}=_0x461793[_0x216300(0xce)],_0x3f9e7a=[];if(_0x4c9feb!==_0x216300(0xe2)){const _0x392aa5=await User_1['default'][_0x216300(0xe3)](_0x461793[_0x216300(0xce)]['id'],{'include':[{'model':Queue_1['default'],'as':'queues'}]});_0x392aa5[_0x216300(0xe8)][_0x216300(0xc9)](_0x484633=>{const _0x32f4d7=_0x216300;_0x3f9e7a[_0x32f4d7(0x117)](_0x484633['id']);});}const {count:_0x261302,messages:_0x17d8a2,ticket:_0x38b7ce,hasMore:_0x5c635b}=await(0x0,ListMessagesService_1[_0x216300(0x99)])({'pageNumber':_0x161e7c,'ticketId':_0x2b0cd9,'companyId':_0xc6e582,'queues':_0x3f9e7a});return(0x0,SetTicketMessagesAsRead_1['default'])(_0x38b7ce),_0x8f0c09[_0x216300(0xe9)]({'count':_0x261302,'messages':_0x17d8a2,'ticket':_0x38b7ce,'hasMore':_0x5c635b});};exports[a26_0x38cb78(0xe0)]=index;const store=async(_0x415c3b,_0x160f2b)=>{const _0x435fef=a26_0x38cb78,{ticketId:_0xc840a2}=_0x415c3b[_0x435fef(0xaf)],{body:_0x434327,quotedMsg:_0x748f6b,vCard:_0x4c8a10}=_0x415c3b['body'],_0x2a94e4=_0x415c3b[_0x435fef(0x9b)],{companyId:_0x2dd51f,id:_0x4001af}=_0x415c3b['user'],_0x6a5c01=await(0x0,ShowTicketService_1[_0x435fef(0x99)])(_0xc840a2,_0x2dd51f);_0x6a5c01[_0x435fef(0x102)]!==_0x435fef(0xaa)&&await(0x0,UpdateTicketService_1[_0x435fef(0x99)])({'ticketId':_0x6a5c01['id'],'ticketData':{'status':_0x435fef(0xaa),'userId':parseInt(_0x4001af)},'companyId':_0x2dd51f});if(_0x6a5c01['unreadMessages']>0x0)(0x0,SetTicketMessagesAsRead_1[_0x435fef(0x99)])(_0x6a5c01);if(_0x2a94e4)await Promise[_0x435fef(0xa8)](_0x2a94e4['map'](async(_0xf6dea0,_0x3112e4)=>{return(0x0,SendWhatsAppMedia_1['default'])({'media':_0xf6dea0,'ticket':_0x6a5c01,'body':Array['isArray'](_0x434327)?_0x434327[_0x3112e4]:_0x434327});}));else{const _0x1a85b5=await(0x0,SendWhatsAppMessage_1['default'])({'body':_0x434327,'ticket':_0x6a5c01,'quotedMsg':_0x748f6b,'vCard':_0x4c8a10});}return _0x160f2b['send']();};exports[a26_0x38cb78(0x125)]=store;const getAll=async(_0x217ec9,_0x44e0b6)=>{const _0x145ca3=a26_0x38cb78,_0x465e27=_0x217ec9[_0x145ca3(0xb5)]['dateStart'],_0x2f3aed=_0x217ec9['query'][_0x145ca3(0xf8)],_0x56dbb7=(0x0,validator_1['toBoolean'])(_0x217ec9[_0x145ca3(0xb5)][_0x145ca3(0x126)]),{companyId:_0x2eabfd}=_0x217ec9[_0x145ca3(0xce)],{count:_0x5f0454}=await(0x0,ListAllMessagesService_1[_0x145ca3(0x99)])({'companyId':_0x2eabfd,'fromMe':_0x56dbb7,'dateStart':_0x465e27,'dateEnd':_0x2f3aed});return _0x44e0b6[_0x145ca3(0xe9)]({'count':_0x5f0454});};exports['getAll']=getAll;const edit=async(_0x271296,_0x5f459f)=>{const _0xb5bd8b=a26_0x38cb78,{messageId:_0x138737}=_0x271296[_0xb5bd8b(0xaf)],{companyId:_0x38390b}=_0x271296[_0xb5bd8b(0xce)],{body:_0xd28bc1}=_0x271296['body'],{ticketId:_0x27f5a0,message:_0x5b17c9}=await(0x0,EditWhatsAppMessage_1[_0xb5bd8b(0x99)])({'messageId':_0x138737,'companyId':_0x38390b,'body':_0xd28bc1}),_0x22aefb=(0x0,socket_1[_0xb5bd8b(0xdc)])();return _0x22aefb['to'](_0x27f5a0['toString']())[_0xb5bd8b(0xbf)](_0xb5bd8b(0xad)+_0x38390b+_0xb5bd8b(0xc5),{'action':_0xb5bd8b(0xb8),'message':_0x5b17c9}),_0x5f459f[_0xb5bd8b(0xfd)]();};exports[a26_0x38cb78(0xb9)]=edit;const remove=async(_0x36468b,_0x2d748b)=>{const _0x4047b1=a26_0x38cb78,{messageId:_0x4025c8}=_0x36468b[_0x4047b1(0xaf)],{companyId:_0x501baf}=_0x36468b[_0x4047b1(0xce)],_0x2df912=await(0x0,DeleteWhatsAppMessage_1[_0x4047b1(0x99)])(_0x4025c8),_0x5015ae=(0x0,socket_1[_0x4047b1(0xdc)])();return _0x5015ae['to'](_0x2df912[_0x4047b1(0x10b)][_0x4047b1(0xc0)]())[_0x4047b1(0xbf)](_0x4047b1(0xad)+_0x501baf+'-appMessage',{'action':_0x4047b1(0xb8),'message':_0x2df912}),_0x2d748b['send']();};exports[a26_0x38cb78(0xb2)]=remove;const typing=async(_0x44c78e,_0x309a44)=>{const _0x18c520=a26_0x38cb78,{ticketId:_0x5a6db7}=_0x44c78e[_0x18c520(0xaf)],{companyId:_0x4c1a9a}=_0x44c78e[_0x18c520(0xce)],{status:_0x13d8ee}=_0x44c78e[_0x18c520(0xb5)];if(!_0x5a6db7)return _0x309a44[_0x18c520(0x102)](0x190)[_0x18c520(0xfd)](_0x18c520(0x11d));const _0x2ae004=await(0x0,ShowTicketService_1[_0x18c520(0x99)])(_0x5a6db7,_0x4c1a9a);if(!_0x2ae004)return _0x309a44[_0x18c520(0x102)](0x194)[_0x18c520(0xfd)](_0x18c520(0xdf));let _0xfbe28a=(0x0,wbot_1[_0x18c520(0xb0)])(_0x2ae004[_0x18c520(0xc7)]);return _0x13d8ee==_0x18c520(0x9a)?await(0x0,SendPresenceStatus_1[_0x18c520(0x111)])(_0xfbe28a,_0x2ae004[_0x18c520(0xec)]['number']+'@'+(_0x2ae004[_0x18c520(0xbe)]?_0x18c520(0xe6):_0x18c520(0x113))):await(0x0,SendPresenceStatus_1['SendPausedStatus'])(_0xfbe28a,_0x2ae004['contact'][_0x18c520(0xa5)]+'@'+(_0x2ae004[_0x18c520(0xbe)]?_0x18c520(0xe6):_0x18c520(0x113))),_0x309a44[_0x18c520(0x102)](0xc8)[_0x18c520(0xfd)](_0x18c520(0xa0)+_0x13d8ee+_0x18c520(0xea));};exports[a26_0x38cb78(0xda)]=typing;const send=async(_0x28dfeb,_0x3ff2a4)=>{const _0xc8eab0=a26_0x38cb78,{whatsappId:_0x291207}=_0x28dfeb[_0xc8eab0(0xaf)],_0x1d6580=_0x28dfeb[_0xc8eab0(0xf9)],_0x482020=_0x28dfeb[_0xc8eab0(0x9b)];try{const _0x2accd9=await Whatsapp_1[_0xc8eab0(0x99)]['findByPk'](_0x291207);if(!_0x2accd9)throw new Error(_0xc8eab0(0x122));if(_0x1d6580[_0xc8eab0(0xa5)]===undefined)throw new Error(_0xc8eab0(0xf3));const _0x1425c8=_0x1d6580[_0xc8eab0(0xa5)],_0x1ea131=_0x1d6580[_0xc8eab0(0xf9)],_0x290a96=_0x2accd9['companyId'],_0x2ba0e5=await(0x0,CheckNumber_1[_0xc8eab0(0x99)])(_0x1425c8,_0x290a96);var _0x6bc248=_0x2ba0e5[_0xc8eab0(0xd5)][_0xc8eab0(0xa6)](_0xc8eab0(0xa1));console['log'](_0x6bc248);const _0x9aa242=_0x2ba0e5[_0xc8eab0(0xd5)][_0xc8eab0(0xa3)]('@s.whatsapp.net','')[_0xc8eab0(0xa3)](_0xc8eab0(0xa1),''),_0x42e217={'name':''+_0x9aa242,'number':_0x9aa242,'isGroup':_0x6bc248,'companyId':_0x290a96},_0xd00565=await(0x0,GetWhatsappWbot_1[_0xc8eab0(0x99)])(_0x2accd9),_0x58ff3c=await(0x0,CreateOrUpdateContactService_1['default'])(_0x42e217,_0xd00565,_0x2ba0e5[_0xc8eab0(0xd5)]),_0x4115e7=await(0x0,FindOrCreateTicketService_1[_0xc8eab0(0x99)])(_0x58ff3c,_0x2accd9['id'],0x0,_0x290a96);return _0x482020?await Promise['all'](_0x482020[_0xc8eab0(0xc3)](async _0x1db08c=>{const _0x39289f=_0xc8eab0;await _0x28dfeb['app'][_0x39289f(0xb4)]('queues')[_0x39289f(0xa7)]['add'](_0x39289f(0x108),{'whatsappId':_0x291207,'data':{'number':_0x9aa242,'body':_0x1ea131?(0x0,Mustache_1[_0x39289f(0x99)])(_0x1ea131,_0x4115e7):_0x1db08c['originalname'],'mediaPath':_0x1db08c[_0x39289f(0xac)],'finalName':_0x1db08c[_0x39289f(0xf4)],'fileName':_0x1db08c[_0x39289f(0x116)]}},{'removeOnComplete':!![],'attempts':0x3});})):await(0x0,SendWhatsAppMessage_1['default'])({'body':(0x0,Mustache_1[_0xc8eab0(0x99)])(_0x1ea131,_0x4115e7),'ticket':_0x4115e7}),_0x1d6580[_0xc8eab0(0xd9)]&&setTimeout(async()=>{const _0x5c2dc3=_0xc8eab0;await(0x0,UpdateTicketService_1[_0x5c2dc3(0x99)])({'ticketId':_0x4115e7['id'],'ticketData':{'status':_0x5c2dc3(0x100)},'companyId':_0x290a96});},0x3e8),await(0x0,SetTicketMessagesAsRead_1[_0xc8eab0(0x99)])(_0x4115e7),_0x3ff2a4['send']({'mensagem':_0xc8eab0(0xa2)});}catch(_0x39017d){console[_0xc8eab0(0xbb)](_0x39017d);if(Object[_0xc8eab0(0xcb)](_0x39017d)[_0xc8eab0(0xd8)]===0x0)throw new AppError_1[(_0xc8eab0(0x99))](_0xc8eab0(0x9d));else throw new AppError_1[(_0xc8eab0(0x99))](_0x39017d['message']);}};exports[a26_0x38cb78(0xfd)]=send;const addReaction=async(_0x3ecc6e,_0x103155)=>{const _0x541ddf=a26_0x38cb78;try{const {messageId:_0x11490f}=_0x3ecc6e[_0x541ddf(0xaf)],{type:_0x29b22c}=_0x3ecc6e[_0x541ddf(0xf9)],{companyId:_0x4b0dba,id:_0x3f7ee5}=_0x3ecc6e[_0x541ddf(0xce)],_0x4d4cc3=await Message_1['default'][_0x541ddf(0xe3)](_0x11490f),_0x430759=await Ticket_1[_0x541ddf(0x99)][_0x541ddf(0xe3)](_0x4d4cc3['ticketId'],{'include':[_0x541ddf(0xec)]});if(!_0x4d4cc3)return _0x103155[_0x541ddf(0x102)](0x194)[_0x541ddf(0xfd)]({'message':_0x541ddf(0x104)});const _0x12f926=await(0x0,SendWhatsAppReaction_1[_0x541ddf(0x99)])({'messageId':_0x11490f,'ticket':_0x430759,'reactionType':_0x29b22c}),_0x3437f6=await _0x4d4cc3['update']({'reactions':[..._0x4d4cc3[_0x541ddf(0xf7)],{'type':_0x29b22c,'userId':_0x3f7ee5}]}),_0x1b317b=(0x0,socket_1[_0x541ddf(0xdc)])();return _0x1b317b['to'](_0x4d4cc3['ticketId']['toString']())[_0x541ddf(0xbf)](_0x541ddf(0xad)+_0x4b0dba+_0x541ddf(0xc5),{'action':'update','message':_0x4d4cc3}),_0x103155['status'](0xc8)[_0x541ddf(0xfd)]({'message':_0x541ddf(0x120),'reactionResult':_0x12f926,'reactions':_0x3437f6['reactions']});}catch(_0x598810){console[_0x541ddf(0x10a)]('Erro\x20ao\x20adicionar\x20reação:',_0x598810);if(_0x598810 instanceof AppError_1[_0x541ddf(0x99)])return _0x103155[_0x541ddf(0x102)](0x190)[_0x541ddf(0xfd)]({'message':_0x598810[_0x541ddf(0x10f)]});return _0x103155['status'](0x1f4)[_0x541ddf(0xfd)]({'message':'Erro\x20ao\x20adicionar\x20reação','error':_0x598810['message']});}};exports[a26_0x38cb78(0xe7)]=addReaction;const storeAudio=async(_0x1d83e9,_0x4c3e63)=>{const _0x3f4ca4=a26_0x38cb78,_0x253c4f=_0x1d83e9[_0x3f4ca4(0xce)][_0x3f4ca4(0xf2)],_0x234133=_0x1d83e9['file'];let _0x5594a8='';const _0x4a2cde=generateRandomFilename(),_0x67e986=_0x3f4ca4(0xb3)+_0x253c4f+'/'+_0x4a2cde;return await convertToMp3(_0x234133[_0x3f4ca4(0xac)],_0x67e986),_0x234133&&(_0x5594a8=await(0x0,TranslateAudioService_1[_0x3f4ca4(0x99)])(_0x67e986)),_0x4c3e63[_0x3f4ca4(0xfd)](_0x5594a8||'Transcrição\x20não\x20disponível');};exports[a26_0x38cb78(0x10e)]=storeAudio;function convertToMp3(_0x2b510f,_0x8f2efe){return new Promise((_0x64b6e4,_0x7e5fe0)=>{const _0x5d1269=a26_0x2d13;(0x0,fluent_ffmpeg_1[_0x5d1269(0x99)])(_0x2b510f)[_0x5d1269(0x97)](_0x5d1269(0xf6))['on'](_0x5d1269(0xc8),()=>{_0x64b6e4(_0x8f2efe);})['on'](_0x5d1269(0x10a),_0x167ca3=>{const _0xd2cb07=_0x5d1269;console[_0xd2cb07(0x10a)](_0xd2cb07(0x11e),_0x167ca3),_0x7e5fe0(_0x167ca3);})[_0x5d1269(0xe5)](_0x8f2efe);});}function generateRandomFilename(){const _0x2afc06=a26_0x38cb78,_0x2669a8=crypto_1[_0x2afc06(0x99)][_0x2afc06(0x106)](0x10)[_0x2afc06(0xc0)](_0x2afc06(0x107));return _0x2669a8+_0x2afc06(0x10c);}const forwardMessage=async(_0x649d4e,_0x5cee71)=>{const _0x566520=a26_0x38cb78;console['log']('>>>>>>>>>>>>>>>>>forwardMessage\x20X<<<<<<<<<<<<<<<<<<<');const {body:_0x28d1e9,quotedMsg:_0xdeb9b0}=_0x649d4e[_0x566520(0xf9)],_0x1fad3c=_0x649d4e[_0x566520(0xf9)][_0x566520(0x115)],_0x1cf2ff=_0x649d4e['body'][_0x566520(0x105)];if(!_0x1fad3c||!_0x1cf2ff)return _0x5cee71[_0x566520(0x102)](0xc8)['send'](_0x566520(0xee));const _0x3230f8=await(0x0,ShowMessageService_1[_0x566520(0x99)])(_0x1fad3c),_0xe90f29=await(0x0,ShowContactService_1[_0x566520(0x127)])(_0x1cf2ff);if(!_0x3230f8)return _0x5cee71['status'](0x194)[_0x566520(0xfd)](_0x566520(0xd1));if(!_0xe90f29)return _0x5cee71['status'](0x194)[_0x566520(0xfd)](_0x566520(0xab));const _0x30ca29=await(0x0,ShowMessageService_1['GetWhatsAppFromMessage'])(_0x3230f8);if(!_0x30ca29)return _0x5cee71[_0x566520(0x102)](0x194)['send']('Whatsapp\x20from\x20message\x20not\x20found');const _0x333e7c=_0x649d4e[_0x566520(0xce)][_0x566520(0xf2)],_0x284a65=await(0x0,FindOrCreateTicketService_1[_0x566520(0x99)])(_0xe90f29,_0x30ca29,0x0,_0x333e7c);await(0x0,SetTicketMessagesAsRead_1[_0x566520(0x99)])(_0x284a65);_0x3230f8[_0x566520(0x112)]==='conversation'||_0x3230f8[_0x566520(0x112)]==='extendedTextMessage'?await(0x0,SendWhatsAppMessage_1[_0x566520(0x99)])({'body':_0x3230f8[_0x566520(0xf9)],'ticket':_0x284a65,'quotedMsg':_0xdeb9b0}):await(0x0,SendWhatsAppMedia_1[_0x566520(0xb6)])(_0x3230f8['mediaUrl']||'',_0x284a65,_0x3230f8[_0x566520(0xf9)]);const _0x5607e2=await(0x0,ShowUserService_1[_0x566520(0x99)])(_0x649d4e[_0x566520(0xce)]['id']),_0x488b9f=await(0x0,user_1[_0x566520(0xe4)])(_0x5607e2);_0x284a65[_0x566520(0x102)]=_0x566520(0xaa),_0x284a65[_0x566520(0x98)]=_0x488b9f?.['id']||null,_0x284a65[_0x566520(0x11a)]=_0x5607e2['id'],_0x284a65[_0x566520(0xf0)]();const _0x2163b6=(0x0,socket_1[_0x566520(0xdc)])();return(0x0,UpdateTicketService_2[_0x566520(0x110)])(_0x2163b6,_0x284a65,_0x284a65['id'],_0x333e7c),_0x5cee71[_0x566520(0xfd)]();};exports[a26_0x38cb78(0xd3)]=forwardMessage;