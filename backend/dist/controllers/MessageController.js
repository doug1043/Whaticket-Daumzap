const a26_0xe61f35=a26_0x194f;(function(_0x9166ea,_0x3d48c1){const _0x548eaf=a26_0x194f,_0x59717c=_0x9166ea();while(!![]){try{const _0x2a3da9=-parseInt(_0x548eaf(0x1d5))/0x1+-parseInt(_0x548eaf(0x174))/0x2+-parseInt(_0x548eaf(0x17f))/0x3+-parseInt(_0x548eaf(0x180))/0x4*(parseInt(_0x548eaf(0x176))/0x5)+parseInt(_0x548eaf(0x1cb))/0x6+parseInt(_0x548eaf(0x15d))/0x7+parseInt(_0x548eaf(0x1b6))/0x8;if(_0x2a3da9===_0x3d48c1)break;else _0x59717c['push'](_0x59717c['shift']());}catch(_0x4e7a0c){_0x59717c['push'](_0x59717c['shift']());}}}(a26_0x5da4,0xa7a15));const a26_0x29743c=(function(){let _0x42ebd9=!![];return function(_0x3d2ed9,_0x49c6d3){const _0x28d2bc=_0x42ebd9?function(){const _0x5a2cfd=a26_0x194f;if(_0x49c6d3){const _0x848c0d=_0x49c6d3[_0x5a2cfd(0x18a)](_0x3d2ed9,arguments);return _0x49c6d3=null,_0x848c0d;}}:function(){};return _0x42ebd9=![],_0x28d2bc;};}()),a26_0x5ead7b=a26_0x29743c(this,function(){const _0x1762a3=a26_0x194f;return a26_0x5ead7b['toString']()['search'](_0x1762a3(0x1bc))[_0x1762a3(0x1b1)]()[_0x1762a3(0x1eb)](a26_0x5ead7b)[_0x1762a3(0x1a8)](_0x1762a3(0x1bc));});function a26_0x5da4(){const _0x3d0a70=['admin','addReaction','forEach','contactId','../services/WbotServices/SendWhatsAppMessage','./public/company','TicketId\x20is\x20required','Erro\x20ao\x20adicionar\x20reação','Não\x20foi\x20possível\x20realizar\x20a\x20operação','status','reactions','files','file','replace','g.us','../models/User','Status\x20','getWbot','remove','ffmpeg-static','s.whatsapp.net','../services/ContactServices/CreateOrUpdateContactService','__importStar','SendMessage','search','firstQueueThisUser','open','length','SendTypingStatus','userId','keys','__esModule','closeTicket','toString','Erro\x20na\x20conversão\x20do\x20áudio:','../services/WbotServices/DeleteWhatsAppMessage','toBoolean','store','10458208ddKlRW','configurable','Contact\x20not\x20found','app','map','crypto','(((.+)+)+)+$','contact','whatsappId','send','../libs/socket','typing','SendWhatsAppMediaFileAddress','../services/TicketServices/FindOrCreateTicketService','../helpers/Mustache','add','Ticket\x20not\x20found','dateStart','extendedTextMessage','getAll','validator','5726466LnseTq','MessageId\x20or\x20ContactId\x20not\x20found','index','../models/Whatsapp','../services/WbotServices/EditWhatsAppMessage','end','Mensagem\x20enviada','error','writable','user','189613DasSvO','get','randomBytes','create','../services/MessageServices/ListAllMessagesService','../services/WbotServices/SendWhatsAppReaction','__importDefault','json','../services/TicketServices/UpdateTicketService','>>>>>>>>>>>>>>>>>forwardMessage\x20X<<<<<<<<<<<<<<<<<<<','fromMe','save','../models/Message','query','call','-appMessage','../libs/wbot','hex','@g.us','includes','fluent-ffmpeg','update','constructor','body','unreadMessages','__createBinding','../services/MessageServices/ShowMessageService','Message\x20not\x20found','1418151GlKnpw','mediaUrl','number','SendPausedStatus','getIO','notifyUpdate','__setModuleDefault','forwardMessage','Não\x20foi\x20possível\x20enviar\x20a\x20mensagem,\x20tente\x20novamente\x20em\x20alguns\x20instantes','Whatsapp\x20from\x20message\x20not\x20found','jid','../services/WbotServices/SendWhatsAppMedia','all','originalname','storeAudio','../helpers/SetTicketMessagesAsRead','ShowContactService1','../services/MessageServices/ListMessagesService','@s.whatsapp.net','default','../helpers/SendPresenceStatus','company-','GetWhatsAppFromMessage','2649214SWOIHn','push','1700ooOtFA','queues','closed','Mensagem\x20não\x20encontrada','../helpers/GetWhatsappWbot','findByPk','queueId','getOwnPropertyDescriptor','Erro\x20ao\x20adicionar\x20reação:','693441tWslwE','380OSmSEd','../services/ContactServices/ShowContactService','message','companyId','defineProperty','params','isGroup','setFfmpegPath','path','Transcrição\x20não\x20disponível','apply','../services/MessageServices/TranslateAudioService','edit','emit','prototype','log'];a26_0x5da4=function(){return _0x3d0a70;};return a26_0x5da4();}a26_0x5ead7b();'use strict';var __createBinding=this&&this[a26_0xe61f35(0x15a)]||(Object['create']?function(_0x2b5549,_0x32bf8a,_0x418447,_0x4b41c5){const _0x30f9e2=a26_0xe61f35;if(_0x4b41c5===undefined)_0x4b41c5=_0x418447;var _0x3a6f7b=Object[_0x30f9e2(0x17d)](_0x32bf8a,_0x418447);(!_0x3a6f7b||(_0x30f9e2(0x1d6)in _0x3a6f7b?!_0x32bf8a[_0x30f9e2(0x1af)]:_0x3a6f7b[_0x30f9e2(0x1d3)]||_0x3a6f7b[_0x30f9e2(0x1b7)]))&&(_0x3a6f7b={'enumerable':!![],'get':function(){return _0x32bf8a[_0x418447];}}),Object[_0x30f9e2(0x184)](_0x2b5549,_0x4b41c5,_0x3a6f7b);}:function(_0x336a87,_0x343c1d,_0x46d9b8,_0x29946b){if(_0x29946b===undefined)_0x29946b=_0x46d9b8;_0x336a87[_0x29946b]=_0x343c1d[_0x46d9b8];}),__setModuleDefault=this&&this[a26_0xe61f35(0x163)]||(Object[a26_0xe61f35(0x1d8)]?function(_0x15ea4d,_0x127ecd){const _0x3f121b=a26_0xe61f35;Object[_0x3f121b(0x184)](_0x15ea4d,'default',{'enumerable':!![],'value':_0x127ecd});}:function(_0x4fbe32,_0x218f9c){const _0xdc52d8=a26_0xe61f35;_0x4fbe32[_0xdc52d8(0x170)]=_0x218f9c;}),__importStar=this&&this[a26_0xe61f35(0x1a6)]||function(_0x373803){const _0x18c4e0=a26_0xe61f35;if(_0x373803&&_0x373803[_0x18c4e0(0x1af)])return _0x373803;var _0x24cffa={};if(_0x373803!=null){for(var _0x297182 in _0x373803)if(_0x297182!==_0x18c4e0(0x170)&&Object[_0x18c4e0(0x18e)]['hasOwnProperty'][_0x18c4e0(0x1e3)](_0x373803,_0x297182))__createBinding(_0x24cffa,_0x373803,_0x297182);}return __setModuleDefault(_0x24cffa,_0x373803),_0x24cffa;},__importDefault=this&&this[a26_0xe61f35(0x1db)]||function(_0x375e91){const _0x46e42b=a26_0xe61f35;return _0x375e91&&_0x375e91[_0x46e42b(0x1af)]?_0x375e91:{'default':_0x375e91};};Object[a26_0xe61f35(0x184)](exports,a26_0xe61f35(0x1af),{'value':!![]}),exports[a26_0xe61f35(0x164)]=exports['storeAudio']=exports[a26_0xe61f35(0x191)]=exports[a26_0xe61f35(0x1bf)]=exports['typing']=exports[a26_0xe61f35(0x1a2)]=exports[a26_0xe61f35(0x18c)]=exports[a26_0xe61f35(0x1c9)]=exports['store']=exports[a26_0xe61f35(0x1cd)]=void 0x0;const AppError_1=__importDefault(require('../errors/AppError')),SetTicketMessagesAsRead_1=__importDefault(require(a26_0xe61f35(0x16c))),socket_1=require(a26_0xe61f35(0x1c0)),Message_1=__importDefault(require(a26_0xe61f35(0x1e1))),Ticket_1=__importDefault(require('../models/Ticket')),Queue_1=__importDefault(require('../models/Queue')),User_1=__importDefault(require(a26_0xe61f35(0x19f))),Whatsapp_1=__importDefault(require(a26_0xe61f35(0x1ce))),Mustache_1=__importDefault(require(a26_0xe61f35(0x1c4))),ListMessagesService_1=__importDefault(require(a26_0xe61f35(0x16e))),ShowTicketService_1=__importDefault(require('../services/TicketServices/ShowTicketService')),FindOrCreateTicketService_1=__importDefault(require(a26_0xe61f35(0x1c3))),UpdateTicketService_1=__importDefault(require(a26_0xe61f35(0x1dd))),DeleteWhatsAppMessage_1=__importDefault(require(a26_0xe61f35(0x1b3))),SendWhatsAppMedia_1=__importStar(require(a26_0xe61f35(0x168))),SendWhatsAppMessage_1=__importDefault(require(a26_0xe61f35(0x194))),SendWhatsAppReaction_1=__importDefault(require(a26_0xe61f35(0x1da))),CheckNumber_1=__importDefault(require('../services/WbotServices/CheckNumber')),EditWhatsAppMessage_1=__importDefault(require(a26_0xe61f35(0x1cf))),TranslateAudioService_1=__importDefault(require(a26_0xe61f35(0x18b))),CreateOrUpdateContactService_1=__importDefault(require(a26_0xe61f35(0x1a5))),ShowMessageService_1=__importStar(require(a26_0xe61f35(0x15b))),ShowContactService_1=require(a26_0xe61f35(0x181)),ShowUserService_1=__importDefault(require('../services/UserServices/ShowUserService')),user_1=require('../utils/user'),UpdateTicketService_2=require(a26_0xe61f35(0x1dd)),ListAllMessagesService_1=__importDefault(require(a26_0xe61f35(0x1d9))),validator_1=require(a26_0xe61f35(0x1ca)),ffmpeg_static_1=__importDefault(require(a26_0xe61f35(0x1a3))),fluent_ffmpeg_1=__importDefault(require(a26_0xe61f35(0x1e9))),crypto_1=__importDefault(require(a26_0xe61f35(0x1bb))),GetWhatsappWbot_1=__importDefault(require(a26_0xe61f35(0x17a))),wbot_1=require(a26_0xe61f35(0x1e5)),SendPresenceStatus_1=require(a26_0xe61f35(0x171));fluent_ffmpeg_1[a26_0xe61f35(0x170)][a26_0xe61f35(0x187)](ffmpeg_static_1[a26_0xe61f35(0x170)]);const index=async(_0x22a2f0,_0x8d11e5)=>{const _0x48316c=a26_0xe61f35,{ticketId:_0x160d45}=_0x22a2f0[_0x48316c(0x185)],{pageNumber:_0x30f297}=_0x22a2f0[_0x48316c(0x1e2)],{companyId:_0x8f6ab4,profile:_0x392993}=_0x22a2f0[_0x48316c(0x1d4)],_0x14c95b=[];if(_0x392993!==_0x48316c(0x190)){const _0x43da4c=await User_1[_0x48316c(0x170)][_0x48316c(0x17b)](_0x22a2f0['user']['id'],{'include':[{'model':Queue_1[_0x48316c(0x170)],'as':_0x48316c(0x177)}]});_0x43da4c[_0x48316c(0x177)][_0x48316c(0x192)](_0x15efc4=>{const _0x266417=_0x48316c;_0x14c95b[_0x266417(0x175)](_0x15efc4['id']);});}const {count:_0x3f895b,messages:_0x2b75fb,ticket:_0x57bc9a,hasMore:_0x2d50ed}=await(0x0,ListMessagesService_1[_0x48316c(0x170)])({'pageNumber':_0x30f297,'ticketId':_0x160d45,'companyId':_0x8f6ab4,'queues':_0x14c95b});return(0x0,SetTicketMessagesAsRead_1[_0x48316c(0x170)])(_0x57bc9a),_0x8d11e5[_0x48316c(0x1dc)]({'count':_0x3f895b,'messages':_0x2b75fb,'ticket':_0x57bc9a,'hasMore':_0x2d50ed});};exports[a26_0xe61f35(0x1cd)]=index;const store=async(_0x5734cf,_0x32b50e)=>{const _0x554e59=a26_0xe61f35,{ticketId:_0x42be6c}=_0x5734cf['params'],{body:_0x10a468,quotedMsg:_0x15d0b3,vCard:_0x554386}=_0x5734cf['body'],_0x410475=_0x5734cf[_0x554e59(0x19b)],{companyId:_0x57ddf3,id:_0x909e9a}=_0x5734cf[_0x554e59(0x1d4)],_0x4462ca=await(0x0,ShowTicketService_1[_0x554e59(0x170)])(_0x42be6c,_0x57ddf3);_0x4462ca[_0x554e59(0x199)]!==_0x554e59(0x1aa)&&await(0x0,UpdateTicketService_1['default'])({'ticketId':_0x4462ca['id'],'ticketData':{'status':_0x554e59(0x1aa),'userId':parseInt(_0x909e9a)},'companyId':_0x57ddf3});if(_0x4462ca[_0x554e59(0x159)]>0x0)(0x0,SetTicketMessagesAsRead_1[_0x554e59(0x170)])(_0x4462ca);if(_0x410475)await Promise[_0x554e59(0x169)](_0x410475[_0x554e59(0x1ba)](async(_0xd9ce0a,_0x18c84f)=>{const _0x5d09dd=_0x554e59;return(0x0,SendWhatsAppMedia_1[_0x5d09dd(0x170)])({'media':_0xd9ce0a,'ticket':_0x4462ca,'body':Array['isArray'](_0x10a468)?_0x10a468[_0x18c84f]:_0x10a468});}));else{const _0x489840=await(0x0,SendWhatsAppMessage_1[_0x554e59(0x170)])({'body':_0x10a468,'ticket':_0x4462ca,'quotedMsg':_0x15d0b3,'vCard':_0x554386});}return _0x32b50e['send']();};function a26_0x194f(_0x212fa3,_0x34ba4f){const _0x47bd50=a26_0x5da4();return a26_0x194f=function(_0x5ead7b,_0x29743c){_0x5ead7b=_0x5ead7b-0x158;let _0x5da45e=_0x47bd50[_0x5ead7b];return _0x5da45e;},a26_0x194f(_0x212fa3,_0x34ba4f);}exports[a26_0xe61f35(0x1b5)]=store;const getAll=async(_0x10c411,_0x3d641d)=>{const _0x1e68dc=a26_0xe61f35,_0x16dc09=_0x10c411[_0x1e68dc(0x1e2)][_0x1e68dc(0x1c7)],_0x118b4d=_0x10c411[_0x1e68dc(0x1e2)]['dateEnd'],_0x5448f7=(0x0,validator_1[_0x1e68dc(0x1b4)])(_0x10c411['query'][_0x1e68dc(0x1df)]),{companyId:_0x432e3c}=_0x10c411[_0x1e68dc(0x1d4)],{count:_0x4cdea0}=await(0x0,ListAllMessagesService_1[_0x1e68dc(0x170)])({'companyId':_0x432e3c,'fromMe':_0x5448f7,'dateStart':_0x16dc09,'dateEnd':_0x118b4d});return _0x3d641d[_0x1e68dc(0x1dc)]({'count':_0x4cdea0});};exports[a26_0xe61f35(0x1c9)]=getAll;const edit=async(_0x497540,_0x3c8f39)=>{const _0x1c8a33=a26_0xe61f35,{messageId:_0x36acd4}=_0x497540[_0x1c8a33(0x185)],{companyId:_0x1643bc}=_0x497540[_0x1c8a33(0x1d4)],{body:_0x3fc6eb}=_0x497540[_0x1c8a33(0x158)],{ticketId:_0x37f16c,message:_0x55fba9}=await(0x0,EditWhatsAppMessage_1[_0x1c8a33(0x170)])({'messageId':_0x36acd4,'companyId':_0x1643bc,'body':_0x3fc6eb}),_0x217c0c=(0x0,socket_1[_0x1c8a33(0x161)])();return _0x217c0c['to'](_0x37f16c[_0x1c8a33(0x1b1)]())[_0x1c8a33(0x18d)]('company-'+_0x1643bc+_0x1c8a33(0x1e4),{'action':_0x1c8a33(0x1ea),'message':_0x55fba9}),_0x3c8f39[_0x1c8a33(0x1bf)]();};exports[a26_0xe61f35(0x18c)]=edit;const remove=async(_0x85c0e7,_0x3c6560)=>{const _0x3e8069=a26_0xe61f35,{messageId:_0x43e77a}=_0x85c0e7['params'],{companyId:_0x6a86c8}=_0x85c0e7[_0x3e8069(0x1d4)],_0x106c99=await(0x0,DeleteWhatsAppMessage_1[_0x3e8069(0x170)])(_0x43e77a),_0x6c54cb=(0x0,socket_1[_0x3e8069(0x161)])();return _0x6c54cb['to'](_0x106c99['ticketId'][_0x3e8069(0x1b1)]())[_0x3e8069(0x18d)]('company-'+_0x6a86c8+'-appMessage',{'action':_0x3e8069(0x1ea),'message':_0x106c99}),_0x3c6560[_0x3e8069(0x1bf)]();};exports[a26_0xe61f35(0x1a2)]=remove;const typing=async(_0x5ad2fa,_0x48a270)=>{const _0x26122d=a26_0xe61f35,{ticketId:_0x1032c7}=_0x5ad2fa[_0x26122d(0x185)],{companyId:_0xa0da94}=_0x5ad2fa[_0x26122d(0x1d4)],{status:_0x310f10}=_0x5ad2fa[_0x26122d(0x1e2)];if(!_0x1032c7)return _0x48a270[_0x26122d(0x199)](0x190)['send'](_0x26122d(0x196));const _0x58f5f8=await(0x0,ShowTicketService_1[_0x26122d(0x170)])(_0x1032c7,_0xa0da94);if(!_0x58f5f8)return _0x48a270[_0x26122d(0x199)](0x194)[_0x26122d(0x1bf)](_0x26122d(0x1c6));let _0x1ae64b=(0x0,wbot_1[_0x26122d(0x1a1)])(_0x58f5f8[_0x26122d(0x1be)]);return _0x310f10=='true'?await(0x0,SendPresenceStatus_1[_0x26122d(0x1ac)])(_0x1ae64b,_0x58f5f8[_0x26122d(0x1bd)][_0x26122d(0x15f)]+'@'+(_0x58f5f8[_0x26122d(0x186)]?_0x26122d(0x19e):_0x26122d(0x1a4))):await(0x0,SendPresenceStatus_1[_0x26122d(0x160)])(_0x1ae64b,_0x58f5f8[_0x26122d(0x1bd)][_0x26122d(0x15f)]+'@'+(_0x58f5f8[_0x26122d(0x186)]?_0x26122d(0x19e):_0x26122d(0x1a4))),_0x48a270[_0x26122d(0x199)](0xc8)[_0x26122d(0x1bf)](_0x26122d(0x1a0)+_0x310f10+'\x20enviado\x20com\x20sucesso');};exports[a26_0xe61f35(0x1c1)]=typing;const send=async(_0x2a4235,_0x36d72b)=>{const _0xf6f8d4=a26_0xe61f35,{whatsappId:_0x177e5a}=_0x2a4235['params'],_0x1373f0=_0x2a4235[_0xf6f8d4(0x158)],_0x599510=_0x2a4235[_0xf6f8d4(0x19b)];try{const _0x299309=await Whatsapp_1['default'][_0xf6f8d4(0x17b)](_0x177e5a);if(!_0x299309)throw new Error(_0xf6f8d4(0x198));if(_0x1373f0[_0xf6f8d4(0x15f)]===undefined)throw new Error('O\x20número\x20é\x20obrigatório');const _0x5c82c6=_0x1373f0[_0xf6f8d4(0x15f)],_0x2f6f8e=_0x1373f0['body'],_0x3f5c67=_0x299309[_0xf6f8d4(0x183)],_0x54f963=await(0x0,CheckNumber_1[_0xf6f8d4(0x170)])(_0x5c82c6,_0x3f5c67);var _0x57bb31=_0x54f963[_0xf6f8d4(0x167)][_0xf6f8d4(0x1e8)]('@g.us');console[_0xf6f8d4(0x18f)](_0x57bb31);const _0x3d9261=_0x54f963[_0xf6f8d4(0x167)][_0xf6f8d4(0x19d)](_0xf6f8d4(0x16f),'')[_0xf6f8d4(0x19d)](_0xf6f8d4(0x1e7),''),_0x410aa9={'name':''+_0x3d9261,'number':_0x3d9261,'isGroup':_0x57bb31,'companyId':_0x3f5c67},_0x101162=await(0x0,GetWhatsappWbot_1['default'])(_0x299309),_0x312186=await(0x0,CreateOrUpdateContactService_1['default'])(_0x410aa9,_0x101162,_0x54f963[_0xf6f8d4(0x167)]),_0x509a9f=await(0x0,FindOrCreateTicketService_1[_0xf6f8d4(0x170)])(_0x312186,_0x299309['id'],0x0,_0x3f5c67);return _0x599510?await Promise[_0xf6f8d4(0x169)](_0x599510[_0xf6f8d4(0x1ba)](async _0x2e7742=>{const _0x244aa5=_0xf6f8d4;await _0x2a4235[_0x244aa5(0x1b9)]['get'](_0x244aa5(0x177))['messageQueue'][_0x244aa5(0x1c5)](_0x244aa5(0x1a7),{'whatsappId':_0x177e5a,'data':{'number':_0x3d9261,'body':_0x2f6f8e?(0x0,Mustache_1['default'])(_0x2f6f8e,_0x509a9f):_0x2e7742['originalname'],'mediaPath':_0x2e7742['path'],'finalName':_0x2e7742['filename'],'fileName':_0x2e7742[_0x244aa5(0x16a)]}},{'removeOnComplete':!![],'attempts':0x3});})):await(0x0,SendWhatsAppMessage_1[_0xf6f8d4(0x170)])({'body':(0x0,Mustache_1[_0xf6f8d4(0x170)])(_0x2f6f8e,_0x509a9f),'ticket':_0x509a9f}),_0x1373f0[_0xf6f8d4(0x1b0)]&&setTimeout(async()=>{const _0x2dd1c8=_0xf6f8d4;await(0x0,UpdateTicketService_1[_0x2dd1c8(0x170)])({'ticketId':_0x509a9f['id'],'ticketData':{'status':_0x2dd1c8(0x178)},'companyId':_0x3f5c67});},0x3e8),await(0x0,SetTicketMessagesAsRead_1[_0xf6f8d4(0x170)])(_0x509a9f),_0x36d72b[_0xf6f8d4(0x1bf)]({'mensagem':_0xf6f8d4(0x1d1)});}catch(_0x43b489){console[_0xf6f8d4(0x18f)](_0x43b489);if(Object[_0xf6f8d4(0x1ae)](_0x43b489)[_0xf6f8d4(0x1ab)]===0x0)throw new AppError_1[(_0xf6f8d4(0x170))](_0xf6f8d4(0x165));else throw new AppError_1[(_0xf6f8d4(0x170))](_0x43b489[_0xf6f8d4(0x182)]);}};exports[a26_0xe61f35(0x1bf)]=send;const addReaction=async(_0x4dc0e2,_0x51d1b4)=>{const _0x419fd8=a26_0xe61f35;try{const {messageId:_0x57e1ca}=_0x4dc0e2['params'],{type:_0x677eb}=_0x4dc0e2['body'],{companyId:_0x5a5c10,id:_0x5a8141}=_0x4dc0e2[_0x419fd8(0x1d4)],_0x47ed9d=await Message_1[_0x419fd8(0x170)][_0x419fd8(0x17b)](_0x57e1ca),_0x24a3de=await Ticket_1[_0x419fd8(0x170)][_0x419fd8(0x17b)](_0x47ed9d['ticketId'],{'include':[_0x419fd8(0x1bd)]});if(!_0x47ed9d)return _0x51d1b4[_0x419fd8(0x199)](0x194)[_0x419fd8(0x1bf)]({'message':_0x419fd8(0x179)});const _0x2d91c6=await(0x0,SendWhatsAppReaction_1['default'])({'messageId':_0x57e1ca,'ticket':_0x24a3de,'reactionType':_0x677eb}),_0x4d48dd=await _0x47ed9d[_0x419fd8(0x1ea)]({'reactions':[..._0x47ed9d[_0x419fd8(0x19a)],{'type':_0x677eb,'userId':_0x5a8141}]}),_0x1da027=(0x0,socket_1[_0x419fd8(0x161)])();return _0x1da027['to'](_0x47ed9d['ticketId'][_0x419fd8(0x1b1)]())[_0x419fd8(0x18d)](_0x419fd8(0x172)+_0x5a5c10+_0x419fd8(0x1e4),{'action':_0x419fd8(0x1ea),'message':_0x47ed9d}),_0x51d1b4[_0x419fd8(0x199)](0xc8)[_0x419fd8(0x1bf)]({'message':'Reação\x20adicionada\x20com\x20sucesso!','reactionResult':_0x2d91c6,'reactions':_0x4d48dd[_0x419fd8(0x19a)]});}catch(_0x56bfc2){console[_0x419fd8(0x1d2)](_0x419fd8(0x17e),_0x56bfc2);if(_0x56bfc2 instanceof AppError_1['default'])return _0x51d1b4[_0x419fd8(0x199)](0x190)[_0x419fd8(0x1bf)]({'message':_0x56bfc2[_0x419fd8(0x182)]});return _0x51d1b4[_0x419fd8(0x199)](0x1f4)['send']({'message':_0x419fd8(0x197),'error':_0x56bfc2[_0x419fd8(0x182)]});}};exports[a26_0xe61f35(0x191)]=addReaction;const storeAudio=async(_0x267907,_0x2a6057)=>{const _0x456347=a26_0xe61f35,_0x531d68=_0x267907['user'][_0x456347(0x183)],_0x578b33=_0x267907[_0x456347(0x19c)];let _0x41fbf5='';const _0x242658=generateRandomFilename(),_0x5ee5bd=_0x456347(0x195)+_0x531d68+'/'+_0x242658;return await convertToMp3(_0x578b33[_0x456347(0x188)],_0x5ee5bd),_0x578b33&&(_0x41fbf5=await(0x0,TranslateAudioService_1['default'])(_0x5ee5bd)),_0x2a6057['send'](_0x41fbf5||_0x456347(0x189));};exports[a26_0xe61f35(0x16b)]=storeAudio;function convertToMp3(_0x3c7312,_0x4eece4){return new Promise((_0x5de52a,_0x3f6323)=>{const _0x5eea30=a26_0x194f;(0x0,fluent_ffmpeg_1[_0x5eea30(0x170)])(_0x3c7312)['toFormat']('mp3')['on'](_0x5eea30(0x1d0),()=>{_0x5de52a(_0x4eece4);})['on']('error',_0x246156=>{const _0xdf1e7=_0x5eea30;console[_0xdf1e7(0x1d2)](_0xdf1e7(0x1b2),_0x246156),_0x3f6323(_0x246156);})['saveToFile'](_0x4eece4);});}function generateRandomFilename(){const _0x5e7633=a26_0xe61f35,_0x97aa88=crypto_1[_0x5e7633(0x170)][_0x5e7633(0x1d7)](0x10)[_0x5e7633(0x1b1)](_0x5e7633(0x1e6));return _0x97aa88+'.mp3';}const forwardMessage=async(_0x5122bf,_0x49f8d8)=>{const _0xa4d005=a26_0xe61f35;console[_0xa4d005(0x18f)](_0xa4d005(0x1de));const {body:_0x273fc8,quotedMsg:_0x106c38}=_0x5122bf[_0xa4d005(0x158)],_0x273b3b=_0x5122bf['body']['messageId'],_0x46c6ee=_0x5122bf[_0xa4d005(0x158)][_0xa4d005(0x193)];if(!_0x273b3b||!_0x46c6ee)return _0x49f8d8[_0xa4d005(0x199)](0xc8)['send'](_0xa4d005(0x1cc));const _0x14ba90=await(0x0,ShowMessageService_1['default'])(_0x273b3b),_0x485d82=await(0x0,ShowContactService_1[_0xa4d005(0x16d)])(_0x46c6ee);if(!_0x14ba90)return _0x49f8d8[_0xa4d005(0x199)](0x194)[_0xa4d005(0x1bf)](_0xa4d005(0x15c));if(!_0x485d82)return _0x49f8d8['status'](0x194)[_0xa4d005(0x1bf)](_0xa4d005(0x1b8));const _0xf28447=await(0x0,ShowMessageService_1[_0xa4d005(0x173)])(_0x14ba90);if(!_0xf28447)return _0x49f8d8[_0xa4d005(0x199)](0x194)[_0xa4d005(0x1bf)](_0xa4d005(0x166));const _0x1865f6=_0x5122bf[_0xa4d005(0x1d4)][_0xa4d005(0x183)],_0x328a4c=await(0x0,FindOrCreateTicketService_1['default'])(_0x485d82,_0xf28447,0x0,_0x1865f6);await(0x0,SetTicketMessagesAsRead_1[_0xa4d005(0x170)])(_0x328a4c);_0x14ba90['mediaType']==='conversation'||_0x14ba90['mediaType']===_0xa4d005(0x1c8)?await(0x0,SendWhatsAppMessage_1[_0xa4d005(0x170)])({'body':_0x14ba90[_0xa4d005(0x158)],'ticket':_0x328a4c,'quotedMsg':_0x106c38}):await(0x0,SendWhatsAppMedia_1[_0xa4d005(0x1c2)])(_0x14ba90[_0xa4d005(0x15e)]||'',_0x328a4c,_0x14ba90[_0xa4d005(0x158)]);const _0x505e73=await(0x0,ShowUserService_1[_0xa4d005(0x170)])(_0x5122bf[_0xa4d005(0x1d4)]['id']),_0x2f8fde=await(0x0,user_1[_0xa4d005(0x1a9)])(_0x505e73);_0x328a4c[_0xa4d005(0x199)]=_0xa4d005(0x1aa),_0x328a4c[_0xa4d005(0x17c)]=_0x2f8fde?.['id']||null,_0x328a4c[_0xa4d005(0x1ad)]=_0x505e73['id'],_0x328a4c[_0xa4d005(0x1e0)]();const _0x5deb45=(0x0,socket_1[_0xa4d005(0x161)])();return(0x0,UpdateTicketService_2[_0xa4d005(0x162)])(_0x5deb45,_0x328a4c,_0x328a4c['id'],_0x1865f6),_0x49f8d8[_0xa4d005(0x1bf)]();};exports[a26_0xe61f35(0x164)]=forwardMessage;