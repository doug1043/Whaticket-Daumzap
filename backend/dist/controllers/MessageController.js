function a26_0x55b0(_0x264927,_0x12d021){const _0x2e0591=a26_0x1aff();return a26_0x55b0=function(_0x3d27c8,_0x394922){_0x3d27c8=_0x3d27c8-0xba;let _0x1aff5e=_0x2e0591[_0x3d27c8];return _0x1aff5e;},a26_0x55b0(_0x264927,_0x12d021);}const a26_0x5c8f9b=a26_0x55b0;(function(_0x56a250,_0x13a587){const _0x2681a3=a26_0x55b0,_0x7e6b02=_0x56a250();while(!![]){try{const _0x1bb580=parseInt(_0x2681a3(0xf4))/0x1*(parseInt(_0x2681a3(0xce))/0x2)+-parseInt(_0x2681a3(0x104))/0x3+parseInt(_0x2681a3(0x11a))/0x4*(-parseInt(_0x2681a3(0x141))/0x5)+-parseInt(_0x2681a3(0x110))/0x6*(-parseInt(_0x2681a3(0x147))/0x7)+parseInt(_0x2681a3(0x11b))/0x8+parseInt(_0x2681a3(0x10f))/0x9+-parseInt(_0x2681a3(0xf6))/0xa;if(_0x1bb580===_0x13a587)break;else _0x7e6b02['push'](_0x7e6b02['shift']());}catch(_0x3dd954){_0x7e6b02['push'](_0x7e6b02['shift']());}}}(a26_0x1aff,0x72240));const a26_0x394922=(function(){let _0x2a795d=!![];return function(_0x3152f6,_0x668b0d){const _0x3ce9c2=_0x2a795d?function(){const _0x20b0e6=a26_0x55b0;if(_0x668b0d){const _0xae683d=_0x668b0d[_0x20b0e6(0x11f)](_0x3152f6,arguments);return _0x668b0d=null,_0xae683d;}}:function(){};return _0x2a795d=![],_0x3ce9c2;};}()),a26_0x3d27c8=a26_0x394922(this,function(){const _0x19052b=a26_0x55b0;return a26_0x3d27c8[_0x19052b(0x10e)]()[_0x19052b(0x10a)](_0x19052b(0xd1))[_0x19052b(0x10e)]()[_0x19052b(0xff)](a26_0x3d27c8)[_0x19052b(0x10a)](_0x19052b(0xd1));});a26_0x3d27c8();'use strict';var __createBinding=this&&this[a26_0x5c8f9b(0xf8)]||(Object[a26_0x5c8f9b(0x12c)]?function(_0x228d3a,_0x17483f,_0x3c57d6,_0x4e8935){const _0x5bac30=a26_0x5c8f9b;if(_0x4e8935===undefined)_0x4e8935=_0x3c57d6;var _0x18a106=Object[_0x5bac30(0xed)](_0x17483f,_0x3c57d6);(!_0x18a106||(_0x5bac30(0xe2)in _0x18a106?!_0x17483f[_0x5bac30(0x113)]:_0x18a106['writable']||_0x18a106[_0x5bac30(0xe9)]))&&(_0x18a106={'enumerable':!![],'get':function(){return _0x17483f[_0x3c57d6];}}),Object[_0x5bac30(0xe3)](_0x228d3a,_0x4e8935,_0x18a106);}:function(_0x1cd2e6,_0x35d8c4,_0x5014e7,_0x3915a4){if(_0x3915a4===undefined)_0x3915a4=_0x5014e7;_0x1cd2e6[_0x3915a4]=_0x35d8c4[_0x5014e7];}),__setModuleDefault=this&&this[a26_0x5c8f9b(0xfa)]||(Object[a26_0x5c8f9b(0x12c)]?function(_0xe4aa49,_0xf85457){const _0x4d3062=a26_0x5c8f9b;Object[_0x4d3062(0xe3)](_0xe4aa49,'default',{'enumerable':!![],'value':_0xf85457});}:function(_0x440787,_0x2d04a1){const _0x8cbba4=a26_0x5c8f9b;_0x440787[_0x8cbba4(0xcb)]=_0x2d04a1;}),__importStar=this&&this[a26_0x5c8f9b(0xbe)]||function(_0x1bd740){const _0x27665a=a26_0x5c8f9b;if(_0x1bd740&&_0x1bd740[_0x27665a(0x113)])return _0x1bd740;var _0x1d1f15={};if(_0x1bd740!=null){for(var _0x1752d5 in _0x1bd740)if(_0x1752d5!==_0x27665a(0xcb)&&Object['prototype'][_0x27665a(0x131)][_0x27665a(0xf5)](_0x1bd740,_0x1752d5))__createBinding(_0x1d1f15,_0x1bd740,_0x1752d5);}return __setModuleDefault(_0x1d1f15,_0x1bd740),_0x1d1f15;},__importDefault=this&&this[a26_0x5c8f9b(0x145)]||function(_0xa93b0){const _0x4c2536=a26_0x5c8f9b;return _0xa93b0&&_0xa93b0[_0x4c2536(0x113)]?_0xa93b0:{'default':_0xa93b0};};Object['defineProperty'](exports,a26_0x5c8f9b(0x113),{'value':!![]}),exports[a26_0x5c8f9b(0xda)]=exports[a26_0x5c8f9b(0xee)]=exports['addReaction']=exports[a26_0x5c8f9b(0x137)]=exports[a26_0x5c8f9b(0x108)]=exports[a26_0x5c8f9b(0xe1)]=exports[a26_0x5c8f9b(0xc9)]=exports[a26_0x5c8f9b(0x133)]=exports[a26_0x5c8f9b(0x13e)]=exports[a26_0x5c8f9b(0x103)]=void 0x0;const AppError_1=__importDefault(require(a26_0x5c8f9b(0xc8))),SetTicketMessagesAsRead_1=__importDefault(require('../helpers/SetTicketMessagesAsRead')),socket_1=require(a26_0x5c8f9b(0xf2)),Message_1=__importDefault(require(a26_0x5c8f9b(0xf9))),Ticket_1=__importDefault(require(a26_0x5c8f9b(0x12a))),Queue_1=__importDefault(require(a26_0x5c8f9b(0x12e))),User_1=__importDefault(require('../models/User')),Whatsapp_1=__importDefault(require(a26_0x5c8f9b(0x126))),Mustache_1=__importDefault(require(a26_0x5c8f9b(0xd2))),ListMessagesService_1=__importDefault(require(a26_0x5c8f9b(0xfd))),ShowTicketService_1=__importDefault(require('../services/TicketServices/ShowTicketService')),FindOrCreateTicketService_1=__importDefault(require(a26_0x5c8f9b(0xca))),UpdateTicketService_1=__importDefault(require(a26_0x5c8f9b(0xc6))),DeleteWhatsAppMessage_1=__importDefault(require('../services/WbotServices/DeleteWhatsAppMessage')),SendWhatsAppMedia_1=__importStar(require('../services/WbotServices/SendWhatsAppMedia')),SendWhatsAppMessage_1=__importDefault(require(a26_0x5c8f9b(0x144))),SendWhatsAppReaction_1=__importDefault(require(a26_0x5c8f9b(0xe5))),CheckNumber_1=__importDefault(require('../services/WbotServices/CheckNumber')),EditWhatsAppMessage_1=__importDefault(require(a26_0x5c8f9b(0x118))),TranslateAudioService_1=__importDefault(require(a26_0x5c8f9b(0xeb))),CreateOrUpdateContactService_1=__importDefault(require(a26_0x5c8f9b(0xd3))),ShowMessageService_1=__importStar(require(a26_0x5c8f9b(0xe0))),ShowContactService_1=require(a26_0x5c8f9b(0x117)),ShowUserService_1=__importDefault(require('../services/UserServices/ShowUserService')),user_1=require(a26_0x5c8f9b(0xbb)),UpdateTicketService_2=require(a26_0x5c8f9b(0xc6)),ListAllMessagesService_1=__importDefault(require(a26_0x5c8f9b(0x12d))),validator_1=require('validator'),ffmpeg_static_1=__importDefault(require(a26_0x5c8f9b(0x130))),fluent_ffmpeg_1=__importDefault(require(a26_0x5c8f9b(0x13c))),crypto_1=__importDefault(require(a26_0x5c8f9b(0x14b))),GetWhatsappWbot_1=__importDefault(require(a26_0x5c8f9b(0xbf))),wbot_1=require('../libs/wbot'),SendPresenceStatus_1=require(a26_0x5c8f9b(0xf1));fluent_ffmpeg_1[a26_0x5c8f9b(0xcb)]['setFfmpegPath'](ffmpeg_static_1[a26_0x5c8f9b(0xcb)]);const index=async(_0x25a6d5,_0x4e5aa9)=>{const _0x525af1=a26_0x5c8f9b,{ticketId:_0x4447aa}=_0x25a6d5[_0x525af1(0x111)],{pageNumber:_0x220beb}=_0x25a6d5['query'],{companyId:_0xca541,profile:_0x5612a6}=_0x25a6d5[_0x525af1(0x149)],_0xc2021b=[];if(_0x5612a6!==_0x525af1(0xfe)){const _0x1ad1a0=await User_1[_0x525af1(0xcb)][_0x525af1(0x109)](_0x25a6d5[_0x525af1(0x149)]['id'],{'include':[{'model':Queue_1[_0x525af1(0xcb)],'as':'queues'}]});_0x1ad1a0[_0x525af1(0x115)][_0x525af1(0x121)](_0x5c3544=>{_0xc2021b['push'](_0x5c3544['id']);});}const {count:_0x3b8d95,messages:_0x5e654b,ticket:_0x34099f,hasMore:_0x4abc07}=await(0x0,ListMessagesService_1[_0x525af1(0xcb)])({'pageNumber':_0x220beb,'ticketId':_0x4447aa,'companyId':_0xca541,'queues':_0xc2021b});return(0x0,SetTicketMessagesAsRead_1['default'])(_0x34099f),_0x4e5aa9['json']({'count':_0x3b8d95,'messages':_0x5e654b,'ticket':_0x34099f,'hasMore':_0x4abc07});};exports[a26_0x5c8f9b(0x103)]=index;const store=async(_0x3a74fa,_0x215df8)=>{const _0x5a879b=a26_0x5c8f9b,{ticketId:_0x5baacc}=_0x3a74fa[_0x5a879b(0x111)],{body:_0x7ca245,quotedMsg:_0x4ec2ed,vCard:_0x32afea}=_0x3a74fa[_0x5a879b(0x146)],_0x4d1e23=_0x3a74fa['files'],{companyId:_0x31f4a0,id:_0x5c54fe}=_0x3a74fa['user'],_0xd1978c=await(0x0,ShowTicketService_1[_0x5a879b(0xcb)])(_0x5baacc,_0x31f4a0);_0xd1978c[_0x5a879b(0xd6)]!==_0x5a879b(0x135)&&await(0x0,UpdateTicketService_1[_0x5a879b(0xcb)])({'ticketId':_0xd1978c['id'],'ticketData':{'status':'open','userId':parseInt(_0x5c54fe)},'companyId':_0x31f4a0});if(_0xd1978c[_0x5a879b(0xc7)]>0x0)(0x0,SetTicketMessagesAsRead_1[_0x5a879b(0xcb)])(_0xd1978c);if(_0x4d1e23)await Promise[_0x5a879b(0xc4)](_0x4d1e23[_0x5a879b(0x134)](async(_0x3008a0,_0x3b44e7)=>{const _0x8068a1=_0x5a879b;return(0x0,SendWhatsAppMedia_1[_0x8068a1(0xcb)])({'media':_0x3008a0,'ticket':_0xd1978c,'body':Array['isArray'](_0x7ca245)?_0x7ca245[_0x3b44e7]:_0x7ca245});}));else{const _0x208d7d=await(0x0,SendWhatsAppMessage_1[_0x5a879b(0xcb)])({'body':_0x7ca245,'ticket':_0xd1978c,'quotedMsg':_0x4ec2ed,'vCard':_0x32afea});}return _0x215df8['send']();};exports[a26_0x5c8f9b(0x13e)]=store;const getAll=async(_0x10e188,_0x23e0fa)=>{const _0x47cc2b=a26_0x5c8f9b,_0x2fdcda=_0x10e188['query'][_0x47cc2b(0x10c)],_0x40ee65=_0x10e188['query'][_0x47cc2b(0x129)],_0x3d2a85=(0x0,validator_1[_0x47cc2b(0xfc)])(_0x10e188['query'][_0x47cc2b(0xba)]),{companyId:_0x5edb7c}=_0x10e188['user'],{count:_0x43300f}=await(0x0,ListAllMessagesService_1['default'])({'companyId':_0x5edb7c,'fromMe':_0x3d2a85,'dateStart':_0x2fdcda,'dateEnd':_0x40ee65});return _0x23e0fa[_0x47cc2b(0xc3)]({'count':_0x43300f});};exports[a26_0x5c8f9b(0x133)]=getAll;const edit=async(_0x3bef0d,_0x41f0f0)=>{const _0x57de81=a26_0x5c8f9b,{messageId:_0x42c500}=_0x3bef0d[_0x57de81(0x111)],{companyId:_0x35f2e7}=_0x3bef0d[_0x57de81(0x149)],{body:_0x367c08}=_0x3bef0d[_0x57de81(0x146)],{ticketId:_0x2df421,message:_0x2b0d9f}=await(0x0,EditWhatsAppMessage_1[_0x57de81(0xcb)])({'messageId':_0x42c500,'companyId':_0x35f2e7,'body':_0x367c08}),_0xaeb92e=(0x0,socket_1[_0x57de81(0x136)])();return _0xaeb92e['to'](_0x2df421[_0x57de81(0x10e)]())[_0x57de81(0x13d)](_0x57de81(0x114)+_0x35f2e7+_0x57de81(0x142),{'action':_0x57de81(0x11d),'message':_0x2b0d9f}),_0x41f0f0[_0x57de81(0x137)]();};exports[a26_0x5c8f9b(0xc9)]=edit;const remove=async(_0x43d445,_0x2ad7d8)=>{const _0x1a4731=a26_0x5c8f9b,{messageId:_0x502a2f}=_0x43d445[_0x1a4731(0x111)],{companyId:_0x108130}=_0x43d445[_0x1a4731(0x149)],_0x83f0dc=await(0x0,DeleteWhatsAppMessage_1['default'])(_0x502a2f),_0x184e85=(0x0,socket_1[_0x1a4731(0x136)])();return _0x184e85['to'](_0x83f0dc[_0x1a4731(0x101)]['toString']())[_0x1a4731(0x13d)](_0x1a4731(0x114)+_0x108130+_0x1a4731(0x142),{'action':'update','message':_0x83f0dc}),_0x2ad7d8[_0x1a4731(0x137)]();};exports[a26_0x5c8f9b(0xe1)]=remove;const typing=async(_0x3e701e,_0x8f4672)=>{const _0x48ec42=a26_0x5c8f9b,{ticketId:_0x313c3d}=_0x3e701e['params'],{companyId:_0x5b77a0}=_0x3e701e['user'],{status:_0x1d3139}=_0x3e701e[_0x48ec42(0xc5)];if(!_0x313c3d)return _0x8f4672[_0x48ec42(0xd6)](0x190)[_0x48ec42(0x137)](_0x48ec42(0x13b));const _0x24ea21=await(0x0,ShowTicketService_1['default'])(_0x313c3d,_0x5b77a0);if(!_0x24ea21)return _0x8f4672['status'](0x194)[_0x48ec42(0x137)]('Ticket\x20not\x20found');let _0x389ff9=(0x0,wbot_1[_0x48ec42(0x10b)])(_0x24ea21[_0x48ec42(0x127)]);return _0x1d3139==_0x48ec42(0xc1)?await(0x0,SendPresenceStatus_1[_0x48ec42(0x11e)])(_0x389ff9,_0x24ea21[_0x48ec42(0xcd)][_0x48ec42(0xe6)]+'@'+(_0x24ea21[_0x48ec42(0x148)]?'g.us':_0x48ec42(0x13a))):await(0x0,SendPresenceStatus_1[_0x48ec42(0x105)])(_0x389ff9,_0x24ea21[_0x48ec42(0xcd)][_0x48ec42(0xe6)]+'@'+(_0x24ea21['isGroup']?'g.us':_0x48ec42(0x13a))),_0x8f4672[_0x48ec42(0xd6)](0xc8)[_0x48ec42(0x137)](_0x48ec42(0x132)+_0x1d3139+_0x48ec42(0x10d));};exports['typing']=typing;const send=async(_0x8f766f,_0x514d70)=>{const _0x30ae96=a26_0x5c8f9b,{whatsappId:_0x2865ad}=_0x8f766f[_0x30ae96(0x111)],_0xed9b1b=_0x8f766f[_0x30ae96(0x146)],_0x19d131=_0x8f766f['files'];try{const _0x317397=await Whatsapp_1['default'][_0x30ae96(0x109)](_0x2865ad);if(!_0x317397)throw new Error(_0x30ae96(0x116));if(_0xed9b1b[_0x30ae96(0xe6)]===undefined)throw new Error(_0x30ae96(0xe8));const _0x30dd8d=_0xed9b1b['number'],_0xf1af7e=_0xed9b1b['body'],_0x2e3c03=_0x317397[_0x30ae96(0x106)],_0x410005=await(0x0,CheckNumber_1['default'])(_0x30dd8d,_0x2e3c03);var _0x135856=_0x410005[_0x30ae96(0xf7)][_0x30ae96(0x107)]('@g.us');console[_0x30ae96(0x143)](_0x135856);const _0x4ecc44=_0x410005['jid']['replace'](_0x30ae96(0xd8),'')[_0x30ae96(0xdc)]('@g.us',''),_0x4bdb82={'name':''+_0x4ecc44,'number':_0x4ecc44,'isGroup':_0x135856,'companyId':_0x2e3c03},_0x404bfa=await(0x0,GetWhatsappWbot_1[_0x30ae96(0xcb)])(_0x317397),_0x792e6=await(0x0,CreateOrUpdateContactService_1[_0x30ae96(0xcb)])(_0x4bdb82,_0x404bfa,_0x410005[_0x30ae96(0xf7)]),_0x347df8=await(0x0,FindOrCreateTicketService_1[_0x30ae96(0xcb)])(_0x792e6,_0x317397['id'],0x0,_0x2e3c03);return _0x19d131?await Promise[_0x30ae96(0xc4)](_0x19d131[_0x30ae96(0x134)](async _0xacad75=>{const _0x35a39b=_0x30ae96;await _0x8f766f[_0x35a39b(0xdd)]['get']('queues')[_0x35a39b(0xd7)][_0x35a39b(0xfb)](_0x35a39b(0xec),{'whatsappId':_0x2865ad,'data':{'number':_0x4ecc44,'body':_0xf1af7e?(0x0,Mustache_1['default'])(_0xf1af7e,_0x347df8):_0xacad75[_0x35a39b(0x122)],'mediaPath':_0xacad75[_0x35a39b(0x12f)],'finalName':_0xacad75['filename'],'fileName':_0xacad75[_0x35a39b(0x122)]}},{'removeOnComplete':!![],'attempts':0x3});})):await(0x0,SendWhatsAppMessage_1[_0x30ae96(0xcb)])({'body':(0x0,Mustache_1[_0x30ae96(0xcb)])(_0xf1af7e,_0x347df8),'ticket':_0x347df8}),_0xed9b1b[_0x30ae96(0xdb)]&&setTimeout(async()=>{const _0x51f277=_0x30ae96;await(0x0,UpdateTicketService_1[_0x51f277(0xcb)])({'ticketId':_0x347df8['id'],'ticketData':{'status':_0x51f277(0x120)},'companyId':_0x2e3c03});},0x3e8),await(0x0,SetTicketMessagesAsRead_1[_0x30ae96(0xcb)])(_0x347df8),_0x514d70[_0x30ae96(0x137)]({'mensagem':'Mensagem\x20enviada'});}catch(_0x26aeac){console['log'](_0x26aeac);if(Object[_0x30ae96(0xde)](_0x26aeac)[_0x30ae96(0x12b)]===0x0)throw new AppError_1[(_0x30ae96(0xcb))](_0x30ae96(0x119));else throw new AppError_1[(_0x30ae96(0xcb))](_0x26aeac[_0x30ae96(0xd5)]);}};exports[a26_0x5c8f9b(0x137)]=send;function a26_0x1aff(){const _0xa8b0e3=['queueId','true','error','json','all','query','../services/TicketServices/UpdateTicketService','unreadMessages','../errors/AppError','edit','../services/TicketServices/FindOrCreateTicketService','default','toFormat','contact','46waydEK','Erro\x20ao\x20adicionar\x20reação:','Erro\x20na\x20conversão\x20do\x20áudio:','(((.+)+)+)+$','../helpers/Mustache','../services/ContactServices/CreateOrUpdateContactService','Contact\x20not\x20found','message','status','messageQueue','@s.whatsapp.net','hex','forwardMessage','closeTicket','replace','app','keys','file','../services/MessageServices/ShowMessageService','remove','get','defineProperty','ShowContactService1','../services/WbotServices/SendWhatsAppReaction','number','userId','O\x20número\x20é\x20obrigatório','configurable','.mp3','../services/MessageServices/TranslateAudioService','SendMessage','getOwnPropertyDescriptor','storeAudio','saveToFile','conversation','../helpers/SendPresenceStatus','../libs/socket','GetWhatsAppFromMessage','8233ZfHAZn','call','1024380nbfyGF','jid','__createBinding','../models/Message','__setModuleDefault','add','toBoolean','../services/MessageServices/ListMessagesService','admin','constructor','firstQueueThisUser','ticketId','Transcrição\x20não\x20disponível','index','713544XSZgQv','SendPausedStatus','companyId','includes','typing','findByPk','search','getWbot','dateStart','\x20enviado\x20com\x20sucesso','toString','6956793QkoeGF','31776mxtOwE','params','messageId','__esModule','company-','queues','Não\x20foi\x20possível\x20realizar\x20a\x20operação','../services/ContactServices/ShowContactService','../services/WbotServices/EditWhatsAppMessage','Não\x20foi\x20possível\x20enviar\x20a\x20mensagem,\x20tente\x20novamente\x20em\x20alguns\x20instantes','572YGEWND','2438496FcAOSa','end','update','SendTypingStatus','apply','closed','forEach','originalname','MessageId\x20or\x20ContactId\x20not\x20found','Message\x20not\x20found','extendedTextMessage','../models/Whatsapp','whatsappId','notifyUpdate','dateEnd','../models/Ticket','length','create','../services/MessageServices/ListAllMessagesService','../models/Queue','path','ffmpeg-static','hasOwnProperty','Status\x20','getAll','map','open','getIO','send','Erro\x20ao\x20adicionar\x20reação','Whatsapp\x20from\x20message\x20not\x20found','s.whatsapp.net','TicketId\x20is\x20required','fluent-ffmpeg','emit','store','save','reactions','25690QBpjKI','-appMessage','log','../services/WbotServices/SendWhatsAppMessage','__importDefault','body','364AjoGeb','isGroup','user','mp3','crypto','fromMe','../utils/user','addReaction','>>>>>>>>>>>>>>>>>forwardMessage\x20X<<<<<<<<<<<<<<<<<<<','__importStar','../helpers/GetWhatsappWbot'];a26_0x1aff=function(){return _0xa8b0e3;};return a26_0x1aff();}const addReaction=async(_0x2ee186,_0x460796)=>{const _0x1e5ff9=a26_0x5c8f9b;try{const {messageId:_0x383d11}=_0x2ee186[_0x1e5ff9(0x111)],{type:_0x345f3d}=_0x2ee186['body'],{companyId:_0x422988,id:_0x432658}=_0x2ee186['user'],_0xe5e389=await Message_1[_0x1e5ff9(0xcb)]['findByPk'](_0x383d11),_0x5aca99=await Ticket_1['default'][_0x1e5ff9(0x109)](_0xe5e389[_0x1e5ff9(0x101)],{'include':[_0x1e5ff9(0xcd)]});if(!_0xe5e389)return _0x460796['status'](0x194)[_0x1e5ff9(0x137)]({'message':'Mensagem\x20não\x20encontrada'});const _0x322426=await(0x0,SendWhatsAppReaction_1['default'])({'messageId':_0x383d11,'ticket':_0x5aca99,'reactionType':_0x345f3d}),_0x2027e6=await _0xe5e389['update']({'reactions':[..._0xe5e389[_0x1e5ff9(0x140)],{'type':_0x345f3d,'userId':_0x432658}]}),_0xe96fdb=(0x0,socket_1[_0x1e5ff9(0x136)])();return _0xe96fdb['to'](_0xe5e389[_0x1e5ff9(0x101)][_0x1e5ff9(0x10e)]())[_0x1e5ff9(0x13d)]('company-'+_0x422988+_0x1e5ff9(0x142),{'action':'update','message':_0xe5e389}),_0x460796[_0x1e5ff9(0xd6)](0xc8)[_0x1e5ff9(0x137)]({'message':'Reação\x20adicionada\x20com\x20sucesso!','reactionResult':_0x322426,'reactions':_0x2027e6['reactions']});}catch(_0x15d634){console['error'](_0x1e5ff9(0xcf),_0x15d634);if(_0x15d634 instanceof AppError_1[_0x1e5ff9(0xcb)])return _0x460796[_0x1e5ff9(0xd6)](0x190)['send']({'message':_0x15d634[_0x1e5ff9(0xd5)]});return _0x460796[_0x1e5ff9(0xd6)](0x1f4)[_0x1e5ff9(0x137)]({'message':_0x1e5ff9(0x138),'error':_0x15d634['message']});}};exports[a26_0x5c8f9b(0xbc)]=addReaction;const storeAudio=async(_0x84ff80,_0x3b3688)=>{const _0x1d064f=a26_0x5c8f9b,_0x285fed=_0x84ff80[_0x1d064f(0x149)][_0x1d064f(0x106)],_0x3799ca=_0x84ff80[_0x1d064f(0xdf)];let _0x1fc478='';const _0x4df0dc=generateRandomFilename(),_0x1570ad='./public/company'+_0x285fed+'/'+_0x4df0dc;return await convertToMp3(_0x3799ca[_0x1d064f(0x12f)],_0x1570ad),_0x3799ca&&(_0x1fc478=await(0x0,TranslateAudioService_1[_0x1d064f(0xcb)])(_0x1570ad)),_0x3b3688['send'](_0x1fc478||_0x1d064f(0x102));};exports[a26_0x5c8f9b(0xee)]=storeAudio;function convertToMp3(_0x2e2f44,_0x3769b0){return new Promise((_0x4ca2b1,_0x34f954)=>{const _0x1ece2a=a26_0x55b0;(0x0,fluent_ffmpeg_1[_0x1ece2a(0xcb)])(_0x2e2f44)[_0x1ece2a(0xcc)](_0x1ece2a(0x14a))['on'](_0x1ece2a(0x11c),()=>{_0x4ca2b1(_0x3769b0);})['on'](_0x1ece2a(0xc2),_0x54a2f6=>{const _0x3e0965=_0x1ece2a;console['error'](_0x3e0965(0xd0),_0x54a2f6),_0x34f954(_0x54a2f6);})[_0x1ece2a(0xef)](_0x3769b0);});}function generateRandomFilename(){const _0x2800b3=a26_0x5c8f9b,_0x110d09=crypto_1['default']['randomBytes'](0x10)[_0x2800b3(0x10e)](_0x2800b3(0xd9));return _0x110d09+_0x2800b3(0xea);}const forwardMessage=async(_0x2808a0,_0x1f956b)=>{const _0xf44ce=a26_0x5c8f9b;console['log'](_0xf44ce(0xbd));const {body:_0x5d27dd,quotedMsg:_0xb4dfca}=_0x2808a0[_0xf44ce(0x146)],_0x24a518=_0x2808a0[_0xf44ce(0x146)][_0xf44ce(0x112)],_0x4c2601=_0x2808a0['body']['contactId'];if(!_0x24a518||!_0x4c2601)return _0x1f956b[_0xf44ce(0xd6)](0xc8)['send'](_0xf44ce(0x123));const _0x1121c1=await(0x0,ShowMessageService_1[_0xf44ce(0xcb)])(_0x24a518),_0x2cbfef=await(0x0,ShowContactService_1[_0xf44ce(0xe4)])(_0x4c2601);if(!_0x1121c1)return _0x1f956b[_0xf44ce(0xd6)](0x194)[_0xf44ce(0x137)](_0xf44ce(0x124));if(!_0x2cbfef)return _0x1f956b[_0xf44ce(0xd6)](0x194)[_0xf44ce(0x137)](_0xf44ce(0xd4));const _0x343309=await(0x0,ShowMessageService_1[_0xf44ce(0xf3)])(_0x1121c1);if(!_0x343309)return _0x1f956b['status'](0x194)[_0xf44ce(0x137)](_0xf44ce(0x139));const _0x255e7b=_0x2808a0[_0xf44ce(0x149)][_0xf44ce(0x106)],_0x2a0c8e=await(0x0,FindOrCreateTicketService_1['default'])(_0x2cbfef,_0x343309,0x0,_0x255e7b);await(0x0,SetTicketMessagesAsRead_1[_0xf44ce(0xcb)])(_0x2a0c8e);_0x1121c1['mediaType']===_0xf44ce(0xf0)||_0x1121c1['mediaType']===_0xf44ce(0x125)?await(0x0,SendWhatsAppMessage_1[_0xf44ce(0xcb)])({'body':_0x1121c1[_0xf44ce(0x146)],'ticket':_0x2a0c8e,'quotedMsg':_0xb4dfca}):await(0x0,SendWhatsAppMedia_1['SendWhatsAppMediaFileAddress'])(_0x1121c1['mediaUrl']||'',_0x2a0c8e,_0x1121c1[_0xf44ce(0x146)]);const _0x1b52ab=await(0x0,ShowUserService_1['default'])(_0x2808a0['user']['id']),_0x508008=await(0x0,user_1[_0xf44ce(0x100)])(_0x1b52ab);_0x2a0c8e['status']=_0xf44ce(0x135),_0x2a0c8e[_0xf44ce(0xc0)]=_0x508008?.['id']||null,_0x2a0c8e[_0xf44ce(0xe7)]=_0x1b52ab['id'],_0x2a0c8e[_0xf44ce(0x13f)]();const _0x3b25fd=(0x0,socket_1[_0xf44ce(0x136)])();return(0x0,UpdateTicketService_2[_0xf44ce(0x128)])(_0x3b25fd,_0x2a0c8e,_0x2a0c8e['id'],_0x255e7b),_0x1f956b[_0xf44ce(0x137)]();};exports[a26_0x5c8f9b(0xda)]=forwardMessage;