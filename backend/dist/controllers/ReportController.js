function a33_0x2875(_0x513b40,_0x11d0c5){const _0x4596fb=a33_0x43fd();return a33_0x2875=function(_0x5333c0,_0x2c0a94){_0x5333c0=_0x5333c0-0x1d5;let _0x43fd98=_0x4596fb[_0x5333c0];return _0x43fd98;},a33_0x2875(_0x513b40,_0x11d0c5);}const a33_0x166583=a33_0x2875;(function(_0x43a466,_0x641a38){const _0x4dd299=a33_0x2875,_0x193d04=_0x43a466();while(!![]){try{const _0x298c8f=-parseInt(_0x4dd299(0x1e7))/0x1*(parseInt(_0x4dd299(0x1ea))/0x2)+parseInt(_0x4dd299(0x1de))/0x3+-parseInt(_0x4dd299(0x1fd))/0x4+-parseInt(_0x4dd299(0x1d8))/0x5*(-parseInt(_0x4dd299(0x205))/0x6)+parseInt(_0x4dd299(0x1f0))/0x7+parseInt(_0x4dd299(0x202))/0x8*(parseInt(_0x4dd299(0x1df))/0x9)+parseInt(_0x4dd299(0x1fc))/0xa;if(_0x298c8f===_0x641a38)break;else _0x193d04['push'](_0x193d04['shift']());}catch(_0x4eea14){_0x193d04['push'](_0x193d04['shift']());}}}(a33_0x43fd,0x98113));const a33_0x2c0a94=(function(){let _0x279b6a=!![];return function(_0x3f9bbe,_0x3dab79){const _0x12ea42=_0x279b6a?function(){const _0x59a8a8=a33_0x2875;if(_0x3dab79){const _0xf5e4be=_0x3dab79[_0x59a8a8(0x1f6)](_0x3f9bbe,arguments);return _0x3dab79=null,_0xf5e4be;}}:function(){};return _0x279b6a=![],_0x12ea42;};}()),a33_0x5333c0=a33_0x2c0a94(this,function(){const _0x16fcc6=a33_0x2875;return a33_0x5333c0[_0x16fcc6(0x1d6)]()['search'](_0x16fcc6(0x1e4))[_0x16fcc6(0x1d6)]()[_0x16fcc6(0x1ec)](a33_0x5333c0)[_0x16fcc6(0x1f3)](_0x16fcc6(0x1e4));});a33_0x5333c0();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2cc015){return _0x2cc015&&_0x2cc015['__esModule']?_0x2cc015:{'default':_0x2cc015};};function a33_0x43fd(){const _0x324c37=['../models/Tag','DESC','profile','N/A','1416410TcUNuK','3318580dZfoWv','../models/Ticket','user','../models/User','subtract','93952AKxVsK','createdAt','defineProperty','36bKxnfL','name','isBetween','queue','../models/TicketTraking','queuedAt','sequelize','../models/Contact','rated','toDate','tagId','toString','contactId','734140zCBvFO','minute','userId','push','startOf','queueId','1384836iWLtzQ','306iGfwHC','ratingAt','json','between','findOne','(((.+)+)+)+$','whatsapp','moment/moment','924401IKMODo','day','map','2ywRCIJ','tag','constructor','findAll','number','status','3453772eeLuXm','default','join','search','finishedAt','../models/Whatsapp','apply','../models/Queue'];a33_0x43fd=function(){return _0x324c37;};return a33_0x43fd();}Object[a33_0x166583(0x204)](exports,'__esModule',{'value':!![]});const Ticket_1=__importDefault(require(a33_0x166583(0x1fe))),sequelize_1=require(a33_0x166583(0x20b)),moment_1=__importDefault(require(a33_0x166583(0x1e6))),User_1=__importDefault(require(a33_0x166583(0x200))),Queue_1=__importDefault(require(a33_0x166583(0x1f7))),TicketTag_1=__importDefault(require('../models/TicketTag')),Tag_1=__importDefault(require(a33_0x166583(0x1f8))),Whatsapp_1=__importDefault(require(a33_0x166583(0x1f5))),TicketTraking_1=__importDefault(require(a33_0x166583(0x209))),Contact_1=__importDefault(require(a33_0x166583(0x20c))),ReportController={'tickets':async(_0x2127d3,_0x29f8c8)=>{const _0x70a8b8=a33_0x166583,{companyId:_0x2f0662}=_0x2127d3[_0x70a8b8(0x1ff)];let {dateStart:_0x4b6649,dateEnd:_0x1f64df,status:_0x3fc7f2,queueId:_0x2ce754}=_0x2127d3['body'],_0x113721={'companyId':_0x2f0662};_0x2ce754&&(_0x113721[_0x70a8b8(0x1dd)]=_0x2ce754);_0x3fc7f2&&(_0x113721[_0x70a8b8(0x1ef)]=_0x3fc7f2);let _0x580137=await Ticket_1[_0x70a8b8(0x1f1)][_0x70a8b8(0x1ed)]({'where':{..._0x113721,'createdAt':{[sequelize_1['Op'][_0x70a8b8(0x1e2)]]:[(0x0,moment_1['default'])(_0x4b6649)[_0x70a8b8(0x1dc)](_0x70a8b8(0x1e8))[_0x70a8b8(0x20e)](),(0x0,moment_1[_0x70a8b8(0x1f1)])(_0x1f64df)['endOf'](_0x70a8b8(0x1e8))[_0x70a8b8(0x20e)]()]}},'include':[{'model':User_1[_0x70a8b8(0x1f1)],'as':_0x70a8b8(0x1ff),'attributes':['id','name',_0x70a8b8(0x1fa)]},{'model':Queue_1[_0x70a8b8(0x1f1)],'as':_0x70a8b8(0x208),'attributes':['id',_0x70a8b8(0x206)]},{'model':Whatsapp_1['default'],'as':_0x70a8b8(0x1e5),'attributes':['id',_0x70a8b8(0x206)]}],'attributes':['id',_0x70a8b8(0x203),_0x70a8b8(0x1ef),_0x70a8b8(0x1dd),_0x70a8b8(0x1da),_0x70a8b8(0x1d7)],'order':[[_0x70a8b8(0x203),_0x70a8b8(0x1f9)]]}),_0x24bb88=[];for(let _0x26b316 of _0x580137){const _0x201ec7=await TicketTag_1['default'][_0x70a8b8(0x1ed)]({'attributes':[_0x70a8b8(0x1d5)],'where':{'ticketId':_0x26b316['id']},'include':[{'model':Tag_1['default'],'as':_0x70a8b8(0x1eb),'attributes':['id',_0x70a8b8(0x206)]}]});var _0x2c9c0b=await TicketTraking_1['default'][_0x70a8b8(0x1e3)]({'where':{'ticketId':_0x26b316['id']},'attributes':['startedAt',_0x70a8b8(0x20a),'ratingAt',_0x70a8b8(0x20d),_0x70a8b8(0x203),_0x70a8b8(0x1f4)]});let _0x3dd239=await Contact_1[_0x70a8b8(0x1f1)]['findOne']({'attributes':['createdAt','name',_0x70a8b8(0x1ee)],'where':{'id':_0x26b316[_0x70a8b8(0x1d7)]}}),_0x558027=![];_0x3dd239&&(_0x558027=(0x0,moment_1[_0x70a8b8(0x1f1)])(_0x3dd239['createdAt'])[_0x70a8b8(0x207)]((0x0,moment_1[_0x70a8b8(0x1f1)])(_0x26b316['createdAt'])[_0x70a8b8(0x201)](0x1,_0x70a8b8(0x1d9)),(0x0,moment_1['default'])(_0x26b316['createdAt'])['add'](0x1,_0x70a8b8(0x1d9)))),_0x24bb88[_0x70a8b8(0x1db)]({'id':_0x26b316['id'],'contactName':_0x3dd239?.['name']||_0x70a8b8(0x1fb),'contactNumber':_0x3dd239?.['number']||_0x70a8b8(0x1fb),'createdAt':_0x26b316?.[_0x70a8b8(0x203)],'startedAt':_0x2c9c0b?.['startedAt'],'queuedAt':_0x2c9c0b?.[_0x70a8b8(0x20a)],'ratingAt':_0x2c9c0b?.[_0x70a8b8(0x1e0)],'rated':_0x2c9c0b?.[_0x70a8b8(0x20d)],'status':_0x26b316[_0x70a8b8(0x1ef)],'user':_0x26b316[_0x70a8b8(0x1ff)]?.['name']||'N/A','userId':_0x26b316['userId'],'queue':_0x26b316[_0x70a8b8(0x208)]?.[_0x70a8b8(0x206)]||_0x70a8b8(0x1fb),'queueId':_0x26b316['queueId'],'connection':_0x26b316['whatsapp'][_0x70a8b8(0x206)],'connectionId':_0x26b316[_0x70a8b8(0x1e5)]['id'],'firstSentMessageAt':_0x2c9c0b?.[_0x70a8b8(0x203)],'resolvedAt':_0x2c9c0b?.[_0x70a8b8(0x1f4)],'isNewContact':_0x558027,'tags':_0x201ec7[_0x70a8b8(0x1e9)](_0x824d39=>_0x824d39[_0x70a8b8(0x1eb)][_0x70a8b8(0x206)])[_0x70a8b8(0x1f2)](',')});}return _0x29f8c8[_0x70a8b8(0x1e1)](_0x24bb88);}};exports[a33_0x166583(0x1f1)]=ReportController;