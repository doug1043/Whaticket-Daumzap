function a33_0x39f6(_0xf08dcb,_0x348e67){const _0x58bc05=a33_0x1326();return a33_0x39f6=function(_0x40583d,_0x3ca9fe){_0x40583d=_0x40583d-0x7c;let _0x132632=_0x58bc05[_0x40583d];return _0x132632;},a33_0x39f6(_0xf08dcb,_0x348e67);}function a33_0x1326(){const _0x3fd66b=['contactId','isBetween','search','3191184QkEjkt','10KQkIqO','map','user','profile','N/A','add','queue','ratingAt','findOne','push','../models/Queue','sequelize','182495ZrENnF','between','whatsapp','body','3PpEixK','../models/TicketTag','queueId','__esModule','queuedAt','createdAt','597248sEbYID','4XZcDBk','rated','954162rUyneu','constructor','tag','name','default','../models/Tag','../models/TicketTraking','562016RMbtIK','tagId','3305664kDuvMM','finishedAt','../models/Ticket','startedAt','moment/moment','join','minute','toDate','1328285cTbfNO','number','status','toString','userId','findAll','../models/Whatsapp','subtract','../models/User','startOf','day'];a33_0x1326=function(){return _0x3fd66b;};return a33_0x1326();}const a33_0x2210f4=a33_0x39f6;(function(_0x454e36,_0x9d9108){const _0x306da3=a33_0x39f6,_0x277fb2=_0x454e36();while(!![]){try{const _0x33014a=-parseInt(_0x306da3(0x8d))/0x1+-parseInt(_0x306da3(0x97))/0x2*(-parseInt(_0x306da3(0x91))/0x3)+parseInt(_0x306da3(0x98))/0x4*(parseInt(_0x306da3(0xab))/0x5)+-parseInt(_0x306da3(0x9a))/0x6+parseInt(_0x306da3(0xa1))/0x7+-parseInt(_0x306da3(0xa3))/0x8+-parseInt(_0x306da3(0x80))/0x9*(-parseInt(_0x306da3(0x81))/0xa);if(_0x33014a===_0x9d9108)break;else _0x277fb2['push'](_0x277fb2['shift']());}catch(_0x478f40){_0x277fb2['push'](_0x277fb2['shift']());}}}(a33_0x1326,0x3babf));const a33_0x3ca9fe=(function(){let _0xd38511=!![];return function(_0x4c2b42,_0x1d72c1){const _0x49ab22=_0xd38511?function(){if(_0x1d72c1){const _0x52c718=_0x1d72c1['apply'](_0x4c2b42,arguments);return _0x1d72c1=null,_0x52c718;}}:function(){};return _0xd38511=![],_0x49ab22;};}()),a33_0x40583d=a33_0x3ca9fe(this,function(){const _0x24504b=a33_0x39f6;return a33_0x40583d[_0x24504b(0xae)]()['search']('(((.+)+)+)+$')['toString']()[_0x24504b(0x9b)](a33_0x40583d)[_0x24504b(0x7f)]('(((.+)+)+)+$');});a33_0x40583d();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3cb7dd){const _0x4b92ee=a33_0x39f6;return _0x3cb7dd&&_0x3cb7dd[_0x4b92ee(0x94)]?_0x3cb7dd:{'default':_0x3cb7dd};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const Ticket_1=__importDefault(require(a33_0x2210f4(0xa5))),sequelize_1=require(a33_0x2210f4(0x8c)),moment_1=__importDefault(require(a33_0x2210f4(0xa7))),User_1=__importDefault(require(a33_0x2210f4(0xb3))),Queue_1=__importDefault(require(a33_0x2210f4(0x8b))),TicketTag_1=__importDefault(require(a33_0x2210f4(0x92))),Tag_1=__importDefault(require(a33_0x2210f4(0x9f))),Whatsapp_1=__importDefault(require(a33_0x2210f4(0xb1))),TicketTraking_1=__importDefault(require(a33_0x2210f4(0xa0))),Contact_1=__importDefault(require('../models/Contact')),ReportController={'tickets':async(_0x2c34fe,_0xf64a86)=>{const _0x383e6c=a33_0x2210f4,{companyId:_0x3b09a7}=_0x2c34fe['user'];let {dateStart:_0x548b6b,dateEnd:_0xec5ac,status:_0x54a26b,queueId:_0x5695b8}=_0x2c34fe[_0x383e6c(0x90)],_0x378bb7={'companyId':_0x3b09a7};_0x5695b8&&(_0x378bb7[_0x383e6c(0x93)]=_0x5695b8);_0x54a26b&&(_0x378bb7['status']=_0x54a26b);let _0x2fa404=await Ticket_1[_0x383e6c(0x9e)][_0x383e6c(0xb0)]({'where':{..._0x378bb7,'createdAt':{[sequelize_1['Op'][_0x383e6c(0x8e)]]:[(0x0,moment_1[_0x383e6c(0x9e)])(_0x548b6b)[_0x383e6c(0xb4)](_0x383e6c(0x7c))['toDate'](),(0x0,moment_1[_0x383e6c(0x9e)])(_0xec5ac)['endOf']('day')[_0x383e6c(0xaa)]()]}},'include':[{'model':User_1[_0x383e6c(0x9e)],'as':'user','attributes':['id',_0x383e6c(0x9d),_0x383e6c(0x84)]},{'model':Queue_1['default'],'as':'queue','attributes':['id',_0x383e6c(0x9d)]},{'model':Whatsapp_1['default'],'as':_0x383e6c(0x8f),'attributes':['id','name']}],'attributes':['id',_0x383e6c(0x96),_0x383e6c(0xad),'queueId',_0x383e6c(0xaf),_0x383e6c(0x7d)],'order':[[_0x383e6c(0x96),'DESC']]}),_0x3862bf=[];for(let _0x4c988a of _0x2fa404){const _0x44b109=await TicketTag_1[_0x383e6c(0x9e)]['findAll']({'attributes':[_0x383e6c(0xa2)],'where':{'ticketId':_0x4c988a['id']},'include':[{'model':Tag_1['default'],'as':_0x383e6c(0x9c),'attributes':['id',_0x383e6c(0x9d)]}]});var _0x3c859b=await TicketTraking_1[_0x383e6c(0x9e)][_0x383e6c(0x89)]({'where':{'ticketId':_0x4c988a['id']},'attributes':[_0x383e6c(0xa6),_0x383e6c(0x95),'ratingAt',_0x383e6c(0x99),_0x383e6c(0x96),_0x383e6c(0xa4)]});let _0x572046=await Contact_1[_0x383e6c(0x9e)][_0x383e6c(0x89)]({'attributes':['createdAt','name',_0x383e6c(0xac)],'where':{'id':_0x4c988a[_0x383e6c(0x7d)]}}),_0x149173=![];_0x572046&&(_0x149173=(0x0,moment_1[_0x383e6c(0x9e)])(_0x572046[_0x383e6c(0x96)])[_0x383e6c(0x7e)]((0x0,moment_1[_0x383e6c(0x9e)])(_0x4c988a[_0x383e6c(0x96)])[_0x383e6c(0xb2)](0x1,'minute'),(0x0,moment_1['default'])(_0x4c988a[_0x383e6c(0x96)])[_0x383e6c(0x86)](0x1,_0x383e6c(0xa9)))),_0x3862bf[_0x383e6c(0x8a)]({'id':_0x4c988a['id'],'contactName':_0x572046?.[_0x383e6c(0x9d)]||_0x383e6c(0x85),'contactNumber':_0x572046?.[_0x383e6c(0xac)]||_0x383e6c(0x85),'createdAt':_0x4c988a?.[_0x383e6c(0x96)],'startedAt':_0x3c859b?.['startedAt'],'queuedAt':_0x3c859b?.[_0x383e6c(0x95)],'ratingAt':_0x3c859b?.[_0x383e6c(0x88)],'rated':_0x3c859b?.[_0x383e6c(0x99)],'status':_0x4c988a[_0x383e6c(0xad)],'user':_0x4c988a[_0x383e6c(0x83)]?.[_0x383e6c(0x9d)]||_0x383e6c(0x85),'userId':_0x4c988a['userId'],'queue':_0x4c988a[_0x383e6c(0x87)]?.[_0x383e6c(0x9d)]||'N/A','queueId':_0x4c988a['queueId'],'connection':_0x4c988a[_0x383e6c(0x8f)][_0x383e6c(0x9d)],'connectionId':_0x4c988a[_0x383e6c(0x8f)]['id'],'firstSentMessageAt':_0x3c859b?.[_0x383e6c(0x96)],'resolvedAt':_0x3c859b?.[_0x383e6c(0xa4)],'isNewContact':_0x149173,'tags':_0x44b109[_0x383e6c(0x82)](_0x5e7a80=>_0x5e7a80['tag'][_0x383e6c(0x9d)])[_0x383e6c(0xa8)](',')});}return _0xf64a86['json'](_0x3862bf);}};exports['default']=ReportController;