const a31_0x393b86=a31_0xa900;(function(_0x499560,_0x55690b){const _0x4d6720=a31_0xa900,_0x25efad=_0x499560();while(!![]){try{const _0xaeca76=parseInt(_0x4d6720(0x1a2))/0x1*(-parseInt(_0x4d6720(0x19e))/0x2)+-parseInt(_0x4d6720(0x1bc))/0x3+parseInt(_0x4d6720(0x1b5))/0x4*(parseInt(_0x4d6720(0x1b0))/0x5)+parseInt(_0x4d6720(0x1a6))/0x6*(-parseInt(_0x4d6720(0x196))/0x7)+parseInt(_0x4d6720(0x18b))/0x8+parseInt(_0x4d6720(0x1b1))/0x9*(parseInt(_0x4d6720(0x189))/0xa)+-parseInt(_0x4d6720(0x1a4))/0xb;if(_0xaeca76===_0x55690b)break;else _0x25efad['push'](_0x25efad['shift']());}catch(_0x42a1be){_0x25efad['push'](_0x25efad['shift']());}}}(a31_0x411d,0x5b5b0));const a31_0x41eeaf=(function(){let _0x52712f=!![];return function(_0x5cc415,_0x226793){const _0x491eff=_0x52712f?function(){const _0x4c1f7c=a31_0xa900;if(_0x226793){const _0x4f692b=_0x226793[_0x4c1f7c(0x19f)](_0x5cc415,arguments);return _0x226793=null,_0x4f692b;}}:function(){};return _0x52712f=![],_0x491eff;};}()),a31_0x518e68=a31_0x41eeaf(this,function(){const _0x3797d4=a31_0xa900;return a31_0x518e68[_0x3797d4(0x1a7)]()['search']('(((.+)+)+)+$')[_0x3797d4(0x1a7)]()[_0x3797d4(0x1af)](a31_0x518e68)[_0x3797d4(0x1b2)](_0x3797d4(0x1b6));});a31_0x518e68();function a31_0xa900(_0x278993,_0x3e6659){const _0x49ce69=a31_0x411d();return a31_0xa900=function(_0x518e68,_0x41eeaf){_0x518e68=_0x518e68-0x17f;let _0x411db1=_0x49ce69[_0x518e68];return _0x411db1;},a31_0xa900(_0x278993,_0x3e6659);}'use strict';var __importDefault=this&&this[a31_0x393b86(0x1b3)]||function(_0x429df6){return _0x429df6&&_0x429df6['__esModule']?_0x429df6:{'default':_0x429df6};};Object[a31_0x393b86(0x181)](exports,a31_0x393b86(0x182),{'value':!![]});const Ticket_1=__importDefault(require(a31_0x393b86(0x18a))),sequelize_1=require(a31_0x393b86(0x18f)),moment_1=__importDefault(require(a31_0x393b86(0x18e))),User_1=__importDefault(require(a31_0x393b86(0x19c))),Queue_1=__importDefault(require(a31_0x393b86(0x1b7))),TicketTag_1=__importDefault(require(a31_0x393b86(0x18d))),Tag_1=__importDefault(require(a31_0x393b86(0x1b8))),Whatsapp_1=__importDefault(require(a31_0x393b86(0x1a9))),TicketTraking_1=__importDefault(require('../models/TicketTraking')),Contact_1=__importDefault(require(a31_0x393b86(0x188))),ReportController={'tickets':async(_0x3b5f61,_0x2eb59c)=>{const _0x308000=a31_0x393b86,{companyId:_0x361651}=_0x3b5f61[_0x308000(0x19a)];let {dateStart:_0x17903e,dateEnd:_0x117423,status:_0x2771a7,queueId:_0x248cba}=_0x3b5f61[_0x308000(0x17f)],_0x5261bb={'companyId':_0x361651};_0x248cba&&(_0x5261bb['queueId']=_0x248cba);_0x2771a7&&(_0x5261bb[_0x308000(0x191)]=_0x2771a7);let _0x3489bc=await Ticket_1[_0x308000(0x183)][_0x308000(0x1aa)]({'where':{..._0x5261bb,'createdAt':{[sequelize_1['Op'][_0x308000(0x1ae)]]:[(0x0,moment_1['default'])(_0x17903e)['startOf'](_0x308000(0x197))[_0x308000(0x184)](),(0x0,moment_1[_0x308000(0x183)])(_0x117423)[_0x308000(0x190)](_0x308000(0x197))[_0x308000(0x184)]()]}},'include':[{'model':User_1[_0x308000(0x183)],'as':_0x308000(0x19a),'attributes':['id',_0x308000(0x195),_0x308000(0x193)]},{'model':Queue_1[_0x308000(0x183)],'as':'queue','attributes':['id',_0x308000(0x195)]},{'model':Whatsapp_1[_0x308000(0x183)],'as':_0x308000(0x1a3),'attributes':['id',_0x308000(0x195)]}],'attributes':['id','createdAt',_0x308000(0x191),_0x308000(0x194),_0x308000(0x198),_0x308000(0x1b9)],'order':[['createdAt',_0x308000(0x199)]]}),_0x2b8914=[];for(let _0x205eb0 of _0x3489bc){const _0x580893=await TicketTag_1[_0x308000(0x183)][_0x308000(0x1aa)]({'attributes':[_0x308000(0x1ba)],'where':{'ticketId':_0x205eb0['id']},'include':[{'model':Tag_1['default'],'as':_0x308000(0x1ab),'attributes':['id',_0x308000(0x195)]}]});var _0x4519d4=await TicketTraking_1[_0x308000(0x183)]['findOne']({'where':{'ticketId':_0x205eb0['id']},'attributes':[_0x308000(0x1b4),_0x308000(0x187),_0x308000(0x19d),_0x308000(0x1bd),_0x308000(0x1ac),_0x308000(0x1a0)]});let _0x123344=await Contact_1[_0x308000(0x183)][_0x308000(0x19b)]({'attributes':[_0x308000(0x1ac),_0x308000(0x195),_0x308000(0x192)],'where':{'id':_0x205eb0[_0x308000(0x1b9)]}}),_0x55b0c6=![];_0x123344&&(_0x55b0c6=(0x0,moment_1[_0x308000(0x183)])(_0x123344['createdAt'])[_0x308000(0x185)]((0x0,moment_1['default'])(_0x205eb0[_0x308000(0x1ac)])[_0x308000(0x1bb)](0x1,_0x308000(0x1a1)),(0x0,moment_1[_0x308000(0x183)])(_0x205eb0['createdAt'])[_0x308000(0x1ad)](0x1,_0x308000(0x1a1)))),_0x2b8914[_0x308000(0x180)]({'id':_0x205eb0['id'],'contactName':_0x123344?.[_0x308000(0x195)]||_0x308000(0x18c),'contactNumber':_0x123344?.[_0x308000(0x192)]||_0x308000(0x18c),'createdAt':_0x205eb0?.['createdAt'],'startedAt':_0x4519d4?.[_0x308000(0x1b4)],'queuedAt':_0x4519d4?.[_0x308000(0x187)],'ratingAt':_0x4519d4?.['ratingAt'],'rated':_0x4519d4?.[_0x308000(0x1bd)],'status':_0x205eb0[_0x308000(0x191)],'user':_0x205eb0[_0x308000(0x19a)]?.[_0x308000(0x195)]||_0x308000(0x18c),'userId':_0x205eb0['userId'],'queue':_0x205eb0[_0x308000(0x1a8)]?.[_0x308000(0x195)]||_0x308000(0x18c),'queueId':_0x205eb0[_0x308000(0x194)],'connection':_0x205eb0['whatsapp'][_0x308000(0x195)],'connectionId':_0x205eb0[_0x308000(0x1a3)]['id'],'firstSentMessageAt':_0x4519d4?.['createdAt'],'resolvedAt':_0x4519d4?.[_0x308000(0x1a0)],'isNewContact':_0x55b0c6,'tags':_0x580893[_0x308000(0x186)](_0x190639=>_0x190639[_0x308000(0x1ab)][_0x308000(0x195)])[_0x308000(0x1a5)](',')});}return _0x2eb59c[_0x308000(0x1be)](_0x2b8914);}};exports[a31_0x393b86(0x183)]=ReportController;function a31_0x411d(){const _0x194c5c=['add','between','constructor','5AmwMyF','1224MVAvgs','search','__importDefault','startedAt','2181468DybsPD','(((.+)+)+)+$','../models/Queue','../models/Tag','contactId','tagId','subtract','1197756IxPopN','rated','json','body','push','defineProperty','__esModule','default','toDate','isBetween','map','queuedAt','../models/Contact','38600ssGkUo','../models/Ticket','3279568NuBYsj','N/A','../models/TicketTag','moment/moment','sequelize','endOf','status','number','profile','queueId','name','121331uxwgPl','day','userId','DESC','user','findOne','../models/User','ratingAt','714318LCNtzy','apply','finishedAt','minute','1qNuPMd','whatsapp','2130403guvjLg','join','54evnjla','toString','queue','../models/Whatsapp','findAll','tag','createdAt'];a31_0x411d=function(){return _0x194c5c;};return a31_0x411d();}