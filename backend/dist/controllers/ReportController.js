function a31_0x2f19(_0x16ad82,_0x1678f4){const _0x4fc3d4=a31_0x1af4();return a31_0x2f19=function(_0x3d1115,_0x42f75a){_0x3d1115=_0x3d1115-0xc9;let _0x1af4d8=_0x4fc3d4[_0x3d1115];return _0x1af4d8;},a31_0x2f19(_0x16ad82,_0x1678f4);}function a31_0x1af4(){const _0x554f36=['../models/TicketTraking','minute','name','4243383RsrVkm','isBetween','__importDefault','startedAt','day','add','whatsapp','findOne','queue','userId','finishedAt','startOf','default','4864968zbcJcC','../models/Whatsapp','moment/moment','../models/Contact','search','json','queueId','findAll','601839Fmyrvl','constructor','between','../models/Queue','N/A','toDate','ratingAt','../models/Ticket','7PvYiQM','createdAt','status','toString','user','48122xdjZvu','apply','number','../models/Tag','6876056lQahNu','tagId','contactId','body','rated','4617756vbwawM','tag','9qlvwul','profile','../models/TicketTag','(((.+)+)+)+$','__esModule','../models/User','729835BcQFDR','queuedAt'];a31_0x1af4=function(){return _0x554f36;};return a31_0x1af4();}const a31_0x1b7b8e=a31_0x2f19;(function(_0x30d397,_0x1c99b2){const _0x59b097=a31_0x2f19,_0x45e96b=_0x30d397();while(!![]){try{const _0x4b550b=parseInt(_0x59b097(0xda))/0x1*(parseInt(_0x59b097(0xcf))/0x2)+-parseInt(_0x59b097(0xfa))/0x3+-parseInt(_0x59b097(0xf2))/0x4+-parseInt(_0x59b097(0xe0))/0x5+parseInt(_0x59b097(0xd8))/0x6+-parseInt(_0x59b097(0xca))/0x7*(-parseInt(_0x59b097(0xd3))/0x8)+parseInt(_0x59b097(0xe5))/0x9;if(_0x4b550b===_0x1c99b2)break;else _0x45e96b['push'](_0x45e96b['shift']());}catch(_0x29d0f8){_0x45e96b['push'](_0x45e96b['shift']());}}}(a31_0x1af4,0xb82ab));const a31_0x42f75a=(function(){let _0x43bca4=!![];return function(_0x33c9db,_0xf53073){const _0x5c28b2=_0x43bca4?function(){const _0x1f732b=a31_0x2f19;if(_0xf53073){const _0x374940=_0xf53073[_0x1f732b(0xd0)](_0x33c9db,arguments);return _0xf53073=null,_0x374940;}}:function(){};return _0x43bca4=![],_0x5c28b2;};}()),a31_0x3d1115=a31_0x42f75a(this,function(){const _0x2ffba1=a31_0x2f19;return a31_0x3d1115['toString']()['search']('(((.+)+)+)+$')[_0x2ffba1(0xcd)]()[_0x2ffba1(0xfb)](a31_0x3d1115)[_0x2ffba1(0xf6)](_0x2ffba1(0xdd));});a31_0x3d1115();'use strict';var __importDefault=this&&this[a31_0x1b7b8e(0xe7)]||function(_0x55ee0d){return _0x55ee0d&&_0x55ee0d['__esModule']?_0x55ee0d:{'default':_0x55ee0d};};Object['defineProperty'](exports,a31_0x1b7b8e(0xde),{'value':!![]});const Ticket_1=__importDefault(require(a31_0x1b7b8e(0xc9))),sequelize_1=require('sequelize'),moment_1=__importDefault(require(a31_0x1b7b8e(0xf4))),User_1=__importDefault(require(a31_0x1b7b8e(0xdf))),Queue_1=__importDefault(require(a31_0x1b7b8e(0xfd))),TicketTag_1=__importDefault(require(a31_0x1b7b8e(0xdc))),Tag_1=__importDefault(require(a31_0x1b7b8e(0xd2))),Whatsapp_1=__importDefault(require(a31_0x1b7b8e(0xf3))),TicketTraking_1=__importDefault(require(a31_0x1b7b8e(0xe2))),Contact_1=__importDefault(require(a31_0x1b7b8e(0xf5))),ReportController={'tickets':async(_0x1fea82,_0x503f1f)=>{const _0x26eac6=a31_0x1b7b8e,{companyId:_0x5ac913}=_0x1fea82[_0x26eac6(0xce)];let {dateStart:_0x3ef2fc,dateEnd:_0xe032b9,status:_0x463e35,queueId:_0x2e7010}=_0x1fea82[_0x26eac6(0xd6)],_0x5017b4={'companyId':_0x5ac913};_0x2e7010&&(_0x5017b4[_0x26eac6(0xf8)]=_0x2e7010);_0x463e35&&(_0x5017b4[_0x26eac6(0xcc)]=_0x463e35);let _0x442c58=await Ticket_1[_0x26eac6(0xf1)][_0x26eac6(0xf9)]({'where':{..._0x5017b4,'createdAt':{[sequelize_1['Op'][_0x26eac6(0xfc)]]:[(0x0,moment_1[_0x26eac6(0xf1)])(_0x3ef2fc)[_0x26eac6(0xf0)](_0x26eac6(0xe9))[_0x26eac6(0xff)](),(0x0,moment_1[_0x26eac6(0xf1)])(_0xe032b9)['endOf'](_0x26eac6(0xe9))[_0x26eac6(0xff)]()]}},'include':[{'model':User_1[_0x26eac6(0xf1)],'as':_0x26eac6(0xce),'attributes':['id','name',_0x26eac6(0xdb)]},{'model':Queue_1[_0x26eac6(0xf1)],'as':_0x26eac6(0xed),'attributes':['id',_0x26eac6(0xe4)]},{'model':Whatsapp_1[_0x26eac6(0xf1)],'as':'whatsapp','attributes':['id',_0x26eac6(0xe4)]}],'attributes':['id','createdAt',_0x26eac6(0xcc),_0x26eac6(0xf8),_0x26eac6(0xee),'contactId'],'order':[[_0x26eac6(0xcb),'DESC']]}),_0xcbd734=[];for(let _0xbbf0a1 of _0x442c58){const _0x167aa7=await TicketTag_1['default'][_0x26eac6(0xf9)]({'attributes':[_0x26eac6(0xd4)],'where':{'ticketId':_0xbbf0a1['id']},'include':[{'model':Tag_1[_0x26eac6(0xf1)],'as':'tag','attributes':['id','name']}]});var _0x5499d8=await TicketTraking_1['default'][_0x26eac6(0xec)]({'where':{'ticketId':_0xbbf0a1['id']},'attributes':[_0x26eac6(0xe8),_0x26eac6(0xe1),'ratingAt',_0x26eac6(0xd7),_0x26eac6(0xcb),_0x26eac6(0xef)]});let _0x24caf9=await Contact_1[_0x26eac6(0xf1)]['findOne']({'attributes':[_0x26eac6(0xcb),'name',_0x26eac6(0xd1)],'where':{'id':_0xbbf0a1[_0x26eac6(0xd5)]}}),_0x1954fd=![];_0x24caf9&&(_0x1954fd=(0x0,moment_1[_0x26eac6(0xf1)])(_0x24caf9[_0x26eac6(0xcb)])[_0x26eac6(0xe6)]((0x0,moment_1[_0x26eac6(0xf1)])(_0xbbf0a1[_0x26eac6(0xcb)])['subtract'](0x1,_0x26eac6(0xe3)),(0x0,moment_1[_0x26eac6(0xf1)])(_0xbbf0a1['createdAt'])[_0x26eac6(0xea)](0x1,'minute'))),_0xcbd734['push']({'id':_0xbbf0a1['id'],'contactName':_0x24caf9?.[_0x26eac6(0xe4)]||_0x26eac6(0xfe),'contactNumber':_0x24caf9?.['number']||_0x26eac6(0xfe),'createdAt':_0xbbf0a1?.[_0x26eac6(0xcb)],'startedAt':_0x5499d8?.[_0x26eac6(0xe8)],'queuedAt':_0x5499d8?.['queuedAt'],'ratingAt':_0x5499d8?.[_0x26eac6(0x100)],'rated':_0x5499d8?.[_0x26eac6(0xd7)],'status':_0xbbf0a1['status'],'user':_0xbbf0a1[_0x26eac6(0xce)]?.['name']||_0x26eac6(0xfe),'userId':_0xbbf0a1['userId'],'queue':_0xbbf0a1[_0x26eac6(0xed)]?.['name']||_0x26eac6(0xfe),'queueId':_0xbbf0a1[_0x26eac6(0xf8)],'connection':_0xbbf0a1[_0x26eac6(0xeb)]['name'],'connectionId':_0xbbf0a1[_0x26eac6(0xeb)]['id'],'firstSentMessageAt':_0x5499d8?.[_0x26eac6(0xcb)],'resolvedAt':_0x5499d8?.[_0x26eac6(0xef)],'isNewContact':_0x1954fd,'tags':_0x167aa7['map'](_0x3702d0=>_0x3702d0[_0x26eac6(0xd9)][_0x26eac6(0xe4)])['join'](',')});}return _0x503f1f[_0x26eac6(0xf7)](_0xcbd734);}};exports[a31_0x1b7b8e(0xf1)]=ReportController;