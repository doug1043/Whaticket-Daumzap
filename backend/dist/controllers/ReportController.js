const a33_0x6b0d53=a33_0x40b2;(function(_0x3eb49b,_0x1162fb){const _0x35e567=a33_0x40b2,_0x19e347=_0x3eb49b();while(!![]){try{const _0x440e95=-parseInt(_0x35e567(0x1e5))/0x1+-parseInt(_0x35e567(0x1e6))/0x2+parseInt(_0x35e567(0x20e))/0x3+-parseInt(_0x35e567(0x1f0))/0x4+parseInt(_0x35e567(0x1ff))/0x5*(-parseInt(_0x35e567(0x1dc))/0x6)+-parseInt(_0x35e567(0x1fc))/0x7*(parseInt(_0x35e567(0x1e0))/0x8)+parseInt(_0x35e567(0x1f6))/0x9;if(_0x440e95===_0x1162fb)break;else _0x19e347['push'](_0x19e347['shift']());}catch(_0x1ef899){_0x19e347['push'](_0x19e347['shift']());}}}(a33_0x1be4,0xec0b8));const a33_0x119404=(function(){let _0x5c30c3=!![];return function(_0x5745f7,_0x27765e){const _0x9b7dca=_0x5c30c3?function(){const _0x58edcd=a33_0x40b2;if(_0x27765e){const _0xa1cb5=_0x27765e[_0x58edcd(0x211)](_0x5745f7,arguments);return _0x27765e=null,_0xa1cb5;}}:function(){};return _0x5c30c3=![],_0x9b7dca;};}()),a33_0x28edb8=a33_0x119404(this,function(){const _0xcdc80=a33_0x40b2;return a33_0x28edb8[_0xcdc80(0x20b)]()[_0xcdc80(0x1e3)](_0xcdc80(0x1f1))['toString']()[_0xcdc80(0x1ef)](a33_0x28edb8)['search'](_0xcdc80(0x1f1));});a33_0x28edb8();'use strict';var __importDefault=this&&this[a33_0x6b0d53(0x20f)]||function(_0x569b46){return _0x569b46&&_0x569b46['__esModule']?_0x569b46:{'default':_0x569b46};};Object[a33_0x6b0d53(0x1f4)](exports,'__esModule',{'value':!![]});const Ticket_1=__importDefault(require(a33_0x6b0d53(0x1fa))),sequelize_1=require(a33_0x6b0d53(0x1f8)),moment_1=__importDefault(require(a33_0x6b0d53(0x206))),User_1=__importDefault(require(a33_0x6b0d53(0x1e8))),Queue_1=__importDefault(require(a33_0x6b0d53(0x1dd))),TicketTag_1=__importDefault(require('../models/TicketTag')),Tag_1=__importDefault(require(a33_0x6b0d53(0x207))),Whatsapp_1=__importDefault(require(a33_0x6b0d53(0x202))),TicketTraking_1=__importDefault(require(a33_0x6b0d53(0x1eb))),Contact_1=__importDefault(require('../models/Contact')),ReportController={'tickets':async(_0x1d0af9,_0x177372)=>{const _0x560f0d=a33_0x6b0d53,{companyId:_0x18da69}=_0x1d0af9[_0x560f0d(0x1f3)];let {dateStart:_0x531b63,dateEnd:_0x293696,status:_0x405082,queueId:_0x1115de}=_0x1d0af9['body'],_0xa9133d={'companyId':_0x18da69};_0x1115de&&(_0xa9133d[_0x560f0d(0x201)]=_0x1115de);_0x405082&&(_0xa9133d[_0x560f0d(0x1f2)]=_0x405082);let _0xad7764=await Ticket_1[_0x560f0d(0x1ed)][_0x560f0d(0x205)]({'where':{..._0xa9133d,'createdAt':{[sequelize_1['Op'][_0x560f0d(0x208)]]:[(0x0,moment_1[_0x560f0d(0x1ed)])(_0x531b63)[_0x560f0d(0x1e4)](_0x560f0d(0x1de))[_0x560f0d(0x20d)](),(0x0,moment_1['default'])(_0x293696)[_0x560f0d(0x1fd)](_0x560f0d(0x1de))[_0x560f0d(0x20d)]()]}},'include':[{'model':User_1['default'],'as':_0x560f0d(0x1f3),'attributes':['id',_0x560f0d(0x1f7),_0x560f0d(0x1ee)]},{'model':Queue_1[_0x560f0d(0x1ed)],'as':_0x560f0d(0x1ea),'attributes':['id',_0x560f0d(0x1f7)]},{'model':Whatsapp_1['default'],'as':_0x560f0d(0x1ec),'attributes':['id',_0x560f0d(0x1f7)]}],'attributes':['id',_0x560f0d(0x1df),_0x560f0d(0x1f2),_0x560f0d(0x201),'userId',_0x560f0d(0x20a)],'order':[['createdAt','DESC']]}),_0x4615e3=[];for(let _0x29b3db of _0xad7764){const _0x51d4d3=await TicketTag_1['default'][_0x560f0d(0x205)]({'attributes':[_0x560f0d(0x210)],'where':{'ticketId':_0x29b3db['id']},'include':[{'model':Tag_1[_0x560f0d(0x1ed)],'as':_0x560f0d(0x1fe),'attributes':['id',_0x560f0d(0x1f7)]}]});var _0x1582c2=await TicketTraking_1[_0x560f0d(0x1ed)][_0x560f0d(0x1e9)]({'where':{'ticketId':_0x29b3db['id']},'attributes':[_0x560f0d(0x1fb),_0x560f0d(0x1e1),_0x560f0d(0x203),_0x560f0d(0x1db),_0x560f0d(0x1df),_0x560f0d(0x204)]});let _0x5dff57=await Contact_1['default']['findOne']({'attributes':[_0x560f0d(0x1df),_0x560f0d(0x1f7),'number'],'where':{'id':_0x29b3db[_0x560f0d(0x20a)]}}),_0x143e5b=![];_0x5dff57&&(_0x143e5b=(0x0,moment_1['default'])(_0x5dff57['createdAt'])[_0x560f0d(0x1f5)]((0x0,moment_1['default'])(_0x29b3db['createdAt'])['subtract'](0x1,_0x560f0d(0x209)),(0x0,moment_1['default'])(_0x29b3db[_0x560f0d(0x1df)])[_0x560f0d(0x1f9)](0x1,_0x560f0d(0x209)))),_0x4615e3[_0x560f0d(0x200)]({'id':_0x29b3db['id'],'contactName':_0x5dff57?.[_0x560f0d(0x1f7)]||_0x560f0d(0x1e2),'contactNumber':_0x5dff57?.[_0x560f0d(0x20c)]||'N/A','createdAt':_0x29b3db?.['createdAt'],'startedAt':_0x1582c2?.[_0x560f0d(0x1fb)],'queuedAt':_0x1582c2?.[_0x560f0d(0x1e1)],'ratingAt':_0x1582c2?.[_0x560f0d(0x203)],'rated':_0x1582c2?.[_0x560f0d(0x1db)],'status':_0x29b3db['status'],'user':_0x29b3db['user']?.[_0x560f0d(0x1f7)]||_0x560f0d(0x1e2),'userId':_0x29b3db['userId'],'queue':_0x29b3db['queue']?.[_0x560f0d(0x1f7)]||'N/A','queueId':_0x29b3db[_0x560f0d(0x201)],'connection':_0x29b3db[_0x560f0d(0x1ec)][_0x560f0d(0x1f7)],'connectionId':_0x29b3db['whatsapp']['id'],'firstSentMessageAt':_0x1582c2?.['createdAt'],'resolvedAt':_0x1582c2?.[_0x560f0d(0x204)],'isNewContact':_0x143e5b,'tags':_0x51d4d3['map'](_0x381020=>_0x381020[_0x560f0d(0x1fe)][_0x560f0d(0x1f7)])[_0x560f0d(0x1e7)](',')});}return _0x177372['json'](_0x4615e3);}};function a33_0x40b2(_0xec3fae,_0x145a2a){const _0x229849=a33_0x1be4();return a33_0x40b2=function(_0x28edb8,_0x119404){_0x28edb8=_0x28edb8-0x1db;let _0x1be453=_0x229849[_0x28edb8];return _0x1be453;},a33_0x40b2(_0xec3fae,_0x145a2a);}function a33_0x1be4(){const _0xb7d79b=['__importDefault','tagId','apply','rated','12KPALIl','../models/Queue','day','createdAt','302176UnPmmU','queuedAt','N/A','search','startOf','579176DGAKCs','2560880CfOgum','join','../models/User','findOne','queue','../models/TicketTraking','whatsapp','default','profile','constructor','7583964jZPUIE','(((.+)+)+)+$','status','user','defineProperty','isBetween','58056273cZNVey','name','sequelize','add','../models/Ticket','startedAt','189pTsbTB','endOf','tag','3217735oQiIFE','push','queueId','../models/Whatsapp','ratingAt','finishedAt','findAll','moment/moment','../models/Tag','between','minute','contactId','toString','number','toDate','1736064GAvBkc'];a33_0x1be4=function(){return _0xb7d79b;};return a33_0x1be4();}exports[a33_0x6b0d53(0x1ed)]=ReportController;