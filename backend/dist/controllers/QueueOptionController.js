const a31_0x2f9d24=a31_0x1866;(function(_0x272252,_0x583ff1){const _0x4d355b=a31_0x1866,_0x3cad76=_0x272252();while(!![]){try{const _0x142ec6=-parseInt(_0x4d355b(0x101))/0x1*(-parseInt(_0x4d355b(0x10f))/0x2)+-parseInt(_0x4d355b(0x10c))/0x3*(parseInt(_0x4d355b(0x10e))/0x4)+-parseInt(_0x4d355b(0xfe))/0x5+-parseInt(_0x4d355b(0x100))/0x6*(-parseInt(_0x4d355b(0x125))/0x7)+-parseInt(_0x4d355b(0x111))/0x8+-parseInt(_0x4d355b(0xfa))/0x9*(-parseInt(_0x4d355b(0x102))/0xa)+-parseInt(_0x4d355b(0xf1))/0xb*(-parseInt(_0x4d355b(0x11f))/0xc);if(_0x142ec6===_0x583ff1)break;else _0x3cad76['push'](_0x3cad76['shift']());}catch(_0x5e1ade){_0x3cad76['push'](_0x3cad76['shift']());}}}(a31_0x369a,0xe6351));const a31_0x3e3a60=(function(){let _0x2bdc9c=!![];return function(_0x35abb0,_0x20ddf9){const _0x2433b7=_0x2bdc9c?function(){const _0xe106c3=a31_0x1866;if(_0x20ddf9){const _0x2c973e=_0x20ddf9[_0xe106c3(0xfb)](_0x35abb0,arguments);return _0x20ddf9=null,_0x2c973e;}}:function(){};return _0x2bdc9c=![],_0x2433b7;};}()),a31_0x4e3ac4=a31_0x3e3a60(this,function(){const _0x52f232=a31_0x1866;return a31_0x4e3ac4[_0x52f232(0x10d)]()[_0x52f232(0x107)](_0x52f232(0x117))[_0x52f232(0x10d)]()['constructor'](a31_0x4e3ac4)[_0x52f232(0x107)](_0x52f232(0x117));});a31_0x4e3ac4();'use strict';function a31_0x1866(_0x44a920,_0x47ad2d){const _0x4e3082=a31_0x369a();return a31_0x1866=function(_0x4e3ac4,_0x3e3a60){_0x4e3ac4=_0x4e3ac4-0xee;let _0x369ac7=_0x4e3082[_0x4e3ac4];return _0x369ac7;},a31_0x1866(_0x44a920,_0x47ad2d);}var __importDefault=this&&this['__importDefault']||function(_0x23324b){return _0x23324b&&_0x23324b['__esModule']?_0x23324b:{'default':_0x23324b};};Object[a31_0x2f9d24(0xf5)](exports,a31_0x2f9d24(0xf8),{'value':!![]}),exports[a31_0x2f9d24(0x120)]=exports[a31_0x2f9d24(0x106)]=exports[a31_0x2f9d24(0x122)]=exports[a31_0x2f9d24(0x108)]=exports[a31_0x2f9d24(0x10b)]=exports['show']=exports[a31_0x2f9d24(0x112)]=exports[a31_0x2f9d24(0x103)]=void 0x0;const CreateService_1=__importDefault(require(a31_0x2f9d24(0xfd))),ListService_1=__importDefault(require('../services/QueueOptionService/ListService')),UpdateService_1=__importDefault(require(a31_0x2f9d24(0xff))),ShowService_1=__importDefault(require(a31_0x2f9d24(0xf2))),DeleteService_1=__importDefault(require(a31_0x2f9d24(0x121))),lodash_1=require('lodash'),fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a31_0x2f9d24(0xef))),AppError_1=__importDefault(require('../errors/AppError')),QueueOption_1=__importDefault(require(a31_0x2f9d24(0xf0))),index=async(_0x51ce43,_0x154f7e)=>{const _0x3e8cf8=a31_0x2f9d24,{queueId:_0x2c54fc,queueOptionId:_0x8adcbd,parentId:_0x10fe9b}=_0x51ce43[_0x3e8cf8(0x11a)],_0x35b825=await(0x0,ListService_1['default'])({'queueId':_0x2c54fc,'queueOptionId':_0x8adcbd,'parentId':_0x10fe9b});return _0x154f7e[_0x3e8cf8(0x11b)](_0x35b825);};exports['index']=index;function a31_0x369a(){const _0x4357bc=['defineProperty','resolve','unlinkSync','__esModule','Option\x20Delected','9knZJEr','apply','companyId','../services/QueueOptionService/CreateService','3652495vYeUEu','../services/QueueOptionService/UpdateService','679308tyOPrz','2zymoSu','775130UgBdLl','index','head','Option\x20Updated','mediaUpload','search','uploadFile','body','existsSync','update','9eVxnWj','toString','730316tbwJKl','743786tarVrI','queue','3636184sReGAT','store','status','Arquivo\x20Salvo','files','public','(((.+)+)+)+$','findByPk','default','query','json','mediaName','originalname','show','16818204AWSjMs','deleteMedia','../services/QueueOptionService/DeleteService','remove','QueueOption\x20not\x20found','message','28oNbpwq','params','path','../models/QueueOption','11QRzzgD','../services/QueueOptionService/ShowService','Arquivo\x20excluÃ­do','filename'];a31_0x369a=function(){return _0x4357bc;};return a31_0x369a();}const store=async(_0x48caf7,_0x33bd35)=>{const _0x147ab1=a31_0x2f9d24,_0x578864=_0x48caf7['body'],_0x339056=await(0x0,CreateService_1[_0x147ab1(0x119)])(_0x578864);return _0x33bd35[_0x147ab1(0x113)](0xc8)['json'](_0x339056);};exports[a31_0x2f9d24(0x112)]=store;const show=async(_0x11f5ec,_0x1fb623)=>{const _0x1dcc38=a31_0x2f9d24,{queueOptionId:_0x1dc715}=_0x11f5ec[_0x1dcc38(0xee)],_0x5e5e44=await(0x0,ShowService_1[_0x1dcc38(0x119)])(_0x1dc715);return _0x1fb623[_0x1dcc38(0x113)](0xc8)[_0x1dcc38(0x11b)](_0x5e5e44);};exports[a31_0x2f9d24(0x11e)]=show;const update=async(_0x357cc3,_0x1d75a1)=>{const _0x2f082c=a31_0x2f9d24,{queueOptionId:_0x2c149d}=_0x357cc3[_0x2f082c(0xee)],_0x5b7c09=_0x357cc3[_0x2f082c(0x109)],_0x249974=await(0x0,UpdateService_1[_0x2f082c(0x119)])(_0x2c149d,_0x5b7c09);return _0x1d75a1[_0x2f082c(0x113)](0xc8)[_0x2f082c(0x11b)](_0x249974);};exports[a31_0x2f9d24(0x10b)]=update;const uploadFile=async(_0x51f4ac,_0x32fda0)=>{const _0x51e367=a31_0x2f9d24,{queueOptionId:_0x493cd3}=_0x51f4ac[_0x51e367(0xee)],_0x1abf64=_0x51f4ac[_0x51e367(0x109)],_0x3907e9=_0x51f4ac['file'],_0x40ff07=await QueueOption_1[_0x51e367(0x119)][_0x51e367(0x118)](_0x493cd3);if(!_0x40ff07)throw new Error(_0x51e367(0x123));const _0x5cf32b=_0x40ff07[_0x51e367(0x124)];return fs_1[_0x51e367(0x119)][_0x51e367(0x10a)](_0x5cf32b)&&fs_1['default'][_0x51e367(0xf7)](_0x5cf32b),_0x40ff07[_0x51e367(0x124)]=_0x3907e9[_0x51e367(0xf4)],await _0x40ff07['save'](),_0x32fda0[_0x51e367(0x113)](0xc8)[_0x51e367(0x11b)]({'message':_0x51e367(0x105)});};exports[a31_0x2f9d24(0x108)]=uploadFile;const remove=async(_0x49f362,_0x327b29)=>{const _0x2141b5=a31_0x2f9d24,{queueOptionId:_0x2235d7}=_0x49f362[_0x2141b5(0xee)],_0x46144d=await QueueOption_1[_0x2141b5(0x119)][_0x2141b5(0x118)](_0x2235d7);if(!_0x46144d)throw new Error('QueueOption\x20not\x20found');const _0x5cc62d=_0x46144d['message'];return fs_1[_0x2141b5(0x119)][_0x2141b5(0x10a)](_0x5cc62d)&&fs_1['default'][_0x2141b5(0xf7)](_0x5cc62d),await(0x0,DeleteService_1[_0x2141b5(0x119)])(_0x2235d7),_0x327b29[_0x2141b5(0x113)](0xc8)['json']({'message':_0x2141b5(0xf9)});};exports[a31_0x2f9d24(0x122)]=remove;const mediaUpload=async(_0x5df1ef,_0x31df62)=>{const _0x34aded=a31_0x2f9d24,{queueOptionId:_0x490161}=_0x5df1ef[_0x34aded(0xee)],_0x251826=_0x5df1ef[_0x34aded(0x115)],_0x2af830=(0x0,lodash_1[_0x34aded(0x104)])(_0x251826);try{const _0x13055e=await QueueOption_1[_0x34aded(0x119)]['findByPk'](_0x490161);return _0x13055e['update']({'mediaPath':_0x2af830[_0x34aded(0xf4)],'mediaName':_0x2af830[_0x34aded(0x11d)]}),_0x31df62['send']({'mensagem':_0x34aded(0x114)});}catch(_0x7e6a4b){throw new AppError_1[(_0x34aded(0x119))](_0x7e6a4b[_0x34aded(0x124)]);}};exports[a31_0x2f9d24(0x106)]=mediaUpload;const deleteMedia=async(_0x121cb9,_0x27ae80)=>{const _0x1d3f6a=a31_0x2f9d24,{queueOptionId:_0x3cdbb7}=_0x121cb9[_0x1d3f6a(0xee)];try{const _0x33e68f=await QueueOption_1['default'][_0x1d3f6a(0x118)](_0x3cdbb7,{'include':[_0x1d3f6a(0x110)]}),_0x34d198=path_1[_0x1d3f6a(0x119)][_0x1d3f6a(0xf6)](_0x1d3f6a(0x116),'company'+_0x33e68f[_0x1d3f6a(0x110)][_0x1d3f6a(0xfc)],_0x33e68f['mediaPath']),_0x54eabb=fs_1[_0x1d3f6a(0x119)][_0x1d3f6a(0x10a)](_0x34d198);return _0x54eabb&&fs_1['default'][_0x1d3f6a(0xf7)](_0x34d198),_0x33e68f['mediaPath']=null,_0x33e68f[_0x1d3f6a(0x11c)]=null,await _0x33e68f['save'](),_0x27ae80['send']({'mensagem':_0x1d3f6a(0xf3)});}catch(_0x1c6924){throw new AppError_1[(_0x1d3f6a(0x119))](_0x1c6924[_0x1d3f6a(0x124)]);}};exports['deleteMedia']=deleteMedia;