'use strict';const a350_0x1aecf1=a350_0x374e;function a350_0x374e(_0x29aeb7,_0xa2670c){const _0x46f25c=a350_0x5170();return a350_0x374e=function(_0x2d2a7d,_0x3a19b8){_0x2d2a7d=_0x2d2a7d-0xf6;let _0x517024=_0x46f25c[_0x2d2a7d];return _0x517024;},a350_0x374e(_0x29aeb7,_0xa2670c);}(function(_0x15f00a,_0xb223f4){const _0x3c4e26=a350_0x374e,_0x32bfc9=_0x15f00a();while(!![]){try{const _0x55ba6b=-parseInt(_0x3c4e26(0x121))/0x1*(parseInt(_0x3c4e26(0x101))/0x2)+-parseInt(_0x3c4e26(0x113))/0x3*(-parseInt(_0x3c4e26(0x103))/0x4)+-parseInt(_0x3c4e26(0x10c))/0x5+-parseInt(_0x3c4e26(0xfb))/0x6*(parseInt(_0x3c4e26(0x125))/0x7)+-parseInt(_0x3c4e26(0xfe))/0x8*(parseInt(_0x3c4e26(0xff))/0x9)+parseInt(_0x3c4e26(0x129))/0xa+parseInt(_0x3c4e26(0x109))/0xb;if(_0x55ba6b===_0xb223f4)break;else _0x32bfc9['push'](_0x32bfc9['shift']());}catch(_0x3afcc8){_0x32bfc9['push'](_0x32bfc9['shift']());}}}(a350_0x5170,0xa687f));var __importDefault=this&&this[a350_0x1aecf1(0x10f)]||function(_0x3d98fa){const _0x2f7989=a350_0x1aecf1;return _0x3d98fa&&_0x3d98fa[_0x2f7989(0x118)]?_0x3d98fa:{'default':_0x3d98fa};};function a350_0x5170(){const _0x2c5be3=['./utils/logger','error','__esModule','listen','\x20unhandledRejection:','FLUSH_REDIS_ON_START','./models/Company','all','payGatewayInitialize','toString','true','15881fwkwtr','unhandledRejection','push','startLicenseChecker','170639QNUnBH','(((.+)+)+)+$','\x20uncaughtException:','./workers/licenseChecker','2035730RcApQF','startQueueProcess','http-graceful-shutdown','message','./libs/socket','search','apply','186ySXFms','default','toUTCString','834344NvuWdR','117AZRZqd','map','2wGjafC','./services/WbotServices/StartAllWhatsAppsSessions','4qcyoYu','logger','uncaughtException','constructor','PORT','./queues','23790162DLUWas','Server\x20started\x20on\x20port:\x20','env','1856405XKsIlR','flushdb','then','__importDefault','exit','Error\x20initializing\x20payment\x20gateway:\x20','findAll','2443362cjftVT','./services/PaymentGatewayServices/PaymentGatewayServices','stack'];a350_0x5170=function(){return _0x2c5be3;};return a350_0x5170();}Object['defineProperty'](exports,a350_0x1aecf1(0x118),{'value':!![]});const http_graceful_shutdown_1=__importDefault(require(a350_0x1aecf1(0xf6))),app_1=__importDefault(require('./app')),socket_1=require(a350_0x1aecf1(0xf8)),logger_1=require(a350_0x1aecf1(0x116)),StartAllWhatsAppsSessions_1=require(a350_0x1aecf1(0x102)),Company_1=__importDefault(require(a350_0x1aecf1(0x11c))),queues_1=require(a350_0x1aecf1(0x108)),PaymentGatewayServices_1=require(a350_0x1aecf1(0x114)),useRedisAuthState_1=require('./helpers/useRedisAuthState'),licenseChecker_1=require(a350_0x1aecf1(0x128));async function startServer(){const _0x28ab18=a350_0x1aecf1,_0x2862a9=(function(){let _0x286c72=!![];return function(_0x2ec612,_0x202119){const _0xa66b43=_0x286c72?function(){const _0x4d3608=a350_0x374e;if(_0x202119){const _0x352787=_0x202119[_0x4d3608(0xfa)](_0x2ec612,arguments);return _0x202119=null,_0x352787;}}:function(){};return _0x286c72=![],_0xa66b43;};}()),_0x2a3485=_0x2862a9(this,function(){const _0x1689fc=a350_0x374e;return _0x2a3485[_0x1689fc(0x11f)]()[_0x1689fc(0xf9)](_0x1689fc(0x126))[_0x1689fc(0x11f)]()[_0x1689fc(0x106)](_0x2a3485)[_0x1689fc(0xf9)]('(((.+)+)+)+$');});_0x2a3485();try{await(0x0,licenseChecker_1[_0x28ab18(0x124)])();const _0x45772e=app_1[_0x28ab18(0xfc)][_0x28ab18(0x119)](process[_0x28ab18(0x10b)][_0x28ab18(0x107)],async()=>{const _0x54e038=_0x28ab18;if(process[_0x54e038(0x10b)][_0x54e038(0x11b)]==_0x54e038(0x120))await useRedisAuthState_1['redis'][_0x54e038(0x10d)]();const _0x2de012=await Company_1[_0x54e038(0xfc)][_0x54e038(0x112)]({'where':{'status':!![]}}),_0x51dfc1=[];_0x2de012[_0x54e038(0x100)](async _0x5269a0=>{const _0x24ea68=(0x0,StartAllWhatsAppsSessions_1['StartAllWhatsAppsSessions'])(_0x5269a0['id']);_0x51dfc1['push'](_0x24ea68);}),Promise[_0x54e038(0x11d)](_0x51dfc1)[_0x54e038(0x10e)](async()=>{const _0x3346ec=_0x54e038;await(0x0,queues_1[_0x3346ec(0x12a)])();}),logger_1[_0x54e038(0x104)]['info'](_0x54e038(0x10a)+process[_0x54e038(0x10b)]['PORT']),(0x0,PaymentGatewayServices_1[_0x54e038(0x11e)])()['catch'](_0x37b6da=>{const _0x5141ef=_0x54e038;logger_1[_0x5141ef(0x104)]['error'](_0x5141ef(0x111)+_0x37b6da[_0x5141ef(0xf7)]);}),_0x2de012[_0x54e038(0x100)](async _0x52f8a2=>{const _0x19f96c=_0x54e038,_0x3c04a4=(0x0,PaymentGatewayServices_1['checkOpenInvoices'])(_0x52f8a2['id']);_0x51dfc1[_0x19f96c(0x123)](_0x3c04a4);});});(0x0,socket_1['initIO'])(_0x45772e),(0x0,http_graceful_shutdown_1[_0x28ab18(0xfc)])(_0x45772e),process['on'](_0x28ab18(0x105),_0x30bbbe=>{const _0x187298=_0x28ab18;console[_0x187298(0x117)](new Date()[_0x187298(0xfd)]()+_0x187298(0x127),_0x30bbbe[_0x187298(0xf7)]),console[_0x187298(0x117)](_0x30bbbe[_0x187298(0x115)]);}),process['on'](_0x28ab18(0x122),(_0x478bfb,_0x514463)=>{const _0x10506a=_0x28ab18;console['error'](new Date()[_0x10506a(0xfd)]()+_0x10506a(0x11a),_0x478bfb,_0x514463);});}catch(_0x4d9e9e){logger_1['logger']['error']('Failed\x20to\x20start\x20the\x20server:',_0x4d9e9e),process[_0x28ab18(0x110)](0x1);}}startServer();