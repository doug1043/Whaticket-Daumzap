function a470_0x3585(_0xc58a58,_0x334748){const _0x277893=a470_0x4aac();return a470_0x3585=function(_0x1d6f2e,_0xb3a611){_0x1d6f2e=_0x1d6f2e-0x10c;let _0x4aacc4=_0x277893[_0x1d6f2e];return _0x4aacc4;},a470_0x3585(_0xc58a58,_0x334748);}const a470_0x4fc72b=a470_0x3585;(function(_0x2fd73b,_0x250a83){const _0x2cb295=a470_0x3585,_0x4bb5e8=_0x2fd73b();while(!![]){try{const _0x1150ea=-parseInt(_0x2cb295(0x11a))/0x1*(-parseInt(_0x2cb295(0x110))/0x2)+parseInt(_0x2cb295(0x126))/0x3*(-parseInt(_0x2cb295(0x120))/0x4)+-parseInt(_0x2cb295(0x12f))/0x5*(parseInt(_0x2cb295(0x131))/0x6)+-parseInt(_0x2cb295(0x10e))/0x7+parseInt(_0x2cb295(0x130))/0x8*(parseInt(_0x2cb295(0x139))/0x9)+parseInt(_0x2cb295(0x13c))/0xa*(parseInt(_0x2cb295(0x11f))/0xb)+parseInt(_0x2cb295(0x129))/0xc;if(_0x1150ea===_0x250a83)break;else _0x4bb5e8['push'](_0x4bb5e8['shift']());}catch(_0x1e7187){_0x4bb5e8['push'](_0x4bb5e8['shift']());}}}(a470_0x4aac,0x97467));const a470_0xb3a611=(function(){let _0x478173=!![];return function(_0x407595,_0xf74a28){const _0x3a437e=_0x478173?function(){if(_0xf74a28){const _0x439831=_0xf74a28['apply'](_0x407595,arguments);return _0xf74a28=null,_0x439831;}}:function(){};return _0x478173=![],_0x3a437e;};}()),a470_0x1d6f2e=a470_0xb3a611(this,function(){const _0x14f116=a470_0x3585;return a470_0x1d6f2e[_0x14f116(0x132)]()[_0x14f116(0x135)]('(((.+)+)+)+$')['toString']()[_0x14f116(0x123)](a470_0x1d6f2e)[_0x14f116(0x135)](_0x14f116(0x128));});a470_0x1d6f2e();function a470_0x4aac(){const _0x3f88c8=['8228934kgVONY','__esModule','2AadQmX','info','default','startQueueProcess','logger','Error\x20starting\x20WhatsApp\x20session\x20for\x20company\x20ID:\x20','Server\x20is\x20listening\x20on\x20port:\x20','StartAllWhatsAppsSessions','SIGINT\x20SIGTERM','./utils/logger','1017742ULhLkN','ERR_OSSL_BAD_DECRYPT','exit','checkOpenInvoices','./queues','869cjIRCc','4376408puBLeK','Shutdown\x20initiated.\x20Cleaning\x20up...','Started\x20WhatsApp\x20session\x20for\x20company\x20ID:\x20','constructor','./services/WbotServices/StartAllWhatsAppsSessions','Server\x20started\x20on\x20port:\x20','3toXbZK','uncaughtException','(((.+)+)+)+$','19661556uiCXTp','defineProperty','env','./libs/socket','findAll','\x20-\x20','65tQvOlb','23952LPAiEm','33798ziNtxr','toString','Uncaught\x20Exception:\x20','message','search','payGatewayInitialize','Unhandled\x20Rejection','http-graceful-shutdown','324AgYTff','startLicenseChecker','PORT\x20environment\x20variable\x20is\x20not\x20set.','25130XygZzQ','map','__importDefault','./models/Company','Error\x20during\x20server\x20startup:\x20','./app','PORT','./workers/licenseChecker','unhandledRejection','error'];a470_0x4aac=function(){return _0x3f88c8;};return a470_0x4aac();}'use strict';var __importDefault=this&&this[a470_0x4fc72b(0x13e)]||function(_0x3f7051){return _0x3f7051&&_0x3f7051['__esModule']?_0x3f7051:{'default':_0x3f7051};};Object[a470_0x4fc72b(0x12a)](exports,a470_0x4fc72b(0x10f),{'value':!![]});const http_graceful_shutdown_1=__importDefault(require(a470_0x4fc72b(0x138))),app_1=__importDefault(require(a470_0x4fc72b(0x141))),socket_1=require(a470_0x4fc72b(0x12c)),logger_1=require(a470_0x4fc72b(0x119)),StartAllWhatsAppsSessions_1=require(a470_0x4fc72b(0x124)),Company_1=__importDefault(require(a470_0x4fc72b(0x13f))),queues_1=require(a470_0x4fc72b(0x11e)),PaymentGatewayServices_1=require('./services/PaymentGatewayServices/PaymentGatewayServices'),licenseChecker_1=require(a470_0x4fc72b(0x143));!process[a470_0x4fc72b(0x12b)][a470_0x4fc72b(0x142)]&&(logger_1['logger']['error'](a470_0x4fc72b(0x13b)),process[a470_0x4fc72b(0x11c)](0x1));async function startServer(){const _0x47ca6b=a470_0x4fc72b;try{await(0x0,licenseChecker_1[_0x47ca6b(0x13a)])();const _0x2c344b=await Company_1[_0x47ca6b(0x112)][_0x47ca6b(0x12d)](),_0x404d87=_0x2c344b[_0x47ca6b(0x13d)](async _0x49f9c3=>{const _0x17713b=_0x47ca6b;try{await(0x0,StartAllWhatsAppsSessions_1[_0x17713b(0x117)])(_0x49f9c3['id']),logger_1[_0x17713b(0x114)]['info'](_0x17713b(0x122)+_0x49f9c3['id']);}catch(_0x18ad79){logger_1[_0x17713b(0x114)]['error'](_0x17713b(0x115)+_0x49f9c3['id']+_0x17713b(0x12e)+_0x18ad79[_0x17713b(0x134)]);}});await Promise['all'](_0x404d87),(0x0,queues_1[_0x47ca6b(0x113)])(),logger_1['logger'][_0x47ca6b(0x111)](_0x47ca6b(0x125)+process[_0x47ca6b(0x12b)][_0x47ca6b(0x142)]);try{await(0x0,PaymentGatewayServices_1[_0x47ca6b(0x136)])();}catch(_0x2ae0d1){logger_1[_0x47ca6b(0x114)][_0x47ca6b(0x10d)]('Error\x20initializing\x20payment\x20gateway:\x20'+_0x2ae0d1['message']);}(0x0,PaymentGatewayServices_1[_0x47ca6b(0x11d)])();}catch(_0x2d226f){logger_1[_0x47ca6b(0x114)][_0x47ca6b(0x10d)](_0x47ca6b(0x140)+_0x2d226f[_0x47ca6b(0x134)]),process[_0x47ca6b(0x11c)](0x1);}}const server=app_1[a470_0x4fc72b(0x112)]['listen'](process[a470_0x4fc72b(0x12b)]['PORT'],async()=>{const _0x20c4d4=a470_0x4fc72b;logger_1['logger'][_0x20c4d4(0x111)](_0x20c4d4(0x116)+process[_0x20c4d4(0x12b)][_0x20c4d4(0x142)]),await startServer();});(0x0,socket_1['initIO'])(server),(0x0,http_graceful_shutdown_1[a470_0x4fc72b(0x112)])(server,{'signals':a470_0x4fc72b(0x118),'timeout':0x7530,'onShutdown':async()=>{const _0x842758=a470_0x4fc72b;logger_1['logger'][_0x842758(0x111)](_0x842758(0x121));},'finally':()=>{const _0x42b45=a470_0x4fc72b;logger_1[_0x42b45(0x114)]['info']('Server\x20has\x20shut\x20down.');}}),process['on'](a470_0x4fc72b(0x127),_0x136bd7=>{const _0x209ac2=a470_0x4fc72b;logger_1[_0x209ac2(0x114)][_0x209ac2(0x10d)]({'err':_0x136bd7},_0x209ac2(0x133)+_0x136bd7[_0x209ac2(0x134)]);if(_0x136bd7['code']===_0x209ac2(0x11b))return;process[_0x209ac2(0x11c)](0x1);}),process['on'](a470_0x4fc72b(0x10c),(_0x42dfcf,_0x5f3311)=>{const _0x2b9081=a470_0x4fc72b;logger_1[_0x2b9081(0x114)]['debug']({'promise':_0x5f3311,'reason':_0x42dfcf},_0x2b9081(0x137));});