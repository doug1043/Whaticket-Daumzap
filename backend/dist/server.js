'use strict';const a349_0x195af5=a349_0x5beb;(function(_0x1a5d9e,_0x5beef7){const _0x550770=a349_0x5beb,_0xb2b9b0=_0x1a5d9e();while(!![]){try{const _0x5e734e=-parseInt(_0x550770(0x14f))/0x1*(-parseInt(_0x550770(0x152))/0x2)+parseInt(_0x550770(0x128))/0x3*(-parseInt(_0x550770(0x134))/0x4)+-parseInt(_0x550770(0x14c))/0x5+-parseInt(_0x550770(0x137))/0x6*(-parseInt(_0x550770(0x14e))/0x7)+parseInt(_0x550770(0x12a))/0x8*(parseInt(_0x550770(0x13c))/0x9)+parseInt(_0x550770(0x138))/0xa*(parseInt(_0x550770(0x13b))/0xb)+-parseInt(_0x550770(0x126))/0xc;if(_0x5e734e===_0x5beef7)break;else _0xb2b9b0['push'](_0xb2b9b0['shift']());}catch(_0x14928d){_0xb2b9b0['push'](_0xb2b9b0['shift']());}}}(a349_0x6546,0x68124));var __importDefault=this&&this[a349_0x195af5(0x145)]||function(_0x320a31){return _0x320a31&&_0x320a31['__esModule']?_0x320a31:{'default':_0x320a31};};function a349_0x6546(){const _0x264cb8=['http-graceful-shutdown','default','__importDefault','PORT','./services/PaymentGatewayServices/PaymentGatewayServices','checkOpenInvoices','error','stack','redis','1805615OpyRTo','(((.+)+)+)+$','175btylPD','334592fTlGJM','FLUSH_REDIS_ON_START','search','4pfKsrv','map','toString','message','listen','4766796YpGRlV','StartAllWhatsAppsSessions','2397987qvZRBl','flushdb','632cyEzOh','unhandledRejection','catch','\x20unhandledRejection:','./libs/socket','env','findAll','payGatewayInitialize','logger','__esModule','4tKtLsk','./workers/licenseChecker','constructor','72114MWGuIO','348170DeLevb','initIO','uncaughtException','187JKCHFr','48123KXoXDE','./helpers/useRedisAuthState','\x20uncaughtException:','toUTCString','info','defineProperty','exit'];a349_0x6546=function(){return _0x264cb8;};return a349_0x6546();}Object[a349_0x195af5(0x141)](exports,a349_0x195af5(0x133),{'value':!![]});const http_graceful_shutdown_1=__importDefault(require(a349_0x195af5(0x143))),app_1=__importDefault(require('./app')),socket_1=require(a349_0x195af5(0x12e)),logger_1=require('./utils/logger'),StartAllWhatsAppsSessions_1=require('./services/WbotServices/StartAllWhatsAppsSessions'),Company_1=__importDefault(require('./models/Company')),queues_1=require('./queues'),PaymentGatewayServices_1=require(a349_0x195af5(0x147)),useRedisAuthState_1=require(a349_0x195af5(0x13d)),licenseChecker_1=require(a349_0x195af5(0x135));function a349_0x5beb(_0x57b005,_0x430e66){const _0x300e7c=a349_0x6546();return a349_0x5beb=function(_0xf19bc3,_0x3eaa54){_0xf19bc3=_0xf19bc3-0x122;let _0x65468c=_0x300e7c[_0xf19bc3];return _0x65468c;},a349_0x5beb(_0x57b005,_0x430e66);}async function startServer(){const _0x4d55d8=a349_0x195af5,_0x51aba3=(function(){let _0x58b5c3=!![];return function(_0x3626e9,_0x473705){const _0x1fa416=_0x58b5c3?function(){if(_0x473705){const _0x4bad4c=_0x473705['apply'](_0x3626e9,arguments);return _0x473705=null,_0x4bad4c;}}:function(){};return _0x58b5c3=![],_0x1fa416;};}()),_0x5b0a0b=_0x51aba3(this,function(){const _0x3f2024=a349_0x5beb;return _0x5b0a0b[_0x3f2024(0x123)]()[_0x3f2024(0x151)](_0x3f2024(0x14d))[_0x3f2024(0x123)]()[_0x3f2024(0x136)](_0x5b0a0b)[_0x3f2024(0x151)]('(((.+)+)+)+$');});_0x5b0a0b();try{await(0x0,licenseChecker_1['startLicenseChecker'])();const _0x19ac73=app_1[_0x4d55d8(0x144)][_0x4d55d8(0x125)](process[_0x4d55d8(0x12f)][_0x4d55d8(0x146)],async()=>{const _0x4a7411=_0x4d55d8;if(process[_0x4a7411(0x12f)][_0x4a7411(0x150)]=='true')await useRedisAuthState_1[_0x4a7411(0x14b)][_0x4a7411(0x129)]();const _0x47593c=await Company_1[_0x4a7411(0x144)][_0x4a7411(0x130)]({'where':{'status':!![]}}),_0x382fb8=[];_0x47593c[_0x4a7411(0x122)](async _0x3b8cff=>{const _0x367f23=_0x4a7411,_0x2ecbf9=(0x0,StartAllWhatsAppsSessions_1[_0x367f23(0x127)])(_0x3b8cff['id']);_0x382fb8['push'](_0x2ecbf9);}),Promise['all'](_0x382fb8)['then'](async()=>{await(0x0,queues_1['startQueueProcess'])();}),logger_1[_0x4a7411(0x132)][_0x4a7411(0x140)]('Server\x20started\x20on\x20port:\x20'+process[_0x4a7411(0x12f)][_0x4a7411(0x146)]),(0x0,PaymentGatewayServices_1[_0x4a7411(0x131)])()[_0x4a7411(0x12c)](_0x1f3d16=>{const _0x58d18d=_0x4a7411;logger_1[_0x58d18d(0x132)][_0x58d18d(0x149)]('Error\x20initializing\x20payment\x20gateway:\x20'+_0x1f3d16[_0x58d18d(0x124)]);}),_0x47593c['map'](async _0x88008c=>{const _0x2bd209=_0x4a7411,_0x2bf815=(0x0,PaymentGatewayServices_1[_0x2bd209(0x148)])(_0x88008c['id']);_0x382fb8['push'](_0x2bf815);});});(0x0,socket_1[_0x4d55d8(0x139)])(_0x19ac73),(0x0,http_graceful_shutdown_1['default'])(_0x19ac73),process['on'](_0x4d55d8(0x13a),_0x5d2dd4=>{const _0x28e32f=_0x4d55d8;console[_0x28e32f(0x149)](new Date()[_0x28e32f(0x13f)]()+_0x28e32f(0x13e),_0x5d2dd4[_0x28e32f(0x124)]),console[_0x28e32f(0x149)](_0x5d2dd4[_0x28e32f(0x14a)]);}),process['on'](_0x4d55d8(0x12b),(_0x36391c,_0x27106e)=>{const _0x500524=_0x4d55d8;console[_0x500524(0x149)](new Date()['toUTCString']()+_0x500524(0x12d),_0x36391c,_0x27106e);});}catch(_0x83d477){logger_1[_0x4d55d8(0x132)][_0x4d55d8(0x149)]('Failed\x20to\x20start\x20the\x20server:',_0x83d477),process[_0x4d55d8(0x142)](0x1);}}startServer();