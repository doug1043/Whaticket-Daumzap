const a469_0x49bb41=a469_0xc544;function a469_0x25bb(){const _0x34114b=['478600dHRAFr','1229998YhxasZ','search','StartAllWhatsAppsSessions','error','info','(((.+)+)+)+$','listen','./utils/logger','Error\x20initializing\x20payment\x20gateway:\x20','Error\x20during\x20server\x20startup:\x20','77UjXIsg','code','312136gGzsbB','debug','checkOpenInvoices','./libs/socket','Server\x20started\x20on\x20port:\x20','initIO','Uncaught\x20Exception:\x20','uncaughtException','./models/Company','payGatewayInitialize','354573NkFQcj','Server\x20has\x20shut\x20down.','\x20-\x20','217053aAhsum','./queues','./services/WbotServices/StartAllWhatsAppsSessions','./services/PaymentGatewayServices/PaymentGatewayServices','toString','env','default','logger','startLicenseChecker','ERR_OSSL_BAD_DECRYPT','defineProperty','./workers/licenseChecker','4819458jkQsDg','all','__esModule','exit','message','findAll','PORT','./app','1370nbaPbK','unhandledRejection','map','4384980FyrVrE','28ENnYgl','PORT\x20environment\x20variable\x20is\x20not\x20set.','Started\x20WhatsApp\x20session\x20for\x20company\x20ID:\x20'];a469_0x25bb=function(){return _0x34114b;};return a469_0x25bb();}(function(_0x42463e,_0x26a891){const _0x733c93=a469_0xc544,_0x3a857b=_0x42463e();while(!![]){try{const _0xb6afe6=-parseInt(_0x733c93(0x192))/0x1+parseInt(_0x733c93(0x193))/0x2+-parseInt(_0x733c93(0x1a9))/0x3*(parseInt(_0x733c93(0x18f))/0x4)+-parseInt(_0x733c93(0x18e))/0x5+-parseInt(_0x733c93(0x183))/0x6+-parseInt(_0x733c93(0x19d))/0x7*(parseInt(_0x733c93(0x19f))/0x8)+parseInt(_0x733c93(0x1ac))/0x9*(parseInt(_0x733c93(0x18b))/0xa);if(_0xb6afe6===_0x26a891)break;else _0x3a857b['push'](_0x3a857b['shift']());}catch(_0x35ba1c){_0x3a857b['push'](_0x3a857b['shift']());}}}(a469_0x25bb,0x7af71));const a469_0x489060=(function(){let _0xe3f1db=!![];return function(_0x1c84b8,_0x3b3f1e){const _0x5966e8=_0xe3f1db?function(){if(_0x3b3f1e){const _0x56ce80=_0x3b3f1e['apply'](_0x1c84b8,arguments);return _0x3b3f1e=null,_0x56ce80;}}:function(){};return _0xe3f1db=![],_0x5966e8;};}()),a469_0xc49dfb=a469_0x489060(this,function(){const _0x3c2dbf=a469_0xc544;return a469_0xc49dfb[_0x3c2dbf(0x17b)]()['search'](_0x3c2dbf(0x198))['toString']()['constructor'](a469_0xc49dfb)[_0x3c2dbf(0x194)](_0x3c2dbf(0x198));});a469_0xc49dfb();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x478ce6){const _0x48d160=a469_0xc544;return _0x478ce6&&_0x478ce6[_0x48d160(0x185)]?_0x478ce6:{'default':_0x478ce6};};function a469_0xc544(_0x3b7aa9,_0x4c1477){const _0xb3b267=a469_0x25bb();return a469_0xc544=function(_0xc49dfb,_0x489060){_0xc49dfb=_0xc49dfb-0x17b;let _0x25bb48=_0xb3b267[_0xc49dfb];return _0x25bb48;},a469_0xc544(_0x3b7aa9,_0x4c1477);}Object[a469_0x49bb41(0x181)](exports,a469_0x49bb41(0x185),{'value':!![]});const http_graceful_shutdown_1=__importDefault(require('http-graceful-shutdown')),app_1=__importDefault(require(a469_0x49bb41(0x18a))),socket_1=require(a469_0x49bb41(0x1a2)),logger_1=require(a469_0x49bb41(0x19a)),StartAllWhatsAppsSessions_1=require(a469_0x49bb41(0x1ae)),Company_1=__importDefault(require(a469_0x49bb41(0x1a7))),queues_1=require(a469_0x49bb41(0x1ad)),PaymentGatewayServices_1=require(a469_0x49bb41(0x1af)),licenseChecker_1=require(a469_0x49bb41(0x182));!process[a469_0x49bb41(0x17c)]['PORT']&&(logger_1[a469_0x49bb41(0x17e)]['error'](a469_0x49bb41(0x190)),process[a469_0x49bb41(0x186)](0x1));async function startServer(){const _0x2ba2ad=a469_0x49bb41;try{await(0x0,licenseChecker_1[_0x2ba2ad(0x17f)])();const _0x1587b5=await Company_1[_0x2ba2ad(0x17d)][_0x2ba2ad(0x188)](),_0x29e64c=_0x1587b5[_0x2ba2ad(0x18d)](async _0x5a7fea=>{const _0x2230d2=_0x2ba2ad;try{await(0x0,StartAllWhatsAppsSessions_1[_0x2230d2(0x195)])(_0x5a7fea['id']),logger_1[_0x2230d2(0x17e)][_0x2230d2(0x197)](_0x2230d2(0x191)+_0x5a7fea['id']);}catch(_0x5b0b1e){logger_1['logger']['error']('Error\x20starting\x20WhatsApp\x20session\x20for\x20company\x20ID:\x20'+_0x5a7fea['id']+_0x2230d2(0x1ab)+_0x5b0b1e[_0x2230d2(0x187)]);}});await Promise[_0x2ba2ad(0x184)](_0x29e64c),(0x0,queues_1['startQueueProcess'])(),logger_1[_0x2ba2ad(0x17e)][_0x2ba2ad(0x197)](_0x2ba2ad(0x1a3)+process[_0x2ba2ad(0x17c)][_0x2ba2ad(0x189)]);try{await(0x0,PaymentGatewayServices_1[_0x2ba2ad(0x1a8)])();}catch(_0x58f410){logger_1['logger']['error'](_0x2ba2ad(0x19b)+_0x58f410[_0x2ba2ad(0x187)]);}(0x0,PaymentGatewayServices_1[_0x2ba2ad(0x1a1)])();}catch(_0x2b5a15){logger_1[_0x2ba2ad(0x17e)][_0x2ba2ad(0x196)](_0x2ba2ad(0x19c)+_0x2b5a15['message']),process[_0x2ba2ad(0x186)](0x1);}}const server=app_1[a469_0x49bb41(0x17d)][a469_0x49bb41(0x199)](process[a469_0x49bb41(0x17c)]['PORT'],async()=>{const _0x27854f=a469_0x49bb41;logger_1[_0x27854f(0x17e)][_0x27854f(0x197)]('Server\x20is\x20listening\x20on\x20port:\x20'+process[_0x27854f(0x17c)][_0x27854f(0x189)]),await startServer();});(0x0,socket_1[a469_0x49bb41(0x1a4)])(server),(0x0,http_graceful_shutdown_1[a469_0x49bb41(0x17d)])(server,{'signals':'SIGINT\x20SIGTERM','timeout':0x7530,'onShutdown':async()=>{const _0x2e9fe7=a469_0x49bb41;logger_1[_0x2e9fe7(0x17e)][_0x2e9fe7(0x197)]('Shutdown\x20initiated.\x20Cleaning\x20up...');},'finally':()=>{const _0x4d087b=a469_0x49bb41;logger_1[_0x4d087b(0x17e)]['info'](_0x4d087b(0x1aa));}}),process['on'](a469_0x49bb41(0x1a6),_0x350a5c=>{const _0x3a75c6=a469_0x49bb41;logger_1[_0x3a75c6(0x17e)][_0x3a75c6(0x196)]({'err':_0x350a5c},_0x3a75c6(0x1a5)+_0x350a5c[_0x3a75c6(0x187)]);if(_0x350a5c[_0x3a75c6(0x19e)]===_0x3a75c6(0x180))return;process[_0x3a75c6(0x186)](0x1);}),process['on'](a469_0x49bb41(0x18c),(_0x6d33fb,_0x51b234)=>{const _0x230dbc=a469_0x49bb41;logger_1[_0x230dbc(0x17e)][_0x230dbc(0x1a0)]({'promise':_0x51b234,'reason':_0x6d33fb},'Unhandled\x20Rejection');});