function a389_0x2d79(_0x4a515d,_0x5d0946){const _0x341a8a=a389_0x2757();return a389_0x2d79=function(_0x2c8bf0,_0x1e7317){_0x2c8bf0=_0x2c8bf0-0x86;let _0x27574a=_0x341a8a[_0x2c8bf0];return _0x27574a;},a389_0x2d79(_0x4a515d,_0x5d0946);}const a389_0x2434bc=a389_0x2d79;(function(_0x31707c,_0x29889e){const _0x13422f=a389_0x2d79,_0x37553a=_0x31707c();while(!![]){try{const _0x2a1d98=-parseInt(_0x13422f(0xa2))/0x1*(-parseInt(_0x13422f(0xb2))/0x2)+parseInt(_0x13422f(0x95))/0x3+parseInt(_0x13422f(0x96))/0x4*(-parseInt(_0x13422f(0xa6))/0x5)+parseInt(_0x13422f(0x9b))/0x6*(parseInt(_0x13422f(0x9d))/0x7)+parseInt(_0x13422f(0xa7))/0x8*(parseInt(_0x13422f(0xa4))/0x9)+-parseInt(_0x13422f(0x91))/0xa*(parseInt(_0x13422f(0xbe))/0xb)+-parseInt(_0x13422f(0xab))/0xc*(parseInt(_0x13422f(0xbc))/0xd);if(_0x2a1d98===_0x29889e)break;else _0x37553a['push'](_0x37553a['shift']());}catch(_0x3d48d1){_0x37553a['push'](_0x37553a['shift']());}}}(a389_0x2757,0x3a98f));const a389_0x1e7317=(function(){let _0x1b9818=!![];return function(_0x29075f,_0x5765e8){const _0x41cccf=_0x1b9818?function(){const _0xa6ac73=a389_0x2d79;if(_0x5765e8){const _0x542c22=_0x5765e8[_0xa6ac73(0xa9)](_0x29075f,arguments);return _0x5765e8=null,_0x542c22;}}:function(){};return _0x1b9818=![],_0x41cccf;};}()),a389_0x2c8bf0=a389_0x1e7317(this,function(){const _0x2eaa25=a389_0x2d79;return a389_0x2c8bf0[_0x2eaa25(0xb8)]()['search'](_0x2eaa25(0xb5))['toString']()[_0x2eaa25(0x92)](a389_0x2c8bf0)[_0x2eaa25(0x8b)](_0x2eaa25(0xb5));});a389_0x2c8bf0();function a389_0x2757(){const _0x554da5=['Shutdown\x20initiated.\x20Cleaning\x20up...','ERR_OSSL_BAD_DECRYPT','2VqjWLG','exit','./app','(((.+)+)+)+$','./workers/licenseChecker','./utils/logger','toString','debug','StartAllWhatsAppsSessions','\x20-\x20','119249HLaSgU','env','4908871UVvjAI','Unhandled\x20Rejection','Started\x20WhatsApp\x20session\x20for\x20company\x20ID:\x20','startLicenseChecker','uncaughtException','info','search','all','logger','__importDefault','PORT','Error\x20starting\x20WhatsApp\x20session\x20for\x20company\x20ID:\x20','10WSNBhP','constructor','initIO','payGatewayInitialize','1365792pMmpdT','340rEuvFO','Server\x20has\x20shut\x20down.','findAll','checkOpenInvoices','default','324846kDknwG','Server\x20started\x20on\x20port:\x20','49Luskjp','./services/WbotServices/StartAllWhatsAppsSessions','message','Uncaught\x20Exception:\x20','unhandledRejection','459047XmFCLf','SIGINT\x20SIGTERM','387soNlQj','listen','8795xEqHhq','54824mgnOsI','startQueueProcess','apply','./services/PaymentGatewayServices/PaymentGatewayServices','984hnaHOm','code','__esModule','map','error'];a389_0x2757=function(){return _0x554da5;};return a389_0x2757();}'use strict';var __importDefault=this&&this[a389_0x2434bc(0x8e)]||function(_0x440ff0){const _0x3be59f=a389_0x2434bc;return _0x440ff0&&_0x440ff0[_0x3be59f(0xad)]?_0x440ff0:{'default':_0x440ff0};};Object['defineProperty'](exports,a389_0x2434bc(0xad),{'value':!![]});const http_graceful_shutdown_1=__importDefault(require('http-graceful-shutdown')),app_1=__importDefault(require(a389_0x2434bc(0xb4))),socket_1=require('./libs/socket'),logger_1=require(a389_0x2434bc(0xb7)),StartAllWhatsAppsSessions_1=require(a389_0x2434bc(0x9e)),Company_1=__importDefault(require('./models/Company')),queues_1=require('./queues'),PaymentGatewayServices_1=require(a389_0x2434bc(0xaa)),licenseChecker_1=require(a389_0x2434bc(0xb6));!process[a389_0x2434bc(0xbd)]['PORT']&&(logger_1[a389_0x2434bc(0x8d)][a389_0x2434bc(0xaf)]('PORT\x20environment\x20variable\x20is\x20not\x20set.'),process[a389_0x2434bc(0xb3)](0x1));async function startServer(){const _0x390381=a389_0x2434bc;try{await(0x0,licenseChecker_1[_0x390381(0x88)])();const _0x1d3eed=await Company_1[_0x390381(0x9a)][_0x390381(0x98)](),_0x1ada60=_0x1d3eed[_0x390381(0xae)](async _0x3119b5=>{const _0x3197fd=_0x390381;try{await(0x0,StartAllWhatsAppsSessions_1[_0x3197fd(0xba)])(_0x3119b5['id']),logger_1[_0x3197fd(0x8d)][_0x3197fd(0x8a)](_0x3197fd(0x87)+_0x3119b5['id']);}catch(_0x248755){logger_1[_0x3197fd(0x8d)][_0x3197fd(0xaf)](_0x3197fd(0x90)+_0x3119b5['id']+_0x3197fd(0xbb)+_0x248755[_0x3197fd(0x9f)]);}});await Promise[_0x390381(0x8c)](_0x1ada60),(0x0,queues_1[_0x390381(0xa8)])(),logger_1[_0x390381(0x8d)]['info'](_0x390381(0x9c)+process[_0x390381(0xbd)][_0x390381(0x8f)]);try{await(0x0,PaymentGatewayServices_1[_0x390381(0x94)])();}catch(_0x387924){logger_1['logger'][_0x390381(0xaf)]('Error\x20initializing\x20payment\x20gateway:\x20'+_0x387924[_0x390381(0x9f)]);}(0x0,PaymentGatewayServices_1[_0x390381(0x99)])();}catch(_0x3c03a8){logger_1[_0x390381(0x8d)][_0x390381(0xaf)]('Error\x20during\x20server\x20startup:\x20'+_0x3c03a8[_0x390381(0x9f)]),process['exit'](0x1);}}const server=app_1[a389_0x2434bc(0x9a)][a389_0x2434bc(0xa5)](process['env']['PORT'],async()=>{const _0x190360=a389_0x2434bc;logger_1['logger'][_0x190360(0x8a)]('Server\x20is\x20listening\x20on\x20port:\x20'+process['env'][_0x190360(0x8f)]),await startServer();});(0x0,socket_1[a389_0x2434bc(0x93)])(server),(0x0,http_graceful_shutdown_1[a389_0x2434bc(0x9a)])(server,{'signals':a389_0x2434bc(0xa3),'timeout':0x7530,'onShutdown':async()=>{const _0x287112=a389_0x2434bc;logger_1[_0x287112(0x8d)][_0x287112(0x8a)](_0x287112(0xb0));},'finally':()=>{const _0x16c319=a389_0x2434bc;logger_1[_0x16c319(0x8d)]['info'](_0x16c319(0x97));}}),process['on'](a389_0x2434bc(0x89),_0x5e7cc5=>{const _0x8c8f6b=a389_0x2434bc;logger_1[_0x8c8f6b(0x8d)][_0x8c8f6b(0xaf)]({'err':_0x5e7cc5},_0x8c8f6b(0xa0)+_0x5e7cc5[_0x8c8f6b(0x9f)]);if(_0x5e7cc5[_0x8c8f6b(0xac)]===_0x8c8f6b(0xb1))return;process[_0x8c8f6b(0xb3)](0x1);}),process['on'](a389_0x2434bc(0xa1),(_0x5c7729,_0xa2f2b3)=>{const _0x5b6e19=a389_0x2434bc;logger_1[_0x5b6e19(0x8d)][_0x5b6e19(0xb9)]({'promise':_0xa2f2b3,'reason':_0x5c7729},_0x5b6e19(0x86));});