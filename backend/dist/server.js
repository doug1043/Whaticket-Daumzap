'use strict';function a348_0x4a2c(_0x1b2fc3,_0x9a629d){const _0x2b333f=a348_0x4011();return a348_0x4a2c=function(_0x3173be,_0x441ffc){_0x3173be=_0x3173be-0x93;let _0x401154=_0x2b333f[_0x3173be];return _0x401154;},a348_0x4a2c(_0x1b2fc3,_0x9a629d);}const a348_0x43950a=a348_0x4a2c;(function(_0x303f97,_0x40dda7){const _0x53c626=a348_0x4a2c,_0x2892e9=_0x303f97();while(!![]){try{const _0x5041=parseInt(_0x53c626(0x9c))/0x1+parseInt(_0x53c626(0xc0))/0x2*(parseInt(_0x53c626(0xba))/0x3)+-parseInt(_0x53c626(0xa2))/0x4+parseInt(_0x53c626(0xa6))/0x5*(parseInt(_0x53c626(0xa3))/0x6)+parseInt(_0x53c626(0xa7))/0x7+parseInt(_0x53c626(0xbc))/0x8+parseInt(_0x53c626(0x95))/0x9*(-parseInt(_0x53c626(0xbb))/0xa);if(_0x5041===_0x40dda7)break;else _0x2892e9['push'](_0x2892e9['shift']());}catch(_0x310a3e){_0x2892e9['push'](_0x2892e9['shift']());}}}(a348_0x4011,0x2dc7d));var __importDefault=this&&this[a348_0x43950a(0x94)]||function(_0x5f255d){const _0x5fe0e5=a348_0x43950a;return _0x5f255d&&_0x5f255d[_0x5fe0e5(0x9d)]?_0x5f255d:{'default':_0x5f255d};};Object[a348_0x43950a(0xb2)](exports,a348_0x43950a(0x9d),{'value':!![]});const http_graceful_shutdown_1=__importDefault(require('http-graceful-shutdown')),app_1=__importDefault(require('./app')),socket_1=require(a348_0x43950a(0x98)),logger_1=require(a348_0x43950a(0xaa)),StartAllWhatsAppsSessions_1=require('./services/WbotServices/StartAllWhatsAppsSessions'),Company_1=__importDefault(require(a348_0x43950a(0xb4))),queues_1=require('./queues'),PaymentGatewayServices_1=require('./services/PaymentGatewayServices/PaymentGatewayServices'),useRedisAuthState_1=require('./helpers/useRedisAuthState'),licenseChecker_1=require('./workers/licenseChecker');function a348_0x4011(){const _0x36f008=['stack','logger','./libs/socket','env','toString','constructor','337236sMwqfQ','__esModule','(((.+)+)+)+$','\x20uncaughtException:','push','listen','1081244ZHSBUi','102UciKjs','message','then','26845JeAvlv','1679125ViNmbi','startQueueProcess','FLUSH_REDIS_ON_START','./utils/logger','payGatewayInitialize','startLicenseChecker','search','\x20unhandledRejection:','redis','Error\x20initializing\x20payment\x20gateway:\x20','checkOpenInvoices','defineProperty','exit','./models/Company','catch','default','toUTCString','StartAllWhatsAppsSessions','initIO','9jLNwoi','514180tRraoC','1527976EgFTZx','PORT','error','uncaughtException','143642qJeseX','findAll','unhandledRejection','map','Server\x20started\x20on\x20port:\x20','apply','__importDefault','108faLgdZ'];a348_0x4011=function(){return _0x36f008;};return a348_0x4011();}async function startServer(){const _0x214c5f=a348_0x43950a,_0x3e4787=(function(){let _0x5c085e=!![];return function(_0x57da00,_0x41a606){const _0x1c5608=_0x5c085e?function(){const _0x35e50b=a348_0x4a2c;if(_0x41a606){const _0x115054=_0x41a606[_0x35e50b(0x93)](_0x57da00,arguments);return _0x41a606=null,_0x115054;}}:function(){};return _0x5c085e=![],_0x1c5608;};}()),_0x204f79=_0x3e4787(this,function(){const _0x1901d0=a348_0x4a2c;return _0x204f79[_0x1901d0(0x9a)]()[_0x1901d0(0xad)]('(((.+)+)+)+$')[_0x1901d0(0x9a)]()[_0x1901d0(0x9b)](_0x204f79)[_0x1901d0(0xad)](_0x1901d0(0x9e));});_0x204f79();try{await(0x0,licenseChecker_1[_0x214c5f(0xac)])();const _0x225eb6=app_1[_0x214c5f(0xb6)][_0x214c5f(0xa1)](process[_0x214c5f(0x99)][_0x214c5f(0xbd)],async()=>{const _0x26bb8=_0x214c5f;if(process[_0x26bb8(0x99)][_0x26bb8(0xa9)]=='true')await useRedisAuthState_1[_0x26bb8(0xaf)]['flushdb']();const _0x495ff8=await Company_1['default'][_0x26bb8(0xc1)]({'where':{'status':!![]}}),_0x1a204d=[];_0x495ff8['map'](async _0x5ad9a6=>{const _0x4ac1da=_0x26bb8,_0x9c79aa=(0x0,StartAllWhatsAppsSessions_1[_0x4ac1da(0xb8)])(_0x5ad9a6['id']);_0x1a204d[_0x4ac1da(0xa0)](_0x9c79aa);}),Promise['all'](_0x1a204d)[_0x26bb8(0xa5)](async()=>{const _0x25709e=_0x26bb8;await(0x0,queues_1[_0x25709e(0xa8)])();}),logger_1[_0x26bb8(0x97)]['info'](_0x26bb8(0xc4)+process[_0x26bb8(0x99)][_0x26bb8(0xbd)]),(0x0,PaymentGatewayServices_1[_0x26bb8(0xab)])()[_0x26bb8(0xb5)](_0x4bc2d0=>{const _0x18af5d=_0x26bb8;logger_1[_0x18af5d(0x97)][_0x18af5d(0xbe)](_0x18af5d(0xb0)+_0x4bc2d0['message']);}),_0x495ff8[_0x26bb8(0xc3)](async _0x46eb09=>{const _0x553dc9=_0x26bb8,_0x256a00=(0x0,PaymentGatewayServices_1[_0x553dc9(0xb1)])(_0x46eb09['id']);_0x1a204d[_0x553dc9(0xa0)](_0x256a00);});});(0x0,socket_1[_0x214c5f(0xb9)])(_0x225eb6),(0x0,http_graceful_shutdown_1['default'])(_0x225eb6),process['on'](_0x214c5f(0xbf),_0x47ad78=>{const _0x43b0bb=_0x214c5f;console[_0x43b0bb(0xbe)](new Date()[_0x43b0bb(0xb7)]()+_0x43b0bb(0x9f),_0x47ad78[_0x43b0bb(0xa4)]),console[_0x43b0bb(0xbe)](_0x47ad78[_0x43b0bb(0x96)]);}),process['on'](_0x214c5f(0xc2),(_0xc7d273,_0x3cbcc4)=>{const _0x205900=_0x214c5f;console[_0x205900(0xbe)](new Date()[_0x205900(0xb7)]()+_0x205900(0xae),_0xc7d273,_0x3cbcc4);});}catch(_0x645edf){logger_1[_0x214c5f(0x97)][_0x214c5f(0xbe)]('Failed\x20to\x20start\x20the\x20server:',_0x645edf),process[_0x214c5f(0xb3)](0x1);}}startServer();