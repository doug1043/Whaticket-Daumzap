'use strict';function a351_0x40e9(){const _0x48dd9=['3790590QnIMjp','./queues','logger','4903115oErrZS','Failed\x20to\x20start\x20the\x20server:','./app','exit','./services/WbotServices/StartAllWhatsAppsSessions','all','flushdb','15EVvYPB','FLUSH_REDIS_ON_START','8439438aLowcC','map','Server\x20started\x20on\x20port:\x20','toString','message','__esModule','23633376hpcGdY','then','push','(((.+)+)+)+$','Error\x20initializing\x20payment\x20gateway:\x20','search','env','toUTCString','1813832ZBJrgo','payGatewayInitialize','stack','true','http-graceful-shutdown','uncaughtException','./models/Company','apply','./services/PaymentGatewayServices/PaymentGatewayServices','\x20unhandledRejection:','\x20uncaughtException:','error','./helpers/useRedisAuthState','initIO','./workers/licenseChecker','1149800ECBSRk','PORT','constructor','catch','default','1560578ShYucn','checkOpenInvoices','startQueueProcess','StartAllWhatsAppsSessions','info'];a351_0x40e9=function(){return _0x48dd9;};return a351_0x40e9();}const a351_0x5f59e3=a351_0x17ff;(function(_0x4d2ec1,_0x563641){const _0x20b067=a351_0x17ff,_0x148f82=_0x4d2ec1();while(!![]){try{const _0x297cea=-parseInt(_0x20b067(0x201))/0x1+parseInt(_0x20b067(0x220))/0x2+-parseInt(_0x20b067(0x210))/0x3*(-parseInt(_0x20b067(0x1fc))/0x4)+-parseInt(_0x20b067(0x209))/0x5+-parseInt(_0x20b067(0x206))/0x6+-parseInt(_0x20b067(0x212))/0x7+parseInt(_0x20b067(0x218))/0x8;if(_0x297cea===_0x563641)break;else _0x148f82['push'](_0x148f82['shift']());}catch(_0x346426){_0x148f82['push'](_0x148f82['shift']());}}}(a351_0x40e9,0xe08ba));var __importDefault=this&&this['__importDefault']||function(_0x979e40){const _0x1b632a=a351_0x17ff;return _0x979e40&&_0x979e40[_0x1b632a(0x217)]?_0x979e40:{'default':_0x979e40};};Object['defineProperty'](exports,'__esModule',{'value':!![]});function a351_0x17ff(_0x2b80b1,_0x2b615c){const _0x536b24=a351_0x40e9();return a351_0x17ff=function(_0x57d935,_0xa8081a){_0x57d935=_0x57d935-0x1f0;let _0x40e981=_0x536b24[_0x57d935];return _0x40e981;},a351_0x17ff(_0x2b80b1,_0x2b615c);}const http_graceful_shutdown_1=__importDefault(require(a351_0x5f59e3(0x1f1))),app_1=__importDefault(require(a351_0x5f59e3(0x20b))),socket_1=require('./libs/socket'),logger_1=require('./utils/logger'),StartAllWhatsAppsSessions_1=require(a351_0x5f59e3(0x20d)),Company_1=__importDefault(require(a351_0x5f59e3(0x1f3))),queues_1=require(a351_0x5f59e3(0x207)),PaymentGatewayServices_1=require(a351_0x5f59e3(0x1f5)),useRedisAuthState_1=require(a351_0x5f59e3(0x1f9)),licenseChecker_1=require(a351_0x5f59e3(0x1fb));async function startServer(){const _0x163581=a351_0x5f59e3,_0x1a9f3a=(function(){let _0x5a16b7=!![];return function(_0x598dd0,_0x206a23){const _0x390c28=_0x5a16b7?function(){const _0x31f0a0=a351_0x17ff;if(_0x206a23){const _0x5ce315=_0x206a23[_0x31f0a0(0x1f4)](_0x598dd0,arguments);return _0x206a23=null,_0x5ce315;}}:function(){};return _0x5a16b7=![],_0x390c28;};}()),_0x479349=_0x1a9f3a(this,function(){const _0x3fe8fa=a351_0x17ff;return _0x479349[_0x3fe8fa(0x215)]()['search']('(((.+)+)+)+$')[_0x3fe8fa(0x215)]()[_0x3fe8fa(0x1fe)](_0x479349)[_0x3fe8fa(0x21d)](_0x3fe8fa(0x21b));});_0x479349();try{await(0x0,licenseChecker_1['startLicenseChecker'])();const _0x50692e=app_1[_0x163581(0x200)]['listen'](process[_0x163581(0x21e)]['PORT'],async()=>{const _0x2d94c3=_0x163581;if(process[_0x2d94c3(0x21e)][_0x2d94c3(0x211)]==_0x2d94c3(0x1f0))await useRedisAuthState_1['redis'][_0x2d94c3(0x20f)]();const _0x4a185a=await Company_1[_0x2d94c3(0x200)]['findAll']({'where':{'status':!![]}}),_0xa897fb=[];_0x4a185a[_0x2d94c3(0x213)](async _0x2130c6=>{const _0xeaef7a=_0x2d94c3,_0xdc2d0f=(0x0,StartAllWhatsAppsSessions_1[_0xeaef7a(0x204)])(_0x2130c6['id']);_0xa897fb[_0xeaef7a(0x21a)](_0xdc2d0f);}),Promise[_0x2d94c3(0x20e)](_0xa897fb)[_0x2d94c3(0x219)](async()=>{const _0xeac863=_0x2d94c3;await(0x0,queues_1[_0xeac863(0x203)])();}),logger_1['logger'][_0x2d94c3(0x205)](_0x2d94c3(0x214)+process[_0x2d94c3(0x21e)][_0x2d94c3(0x1fd)]),(0x0,PaymentGatewayServices_1[_0x2d94c3(0x221)])()[_0x2d94c3(0x1ff)](_0x5b9fed=>{const _0x31691b=_0x2d94c3;logger_1[_0x31691b(0x208)][_0x31691b(0x1f8)](_0x31691b(0x21c)+_0x5b9fed[_0x31691b(0x216)]);}),_0x4a185a[_0x2d94c3(0x213)](async _0x9a5aa8=>{const _0x27b4a5=_0x2d94c3,_0x5b7ea5=(0x0,PaymentGatewayServices_1[_0x27b4a5(0x202)])(_0x9a5aa8['id']);_0xa897fb[_0x27b4a5(0x21a)](_0x5b7ea5);});});(0x0,socket_1[_0x163581(0x1fa)])(_0x50692e),(0x0,http_graceful_shutdown_1[_0x163581(0x200)])(_0x50692e),process['on'](_0x163581(0x1f2),_0x4a92d2=>{const _0x2e37a2=_0x163581;console[_0x2e37a2(0x1f8)](new Date()[_0x2e37a2(0x21f)]()+_0x2e37a2(0x1f7),_0x4a92d2[_0x2e37a2(0x216)]),console[_0x2e37a2(0x1f8)](_0x4a92d2[_0x2e37a2(0x222)]);}),process['on']('unhandledRejection',(_0xa3fe49,_0x3d6c5f)=>{const _0x575407=_0x163581;console[_0x575407(0x1f8)](new Date()['toUTCString']()+_0x575407(0x1f6),_0xa3fe49,_0x3d6c5f);});}catch(_0xefeb60){logger_1[_0x163581(0x208)]['error'](_0x163581(0x20a),_0xefeb60),process[_0x163581(0x20c)](0x1);}}startServer();