const a384_0x5e34b9=a384_0x49c7;(function(_0x24a162,_0x1bbb09){const _0x3ee79c=a384_0x49c7,_0x5f2bea=_0x24a162();while(!![]){try{const _0x409431=parseInt(_0x3ee79c(0xf1))/0x1+parseInt(_0x3ee79c(0xda))/0x2+-parseInt(_0x3ee79c(0xe3))/0x3*(-parseInt(_0x3ee79c(0xef))/0x4)+parseInt(_0x3ee79c(0xd8))/0x5*(parseInt(_0x3ee79c(0xe8))/0x6)+parseInt(_0x3ee79c(0xf8))/0x7*(-parseInt(_0x3ee79c(0xde))/0x8)+-parseInt(_0x3ee79c(0xe7))/0x9*(-parseInt(_0x3ee79c(0xe4))/0xa)+parseInt(_0x3ee79c(0xf5))/0xb*(-parseInt(_0x3ee79c(0x10c))/0xc);if(_0x409431===_0x1bbb09)break;else _0x5f2bea['push'](_0x5f2bea['shift']());}catch(_0x55ce57){_0x5f2bea['push'](_0x5f2bea['shift']());}}}(a384_0x5b1c,0x8285c));function a384_0x5b1c(){const _0x1f648a=['13047287mDIxot','error','unhandledRejection','3130253eVNVTS','findAll','StartAllWhatsAppsSessions','__importDefault','Error\x20starting\x20WhatsApp\x20session\x20for\x20company\x20ID:\x20','info','listen','./libs/socket','./app','payGatewayInitialize','./queues','__esModule','apply','Unhandled\x20Rejection','Started\x20WhatsApp\x20session\x20for\x20company\x20ID:\x20','checkOpenInvoices','\x20-\x20','Server\x20started\x20on\x20port:\x20','PORT','default','12idZLsY','logger','all','startLicenseChecker','8990hcFytQ','./services/PaymentGatewayServices/PaymentGatewayServices','1572958bnhTUY','Uncaught\x20Exception:\x20','message','PORT\x20environment\x20variable\x20is\x20not\x20set.','8JHmfKy','Server\x20is\x20listening\x20on\x20port:\x20','Error\x20during\x20server\x20startup:\x20','./utils/logger','./models/Company','9neVjrV','20ylxVHx','http-graceful-shutdown','(((.+)+)+)+$','1806912qamdjy','1374ufhKoQ','./services/WbotServices/StartAllWhatsAppsSessions','env','ERR_OSSL_BAD_DECRYPT','map','./workers/licenseChecker','defineProperty','365040vmMvUV','code','294379yLnQaw','startQueueProcess','search','Error\x20initializing\x20payment\x20gateway:\x20'];a384_0x5b1c=function(){return _0x1f648a;};return a384_0x5b1c();}function a384_0x49c7(_0x1b69ac,_0x5cf195){const _0xb8b614=a384_0x5b1c();return a384_0x49c7=function(_0xad0d60,_0xf1f898){_0xad0d60=_0xad0d60-0xd5;let _0x5b1ce8=_0xb8b614[_0xad0d60];return _0x5b1ce8;},a384_0x49c7(_0x1b69ac,_0x5cf195);}const a384_0xf1f898=(function(){let _0x44229b=!![];return function(_0x3a608e,_0x4da85e){const _0x4d29d9=_0x44229b?function(){const _0x2dd57b=a384_0x49c7;if(_0x4da85e){const _0x1a8237=_0x4da85e[_0x2dd57b(0x104)](_0x3a608e,arguments);return _0x4da85e=null,_0x1a8237;}}:function(){};return _0x44229b=![],_0x4d29d9;};}()),a384_0xad0d60=a384_0xf1f898(this,function(){const _0x101d36=a384_0x49c7;return a384_0xad0d60['toString']()[_0x101d36(0xf3)](_0x101d36(0xe6))['toString']()['constructor'](a384_0xad0d60)[_0x101d36(0xf3)]('(((.+)+)+)+$');});a384_0xad0d60();'use strict';var __importDefault=this&&this[a384_0x5e34b9(0xfb)]||function(_0x36dff8){const _0x371c54=a384_0x5e34b9;return _0x36dff8&&_0x36dff8[_0x371c54(0x103)]?_0x36dff8:{'default':_0x36dff8};};Object[a384_0x5e34b9(0xee)](exports,a384_0x5e34b9(0x103),{'value':!![]});const http_graceful_shutdown_1=__importDefault(require(a384_0x5e34b9(0xe5))),app_1=__importDefault(require(a384_0x5e34b9(0x100))),socket_1=require(a384_0x5e34b9(0xff)),logger_1=require(a384_0x5e34b9(0xe1)),StartAllWhatsAppsSessions_1=require(a384_0x5e34b9(0xe9)),Company_1=__importDefault(require(a384_0x5e34b9(0xe2))),queues_1=require(a384_0x5e34b9(0x102)),PaymentGatewayServices_1=require(a384_0x5e34b9(0xd9)),licenseChecker_1=require(a384_0x5e34b9(0xed));!process[a384_0x5e34b9(0xea)][a384_0x5e34b9(0x10a)]&&(logger_1['logger'][a384_0x5e34b9(0xf6)](a384_0x5e34b9(0xdd)),process['exit'](0x1));async function startServer(){const _0x4ef261=a384_0x5e34b9;try{await(0x0,licenseChecker_1[_0x4ef261(0xd7)])();const _0x56c400=await Company_1[_0x4ef261(0x10b)][_0x4ef261(0xf9)](),_0x40571d=_0x56c400[_0x4ef261(0xec)](async _0x7bd3dc=>{const _0x240460=_0x4ef261;try{await(0x0,StartAllWhatsAppsSessions_1[_0x240460(0xfa)])(_0x7bd3dc['id']),logger_1[_0x240460(0xd5)][_0x240460(0xfd)](_0x240460(0x106)+_0x7bd3dc['id']);}catch(_0x4b4132){logger_1[_0x240460(0xd5)][_0x240460(0xf6)](_0x240460(0xfc)+_0x7bd3dc['id']+_0x240460(0x108)+_0x4b4132[_0x240460(0xdc)]);}});await Promise[_0x4ef261(0xd6)](_0x40571d),(0x0,queues_1[_0x4ef261(0xf2)])(),logger_1[_0x4ef261(0xd5)][_0x4ef261(0xfd)](_0x4ef261(0x109)+process[_0x4ef261(0xea)][_0x4ef261(0x10a)]);try{await(0x0,PaymentGatewayServices_1[_0x4ef261(0x101)])();}catch(_0x2fdf1b){logger_1[_0x4ef261(0xd5)][_0x4ef261(0xf6)](_0x4ef261(0xf4)+_0x2fdf1b['message']);}(0x0,PaymentGatewayServices_1[_0x4ef261(0x107)])();}catch(_0x2f8366){logger_1['logger'][_0x4ef261(0xf6)](_0x4ef261(0xe0)+_0x2f8366[_0x4ef261(0xdc)]),process['exit'](0x1);}}const server=app_1[a384_0x5e34b9(0x10b)][a384_0x5e34b9(0xfe)](process['env'][a384_0x5e34b9(0x10a)],async()=>{const _0x13263f=a384_0x5e34b9;logger_1[_0x13263f(0xd5)]['info'](_0x13263f(0xdf)+process[_0x13263f(0xea)]['PORT']),await startServer();});(0x0,socket_1['initIO'])(server),(0x0,http_graceful_shutdown_1[a384_0x5e34b9(0x10b)])(server,{'signals':'SIGINT\x20SIGTERM','timeout':0x7530,'onShutdown':async()=>{const _0x1c942c=a384_0x5e34b9;logger_1[_0x1c942c(0xd5)][_0x1c942c(0xfd)]('Shutdown\x20initiated.\x20Cleaning\x20up...');},'finally':()=>{const _0x7e96f2=a384_0x5e34b9;logger_1[_0x7e96f2(0xd5)][_0x7e96f2(0xfd)]('Server\x20has\x20shut\x20down.');}}),process['on']('uncaughtException',_0x1bd7e6=>{const _0x35c621=a384_0x5e34b9;logger_1[_0x35c621(0xd5)][_0x35c621(0xf6)]({'err':_0x1bd7e6},_0x35c621(0xdb)+_0x1bd7e6[_0x35c621(0xdc)]);if(_0x1bd7e6[_0x35c621(0xf0)]===_0x35c621(0xeb))return;process['exit'](0x1);}),process['on'](a384_0x5e34b9(0xf7),(_0x304346,_0x471688)=>{const _0xdb3e49=a384_0x5e34b9;logger_1[_0xdb3e49(0xd5)]['debug']({'promise':_0x471688,'reason':_0x304346},_0xdb3e49(0x105));});