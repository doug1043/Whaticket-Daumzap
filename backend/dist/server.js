const a385_0x43a334=a385_0xda52;(function(_0x136c23,_0x50cc59){const _0x1eb93b=a385_0xda52,_0x3bd4be=_0x136c23();while(!![]){try{const _0x55aa2a=-parseInt(_0x1eb93b(0x1bf))/0x1+parseInt(_0x1eb93b(0x1ad))/0x2*(-parseInt(_0x1eb93b(0x1c9))/0x3)+parseInt(_0x1eb93b(0x1bc))/0x4+parseInt(_0x1eb93b(0x1d0))/0x5*(-parseInt(_0x1eb93b(0x1b8))/0x6)+parseInt(_0x1eb93b(0x1cd))/0x7+-parseInt(_0x1eb93b(0x1cb))/0x8*(parseInt(_0x1eb93b(0x1c3))/0x9)+parseInt(_0x1eb93b(0x1c6))/0xa;if(_0x55aa2a===_0x50cc59)break;else _0x3bd4be['push'](_0x3bd4be['shift']());}catch(_0x3e3d58){_0x3bd4be['push'](_0x3bd4be['shift']());}}}(a385_0x52d8,0xef16e));const a385_0x5efbc8=(function(){let _0x4fa762=!![];return function(_0x354e54,_0x36f044){const _0x471d4a=_0x4fa762?function(){const _0x241265=a385_0xda52;if(_0x36f044){const _0x3421d2=_0x36f044[_0x241265(0x1c8)](_0x354e54,arguments);return _0x36f044=null,_0x3421d2;}}:function(){};return _0x4fa762=![],_0x471d4a;};}()),a385_0x510f3f=a385_0x5efbc8(this,function(){const _0x490bc5=a385_0xda52;return a385_0x510f3f[_0x490bc5(0x1d2)]()[_0x490bc5(0x1b7)](_0x490bc5(0x1d1))[_0x490bc5(0x1d2)]()[_0x490bc5(0x1ce)](a385_0x510f3f)[_0x490bc5(0x1b7)](_0x490bc5(0x1d1));});a385_0x510f3f();function a385_0xda52(_0x255f67,_0x45f7d5){const _0x2df49d=a385_0x52d8();return a385_0xda52=function(_0x510f3f,_0x5efbc8){_0x510f3f=_0x510f3f-0x1aa;let _0x52d801=_0x2df49d[_0x510f3f];return _0x52d801;},a385_0xda52(_0x255f67,_0x45f7d5);}function a385_0x52d8(){const _0x1c4b34=['Server\x20is\x20listening\x20on\x20port:\x20','Unhandled\x20Rejection','ERR_OSSL_BAD_DECRYPT','Server\x20has\x20shut\x20down.','env','http-graceful-shutdown','defineProperty','error','./libs/socket','PORT\x20environment\x20variable\x20is\x20not\x20set.','./models/Company','initIO','info','default','48226SJEFdl','PORT','__importDefault','Error\x20initializing\x20payment\x20gateway:\x20','startQueueProcess','startLicenseChecker','./workers/licenseChecker','payGatewayInitialize','uncaughtException','./utils/logger','search','30nRIBcU','./queues','listen','checkOpenInvoices','2642960JhLTum','StartAllWhatsAppsSessions','Started\x20WhatsApp\x20session\x20for\x20company\x20ID:\x20','879669AFdlkt','Uncaught\x20Exception:\x20','__esModule','debug','9ZTkOZv','./services/PaymentGatewayServices/PaymentGatewayServices','logger','52985630JNjLYO','message','apply','225uuyuFM','Error\x20during\x20server\x20startup:\x20','10860392JhvjXu','exit','3314080Indigd','constructor','all','1407740ycZveY','(((.+)+)+)+$','toString','Error\x20starting\x20WhatsApp\x20session\x20for\x20company\x20ID:\x20'];a385_0x52d8=function(){return _0x1c4b34;};return a385_0x52d8();}'use strict';var __importDefault=this&&this[a385_0x43a334(0x1af)]||function(_0x243664){return _0x243664&&_0x243664['__esModule']?_0x243664:{'default':_0x243664};};Object[a385_0x43a334(0x1da)](exports,a385_0x43a334(0x1c1),{'value':!![]});const http_graceful_shutdown_1=__importDefault(require(a385_0x43a334(0x1d9))),app_1=__importDefault(require('./app')),socket_1=require(a385_0x43a334(0x1dc)),logger_1=require(a385_0x43a334(0x1b6)),StartAllWhatsAppsSessions_1=require('./services/WbotServices/StartAllWhatsAppsSessions'),Company_1=__importDefault(require(a385_0x43a334(0x1de))),queues_1=require(a385_0x43a334(0x1b9)),PaymentGatewayServices_1=require(a385_0x43a334(0x1c4)),licenseChecker_1=require(a385_0x43a334(0x1b3));!process[a385_0x43a334(0x1d8)]['PORT']&&(logger_1[a385_0x43a334(0x1c5)][a385_0x43a334(0x1db)](a385_0x43a334(0x1dd)),process[a385_0x43a334(0x1cc)](0x1));async function startServer(){const _0x455eea=a385_0x43a334;try{await(0x0,licenseChecker_1[_0x455eea(0x1b2)])();const _0x4147d2=await Company_1['default']['findAll'](),_0x1713b0=_0x4147d2['map'](async _0x51f6fb=>{const _0x4b87a9=_0x455eea;try{await(0x0,StartAllWhatsAppsSessions_1[_0x4b87a9(0x1bd)])(_0x51f6fb['id']),logger_1[_0x4b87a9(0x1c5)][_0x4b87a9(0x1ab)](_0x4b87a9(0x1be)+_0x51f6fb['id']);}catch(_0x666a3d){logger_1[_0x4b87a9(0x1c5)][_0x4b87a9(0x1db)](_0x4b87a9(0x1d3)+_0x51f6fb['id']+'\x20-\x20'+_0x666a3d['message']);}});await Promise[_0x455eea(0x1cf)](_0x1713b0),(0x0,queues_1[_0x455eea(0x1b1)])(),logger_1[_0x455eea(0x1c5)][_0x455eea(0x1ab)]('Server\x20started\x20on\x20port:\x20'+process[_0x455eea(0x1d8)][_0x455eea(0x1ae)]);try{await(0x0,PaymentGatewayServices_1[_0x455eea(0x1b4)])();}catch(_0x3b14f1){logger_1[_0x455eea(0x1c5)][_0x455eea(0x1db)](_0x455eea(0x1b0)+_0x3b14f1[_0x455eea(0x1c7)]);}(0x0,PaymentGatewayServices_1[_0x455eea(0x1bb)])();}catch(_0x2e1b2e){logger_1[_0x455eea(0x1c5)][_0x455eea(0x1db)](_0x455eea(0x1ca)+_0x2e1b2e['message']),process[_0x455eea(0x1cc)](0x1);}}const server=app_1[a385_0x43a334(0x1ac)][a385_0x43a334(0x1ba)](process[a385_0x43a334(0x1d8)]['PORT'],async()=>{const _0x44cc94=a385_0x43a334;logger_1[_0x44cc94(0x1c5)]['info'](_0x44cc94(0x1d4)+process[_0x44cc94(0x1d8)][_0x44cc94(0x1ae)]),await startServer();});(0x0,socket_1[a385_0x43a334(0x1aa)])(server),(0x0,http_graceful_shutdown_1['default'])(server,{'signals':'SIGINT\x20SIGTERM','timeout':0x7530,'onShutdown':async()=>{const _0x3b43cc=a385_0x43a334;logger_1[_0x3b43cc(0x1c5)][_0x3b43cc(0x1ab)]('Shutdown\x20initiated.\x20Cleaning\x20up...');},'finally':()=>{const _0x1f4a6d=a385_0x43a334;logger_1[_0x1f4a6d(0x1c5)]['info'](_0x1f4a6d(0x1d7));}}),process['on'](a385_0x43a334(0x1b5),_0x54a2e=>{const _0xb6125b=a385_0x43a334;logger_1['logger'][_0xb6125b(0x1db)]({'err':_0x54a2e},_0xb6125b(0x1c0)+_0x54a2e[_0xb6125b(0x1c7)]);if(_0x54a2e['code']===_0xb6125b(0x1d6))return;process[_0xb6125b(0x1cc)](0x1);}),process['on']('unhandledRejection',(_0x269723,_0x279512)=>{const _0x13d393=a385_0x43a334;logger_1['logger'][_0x13d393(0x1c2)]({'promise':_0x279512,'reason':_0x269723},_0x13d393(0x1d5));});