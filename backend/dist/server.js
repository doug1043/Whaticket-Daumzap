function a385_0x27b8(_0x5197c1,_0x21bf92){const _0x3d0be0=a385_0x4793();return a385_0x27b8=function(_0x8f3aa1,_0x355832){_0x8f3aa1=_0x8f3aa1-0x6e;let _0x4793d0=_0x3d0be0[_0x8f3aa1];return _0x4793d0;},a385_0x27b8(_0x5197c1,_0x21bf92);}const a385_0x4c5653=a385_0x27b8;(function(_0x5c62e8,_0x3b3bcf){const _0x2c329a=a385_0x27b8,_0x3908d1=_0x5c62e8();while(!![]){try{const _0x3f0299=parseInt(_0x2c329a(0x83))/0x1*(parseInt(_0x2c329a(0x7a))/0x2)+-parseInt(_0x2c329a(0x97))/0x3+-parseInt(_0x2c329a(0x92))/0x4+parseInt(_0x2c329a(0x96))/0x5+-parseInt(_0x2c329a(0x70))/0x6+parseInt(_0x2c329a(0x94))/0x7+parseInt(_0x2c329a(0x98))/0x8*(parseInt(_0x2c329a(0x79))/0x9);if(_0x3f0299===_0x3b3bcf)break;else _0x3908d1['push'](_0x3908d1['shift']());}catch(_0x2bcc3c){_0x3908d1['push'](_0x3908d1['shift']());}}}(a385_0x4793,0xda388));const a385_0x355832=(function(){let _0x23bcf6=!![];return function(_0x4bb496,_0x4687c0){const _0x13422c=_0x23bcf6?function(){const _0x46cb30=a385_0x27b8;if(_0x4687c0){const _0x369451=_0x4687c0[_0x46cb30(0x88)](_0x4bb496,arguments);return _0x4687c0=null,_0x369451;}}:function(){};return _0x23bcf6=![],_0x13422c;};}()),a385_0x8f3aa1=a385_0x355832(this,function(){const _0x3cb739=a385_0x27b8;return a385_0x8f3aa1['toString']()[_0x3cb739(0x9a)]('(((.+)+)+)+$')['toString']()['constructor'](a385_0x8f3aa1)['search']('(((.+)+)+)+$');});a385_0x8f3aa1();'use strict';var __importDefault=this&&this[a385_0x4c5653(0x86)]||function(_0x4a99dc){return _0x4a99dc&&_0x4a99dc['__esModule']?_0x4a99dc:{'default':_0x4a99dc};};Object['defineProperty'](exports,a385_0x4c5653(0x6e),{'value':!![]});function a385_0x4793(){const _0x203f22=['startQueueProcess','PORT','initIO','default','code','./libs/socket','Server\x20started\x20on\x20port:\x20','all','50DeDLII','Server\x20has\x20shut\x20down.','env','__importDefault','logger','apply','message','payGatewayInitialize','Error\x20starting\x20WhatsApp\x20session\x20for\x20company\x20ID:\x20','debug','uncaughtException','error','./services/WbotServices/StartAllWhatsAppsSessions','PORT\x20environment\x20variable\x20is\x20not\x20set.','Error\x20initializing\x20payment\x20gateway:\x20','2944800GEJhbR','ERR_OSSL_BAD_DECRYPT','6189302mEvzft','exit','164715DoryBC','4771545yJXyoh','8305896kKHXyu','Unhandled\x20Rejection','search','__esModule','./app','7044258VYeNDF','startLicenseChecker','./models/Company','StartAllWhatsAppsSessions','./utils/logger','listen','Error\x20during\x20server\x20startup:\x20','info','map','27TYxSYc','14510FuPwAy'];a385_0x4793=function(){return _0x203f22;};return a385_0x4793();}const http_graceful_shutdown_1=__importDefault(require('http-graceful-shutdown')),app_1=__importDefault(require(a385_0x4c5653(0x6f))),socket_1=require(a385_0x4c5653(0x80)),logger_1=require(a385_0x4c5653(0x74)),StartAllWhatsAppsSessions_1=require(a385_0x4c5653(0x8f)),Company_1=__importDefault(require(a385_0x4c5653(0x72))),queues_1=require('./queues'),PaymentGatewayServices_1=require('./services/PaymentGatewayServices/PaymentGatewayServices'),licenseChecker_1=require('./workers/licenseChecker');!process['env']['PORT']&&(logger_1['logger'][a385_0x4c5653(0x8e)](a385_0x4c5653(0x90)),process['exit'](0x1));async function startServer(){const _0x145354=a385_0x4c5653;try{await(0x0,licenseChecker_1[_0x145354(0x71)])();const _0x2e4f51=await Company_1[_0x145354(0x7e)]['findAll'](),_0x1ac5f7=_0x2e4f51[_0x145354(0x78)](async _0x588e15=>{const _0x47dba7=_0x145354;try{await(0x0,StartAllWhatsAppsSessions_1[_0x47dba7(0x73)])(_0x588e15['id']),logger_1['logger'][_0x47dba7(0x77)]('Started\x20WhatsApp\x20session\x20for\x20company\x20ID:\x20'+_0x588e15['id']);}catch(_0x28da87){logger_1[_0x47dba7(0x87)][_0x47dba7(0x8e)](_0x47dba7(0x8b)+_0x588e15['id']+'\x20-\x20'+_0x28da87['message']);}});await Promise[_0x145354(0x82)](_0x1ac5f7),(0x0,queues_1[_0x145354(0x7b)])(),logger_1[_0x145354(0x87)][_0x145354(0x77)](_0x145354(0x81)+process[_0x145354(0x85)][_0x145354(0x7c)]);try{await(0x0,PaymentGatewayServices_1[_0x145354(0x8a)])();}catch(_0x1b139a){logger_1['logger']['error'](_0x145354(0x91)+_0x1b139a['message']);}(0x0,PaymentGatewayServices_1['checkOpenInvoices'])();}catch(_0x6e54cc){logger_1[_0x145354(0x87)][_0x145354(0x8e)](_0x145354(0x76)+_0x6e54cc[_0x145354(0x89)]),process[_0x145354(0x95)](0x1);}}const server=app_1['default'][a385_0x4c5653(0x75)](process[a385_0x4c5653(0x85)][a385_0x4c5653(0x7c)],async()=>{const _0x5dae3a=a385_0x4c5653;logger_1[_0x5dae3a(0x87)][_0x5dae3a(0x77)]('Server\x20is\x20listening\x20on\x20port:\x20'+process['env'][_0x5dae3a(0x7c)]),await startServer();});(0x0,socket_1[a385_0x4c5653(0x7d)])(server),(0x0,http_graceful_shutdown_1['default'])(server,{'signals':'SIGINT\x20SIGTERM','timeout':0x7530,'onShutdown':async()=>{const _0x153567=a385_0x4c5653;logger_1['logger'][_0x153567(0x77)]('Shutdown\x20initiated.\x20Cleaning\x20up...');},'finally':()=>{const _0x21d8a2=a385_0x4c5653;logger_1[_0x21d8a2(0x87)]['info'](_0x21d8a2(0x84));}}),process['on'](a385_0x4c5653(0x8d),_0x301712=>{const _0x1c9ad2=a385_0x4c5653;logger_1[_0x1c9ad2(0x87)][_0x1c9ad2(0x8e)]({'err':_0x301712},'Uncaught\x20Exception:\x20'+_0x301712[_0x1c9ad2(0x89)]);if(_0x301712[_0x1c9ad2(0x7f)]===_0x1c9ad2(0x93))return;process[_0x1c9ad2(0x95)](0x1);}),process['on']('unhandledRejection',(_0x24cd2d,_0x451c6a)=>{const _0x20b2c7=a385_0x4c5653;logger_1['logger'][_0x20b2c7(0x8c)]({'promise':_0x451c6a,'reason':_0x24cd2d},_0x20b2c7(0x99));});