'use strict';const a350_0xe0c199=a350_0x286f;(function(_0x1f08a1,_0x15f4c4){const _0x1b195a=a350_0x286f,_0x43a5f6=_0x1f08a1();while(!![]){try{const _0x1c817f=parseInt(_0x1b195a(0xd3))/0x1*(-parseInt(_0x1b195a(0xb6))/0x2)+-parseInt(_0x1b195a(0xd5))/0x3+-parseInt(_0x1b195a(0xc5))/0x4*(-parseInt(_0x1b195a(0xb2))/0x5)+parseInt(_0x1b195a(0xbe))/0x6+parseInt(_0x1b195a(0xc0))/0x7+parseInt(_0x1b195a(0xb1))/0x8*(-parseInt(_0x1b195a(0xce))/0x9)+parseInt(_0x1b195a(0xc7))/0xa;if(_0x1c817f===_0x15f4c4)break;else _0x43a5f6['push'](_0x43a5f6['shift']());}catch(_0x161818){_0x43a5f6['push'](_0x43a5f6['shift']());}}}(a350_0x140e,0x9a341));var __importDefault=this&&this[a350_0xe0c199(0xc2)]||function(_0x37c1c1){const _0x2818a2=a350_0xe0c199;return _0x37c1c1&&_0x37c1c1[_0x2818a2(0xb4)]?_0x37c1c1:{'default':_0x37c1c1};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const http_graceful_shutdown_1=__importDefault(require('http-graceful-shutdown')),app_1=__importDefault(require(a350_0xe0c199(0xd1))),socket_1=require(a350_0xe0c199(0xba)),logger_1=require('./utils/logger'),StartAllWhatsAppsSessions_1=require(a350_0xe0c199(0xae)),Company_1=__importDefault(require(a350_0xe0c199(0xd4))),queues_1=require('./queues'),PaymentGatewayServices_1=require(a350_0xe0c199(0xbb)),useRedisAuthState_1=require('./helpers/useRedisAuthState'),licenseChecker_1=require(a350_0xe0c199(0xbf));function a350_0x286f(_0x58a7e9,_0x496869){const _0xcd804e=a350_0x140e();return a350_0x286f=function(_0x585a63,_0x176357){_0x585a63=_0x585a63-0xa4;let _0x140e1d=_0xcd804e[_0x585a63];return _0x140e1d;},a350_0x286f(_0x58a7e9,_0x496869);}async function startServer(){const _0x517928=a350_0xe0c199,_0x497612=(function(){let _0x2a81e5=!![];return function(_0x4a6cc3,_0x560974){const _0x3c8311=_0x2a81e5?function(){const _0x57f6c6=a350_0x286f;if(_0x560974){const _0x1d4861=_0x560974[_0x57f6c6(0xad)](_0x4a6cc3,arguments);return _0x560974=null,_0x1d4861;}}:function(){};return _0x2a81e5=![],_0x3c8311;};}()),_0x35c690=_0x497612(this,function(){const _0x445f4d=a350_0x286f;return _0x35c690[_0x445f4d(0xc6)]()[_0x445f4d(0xcf)](_0x445f4d(0xbd))['toString']()[_0x445f4d(0xc4)](_0x35c690)[_0x445f4d(0xcf)]('(((.+)+)+)+$');});_0x35c690();try{await(0x0,licenseChecker_1[_0x517928(0xb7)])();const _0x1ef47b=app_1[_0x517928(0xb8)][_0x517928(0xac)](process[_0x517928(0xca)][_0x517928(0xcc)],async()=>{const _0x2b56ae=_0x517928;if(process['env']['FLUSH_REDIS_ON_START']==_0x2b56ae(0xa4))await useRedisAuthState_1[_0x2b56ae(0xd2)][_0x2b56ae(0xb0)]();const _0x282380=await Company_1[_0x2b56ae(0xb8)][_0x2b56ae(0xd0)]({'where':{'status':!![]}}),_0x387414=[];_0x282380[_0x2b56ae(0xb3)](async _0x41a3bd=>{const _0x1b4d48=_0x2b56ae,_0x15504c=(0x0,StartAllWhatsAppsSessions_1[_0x1b4d48(0xa6)])(_0x41a3bd['id']);_0x387414['push'](_0x15504c);}),Promise['all'](_0x387414)[_0x2b56ae(0xb5)](async()=>{await(0x0,queues_1['startQueueProcess'])();}),logger_1[_0x2b56ae(0xcd)]['info'](_0x2b56ae(0xaf)+process[_0x2b56ae(0xca)][_0x2b56ae(0xcc)]),(0x0,PaymentGatewayServices_1[_0x2b56ae(0xc3)])()[_0x2b56ae(0xab)](_0x45fd7d=>{const _0x581182=_0x2b56ae;logger_1[_0x581182(0xcd)][_0x581182(0xbc)](_0x581182(0xc9)+_0x45fd7d[_0x581182(0xa9)]);}),_0x282380[_0x2b56ae(0xb3)](async _0x316739=>{const _0x117dfb=_0x2b56ae,_0x478c31=(0x0,PaymentGatewayServices_1['checkOpenInvoices'])(_0x316739['id']);_0x387414[_0x117dfb(0xc1)](_0x478c31);});});(0x0,socket_1[_0x517928(0xa5)])(_0x1ef47b),(0x0,http_graceful_shutdown_1['default'])(_0x1ef47b),process['on'](_0x517928(0xc8),_0x49e4c5=>{const _0x38b037=_0x517928;console[_0x38b037(0xbc)](new Date()['toUTCString']()+'\x20uncaughtException:',_0x49e4c5['message']),console[_0x38b037(0xbc)](_0x49e4c5['stack']);}),process['on'](_0x517928(0xcb),(_0x404dd5,_0x4e1c8f)=>{const _0x634600=_0x517928;console[_0x634600(0xbc)](new Date()[_0x634600(0xb9)]()+_0x634600(0xaa),_0x404dd5,_0x4e1c8f);});}catch(_0x4cca66){logger_1['logger'][_0x517928(0xbc)](_0x517928(0xa8),_0x4cca66),process[_0x517928(0xa7)](0x1);}}function a350_0x140e(){const _0x41f139=['\x20unhandledRejection:','catch','listen','apply','./services/WbotServices/StartAllWhatsAppsSessions','Server\x20started\x20on\x20port:\x20','flushdb','8Ybutdn','5QmxSrB','map','__esModule','then','22PjcBVD','startLicenseChecker','default','toUTCString','./libs/socket','./services/PaymentGatewayServices/PaymentGatewayServices','error','(((.+)+)+)+$','666144PYIMOl','./workers/licenseChecker','8651195ROrtzl','push','__importDefault','payGatewayInitialize','constructor','2148140FAKLmt','toString','9553490bleSJD','uncaughtException','Error\x20initializing\x20payment\x20gateway:\x20','env','unhandledRejection','PORT','logger','6357843iqZCWY','search','findAll','./app','redis','49133MCglVL','./models/Company','2882358EsUaJn','true','initIO','StartAllWhatsAppsSessions','exit','Failed\x20to\x20start\x20the\x20server:','message'];a350_0x140e=function(){return _0x41f139;};return a350_0x140e();}startServer();