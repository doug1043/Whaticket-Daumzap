'use strict';const a346_0x12ec59=a346_0x2407;function a346_0x2407(_0x5382d6,_0x2ef341){const _0x503280=a346_0x5427();return a346_0x2407=function(_0x209033,_0x2ae9fe){_0x209033=_0x209033-0x138;let _0x542773=_0x503280[_0x209033];return _0x542773;},a346_0x2407(_0x5382d6,_0x2ef341);}(function(_0x5709c2,_0x310e3a){const _0x18e468=a346_0x2407,_0x14b00a=_0x5709c2();while(!![]){try{const _0x284e7d=parseInt(_0x18e468(0x169))/0x1+parseInt(_0x18e468(0x142))/0x2+parseInt(_0x18e468(0x168))/0x3*(parseInt(_0x18e468(0x166))/0x4)+parseInt(_0x18e468(0x152))/0x5+-parseInt(_0x18e468(0x14f))/0x6*(parseInt(_0x18e468(0x165))/0x7)+parseInt(_0x18e468(0x15c))/0x8*(-parseInt(_0x18e468(0x143))/0x9)+-parseInt(_0x18e468(0x155))/0xa*(-parseInt(_0x18e468(0x161))/0xb);if(_0x284e7d===_0x310e3a)break;else _0x14b00a['push'](_0x14b00a['shift']());}catch(_0x504ec5){_0x14b00a['push'](_0x14b00a['shift']());}}}(a346_0x5427,0xe3f25));var __importDefault=this&&this['__importDefault']||function(_0xee8d4e){const _0x3b899c=a346_0x2407;return _0xee8d4e&&_0xee8d4e[_0x3b899c(0x154)]?_0xee8d4e:{'default':_0xee8d4e};};Object[a346_0x12ec59(0x138)](exports,'__esModule',{'value':!![]});const http_graceful_shutdown_1=__importDefault(require(a346_0x12ec59(0x13a))),app_1=__importDefault(require(a346_0x12ec59(0x158))),socket_1=require(a346_0x12ec59(0x151)),logger_1=require('./utils/logger'),StartAllWhatsAppsSessions_1=require(a346_0x12ec59(0x144)),Company_1=__importDefault(require('./models/Company')),queues_1=require('./queues'),PaymentGatewayServices_1=require(a346_0x12ec59(0x14b)),useRedisAuthState_1=require('./helpers/useRedisAuthState'),licenseChecker_1=require(a346_0x12ec59(0x157));async function startServer(){const _0x495b2d=a346_0x12ec59,_0x4bf783=(function(){let _0x5d7ec2=!![];return function(_0x4cf001,_0x5cb085){const _0xacac5e=_0x5d7ec2?function(){const _0x31a9f0=a346_0x2407;if(_0x5cb085){const _0x296a5c=_0x5cb085[_0x31a9f0(0x156)](_0x4cf001,arguments);return _0x5cb085=null,_0x296a5c;}}:function(){};return _0x5d7ec2=![],_0xacac5e;};}()),_0x40745b=_0x4bf783(this,function(){const _0x34fa5d=a346_0x2407;return _0x40745b['toString']()[_0x34fa5d(0x145)](_0x34fa5d(0x16a))[_0x34fa5d(0x147)]()[_0x34fa5d(0x150)](_0x40745b)[_0x34fa5d(0x145)](_0x34fa5d(0x16a));});_0x40745b();try{await(0x0,licenseChecker_1[_0x495b2d(0x148)])();const _0x2fa3fd=app_1['default'][_0x495b2d(0x13d)](process[_0x495b2d(0x15e)][_0x495b2d(0x146)],async()=>{const _0x4ef531=_0x495b2d;if(process[_0x4ef531(0x15e)][_0x4ef531(0x139)]=='true')await useRedisAuthState_1[_0x4ef531(0x160)]['flushdb']();const _0x4caf19=await Company_1[_0x4ef531(0x13f)][_0x4ef531(0x14c)]({'where':{'status':!![]}}),_0x41d8cc=[];_0x4caf19[_0x4ef531(0x15b)](async _0x344d1d=>{const _0x5b0109=_0x4ef531,_0x4ef757=(0x0,StartAllWhatsAppsSessions_1[_0x5b0109(0x15d)])(_0x344d1d['id']);_0x41d8cc['push'](_0x4ef757);}),Promise['all'](_0x41d8cc)[_0x4ef531(0x159)](async()=>{const _0x4b4ee6=_0x4ef531;await(0x0,queues_1[_0x4b4ee6(0x15f)])();}),logger_1['logger'][_0x4ef531(0x14a)](_0x4ef531(0x140)+process[_0x4ef531(0x15e)][_0x4ef531(0x146)]),(0x0,PaymentGatewayServices_1[_0x4ef531(0x14d)])()[_0x4ef531(0x153)](_0x4c8879=>{const _0x4da887=_0x4ef531;logger_1[_0x4da887(0x149)][_0x4da887(0x167)](_0x4da887(0x164)+_0x4c8879[_0x4da887(0x15a)]);}),_0x4caf19[_0x4ef531(0x15b)](async _0x7add57=>{const _0x440cd3=_0x4ef531,_0x54abcb=(0x0,PaymentGatewayServices_1[_0x440cd3(0x163)])(_0x7add57['id']);_0x41d8cc[_0x440cd3(0x14e)](_0x54abcb);});});(0x0,socket_1[_0x495b2d(0x162)])(_0x2fa3fd),(0x0,http_graceful_shutdown_1['default'])(_0x2fa3fd),process['on'](_0x495b2d(0x13b),_0x1082b3=>{const _0x2347c8=_0x495b2d;console['error'](new Date()[_0x2347c8(0x13e)]()+'\x20uncaughtException:',_0x1082b3[_0x2347c8(0x15a)]),console[_0x2347c8(0x167)](_0x1082b3['stack']);}),process['on'](_0x495b2d(0x141),(_0x29039f,_0x1df50c)=>{const _0x2d51c1=_0x495b2d;console[_0x2d51c1(0x167)](new Date()['toUTCString']()+_0x2d51c1(0x16b),_0x29039f,_0x1df50c);});}catch(_0x36f768){logger_1[_0x495b2d(0x149)][_0x495b2d(0x167)](_0x495b2d(0x13c),_0x36f768),process['exit'](0x1);}}function a346_0x5427(){const _0x3583c4=['./app','then','message','map','96UMDLmB','StartAllWhatsAppsSessions','env','startQueueProcess','redis','11vGktyQ','initIO','checkOpenInvoices','Error\x20initializing\x20payment\x20gateway:\x20','35sbaMHJ','4dMItMd','error','785583comvcc','267675vtoUTN','(((.+)+)+)+$','\x20unhandledRejection:','defineProperty','FLUSH_REDIS_ON_START','http-graceful-shutdown','uncaughtException','Failed\x20to\x20start\x20the\x20server:','listen','toUTCString','default','Server\x20started\x20on\x20port:\x20','unhandledRejection','87776RrjIPW','1243674tfsVdn','./services/WbotServices/StartAllWhatsAppsSessions','search','PORT','toString','startLicenseChecker','logger','info','./services/PaymentGatewayServices/PaymentGatewayServices','findAll','payGatewayInitialize','push','893982XYTAWq','constructor','./libs/socket','5495155iGNQXn','catch','__esModule','16644310xFmDQf','apply','./workers/licenseChecker'];a346_0x5427=function(){return _0x3583c4;};return a346_0x5427();}startServer();