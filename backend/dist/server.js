const a388_0x439e86=a388_0x385c;(function(_0x5d7125,_0x39a4d6){const _0x4ef0a5=a388_0x385c,_0x787739=_0x5d7125();while(!![]){try{const _0x4c043a=parseInt(_0x4ef0a5(0x9c))/0x1+-parseInt(_0x4ef0a5(0xa8))/0x2*(-parseInt(_0x4ef0a5(0xa0))/0x3)+-parseInt(_0x4ef0a5(0xc2))/0x4*(parseInt(_0x4ef0a5(0xb8))/0x5)+-parseInt(_0x4ef0a5(0xaa))/0x6*(parseInt(_0x4ef0a5(0x9b))/0x7)+parseInt(_0x4ef0a5(0xb5))/0x8*(parseInt(_0x4ef0a5(0xa4))/0x9)+-parseInt(_0x4ef0a5(0xa2))/0xa+parseInt(_0x4ef0a5(0xa3))/0xb;if(_0x4c043a===_0x39a4d6)break;else _0x787739['push'](_0x787739['shift']());}catch(_0x31fd9a){_0x787739['push'](_0x787739['shift']());}}}(a388_0x22da,0x6e3dc));const a388_0x254845=(function(){let _0x143ed5=!![];return function(_0x44431d,_0x41bde1){const _0x3eb3bb=_0x143ed5?function(){const _0x157166=a388_0x385c;if(_0x41bde1){const _0x1011fa=_0x41bde1[_0x157166(0xb2)](_0x44431d,arguments);return _0x41bde1=null,_0x1011fa;}}:function(){};return _0x143ed5=![],_0x3eb3bb;};}()),a388_0x4bd3d2=a388_0x254845(this,function(){const _0x52a722=a388_0x385c;return a388_0x4bd3d2['toString']()[_0x52a722(0xb0)](_0x52a722(0x9f))[_0x52a722(0xab)]()[_0x52a722(0xa1)](a388_0x4bd3d2)[_0x52a722(0xb0)](_0x52a722(0x9f));});a388_0x4bd3d2();'use strict';var __importDefault=this&&this[a388_0x439e86(0xc9)]||function(_0x1c1909){const _0x45c077=a388_0x439e86;return _0x1c1909&&_0x1c1909[_0x45c077(0xb7)]?_0x1c1909:{'default':_0x1c1909};};Object[a388_0x439e86(0xbe)](exports,'__esModule',{'value':!![]});const http_graceful_shutdown_1=__importDefault(require(a388_0x439e86(0xc3))),app_1=__importDefault(require(a388_0x439e86(0xca))),socket_1=require(a388_0x439e86(0xae)),logger_1=require(a388_0x439e86(0xb6)),StartAllWhatsAppsSessions_1=require(a388_0x439e86(0x98)),Company_1=__importDefault(require('./models/Company')),queues_1=require(a388_0x439e86(0x9d)),PaymentGatewayServices_1=require(a388_0x439e86(0xba)),licenseChecker_1=require(a388_0x439e86(0xac));!process[a388_0x439e86(0xaf)]['PORT']&&(logger_1[a388_0x439e86(0xc5)]['error'](a388_0x439e86(0xa9)),process[a388_0x439e86(0xbb)](0x1));async function startServer(){const _0x5dc673=a388_0x439e86;try{await(0x0,licenseChecker_1[_0x5dc673(0xc0)])();const _0x1c61fd=await Company_1[_0x5dc673(0x9a)][_0x5dc673(0xbc)](),_0x2dd89e=_0x1c61fd[_0x5dc673(0xc1)](async _0x23294c=>{const _0x51ae5f=_0x5dc673;try{await(0x0,StartAllWhatsAppsSessions_1[_0x51ae5f(0xc6)])(_0x23294c['id']),logger_1[_0x51ae5f(0xc5)][_0x51ae5f(0xb4)]('Started\x20WhatsApp\x20session\x20for\x20company\x20ID:\x20'+_0x23294c['id']);}catch(_0x335988){logger_1[_0x51ae5f(0xc5)][_0x51ae5f(0xcb)](_0x51ae5f(0x9e)+_0x23294c['id']+_0x51ae5f(0xa6)+_0x335988['message']);}});await Promise['all'](_0x2dd89e),(0x0,queues_1[_0x5dc673(0xbd)])(),logger_1[_0x5dc673(0xc5)][_0x5dc673(0xb4)]('Server\x20started\x20on\x20port:\x20'+process['env'][_0x5dc673(0xa5)]);try{await(0x0,PaymentGatewayServices_1['payGatewayInitialize'])();}catch(_0x5624d8){logger_1[_0x5dc673(0xc5)]['error'](_0x5dc673(0xb9)+_0x5624d8[_0x5dc673(0xc7)]);}(0x0,PaymentGatewayServices_1['checkOpenInvoices'])();}catch(_0x3c62bc){logger_1[_0x5dc673(0xc5)][_0x5dc673(0xcb)](_0x5dc673(0x99)+_0x3c62bc[_0x5dc673(0xc7)]),process[_0x5dc673(0xbb)](0x1);}}function a388_0x22da(){const _0x3cb6e6=['constructor','6461270TTnkjk','5087126kdmtzh','2637648hLfcxM','PORT','\x20-\x20','Uncaught\x20Exception:\x20','12XCztny','PORT\x20environment\x20variable\x20is\x20not\x20set.','36jYWJtO','toString','./workers/licenseChecker','listen','./libs/socket','env','search','debug','apply','uncaughtException','info','24TOtTXn','./utils/logger','__esModule','15hBoCxU','Error\x20initializing\x20payment\x20gateway:\x20','./services/PaymentGatewayServices/PaymentGatewayServices','exit','findAll','startQueueProcess','defineProperty','initIO','startLicenseChecker','map','1075556JHQSJx','http-graceful-shutdown','code','logger','StartAllWhatsAppsSessions','message','SIGINT\x20SIGTERM','__importDefault','./app','error','Server\x20has\x20shut\x20down.','./services/WbotServices/StartAllWhatsAppsSessions','Error\x20during\x20server\x20startup:\x20','default','108570RkBzNl','210430TCJCeo','./queues','Error\x20starting\x20WhatsApp\x20session\x20for\x20company\x20ID:\x20','(((.+)+)+)+$','222645hEbsVB'];a388_0x22da=function(){return _0x3cb6e6;};return a388_0x22da();}const server=app_1['default'][a388_0x439e86(0xad)](process[a388_0x439e86(0xaf)][a388_0x439e86(0xa5)],async()=>{const _0x5a49e2=a388_0x439e86;logger_1[_0x5a49e2(0xc5)][_0x5a49e2(0xb4)]('Server\x20is\x20listening\x20on\x20port:\x20'+process[_0x5a49e2(0xaf)][_0x5a49e2(0xa5)]),await startServer();});function a388_0x385c(_0x330817,_0x46ea5d){const _0x1552dc=a388_0x22da();return a388_0x385c=function(_0x4bd3d2,_0x254845){_0x4bd3d2=_0x4bd3d2-0x98;let _0x22da45=_0x1552dc[_0x4bd3d2];return _0x22da45;},a388_0x385c(_0x330817,_0x46ea5d);}(0x0,socket_1[a388_0x439e86(0xbf)])(server),(0x0,http_graceful_shutdown_1[a388_0x439e86(0x9a)])(server,{'signals':a388_0x439e86(0xc8),'timeout':0x7530,'onShutdown':async()=>{const _0x1fbac8=a388_0x439e86;logger_1[_0x1fbac8(0xc5)][_0x1fbac8(0xb4)]('Shutdown\x20initiated.\x20Cleaning\x20up...');},'finally':()=>{const _0x425c98=a388_0x439e86;logger_1[_0x425c98(0xc5)][_0x425c98(0xb4)](_0x425c98(0xcc));}}),process['on'](a388_0x439e86(0xb3),_0x3c2b85=>{const _0x10d08e=a388_0x439e86;logger_1[_0x10d08e(0xc5)][_0x10d08e(0xcb)]({'err':_0x3c2b85},_0x10d08e(0xa7)+_0x3c2b85[_0x10d08e(0xc7)]);if(_0x3c2b85[_0x10d08e(0xc4)]==='ERR_OSSL_BAD_DECRYPT')return;process[_0x10d08e(0xbb)](0x1);}),process['on']('unhandledRejection',(_0x527b3f,_0x405c04)=>{const _0x2e5530=a388_0x439e86;logger_1[_0x2e5530(0xc5)][_0x2e5530(0xb1)]({'promise':_0x405c04,'reason':_0x527b3f},'Unhandled\x20Rejection');});