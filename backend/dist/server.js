const a379_0x3f317a=a379_0x4b67;(function(_0x179b20,_0x316d3a){const _0x2c5a82=a379_0x4b67,_0x30019f=_0x179b20();while(!![]){try{const _0x26e19b=parseInt(_0x2c5a82(0xd0))/0x1+parseInt(_0x2c5a82(0xd7))/0x2*(parseInt(_0x2c5a82(0xd5))/0x3)+-parseInt(_0x2c5a82(0xe2))/0x4*(parseInt(_0x2c5a82(0xcf))/0x5)+parseInt(_0x2c5a82(0xbc))/0x6*(-parseInt(_0x2c5a82(0xe4))/0x7)+-parseInt(_0x2c5a82(0xd1))/0x8*(-parseInt(_0x2c5a82(0xc3))/0x9)+-parseInt(_0x2c5a82(0xba))/0xa+parseInt(_0x2c5a82(0xd8))/0xb*(parseInt(_0x2c5a82(0xe3))/0xc);if(_0x26e19b===_0x316d3a)break;else _0x30019f['push'](_0x30019f['shift']());}catch(_0x1e9133){_0x30019f['push'](_0x30019f['shift']());}}}(a379_0x4123,0xda787));const a379_0x5802dd=(function(){let _0x48ba40=!![];return function(_0x574cac,_0x4f31e2){const _0x25f2c2=_0x48ba40?function(){if(_0x4f31e2){const _0x47c13e=_0x4f31e2['apply'](_0x574cac,arguments);return _0x4f31e2=null,_0x47c13e;}}:function(){};return _0x48ba40=![],_0x25f2c2;};}()),a379_0x1f7e86=a379_0x5802dd(this,function(){const _0x222ffd=a379_0x4b67;return a379_0x1f7e86[_0x222ffd(0xdd)]()['search'](_0x222ffd(0xe5))[_0x222ffd(0xdd)]()[_0x222ffd(0xc0)](a379_0x1f7e86)['search'](_0x222ffd(0xe5));});a379_0x1f7e86();'use strict';function a379_0x4b67(_0xa06f20,_0x427033){const _0x102c76=a379_0x4123();return a379_0x4b67=function(_0x1f7e86,_0x5802dd){_0x1f7e86=_0x1f7e86-0xb3;let _0x41231e=_0x102c76[_0x1f7e86];return _0x41231e;},a379_0x4b67(_0xa06f20,_0x427033);}var __importDefault=this&&this[a379_0x3f317a(0xd6)]||function(_0x59fbd4){const _0x120c3c=a379_0x3f317a;return _0x59fbd4&&_0x59fbd4[_0x120c3c(0xbb)]?_0x59fbd4:{'default':_0x59fbd4};};Object[a379_0x3f317a(0xc8)](exports,a379_0x3f317a(0xbb),{'value':!![]});const http_graceful_shutdown_1=__importDefault(require(a379_0x3f317a(0xbe))),app_1=__importDefault(require('./app')),socket_1=require(a379_0x3f317a(0xc5)),logger_1=require(a379_0x3f317a(0xc4)),StartAllWhatsAppsSessions_1=require(a379_0x3f317a(0xdb)),Company_1=__importDefault(require('./models/Company')),queues_1=require('./queues'),PaymentGatewayServices_1=require(a379_0x3f317a(0xbd)),licenseChecker_1=require(a379_0x3f317a(0xb7));function a379_0x4123(){const _0x497c38=['toString','StartAllWhatsAppsSessions','logger','Unhandled\x20Rejection','env','302308mJHsmx','6258984DTyqjG','2230627PORvor','(((.+)+)+)+$','Uncaught\x20Exception:\x20','exit','startQueueProcess','Server\x20is\x20listening\x20on\x20port:\x20','./workers/licenseChecker','debug','all','13026230CIxzjf','__esModule','30EzrJLM','./services/PaymentGatewayServices/PaymentGatewayServices','http-graceful-shutdown','Server\x20has\x20shut\x20down.','constructor','map','uncaughtException','11889CfNDPl','./utils/logger','./libs/socket','Error\x20initializing\x20payment\x20gateway:\x20','Started\x20WhatsApp\x20session\x20for\x20company\x20ID:\x20','defineProperty','listen','initIO','checkOpenInvoices','error','PORT\x20environment\x20variable\x20is\x20not\x20set.','PORT','75MCLOuu','1191212YEXBif','1816HubdLi','Error\x20starting\x20WhatsApp\x20session\x20for\x20company\x20ID:\x20','ERR_OSSL_BAD_DECRYPT','info','9DMPiww','__importDefault','202578JnNTGx','66SwMYLA','Server\x20started\x20on\x20port:\x20','default','./services/WbotServices/StartAllWhatsAppsSessions','message'];a379_0x4123=function(){return _0x497c38;};return a379_0x4123();}!process[a379_0x3f317a(0xe1)]['PORT']&&(logger_1[a379_0x3f317a(0xdf)]['error'](a379_0x3f317a(0xcd)),process[a379_0x3f317a(0xb4)](0x1));async function startServer(){const _0x1af0d2=a379_0x3f317a;try{await(0x0,licenseChecker_1['startLicenseChecker'])();const _0x307910=await Company_1[_0x1af0d2(0xda)]['findAll'](),_0x45d16e=_0x307910[_0x1af0d2(0xc1)](async _0x221d06=>{const _0x43ca59=_0x1af0d2;try{await(0x0,StartAllWhatsAppsSessions_1[_0x43ca59(0xde)])(_0x221d06['id']),logger_1['logger'][_0x43ca59(0xd4)](_0x43ca59(0xc7)+_0x221d06['id']);}catch(_0x39179b){logger_1[_0x43ca59(0xdf)][_0x43ca59(0xcc)](_0x43ca59(0xd2)+_0x221d06['id']+'\x20-\x20'+_0x39179b['message']);}});await Promise[_0x1af0d2(0xb9)](_0x45d16e),(0x0,queues_1[_0x1af0d2(0xb5)])(),logger_1['logger'][_0x1af0d2(0xd4)](_0x1af0d2(0xd9)+process['env'][_0x1af0d2(0xce)]);try{await(0x0,PaymentGatewayServices_1['payGatewayInitialize'])();}catch(_0x20c618){logger_1[_0x1af0d2(0xdf)]['error'](_0x1af0d2(0xc6)+_0x20c618[_0x1af0d2(0xdc)]);}(0x0,PaymentGatewayServices_1[_0x1af0d2(0xcb)])();}catch(_0x377b5e){logger_1['logger']['error']('Error\x20during\x20server\x20startup:\x20'+_0x377b5e[_0x1af0d2(0xdc)]),process['exit'](0x1);}}const server=app_1[a379_0x3f317a(0xda)][a379_0x3f317a(0xc9)](process[a379_0x3f317a(0xe1)]['PORT'],async()=>{const _0x41df75=a379_0x3f317a;logger_1['logger'][_0x41df75(0xd4)](_0x41df75(0xb6)+process[_0x41df75(0xe1)]['PORT']),await startServer();});(0x0,socket_1[a379_0x3f317a(0xca)])(server),(0x0,http_graceful_shutdown_1[a379_0x3f317a(0xda)])(server,{'signals':'SIGINT\x20SIGTERM','timeout':0x7530,'onShutdown':async()=>{const _0x399219=a379_0x3f317a;logger_1[_0x399219(0xdf)][_0x399219(0xd4)]('Shutdown\x20initiated.\x20Cleaning\x20up...');},'finally':()=>{const _0x2421d7=a379_0x3f317a;logger_1[_0x2421d7(0xdf)][_0x2421d7(0xd4)](_0x2421d7(0xbf));}}),process['on'](a379_0x3f317a(0xc2),_0x7fa883=>{const _0x51965a=a379_0x3f317a;logger_1[_0x51965a(0xdf)][_0x51965a(0xcc)]({'err':_0x7fa883},_0x51965a(0xb3)+_0x7fa883[_0x51965a(0xdc)]);if(_0x7fa883['code']===_0x51965a(0xd3))return;process[_0x51965a(0xb4)](0x1);}),process['on']('unhandledRejection',(_0x3a47c7,_0x12d618)=>{const _0x30e486=a379_0x3f317a;logger_1[_0x30e486(0xdf)][_0x30e486(0xb8)]({'promise':_0x12d618,'reason':_0x3a47c7},_0x30e486(0xe0));});