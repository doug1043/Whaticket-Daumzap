const a470_0xa3b1d4=a470_0x1f41;(function(_0x4c2544,_0x2a4d60){const _0x44eaa3=a470_0x1f41,_0x5803fc=_0x4c2544();while(!![]){try{const _0x124a58=parseInt(_0x44eaa3(0x1bb))/0x1*(-parseInt(_0x44eaa3(0x1af))/0x2)+-parseInt(_0x44eaa3(0x1b9))/0x3+parseInt(_0x44eaa3(0x1bd))/0x4+-parseInt(_0x44eaa3(0x1c0))/0x5*(-parseInt(_0x44eaa3(0x1c9))/0x6)+parseInt(_0x44eaa3(0x1a3))/0x7+-parseInt(_0x44eaa3(0x1a9))/0x8+parseInt(_0x44eaa3(0x1ab))/0x9*(parseInt(_0x44eaa3(0x1be))/0xa);if(_0x124a58===_0x2a4d60)break;else _0x5803fc['push'](_0x5803fc['shift']());}catch(_0x2e7707){_0x5803fc['push'](_0x5803fc['shift']());}}}(a470_0x42de,0x28003));const a470_0x425df2=(function(){let _0x112201=!![];return function(_0x2fe79e,_0x499c7c){const _0x198034=_0x112201?function(){const _0x3fec42=a470_0x1f41;if(_0x499c7c){const _0x1bce31=_0x499c7c[_0x3fec42(0x1b5)](_0x2fe79e,arguments);return _0x499c7c=null,_0x1bce31;}}:function(){};return _0x112201=![],_0x198034;};}()),a470_0x23e5b2=a470_0x425df2(this,function(){const _0x5390cf=a470_0x1f41;return a470_0x23e5b2[_0x5390cf(0x1bc)]()[_0x5390cf(0x1c3)](_0x5390cf(0x19c))[_0x5390cf(0x1bc)]()[_0x5390cf(0x1b0)](a470_0x23e5b2)['search'](_0x5390cf(0x19c));});a470_0x23e5b2();'use strict';function a470_0x1f41(_0x281025,_0x2bb09c){const _0x56f2fd=a470_0x42de();return a470_0x1f41=function(_0x23e5b2,_0x425df2){_0x23e5b2=_0x23e5b2-0x19b;let _0x42de08=_0x56f2fd[_0x23e5b2];return _0x42de08;},a470_0x1f41(_0x281025,_0x2bb09c);}var __importDefault=this&&this[a470_0xa3b1d4(0x1a1)]||function(_0xc95da8){const _0x4e6a16=a470_0xa3b1d4;return _0xc95da8&&_0xc95da8[_0x4e6a16(0x1ac)]?_0xc95da8:{'default':_0xc95da8};};function a470_0x42de(){const _0xce0148=['map','./services/WbotServices/StartAllWhatsAppsSessions','defineProperty','message','18WBPead','info','exit','./app','logger','(((.+)+)+)+$','\x20-\x20','ERR_OSSL_BAD_DECRYPT','checkOpenInvoices','Server\x20has\x20shut\x20down.','__importDefault','Server\x20started\x20on\x20port:\x20','2119817KCRHoA','startLicenseChecker','Error\x20initializing\x20payment\x20gateway:\x20','./models/Company','default','./services/PaymentGatewayServices/PaymentGatewayServices','2497728VPvfVU','initIO','839871CgGCUV','__esModule','./utils/logger','code','158bpSGir','constructor','error','startQueueProcess','StartAllWhatsAppsSessions','Shutdown\x20initiated.\x20Cleaning\x20up...','apply','SIGINT\x20SIGTERM','PORT','./workers/licenseChecker','546552YssdIb','PORT\x20environment\x20variable\x20is\x20not\x20set.','1633AkAEVj','toString','456932uBQKHO','10MxoFJN','Error\x20during\x20server\x20startup:\x20','461445bcyLau','debug','env','search','unhandledRejection'];a470_0x42de=function(){return _0xce0148;};return a470_0x42de();}Object[a470_0xa3b1d4(0x1c7)](exports,a470_0xa3b1d4(0x1ac),{'value':!![]});const http_graceful_shutdown_1=__importDefault(require('http-graceful-shutdown')),app_1=__importDefault(require(a470_0xa3b1d4(0x1cc))),socket_1=require('./libs/socket'),logger_1=require(a470_0xa3b1d4(0x1ad)),StartAllWhatsAppsSessions_1=require(a470_0xa3b1d4(0x1c6)),Company_1=__importDefault(require(a470_0xa3b1d4(0x1a6))),queues_1=require('./queues'),PaymentGatewayServices_1=require(a470_0xa3b1d4(0x1a8)),licenseChecker_1=require(a470_0xa3b1d4(0x1b8));!process[a470_0xa3b1d4(0x1c2)][a470_0xa3b1d4(0x1b7)]&&(logger_1[a470_0xa3b1d4(0x19b)][a470_0xa3b1d4(0x1b1)](a470_0xa3b1d4(0x1ba)),process[a470_0xa3b1d4(0x1cb)](0x1));async function startServer(){const _0x49dac9=a470_0xa3b1d4;try{await(0x0,licenseChecker_1[_0x49dac9(0x1a4)])();const _0x137d3e=await Company_1[_0x49dac9(0x1a7)]['findAll'](),_0x28462e=_0x137d3e[_0x49dac9(0x1c5)](async _0xaf9132=>{const _0x12980c=_0x49dac9;try{await(0x0,StartAllWhatsAppsSessions_1[_0x12980c(0x1b3)])(_0xaf9132['id']),logger_1[_0x12980c(0x19b)][_0x12980c(0x1ca)]('Started\x20WhatsApp\x20session\x20for\x20company\x20ID:\x20'+_0xaf9132['id']);}catch(_0x4f9d2e){logger_1[_0x12980c(0x19b)]['error']('Error\x20starting\x20WhatsApp\x20session\x20for\x20company\x20ID:\x20'+_0xaf9132['id']+_0x12980c(0x19d)+_0x4f9d2e[_0x12980c(0x1c8)]);}});await Promise['all'](_0x28462e),(0x0,queues_1[_0x49dac9(0x1b2)])(),logger_1[_0x49dac9(0x19b)][_0x49dac9(0x1ca)](_0x49dac9(0x1a2)+process[_0x49dac9(0x1c2)]['PORT']);try{await(0x0,PaymentGatewayServices_1['payGatewayInitialize'])();}catch(_0x5b4eaf){logger_1[_0x49dac9(0x19b)][_0x49dac9(0x1b1)](_0x49dac9(0x1a5)+_0x5b4eaf[_0x49dac9(0x1c8)]);}(0x0,PaymentGatewayServices_1[_0x49dac9(0x19f)])();}catch(_0x2ad65f){logger_1[_0x49dac9(0x19b)][_0x49dac9(0x1b1)](_0x49dac9(0x1bf)+_0x2ad65f['message']),process['exit'](0x1);}}const server=app_1['default']['listen'](process[a470_0xa3b1d4(0x1c2)][a470_0xa3b1d4(0x1b7)],async()=>{const _0x418aca=a470_0xa3b1d4;logger_1['logger'][_0x418aca(0x1ca)]('Server\x20is\x20listening\x20on\x20port:\x20'+process[_0x418aca(0x1c2)]['PORT']),await startServer();});(0x0,socket_1[a470_0xa3b1d4(0x1aa)])(server),(0x0,http_graceful_shutdown_1['default'])(server,{'signals':a470_0xa3b1d4(0x1b6),'timeout':0x7530,'onShutdown':async()=>{const _0x24c9f9=a470_0xa3b1d4;logger_1[_0x24c9f9(0x19b)][_0x24c9f9(0x1ca)](_0x24c9f9(0x1b4));},'finally':()=>{const _0x12c7ee=a470_0xa3b1d4;logger_1['logger']['info'](_0x12c7ee(0x1a0));}}),process['on']('uncaughtException',_0x8eb605=>{const _0x573b6a=a470_0xa3b1d4;logger_1[_0x573b6a(0x19b)][_0x573b6a(0x1b1)]({'err':_0x8eb605},'Uncaught\x20Exception:\x20'+_0x8eb605['message']);if(_0x8eb605[_0x573b6a(0x1ae)]===_0x573b6a(0x19e))return;process['exit'](0x1);}),process['on'](a470_0xa3b1d4(0x1c4),(_0x4f0e55,_0x21f09f)=>{const _0x4f01b0=a470_0xa3b1d4;logger_1['logger'][_0x4f01b0(0x1c1)]({'promise':_0x21f09f,'reason':_0x4f0e55},'Unhandled\x20Rejection');});