function a297_0x56e6(){const _0x58d206=['io-onConnection:\x20tokenData','then','profile','default','findByPk','debug','../models/User','onConnect:\x20Missing\x20userId','(((.+)+)+)+$','null','Error\x20fetching\x20ticket\x20','size','\x20cannot\x20subscribe\x20to\x20','env','leaveTickets','finished\x20session\x20','parse','info','Emitting\x20presence\x20event:\x20','secret','../errors/AppError','queueId','\x20of\x20company\x20','adapter','12971pimyyg','Invalid\x20attempt\x20to\x20join\x20channel\x20of\x20ticket\x20','toString','emit','../config/auth','Server','../models/UserSocketSession','@socket.io/admin-ui','joinNotification',']:\x20Channel:\x20','apply','connection','\x20channel.','composing','\x20in\x20company\x20','leaveNotification','sockets','7377632zpgDkf','\x20joining\x20ticket\x20room:\x20','companyId','company-','create','Clossing\x20all\x20socket\x20sessions','SOCKET_ADMIN','1053489frwnUA','admin','12wdgFVK','emitPresence','../helpers/CheckSettings','FRONTEND_URL','joinNotification[','leaveChatbox[','passwordHash','enabled','-open','userId','jsonwebtoken','toISOString','basic','join','leaveNotification[','super','status-','handshake','47340RzSPAq','notification','\x20tickets\x20channel.','Broadcasting\x20to\x20channels:\x20','instrument','queue-','Error\x20decoding\x20token:\x20','Socket\x20IO\x20not\x20initialized','decrementCounter','Socket\x20stats\x20-\x20Main\x20company\x20room:\x20','\x20pending\x20tickets\x20channel.','\x20from\x20user\x20','ticket-','834kTHwFW','__esModule','leave','\x20clients,\x20','-mainchannel','Client\x20Connected:\x20','debugConnection','2269YDuIgc','disconnect','search','User\x20','Ticket\x20room:\x20','\x20joined\x20queue\x20','verify','onConnect:\x20User\x20','available','\x20leaved\x20queue\x20','../models/Ticket','joinChatBox','error','\x20for\x20user\x20','queues','pending','-notification','Error\x20in\x20checkPresence:\x20','Received\x20checkPresence\x20for\x20ticket\x20','joinedTicket','logger','./counter','__importDefault','incrementCounter','get','Error\x20counting\x20room\x20clients:\x20','update','\x20joined\x20presence\x20channel\x20for\x20ticket\x20','user-','joinChatbox[','rooms',']:\x20User:\x20','from','groupsTab','getIO','checkPresence','10CwjYij','Debug\x20connection\x20info\x20sent\x20to\x20user\x20','1198eExgNu','\x20by\x20user\x20','\x20for\x20ticket\x20','7492797tCVvDA','query','Admin\x20','forEach','message','-pending','undefined','41094218nvioOF','online','joinTicket','\x20joined\x20','-presence','Socket\x20IO\x20not\x20initialized\x20when\x20trying\x20to\x20emit\x20presence','GetCompanySetting','ready','started\x20session\x20','leaveChatBox','debugInfo','initIO'];a297_0x56e6=function(){return _0x58d206;};return a297_0x56e6();}const a297_0x59de16=a297_0xe995;(function(_0x2aaa5b,_0x5ceda0){const _0x50a478=a297_0xe995,_0x140966=_0x2aaa5b();while(!![]){try{const _0x5bd18a=parseInt(_0x50a478(0x228))/0x1*(parseInt(_0x50a478(0x1ba))/0x2)+parseInt(_0x50a478(0x200))/0x3*(parseInt(_0x50a478(0x202))/0x4)+-parseInt(_0x50a478(0x214))/0x5+parseInt(_0x50a478(0x221))/0x6*(parseInt(_0x50a478(0x1e8))/0x7)+parseInt(_0x50a478(0x1f9))/0x8+-parseInt(_0x50a478(0x1bd))/0x9*(-parseInt(_0x50a478(0x1b8))/0xa)+-parseInt(_0x50a478(0x1c4))/0xb;if(_0x5bd18a===_0x5ceda0)break;else _0x140966['push'](_0x140966['shift']());}catch(_0x3b2293){_0x140966['push'](_0x140966['shift']());}}}(a297_0x56e6,0xa5ec2));const a297_0x21dec8=(function(){let _0x479324=!![];return function(_0x3af66c,_0x13aced){const _0x15358e=_0x479324?function(){const _0x283968=a297_0xe995;if(_0x13aced){const _0x15b841=_0x13aced[_0x283968(0x1f2)](_0x3af66c,arguments);return _0x13aced=null,_0x15b841;}}:function(){};return _0x479324=![],_0x15358e;};}()),a297_0x159a5d=a297_0x21dec8(this,function(){const _0x489064=a297_0xe995;return a297_0x159a5d[_0x489064(0x1ea)]()['search']('(((.+)+)+)+$')[_0x489064(0x1ea)]()['constructor'](a297_0x159a5d)[_0x489064(0x22a)](_0x489064(0x1d8));});a297_0x159a5d();'use strict';var __importDefault=this&&this[a297_0x59de16(0x23e)]||function(_0x1ea917){const _0x86c5a2=a297_0x59de16;return _0x1ea917&&_0x1ea917[_0x86c5a2(0x222)]?_0x1ea917:{'default':_0x1ea917};};Object['defineProperty'](exports,a297_0x59de16(0x222),{'value':!![]}),exports[a297_0x59de16(0x1b6)]=exports[a297_0x59de16(0x203)]=exports[a297_0x59de16(0x1cf)]=void 0x0;const socket_io_1=require('socket.io'),admin_ui_1=require(a297_0x59de16(0x1ef)),jsonwebtoken_1=require(a297_0x59de16(0x20c)),AppError_1=__importDefault(require(a297_0x59de16(0x1e4))),logger_1=require('../utils/logger'),User_1=__importDefault(require(a297_0x59de16(0x1d6))),Queue_1=__importDefault(require('../models/Queue')),Ticket_1=__importDefault(require(a297_0x59de16(0x232))),auth_1=__importDefault(require(a297_0x59de16(0x1ec))),counter_1=require(a297_0x59de16(0x23d)),UserSocketSession_1=__importDefault(require(a297_0x59de16(0x1ee))),CheckSettings_1=require(a297_0x59de16(0x204));let io;const joinTicketChannel=async(_0x1b602f,_0x32dbf1,_0x320619,_0x21996e)=>{const _0x1b2189=a297_0x59de16,_0x3399e1=_0x21996e['incrementCounter'](_0x1b2189(0x220)+_0x32dbf1);_0x3399e1===0x1&&_0x1b602f[_0x1b2189(0x20f)](_0x32dbf1),logger_1['logger'][_0x1b2189(0x1d5)](_0x1b2189(0x245)+_0x3399e1+_0x1b2189(0x1f1)+_0x32dbf1+_0x1b2189(0x1bb)+_0x320619['id']);},initIO=_0x83f07=>{const _0x5ca060=a297_0x59de16;return io=new socket_io_1[(_0x5ca060(0x1ed))](_0x83f07,{'cors':{'origin':process['env'][_0x5ca060(0x205)]}}),process[_0x5ca060(0x1dd)][_0x5ca060(0x1ff)]&&JSON[_0x5ca060(0x1e0)](process[_0x5ca060(0x1dd)]['SOCKET_ADMIN'])&&User_1['default'][_0x5ca060(0x1d4)](0x1)[_0x5ca060(0x1d1)](_0x3f265d=>{const _0x3449e1=_0x5ca060;(0x0,admin_ui_1[_0x3449e1(0x218)])(io,{'auth':{'type':_0x3449e1(0x20e),'username':_0x3f265d['email'],'password':_0x3f265d[_0x3449e1(0x208)]},'mode':'development'});}),UserSocketSession_1[_0x5ca060(0x1d3)][_0x5ca060(0x242)]({'active':![]},{'where':{'active':!![]}})['then'](_0x5d163f=>{const _0x58d2d9=_0x5ca060;logger_1[_0x58d2d9(0x23c)]['debug'](_0x58d2d9(0x1fe));}),io['on'](_0x5ca060(0x1f3),async _0x5520da=>{const _0x1f3ed3=_0x5ca060;logger_1[_0x1f3ed3(0x23c)]['info'](_0x1f3ed3(0x226)+_0x5520da['id']);const {token:_0x45d5c9}=_0x5520da[_0x1f3ed3(0x213)][_0x1f3ed3(0x1be)];let _0x3b235b=null;try{_0x3b235b=(0x0,jsonwebtoken_1[_0x1f3ed3(0x22e)])(_0x45d5c9,auth_1[_0x1f3ed3(0x1d3)][_0x1f3ed3(0x1e3)]),logger_1[_0x1f3ed3(0x23c)]['debug'](_0x3b235b,_0x1f3ed3(0x1d0));}catch(_0x4ba34d){return logger_1[_0x1f3ed3(0x23c)][_0x1f3ed3(0x1d5)](_0x1f3ed3(0x21a)+_0x4ba34d?.[_0x1f3ed3(0x1c1)]),_0x5520da[_0x1f3ed3(0x229)](),io;}const _0x115591=new counter_1['CounterManager']();let _0x9ccede=null;const _0x2d7976=_0x3b235b['id'];if(_0x2d7976&&_0x2d7976!==_0x1f3ed3(0x1c3)&&_0x2d7976!==_0x1f3ed3(0x1d9)){_0x9ccede=await User_1[_0x1f3ed3(0x1d3)][_0x1f3ed3(0x1d4)](_0x2d7976,{'include':[Queue_1[_0x1f3ed3(0x1d3)]]});if(_0x9ccede)_0x9ccede[_0x1f3ed3(0x1c5)]=!![],await _0x9ccede['save']();else return logger_1['logger'][_0x1f3ed3(0x1e1)](_0x1f3ed3(0x22f)+_0x2d7976+'\x20not\x20found'),_0x5520da['disconnect'](),io;}else return logger_1[_0x1f3ed3(0x23c)][_0x1f3ed3(0x1e1)](_0x1f3ed3(0x1d7)),_0x5520da[_0x1f3ed3(0x229)](),io;return UserSocketSession_1[_0x1f3ed3(0x1d3)][_0x1f3ed3(0x1fd)]({'id':_0x5520da['id'],'userId':_0x2d7976,'active':!![]})['then'](_0x4f2285=>{const _0x2488c6=_0x1f3ed3;logger_1[_0x2488c6(0x23c)][_0x2488c6(0x1d5)](_0x2488c6(0x1cc)+_0x5520da['id']+_0x2488c6(0x235)+_0x2d7976);}),_0x5520da['on'](_0x1f3ed3(0x229),async()=>{const _0x225c84=_0x1f3ed3;UserSocketSession_1['default'][_0x225c84(0x242)]({'active':![]},{'where':{'id':_0x5520da['id']}})[_0x225c84(0x1d1)](()=>{const _0x3f5974=_0x225c84;logger_1[_0x3f5974(0x23c)]['debug'](_0x3f5974(0x1df)+_0x5520da['id']+_0x3f5974(0x235)+_0x2d7976);});}),_0x5520da[_0x1f3ed3(0x20f)](_0x1f3ed3(0x1fc)+_0x9ccede[_0x1f3ed3(0x1fb)]+_0x1f3ed3(0x225)),_0x5520da[_0x1f3ed3(0x20f)](_0x1f3ed3(0x244)+_0x9ccede['id']),_0x9ccede[_0x1f3ed3(0x211)]&&_0x5520da[_0x1f3ed3(0x20f)](_0x1f3ed3(0x211)),_0x5520da['on'](_0x1f3ed3(0x1c6),async _0x507c1c=>{const _0x21b099=_0x1f3ed3;try{logger_1[_0x21b099(0x23c)][_0x21b099(0x1e1)](_0x21b099(0x22b)+_0x9ccede['id']+_0x21b099(0x1fa)+_0x507c1c),_0x5520da['join'](_0x507c1c),_0x5520da[_0x21b099(0x1eb)](_0x21b099(0x23b),{'ticketId':_0x507c1c,'timestamp':new Date()['toISOString'](),'success':!![]});}catch(_0x462a5f){logger_1['logger'][_0x21b099(0x234)]('Error\x20joining\x20ticket\x20room\x20'+_0x507c1c+':\x20'+_0x462a5f[_0x21b099(0x1c1)]),_0x5520da['emit'](_0x21b099(0x23b),{'ticketId':_0x507c1c,'timestamp':new Date()[_0x21b099(0x20d)](),'success':![],'error':_0x462a5f[_0x21b099(0x1c1)]});}}),_0x5520da['on'](_0x1f3ed3(0x1b7),async _0x1ed25a=>{const _0xc876ab=_0x1f3ed3;try{const {ticketId:_0x1f6008}=_0x1ed25a;logger_1[_0xc876ab(0x23c)][_0xc876ab(0x1e1)](_0xc876ab(0x23a)+_0x1f6008+_0xc876ab(0x21f)+_0x9ccede['id']),_0x5520da[_0xc876ab(0x1eb)](_0xc876ab(0x1fc)+_0x9ccede[_0xc876ab(0x1fb)]+_0xc876ab(0x1c8),{'ticketId':parseInt(_0x1f6008),'presence':_0xc876ab(0x1f5),'isTest':!![],'timestamp':new Date()['toISOString']()}),setTimeout(()=>{const _0x1d51a0=_0xc876ab;_0x5520da[_0x1d51a0(0x1eb)](_0x1d51a0(0x1fc)+_0x9ccede['companyId']+_0x1d51a0(0x1c8),{'ticketId':parseInt(_0x1f6008),'presence':'recording','isTest':!![],'timestamp':new Date()[_0x1d51a0(0x20d)]()});},0x7d0),setTimeout(()=>{const _0x4111a7=_0xc876ab;_0x5520da['emit'](_0x4111a7(0x1fc)+_0x9ccede[_0x4111a7(0x1fb)]+_0x4111a7(0x1c8),{'ticketId':parseInt(_0x1f6008),'presence':_0x4111a7(0x230),'isTest':!![],'timestamp':new Date()[_0x4111a7(0x20d)]()}),logger_1['logger']['info']('Sent\x20test\x20presence\x20sequence\x20for\x20ticket\x20'+_0x1f6008);},0xfa0);}catch(_0x4baaf8){logger_1[_0xc876ab(0x23c)]['error'](_0xc876ab(0x239)+_0x4baaf8['message']);}}),_0x5520da['on'](_0x1f3ed3(0x233),async _0x20b65b=>{const _0x3073b5=_0x1f3ed3;if(!_0x20b65b||_0x20b65b===_0x3073b5(0x1c3))return;Ticket_1[_0x3073b5(0x1d3)]['findByPk'](_0x20b65b)['then'](async _0x7f27b=>{const _0x4bd21d=_0x3073b5;if(_0x7f27b&&_0x7f27b[_0x4bd21d(0x1fb)]===_0x9ccede[_0x4bd21d(0x1fb)]&&(_0x7f27b[_0x4bd21d(0x20b)]===_0x9ccede['id']||_0x9ccede[_0x4bd21d(0x1d2)]===_0x4bd21d(0x201)))joinTicketChannel(_0x5520da,_0x20b65b,_0x9ccede,_0x115591),_0x5520da[_0x4bd21d(0x20f)](_0x4bd21d(0x220)+_0x20b65b+_0x4bd21d(0x1c8)),logger_1['logger']['debug'](_0x4bd21d(0x22b)+_0x9ccede['id']+'\x20joined\x20presence\x20channel\x20for\x20ticket\x20'+_0x20b65b);else{if(_0x7f27b['isGroup']&&await(0x0,CheckSettings_1[_0x4bd21d(0x1ca)])(_0x9ccede['companyId'],_0x4bd21d(0x1b5),'disabled')===_0x4bd21d(0x209)){let _0x2192f0=![];_0x9ccede[_0x4bd21d(0x236)][_0x4bd21d(0x1c0)](_0x160e83=>{const _0x3dbe88=_0x4bd21d;_0x160e83['id']===_0x7f27b[_0x3dbe88(0x1e5)]&&(_0x2192f0=!![]);}),_0x2192f0?(joinTicketChannel(_0x5520da,_0x20b65b,_0x9ccede,_0x115591),_0x5520da[_0x4bd21d(0x20f)]('ticket-'+_0x20b65b+_0x4bd21d(0x1c8)),logger_1[_0x4bd21d(0x23c)][_0x4bd21d(0x1d5)](_0x4bd21d(0x22b)+_0x9ccede['id']+_0x4bd21d(0x243)+_0x20b65b)):logger_1[_0x4bd21d(0x23c)][_0x4bd21d(0x1e1)]('Invalid\x20attempt\x20to\x20join\x20channel\x20of\x20ticket\x20'+_0x20b65b+_0x4bd21d(0x1bb)+_0x9ccede['id']);}else logger_1[_0x4bd21d(0x23c)]['info'](_0x4bd21d(0x1e9)+_0x20b65b+'\x20by\x20user\x20'+_0x9ccede['id']);}},_0x28d289=>{const _0x390983=_0x3073b5;logger_1[_0x390983(0x23c)][_0x390983(0x234)](_0x28d289,_0x390983(0x1da)+_0x20b65b);});}),_0x5520da['on'](_0x1f3ed3(0x1cd),async _0x5ef321=>{const _0x5da308=_0x1f3ed3;if(!_0x5ef321||_0x5ef321===_0x5da308(0x1c3))return;const _0x282450=_0x115591['decrementCounter'](_0x5da308(0x220)+_0x5ef321);_0x282450===0x0&&(_0x5520da[_0x5da308(0x223)](_0x5ef321),_0x5520da[_0x5da308(0x223)]('ticket-'+_0x5ef321+_0x5da308(0x1c8))),logger_1['logger'][_0x5da308(0x1d5)](_0x5da308(0x207)+_0x282450+_0x5da308(0x1f1)+_0x5ef321+_0x5da308(0x1bb)+_0x9ccede['id']);}),_0x5520da['on'](_0x1f3ed3(0x1f0),async()=>{const _0x1f5bad=_0x1f3ed3,_0x47ac09=_0x115591[_0x1f5bad(0x23f)](_0x1f5bad(0x215));_0x47ac09===0x1&&(_0x9ccede['profile']===_0x1f5bad(0x201)?_0x5520da['join'](_0x1f5bad(0x1fc)+_0x9ccede[_0x1f5bad(0x1fb)]+_0x1f5bad(0x238)):_0x9ccede[_0x1f5bad(0x236)][_0x1f5bad(0x1c0)](_0x2033df=>{const _0x4e68ff=_0x1f5bad;logger_1[_0x4e68ff(0x23c)][_0x4e68ff(0x1d5)](_0x4e68ff(0x22b)+_0x9ccede['id']+_0x4e68ff(0x1e6)+_0x9ccede[_0x4e68ff(0x1fb)]+_0x4e68ff(0x22d)+_0x2033df['id']+'\x20channel.'),_0x5520da['join'](_0x4e68ff(0x219)+_0x2033df['id']+_0x4e68ff(0x238));})),logger_1[_0x1f5bad(0x23c)]['debug'](_0x1f5bad(0x206)+_0x47ac09+']:\x20User:\x20'+_0x9ccede['id']);}),_0x5520da['on'](_0x1f3ed3(0x1f7),async()=>{const _0x2571d6=_0x1f3ed3,_0x5541a2=_0x115591[_0x2571d6(0x21c)](_0x2571d6(0x215));_0x5541a2===0x0&&(_0x9ccede[_0x2571d6(0x1d2)]===_0x2571d6(0x201)?_0x5520da['leave']('company-'+_0x9ccede[_0x2571d6(0x1fb)]+_0x2571d6(0x238)):_0x9ccede[_0x2571d6(0x236)][_0x2571d6(0x1c0)](_0x36fc0b=>{const _0x4db49c=_0x2571d6;logger_1[_0x4db49c(0x23c)][_0x4db49c(0x1d5)](_0x4db49c(0x22b)+_0x9ccede['id']+_0x4db49c(0x1e6)+_0x9ccede['companyId']+_0x4db49c(0x231)+_0x36fc0b['id']+_0x4db49c(0x1f4)),_0x5520da[_0x4db49c(0x223)](_0x4db49c(0x219)+_0x36fc0b['id']+_0x4db49c(0x238));})),logger_1['logger'][_0x2571d6(0x1d5)](_0x2571d6(0x210)+_0x5541a2+_0x2571d6(0x1b3)+_0x9ccede['id']);}),_0x5520da['on']('joinTickets',_0x5a67dc=>{const _0x5b12eb=_0x1f3ed3;if(_0x115591[_0x5b12eb(0x23f)](_0x5b12eb(0x212)+_0x5a67dc)===0x1){if(_0x9ccede['profile']===_0x5b12eb(0x201))logger_1['logger'][_0x5b12eb(0x1d5)]('Admin\x20'+_0x9ccede['id']+_0x5b12eb(0x1e6)+_0x9ccede[_0x5b12eb(0x1fb)]+_0x5b12eb(0x1c7)+_0x5a67dc+_0x5b12eb(0x216)),_0x5520da[_0x5b12eb(0x20f)](_0x5b12eb(0x1fc)+_0x9ccede[_0x5b12eb(0x1fb)]+'-'+_0x5a67dc);else _0x5a67dc===_0x5b12eb(0x237)?_0x9ccede[_0x5b12eb(0x236)][_0x5b12eb(0x1c0)](_0x56224c=>{const _0x398361=_0x5b12eb;logger_1[_0x398361(0x23c)][_0x398361(0x1d5)](_0x398361(0x22b)+_0x9ccede['id']+_0x398361(0x1e6)+_0x9ccede[_0x398361(0x1fb)]+_0x398361(0x22d)+_0x56224c['id']+_0x398361(0x21e)),_0x5520da[_0x398361(0x20f)](_0x398361(0x219)+_0x56224c['id']+_0x398361(0x1c2));}):logger_1['logger']['debug'](_0x5b12eb(0x22b)+_0x9ccede['id']+_0x5b12eb(0x1dc)+_0x5a67dc);}}),_0x5520da['on'](_0x1f3ed3(0x1de),_0x4f92bd=>{const _0x2bdf56=_0x1f3ed3;if(_0x115591[_0x2bdf56(0x21c)]('status-'+_0x4f92bd)===0x0){if(_0x9ccede[_0x2bdf56(0x1d2)]==='admin')logger_1[_0x2bdf56(0x23c)][_0x2bdf56(0x1d5)](_0x2bdf56(0x1bf)+_0x9ccede['id']+_0x2bdf56(0x1e6)+_0x9ccede['companyId']+'\x20leaved\x20'+_0x4f92bd+_0x2bdf56(0x216)),_0x5520da[_0x2bdf56(0x223)](_0x2bdf56(0x1fc)+_0x9ccede['companyId']+'-'+_0x4f92bd);else _0x4f92bd==='pending'&&_0x9ccede[_0x2bdf56(0x236)][_0x2bdf56(0x1c0)](_0xfd0d01=>{const _0x2db4e9=_0x2bdf56;logger_1[_0x2db4e9(0x23c)][_0x2db4e9(0x1d5)](_0x2db4e9(0x22b)+_0x9ccede['id']+_0x2db4e9(0x1e6)+_0x9ccede['companyId']+_0x2db4e9(0x231)+_0xfd0d01['id']+_0x2db4e9(0x21e)),_0x5520da[_0x2db4e9(0x223)]('queue-'+_0xfd0d01['id']+_0x2db4e9(0x1c2));});}}),_0x5520da['on'](_0x1f3ed3(0x227),()=>{const _0x27bd98=_0x1f3ed3,_0x49087d=Array[_0x27bd98(0x1b4)](_0x5520da[_0x27bd98(0x246)]);_0x5520da['emit'](_0x27bd98(0x1ce),{'socketId':_0x5520da['id'],'userId':_0x9ccede['id'],'companyId':_0x9ccede[_0x27bd98(0x1fb)],'connectedRooms':_0x49087d,'timestamp':new Date()[_0x27bd98(0x20d)]()}),logger_1['logger'][_0x27bd98(0x1e1)](_0x27bd98(0x1b9)+_0x9ccede['id']);}),_0x5520da[_0x1f3ed3(0x1eb)](_0x1f3ed3(0x1cb)),io;}),io;};exports['initIO']=initIO;function a297_0xe995(_0x595cde,_0x47a408){const _0x2a5539=a297_0x56e6();return a297_0xe995=function(_0x159a5d,_0x21dec8){_0x159a5d=_0x159a5d-0x1b3;let _0x56e66a=_0x2a5539[_0x159a5d];return _0x56e66a;},a297_0xe995(_0x595cde,_0x47a408);}const emitPresence=(_0x26b7dd,_0x31a5e0,_0x52db02)=>{const _0x21da2f=a297_0x59de16;if(!io){logger_1[_0x21da2f(0x23c)][_0x21da2f(0x234)](_0x21da2f(0x1c9));return;}logger_1[_0x21da2f(0x23c)][_0x21da2f(0x1e1)](_0x21da2f(0x1e2)+_0x52db02+_0x21da2f(0x1bc)+_0x31a5e0+_0x21da2f(0x1f6)+_0x26b7dd);const _0x2f37ae=[_0x21da2f(0x220)+_0x31a5e0+_0x21da2f(0x1c8),_0x21da2f(0x220)+_0x31a5e0,_0x31a5e0[_0x21da2f(0x1ea)](),_0x21da2f(0x1fc)+_0x26b7dd+_0x21da2f(0x20a),_0x21da2f(0x1fc)+_0x26b7dd+_0x21da2f(0x1c2)];logger_1['logger']['debug'](_0x21da2f(0x217)+_0x2f37ae[_0x21da2f(0x20f)](',\x20')),io['to'](_0x21da2f(0x1fc)+_0x26b7dd+'-mainchannel')[_0x21da2f(0x1eb)](_0x21da2f(0x1fc)+_0x26b7dd+_0x21da2f(0x1c8),{'ticketId':_0x31a5e0,'presence':_0x52db02,'timestamp':new Date()[_0x21da2f(0x20d)]()}),logger_1[_0x21da2f(0x23c)]['debug']('Presence\x20event\x20'+_0x52db02+'\x20emitted\x20for\x20ticket\x20'+_0x31a5e0);try{const _0x3359d2=io[_0x21da2f(0x1f8)][_0x21da2f(0x1e7)][_0x21da2f(0x246)][_0x21da2f(0x240)](_0x21da2f(0x1fc)+_0x26b7dd+_0x21da2f(0x225)),_0x35b5c6=io['sockets'][_0x21da2f(0x1e7)][_0x21da2f(0x246)]['get'](_0x31a5e0['toString']());logger_1[_0x21da2f(0x23c)][_0x21da2f(0x1e1)](_0x21da2f(0x21d)+(_0x3359d2?_0x3359d2[_0x21da2f(0x1db)]:0x0)+_0x21da2f(0x224)+(_0x21da2f(0x22c)+(_0x35b5c6?_0x35b5c6[_0x21da2f(0x1db)]:0x0)+'\x20clients'));}catch(_0x3ebdf7){logger_1[_0x21da2f(0x23c)][_0x21da2f(0x234)](_0x21da2f(0x241)+_0x3ebdf7['message']);}};exports[a297_0x59de16(0x203)]=emitPresence;const getIO=()=>{const _0x2208af=a297_0x59de16;if(!io)throw new AppError_1['default'](_0x2208af(0x21b));return io;};exports[a297_0x59de16(0x1b6)]=getIO;