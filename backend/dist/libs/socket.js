const a294_0x219b86=a294_0x4af9;(function(_0x1e6191,_0x7c503c){const _0x1786e9=a294_0x4af9,_0x2ff06c=_0x1e6191();while(!![]){try{const _0x3d29d3=parseInt(_0x1786e9(0x143))/0x1+-parseInt(_0x1786e9(0x10d))/0x2*(-parseInt(_0x1786e9(0x154))/0x3)+-parseInt(_0x1786e9(0x16e))/0x4*(-parseInt(_0x1786e9(0x16a))/0x5)+-parseInt(_0x1786e9(0x195))/0x6+parseInt(_0x1786e9(0x13d))/0x7+-parseInt(_0x1786e9(0x196))/0x8*(-parseInt(_0x1786e9(0x151))/0x9)+-parseInt(_0x1786e9(0x134))/0xa*(parseInt(_0x1786e9(0x129))/0xb);if(_0x3d29d3===_0x7c503c)break;else _0x2ff06c['push'](_0x2ff06c['shift']());}catch(_0x3f1d18){_0x2ff06c['push'](_0x2ff06c['shift']());}}}(a294_0x385f,0xcc2e9));const a294_0x3eb8fc=(function(){let _0x160462=!![];return function(_0x131b1f,_0x213ef4){const _0x7cd7af=_0x160462?function(){if(_0x213ef4){const _0x1ee88b=_0x213ef4['apply'](_0x131b1f,arguments);return _0x213ef4=null,_0x1ee88b;}}:function(){};return _0x160462=![],_0x7cd7af;};}()),a294_0x38d885=a294_0x3eb8fc(this,function(){const _0x568874=a294_0x4af9;return a294_0x38d885[_0x568874(0x172)]()[_0x568874(0x18a)](_0x568874(0x14c))[_0x568874(0x172)]()[_0x568874(0x179)](a294_0x38d885)[_0x568874(0x18a)](_0x568874(0x14c));});a294_0x38d885();'use strict';var __importDefault=this&&this[a294_0x219b86(0x15b)]||function(_0x474c8f){const _0x2610b2=a294_0x219b86;return _0x474c8f&&_0x474c8f[_0x2610b2(0x12b)]?_0x474c8f:{'default':_0x474c8f};};Object[a294_0x219b86(0x150)](exports,a294_0x219b86(0x12b),{'value':!![]}),exports[a294_0x219b86(0x173)]=exports['emitPresence']=exports[a294_0x219b86(0x181)]=void 0x0;const socket_io_1=require(a294_0x219b86(0x192)),admin_ui_1=require(a294_0x219b86(0x13f)),jsonwebtoken_1=require('jsonwebtoken'),AppError_1=__importDefault(require('../errors/AppError')),logger_1=require(a294_0x219b86(0x197)),User_1=__importDefault(require(a294_0x219b86(0x18c))),Queue_1=__importDefault(require('../models/Queue')),Ticket_1=__importDefault(require(a294_0x219b86(0x177))),auth_1=__importDefault(require(a294_0x219b86(0x166))),counter_1=require('./counter'),UserSocketSession_1=__importDefault(require(a294_0x219b86(0x119))),CheckSettings_1=require('../helpers/CheckSettings');let io;const joinTicketChannel=async(_0x41b079,_0x127393,_0x910761,_0x375a23)=>{const _0x52efb2=a294_0x219b86,_0x41f8f1=_0x375a23['incrementCounter']('ticket-'+_0x127393);_0x41f8f1===0x1&&_0x41b079[_0x52efb2(0x152)](_0x127393),logger_1['logger']['debug'](_0x52efb2(0x16b)+_0x41f8f1+_0x52efb2(0x126)+_0x127393+'\x20by\x20user\x20'+_0x910761['id']);},initIO=_0x533e68=>{const _0x2eb9b9=a294_0x219b86;return io=new socket_io_1[(_0x2eb9b9(0x155))](_0x533e68,{'cors':{'origin':process[_0x2eb9b9(0x17d)][_0x2eb9b9(0x114)]}}),process[_0x2eb9b9(0x17d)][_0x2eb9b9(0x14f)]&&JSON[_0x2eb9b9(0x15d)](process[_0x2eb9b9(0x17d)][_0x2eb9b9(0x14f)])&&User_1[_0x2eb9b9(0x142)][_0x2eb9b9(0x141)](0x1)[_0x2eb9b9(0x185)](_0x4392cf=>{const _0xff1f9f=_0x2eb9b9;(0x0,admin_ui_1[_0xff1f9f(0x190)])(io,{'auth':{'type':_0xff1f9f(0x131),'username':_0x4392cf['email'],'password':_0x4392cf[_0xff1f9f(0x162)]},'mode':_0xff1f9f(0x158)});}),UserSocketSession_1[_0x2eb9b9(0x142)][_0x2eb9b9(0x14d)]({'active':![]},{'where':{'active':!![]}})['then'](_0x5ba1c8=>{const _0x135bcb=_0x2eb9b9;logger_1[_0x135bcb(0x153)][_0x135bcb(0x13a)](_0x135bcb(0x128));}),io['on']('connection',async _0x17584c=>{const _0x395def=_0x2eb9b9;logger_1[_0x395def(0x153)]['info']('Client\x20Connected:\x20'+_0x17584c['id']);const {token:_0x4465bf}=_0x17584c[_0x395def(0x127)][_0x395def(0x15e)];let _0x353413=null;try{_0x353413=(0x0,jsonwebtoken_1['verify'])(_0x4465bf,auth_1[_0x395def(0x142)][_0x395def(0x18b)]),logger_1[_0x395def(0x153)]['debug'](_0x353413,_0x395def(0x116));}catch(_0x595219){return logger_1['logger'][_0x395def(0x13a)]('Error\x20decoding\x20token:\x20'+_0x595219?.[_0x395def(0x167)]),_0x17584c[_0x395def(0x117)](),io;}const _0x22a03c=new counter_1[(_0x395def(0x11e))]();let _0x1dad82=null;const _0xa2d1fc=_0x353413['id'];if(_0xa2d1fc&&_0xa2d1fc!==_0x395def(0x12a)&&_0xa2d1fc!==_0x395def(0x163)){_0x1dad82=await User_1[_0x395def(0x142)]['findByPk'](_0xa2d1fc,{'include':[Queue_1['default']]});if(_0x1dad82)_0x1dad82[_0x395def(0x164)]=!![],await _0x1dad82['save']();else return logger_1[_0x395def(0x153)][_0x395def(0x18f)]('onConnect:\x20User\x20'+_0xa2d1fc+_0x395def(0x12f)),_0x17584c[_0x395def(0x117)](),io;}else return logger_1[_0x395def(0x153)][_0x395def(0x18f)](_0x395def(0x12e)),_0x17584c[_0x395def(0x117)](),io;return UserSocketSession_1['default'][_0x395def(0x11a)]({'id':_0x17584c['id'],'userId':_0xa2d1fc,'active':!![]})[_0x395def(0x185)](_0x3f68a2=>{const _0xd9d1ea=_0x395def;logger_1[_0xd9d1ea(0x153)]['debug'](_0xd9d1ea(0x11f)+_0x17584c['id']+_0xd9d1ea(0x171)+_0xa2d1fc);}),_0x17584c['on'](_0x395def(0x117),async()=>{const _0x47e128=_0x395def;UserSocketSession_1[_0x47e128(0x142)]['update']({'active':![]},{'where':{'id':_0x17584c['id']}})[_0x47e128(0x185)](()=>{const _0x10a596=_0x47e128;logger_1['logger'][_0x10a596(0x13a)](_0x10a596(0x112)+_0x17584c['id']+_0x10a596(0x171)+_0xa2d1fc);});}),_0x17584c['join'](_0x395def(0x10f)+_0x1dad82[_0x395def(0x159)]+_0x395def(0x16c)),_0x17584c[_0x395def(0x152)]('user-'+_0x1dad82['id']),_0x1dad82[_0x395def(0x133)]&&_0x17584c[_0x395def(0x152)]('super'),_0x17584c['on']('joinTicket',async _0x61fbc4=>{const _0xb11708=_0x395def;try{logger_1['logger'][_0xb11708(0x18f)](_0xb11708(0x194)+_0x1dad82['id']+_0xb11708(0x125)+_0x61fbc4),_0x17584c['join'](_0x61fbc4),_0x17584c['emit'](_0xb11708(0x149),{'ticketId':_0x61fbc4,'timestamp':new Date()[_0xb11708(0x13b)](),'success':!![]});}catch(_0x1c5a29){logger_1['logger']['error']('Error\x20joining\x20ticket\x20room\x20'+_0x61fbc4+':\x20'+_0x1c5a29['message']),_0x17584c[_0xb11708(0x11d)](_0xb11708(0x149),{'ticketId':_0x61fbc4,'timestamp':new Date()['toISOString'](),'success':![],'error':_0x1c5a29[_0xb11708(0x167)]});}}),_0x17584c['on'](_0x395def(0x184),async _0x31d3de=>{const _0x7f0f06=_0x395def;try{const {ticketId:_0x51f7f6}=_0x31d3de;logger_1[_0x7f0f06(0x153)][_0x7f0f06(0x18f)](_0x7f0f06(0x178)+_0x51f7f6+_0x7f0f06(0x15a)+_0x1dad82['id']),_0x17584c['emit'](_0x7f0f06(0x10f)+_0x1dad82[_0x7f0f06(0x159)]+_0x7f0f06(0x12d),{'ticketId':parseInt(_0x51f7f6),'presence':_0x7f0f06(0x124),'isTest':!![],'timestamp':new Date()[_0x7f0f06(0x13b)]()}),setTimeout(()=>{const _0x3a95fc=_0x7f0f06;_0x17584c[_0x3a95fc(0x11d)](_0x3a95fc(0x10f)+_0x1dad82[_0x3a95fc(0x159)]+_0x3a95fc(0x12d),{'ticketId':parseInt(_0x51f7f6),'presence':_0x3a95fc(0x110),'isTest':!![],'timestamp':new Date()[_0x3a95fc(0x13b)]()});},0x7d0),setTimeout(()=>{const _0x913fd4=_0x7f0f06;_0x17584c[_0x913fd4(0x11d)](_0x913fd4(0x10f)+_0x1dad82[_0x913fd4(0x159)]+'-presence',{'ticketId':parseInt(_0x51f7f6),'presence':_0x913fd4(0x14e),'isTest':!![],'timestamp':new Date()[_0x913fd4(0x13b)]()}),logger_1[_0x913fd4(0x153)][_0x913fd4(0x18f)](_0x913fd4(0x170)+_0x51f7f6);},0xfa0);}catch(_0x6608af){logger_1['logger'][_0x7f0f06(0x135)]('Error\x20in\x20checkPresence:\x20'+_0x6608af[_0x7f0f06(0x167)]);}}),_0x17584c['on'](_0x395def(0x161),async _0x159622=>{const _0x14b090=_0x395def;if(!_0x159622||_0x159622===_0x14b090(0x12a))return;Ticket_1['default']['findByPk'](_0x159622)[_0x14b090(0x185)](async _0x4a91ef=>{const _0x521a4b=_0x14b090;if(_0x4a91ef&&_0x4a91ef['companyId']===_0x1dad82[_0x521a4b(0x159)]&&(_0x4a91ef[_0x521a4b(0x193)]===_0x1dad82['id']||_0x1dad82[_0x521a4b(0x132)]===_0x521a4b(0x157)))joinTicketChannel(_0x17584c,_0x159622,_0x1dad82,_0x22a03c),_0x17584c['join'](_0x521a4b(0x120)+_0x159622+_0x521a4b(0x12d)),logger_1[_0x521a4b(0x153)]['debug'](_0x521a4b(0x194)+_0x1dad82['id']+_0x521a4b(0x15f)+_0x159622);else{if(_0x4a91ef[_0x521a4b(0x165)]&&await(0x0,CheckSettings_1[_0x521a4b(0x14b)])(_0x1dad82['companyId'],_0x521a4b(0x13c),_0x521a4b(0x111))===_0x521a4b(0x12c)){let _0x777c34=![];_0x1dad82['queues'][_0x521a4b(0x11c)](_0x40fb2a=>{const _0x29ab68=_0x521a4b;_0x40fb2a['id']===_0x4a91ef[_0x29ab68(0x122)]&&(_0x777c34=!![]);}),_0x777c34?(joinTicketChannel(_0x17584c,_0x159622,_0x1dad82,_0x22a03c),_0x17584c[_0x521a4b(0x152)](_0x521a4b(0x120)+_0x159622+_0x521a4b(0x12d)),logger_1['logger'][_0x521a4b(0x13a)](_0x521a4b(0x194)+_0x1dad82['id']+_0x521a4b(0x15f)+_0x159622)):logger_1[_0x521a4b(0x153)][_0x521a4b(0x18f)](_0x521a4b(0x156)+_0x159622+'\x20by\x20user\x20'+_0x1dad82['id']);}else logger_1[_0x521a4b(0x153)]['info']('Invalid\x20attempt\x20to\x20join\x20channel\x20of\x20ticket\x20'+_0x159622+'\x20by\x20user\x20'+_0x1dad82['id']);}},_0x496a36=>{const _0x8bf5e3=_0x14b090;logger_1[_0x8bf5e3(0x153)][_0x8bf5e3(0x135)](_0x496a36,'Error\x20fetching\x20ticket\x20'+_0x159622);});}),_0x17584c['on'](_0x395def(0x160),async _0x1c3045=>{const _0x103cb0=_0x395def;if(!_0x1c3045||_0x1c3045===_0x103cb0(0x12a))return;const _0x499f83=_0x22a03c[_0x103cb0(0x183)](_0x103cb0(0x120)+_0x1c3045);_0x499f83===0x0&&(_0x17584c['leave'](_0x1c3045),_0x17584c[_0x103cb0(0x144)]('ticket-'+_0x1c3045+_0x103cb0(0x12d))),logger_1[_0x103cb0(0x153)]['debug']('leaveChatbox['+_0x499f83+']:\x20Channel:\x20'+_0x1c3045+'\x20by\x20user\x20'+_0x1dad82['id']);}),_0x17584c['on']('joinNotification',async()=>{const _0x2e3d7d=_0x395def,_0x5cf820=_0x22a03c[_0x2e3d7d(0x17b)](_0x2e3d7d(0x180));_0x5cf820===0x1&&(_0x1dad82[_0x2e3d7d(0x132)]===_0x2e3d7d(0x157)?_0x17584c[_0x2e3d7d(0x152)](_0x2e3d7d(0x10f)+_0x1dad82[_0x2e3d7d(0x159)]+_0x2e3d7d(0x14a)):_0x1dad82[_0x2e3d7d(0x123)][_0x2e3d7d(0x11c)](_0x2b6452=>{const _0x15b64e=_0x2e3d7d;logger_1[_0x15b64e(0x153)][_0x15b64e(0x13a)](_0x15b64e(0x194)+_0x1dad82['id']+_0x15b64e(0x10e)+_0x1dad82['companyId']+'\x20joined\x20queue\x20'+_0x2b6452['id']+'\x20channel.'),_0x17584c[_0x15b64e(0x152)](_0x15b64e(0x13e)+_0x2b6452['id']+'-notification');})),logger_1[_0x2e3d7d(0x153)][_0x2e3d7d(0x13a)](_0x2e3d7d(0x17a)+_0x5cf820+']:\x20User:\x20'+_0x1dad82['id']);}),_0x17584c['on'](_0x395def(0x15c),async()=>{const _0x1270ad=_0x395def,_0x183ca9=_0x22a03c['decrementCounter'](_0x1270ad(0x180));_0x183ca9===0x0&&(_0x1dad82[_0x1270ad(0x132)]===_0x1270ad(0x157)?_0x17584c[_0x1270ad(0x144)](_0x1270ad(0x10f)+_0x1dad82[_0x1270ad(0x159)]+_0x1270ad(0x14a)):_0x1dad82[_0x1270ad(0x123)]['forEach'](_0x279233=>{const _0x3a9ab1=_0x1270ad;logger_1[_0x3a9ab1(0x153)]['debug'](_0x3a9ab1(0x194)+_0x1dad82['id']+_0x3a9ab1(0x10e)+_0x1dad82[_0x3a9ab1(0x159)]+_0x3a9ab1(0x17e)+_0x279233['id']+'\x20channel.'),_0x17584c[_0x3a9ab1(0x144)](_0x3a9ab1(0x13e)+_0x279233['id']+_0x3a9ab1(0x14a));})),logger_1[_0x1270ad(0x153)]['debug'](_0x1270ad(0x187)+_0x183ca9+_0x1270ad(0x145)+_0x1dad82['id']);}),_0x17584c['on'](_0x395def(0x140),_0x498bb7=>{const _0x15aeb9=_0x395def;if(_0x22a03c['incrementCounter'](_0x15aeb9(0x174)+_0x498bb7)===0x1){if(_0x1dad82[_0x15aeb9(0x132)]===_0x15aeb9(0x157))logger_1[_0x15aeb9(0x153)][_0x15aeb9(0x13a)]('Admin\x20'+_0x1dad82['id']+_0x15aeb9(0x10e)+_0x1dad82[_0x15aeb9(0x159)]+_0x15aeb9(0x11b)+_0x498bb7+_0x15aeb9(0x130)),_0x17584c[_0x15aeb9(0x152)]('company-'+_0x1dad82[_0x15aeb9(0x159)]+'-'+_0x498bb7);else _0x498bb7==='pending'?_0x1dad82['queues'][_0x15aeb9(0x11c)](_0x3add22=>{const _0x3054e2=_0x15aeb9;logger_1[_0x3054e2(0x153)]['debug']('User\x20'+_0x1dad82['id']+_0x3054e2(0x10e)+_0x1dad82[_0x3054e2(0x159)]+'\x20joined\x20queue\x20'+_0x3add22['id']+_0x3054e2(0x118)),_0x17584c[_0x3054e2(0x152)](_0x3054e2(0x13e)+_0x3add22['id']+_0x3054e2(0x136));}):logger_1[_0x15aeb9(0x153)][_0x15aeb9(0x13a)](_0x15aeb9(0x194)+_0x1dad82['id']+_0x15aeb9(0x168)+_0x498bb7);}}),_0x17584c['on'](_0x395def(0x16f),_0x417fcf=>{const _0x226770=_0x395def;if(_0x22a03c[_0x226770(0x183)](_0x226770(0x174)+_0x417fcf)===0x0){if(_0x1dad82[_0x226770(0x132)]==='admin')logger_1[_0x226770(0x153)][_0x226770(0x13a)](_0x226770(0x176)+_0x1dad82['id']+_0x226770(0x10e)+_0x1dad82[_0x226770(0x159)]+_0x226770(0x139)+_0x417fcf+_0x226770(0x130)),_0x17584c[_0x226770(0x144)]('company-'+_0x1dad82['companyId']+'-'+_0x417fcf);else _0x417fcf===_0x226770(0x191)&&_0x1dad82[_0x226770(0x123)]['forEach'](_0x7bd45b=>{const _0x3dccb9=_0x226770;logger_1[_0x3dccb9(0x153)][_0x3dccb9(0x13a)]('User\x20'+_0x1dad82['id']+_0x3dccb9(0x10e)+_0x1dad82[_0x3dccb9(0x159)]+_0x3dccb9(0x17e)+_0x7bd45b['id']+_0x3dccb9(0x118)),_0x17584c[_0x3dccb9(0x144)](_0x3dccb9(0x13e)+_0x7bd45b['id']+'-pending');});}}),_0x17584c['on']('debugConnection',()=>{const _0x597aa3=_0x395def,_0x1f319d=Array[_0x597aa3(0x115)](_0x17584c[_0x597aa3(0x138)]);_0x17584c[_0x597aa3(0x11d)](_0x597aa3(0x189),{'socketId':_0x17584c['id'],'userId':_0x1dad82['id'],'companyId':_0x1dad82[_0x597aa3(0x159)],'connectedRooms':_0x1f319d,'timestamp':new Date()[_0x597aa3(0x13b)]()}),logger_1[_0x597aa3(0x153)][_0x597aa3(0x18f)]('Debug\x20connection\x20info\x20sent\x20to\x20user\x20'+_0x1dad82['id']);}),_0x17584c[_0x395def(0x11d)](_0x395def(0x147)),io;}),io;};exports[a294_0x219b86(0x181)]=initIO;const emitPresence=(_0x25792b,_0x4b7a96,_0x13b18c)=>{const _0x2899a9=a294_0x219b86;if(!io){logger_1[_0x2899a9(0x153)][_0x2899a9(0x135)]('Socket\x20IO\x20not\x20initialized\x20when\x20trying\x20to\x20emit\x20presence');return;}logger_1[_0x2899a9(0x153)]['info']('Emitting\x20presence\x20event:\x20'+_0x13b18c+_0x2899a9(0x169)+_0x4b7a96+_0x2899a9(0x146)+_0x25792b);const _0x111a22=[_0x2899a9(0x120)+_0x4b7a96+_0x2899a9(0x12d),'ticket-'+_0x4b7a96,_0x4b7a96['toString'](),_0x2899a9(0x10f)+_0x25792b+_0x2899a9(0x16d),'company-'+_0x25792b+_0x2899a9(0x136)];logger_1[_0x2899a9(0x153)][_0x2899a9(0x13a)](_0x2899a9(0x188)+_0x111a22[_0x2899a9(0x152)](',\x20')),io['to'](_0x2899a9(0x10f)+_0x25792b+_0x2899a9(0x16c))[_0x2899a9(0x11d)]('company-'+_0x25792b+_0x2899a9(0x12d),{'ticketId':_0x4b7a96,'presence':_0x13b18c,'timestamp':new Date()['toISOString']()}),logger_1[_0x2899a9(0x153)][_0x2899a9(0x13a)](_0x2899a9(0x18e)+_0x13b18c+_0x2899a9(0x113)+_0x4b7a96);try{const _0x1f6b6f=io[_0x2899a9(0x18d)][_0x2899a9(0x17c)][_0x2899a9(0x138)][_0x2899a9(0x121)]('company-'+_0x25792b+_0x2899a9(0x16c)),_0x3c2a91=io[_0x2899a9(0x18d)][_0x2899a9(0x17c)][_0x2899a9(0x138)]['get'](_0x4b7a96['toString']());logger_1[_0x2899a9(0x153)][_0x2899a9(0x18f)](_0x2899a9(0x182)+(_0x1f6b6f?_0x1f6b6f[_0x2899a9(0x175)]:0x0)+_0x2899a9(0x137)+('Ticket\x20room:\x20'+(_0x3c2a91?_0x3c2a91[_0x2899a9(0x175)]:0x0)+_0x2899a9(0x186)));}catch(_0x36aede){logger_1[_0x2899a9(0x153)][_0x2899a9(0x135)](_0x2899a9(0x148)+_0x36aede[_0x2899a9(0x167)]);}};function a294_0x385f(){const _0x126397=['__esModule','enabled','-presence','onConnect:\x20Missing\x20userId','\x20not\x20found','\x20tickets\x20channel.','basic','profile','super','1947710bdvldA','error','-pending','\x20clients,\x20','rooms','\x20leaved\x20','debug','toISOString','groupsTab','3394937RfQGeZ','queue-','@socket.io/admin-ui','joinTickets','findByPk','default','352307zNlxSX','leave',']:\x20User:\x20','\x20in\x20company\x20','ready','Error\x20counting\x20room\x20clients:\x20','joinedTicket','-notification','GetCompanySetting','(((.+)+)+)+$','update','available','SOCKET_ADMIN','defineProperty','3653955vhLOlj','join','logger','48sKOnJZ','Server','Invalid\x20attempt\x20to\x20join\x20channel\x20of\x20ticket\x20','admin','development','companyId','\x20from\x20user\x20','__importDefault','leaveNotification','parse','query','\x20joined\x20presence\x20channel\x20for\x20ticket\x20','leaveChatBox','joinChatBox','passwordHash','null','online','isGroup','../config/auth','message','\x20cannot\x20subscribe\x20to\x20','\x20for\x20ticket\x20','22840Egnuhp','joinChatbox[','-mainchannel','-open','236oAPqwd','leaveTickets','Sent\x20test\x20presence\x20sequence\x20for\x20ticket\x20','\x20for\x20user\x20','toString','getIO','status-','size','Admin\x20','../models/Ticket','Received\x20checkPresence\x20for\x20ticket\x20','constructor','joinNotification[','incrementCounter','adapter','env','\x20leaved\x20queue\x20','emitPresence','notification','initIO','Socket\x20stats\x20-\x20Main\x20company\x20room:\x20','decrementCounter','checkPresence','then','\x20clients','leaveNotification[','Broadcasting\x20to\x20channels:\x20','debugInfo','search','secret','../models/User','sockets','Presence\x20event\x20','info','instrument','pending','socket.io','userId','User\x20','1841316vcEcfo','8IESWmU','../utils/logger','2494HYHtVp','\x20of\x20company\x20','company-','recording','disabled','finished\x20session\x20','\x20emitted\x20for\x20ticket\x20','FRONTEND_URL','from','io-onConnection:\x20tokenData','disconnect','\x20pending\x20tickets\x20channel.','../models/UserSocketSession','create','\x20joined\x20','forEach','emit','CounterManager','started\x20session\x20','ticket-','get','queueId','queues','composing','\x20joining\x20ticket\x20room:\x20',']:\x20Channel:\x20','handshake','Clossing\x20all\x20socket\x20sessions','22IbwvaW','undefined'];a294_0x385f=function(){return _0x126397;};return a294_0x385f();}exports[a294_0x219b86(0x17f)]=emitPresence;function a294_0x4af9(_0x56d5d5,_0x12743a){const _0x21fa24=a294_0x385f();return a294_0x4af9=function(_0x38d885,_0x3eb8fc){_0x38d885=_0x38d885-0x10d;let _0x385fc1=_0x21fa24[_0x38d885];return _0x385fc1;},a294_0x4af9(_0x56d5d5,_0x12743a);}const getIO=()=>{if(!io)throw new AppError_1['default']('Socket\x20IO\x20not\x20initialized');return io;};exports['getIO']=getIO;