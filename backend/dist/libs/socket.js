const a294_0xb0c137=a294_0x4cfb;(function(_0x22f05a,_0x863acc){const _0x529518=a294_0x4cfb,_0x260c70=_0x22f05a();while(!![]){try{const _0x4efc52=-parseInt(_0x529518(0x11f))/0x1+parseInt(_0x529518(0x157))/0x2*(parseInt(_0x529518(0x144))/0x3)+-parseInt(_0x529518(0x13f))/0x4*(parseInt(_0x529518(0x18d))/0x5)+-parseInt(_0x529518(0x14c))/0x6*(parseInt(_0x529518(0x116))/0x7)+-parseInt(_0x529518(0x121))/0x8*(parseInt(_0x529518(0x183))/0x9)+-parseInt(_0x529518(0x12b))/0xa+parseInt(_0x529518(0x13e))/0xb;if(_0x4efc52===_0x863acc)break;else _0x260c70['push'](_0x260c70['shift']());}catch(_0x3f4520){_0x260c70['push'](_0x260c70['shift']());}}}(a294_0x328c,0x7aacc));const a294_0x5acb82=(function(){let _0xbb161b=!![];return function(_0x3ebeb3,_0x5a720d){const _0x23ff10=_0xbb161b?function(){const _0x169e37=a294_0x4cfb;if(_0x5a720d){const _0xb21f0f=_0x5a720d[_0x169e37(0x162)](_0x3ebeb3,arguments);return _0x5a720d=null,_0xb21f0f;}}:function(){};return _0xbb161b=![],_0x23ff10;};}()),a294_0x25019e=a294_0x5acb82(this,function(){const _0x31b8c5=a294_0x4cfb;return a294_0x25019e[_0x31b8c5(0x12a)]()[_0x31b8c5(0x18c)]('(((.+)+)+)+$')[_0x31b8c5(0x12a)]()[_0x31b8c5(0x133)](a294_0x25019e)[_0x31b8c5(0x18c)](_0x31b8c5(0x127));});a294_0x25019e();function a294_0x328c(){const _0x4afdd3=['\x20tickets\x20channel.','-pending','sockets','get','\x20joined\x20','ticket-','28pQxjUQ','companyId','admin','@socket.io/admin-ui','error','debugInfo','SOCKET_ADMIN','logger','Admin\x20','765183qEKaLO','online','8nhoeMb','\x20of\x20company\x20','CounterManager','debug','size','rooms','(((.+)+)+)+$','Emitting\x20presence\x20event:\x20','../config/auth','toString','4759440pmduLg','company-','from','joinTicket','\x20by\x20user\x20','Invalid\x20attempt\x20to\x20join\x20channel\x20of\x20ticket\x20','\x20for\x20ticket\x20','leaveChatbox[','constructor','create','Socket\x20IO\x20not\x20initialized\x20when\x20trying\x20to\x20emit\x20presence','toISOString','initIO','userId','joinChatBox','save','onConnect:\x20Missing\x20userId','adapter','queueId','28355965kHSDUb','3665972MmVhDd','\x20pending\x20tickets\x20channel.','basic','started\x20session\x20','undefined','247953VPUJYI','Server','../models/Queue',']:\x20User:\x20','\x20channel.','getIO','Presence\x20event\x20','__importDefault','609618bGCugo','status-','pending','disconnect','Clossing\x20all\x20socket\x20sessions','\x20joining\x20ticket\x20room:\x20','\x20emitted\x20for\x20ticket\x20','Error\x20joining\x20ticket\x20room\x20','instrument','then','null','18FMCvLl','-mainchannel','\x20not\x20found','composing','-notification',']:\x20Channel:\x20','joinNotification','Received\x20checkPresence\x20for\x20ticket\x20','joinNotification[','\x20joined\x20presence\x20channel\x20for\x20ticket\x20','\x20leaved\x20queue\x20','apply','leave','../utils/logger','leaveNotification[','queues','./counter','FRONTEND_URL','message','Error\x20counting\x20room\x20clients:\x20','profile','super','forEach','update','-presence','Broadcasting\x20to\x20channels:\x20','io-onConnection:\x20tokenData','emit','info','__esModule','\x20clients','Ticket\x20room:\x20','queue-','groupsTab','incrementCounter','socket.io','\x20for\x20user\x20','enabled','decrementCounter','env','secret','joinTickets','leaveNotification','Error\x20fetching\x20ticket\x20','2296494ptnpQL','user-','jsonwebtoken','../models/Ticket','../models/User','notification','Sent\x20test\x20presence\x20sequence\x20for\x20ticket\x20','checkPresence','verify','search','5rKYyjx','connection','-open','Error\x20in\x20checkPresence:\x20','default','User\x20','../models/UserSocketSession','join','onConnect:\x20User\x20','findByPk','../errors/AppError'];a294_0x328c=function(){return _0x4afdd3;};return a294_0x328c();}'use strict';var __importDefault=this&&this[a294_0xb0c137(0x14b)]||function(_0x2f59d3){const _0x3e48d5=a294_0xb0c137;return _0x2f59d3&&_0x2f59d3[_0x3e48d5(0x174)]?_0x2f59d3:{'default':_0x2f59d3};};Object['defineProperty'](exports,a294_0xb0c137(0x174),{'value':!![]}),exports[a294_0xb0c137(0x149)]=exports['emitPresence']=exports['initIO']=void 0x0;const socket_io_1=require(a294_0xb0c137(0x17a)),admin_ui_1=require(a294_0xb0c137(0x119)),jsonwebtoken_1=require(a294_0xb0c137(0x185)),AppError_1=__importDefault(require(a294_0xb0c137(0x197))),logger_1=require(a294_0xb0c137(0x164)),User_1=__importDefault(require(a294_0xb0c137(0x187))),Queue_1=__importDefault(require(a294_0xb0c137(0x146))),Ticket_1=__importDefault(require(a294_0xb0c137(0x186))),auth_1=__importDefault(require(a294_0xb0c137(0x129))),counter_1=require(a294_0xb0c137(0x167)),UserSocketSession_1=__importDefault(require(a294_0xb0c137(0x193))),CheckSettings_1=require('../helpers/CheckSettings');let io;function a294_0x4cfb(_0x257caa,_0x2654d6){const _0x50dec0=a294_0x328c();return a294_0x4cfb=function(_0x25019e,_0x5acb82){_0x25019e=_0x25019e-0x110;let _0x328cd9=_0x50dec0[_0x25019e];return _0x328cd9;},a294_0x4cfb(_0x257caa,_0x2654d6);}const joinTicketChannel=async(_0x142c4,_0x5b5d86,_0x31a830,_0x581744)=>{const _0x3955a9=a294_0xb0c137,_0x3d87f4=_0x581744[_0x3955a9(0x179)](_0x3955a9(0x115)+_0x5b5d86);_0x3d87f4===0x1&&_0x142c4[_0x3955a9(0x194)](_0x5b5d86),logger_1[_0x3955a9(0x11d)][_0x3955a9(0x124)]('joinChatbox['+_0x3d87f4+']:\x20Channel:\x20'+_0x5b5d86+_0x3955a9(0x12f)+_0x31a830['id']);},initIO=_0x3e0e1f=>{const _0x126f8f=a294_0xb0c137;return io=new socket_io_1[(_0x126f8f(0x145))](_0x3e0e1f,{'cors':{'origin':process[_0x126f8f(0x17e)][_0x126f8f(0x168)]}}),process[_0x126f8f(0x17e)][_0x126f8f(0x11c)]&&JSON['parse'](process[_0x126f8f(0x17e)][_0x126f8f(0x11c)])&&User_1['default']['findByPk'](0x1)[_0x126f8f(0x155)](_0x14401f=>{const _0x18db4f=_0x126f8f;(0x0,admin_ui_1[_0x18db4f(0x154)])(io,{'auth':{'type':_0x18db4f(0x141),'username':_0x14401f['email'],'password':_0x14401f['passwordHash']},'mode':'development'});}),UserSocketSession_1[_0x126f8f(0x191)]['update']({'active':![]},{'where':{'active':!![]}})[_0x126f8f(0x155)](_0x591bc4=>{const _0x2adbbc=_0x126f8f;logger_1[_0x2adbbc(0x11d)][_0x2adbbc(0x124)](_0x2adbbc(0x150));}),io['on'](_0x126f8f(0x18e),async _0x25ffd4=>{const _0xcfcfb7=_0x126f8f;logger_1[_0xcfcfb7(0x11d)][_0xcfcfb7(0x173)]('Client\x20Connected:\x20'+_0x25ffd4['id']);const {token:_0x7ce330}=_0x25ffd4['handshake']['query'];let _0x1ca1cd=null;try{_0x1ca1cd=(0x0,jsonwebtoken_1[_0xcfcfb7(0x18b)])(_0x7ce330,auth_1['default'][_0xcfcfb7(0x17f)]),logger_1[_0xcfcfb7(0x11d)][_0xcfcfb7(0x124)](_0x1ca1cd,_0xcfcfb7(0x171));}catch(_0x466469){return logger_1[_0xcfcfb7(0x11d)][_0xcfcfb7(0x124)]('Error\x20decoding\x20token:\x20'+_0x466469?.[_0xcfcfb7(0x169)]),_0x25ffd4[_0xcfcfb7(0x14f)](),io;}const _0xfef666=new counter_1[(_0xcfcfb7(0x123))]();let _0x39ae31=null;const _0x30f639=_0x1ca1cd['id'];if(_0x30f639&&_0x30f639!==_0xcfcfb7(0x143)&&_0x30f639!==_0xcfcfb7(0x156)){_0x39ae31=await User_1['default'][_0xcfcfb7(0x196)](_0x30f639,{'include':[Queue_1[_0xcfcfb7(0x191)]]});if(_0x39ae31)_0x39ae31[_0xcfcfb7(0x120)]=!![],await _0x39ae31[_0xcfcfb7(0x13a)]();else return logger_1['logger'][_0xcfcfb7(0x173)](_0xcfcfb7(0x195)+_0x30f639+_0xcfcfb7(0x159)),_0x25ffd4[_0xcfcfb7(0x14f)](),io;}else return logger_1[_0xcfcfb7(0x11d)][_0xcfcfb7(0x173)](_0xcfcfb7(0x13b)),_0x25ffd4['disconnect'](),io;return UserSocketSession_1[_0xcfcfb7(0x191)][_0xcfcfb7(0x134)]({'id':_0x25ffd4['id'],'userId':_0x30f639,'active':!![]})[_0xcfcfb7(0x155)](_0x178f48=>{const _0x2a3cba=_0xcfcfb7;logger_1[_0x2a3cba(0x11d)][_0x2a3cba(0x124)](_0x2a3cba(0x142)+_0x25ffd4['id']+'\x20for\x20user\x20'+_0x30f639);}),_0x25ffd4['on'](_0xcfcfb7(0x14f),async()=>{const _0x309082=_0xcfcfb7;UserSocketSession_1[_0x309082(0x191)][_0x309082(0x16e)]({'active':![]},{'where':{'id':_0x25ffd4['id']}})[_0x309082(0x155)](()=>{const _0x348986=_0x309082;logger_1[_0x348986(0x11d)][_0x348986(0x124)]('finished\x20session\x20'+_0x25ffd4['id']+_0x348986(0x17b)+_0x30f639);});}),_0x25ffd4['join'](_0xcfcfb7(0x12c)+_0x39ae31[_0xcfcfb7(0x117)]+_0xcfcfb7(0x158)),_0x25ffd4[_0xcfcfb7(0x194)](_0xcfcfb7(0x184)+_0x39ae31['id']),_0x39ae31['super']&&_0x25ffd4[_0xcfcfb7(0x194)](_0xcfcfb7(0x16c)),_0x25ffd4['on'](_0xcfcfb7(0x12e),async _0x153432=>{const _0x28ac58=_0xcfcfb7;try{logger_1[_0x28ac58(0x11d)]['info']('User\x20'+_0x39ae31['id']+_0x28ac58(0x151)+_0x153432),_0x25ffd4[_0x28ac58(0x194)](_0x153432),_0x25ffd4[_0x28ac58(0x172)]('joinedTicket',{'ticketId':_0x153432,'timestamp':new Date()[_0x28ac58(0x136)](),'success':!![]});}catch(_0x37edb4){logger_1[_0x28ac58(0x11d)][_0x28ac58(0x11a)](_0x28ac58(0x153)+_0x153432+':\x20'+_0x37edb4[_0x28ac58(0x169)]),_0x25ffd4[_0x28ac58(0x172)]('joinedTicket',{'ticketId':_0x153432,'timestamp':new Date()[_0x28ac58(0x136)](),'success':![],'error':_0x37edb4[_0x28ac58(0x169)]});}}),_0x25ffd4['on'](_0xcfcfb7(0x18a),async _0x366adc=>{const _0x217993=_0xcfcfb7;try{const {ticketId:_0x5570ec}=_0x366adc;logger_1[_0x217993(0x11d)]['info'](_0x217993(0x15e)+_0x5570ec+'\x20from\x20user\x20'+_0x39ae31['id']),_0x25ffd4[_0x217993(0x172)](_0x217993(0x12c)+_0x39ae31['companyId']+_0x217993(0x16f),{'ticketId':parseInt(_0x5570ec),'presence':_0x217993(0x15a),'isTest':!![],'timestamp':new Date()[_0x217993(0x136)]()}),setTimeout(()=>{const _0x4a4274=_0x217993;_0x25ffd4[_0x4a4274(0x172)](_0x4a4274(0x12c)+_0x39ae31[_0x4a4274(0x117)]+_0x4a4274(0x16f),{'ticketId':parseInt(_0x5570ec),'presence':'recording','isTest':!![],'timestamp':new Date()[_0x4a4274(0x136)]()});},0x7d0),setTimeout(()=>{const _0x24832f=_0x217993;_0x25ffd4['emit'](_0x24832f(0x12c)+_0x39ae31['companyId']+_0x24832f(0x16f),{'ticketId':parseInt(_0x5570ec),'presence':'available','isTest':!![],'timestamp':new Date()[_0x24832f(0x136)]()}),logger_1['logger'][_0x24832f(0x173)](_0x24832f(0x189)+_0x5570ec);},0xfa0);}catch(_0x1f8156){logger_1[_0x217993(0x11d)]['error'](_0x217993(0x190)+_0x1f8156[_0x217993(0x169)]);}}),_0x25ffd4['on'](_0xcfcfb7(0x139),async _0x32a0f8=>{const _0x4073fa=_0xcfcfb7;if(!_0x32a0f8||_0x32a0f8===_0x4073fa(0x143))return;Ticket_1[_0x4073fa(0x191)]['findByPk'](_0x32a0f8)[_0x4073fa(0x155)](async _0x57bd42=>{const _0x18eef2=_0x4073fa;if(_0x57bd42&&_0x57bd42['companyId']===_0x39ae31[_0x18eef2(0x117)]&&(_0x57bd42[_0x18eef2(0x138)]===_0x39ae31['id']||_0x39ae31[_0x18eef2(0x16b)]===_0x18eef2(0x118)))joinTicketChannel(_0x25ffd4,_0x32a0f8,_0x39ae31,_0xfef666),_0x25ffd4[_0x18eef2(0x194)]('ticket-'+_0x32a0f8+_0x18eef2(0x16f)),logger_1[_0x18eef2(0x11d)][_0x18eef2(0x124)](_0x18eef2(0x192)+_0x39ae31['id']+_0x18eef2(0x160)+_0x32a0f8);else{if(_0x57bd42['isGroup']&&await(0x0,CheckSettings_1['GetCompanySetting'])(_0x39ae31['companyId'],_0x18eef2(0x178),'disabled')===_0x18eef2(0x17c)){let _0x50b4fb=![];_0x39ae31[_0x18eef2(0x166)][_0x18eef2(0x16d)](_0x1afba9=>{const _0x5eebb0=_0x18eef2;_0x1afba9['id']===_0x57bd42[_0x5eebb0(0x13d)]&&(_0x50b4fb=!![]);}),_0x50b4fb?(joinTicketChannel(_0x25ffd4,_0x32a0f8,_0x39ae31,_0xfef666),_0x25ffd4[_0x18eef2(0x194)](_0x18eef2(0x115)+_0x32a0f8+'-presence'),logger_1['logger'][_0x18eef2(0x124)](_0x18eef2(0x192)+_0x39ae31['id']+_0x18eef2(0x160)+_0x32a0f8)):logger_1[_0x18eef2(0x11d)][_0x18eef2(0x173)](_0x18eef2(0x130)+_0x32a0f8+'\x20by\x20user\x20'+_0x39ae31['id']);}else logger_1[_0x18eef2(0x11d)]['info'](_0x18eef2(0x130)+_0x32a0f8+'\x20by\x20user\x20'+_0x39ae31['id']);}},_0x13b6a9=>{const _0x59816a=_0x4073fa;logger_1[_0x59816a(0x11d)][_0x59816a(0x11a)](_0x13b6a9,_0x59816a(0x182)+_0x32a0f8);});}),_0x25ffd4['on']('leaveChatBox',async _0x5160e8=>{const _0x1debf0=_0xcfcfb7;if(!_0x5160e8||_0x5160e8===_0x1debf0(0x143))return;const _0x437abd=_0xfef666['decrementCounter'](_0x1debf0(0x115)+_0x5160e8);_0x437abd===0x0&&(_0x25ffd4['leave'](_0x5160e8),_0x25ffd4['leave'](_0x1debf0(0x115)+_0x5160e8+_0x1debf0(0x16f))),logger_1[_0x1debf0(0x11d)]['debug'](_0x1debf0(0x132)+_0x437abd+_0x1debf0(0x15c)+_0x5160e8+_0x1debf0(0x12f)+_0x39ae31['id']);}),_0x25ffd4['on'](_0xcfcfb7(0x15d),async()=>{const _0x999d82=_0xcfcfb7,_0x3ec833=_0xfef666[_0x999d82(0x179)](_0x999d82(0x188));_0x3ec833===0x1&&(_0x39ae31['profile']===_0x999d82(0x118)?_0x25ffd4[_0x999d82(0x194)](_0x999d82(0x12c)+_0x39ae31[_0x999d82(0x117)]+'-notification'):_0x39ae31['queues']['forEach'](_0x598771=>{const _0x29b764=_0x999d82;logger_1[_0x29b764(0x11d)][_0x29b764(0x124)]('User\x20'+_0x39ae31['id']+_0x29b764(0x122)+_0x39ae31[_0x29b764(0x117)]+'\x20joined\x20queue\x20'+_0x598771['id']+_0x29b764(0x148)),_0x25ffd4['join'](_0x29b764(0x177)+_0x598771['id']+_0x29b764(0x15b));})),logger_1[_0x999d82(0x11d)][_0x999d82(0x124)](_0x999d82(0x15f)+_0x3ec833+_0x999d82(0x147)+_0x39ae31['id']);}),_0x25ffd4['on'](_0xcfcfb7(0x181),async()=>{const _0xa95242=_0xcfcfb7,_0x8232a8=_0xfef666[_0xa95242(0x17d)](_0xa95242(0x188));_0x8232a8===0x0&&(_0x39ae31[_0xa95242(0x16b)]===_0xa95242(0x118)?_0x25ffd4[_0xa95242(0x163)]('company-'+_0x39ae31[_0xa95242(0x117)]+_0xa95242(0x15b)):_0x39ae31[_0xa95242(0x166)][_0xa95242(0x16d)](_0xddccb7=>{const _0x27096e=_0xa95242;logger_1[_0x27096e(0x11d)][_0x27096e(0x124)](_0x27096e(0x192)+_0x39ae31['id']+_0x27096e(0x122)+_0x39ae31[_0x27096e(0x117)]+_0x27096e(0x161)+_0xddccb7['id']+_0x27096e(0x148)),_0x25ffd4[_0x27096e(0x163)](_0x27096e(0x177)+_0xddccb7['id']+_0x27096e(0x15b));})),logger_1[_0xa95242(0x11d)][_0xa95242(0x124)](_0xa95242(0x165)+_0x8232a8+_0xa95242(0x147)+_0x39ae31['id']);}),_0x25ffd4['on'](_0xcfcfb7(0x180),_0x7a0022=>{const _0x47c166=_0xcfcfb7;if(_0xfef666[_0x47c166(0x179)](_0x47c166(0x14d)+_0x7a0022)===0x1){if(_0x39ae31[_0x47c166(0x16b)]===_0x47c166(0x118))logger_1[_0x47c166(0x11d)][_0x47c166(0x124)](_0x47c166(0x11e)+_0x39ae31['id']+_0x47c166(0x122)+_0x39ae31['companyId']+_0x47c166(0x114)+_0x7a0022+_0x47c166(0x110)),_0x25ffd4[_0x47c166(0x194)]('company-'+_0x39ae31[_0x47c166(0x117)]+'-'+_0x7a0022);else _0x7a0022===_0x47c166(0x14e)?_0x39ae31[_0x47c166(0x166)][_0x47c166(0x16d)](_0x31f0ab=>{const _0x4655b0=_0x47c166;logger_1[_0x4655b0(0x11d)][_0x4655b0(0x124)]('User\x20'+_0x39ae31['id']+'\x20of\x20company\x20'+_0x39ae31[_0x4655b0(0x117)]+'\x20joined\x20queue\x20'+_0x31f0ab['id']+_0x4655b0(0x140)),_0x25ffd4[_0x4655b0(0x194)](_0x4655b0(0x177)+_0x31f0ab['id']+_0x4655b0(0x111));}):logger_1[_0x47c166(0x11d)][_0x47c166(0x124)](_0x47c166(0x192)+_0x39ae31['id']+'\x20cannot\x20subscribe\x20to\x20'+_0x7a0022);}}),_0x25ffd4['on']('leaveTickets',_0x222acc=>{const _0x5d6f3a=_0xcfcfb7;if(_0xfef666[_0x5d6f3a(0x17d)](_0x5d6f3a(0x14d)+_0x222acc)===0x0){if(_0x39ae31['profile']===_0x5d6f3a(0x118))logger_1[_0x5d6f3a(0x11d)][_0x5d6f3a(0x124)](_0x5d6f3a(0x11e)+_0x39ae31['id']+_0x5d6f3a(0x122)+_0x39ae31[_0x5d6f3a(0x117)]+'\x20leaved\x20'+_0x222acc+'\x20tickets\x20channel.'),_0x25ffd4['leave'](_0x5d6f3a(0x12c)+_0x39ae31[_0x5d6f3a(0x117)]+'-'+_0x222acc);else _0x222acc===_0x5d6f3a(0x14e)&&_0x39ae31[_0x5d6f3a(0x166)][_0x5d6f3a(0x16d)](_0x17c9db=>{const _0x2b518f=_0x5d6f3a;logger_1['logger'][_0x2b518f(0x124)](_0x2b518f(0x192)+_0x39ae31['id']+_0x2b518f(0x122)+_0x39ae31['companyId']+'\x20leaved\x20queue\x20'+_0x17c9db['id']+_0x2b518f(0x140)),_0x25ffd4[_0x2b518f(0x163)](_0x2b518f(0x177)+_0x17c9db['id']+_0x2b518f(0x111));});}}),_0x25ffd4['on']('debugConnection',()=>{const _0x4ea8e1=_0xcfcfb7,_0x488e1a=Array[_0x4ea8e1(0x12d)](_0x25ffd4['rooms']);_0x25ffd4[_0x4ea8e1(0x172)](_0x4ea8e1(0x11b),{'socketId':_0x25ffd4['id'],'userId':_0x39ae31['id'],'companyId':_0x39ae31[_0x4ea8e1(0x117)],'connectedRooms':_0x488e1a,'timestamp':new Date()[_0x4ea8e1(0x136)]()}),logger_1[_0x4ea8e1(0x11d)][_0x4ea8e1(0x173)]('Debug\x20connection\x20info\x20sent\x20to\x20user\x20'+_0x39ae31['id']);}),_0x25ffd4[_0xcfcfb7(0x172)]('ready'),io;}),io;};exports[a294_0xb0c137(0x137)]=initIO;const emitPresence=(_0x1f6cf9,_0x2a4926,_0x24ab79)=>{const _0x127315=a294_0xb0c137;if(!io){logger_1[_0x127315(0x11d)][_0x127315(0x11a)](_0x127315(0x135));return;}logger_1[_0x127315(0x11d)][_0x127315(0x173)](_0x127315(0x128)+_0x24ab79+_0x127315(0x131)+_0x2a4926+'\x20in\x20company\x20'+_0x1f6cf9);const _0x9b0b1b=[_0x127315(0x115)+_0x2a4926+_0x127315(0x16f),_0x127315(0x115)+_0x2a4926,_0x2a4926['toString'](),_0x127315(0x12c)+_0x1f6cf9+_0x127315(0x18f),_0x127315(0x12c)+_0x1f6cf9+_0x127315(0x111)];logger_1[_0x127315(0x11d)]['debug'](_0x127315(0x170)+_0x9b0b1b[_0x127315(0x194)](',\x20')),io['to'](_0x127315(0x12c)+_0x1f6cf9+_0x127315(0x158))[_0x127315(0x172)](_0x127315(0x12c)+_0x1f6cf9+_0x127315(0x16f),{'ticketId':_0x2a4926,'presence':_0x24ab79,'timestamp':new Date()['toISOString']()}),logger_1['logger'][_0x127315(0x124)](_0x127315(0x14a)+_0x24ab79+_0x127315(0x152)+_0x2a4926);try{const _0x4239ff=io['sockets'][_0x127315(0x13c)][_0x127315(0x126)]['get'](_0x127315(0x12c)+_0x1f6cf9+'-mainchannel'),_0x5c79d8=io[_0x127315(0x112)][_0x127315(0x13c)][_0x127315(0x126)][_0x127315(0x113)](_0x2a4926[_0x127315(0x12a)]());logger_1['logger'][_0x127315(0x173)]('Socket\x20stats\x20-\x20Main\x20company\x20room:\x20'+(_0x4239ff?_0x4239ff['size']:0x0)+'\x20clients,\x20'+(_0x127315(0x176)+(_0x5c79d8?_0x5c79d8[_0x127315(0x125)]:0x0)+_0x127315(0x175)));}catch(_0x576582){logger_1['logger'][_0x127315(0x11a)](_0x127315(0x16a)+_0x576582[_0x127315(0x169)]);}};exports['emitPresence']=emitPresence;const getIO=()=>{const _0x2a7810=a294_0xb0c137;if(!io)throw new AppError_1[(_0x2a7810(0x191))]('Socket\x20IO\x20not\x20initialized');return io;};exports['getIO']=getIO;