const a361_0x57ece1=a361_0x5c4a;(function(_0x234780,_0x16dc3c){const _0x462bb7=a361_0x5c4a,_0x30076f=_0x234780();while(!![]){try{const _0x5b361=parseInt(_0x462bb7(0xc7))/0x1*(parseInt(_0x462bb7(0x7a))/0x2)+parseInt(_0x462bb7(0xb5))/0x3+parseInt(_0x462bb7(0xb9))/0x4*(-parseInt(_0x462bb7(0xe3))/0x5)+-parseInt(_0x462bb7(0xd0))/0x6+-parseInt(_0x462bb7(0xc1))/0x7+-parseInt(_0x462bb7(0xcd))/0x8+parseInt(_0x462bb7(0xe4))/0x9;if(_0x5b361===_0x16dc3c)break;else _0x30076f['push'](_0x30076f['shift']());}catch(_0x32805c){_0x30076f['push'](_0x30076f['shift']());}}}(a361_0x23c1,0x8e0c5));const a361_0x286842=(function(){let _0x19c0b2=!![];return function(_0x1423ed,_0x4a3979){const _0x108540=_0x19c0b2?function(){if(_0x4a3979){const _0x5166f8=_0x4a3979['apply'](_0x1423ed,arguments);return _0x4a3979=null,_0x5166f8;}}:function(){};return _0x19c0b2=![],_0x108540;};}()),a361_0x43de80=a361_0x286842(this,function(){const _0x27eca9=a361_0x5c4a;return a361_0x43de80[_0x27eca9(0xe8)]()[_0x27eca9(0xea)](_0x27eca9(0x8f))[_0x27eca9(0xe8)]()[_0x27eca9(0xf3)](a361_0x43de80)['search'](_0x27eca9(0x8f));});a361_0x43de80();'use strict';function a361_0x23c1(){const _0x3ca3fa=['passwordHash','env','-pending','../utils/logger','Debug\x20connection\x20info\x20sent\x20to\x20user\x20','321UStxUE','SOCKET_ADMIN','logger','Presence\x20event\x20','leaveNotification[','company-','3487296kucdOF','CounterManager','\x20clients,\x20','5266338dbZnxZ','-open','joinedTicket','handshake','Invalid\x20attempt\x20to\x20join\x20channel\x20of\x20ticket\x20','../helpers/CheckSettings','../models/Ticket','Socket\x20stats\x20-\x20Main\x20company\x20room:\x20','\x20joined\x20queue\x20',']:\x20User:\x20','\x20joined\x20','verify','joinTicket','sockets','\x20by\x20user\x20','leaveTickets','rooms','message','toISOString','174605mPfpSN','14980824ScpRGl','join','incrementCounter','started\x20session\x20','toString','userId','search','pending','recording','basic',']:\x20Channel:\x20','\x20channel.','update','queue-','emit','constructor','getIO','\x20emitted\x20for\x20ticket\x20','error','Ticket\x20room:\x20','joinNotification[','super','checkPresence','../models/UserSocketSession','secret','get','\x20cannot\x20subscribe\x20to\x20','Received\x20checkPresence\x20for\x20ticket\x20','leave','development','queueId','socket.io','composing','-mainchannel','GetCompanySetting','4738agKmDj','available','Broadcasting\x20to\x20channels:\x20','findByPk','joinTickets','defineProperty','undefined','\x20leaved\x20queue\x20','\x20clients','__importDefault','ticket-','parse','User\x20','profile','notification','adapter','companyId','emitPresence','./counter','connection','some','(((.+)+)+)+$','admin','queues','Client\x20Connected:\x20','Error\x20counting\x20room\x20clients:\x20','Socket\x20IO\x20not\x20initialized','allTicket','forEach','create','\x20tickets\x20channel.','Error\x20in\x20checkPresence:\x20','enabled','onConnect:\x20User\x20','disabled','../errors/AppError','\x20joining\x20ticket\x20room:\x20','default','../models/Queue','\x20of\x20company\x20','Socket\x20IO\x20not\x20initialized\x20when\x20trying\x20to\x20emit\x20presence','isGroup','ready','info','Server','-presence','query','null','jsonwebtoken','instrument','\x20joined\x20presence\x20channel\x20for\x20ticket\x20','\x20not\x20authorized\x20to\x20join\x20ticket\x20','Admin\x20','-notification','then','size','Clossing\x20all\x20socket\x20sessions','\x20pending\x20tickets\x20channel.','disconnect','1869648yQLtoJ','onConnect:\x20Missing\x20userId','leaveChatBox','FRONTEND_URL','40rCDOcl','debug','../models/User','groupsTab','email','\x20for\x20user\x20','online','Emitting\x20presence\x20event:\x20','5624689BUNHqy'];a361_0x23c1=function(){return _0x3ca3fa;};return a361_0x23c1();}var __importDefault=this&&this[a361_0x57ece1(0x83)]||function(_0x370822){return _0x370822&&_0x370822['__esModule']?_0x370822:{'default':_0x370822};};Object[a361_0x57ece1(0x7f)](exports,'__esModule',{'value':!![]}),exports[a361_0x57ece1(0x67)]=exports['emitPresence']=exports['initIO']=void 0x0;const socket_io_1=require(a361_0x57ece1(0x76)),admin_ui_1=require('@socket.io/admin-ui'),jsonwebtoken_1=require(a361_0x57ece1(0xaa)),AppError_1=__importDefault(require(a361_0x57ece1(0x9d))),logger_1=require(a361_0x57ece1(0xc5)),User_1=__importDefault(require(a361_0x57ece1(0xbb))),Queue_1=__importDefault(require(a361_0x57ece1(0xa0))),Ticket_1=__importDefault(require(a361_0x57ece1(0xd6))),auth_1=__importDefault(require('../config/auth')),counter_1=require(a361_0x57ece1(0x8c)),UserSocketSession_1=__importDefault(require(a361_0x57ece1(0x6e))),CheckSettings_1=require(a361_0x57ece1(0xd5));let io;function a361_0x5c4a(_0x3182a7,_0x3c7e50){const _0x188174=a361_0x23c1();return a361_0x5c4a=function(_0x43de80,_0x286842){_0x43de80=_0x43de80-0x67;let _0x23c1ed=_0x188174[_0x43de80];return _0x23c1ed;},a361_0x5c4a(_0x3182a7,_0x3c7e50);}const joinTicketChannel=async(_0x292565,_0x27e689,_0x45a9b2,_0x5925f2)=>{const _0x41d13d=a361_0x57ece1,_0x161abc=_0x5925f2[_0x41d13d(0xe6)](_0x41d13d(0x84)+_0x27e689);_0x161abc===0x1&&_0x292565[_0x41d13d(0xe5)](_0x27e689),logger_1['logger'][_0x41d13d(0xba)]('joinChatbox['+_0x161abc+_0x41d13d(0xee)+_0x27e689+_0x41d13d(0xde)+_0x45a9b2['id']);},initIO=_0x1d6297=>{const _0x1802e7=a361_0x57ece1;return io=new socket_io_1[(_0x1802e7(0xa6))](_0x1d6297,{'cors':{'origin':process[_0x1802e7(0xc3)][_0x1802e7(0xb8)]}}),process['env'][_0x1802e7(0xc8)]&&JSON[_0x1802e7(0x85)](process['env'][_0x1802e7(0xc8)])&&User_1['default'][_0x1802e7(0x7d)](0x1)[_0x1802e7(0xb0)](_0x2e7517=>{const _0x4a42c2=_0x1802e7;(0x0,admin_ui_1[_0x4a42c2(0xab)])(io,{'auth':{'type':_0x4a42c2(0xed),'username':_0x2e7517[_0x4a42c2(0xbd)],'password':_0x2e7517[_0x4a42c2(0xc2)]},'mode':_0x4a42c2(0x74)});}),UserSocketSession_1[_0x1802e7(0x9f)][_0x1802e7(0xf0)]({'active':![]},{'where':{'active':!![]}})[_0x1802e7(0xb0)](_0x1521db=>{const _0x1c5e5c=_0x1802e7;logger_1['logger']['debug'](_0x1c5e5c(0xb2));}),io['on'](_0x1802e7(0x8d),async _0x58e50c=>{const _0x49696c=_0x1802e7;logger_1['logger']['info'](_0x49696c(0x92)+_0x58e50c['id']);const {token:_0x519b16}=_0x58e50c[_0x49696c(0xd3)][_0x49696c(0xa8)];let _0x55fbe3=null;try{_0x55fbe3=(0x0,jsonwebtoken_1[_0x49696c(0xdb)])(_0x519b16,auth_1[_0x49696c(0x9f)][_0x49696c(0x6f)]),logger_1[_0x49696c(0xc9)][_0x49696c(0xba)](_0x55fbe3,'io-onConnection:\x20tokenData');}catch(_0x38f7e6){return logger_1['logger'][_0x49696c(0xba)]('Error\x20decoding\x20token:\x20'+_0x38f7e6?.[_0x49696c(0xe1)]),_0x58e50c[_0x49696c(0xb4)](),io;}const _0x501dc0=new counter_1[(_0x49696c(0xce))]();let _0x27ef02=null;const _0x406697=_0x55fbe3['id'];if(_0x406697&&_0x406697!==_0x49696c(0x80)&&_0x406697!==_0x49696c(0xa9)){_0x27ef02=await User_1[_0x49696c(0x9f)][_0x49696c(0x7d)](_0x406697,{'include':[Queue_1['default']]});if(_0x27ef02)_0x27ef02[_0x49696c(0xbf)]=!![],await _0x27ef02['save']();else return logger_1[_0x49696c(0xc9)][_0x49696c(0xa5)](_0x49696c(0x9b)+_0x406697+'\x20not\x20found'),_0x58e50c[_0x49696c(0xb4)](),io;}else return logger_1[_0x49696c(0xc9)][_0x49696c(0xa5)](_0x49696c(0xb6)),_0x58e50c[_0x49696c(0xb4)](),io;return UserSocketSession_1[_0x49696c(0x9f)][_0x49696c(0x97)]({'id':_0x58e50c['id'],'userId':_0x406697,'active':!![]})[_0x49696c(0xb0)](_0x4043ba=>{const _0x4b799f=_0x49696c;logger_1[_0x4b799f(0xc9)][_0x4b799f(0xba)](_0x4b799f(0xe7)+_0x58e50c['id']+_0x4b799f(0xbe)+_0x406697);}),_0x58e50c['on']('disconnect',async()=>{const _0x28f90d=_0x49696c;UserSocketSession_1['default']['update']({'active':![]},{'where':{'id':_0x58e50c['id']}})[_0x28f90d(0xb0)](()=>{const _0xe335f0=_0x28f90d;logger_1[_0xe335f0(0xc9)][_0xe335f0(0xba)]('finished\x20session\x20'+_0x58e50c['id']+_0xe335f0(0xbe)+_0x406697);});}),_0x58e50c[_0x49696c(0xe5)](_0x49696c(0xcc)+_0x27ef02[_0x49696c(0x8a)]+_0x49696c(0x78)),_0x58e50c['join']('user-'+_0x27ef02['id']),_0x27ef02[_0x49696c(0x6c)]&&_0x58e50c[_0x49696c(0xe5)](_0x49696c(0x6c)),_0x58e50c['on'](_0x49696c(0xdc),async _0x25d867=>{const _0x1a397c=_0x49696c;try{logger_1[_0x1a397c(0xc9)][_0x1a397c(0xa5)](_0x1a397c(0x86)+_0x27ef02['id']+_0x1a397c(0x9e)+_0x25d867),_0x58e50c['join'](_0x25d867),_0x58e50c['emit'](_0x1a397c(0xd2),{'ticketId':_0x25d867,'timestamp':new Date()['toISOString'](),'success':!![]});}catch(_0x503b6f){logger_1[_0x1a397c(0xc9)][_0x1a397c(0x69)]('Error\x20joining\x20ticket\x20room\x20'+_0x25d867+':\x20'+_0x503b6f['message']),_0x58e50c[_0x1a397c(0xf2)](_0x1a397c(0xd2),{'ticketId':_0x25d867,'timestamp':new Date()[_0x1a397c(0xe2)](),'success':![],'error':_0x503b6f[_0x1a397c(0xe1)]});}}),_0x58e50c['on'](_0x49696c(0x6d),async _0xdff387=>{const _0x308113=_0x49696c;try{const {ticketId:_0x52f244}=_0xdff387;logger_1[_0x308113(0xc9)][_0x308113(0xa5)](_0x308113(0x72)+_0x52f244+'\x20from\x20user\x20'+_0x27ef02['id']),_0x58e50c[_0x308113(0xf2)](_0x308113(0xcc)+_0x27ef02['companyId']+_0x308113(0xa7),{'ticketId':parseInt(_0x52f244),'presence':_0x308113(0x77),'isTest':!![],'timestamp':new Date()[_0x308113(0xe2)]()}),setTimeout(()=>{const _0x10e1ea=_0x308113;_0x58e50c[_0x10e1ea(0xf2)](_0x10e1ea(0xcc)+_0x27ef02['companyId']+_0x10e1ea(0xa7),{'ticketId':parseInt(_0x52f244),'presence':_0x10e1ea(0xec),'isTest':!![],'timestamp':new Date()[_0x10e1ea(0xe2)]()});},0x7d0),setTimeout(()=>{const _0x8aabf5=_0x308113;_0x58e50c[_0x8aabf5(0xf2)]('company-'+_0x27ef02['companyId']+_0x8aabf5(0xa7),{'ticketId':parseInt(_0x52f244),'presence':_0x8aabf5(0x7b),'isTest':!![],'timestamp':new Date()[_0x8aabf5(0xe2)]()}),logger_1['logger'][_0x8aabf5(0xa5)]('Sent\x20test\x20presence\x20sequence\x20for\x20ticket\x20'+_0x52f244);},0xfa0);}catch(_0x2507af){logger_1['logger'][_0x308113(0x69)](_0x308113(0x99)+_0x2507af[_0x308113(0xe1)]);}}),_0x58e50c['on']('joinChatBox',async _0x36fd26=>{const _0x3b824f=_0x49696c;if(!_0x36fd26||_0x36fd26===_0x3b824f(0x80))return;Ticket_1['default'][_0x3b824f(0x7d)](_0x36fd26)['then'](async _0x3c1dee=>{const _0x589bd5=_0x3b824f;if(_0x3c1dee&&_0x3c1dee[_0x589bd5(0x8a)]===_0x27ef02[_0x589bd5(0x8a)]){const _0x1429df=_0x3c1dee[_0x589bd5(0xe9)]===_0x27ef02['id'],_0x158480=_0x27ef02['profile']==='admin',_0x27cf66=_0x27ef02[_0x589bd5(0x95)]===_0x589bd5(0x9a),_0x22018e=_0x27ef02[_0x589bd5(0x91)]?.[_0x589bd5(0x8e)](_0x4cfb63=>_0x4cfb63['id']===_0x3c1dee[_0x589bd5(0x75)]);_0x1429df||_0x158480||_0x27cf66||_0x22018e?(joinTicketChannel(_0x58e50c,_0x36fd26,_0x27ef02,_0x501dc0),_0x58e50c[_0x589bd5(0xe5)](_0x589bd5(0x84)+_0x36fd26+'-presence'),logger_1[_0x589bd5(0xc9)][_0x589bd5(0xba)]('User\x20'+_0x27ef02['id']+_0x589bd5(0xac)+_0x36fd26)):logger_1[_0x589bd5(0xc9)][_0x589bd5(0xa5)]('User\x20'+_0x27ef02['id']+_0x589bd5(0xad)+_0x36fd26);}else{if(_0x3c1dee[_0x589bd5(0xa3)]&&await(0x0,CheckSettings_1[_0x589bd5(0x79)])(_0x27ef02[_0x589bd5(0x8a)],_0x589bd5(0xbc),_0x589bd5(0x9c))===_0x589bd5(0x9a)){let _0x3f4088=![];_0x27ef02[_0x589bd5(0x91)][_0x589bd5(0x96)](_0x3ac8a5=>{const _0x2be328=_0x589bd5;_0x3ac8a5['id']===_0x3c1dee[_0x2be328(0x75)]&&(_0x3f4088=!![]);}),_0x3f4088?(joinTicketChannel(_0x58e50c,_0x36fd26,_0x27ef02,_0x501dc0),_0x58e50c[_0x589bd5(0xe5)]('ticket-'+_0x36fd26+_0x589bd5(0xa7)),logger_1[_0x589bd5(0xc9)]['debug'](_0x589bd5(0x86)+_0x27ef02['id']+_0x589bd5(0xac)+_0x36fd26)):logger_1[_0x589bd5(0xc9)]['info'](_0x589bd5(0xd4)+_0x36fd26+_0x589bd5(0xde)+_0x27ef02['id']);}else logger_1[_0x589bd5(0xc9)][_0x589bd5(0xa5)](_0x589bd5(0xd4)+_0x36fd26+_0x589bd5(0xde)+_0x27ef02['id']);}},_0x329aac=>{logger_1['logger']['error'](_0x329aac,'Error\x20fetching\x20ticket\x20'+_0x36fd26);});}),_0x58e50c['on'](_0x49696c(0xb7),async _0x5d93fb=>{const _0x2bb1b6=_0x49696c;if(!_0x5d93fb||_0x5d93fb==='undefined')return;const _0x5df61e=_0x501dc0['decrementCounter'](_0x2bb1b6(0x84)+_0x5d93fb);_0x5df61e===0x0&&(_0x58e50c[_0x2bb1b6(0x73)](_0x5d93fb),_0x58e50c[_0x2bb1b6(0x73)](_0x2bb1b6(0x84)+_0x5d93fb+_0x2bb1b6(0xa7))),logger_1[_0x2bb1b6(0xc9)][_0x2bb1b6(0xba)]('leaveChatbox['+_0x5df61e+']:\x20Channel:\x20'+_0x5d93fb+'\x20by\x20user\x20'+_0x27ef02['id']);}),_0x58e50c['on']('joinNotification',async()=>{const _0x57326a=_0x49696c,_0x31448e=_0x501dc0[_0x57326a(0xe6)](_0x57326a(0x88));_0x31448e===0x1&&(_0x27ef02[_0x57326a(0x87)]===_0x57326a(0x90)?_0x58e50c['join'](_0x57326a(0xcc)+_0x27ef02[_0x57326a(0x8a)]+_0x57326a(0xaf)):_0x27ef02[_0x57326a(0x91)][_0x57326a(0x96)](_0x5d22e7=>{const _0x32b4eb=_0x57326a;logger_1[_0x32b4eb(0xc9)][_0x32b4eb(0xba)](_0x32b4eb(0x86)+_0x27ef02['id']+'\x20of\x20company\x20'+_0x27ef02[_0x32b4eb(0x8a)]+_0x32b4eb(0xd8)+_0x5d22e7['id']+_0x32b4eb(0xef)),_0x58e50c[_0x32b4eb(0xe5)]('queue-'+_0x5d22e7['id']+_0x32b4eb(0xaf));})),logger_1[_0x57326a(0xc9)][_0x57326a(0xba)](_0x57326a(0x6b)+_0x31448e+_0x57326a(0xd9)+_0x27ef02['id']);}),_0x58e50c['on']('leaveNotification',async()=>{const _0x2dc090=_0x49696c,_0x3973db=_0x501dc0['decrementCounter'](_0x2dc090(0x88));_0x3973db===0x0&&(_0x27ef02[_0x2dc090(0x87)]==='admin'?_0x58e50c[_0x2dc090(0x73)]('company-'+_0x27ef02[_0x2dc090(0x8a)]+_0x2dc090(0xaf)):_0x27ef02['queues'][_0x2dc090(0x96)](_0x2b82fe=>{const _0x1b35ae=_0x2dc090;logger_1[_0x1b35ae(0xc9)][_0x1b35ae(0xba)](_0x1b35ae(0x86)+_0x27ef02['id']+_0x1b35ae(0xa1)+_0x27ef02[_0x1b35ae(0x8a)]+_0x1b35ae(0x81)+_0x2b82fe['id']+'\x20channel.'),_0x58e50c[_0x1b35ae(0x73)](_0x1b35ae(0xf1)+_0x2b82fe['id']+_0x1b35ae(0xaf));})),logger_1[_0x2dc090(0xc9)][_0x2dc090(0xba)](_0x2dc090(0xcb)+_0x3973db+_0x2dc090(0xd9)+_0x27ef02['id']);}),_0x58e50c['on'](_0x49696c(0x7e),_0x1a55af=>{const _0x10b42c=_0x49696c;if(_0x501dc0[_0x10b42c(0xe6)]('status-'+_0x1a55af)===0x1){if(_0x27ef02['profile']==='admin')logger_1[_0x10b42c(0xc9)][_0x10b42c(0xba)](_0x10b42c(0xae)+_0x27ef02['id']+_0x10b42c(0xa1)+_0x27ef02[_0x10b42c(0x8a)]+_0x10b42c(0xda)+_0x1a55af+'\x20tickets\x20channel.'),_0x58e50c['join']('company-'+_0x27ef02[_0x10b42c(0x8a)]+'-'+_0x1a55af);else _0x1a55af==='pending'?_0x27ef02[_0x10b42c(0x91)][_0x10b42c(0x96)](_0x3a2e20=>{const _0x1f791c=_0x10b42c;logger_1[_0x1f791c(0xc9)][_0x1f791c(0xba)](_0x1f791c(0x86)+_0x27ef02['id']+_0x1f791c(0xa1)+_0x27ef02[_0x1f791c(0x8a)]+_0x1f791c(0xd8)+_0x3a2e20['id']+_0x1f791c(0xb3)),_0x58e50c[_0x1f791c(0xe5)](_0x1f791c(0xf1)+_0x3a2e20['id']+_0x1f791c(0xc4));}):logger_1[_0x10b42c(0xc9)][_0x10b42c(0xba)](_0x10b42c(0x86)+_0x27ef02['id']+_0x10b42c(0x71)+_0x1a55af);}}),_0x58e50c['on'](_0x49696c(0xdf),_0x205164=>{const _0x4ddb4e=_0x49696c;if(_0x501dc0['decrementCounter']('status-'+_0x205164)===0x0){if(_0x27ef02['profile']===_0x4ddb4e(0x90))logger_1[_0x4ddb4e(0xc9)][_0x4ddb4e(0xba)]('Admin\x20'+_0x27ef02['id']+'\x20of\x20company\x20'+_0x27ef02['companyId']+'\x20leaved\x20'+_0x205164+_0x4ddb4e(0x98)),_0x58e50c[_0x4ddb4e(0x73)](_0x4ddb4e(0xcc)+_0x27ef02[_0x4ddb4e(0x8a)]+'-'+_0x205164);else _0x205164===_0x4ddb4e(0xeb)&&_0x27ef02[_0x4ddb4e(0x91)][_0x4ddb4e(0x96)](_0x41ebd6=>{const _0x21c110=_0x4ddb4e;logger_1['logger'][_0x21c110(0xba)]('User\x20'+_0x27ef02['id']+_0x21c110(0xa1)+_0x27ef02[_0x21c110(0x8a)]+_0x21c110(0x81)+_0x41ebd6['id']+'\x20pending\x20tickets\x20channel.'),_0x58e50c['leave'](_0x21c110(0xf1)+_0x41ebd6['id']+'-pending');});}}),_0x58e50c['on']('debugConnection',()=>{const _0x389c02=_0x49696c,_0x685b4e=Array['from'](_0x58e50c[_0x389c02(0xe0)]);_0x58e50c[_0x389c02(0xf2)]('debugInfo',{'socketId':_0x58e50c['id'],'userId':_0x27ef02['id'],'companyId':_0x27ef02[_0x389c02(0x8a)],'connectedRooms':_0x685b4e,'timestamp':new Date()[_0x389c02(0xe2)]()}),logger_1[_0x389c02(0xc9)][_0x389c02(0xa5)](_0x389c02(0xc6)+_0x27ef02['id']);}),_0x58e50c[_0x49696c(0xf2)](_0x49696c(0xa4)),io;}),io;};exports['initIO']=initIO;const emitPresence=(_0x3095da,_0x4d7f8a,_0x3fe7c2)=>{const _0x3e6dc9=a361_0x57ece1;if(!io){logger_1['logger'][_0x3e6dc9(0x69)](_0x3e6dc9(0xa2));return;}logger_1['logger'][_0x3e6dc9(0xa5)](_0x3e6dc9(0xc0)+_0x3fe7c2+'\x20for\x20ticket\x20'+_0x4d7f8a+'\x20in\x20company\x20'+_0x3095da);const _0x33ba7c=['ticket-'+_0x4d7f8a+_0x3e6dc9(0xa7),_0x3e6dc9(0x84)+_0x4d7f8a,_0x4d7f8a['toString'](),_0x3e6dc9(0xcc)+_0x3095da+_0x3e6dc9(0xd1),_0x3e6dc9(0xcc)+_0x3095da+_0x3e6dc9(0xc4)];logger_1[_0x3e6dc9(0xc9)][_0x3e6dc9(0xba)](_0x3e6dc9(0x7c)+_0x33ba7c[_0x3e6dc9(0xe5)](',\x20')),io['to'](_0x3e6dc9(0xcc)+_0x3095da+_0x3e6dc9(0x78))['emit']('company-'+_0x3095da+_0x3e6dc9(0xa7),{'ticketId':_0x4d7f8a,'presence':_0x3fe7c2,'timestamp':new Date()[_0x3e6dc9(0xe2)]()}),logger_1[_0x3e6dc9(0xc9)][_0x3e6dc9(0xba)](_0x3e6dc9(0xca)+_0x3fe7c2+_0x3e6dc9(0x68)+_0x4d7f8a);try{const _0x31b92b=io[_0x3e6dc9(0xdd)][_0x3e6dc9(0x89)]['rooms'][_0x3e6dc9(0x70)](_0x3e6dc9(0xcc)+_0x3095da+_0x3e6dc9(0x78)),_0x1d9095=io[_0x3e6dc9(0xdd)][_0x3e6dc9(0x89)][_0x3e6dc9(0xe0)]['get'](_0x4d7f8a[_0x3e6dc9(0xe8)]());logger_1[_0x3e6dc9(0xc9)]['info'](_0x3e6dc9(0xd7)+(_0x31b92b?_0x31b92b['size']:0x0)+_0x3e6dc9(0xcf)+(_0x3e6dc9(0x6a)+(_0x1d9095?_0x1d9095[_0x3e6dc9(0xb1)]:0x0)+_0x3e6dc9(0x82)));}catch(_0x21ad60){logger_1[_0x3e6dc9(0xc9)]['error'](_0x3e6dc9(0x93)+_0x21ad60[_0x3e6dc9(0xe1)]);}};exports[a361_0x57ece1(0x8b)]=emitPresence;const getIO=()=>{const _0x141eaa=a361_0x57ece1;if(!io)throw new AppError_1[(_0x141eaa(0x9f))](_0x141eaa(0x94));return io;};exports[a361_0x57ece1(0x67)]=getIO;