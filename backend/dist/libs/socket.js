const a298_0xd2dda9=a298_0x53d9;(function(_0x30fc8a,_0x75b989){const _0x2ec1ef=a298_0x53d9,_0x245db7=_0x30fc8a();while(!![]){try{const _0x16457f=-parseInt(_0x2ec1ef(0xd2))/0x1*(-parseInt(_0x2ec1ef(0xd5))/0x2)+-parseInt(_0x2ec1ef(0x88))/0x3+-parseInt(_0x2ec1ef(0x104))/0x4+-parseInt(_0x2ec1ef(0x103))/0x5*(-parseInt(_0x2ec1ef(0xd7))/0x6)+-parseInt(_0x2ec1ef(0x105))/0x7+-parseInt(_0x2ec1ef(0xe8))/0x8+parseInt(_0x2ec1ef(0xb0))/0x9;if(_0x16457f===_0x75b989)break;else _0x245db7['push'](_0x245db7['shift']());}catch(_0x1ba8a9){_0x245db7['push'](_0x245db7['shift']());}}}(a298_0x5d82,0x5fa36));function a298_0x53d9(_0x5be919,_0x12ff2e){const _0x1b2935=a298_0x5d82();return a298_0x53d9=function(_0x5b86f7,_0x3afd50){_0x5b86f7=_0x5b86f7-0x87;let _0x5d8217=_0x1b2935[_0x5b86f7];return _0x5d8217;},a298_0x53d9(_0x5be919,_0x12ff2e);}function a298_0x5d82(){const _0x2b0f04=['company-','isGroup','queue-','-mainchannel','Error\x20in\x20checkPresence:\x20','joinChatBox','joinTicket','instrument','leaveChatbox[','224814SSIGIB','online','\x20by\x20user\x20','leave','\x20of\x20company\x20','joinedTicket','Sent\x20test\x20presence\x20sequence\x20for\x20ticket\x20','Admin\x20','\x20leaved\x20queue\x20','logger','admin','leaveNotification[','defineProperty','emitPresence','User\x20','leaveTickets','profile','finished\x20session\x20','join','pending','info','@socket.io/admin-ui','available','constructor','disabled','-notification','../utils/logger','disconnect','env','incrementCounter','onConnect:\x20Missing\x20userId','../errors/AppError','search','../config/auth','queueId','\x20emitted\x20for\x20ticket\x20','Socket\x20IO\x20not\x20initialized\x20when\x20trying\x20to\x20emit\x20presence','\x20not\x20found','\x20pending\x20tickets\x20channel.','create','8712207DEwbXi','composing','groupsTab','toString','sockets','onConnect:\x20User\x20','jsonwebtoken','size','checkPresence','\x20for\x20ticket\x20','secret','Clossing\x20all\x20socket\x20sessions','FRONTEND_URL','enabled','joinNotification','companyId','__esModule','../models/Ticket','\x20clients','forEach','get','\x20for\x20user\x20','toISOString','__importDefault','getIO','userId','\x20leaved\x20','then','Received\x20checkPresence\x20for\x20ticket\x20',']:\x20Channel:\x20','../models/Queue','\x20tickets\x20channel.','recording','save','14mGzFMi','some','../models/User','107850UXKAYF','decrementCounter','5142natCzB','notification','started\x20session\x20','adapter','leaveChatBox','\x20in\x20company\x20','apply','leaveNotification','Debug\x20connection\x20info\x20sent\x20to\x20user\x20','verify','SOCKET_ADMIN','debugConnection','Error\x20decoding\x20token:\x20','\x20joined\x20queue\x20','\x20joined\x20presence\x20channel\x20for\x20ticket\x20','Socket\x20IO\x20not\x20initialized','findByPk','4979064KRnCtG','-open','update','queues','query','rooms',']:\x20User:\x20','parse','joinNotification[','super','Ticket\x20room:\x20','debug','error','Presence\x20event\x20','joinChatbox[','connection','GetCompanySetting','development','(((.+)+)+)+$','undefined','../helpers/CheckSettings','initIO','default','emit','\x20cannot\x20subscribe\x20to\x20','user-','Error\x20counting\x20room\x20clients:\x20','1135FKvMtn','2733900ikHFqJ','1014874SASzQn','\x20channel.','status-','-presence','\x20clients,\x20','-pending','Invalid\x20attempt\x20to\x20join\x20channel\x20of\x20ticket\x20','ticket-','Error\x20joining\x20ticket\x20room\x20','message','socket.io','\x20from\x20user\x20','Client\x20Connected:\x20'];a298_0x5d82=function(){return _0x2b0f04;};return a298_0x5d82();}const a298_0x3afd50=(function(){let _0x2093f0=!![];return function(_0x3ec94e,_0x495c07){const _0x44ebb8=_0x2093f0?function(){const _0x192a06=a298_0x53d9;if(_0x495c07){const _0x4c06ca=_0x495c07[_0x192a06(0xdd)](_0x3ec94e,arguments);return _0x495c07=null,_0x4c06ca;}}:function(){};return _0x2093f0=![],_0x44ebb8;};}()),a298_0x5b86f7=a298_0x3afd50(this,function(){const _0x23a2c6=a298_0x53d9;return a298_0x5b86f7[_0x23a2c6(0xb3)]()[_0x23a2c6(0xa8)](_0x23a2c6(0xfa))[_0x23a2c6(0xb3)]()[_0x23a2c6(0x9f)](a298_0x5b86f7)[_0x23a2c6(0xa8)](_0x23a2c6(0xfa));});a298_0x5b86f7();'use strict';var __importDefault=this&&this[a298_0xd2dda9(0xc7)]||function(_0x32c32a){const _0x146590=a298_0xd2dda9;return _0x32c32a&&_0x32c32a[_0x146590(0xc0)]?_0x32c32a:{'default':_0x32c32a};};Object[a298_0xd2dda9(0x94)](exports,a298_0xd2dda9(0xc0),{'value':!![]}),exports[a298_0xd2dda9(0xc8)]=exports[a298_0xd2dda9(0x95)]=exports[a298_0xd2dda9(0xfd)]=void 0x0;const socket_io_1=require(a298_0xd2dda9(0x10f)),admin_ui_1=require(a298_0xd2dda9(0x9d)),jsonwebtoken_1=require(a298_0xd2dda9(0xb6)),AppError_1=__importDefault(require(a298_0xd2dda9(0xa7))),logger_1=require(a298_0xd2dda9(0xa2)),User_1=__importDefault(require(a298_0xd2dda9(0xd4))),Queue_1=__importDefault(require(a298_0xd2dda9(0xce))),Ticket_1=__importDefault(require(a298_0xd2dda9(0xc1))),auth_1=__importDefault(require(a298_0xd2dda9(0xa9))),counter_1=require('./counter'),UserSocketSession_1=__importDefault(require('../models/UserSocketSession')),CheckSettings_1=require(a298_0xd2dda9(0xfc));let io;const joinTicketChannel=async(_0x1642eb,_0x2fdd14,_0x3cbc56,_0x21d23f)=>{const _0x4dc1c8=a298_0xd2dda9,_0x2aa722=_0x21d23f[_0x4dc1c8(0xa5)](_0x4dc1c8(0x10c)+_0x2fdd14);_0x2aa722===0x1&&_0x1642eb[_0x4dc1c8(0x9a)](_0x2fdd14),logger_1[_0x4dc1c8(0x91)][_0x4dc1c8(0xf3)](_0x4dc1c8(0xf6)+_0x2aa722+_0x4dc1c8(0xcd)+_0x2fdd14+'\x20by\x20user\x20'+_0x3cbc56['id']);},initIO=_0x239a86=>{const _0x163e18=a298_0xd2dda9;return io=new socket_io_1['Server'](_0x239a86,{'cors':{'origin':process[_0x163e18(0xa4)][_0x163e18(0xbc)]}}),process[_0x163e18(0xa4)][_0x163e18(0xe1)]&&JSON[_0x163e18(0xef)](process[_0x163e18(0xa4)][_0x163e18(0xe1)])&&User_1[_0x163e18(0xfe)]['findByPk'](0x1)['then'](_0x10e5f0=>{const _0x45dd2d=_0x163e18;(0x0,admin_ui_1[_0x45dd2d(0x119)])(io,{'auth':{'type':'basic','username':_0x10e5f0['email'],'password':_0x10e5f0['passwordHash']},'mode':_0x45dd2d(0xf9)});}),UserSocketSession_1[_0x163e18(0xfe)][_0x163e18(0xea)]({'active':![]},{'where':{'active':!![]}})[_0x163e18(0xcb)](_0x56b1e4=>{const _0x1e05e9=_0x163e18;logger_1[_0x1e05e9(0x91)][_0x1e05e9(0xf3)](_0x1e05e9(0xbb));}),io['on'](_0x163e18(0xf7),async _0xc1c576=>{const _0x551895=_0x163e18;logger_1[_0x551895(0x91)][_0x551895(0x9c)](_0x551895(0x111)+_0xc1c576['id']);const {token:_0x825ebc}=_0xc1c576['handshake'][_0x551895(0xec)];let _0x452820=null;try{_0x452820=(0x0,jsonwebtoken_1[_0x551895(0xe0)])(_0x825ebc,auth_1['default'][_0x551895(0xba)]),logger_1['logger'][_0x551895(0xf3)](_0x452820,'io-onConnection:\x20tokenData');}catch(_0x463d3c){return logger_1['logger']['debug'](_0x551895(0xe3)+_0x463d3c?.[_0x551895(0x10e)]),_0xc1c576[_0x551895(0xa3)](),io;}const _0x631822=new counter_1['CounterManager']();let _0x1622de=null;const _0x179642=_0x452820['id'];if(_0x179642&&_0x179642!==_0x551895(0xfb)&&_0x179642!=='null'){_0x1622de=await User_1[_0x551895(0xfe)][_0x551895(0xe7)](_0x179642,{'include':[Queue_1['default']]});if(_0x1622de)_0x1622de[_0x551895(0x89)]=!![],await _0x1622de[_0x551895(0xd1)]();else return logger_1[_0x551895(0x91)][_0x551895(0x9c)](_0x551895(0xb5)+_0x179642+_0x551895(0xad)),_0xc1c576[_0x551895(0xa3)](),io;}else return logger_1['logger'][_0x551895(0x9c)](_0x551895(0xa6)),_0xc1c576[_0x551895(0xa3)](),io;return UserSocketSession_1[_0x551895(0xfe)][_0x551895(0xaf)]({'id':_0xc1c576['id'],'userId':_0x179642,'active':!![]})['then'](_0x234b70=>{const _0x472aea=_0x551895;logger_1[_0x472aea(0x91)][_0x472aea(0xf3)](_0x472aea(0xd9)+_0xc1c576['id']+_0x472aea(0xc5)+_0x179642);}),_0xc1c576['on'](_0x551895(0xa3),async()=>{const _0x1d80a0=_0x551895;UserSocketSession_1[_0x1d80a0(0xfe)][_0x1d80a0(0xea)]({'active':![]},{'where':{'id':_0xc1c576['id']}})[_0x1d80a0(0xcb)](()=>{const _0x466f75=_0x1d80a0;logger_1[_0x466f75(0x91)][_0x466f75(0xf3)](_0x466f75(0x99)+_0xc1c576['id']+_0x466f75(0xc5)+_0x179642);});}),_0xc1c576[_0x551895(0x9a)](_0x551895(0x112)+_0x1622de[_0x551895(0xbf)]+_0x551895(0x115)),_0xc1c576[_0x551895(0x9a)](_0x551895(0x101)+_0x1622de['id']),_0x1622de[_0x551895(0xf1)]&&_0xc1c576[_0x551895(0x9a)](_0x551895(0xf1)),_0xc1c576['on'](_0x551895(0x118),async _0x2bf111=>{const _0x47424c=_0x551895;try{logger_1[_0x47424c(0x91)][_0x47424c(0x9c)](_0x47424c(0x96)+_0x1622de['id']+'\x20joining\x20ticket\x20room:\x20'+_0x2bf111),_0xc1c576[_0x47424c(0x9a)](_0x2bf111),_0xc1c576[_0x47424c(0xff)](_0x47424c(0x8d),{'ticketId':_0x2bf111,'timestamp':new Date()[_0x47424c(0xc6)](),'success':!![]});}catch(_0xb80a30){logger_1['logger'][_0x47424c(0xf4)](_0x47424c(0x10d)+_0x2bf111+':\x20'+_0xb80a30['message']),_0xc1c576[_0x47424c(0xff)](_0x47424c(0x8d),{'ticketId':_0x2bf111,'timestamp':new Date()['toISOString'](),'success':![],'error':_0xb80a30[_0x47424c(0x10e)]});}}),_0xc1c576['on'](_0x551895(0xb8),async _0x2523ab=>{const _0x152e0e=_0x551895;try{const {ticketId:_0x2eb4ec}=_0x2523ab;logger_1[_0x152e0e(0x91)][_0x152e0e(0x9c)](_0x152e0e(0xcc)+_0x2eb4ec+_0x152e0e(0x110)+_0x1622de['id']),_0xc1c576[_0x152e0e(0xff)](_0x152e0e(0x112)+_0x1622de[_0x152e0e(0xbf)]+_0x152e0e(0x108),{'ticketId':parseInt(_0x2eb4ec),'presence':_0x152e0e(0xb1),'isTest':!![],'timestamp':new Date()[_0x152e0e(0xc6)]()}),setTimeout(()=>{const _0x185899=_0x152e0e;_0xc1c576['emit'](_0x185899(0x112)+_0x1622de['companyId']+_0x185899(0x108),{'ticketId':parseInt(_0x2eb4ec),'presence':_0x185899(0xd0),'isTest':!![],'timestamp':new Date()['toISOString']()});},0x7d0),setTimeout(()=>{const _0x1b620d=_0x152e0e;_0xc1c576[_0x1b620d(0xff)]('company-'+_0x1622de[_0x1b620d(0xbf)]+_0x1b620d(0x108),{'ticketId':parseInt(_0x2eb4ec),'presence':_0x1b620d(0x9e),'isTest':!![],'timestamp':new Date()[_0x1b620d(0xc6)]()}),logger_1[_0x1b620d(0x91)]['info'](_0x1b620d(0x8e)+_0x2eb4ec);},0xfa0);}catch(_0x194690){logger_1[_0x152e0e(0x91)][_0x152e0e(0xf4)](_0x152e0e(0x116)+_0x194690[_0x152e0e(0x10e)]);}}),_0xc1c576['on'](_0x551895(0x117),async _0x2a5ec0=>{const _0x433cd0=_0x551895;if(!_0x2a5ec0||_0x2a5ec0===_0x433cd0(0xfb))return;Ticket_1[_0x433cd0(0xfe)][_0x433cd0(0xe7)](_0x2a5ec0)['then'](async _0x2e7932=>{const _0x574045=_0x433cd0;if(_0x2e7932&&_0x2e7932['companyId']===_0x1622de['companyId']){const _0x13926c=_0x2e7932[_0x574045(0xc9)]===_0x1622de['id'],_0x5d5648=_0x1622de[_0x574045(0x98)]==='admin',_0x31c4e5=_0x1622de['allTicket']===_0x574045(0xbd),_0x45b31b=_0x1622de[_0x574045(0xeb)]?.[_0x574045(0xd3)](_0x4cd64b=>_0x4cd64b['id']===_0x2e7932[_0x574045(0xaa)]);_0x13926c||_0x5d5648||_0x31c4e5||_0x45b31b?(joinTicketChannel(_0xc1c576,_0x2a5ec0,_0x1622de,_0x631822),_0xc1c576['join'](_0x574045(0x10c)+_0x2a5ec0+_0x574045(0x108)),logger_1['logger'][_0x574045(0xf3)](_0x574045(0x96)+_0x1622de['id']+_0x574045(0xe5)+_0x2a5ec0)):logger_1['logger']['info']('User\x20'+_0x1622de['id']+'\x20not\x20authorized\x20to\x20join\x20ticket\x20'+_0x2a5ec0);}else{if(_0x2e7932[_0x574045(0x113)]&&await(0x0,CheckSettings_1[_0x574045(0xf8)])(_0x1622de[_0x574045(0xbf)],_0x574045(0xb2),_0x574045(0xa0))===_0x574045(0xbd)){let _0x131164=![];_0x1622de[_0x574045(0xeb)][_0x574045(0xc3)](_0x2c1933=>{const _0xeefd51=_0x574045;_0x2c1933['id']===_0x2e7932[_0xeefd51(0xaa)]&&(_0x131164=!![]);}),_0x131164?(joinTicketChannel(_0xc1c576,_0x2a5ec0,_0x1622de,_0x631822),_0xc1c576[_0x574045(0x9a)](_0x574045(0x10c)+_0x2a5ec0+_0x574045(0x108)),logger_1[_0x574045(0x91)][_0x574045(0xf3)](_0x574045(0x96)+_0x1622de['id']+_0x574045(0xe5)+_0x2a5ec0)):logger_1[_0x574045(0x91)][_0x574045(0x9c)](_0x574045(0x10b)+_0x2a5ec0+'\x20by\x20user\x20'+_0x1622de['id']);}else logger_1[_0x574045(0x91)]['info']('Invalid\x20attempt\x20to\x20join\x20channel\x20of\x20ticket\x20'+_0x2a5ec0+_0x574045(0x8a)+_0x1622de['id']);}},_0xb9d1f6=>{const _0x13f00e=_0x433cd0;logger_1[_0x13f00e(0x91)][_0x13f00e(0xf4)](_0xb9d1f6,'Error\x20fetching\x20ticket\x20'+_0x2a5ec0);});}),_0xc1c576['on'](_0x551895(0xdb),async _0x612e5f=>{const _0x282032=_0x551895;if(!_0x612e5f||_0x612e5f==='undefined')return;const _0x53a96f=_0x631822[_0x282032(0xd6)](_0x282032(0x10c)+_0x612e5f);_0x53a96f===0x0&&(_0xc1c576['leave'](_0x612e5f),_0xc1c576['leave'](_0x282032(0x10c)+_0x612e5f+'-presence')),logger_1[_0x282032(0x91)][_0x282032(0xf3)](_0x282032(0x87)+_0x53a96f+']:\x20Channel:\x20'+_0x612e5f+_0x282032(0x8a)+_0x1622de['id']);}),_0xc1c576['on'](_0x551895(0xbe),async()=>{const _0x865446=_0x551895,_0x2fd048=_0x631822[_0x865446(0xa5)](_0x865446(0xd8));_0x2fd048===0x1&&(_0x1622de['profile']===_0x865446(0x92)?_0xc1c576[_0x865446(0x9a)]('company-'+_0x1622de[_0x865446(0xbf)]+_0x865446(0xa1)):_0x1622de[_0x865446(0xeb)][_0x865446(0xc3)](_0x5da360=>{const _0x163cad=_0x865446;logger_1[_0x163cad(0x91)][_0x163cad(0xf3)](_0x163cad(0x96)+_0x1622de['id']+'\x20of\x20company\x20'+_0x1622de[_0x163cad(0xbf)]+_0x163cad(0xe4)+_0x5da360['id']+'\x20channel.'),_0xc1c576['join'](_0x163cad(0x114)+_0x5da360['id']+_0x163cad(0xa1));})),logger_1[_0x865446(0x91)][_0x865446(0xf3)](_0x865446(0xf0)+_0x2fd048+_0x865446(0xee)+_0x1622de['id']);}),_0xc1c576['on'](_0x551895(0xde),async()=>{const _0x271f43=_0x551895,_0x5c7269=_0x631822[_0x271f43(0xd6)](_0x271f43(0xd8));_0x5c7269===0x0&&(_0x1622de['profile']===_0x271f43(0x92)?_0xc1c576[_0x271f43(0x8b)](_0x271f43(0x112)+_0x1622de[_0x271f43(0xbf)]+_0x271f43(0xa1)):_0x1622de['queues'][_0x271f43(0xc3)](_0x3a36ea=>{const _0x91cc6c=_0x271f43;logger_1[_0x91cc6c(0x91)][_0x91cc6c(0xf3)](_0x91cc6c(0x96)+_0x1622de['id']+_0x91cc6c(0x8c)+_0x1622de['companyId']+_0x91cc6c(0x90)+_0x3a36ea['id']+_0x91cc6c(0x106)),_0xc1c576[_0x91cc6c(0x8b)](_0x91cc6c(0x114)+_0x3a36ea['id']+'-notification');})),logger_1[_0x271f43(0x91)][_0x271f43(0xf3)](_0x271f43(0x93)+_0x5c7269+_0x271f43(0xee)+_0x1622de['id']);}),_0xc1c576['on']('joinTickets',_0x178523=>{const _0x42d001=_0x551895;if(_0x631822[_0x42d001(0xa5)](_0x42d001(0x107)+_0x178523)===0x1){if(_0x1622de[_0x42d001(0x98)]===_0x42d001(0x92))logger_1[_0x42d001(0x91)][_0x42d001(0xf3)](_0x42d001(0x8f)+_0x1622de['id']+_0x42d001(0x8c)+_0x1622de[_0x42d001(0xbf)]+'\x20joined\x20'+_0x178523+'\x20tickets\x20channel.'),_0xc1c576['join']('company-'+_0x1622de[_0x42d001(0xbf)]+'-'+_0x178523);else _0x178523===_0x42d001(0x9b)?_0x1622de[_0x42d001(0xeb)][_0x42d001(0xc3)](_0x3c4f51=>{const _0x14ad83=_0x42d001;logger_1[_0x14ad83(0x91)][_0x14ad83(0xf3)](_0x14ad83(0x96)+_0x1622de['id']+_0x14ad83(0x8c)+_0x1622de[_0x14ad83(0xbf)]+'\x20joined\x20queue\x20'+_0x3c4f51['id']+_0x14ad83(0xae)),_0xc1c576['join'](_0x14ad83(0x114)+_0x3c4f51['id']+'-pending');}):logger_1[_0x42d001(0x91)][_0x42d001(0xf3)](_0x42d001(0x96)+_0x1622de['id']+_0x42d001(0x100)+_0x178523);}}),_0xc1c576['on'](_0x551895(0x97),_0x5e3e76=>{const _0x1c1557=_0x551895;if(_0x631822[_0x1c1557(0xd6)](_0x1c1557(0x107)+_0x5e3e76)===0x0){if(_0x1622de['profile']===_0x1c1557(0x92))logger_1[_0x1c1557(0x91)][_0x1c1557(0xf3)](_0x1c1557(0x8f)+_0x1622de['id']+_0x1c1557(0x8c)+_0x1622de[_0x1c1557(0xbf)]+_0x1c1557(0xca)+_0x5e3e76+_0x1c1557(0xcf)),_0xc1c576[_0x1c1557(0x8b)](_0x1c1557(0x112)+_0x1622de[_0x1c1557(0xbf)]+'-'+_0x5e3e76);else _0x5e3e76==='pending'&&_0x1622de[_0x1c1557(0xeb)]['forEach'](_0x2eddce=>{const _0x5a7ad2=_0x1c1557;logger_1[_0x5a7ad2(0x91)][_0x5a7ad2(0xf3)]('User\x20'+_0x1622de['id']+_0x5a7ad2(0x8c)+_0x1622de[_0x5a7ad2(0xbf)]+_0x5a7ad2(0x90)+_0x2eddce['id']+_0x5a7ad2(0xae)),_0xc1c576[_0x5a7ad2(0x8b)]('queue-'+_0x2eddce['id']+_0x5a7ad2(0x10a));});}}),_0xc1c576['on'](_0x551895(0xe2),()=>{const _0x40cb24=_0x551895,_0x2a8c2d=Array['from'](_0xc1c576[_0x40cb24(0xed)]);_0xc1c576[_0x40cb24(0xff)]('debugInfo',{'socketId':_0xc1c576['id'],'userId':_0x1622de['id'],'companyId':_0x1622de[_0x40cb24(0xbf)],'connectedRooms':_0x2a8c2d,'timestamp':new Date()[_0x40cb24(0xc6)]()}),logger_1[_0x40cb24(0x91)]['info'](_0x40cb24(0xdf)+_0x1622de['id']);}),_0xc1c576['emit']('ready'),io;}),io;};exports[a298_0xd2dda9(0xfd)]=initIO;const emitPresence=(_0x406488,_0x1f221f,_0x4052b9)=>{const _0x5a42e1=a298_0xd2dda9;if(!io){logger_1[_0x5a42e1(0x91)][_0x5a42e1(0xf4)](_0x5a42e1(0xac));return;}logger_1[_0x5a42e1(0x91)]['info']('Emitting\x20presence\x20event:\x20'+_0x4052b9+_0x5a42e1(0xb9)+_0x1f221f+_0x5a42e1(0xdc)+_0x406488);const _0x37b4ed=[_0x5a42e1(0x10c)+_0x1f221f+_0x5a42e1(0x108),_0x5a42e1(0x10c)+_0x1f221f,_0x1f221f[_0x5a42e1(0xb3)](),_0x5a42e1(0x112)+_0x406488+_0x5a42e1(0xe9),_0x5a42e1(0x112)+_0x406488+'-pending'];logger_1[_0x5a42e1(0x91)][_0x5a42e1(0xf3)]('Broadcasting\x20to\x20channels:\x20'+_0x37b4ed[_0x5a42e1(0x9a)](',\x20')),io['to'](_0x5a42e1(0x112)+_0x406488+'-mainchannel')['emit']('company-'+_0x406488+_0x5a42e1(0x108),{'ticketId':_0x1f221f,'presence':_0x4052b9,'timestamp':new Date()['toISOString']()}),logger_1[_0x5a42e1(0x91)]['debug'](_0x5a42e1(0xf5)+_0x4052b9+_0x5a42e1(0xab)+_0x1f221f);try{const _0x4a9e7a=io[_0x5a42e1(0xb4)][_0x5a42e1(0xda)][_0x5a42e1(0xed)][_0x5a42e1(0xc4)]('company-'+_0x406488+'-mainchannel'),_0x105953=io['sockets']['adapter'][_0x5a42e1(0xed)]['get'](_0x1f221f['toString']());logger_1[_0x5a42e1(0x91)][_0x5a42e1(0x9c)]('Socket\x20stats\x20-\x20Main\x20company\x20room:\x20'+(_0x4a9e7a?_0x4a9e7a['size']:0x0)+_0x5a42e1(0x109)+(_0x5a42e1(0xf2)+(_0x105953?_0x105953[_0x5a42e1(0xb7)]:0x0)+_0x5a42e1(0xc2)));}catch(_0x2a23fa){logger_1[_0x5a42e1(0x91)][_0x5a42e1(0xf4)](_0x5a42e1(0x102)+_0x2a23fa[_0x5a42e1(0x10e)]);}};exports['emitPresence']=emitPresence;const getIO=()=>{const _0x4a207b=a298_0xd2dda9;if(!io)throw new AppError_1[(_0x4a207b(0xfe))](_0x4a207b(0xe6));return io;};exports[a298_0xd2dda9(0xc8)]=getIO;