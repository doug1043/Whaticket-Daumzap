const a258_0x4662ea=a258_0x1eed;(function(_0x13c549,_0x3f48f8){const _0x326220=a258_0x1eed,_0x50132a=_0x13c549();while(!![]){try{const _0x5a4608=-parseInt(_0x326220(0x13c))/0x1*(parseInt(_0x326220(0x131))/0x2)+-parseInt(_0x326220(0x18e))/0x3+-parseInt(_0x326220(0x135))/0x4+parseInt(_0x326220(0x13b))/0x5*(-parseInt(_0x326220(0x162))/0x6)+-parseInt(_0x326220(0x155))/0x7*(-parseInt(_0x326220(0x138))/0x8)+parseInt(_0x326220(0x187))/0x9*(parseInt(_0x326220(0x19e))/0xa)+parseInt(_0x326220(0x191))/0xb;if(_0x5a4608===_0x3f48f8)break;else _0x50132a['push'](_0x50132a['shift']());}catch(_0x2e65cc){_0x50132a['push'](_0x50132a['shift']());}}}(a258_0x3e67,0x71aaf));const a258_0x154ad1=(function(){let _0x1e3322=!![];return function(_0x506807,_0x14e706){const _0x2257bf=_0x1e3322?function(){const _0x4c8f6a=a258_0x1eed;if(_0x14e706){const _0x233bce=_0x14e706[_0x4c8f6a(0x16f)](_0x506807,arguments);return _0x14e706=null,_0x233bce;}}:function(){};return _0x1e3322=![],_0x2257bf;};}()),a258_0x2e0337=a258_0x154ad1(this,function(){const _0x51d557=a258_0x1eed;return a258_0x2e0337[_0x51d557(0x19a)]()[_0x51d557(0x189)]('(((.+)+)+)+$')[_0x51d557(0x19a)]()[_0x51d557(0x140)](a258_0x2e0337)['search']('(((.+)+)+)+$');});a258_0x2e0337();'use strict';var __createBinding=this&&this[a258_0x4662ea(0x18d)]||(Object[a258_0x4662ea(0x186)]?function(_0xbceb38,_0x123b53,_0x28961c,_0xc1baf1){const _0x291c22=a258_0x4662ea;if(_0xc1baf1===undefined)_0xc1baf1=_0x28961c;var _0x383bda=Object['getOwnPropertyDescriptor'](_0x123b53,_0x28961c);(!_0x383bda||('get'in _0x383bda?!_0x123b53['__esModule']:_0x383bda[_0x291c22(0x168)]||_0x383bda[_0x291c22(0x193)]))&&(_0x383bda={'enumerable':!![],'get':function(){return _0x123b53[_0x28961c];}}),Object[_0x291c22(0x18b)](_0xbceb38,_0xc1baf1,_0x383bda);}:function(_0x2c376c,_0x47c5f2,_0x5be048,_0x77a07){if(_0x77a07===undefined)_0x77a07=_0x5be048;_0x2c376c[_0x77a07]=_0x47c5f2[_0x5be048];}),__setModuleDefault=this&&this[a258_0x4662ea(0x14c)]||(Object[a258_0x4662ea(0x186)]?function(_0x42d755,_0xdbff86){const _0xb391ef=a258_0x4662ea;Object[_0xb391ef(0x18b)](_0x42d755,_0xb391ef(0x198),{'enumerable':!![],'value':_0xdbff86});}:function(_0x16253b,_0x357d7f){const _0x131f0f=a258_0x4662ea;_0x16253b[_0x131f0f(0x198)]=_0x357d7f;}),__importStar=this&&this[a258_0x4662ea(0x1aa)]||function(_0x5b1384){const _0x2e7775=a258_0x4662ea;if(_0x5b1384&&_0x5b1384[_0x2e7775(0x190)])return _0x5b1384;var _0x4245ee={};if(_0x5b1384!=null){for(var _0x1603d1 in _0x5b1384)if(_0x1603d1!==_0x2e7775(0x198)&&Object[_0x2e7775(0x178)][_0x2e7775(0x18f)][_0x2e7775(0x143)](_0x5b1384,_0x1603d1))__createBinding(_0x4245ee,_0x5b1384,_0x1603d1);}return __setModuleDefault(_0x4245ee,_0x5b1384),_0x4245ee;},__importDefault=this&&this['__importDefault']||function(_0x1e127e){return _0x1e127e&&_0x1e127e['__esModule']?_0x1e127e:{'default':_0x1e127e};};Object[a258_0x4662ea(0x18b)](exports,a258_0x4662ea(0x190),{'value':!![]}),exports[a258_0x4662ea(0x177)]=exports[a258_0x4662ea(0x14f)]=exports[a258_0x4662ea(0x1ab)]=exports[a258_0x4662ea(0x182)]=exports[a258_0x4662ea(0x1ac)]=void 0x0;const Sentry=__importStar(require(a258_0x4662ea(0x19d))),baileys_1=__importStar(require(a258_0x4662ea(0x12f))),Whatsapp_1=__importDefault(require(a258_0x4662ea(0x16b))),Contact_1=__importDefault(require('../models/Contact')),logger_1=require(a258_0x4662ea(0x199)),logger_2=__importDefault(require(a258_0x4662ea(0x16c))),authState_1=__importDefault(require(a258_0x4662ea(0x170))),AppError_1=__importDefault(require(a258_0x4662ea(0x17d))),socket_1=require(a258_0x4662ea(0x196)),StartWhatsAppSession_1=require('../services/WbotServices/StartWhatsAppSession'),DeleteBaileysService_1=__importDefault(require(a258_0x4662ea(0x18a))),node_cache_1=__importDefault(require(a258_0x4662ea(0x152))),date_fns_1=require(a258_0x4662ea(0x172)),wbotMessageListener_1=require(a258_0x4662ea(0x1a1)),ImportWhatsAppMessageService_1=__importDefault(require(a258_0x4662ea(0x15f))),loggerBaileys=logger_2[a258_0x4662ea(0x198)][a258_0x4662ea(0x151)]({});loggerBaileys[a258_0x4662ea(0x1b2)]=a258_0x4662ea(0x14e);const sessions=[],retriesQrCodeMap=new Map(),getWbot=_0x457224=>{const _0xc88557=a258_0x4662ea,_0x1879c6=sessions['findIndex'](_0x4a867b=>_0x4a867b['id']===_0x457224);if(_0x1879c6===-0x1)throw new AppError_1[(_0xc88557(0x198))](_0xc88557(0x192));return sessions[_0x1879c6];};exports[a258_0x4662ea(0x1ac)]=getWbot;const removeWbot=async(_0x55534c,_0xe2e249=!![])=>{const _0x270ead=a258_0x4662ea;try{const _0x244191=sessions[_0x270ead(0x17e)](_0x79e7ee=>_0x79e7ee['id']===_0x55534c);_0x244191!==-0x1&&(_0xe2e249&&(sessions[_0x244191]['logout'](),sessions[_0x244191]['ws']['close']()),sessions[_0x270ead(0x148)](_0x244191,0x1));}catch(_0x1431ef){logger_1[_0x270ead(0x139)][_0x270ead(0x160)](_0x1431ef);}};function a258_0x1eed(_0x198bcf,_0x52c1a2){const _0x42d7c0=a258_0x3e67();return a258_0x1eed=function(_0x2e0337,_0x154ad1){_0x2e0337=_0x2e0337-0x12e;let _0x3e6721=_0x42d7c0[_0x2e0337];return _0x3e6721;},a258_0x1eed(_0x198bcf,_0x52c1a2);}exports[a258_0x4662ea(0x182)]=removeWbot;function a258_0x3e67(){const _0x165be8=['Importando\x20whtasapp!','__importStar','restartWbot','getWbot','messages','captureException','Message','bind','DisconnectReason','level','-mainchannel','BROWSER_CLIENT','open','forEach','join','parse','@whiskeysockets/baileys','company-','6KNUiLO','isLegacy:\x20','Running','includes','1025980pezSfQ','ListType','getIO','8776BkqEXY','logger','unshift','2971445wtawfb','79754VTKfLI','info','stringify','update','constructor','keys','remoteJid','call','presence.update','getTime','get','emit','splice','StartWhatsAppSession','statusImportMessages','removeAllListeners','__setModuleDefault',',\x20isLatest:\x20','silent','dataMessages','split','child','node-cache','log','add','140IxYsyy','key','listMessage','replace','isJidBroadcast','BROWSER_VERSION','10.0','push','whatsappSession','wsocket\x20or\x20wsocket.ev\x20is\x20null.','../services/WhatsappService/ImportWhatsAppMessageService','error','type','6qhxNFd','PENDING','reload','proto','statusCode','user','writable','PRODUCT_LIST','debug','../models/Whatsapp','@whiskeysockets/baileys/lib/Utils/logger','-contact','creds','apply','../helpers/authState','listType','date-fns','delete','Socket\x20\x20','creds.update','companyId','initWASocket','prototype','makeCacheableSignalKeyStore','map','importOldMessages','set','../errors/AppError','findIndex','env','SINGLE_SELECT','importRecentMessages','removeWbot','DISCONNECTED','-whatsappSession','BROWSER_NAME','create','16731luRNzw','newsletter','search','../services/BaileysServices/DeleteBaileysService','defineProperty','message','__createBinding','1195752MMoEuM','hasOwnProperty','__esModule','14977160FWrlht','ERR_WAPP_NOT_INITIALIZED','configurable','close','ListMessage','./socket','g.us','default','../utils/logger','toString','Daumzap','connection.update','@sentry/node','3070iuReDQ','qrcode','fetchLatestBaileysVersion','../services/WbotServices/wbotMessageListener','findAll','CONNECTED','deviceSentMessage','lastKnownPresence','floor','isValidMsg','[wbot.ts]\x20getMessage:\x20result\x20of\x20recovering\x20message\x20'];a258_0x3e67=function(){return _0x165be8;};return a258_0x3e67();}const restartWbot=async(_0x2202be,_0x467a3d)=>{const _0x591dc3=a258_0x4662ea;try{const _0x3b9216={'where':{'companyId':_0x2202be},'attributes':['id']},_0xc7fa78=await Whatsapp_1[_0x591dc3(0x198)][_0x591dc3(0x1a2)](_0x3b9216);_0xc7fa78[_0x591dc3(0x17a)](async _0x11b50a=>{const _0x1f8189=_0x591dc3,_0x55b641=sessions[_0x1f8189(0x17e)](_0x592b16=>_0x592b16['id']===_0x11b50a['id']);_0x55b641!==-0x1&&sessions[_0x55b641]['ws'][_0x1f8189(0x194)]();});}catch(_0x32dfeb){logger_1['logger'][_0x591dc3(0x160)](_0x32dfeb);}};exports[a258_0x4662ea(0x1ab)]=restartWbot,exports[a258_0x4662ea(0x14f)]=[];const initWASocket=async _0x125b5c=>{return new Promise(async(_0x299607,_0x67edee)=>{const _0x197159=a258_0x1eed;try{await((async()=>{const _0x40fd67=a258_0x1eed,_0x4045fe=(0x0,socket_1[_0x40fd67(0x137)])(),_0x432de2=await Whatsapp_1[_0x40fd67(0x198)]['findOne']({'where':{'id':_0x125b5c['id']}});if(!_0x432de2)return;const {id:_0x39f46d,name:_0x1a529d,provider:_0x5003d6}=_0x432de2,{version:_0x454b4f,isLatest:_0x29fb36}=await(0x0,baileys_1[_0x40fd67(0x1a0)])(),_0x5c9366=_0x5003d6==='stable'?!![]:![];logger_1['logger'][_0x40fd67(0x13d)]('using\x20WA\x20v'+_0x454b4f[_0x40fd67(0x1b7)]('.')+_0x40fd67(0x14d)+_0x29fb36),logger_1['logger'][_0x40fd67(0x13d)](_0x40fd67(0x132)+_0x5c9366),logger_1[_0x40fd67(0x139)]['info']('Starting\x20session\x20'+_0x1a529d);let _0x620c97=0x0,_0x5115a2=null;const _0x18d622=(0x0,baileys_1['makeInMemoryStore'])({'logger':loggerBaileys});async function _0x5e2505(_0x154fea){const _0xb6a396=_0x40fd67;if(_0x18d622){const _0x27cc85=await _0x18d622['loadMessage'](_0x154fea[_0xb6a396(0x142)],_0x154fea['id']);return logger_1[_0xb6a396(0x139)][_0xb6a396(0x16a)]({'key':_0x154fea,'message':JSON[_0xb6a396(0x13e)](_0x27cc85)},_0xb6a396(0x1a8)+_0x154fea['remoteJid']+'\x20'+_0x154fea['id']),_0x27cc85?.['message']||undefined;}return baileys_1[_0xb6a396(0x165)]['Message']['fromObject']({});}const {state:_0x6f74ae,saveState:_0xcf03d5}=await(0x0,authState_1['default'])(_0x125b5c),_0x554890=new node_cache_1[(_0x40fd67(0x198))]();_0x5115a2=(0x0,baileys_1[_0x40fd67(0x198)])({'logger':loggerBaileys,'printQRInTerminal':![],'browser':[process[_0x40fd67(0x17f)][_0x40fd67(0x1b4)]||_0x40fd67(0x19b),process[_0x40fd67(0x17f)][_0x40fd67(0x185)]||'Chrome',process[_0x40fd67(0x17f)][_0x40fd67(0x15a)]||_0x40fd67(0x15b)],'auth':{'creds':_0x6f74ae[_0x40fd67(0x16e)],'keys':(0x0,baileys_1[_0x40fd67(0x179)])(_0x6f74ae[_0x40fd67(0x141)],loggerBaileys)},'msgRetryCounterCache':_0x554890,'getMessage':_0x5e2505,'shouldIgnoreJid':_0x5b1ed4=>{const _0x2b5017=_0x40fd67;return(0x0,baileys_1[_0x2b5017(0x159)])(_0x5b1ed4)||_0x5b1ed4[_0x2b5017(0x134)](_0x2b5017(0x188));},'version':[0x2,0xbb8,0x3c8d6c7b],'transactionOpts':{'maxCommitRetries':0x1,'delayBetweenTriesMs':0xa},'patchMessageBeforeSending'(_0x555d58){const _0x492457=_0x40fd67;return _0x555d58['deviceSentMessage']?.[_0x492457(0x18c)]?.['listMessage']?.['listType']===baileys_1[_0x492457(0x165)]['Message'][_0x492457(0x195)][_0x492457(0x136)]['PRODUCT_LIST']&&(_0x555d58=JSON[_0x492457(0x12e)](JSON[_0x492457(0x13e)](_0x555d58)),_0x555d58[_0x492457(0x1a4)][_0x492457(0x18c)][_0x492457(0x157)][_0x492457(0x171)]=baileys_1[_0x492457(0x165)][_0x492457(0x1af)]['ListMessage'][_0x492457(0x136)][_0x492457(0x180)]),_0x555d58[_0x492457(0x157)]?.[_0x492457(0x171)]==baileys_1[_0x492457(0x165)][_0x492457(0x1af)][_0x492457(0x195)][_0x492457(0x136)][_0x492457(0x169)]&&(_0x555d58=JSON[_0x492457(0x12e)](JSON['stringify'](_0x555d58)),_0x555d58[_0x492457(0x157)][_0x492457(0x171)]=baileys_1[_0x492457(0x165)][_0x492457(0x1af)][_0x492457(0x195)][_0x492457(0x136)][_0x492457(0x180)]),_0x555d58;}});if(_0x432de2?.[_0x40fd67(0x17b)]){let _0x380d3e=new Date(_0x432de2[_0x40fd67(0x17b)])[_0x40fd67(0x145)](),_0x1c88ee=_0x432de2[_0x40fd67(0x181)]!=''?new Date(_0x432de2[_0x40fd67(0x181)])[_0x40fd67(0x145)]():new Date()['getTime']();console[_0x40fd67(0x153)](_0x40fd67(0x1a9));const _0x52d795=new Date()['getTime']();await _0x432de2[_0x40fd67(0x13f)]({'statusImportMessages':_0x52d795}),_0x5115a2['ev']['on']('messaging-history.set',async _0x5c0881=>{const _0x2edcd6=_0x40fd67,_0x105847=new Date()[_0x2edcd6(0x145)]();await _0x432de2['update']({'statusImportMessages':_0x105847});const _0x53319d=_0x125b5c['id'];let _0x3bfcee=_0x5c0881[_0x2edcd6(0x1ad)],_0x4e577e=[];_0x3bfcee[_0x2edcd6(0x1b6)](_0x1c14ea=>{const _0x33e760=_0x2edcd6,_0x3ce9a5=Math[_0x33e760(0x1a6)](_0x1c14ea['messageTimestamp']*0x3e8);(0x0,wbotMessageListener_1[_0x33e760(0x1a7)])(_0x1c14ea)&&(_0x380d3e<=_0x3ce9a5&&_0x1c88ee>=_0x3ce9a5&&(_0x1c14ea[_0x33e760(0x156)]?.[_0x33e760(0x142)][_0x33e760(0x150)]('@')[0x1]!=_0x33e760(0x197)?_0x4e577e[_0x33e760(0x15c)](_0x1c14ea):_0x432de2?.['importOldMessagesGroups']&&_0x4e577e['push'](_0x1c14ea)));}),!exports[_0x2edcd6(0x14f)]?.[_0x53319d]&&(exports[_0x2edcd6(0x14f)][_0x53319d]=[]),exports['dataMessages'][_0x53319d][_0x2edcd6(0x13a)](..._0x4e577e),setTimeout(async()=>{const _0x5f1ed0=_0x2edcd6;_0x4045fe['to']('company-'+_0x432de2[_0x5f1ed0(0x176)]+_0x5f1ed0(0x1b3))[_0x5f1ed0(0x147)]('importMessages-'+_0x432de2[_0x5f1ed0(0x176)],{'action':_0x5f1ed0(0x13f),'status':{'this':-0x1,'all':-0x1}}),_0x4045fe['to'](_0x5f1ed0(0x130)+_0x432de2['companyId']+_0x5f1ed0(0x1b3))[_0x5f1ed0(0x147)]('whatsappSession',{'action':_0x5f1ed0(0x13f),'session':_0x432de2});},0x1f4),setTimeout(async()=>{const _0x2d6590=_0x2edcd6;let _0x342783=!isNaN(new Date(Math['floor'](parseInt(_0x432de2?.[_0x2d6590(0x14a)])))['getTime']());if(_0x342783){const _0x4961df=new Date(Math[_0x2d6590(0x1a6)](parseInt(_0x432de2?.[_0x2d6590(0x14a)])))[_0x2d6590(0x145)](),_0x14748d=+(0x0,date_fns_1[_0x2d6590(0x154)])(_0x4961df,{'seconds':+0x2d})[_0x2d6590(0x145)]();_0x14748d<new Date()['getTime']()&&(await(0x0,ImportWhatsAppMessageService_1[_0x2d6590(0x198)])(_0x432de2),_0x432de2[_0x2d6590(0x13f)]({'statusImportMessages':_0x2d6590(0x133)}));}_0x4045fe['to'](_0x2d6590(0x130)+_0x432de2['companyId']+'-mainchannel')[_0x2d6590(0x147)](_0x2d6590(0x15d),{'action':_0x2d6590(0x13f),'session':_0x432de2});},0xafc8);});}_0x5115a2['ev']['on'](_0x40fd67(0x19c),async({connection:_0xea2482,lastDisconnect:_0x527e4d,qr:_0xae3cad})=>{const _0x1b5f29=_0x40fd67;logger_1[_0x1b5f29(0x139)]['info'](_0x1b5f29(0x174)+_0x1a529d+'\x20Connection\x20Update\x20'+(_0xea2482||'')+'\x20'+(_0x527e4d||''));if(_0x5115a2&&_0x5115a2['ev']){_0xea2482===_0x1b5f29(0x194)&&(_0x527e4d?.[_0x1b5f29(0x160)]?.['output']?.['statusCode']===0x193&&(await _0x125b5c['update']({'status':'PENDING','session':'','number':''}),await(0x0,DeleteBaileysService_1[_0x1b5f29(0x198)])(_0x125b5c['id']),_0x4045fe['to'](_0x1b5f29(0x130)+_0x125b5c[_0x1b5f29(0x176)]+_0x1b5f29(0x1b3))[_0x1b5f29(0x147)](_0x1b5f29(0x130)+_0x125b5c[_0x1b5f29(0x176)]+_0x1b5f29(0x184),{'action':_0x1b5f29(0x13f),'session':_0x125b5c}),await(0x0,exports[_0x1b5f29(0x182)])(_0x39f46d,![])),_0x527e4d?.[_0x1b5f29(0x160)]?.['output']?.[_0x1b5f29(0x166)]!==baileys_1[_0x1b5f29(0x1b1)]['loggedOut']?(await(0x0,exports['removeWbot'])(_0x39f46d,![]),setTimeout(()=>(0x0,StartWhatsAppSession_1[_0x1b5f29(0x149)])(_0x125b5c,_0x125b5c['companyId']),0x7d0)):(await _0x125b5c[_0x1b5f29(0x13f)]({'status':_0x1b5f29(0x163),'session':'','number':''}),await(0x0,DeleteBaileysService_1[_0x1b5f29(0x198)])(_0x125b5c['id']),_0x4045fe['to'](_0x1b5f29(0x130)+_0x125b5c['companyId']+_0x1b5f29(0x1b3))[_0x1b5f29(0x147)](_0x1b5f29(0x130)+_0x125b5c[_0x1b5f29(0x176)]+'-whatsappSession',{'action':'update','session':_0x125b5c}),await(0x0,exports[_0x1b5f29(0x182)])(_0x39f46d,![]),setTimeout(()=>(0x0,StartWhatsAppSession_1[_0x1b5f29(0x149)])(_0x125b5c,_0x125b5c[_0x1b5f29(0x176)]),0x7d0)));if(_0xea2482===_0x1b5f29(0x1b5)){await _0x125b5c['update']({'status':_0x1b5f29(0x1a3),'qrcode':'','retries':0x0,'number':_0x5115a2[_0x1b5f29(0x161)]==='md'?(0x0,baileys_1['jidNormalizedUser'])(_0x5115a2[_0x1b5f29(0x167)]['id'])[_0x1b5f29(0x150)]('@')[0x0]:'-'}),_0x4045fe['to'](_0x1b5f29(0x130)+_0x125b5c[_0x1b5f29(0x176)]+_0x1b5f29(0x1b3))[_0x1b5f29(0x147)]('company-'+_0x125b5c['companyId']+_0x1b5f29(0x184),{'action':_0x1b5f29(0x13f),'session':_0x125b5c});const _0x42b04a=sessions[_0x1b5f29(0x17e)](_0x51e27f=>_0x51e27f['id']===_0x125b5c['id']);_0x42b04a===-0x1&&(_0x5115a2['id']=_0x125b5c['id'],sessions['push'](_0x5115a2)),_0x299607(_0x5115a2);}if(_0xae3cad!==undefined){if(retriesQrCodeMap[_0x1b5f29(0x146)](_0x39f46d)&&retriesQrCodeMap[_0x1b5f29(0x146)](_0x39f46d)>=0x3)await _0x432de2[_0x1b5f29(0x13f)]({'status':_0x1b5f29(0x183),'qrcode':''}),await(0x0,DeleteBaileysService_1[_0x1b5f29(0x198)])(_0x432de2['id']),_0x4045fe['to']('company-'+_0x125b5c[_0x1b5f29(0x176)]+'-mainchannel')[_0x1b5f29(0x147)](_0x1b5f29(0x130)+_0x125b5c[_0x1b5f29(0x176)]+_0x1b5f29(0x184),{'action':_0x1b5f29(0x13f),'session':_0x432de2}),_0x5115a2['ev'][_0x1b5f29(0x14b)](_0x1b5f29(0x19c)),_0x5115a2['ws'][_0x1b5f29(0x194)](),_0x5115a2=null,retriesQrCodeMap[_0x1b5f29(0x173)](_0x39f46d);else{logger_1['logger']['info']('Session\x20QRCode\x20Generate\x20'+_0x1a529d),retriesQrCodeMap[_0x1b5f29(0x17c)](_0x39f46d,_0x620c97+=0x1),await _0x125b5c[_0x1b5f29(0x13f)]({'qrcode':_0xae3cad,'status':_0x1b5f29(0x19f),'retries':0x0,'number':''});const _0x36f169=sessions[_0x1b5f29(0x17e)](_0x345425=>_0x345425['id']===_0x125b5c['id']);_0x36f169===-0x1&&(_0x5115a2['id']=_0x125b5c['id'],sessions[_0x1b5f29(0x15c)](_0x5115a2)),_0x4045fe['to'](_0x1b5f29(0x130)+_0x125b5c[_0x1b5f29(0x176)]+_0x1b5f29(0x1b3))[_0x1b5f29(0x147)]('company-'+_0x125b5c[_0x1b5f29(0x176)]+_0x1b5f29(0x184),{'action':'update','session':_0x125b5c});}}}else console[_0x1b5f29(0x153)](_0x1b5f29(0x15e));}),_0x5115a2['ev']['on'](_0x40fd67(0x175),_0xcf03d5),_0x5115a2['ev']['on'](_0x40fd67(0x144),async({id:_0x46a4d3,presences:_0x42526e})=>{const _0x5e119f=_0x40fd67;try{const _0x42026e=await Contact_1[_0x5e119f(0x198)]['findOne']({'where':{'number':_0x46a4d3[_0x5e119f(0x158)](/\D/g,''),'companyId':_0x125b5c[_0x5e119f(0x176)]}});await _0x42026e[_0x5e119f(0x13f)]({'presence':_0x42526e[_0x46a4d3][_0x5e119f(0x1a5)]}),await _0x42026e[_0x5e119f(0x164)](),_0x4045fe['to'](_0x5e119f(0x130)+_0x125b5c[_0x5e119f(0x176)]+_0x5e119f(0x1b3))[_0x5e119f(0x147)](_0x5e119f(0x130)+_0x125b5c[_0x5e119f(0x176)]+_0x5e119f(0x16d),{'action':_0x5e119f(0x13f),'contact':_0x42026e});}catch(_0x13b105){}}),_0x18d622[_0x40fd67(0x1b0)](_0x5115a2['ev']);})());}catch(_0x10d277){Sentry[_0x197159(0x1ae)](_0x10d277),console['log'](_0x10d277),_0x67edee(_0x10d277);}});};exports[a258_0x4662ea(0x177)]=initWASocket;