'use strict';const a362_0xbc1f84=a362_0x3f6f;(function(_0x4c811b,_0x30ba96){const _0x32a328=a362_0x3f6f,_0x181a44=_0x4c811b();while(!![]){try{const _0x253ccb=parseInt(_0x32a328(0x95))/0x1+-parseInt(_0x32a328(0xe9))/0x2*(-parseInt(_0x32a328(0xdb))/0x3)+parseInt(_0x32a328(0xf4))/0x4*(parseInt(_0x32a328(0xe7))/0x5)+parseInt(_0x32a328(0xfb))/0x6*(parseInt(_0x32a328(0xb1))/0x7)+parseInt(_0x32a328(0xed))/0x8+-parseInt(_0x32a328(0x8f))/0x9*(parseInt(_0x32a328(0xe0))/0xa)+-parseInt(_0x32a328(0xd6))/0xb*(parseInt(_0x32a328(0xd7))/0xc);if(_0x253ccb===_0x30ba96)break;else _0x181a44['push'](_0x181a44['shift']());}catch(_0x1dc14a){_0x181a44['push'](_0x181a44['shift']());}}}(a362_0x3ff5,0x8ce7b));var __createBinding=this&&this[a362_0xbc1f84(0x10c)]||(Object[a362_0xbc1f84(0xd4)]?function(_0x273db3,_0x49b549,_0x4317f0,_0x209ac9){const _0x2a5886=a362_0xbc1f84;if(_0x209ac9===undefined)_0x209ac9=_0x4317f0;var _0x51c6e8=Object[_0x2a5886(0xff)](_0x49b549,_0x4317f0);(!_0x51c6e8||(_0x2a5886(0x108)in _0x51c6e8?!_0x49b549[_0x2a5886(0xb8)]:_0x51c6e8['writable']||_0x51c6e8[_0x2a5886(0xce)]))&&(_0x51c6e8={'enumerable':!![],'get':function(){return _0x49b549[_0x4317f0];}}),Object['defineProperty'](_0x273db3,_0x209ac9,_0x51c6e8);}:function(_0x2c7066,_0x26c667,_0x728311,_0x242ed4){if(_0x242ed4===undefined)_0x242ed4=_0x728311;_0x2c7066[_0x242ed4]=_0x26c667[_0x728311];}),__setModuleDefault=this&&this[a362_0xbc1f84(0xfc)]||(Object[a362_0xbc1f84(0xd4)]?function(_0x513f2e,_0xef744d){const _0x258cb5=a362_0xbc1f84;Object[_0x258cb5(0xdc)](_0x513f2e,'default',{'enumerable':!![],'value':_0xef744d});}:function(_0x4e7a1a,_0x2b5572){const _0x382776=a362_0xbc1f84;_0x4e7a1a[_0x382776(0xe4)]=_0x2b5572;}),__importStar=this&&this[a362_0xbc1f84(0xf1)]||(function(){const _0x5a141c=(function(){let _0xb8bfa0=!![];return function(_0x536d27,_0x51c521){const _0x1fa9da=_0xb8bfa0?function(){const _0x466dde=a362_0x3f6f;if(_0x51c521){const _0x50c529=_0x51c521[_0x466dde(0xf8)](_0x536d27,arguments);return _0x51c521=null,_0x50c529;}}:function(){};return _0xb8bfa0=![],_0x1fa9da;};}()),_0x49af48=_0x5a141c(this,function(){const _0x36614d=a362_0x3f6f;return _0x49af48['toString']()[_0x36614d(0xcd)](_0x36614d(0xbe))[_0x36614d(0x9f)]()[_0x36614d(0xa5)](_0x49af48)[_0x36614d(0xcd)]('(((.+)+)+)+$');});_0x49af48();var _0x4e03a4=function(_0x1989b0){return _0x4e03a4=Object['getOwnPropertyNames']||function(_0x2cd93a){const _0x28de0b=a362_0x3f6f;var _0x5ca825=[];for(var _0x5a234a in _0x2cd93a)if(Object[_0x28de0b(0x9c)][_0x28de0b(0xdd)][_0x28de0b(0x84)](_0x2cd93a,_0x5a234a))_0x5ca825[_0x5ca825['length']]=_0x5a234a;return _0x5ca825;},_0x4e03a4(_0x1989b0);};return function(_0x250f97){const _0x2490d8=a362_0x3f6f;if(_0x250f97&&_0x250f97['__esModule'])return _0x250f97;var _0x58ca00={};if(_0x250f97!=null){for(var _0x2197c9=_0x4e03a4(_0x250f97),_0x3b251c=0x0;_0x3b251c<_0x2197c9[_0x2490d8(0x83)];_0x3b251c++)if(_0x2197c9[_0x3b251c]!==_0x2490d8(0xe4))__createBinding(_0x58ca00,_0x250f97,_0x2197c9[_0x3b251c]);}return __setModuleDefault(_0x58ca00,_0x250f97),_0x58ca00;};}()),__importDefault=this&&this[a362_0xbc1f84(0x92)]||function(_0x4e0b62){return _0x4e0b62&&_0x4e0b62['__esModule']?_0x4e0b62:{'default':_0x4e0b62};};Object['defineProperty'](exports,a362_0xbc1f84(0xb8),{'value':!![]}),exports[a362_0xbc1f84(0xa4)]=exports[a362_0xbc1f84(0xae)]=exports[a362_0xbc1f84(0xb7)]=exports[a362_0xbc1f84(0x88)]=void 0x0;const Sentry=__importStar(require(a362_0xbc1f84(0x81))),baileys_1=__importStar(require(a362_0xbc1f84(0xbf))),node_cache_1=__importDefault(require(a362_0xbc1f84(0xf0))),sequelize_1=require(a362_0xbc1f84(0x100)),Whatsapp_1=__importDefault(require('../models/Whatsapp')),logger_1=require(a362_0xbc1f84(0xb6)),authState_1=__importDefault(require(a362_0xbc1f84(0x8d))),AppError_1=__importDefault(require(a362_0xbc1f84(0x10b))),socket_1=require(a362_0xbc1f84(0xa1)),StartWhatsAppSession_1=require(a362_0xbc1f84(0xfa)),DeleteBaileysService_1=__importDefault(require('../services/BaileysServices/DeleteBaileysService')),Contact_1=__importDefault(require('../models/Contact')),Ticket_1=__importDefault(require(a362_0xbc1f84(0xb0))),GetPublicSettingService_1=__importDefault(require(a362_0xbc1f84(0xd8))),Message_1=__importDefault(require(a362_0xbc1f84(0x102))),ExtractPhoneNumber_1=require(a362_0xbc1f84(0x90)),sessions=[],retriesQrCodeMap=new Map(),getWbot=_0x9cf52=>{const _0x11224f=a362_0xbc1f84,_0x1e7851=sessions[_0x11224f(0xf9)](_0x43dfd2=>_0x43dfd2['id']===_0x9cf52);if(_0x1e7851===-0x1)throw new AppError_1[(_0x11224f(0xe4))]('ERR_WAPP_NOT_INITIALIZED');return sessions[_0x1e7851];};exports[a362_0xbc1f84(0x88)]=getWbot;const removeWbot=async(_0x2e1090,_0x4f02bd=!![])=>{const _0x20392c=a362_0xbc1f84;try{const _0x122b37=sessions[_0x20392c(0xf9)](_0x5ced13=>_0x5ced13['id']===_0x2e1090);_0x122b37!==-0x1&&(_0x4f02bd&&await sessions[_0x122b37][_0x20392c(0xbb)](),sessions[_0x122b37]['ev'][_0x20392c(0xc3)](_0x20392c(0x91)),sessions[_0x122b37]['ev'][_0x20392c(0xc3)](_0x20392c(0xee)),sessions[_0x122b37]['ev'][_0x20392c(0xc3)](_0x20392c(0xf3)),sessions[_0x122b37]['ev'][_0x20392c(0xc3)](_0x20392c(0xa7)),sessions[_0x122b37]['ev'][_0x20392c(0xc3)](_0x20392c(0x9b)),sessions[_0x122b37]['ev']['removeAllListeners'](_0x20392c(0xc7)),sessions[_0x122b37]['ev'][_0x20392c(0xc3)](_0x20392c(0xf2)),sessions[_0x122b37]['end'](null),sessions[_0x122b37]['ws'][_0x20392c(0xc3)](),await sessions[_0x122b37]['ws'][_0x20392c(0xc8)](),sessions['splice'](_0x122b37,0x1));}catch(_0x2d9ee4){logger_1['logger'][_0x20392c(0xc1)](_0x2d9ee4);}};exports['removeWbot']=removeWbot;const getVersionWA=async()=>{const _0x5d0277=a362_0xbc1f84;try{const _0x1c135d=_0x5d0277(0xe3),_0x25b927=0x1,_0x1b0389=await(0x0,GetPublicSettingService_1['default'])({'key':_0x1c135d,'companyId':_0x25b927});return _0x1b0389||process[_0x5d0277(0xd5)]['CONFIG_SESSION_WA_CONNECTION'];}catch(_0x6600db){return console[_0x5d0277(0xc1)](_0x5d0277(0x9a),_0x6600db),process['env'][_0x5d0277(0xa2)];}},restartWbot=async(_0x39c1e9,_0x297e0c)=>{const _0x250f1c=a362_0xbc1f84;try{const _0x1e3ed6={'where':{'companyId':_0x39c1e9},'attributes':['id']},_0x452102=await Whatsapp_1[_0x250f1c(0xe4)]['findAll'](_0x1e3ed6);_0x452102[_0x250f1c(0x89)](async _0x19caac=>{const _0x21de81=_0x250f1c,_0x312da1=sessions[_0x21de81(0xf9)](_0x33c632=>_0x33c632['id']===_0x19caac['id']);_0x312da1!==-0x1&&sessions[_0x312da1]['ws'][_0x21de81(0xc8)]();});}catch(_0x4198c6){logger_1['logger']['error'](_0x4198c6);}};exports['restartWbot']=restartWbot;function a362_0x3f6f(_0x3e30e1,_0x2d5c8a){const _0x42d7bc=a362_0x3ff5();return a362_0x3f6f=function(_0x12de4b,_0x239049){_0x12de4b=_0x12de4b-0x81;let _0x3ff526=_0x42d7bc[_0x12de4b];return _0x3ff526;},a362_0x3f6f(_0x3e30e1,_0x2d5c8a);}const initWASocket=async(_0x280e70,_0x2d3a65)=>{return new Promise((_0x38a20d,_0x2cc311)=>{const _0x45c903=a362_0x3f6f;try{((async()=>{const _0x2d1fe9=a362_0x3f6f,_0x41e4bd=(0x0,socket_1[_0x2d1fe9(0xcc)])(),_0x136901=await Whatsapp_1[_0x2d1fe9(0xe4)][_0x2d1fe9(0xdf)]({'where':{'id':_0x280e70['id']}});if(!_0x136901)return;const {id:_0x5a6ee2,name:_0x5d11fd,provider:_0xacefab}=_0x136901;let _0x1f1880;const _0x4ada91=_0xacefab===_0x2d1fe9(0x104);try{_0x1f1880=await getVersionWA(),logger_1[_0x2d1fe9(0xb9)][_0x2d1fe9(0x10e)]('Using\x20WA\x20v'+_0x1f1880+_0x2d1fe9(0x9e)+_0x4ada91);}catch(_0x18e551){console[_0x2d1fe9(0xc1)](_0x2d1fe9(0xec),_0x18e551);}const _0x4ab81c=_0x1f1880[_0x2d1fe9(0xde)]('.');if(_0x4ab81c[_0x2d1fe9(0x83)]!==0x3)throw new Error(_0x2d1fe9(0xb3));const [_0x57ee8d,_0x6571cb,_0x43b503]=_0x4ab81c[_0x2d1fe9(0x89)](Number);logger_1[_0x2d1fe9(0xb9)][_0x2d1fe9(0x10e)](_0x2d1fe9(0xc6)+_0x1f1880),logger_1[_0x2d1fe9(0xb9)][_0x2d1fe9(0x10e)](_0x2d1fe9(0x101)+_0x4ada91),logger_1[_0x2d1fe9(0xb9)]['info'](_0x2d1fe9(0xeb)+_0x5d11fd);let _0x575e82=0x0,_0x500263=null;const _0xa2b038=new node_cache_1['default']({'stdTTL':0x78,'checkperiod':0x1e,'useClones':![]});async function _0x4530d1(_0x52e9a9){const _0x5f4173=_0x2d1fe9;if(!_0x52e9a9['id'])return null;const _0x4de9b5=_0xa2b038[_0x5f4173(0x108)](_0x52e9a9['id']);if(_0x4de9b5)return logger_1[_0x5f4173(0xb9)][_0x5f4173(0xe8)]({'message':_0x4de9b5},_0x5f4173(0xf5)),_0x4de9b5;logger_1[_0x5f4173(0xb9)]['debug']({'key':_0x52e9a9},'cacheMessage:\x20not\x20found\x20in\x20cache\x20-\x20fallback\x20to\x20database');const _0x491984=await Message_1[_0x5f4173(0xe4)][_0x5f4173(0xdf)]({'where':{'id':_0x52e9a9['id'],'fromMe':!![]}});try{const _0x258168=JSON['parse'](_0x491984['dataJson']);return logger_1[_0x5f4173(0xb9)][_0x5f4173(0xe8)]({'key':_0x52e9a9,'data':_0x258168},_0x5f4173(0x110)),_0xa2b038[_0x5f4173(0xc0)](_0x52e9a9['id'],_0x258168[_0x5f4173(0xbd)]),_0x258168[_0x5f4173(0xbd)]||undefined;}catch(_0x370fa5){logger_1[_0x5f4173(0xb9)][_0x5f4173(0xc1)]({'key':_0x52e9a9},_0x5f4173(0x99)+_0x370fa5[_0x5f4173(0xbd)]);}return undefined;}const {state:_0x52b877,saveState:_0x253df7}=await(0x0,authState_1[_0x2d1fe9(0xe4)])(_0x280e70),_0x333d84=new node_cache_1['default'](),_0x24070d=new node_cache_1[(_0x2d1fe9(0xe4))](),_0x258659=new node_cache_1[(_0x2d1fe9(0xe4))]({'stdTTL':0x5*0x3c,'useClones':![]}),_0x138b3b={'get':_0x4d0e81=>{const _0x9360d4=_0x2d1fe9;logger_1[_0x9360d4(0xb9)]['debug'](_0x9360d4(0xd9)+_0x4d0e81);const _0x21a76a=_0x258659[_0x9360d4(0x108)](_0x4d0e81);return!_0x21a76a&&(logger_1[_0x9360d4(0xb9)][_0x9360d4(0xe8)]('groupCache.get\x20'+_0x4d0e81+_0x9360d4(0xda)),_0x500263[_0x9360d4(0xac)](_0x4d0e81)[_0x9360d4(0xa6)](async _0x228641=>{const _0x55fec0=_0x9360d4;logger_1[_0x55fec0(0xb9)][_0x55fec0(0xe8)]({'key':_0x4d0e81,'metadata':_0x228641},_0x55fec0(0xd9)+_0x4d0e81+_0x55fec0(0xe2)),_0x258659['set'](_0x4d0e81,_0x228641);})),_0x21a76a;},'set':(_0x5e039f,_0x458e41)=>{const _0x2c1f2e=_0x2d1fe9;return logger_1[_0x2c1f2e(0xb9)]['debug']({'key':_0x5e039f,'value':_0x458e41},_0x2c1f2e(0x8e)+_0x5e039f),_0x258659[_0x2c1f2e(0xc0)](_0x5e039f,_0x458e41);},'del':_0x219159=>{const _0x336763=_0x2d1fe9;return logger_1['logger'][_0x336763(0xe8)](_0x336763(0xc9)+_0x219159),_0x258659['del'](_0x219159);},'flushAll':()=>{const _0x49b502=_0x2d1fe9;return logger_1[_0x49b502(0xb9)][_0x49b502(0xe8)]('groupCache.flushAll'),_0x258659[_0x49b502(0xe5)]();}};_0x500263=(0x0,baileys_1['default'])({'logger':logger_1[_0x2d1fe9(0xc2)],'printQRInTerminal':![],'browser':[process[_0x2d1fe9(0xd5)][_0x2d1fe9(0xab)]||_0x2d1fe9(0xcb),process[_0x2d1fe9(0xd5)][_0x2d1fe9(0xc4)]||_0x2d1fe9(0x10d),process['env'][_0x2d1fe9(0x8c)]||_0x2d1fe9(0xa9)],'auth':{'creds':_0x52b877[_0x2d1fe9(0x8a)],'keys':(0x0,baileys_1['makeCacheableSignalKeyStore'])(_0x52b877[_0x2d1fe9(0x96)],logger_1[_0x2d1fe9(0xc2)])},'version':[_0x57ee8d,_0x6571cb,_0x43b503],'defaultQueryTimeoutMs':0xea60,'msgRetryCounterCache':_0x333d84,'generateHighQualityLinkPreview':!![],'userDevicesCache':_0x24070d,'getMessage':_0x4530d1,'agent':_0x2d3a65,'fetchAgent':_0x2d3a65,'transactionOpts':{'maxCommitRetries':0x1,'delayBetweenTriesMs':0xa}}),_0x500263[_0x2d1fe9(0xd0)]=_0xd922f1=>{const _0x1873c1=_0x2d1fe9;if(!_0xd922f1['key'][_0x1873c1(0x94)])return;logger_1[_0x1873c1(0xb9)][_0x1873c1(0xe8)]({'message':_0xd922f1[_0x1873c1(0xbd)]},_0x1873c1(0xa0)),_0xa2b038['set'](_0xd922f1['key']['id'],_0xd922f1[_0x1873c1(0xbd)]);},_0x500263['ev']['on']('connection.update',async({connection:_0x543fd2,lastDisconnect:_0x5e156b,qr:_0x5a7689})=>{const _0x46f469=_0x2d1fe9;logger_1[_0x46f469(0xb9)]['info']({'lastDisconnect':_0x5e156b},'Socket\x20\x20'+_0x5d11fd+_0x46f469(0xe1)+(_0x543fd2||''));if(_0x543fd2===_0x46f469(0xc8)){const _0x310025=_0x5e156b?.[_0x46f469(0xc1)]?.[_0x46f469(0xd1)]?.[_0x46f469(0xa3)];if(_0x310025===0x193)await _0x280e70['update']({'status':_0x46f469(0x9d),'session':''}),await(0x0,DeleteBaileysService_1[_0x46f469(0xe4)])(_0x280e70['id']),_0x41e4bd[_0x46f469(0xe6)](_0x46f469(0xf6)+_0x280e70[_0x46f469(0x97)]+_0x46f469(0xaf),{'action':_0x46f469(0xd2),'session':_0x280e70}),(0x0,exports['removeWbot'])(_0x5a6ee2,![]);else{if(_0x310025===baileys_1[_0x46f469(0xfd)][_0x46f469(0x107)]||_0x310025===0x1f7)logger_1[_0x46f469(0xb9)][_0x46f469(0x10e)](_0x5d11fd+_0x46f469(0x109)),(0x0,exports[_0x46f469(0xb7)])(_0x5a6ee2,![])[_0x46f469(0xa6)](()=>{setTimeout(async()=>{const _0x4f1d96=a362_0x3f6f;await _0x280e70[_0x4f1d96(0xbc)](),await(0x0,StartWhatsAppSession_1[_0x4f1d96(0x10f)])(_0x280e70,_0x280e70['companyId']);},0x3e8);});else _0x310025!==baileys_1['DisconnectReason'][_0x46f469(0xf7)]?(await _0x280e70['update']({'status':'PENDING'}),_0x41e4bd[_0x46f469(0xe6)](_0x46f469(0xf6)+_0x280e70[_0x46f469(0x97)]+'-whatsappSession',{'action':'update','session':_0x280e70}),(0x0,exports['removeWbot'])(_0x5a6ee2,![])['then'](()=>{const _0x4ae38e=_0x46f469;logger_1[_0x4ae38e(0xb9)][_0x4ae38e(0x10e)](_0x4ae38e(0x8b)+_0x5d11fd+_0x4ae38e(0xad)),setTimeout(async()=>{const _0x2eb6fd=_0x4ae38e;await _0x280e70[_0x2eb6fd(0xbc)](),await(0x0,StartWhatsAppSession_1['StartWhatsAppSession'])(_0x280e70,_0x280e70['companyId']);},0x7d0);})):(await _0x280e70['update']({'status':_0x46f469(0x9d),'session':''}),await(0x0,DeleteBaileysService_1['default'])(_0x280e70['id']),_0x41e4bd['emit']('company-'+_0x280e70[_0x46f469(0x97)]+_0x46f469(0xaf),{'action':_0x46f469(0xd2),'session':_0x280e70}),(0x0,exports['removeWbot'])(_0x5a6ee2,![])[_0x46f469(0xa6)](()=>{const _0x43f9d1=_0x46f469;logger_1[_0x43f9d1(0xb9)][_0x43f9d1(0x10e)]('Reconnecting\x20'+_0x5d11fd+_0x43f9d1(0xad)),setTimeout(async()=>{const _0xa705a2=_0x43f9d1;await _0x280e70['reload'](),await(0x0,StartWhatsAppSession_1[_0xa705a2(0x10f)])(_0x280e70,_0x280e70['companyId']);},0x7d0);}));}}if(_0x543fd2===_0x46f469(0xcf)){await _0x280e70['update']({'status':'CONNECTED','qrcode':'','retries':0x0,'number':_0x500263['user']?.['id']?.['replace'](/:\d+/,'')}),_0x41e4bd['emit'](_0x46f469(0xf6)+_0x280e70[_0x46f469(0x97)]+_0x46f469(0xaf),{'action':_0x46f469(0xd2),'session':_0x280e70});const _0x1ff69c=sessions[_0x46f469(0xf9)](_0x37c0dc=>_0x37c0dc['id']===_0x280e70['id']);_0x1ff69c===-0x1&&(_0x500263['id']=_0x280e70['id'],sessions[_0x46f469(0x105)](_0x500263)),_0x38a20d(_0x500263);}if(_0x5a7689!==undefined){if(retriesQrCodeMap[_0x46f469(0x108)](_0x5a6ee2)&&retriesQrCodeMap['get'](_0x5a6ee2)>=0x3)await _0x136901[_0x46f469(0xd2)]({'status':_0x46f469(0x98),'qrcode':''}),await(0x0,DeleteBaileysService_1[_0x46f469(0xe4)])(_0x136901['id']),_0x41e4bd['emit'](_0x46f469(0x106),{'action':_0x46f469(0xd2),'session':_0x136901}),_0x500263['ev'][_0x46f469(0xc3)]('connection.update'),_0x500263['ws'][_0x46f469(0xc8)](),_0x500263=null,retriesQrCodeMap['delete'](_0x5a6ee2);else{logger_1[_0x46f469(0xb9)][_0x46f469(0x10e)]('Session\x20QRCode\x20Generate\x20'+_0x5d11fd),retriesQrCodeMap['set'](_0x5a6ee2,_0x575e82+=0x1),await _0x280e70['update']({'qrcode':_0x5a7689,'status':_0x46f469(0x86),'retries':0x0});const _0x4b2225=sessions[_0x46f469(0xf9)](_0x5b44fb=>_0x5b44fb['id']===_0x280e70['id']);_0x4b2225===-0x1&&(_0x500263['id']=_0x280e70['id'],sessions['push'](_0x500263)),_0x41e4bd[_0x46f469(0xe6)](_0x46f469(0xf6)+_0x280e70[_0x46f469(0x97)]+_0x46f469(0xaf),{'action':_0x46f469(0xd2),'session':_0x280e70});}}}),_0x500263['ev']['on'](_0x2d1fe9(0xee),_0x253df7),_0x500263['ev']['on'](_0x2d1fe9(0xf3),async({id:_0x780cdc,presences:_0x33e0b9})=>{const _0x43d340=_0x2d1fe9;try{const _0x2f4880=_0x33e0b9[_0x780cdc]?.[_0x43d340(0xba)];if(!_0x2f4880){logger_1[_0x43d340(0xb9)][_0x43d340(0xe8)](_0x43d340(0xb2));return;}const _0x312a59=(0x0,ExtractPhoneNumber_1[_0x43d340(0x103)])(_0x780cdc),_0x141e33=await Contact_1[_0x43d340(0xe4)]['findOne']({'where':{'number':_0x312a59,'companyId':_0x280e70[_0x43d340(0x97)]}});if(!_0x141e33){logger_1['logger'][_0x43d340(0xe8)](_0x43d340(0xd3)+_0x780cdc);return;}logger_1[_0x43d340(0xb9)][_0x43d340(0xe8)](_0x43d340(0xfe)+_0x141e33['id']+_0x43d340(0xc5)+_0x780cdc);const _0xd9e1a1=await Ticket_1['default']['findOne']({'where':{'contactId':_0x141e33['id'],'whatsappId':_0x280e70['id'],'status':{[sequelize_1['Op']['or']]:[_0x43d340(0xcf),_0x43d340(0x10a)]}}});if(!_0xd9e1a1){logger_1['logger']['debug'](_0x43d340(0x85)+_0x141e33['id']);return;}const _0x1adfc1=(0x0,socket_1[_0x43d340(0xcc)])();_0x1adfc1['to'](_0xd9e1a1['id'][_0x43d340(0x9f)]())['to'](_0x43d340(0xf6)+_0x280e70[_0x43d340(0x97)]+'-'+_0xd9e1a1[_0x43d340(0xef)])['to'](_0x43d340(0xb5)+_0xd9e1a1['queueId']+'-'+_0xd9e1a1[_0x43d340(0xef)])[_0x43d340(0xe6)](_0x43d340(0xf6)+_0x280e70['companyId']+'-presence',{'ticketId':_0xd9e1a1['id'],'presence':_0x2f4880});}catch(_0x4a08f3){logger_1[_0x43d340(0xb9)][_0x43d340(0xc1)](_0x43d340(0xea)+_0x4a08f3[_0x43d340(0xbd)]),Sentry[_0x43d340(0xaa)](_0x4a08f3);}}),_0x500263['ev']['on'](_0x2d1fe9(0xa7),_0x4cc62e=>{const _0x569ff8=_0x2d1fe9;logger_1[_0x569ff8(0xb9)][_0x569ff8(0xe8)](_0x569ff8(0x87)),_0x4cc62e[_0x569ff8(0xb4)](_0x202391=>{const _0x3fa9f3=_0x569ff8;_0x138b3b[_0x3fa9f3(0xc0)](_0x202391['id'],_0x202391);});}),_0x500263['ev']['on'](_0x2d1fe9(0x9b),async([_0x15520f])=>{const _0xe5307d=_0x2d1fe9;logger_1['logger']['debug'](_0xe5307d(0x82));const _0x2b7048=await _0x500263[_0xe5307d(0xac)](_0x15520f['id']);_0x138b3b[_0xe5307d(0xc0)](_0x15520f['id'],_0x2b7048);}),_0x500263['ev']['on']('group-participants.update',async _0x20ae60=>{const _0x638a7f=_0x2d1fe9;logger_1[_0x638a7f(0xb9)][_0x638a7f(0xe8)](_0x638a7f(0xa8));try{const _0xbeef36=await _0x500263[_0x638a7f(0xac)](_0x20ae60['id']);_0x138b3b[_0x638a7f(0xc0)](_0x20ae60['id'],_0xbeef36);}catch(_0x15e676){_0x138b3b[_0x638a7f(0xca)](_0x20ae60['id']);}});})());}catch(_0x199ee7){Sentry['captureException'](_0x199ee7),console[_0x45c903(0x93)](_0x199ee7),_0x2cc311(_0x199ee7);}});};function a362_0x3ff5(){const _0xa7d29a=['165280icdwon','\x20Connection\x20Update\x20','\x20set','versionWA','default','flushAll','emit','5foEZAV','debug','358024PJMfFV','Error\x20processing\x20presence\x20update:\x20','Starting\x20session\x20','Erro\x20ao\x20inicializar\x20waVersion:','1885200mVOSHe','creds.update','status','node-cache','__importStar','contacts.upsert','presence.update','4408760tYmOAj','cacheMessage:\x20recovered\x20from\x20cache','company-','loggedOut','apply','findIndex','../services/WbotServices/StartWhatsAppSession','162YkSGeZ','__setModuleDefault','DisconnectReason','Found\x20contact\x20ID:\x20','getOwnPropertyDescriptor','sequelize','isLegacy:\x20','../models/Message','getPhoneNumberFromJid','stable','push','whatsappSession','restartRequired','get','\x20restart\x20required\x20(503),\x20reconnecting\x20immediately...','pending','../errors/AppError','__createBinding','Chrome','info','StartWhatsAppSession','cacheMessage:\x20recovered\x20from\x20database','@sentry/node','Received\x20group\x20update','length','call','No\x20active\x20ticket\x20found\x20for\x20contact\x20','qrcode','Received\x20new\x20group','getWbot','map','creds','Reconnecting\x20','BROWSER_VERSION','../helpers/authState','groupCache.set\x20','378pUanzI','../helpers/ExtractPhoneNumber','connection.update','__importDefault','log','fromMe','991867pLsShT','keys','companyId','DISCONNECTED','cacheMessage:\x20error\x20parsing\x20message\x20from\x20database\x20-\x20','Erro\x20ao\x20obter\x20versionWA:','groups.update','prototype','PENDING',',\x20isLatest:\x20','toString','cacheMessage:\x20saved','./socket','CONFIG_SESSION_WA_CONNECTION','statusCode','initWASocket','constructor','then','groups.upsert','Received\x20group\x20participants\x20update','10.0','captureException','BROWSER_CLIENT','groupMetadata','\x20in\x202\x20seconds','restartWbot','-whatsappSession','../models/Ticket','155141cVKqRy','Ignoring\x20presence\x20from\x20possible\x20group','Formato\x20inv√°lido\x20para\x20versionWA.\x20Esperado:\x200.0000.0000000000','forEach','queue-','../utils/logger','removeWbot','__esModule','logger','lastKnownPresence','logout','reload','message','(((.+)+)+)+$','@whiskeysockets/baileys','set','error','loggerBaileys','removeAllListeners','BROWSER_NAME','\x20for\x20number:\x20','using\x20WA\x20v','group-participants.update','close','groupCache.del\x20','del','Daumzap','getIO','search','configurable','open','cacheMessage','output','update','Contact\x20not\x20found\x20for\x20','create','env','20193767gEVApC','12eFJepp','../services/SettingServices/GetPublicSettingService','groupCache.get\x20','\x20not\x20found','3TMTNvP','defineProperty','hasOwnProperty','split','findOne'];a362_0x3ff5=function(){return _0xa7d29a;};return a362_0x3ff5();}exports[a362_0xbc1f84(0xa4)]=initWASocket;