'use strict';const a298_0x2c0d00=a298_0x3af6;(function(_0x34fba9,_0x4d772c){const _0x5ea2c0=a298_0x3af6,_0x22cc63=_0x34fba9();while(!![]){try{const _0x2431a4=parseInt(_0x5ea2c0(0xef))/0x1+parseInt(_0x5ea2c0(0x103))/0x2*(parseInt(_0x5ea2c0(0x12c))/0x3)+parseInt(_0x5ea2c0(0xa7))/0x4+-parseInt(_0x5ea2c0(0xf9))/0x5*(-parseInt(_0x5ea2c0(0x10c))/0x6)+parseInt(_0x5ea2c0(0x109))/0x7+parseInt(_0x5ea2c0(0xc9))/0x8*(-parseInt(_0x5ea2c0(0x113))/0x9)+-parseInt(_0x5ea2c0(0x127))/0xa*(parseInt(_0x5ea2c0(0xe6))/0xb);if(_0x2431a4===_0x4d772c)break;else _0x22cc63['push'](_0x22cc63['shift']());}catch(_0x4e0923){_0x22cc63['push'](_0x22cc63['shift']());}}}(a298_0x99bc,0xd264e));var __createBinding=this&&this[a298_0x2c0d00(0xa5)]||(Object[a298_0x2c0d00(0xf2)]?function(_0x14c3b4,_0x27b397,_0x7b115,_0x2f7b18){const _0x3b9db8=a298_0x2c0d00;if(_0x2f7b18===undefined)_0x2f7b18=_0x7b115;var _0x139605=Object[_0x3b9db8(0x100)](_0x27b397,_0x7b115);(!_0x139605||(_0x3b9db8(0xd7)in _0x139605?!_0x27b397['__esModule']:_0x139605[_0x3b9db8(0xb3)]||_0x139605[_0x3b9db8(0x12b)]))&&(_0x139605={'enumerable':!![],'get':function(){return _0x27b397[_0x7b115];}}),Object['defineProperty'](_0x14c3b4,_0x2f7b18,_0x139605);}:function(_0x12c5bc,_0xbfc27f,_0x453416,_0x39cf59){if(_0x39cf59===undefined)_0x39cf59=_0x453416;_0x12c5bc[_0x39cf59]=_0xbfc27f[_0x453416];}),__setModuleDefault=this&&this[a298_0x2c0d00(0xe8)]||(Object['create']?function(_0x837745,_0x29df45){const _0x1b9326=a298_0x2c0d00;Object[_0x1b9326(0xdd)](_0x837745,_0x1b9326(0x108),{'enumerable':!![],'value':_0x29df45});}:function(_0xe1319b,_0x4e0828){const _0x14af56=a298_0x2c0d00;_0xe1319b[_0x14af56(0x108)]=_0x4e0828;}),__importStar=this&&this[a298_0x2c0d00(0x10e)]||(function(){const _0x11dc87=(function(){let _0x5a7629=!![];return function(_0x3f6c28,_0x4b811f){const _0x48904f=_0x5a7629?function(){const _0x58d8b2=a298_0x3af6;if(_0x4b811f){const _0x14f6ad=_0x4b811f[_0x58d8b2(0xee)](_0x3f6c28,arguments);return _0x4b811f=null,_0x14f6ad;}}:function(){};return _0x5a7629=![],_0x48904f;};}()),_0xa55dac=_0x11dc87(this,function(){const _0x2096c7=a298_0x3af6;return _0xa55dac[_0x2096c7(0x124)]()['search'](_0x2096c7(0xb0))[_0x2096c7(0x124)]()[_0x2096c7(0xf3)](_0xa55dac)['search']('(((.+)+)+)+$');});_0xa55dac();var _0x2ab0b9=function(_0x3ab902){const _0x5674d7=a298_0x3af6;return _0x2ab0b9=Object[_0x5674d7(0xf8)]||function(_0x4ae1aa){const _0x1de567=_0x5674d7;var _0x43248a=[];for(var _0x3bb298 in _0x4ae1aa)if(Object[_0x1de567(0x9e)]['hasOwnProperty'][_0x1de567(0x110)](_0x4ae1aa,_0x3bb298))_0x43248a[_0x43248a[_0x1de567(0x102)]]=_0x3bb298;return _0x43248a;},_0x2ab0b9(_0x3ab902);};return function(_0x310db0){const _0x55ccb5=a298_0x3af6;if(_0x310db0&&_0x310db0[_0x55ccb5(0xd2)])return _0x310db0;var _0x1f6e64={};if(_0x310db0!=null){for(var _0x994dd8=_0x2ab0b9(_0x310db0),_0x16bc86=0x0;_0x16bc86<_0x994dd8[_0x55ccb5(0x102)];_0x16bc86++)if(_0x994dd8[_0x16bc86]!==_0x55ccb5(0x108))__createBinding(_0x1f6e64,_0x310db0,_0x994dd8[_0x16bc86]);}return __setModuleDefault(_0x1f6e64,_0x310db0),_0x1f6e64;};}()),__importDefault=this&&this['__importDefault']||function(_0x2183db){const _0x13c5c0=a298_0x2c0d00;return _0x2183db&&_0x2183db[_0x13c5c0(0xd2)]?_0x2183db:{'default':_0x2183db};};Object[a298_0x2c0d00(0xdd)](exports,a298_0x2c0d00(0xd2),{'value':!![]}),exports[a298_0x2c0d00(0x10d)]=exports[a298_0x2c0d00(0xe5)]=exports[a298_0x2c0d00(0xe7)]=exports[a298_0x2c0d00(0xd5)]=void 0x0;const Sentry=__importStar(require(a298_0x2c0d00(0x106))),baileys_1=__importStar(require(a298_0x2c0d00(0x11d))),node_cache_1=__importDefault(require('node-cache')),sequelize_1=require(a298_0x2c0d00(0xa4)),Whatsapp_1=__importDefault(require(a298_0x2c0d00(0x11c))),logger_1=require(a298_0x2c0d00(0xfa)),authState_1=__importDefault(require(a298_0x2c0d00(0x121))),AppError_1=__importDefault(require('../errors/AppError')),socket_1=require(a298_0x2c0d00(0xc2)),StartWhatsAppSession_1=require(a298_0x2c0d00(0xa0)),DeleteBaileysService_1=__importDefault(require(a298_0x2c0d00(0xa2))),Contact_1=__importDefault(require(a298_0x2c0d00(0x120))),Ticket_1=__importDefault(require(a298_0x2c0d00(0xe3))),GetPublicSettingService_1=__importDefault(require('../services/SettingServices/GetPublicSettingService')),Message_1=__importDefault(require(a298_0x2c0d00(0xe0))),ExtractPhoneNumber_1=require('../helpers/ExtractPhoneNumber'),sessions=[],retriesQrCodeMap=new Map(),getWbot=_0x4aa524=>{const _0x7874fa=a298_0x2c0d00,_0x1551e6=sessions['findIndex'](_0x5897a6=>_0x5897a6['id']===_0x4aa524);if(_0x1551e6===-0x1)throw new AppError_1[(_0x7874fa(0x108))](_0x7874fa(0xdc));return sessions[_0x1551e6];};exports[a298_0x2c0d00(0xd5)]=getWbot;const removeWbot=async(_0x2db2c8,_0x2bc182=!![])=>{const _0x12891a=a298_0x2c0d00;try{const _0x567824=sessions['findIndex'](_0x434226=>_0x434226['id']===_0x2db2c8);_0x567824!==-0x1&&(_0x2bc182&&await sessions[_0x567824][_0x12891a(0xe2)](),sessions[_0x567824]['ev'][_0x12891a(0xd6)](_0x12891a(0x11e)),sessions[_0x567824]['ev'][_0x12891a(0xd6)](_0x12891a(0x128)),sessions[_0x567824]['ev'][_0x12891a(0xd6)](_0x12891a(0xcd)),sessions[_0x567824]['ev'][_0x12891a(0xd6)](_0x12891a(0xe4)),sessions[_0x567824]['ev'][_0x12891a(0xd6)](_0x12891a(0xd8)),sessions[_0x567824]['ev'][_0x12891a(0xd6)]('group-participants.update'),sessions[_0x567824]['ev'][_0x12891a(0xd6)]('contacts.upsert'),sessions[_0x567824][_0x12891a(0x11f)](null),sessions[_0x567824]['ws']['removeAllListeners'](),await sessions[_0x567824]['ws']['close'](),sessions[_0x12891a(0xba)](_0x567824,0x1));}catch(_0x5c2790){logger_1[_0x12891a(0xc4)]['error'](_0x5c2790);}};exports[a298_0x2c0d00(0xe7)]=removeWbot;const getVersionWA=async()=>{const _0x3ca0c0=a298_0x2c0d00;try{const _0x33b35f=_0x3ca0c0(0xbb),_0x19611e=0x1,_0x267009=await(0x0,GetPublicSettingService_1[_0x3ca0c0(0x108)])({'key':_0x33b35f,'companyId':_0x19611e});return _0x267009||process[_0x3ca0c0(0xa3)]['CONFIG_SESSION_WA_CONNECTION'];}catch(_0x31d4b8){return console['error'](_0x3ca0c0(0xc3),_0x31d4b8),process[_0x3ca0c0(0xa3)][_0x3ca0c0(0x11b)];}},restartWbot=async(_0xe73a22,_0xdb7770)=>{const _0x23cc43=a298_0x2c0d00;try{const _0x443b6f={'where':{'companyId':_0xe73a22},'attributes':['id']},_0x2f8ccd=await Whatsapp_1[_0x23cc43(0x108)][_0x23cc43(0x107)](_0x443b6f);_0x2f8ccd['map'](async _0x4a4312=>{const _0x5a63a9=_0x23cc43,_0x200bde=sessions[_0x5a63a9(0xf7)](_0x4d7e35=>_0x4d7e35['id']===_0x4a4312['id']);_0x200bde!==-0x1&&sessions[_0x200bde]['ws'][_0x5a63a9(0x125)]();});}catch(_0x21ed8a){logger_1[_0x23cc43(0xc4)][_0x23cc43(0xce)](_0x21ed8a);}};exports[a298_0x2c0d00(0xe5)]=restartWbot;const initWASocket=async(_0x6a3aa6,_0x343697)=>{return new Promise((_0x2ecd7d,_0x19b6f9)=>{const _0x509428=a298_0x3af6;try{((async()=>{const _0x3e8f2b=a298_0x3af6,_0x3da72c=(0x0,socket_1[_0x3e8f2b(0xac)])(),_0x5dfabe=await Whatsapp_1[_0x3e8f2b(0x108)][_0x3e8f2b(0x117)]({'where':{'id':_0x6a3aa6['id']}});if(!_0x5dfabe)return;const {id:_0x54ed9c,name:_0x3bd0e7,provider:_0x16854a}=_0x5dfabe;let _0x54ea84;const _0x4f7b03=_0x16854a===_0x3e8f2b(0xca);try{_0x54ea84=await getVersionWA(),logger_1[_0x3e8f2b(0xc4)]['info'](_0x3e8f2b(0xed)+_0x54ea84+_0x3e8f2b(0xf0)+_0x4f7b03);}catch(_0x3a608a){console['error'](_0x3e8f2b(0x122),_0x3a608a);}const _0x3572f5=_0x54ea84[_0x3e8f2b(0x9f)]('.');if(_0x3572f5[_0x3e8f2b(0x102)]!==0x3)throw new Error(_0x3e8f2b(0xeb));const [_0x20e09e,_0x3dfd4b,_0x5c366f]=_0x3572f5['map'](Number);logger_1['logger'][_0x3e8f2b(0xec)]('using\x20WA\x20v'+_0x54ea84),logger_1['logger'][_0x3e8f2b(0xec)](_0x3e8f2b(0x12a)+_0x4f7b03),logger_1[_0x3e8f2b(0xc4)]['info'](_0x3e8f2b(0xae)+_0x3bd0e7);let _0x424d63=0x0,_0x317043=null;const _0x15a7d4=new node_cache_1[(_0x3e8f2b(0x108))]({'stdTTL':0x78,'checkperiod':0x1e,'useClones':![]});async function _0x11efd1(_0xcca1e7){const _0x418fbc=_0x3e8f2b;if(!_0xcca1e7['id'])return null;const _0x3acc58=_0x15a7d4['get'](_0xcca1e7['id']);if(_0x3acc58)return logger_1[_0x418fbc(0xc4)][_0x418fbc(0xbc)]({'message':_0x3acc58},'cacheMessage:\x20recovered\x20from\x20cache'),_0x3acc58;logger_1[_0x418fbc(0xc4)][_0x418fbc(0xbc)]({'key':_0xcca1e7},_0x418fbc(0xff));const _0x4a3c55=await Message_1['default'][_0x418fbc(0x117)]({'where':{'id':_0xcca1e7['id'],'fromMe':!![]}});try{const _0x1c4bf4=JSON[_0x418fbc(0xfd)](_0x4a3c55[_0x418fbc(0xa8)]);return logger_1['logger'][_0x418fbc(0xbc)]({'key':_0xcca1e7,'data':_0x1c4bf4},_0x418fbc(0x129)),_0x15a7d4[_0x418fbc(0xb6)](_0xcca1e7['id'],_0x1c4bf4[_0x418fbc(0xde)]),_0x1c4bf4['message']||undefined;}catch(_0xb0426b){logger_1[_0x418fbc(0xc4)]['error']({'key':_0xcca1e7},_0x418fbc(0x10f)+_0xb0426b['message']);}return undefined;}const {state:_0xda7247,saveState:_0x29809d}=await(0x0,authState_1[_0x3e8f2b(0x108)])(_0x6a3aa6),_0x3c435c=new node_cache_1['default'](),_0x50b88a=new node_cache_1[(_0x3e8f2b(0x108))](),_0xb5280d=new node_cache_1[(_0x3e8f2b(0x108))]({'stdTTL':0x5*0x3c,'useClones':![]}),_0x43e495={'get':_0x4c4ee1=>{const _0x17e5ea=_0x3e8f2b;logger_1['logger'][_0x17e5ea(0xbc)](_0x17e5ea(0x123)+_0x4c4ee1);const _0x51b05a=_0xb5280d[_0x17e5ea(0xd7)](_0x4c4ee1);return!_0x51b05a&&(logger_1[_0x17e5ea(0xc4)][_0x17e5ea(0xbc)](_0x17e5ea(0x123)+_0x4c4ee1+_0x17e5ea(0xa1)),_0x317043[_0x17e5ea(0xe9)](_0x4c4ee1)[_0x17e5ea(0xbd)](async _0x47aa91=>{const _0x3149d1=_0x17e5ea;logger_1[_0x3149d1(0xc4)][_0x3149d1(0xbc)]({'key':_0x4c4ee1,'metadata':_0x47aa91},_0x3149d1(0x123)+_0x4c4ee1+_0x3149d1(0x115)),_0xb5280d[_0x3149d1(0xb6)](_0x4c4ee1,_0x47aa91);})),_0x51b05a;},'set':(_0xaba68b,_0x4ce980)=>{const _0x355ccd=_0x3e8f2b;return logger_1['logger']['debug']({'key':_0xaba68b,'value':_0x4ce980},_0x355ccd(0xf1)+_0xaba68b),_0xb5280d[_0x355ccd(0xb6)](_0xaba68b,_0x4ce980);},'del':_0x3eccac=>{const _0x3b4fa7=_0x3e8f2b;return logger_1[_0x3b4fa7(0xc4)][_0x3b4fa7(0xbc)](_0x3b4fa7(0xb9)+_0x3eccac),_0xb5280d[_0x3b4fa7(0xb5)](_0x3eccac);},'flushAll':()=>{const _0x3d3e54=_0x3e8f2b;return logger_1['logger'][_0x3d3e54(0xbc)](_0x3d3e54(0xc8)),_0xb5280d['flushAll']();}};_0x317043=(0x0,baileys_1['default'])({'logger':logger_1[_0x3e8f2b(0xe1)],'printQRInTerminal':![],'emitOwnEvents':![],'browser':[process['env'][_0x3e8f2b(0x105)]||'Daumzap',process[_0x3e8f2b(0xa3)][_0x3e8f2b(0xfe)]||'Chrome',process['env'][_0x3e8f2b(0xab)]||_0x3e8f2b(0xad)],'auth':{'creds':_0xda7247[_0x3e8f2b(0x104)],'keys':(0x0,baileys_1['makeCacheableSignalKeyStore'])(_0xda7247['keys'],logger_1[_0x3e8f2b(0xe1)])},'version':[_0x20e09e,_0x3dfd4b,_0x5c366f],'defaultQueryTimeoutMs':0xea60,'msgRetryCounterCache':_0x3c435c,'generateHighQualityLinkPreview':!![],'userDevicesCache':_0x50b88a,'getMessage':_0x11efd1,'agent':_0x343697,'fetchAgent':_0x343697,'cachedGroupMetadata':async _0x20ced3=>_0x43e495[_0x3e8f2b(0xd7)](_0x20ced3),'shouldIgnoreJid':_0x1e17af=>!(0x0,baileys_1[_0x3e8f2b(0x119)])(_0x1e17af)||_0x1e17af?.[_0x3e8f2b(0x111)](_0x3e8f2b(0xd9)),'transactionOpts':{'maxCommitRetries':0x1,'delayBetweenTriesMs':0xa}}),_0x317043[_0x3e8f2b(0x114)]=_0xa61a12=>{const _0x10bc56=_0x3e8f2b;if(!_0xa61a12['key'][_0x10bc56(0x112)])return;logger_1['logger']['debug']({'message':_0xa61a12[_0x10bc56(0xde)]},_0x10bc56(0xb8)),_0x15a7d4[_0x10bc56(0xb6)](_0xa61a12['key']['id'],_0xa61a12[_0x10bc56(0xde)]);},_0x317043['ev']['on'](_0x3e8f2b(0x11e),async({connection:_0x541753,lastDisconnect:_0x1b7a1a,qr:_0xb4436f})=>{const _0x37a37d=_0x3e8f2b;logger_1[_0x37a37d(0xc4)][_0x37a37d(0xec)]({'lastDisconnect':_0x1b7a1a},'Socket\x20\x20'+_0x3bd0e7+_0x37a37d(0xaa)+(_0x541753||''));if(_0x541753===_0x37a37d(0x125)){const _0x290a71=_0x1b7a1a?.[_0x37a37d(0xce)]?.['output']?.[_0x37a37d(0xcb)];if(_0x290a71===0x193)await _0x6a3aa6['update']({'status':'PENDING','session':''}),await(0x0,DeleteBaileysService_1[_0x37a37d(0x108)])(_0x6a3aa6['id']),_0x3da72c['emit'](_0x37a37d(0xfc)+_0x6a3aa6[_0x37a37d(0x10a)]+_0x37a37d(0xda),{'action':_0x37a37d(0xdf),'session':_0x6a3aa6}),(0x0,exports['removeWbot'])(_0x54ed9c,![]);else{if(_0x290a71===baileys_1[_0x37a37d(0xd3)][_0x37a37d(0xea)]||_0x290a71===0x1f7)logger_1[_0x37a37d(0xc4)]['info'](_0x3bd0e7+_0x37a37d(0xd0)),(0x0,exports[_0x37a37d(0xe7)])(_0x54ed9c,![])[_0x37a37d(0xbd)](()=>{setTimeout(async()=>{const _0x551043=a298_0x3af6;await _0x6a3aa6[_0x551043(0xbf)](),await(0x0,StartWhatsAppSession_1[_0x551043(0xc0)])(_0x6a3aa6,_0x6a3aa6['companyId']);},0x3e8);});else _0x290a71!==baileys_1[_0x37a37d(0xd3)][_0x37a37d(0xcf)]?(await _0x6a3aa6[_0x37a37d(0xdf)]({'status':_0x37a37d(0x126)}),_0x3da72c[_0x37a37d(0xb4)](_0x37a37d(0xfc)+_0x6a3aa6[_0x37a37d(0x10a)]+_0x37a37d(0xda),{'action':'update','session':_0x6a3aa6}),(0x0,exports[_0x37a37d(0xe7)])(_0x54ed9c,![])[_0x37a37d(0xbd)](()=>{const _0x2a020e=_0x37a37d;logger_1['logger']['info'](_0x2a020e(0xdb)+_0x3bd0e7+_0x2a020e(0xb7)),setTimeout(async()=>{const _0x4d3771=_0x2a020e;await _0x6a3aa6[_0x4d3771(0xbf)](),await(0x0,StartWhatsAppSession_1[_0x4d3771(0xc0)])(_0x6a3aa6,_0x6a3aa6[_0x4d3771(0x10a)]);},0x7d0);})):(await _0x6a3aa6[_0x37a37d(0xdf)]({'status':_0x37a37d(0x126),'session':''}),await(0x0,DeleteBaileysService_1['default'])(_0x6a3aa6['id']),_0x3da72c[_0x37a37d(0xb4)](_0x37a37d(0xfc)+_0x6a3aa6['companyId']+_0x37a37d(0xda),{'action':_0x37a37d(0xdf),'session':_0x6a3aa6}),(0x0,exports['removeWbot'])(_0x54ed9c,![])['then'](()=>{const _0x2f406e=_0x37a37d;logger_1[_0x2f406e(0xc4)]['info'](_0x2f406e(0xdb)+_0x3bd0e7+_0x2f406e(0xb7)),setTimeout(async()=>{const _0x7ee9e0=_0x2f406e;await _0x6a3aa6[_0x7ee9e0(0xbf)](),await(0x0,StartWhatsAppSession_1[_0x7ee9e0(0xc0)])(_0x6a3aa6,_0x6a3aa6[_0x7ee9e0(0x10a)]);},0x7d0);}));}}if(_0x541753==='open'){await _0x6a3aa6[_0x37a37d(0xdf)]({'status':_0x37a37d(0xa9),'qrcode':'','retries':0x0}),_0x3da72c[_0x37a37d(0xb4)](_0x37a37d(0xfc)+_0x6a3aa6[_0x37a37d(0x10a)]+_0x37a37d(0xda),{'action':_0x37a37d(0xdf),'session':_0x6a3aa6});const _0x5c9757=sessions['findIndex'](_0xa3c447=>_0xa3c447['id']===_0x6a3aa6['id']);_0x5c9757===-0x1&&(_0x317043['id']=_0x6a3aa6['id'],sessions['push'](_0x317043)),_0x2ecd7d(_0x317043);}if(_0xb4436f!==undefined){if(retriesQrCodeMap[_0x37a37d(0xd7)](_0x54ed9c)&&retriesQrCodeMap[_0x37a37d(0xd7)](_0x54ed9c)>=0x3)await _0x5dfabe[_0x37a37d(0xdf)]({'status':'DISCONNECTED','qrcode':''}),await(0x0,DeleteBaileysService_1[_0x37a37d(0x108)])(_0x5dfabe['id']),_0x3da72c[_0x37a37d(0xb4)](_0x37a37d(0xd4),{'action':'update','session':_0x5dfabe}),_0x317043['ev'][_0x37a37d(0xd6)](_0x37a37d(0x11e)),_0x317043['ws'][_0x37a37d(0x125)](),_0x317043=null,retriesQrCodeMap['delete'](_0x54ed9c);else{logger_1['logger'][_0x37a37d(0xec)]('Session\x20QRCode\x20Generate\x20'+_0x3bd0e7),retriesQrCodeMap[_0x37a37d(0xb6)](_0x54ed9c,_0x424d63+=0x1),await _0x6a3aa6[_0x37a37d(0xdf)]({'qrcode':_0xb4436f,'status':_0x37a37d(0x118),'retries':0x0});const _0x126dbb=sessions[_0x37a37d(0xf7)](_0x422610=>_0x422610['id']===_0x6a3aa6['id']);_0x126dbb===-0x1&&(_0x317043['id']=_0x6a3aa6['id'],sessions[_0x37a37d(0xc7)](_0x317043)),_0x3da72c[_0x37a37d(0xb4)](_0x37a37d(0xfc)+_0x6a3aa6['companyId']+_0x37a37d(0xda),{'action':_0x37a37d(0xdf),'session':_0x6a3aa6});}}}),_0x317043['ev']['on'](_0x3e8f2b(0x128),_0x29809d),_0x317043['ev']['on'](_0x3e8f2b(0xcd),async({id:_0xcc8333,presences:_0x1acd67})=>{const _0x3244b9=_0x3e8f2b;try{const _0x369049=_0x1acd67[_0xcc8333]?.[_0x3244b9(0xb2)];if(!_0x369049){logger_1['logger']['debug'](_0x3244b9(0xa6));return;}const _0x26daab=(0x0,ExtractPhoneNumber_1[_0x3244b9(0xaf)])(_0xcc8333),_0x2da296=await Contact_1['default'][_0x3244b9(0x117)]({'where':{'number':_0x26daab,'companyId':_0x6a3aa6['companyId']}});if(!_0x2da296){logger_1['logger'][_0x3244b9(0xbc)](_0x3244b9(0xb1)+_0xcc8333);return;}logger_1['logger']['debug']('Found\x20contact\x20ID:\x20'+_0x2da296['id']+_0x3244b9(0x10b)+_0xcc8333);const _0x2eb079=await Ticket_1[_0x3244b9(0x108)][_0x3244b9(0x117)]({'where':{'contactId':_0x2da296['id'],'whatsappId':_0x6a3aa6['id'],'status':{[sequelize_1['Op']['or']]:[_0x3244b9(0xcc),'pending']}}});if(!_0x2eb079){logger_1[_0x3244b9(0xc4)][_0x3244b9(0xbc)](_0x3244b9(0xf5)+_0x2da296['id']);return;}const _0x5d1a2b=(0x0,socket_1[_0x3244b9(0xac)])();_0x5d1a2b['to'](_0x2eb079['id'][_0x3244b9(0x124)]())['to'](_0x3244b9(0xfc)+_0x6a3aa6['companyId']+'-'+_0x2eb079[_0x3244b9(0x11a)])['to'](_0x3244b9(0xd1)+_0x2eb079[_0x3244b9(0xfb)]+'-'+_0x2eb079[_0x3244b9(0x11a)])[_0x3244b9(0xb4)](_0x3244b9(0xfc)+_0x6a3aa6['companyId']+_0x3244b9(0xc6),{'ticketId':_0x2eb079['id'],'presence':_0x369049});}catch(_0x2d2cc0){logger_1['logger']['error'](_0x3244b9(0x101)+_0x2d2cc0['message']),Sentry['captureException'](_0x2d2cc0);}}),_0x317043['ev']['on']('groups.upsert',_0x540a27=>{const _0xe5d1d9=_0x3e8f2b;logger_1[_0xe5d1d9(0xc4)][_0xe5d1d9(0xbc)](_0xe5d1d9(0x116)),_0x540a27[_0xe5d1d9(0xf4)](_0x4c0e05=>{const _0x54e119=_0xe5d1d9;_0x43e495[_0x54e119(0xb6)](_0x4c0e05['id'],_0x4c0e05);});}),_0x317043['ev']['on']('groups.update',async([_0x1e3bc7])=>{const _0x9c14aa=_0x3e8f2b;logger_1[_0x9c14aa(0xc4)][_0x9c14aa(0xbc)]('Received\x20group\x20update');const _0x24d417=await _0x317043[_0x9c14aa(0xe9)](_0x1e3bc7['id']);_0x43e495[_0x9c14aa(0xb6)](_0x1e3bc7['id'],_0x24d417);}),_0x317043['ev']['on'](_0x3e8f2b(0xbe),async _0x32e960=>{const _0x355103=_0x3e8f2b;logger_1['logger'][_0x355103(0xbc)](_0x355103(0xf6));try{const _0x3c2f00=await _0x317043['groupMetadata'](_0x32e960['id']);_0x43e495['set'](_0x32e960['id'],_0x3c2f00);}catch(_0x43f8b4){_0x43e495[_0x355103(0xb5)](_0x32e960['id']);}});})());}catch(_0x2303f3){Sentry[_0x509428(0xc1)](_0x2303f3),console[_0x509428(0xc5)](_0x2303f3),_0x19b6f9(_0x2303f3);}});};function a298_0x3af6(_0x306691,_0x430a3a){const _0x479161=a298_0x99bc();return a298_0x3af6=function(_0x3a455e,_0x3fa361){_0x3a455e=_0x3a455e-0x9e;let _0x99bc=_0x479161[_0x3a455e];return _0x99bc;},a298_0x3af6(_0x306691,_0x430a3a);}exports[a298_0x2c0d00(0x10d)]=initWASocket;function a298_0x99bc(){const _0x35ab41=['Contact\x20not\x20found\x20for\x20','lastKnownPresence','writable','emit','del','set','\x20in\x202\x20seconds','cacheMessage:\x20saved','groupCache.del\x20','splice','versionWA','debug','then','group-participants.update','reload','StartWhatsAppSession','captureException','./socket','Erro\x20ao\x20obter\x20versionWA:','logger','log','-presence','push','groupCache.flushAll','128zAFXHm','stable','statusCode','open','presence.update','error','loggedOut','\x20restart\x20required\x20(503),\x20reconnecting\x20immediately...','queue-','__esModule','DisconnectReason','whatsappSession','getWbot','removeAllListeners','get','groups.update','@newsletter','-whatsappSession','Reconnecting\x20','ERR_WAPP_NOT_INITIALIZED','defineProperty','message','update','../models/Message','loggerBaileys','logout','../models/Ticket','groups.upsert','restartWbot','373516RTAEwn','removeWbot','__setModuleDefault','groupMetadata','restartRequired','Formato\x20inv√°lido\x20para\x20versionWA.\x20Esperado:\x200.0000.0000000000','info','Using\x20WA\x20v','apply','262790OVHwsW',',\x20isLatest:\x20','groupCache.set\x20','create','constructor','forEach','No\x20active\x20ticket\x20found\x20for\x20contact\x20','Received\x20group\x20participants\x20update','findIndex','getOwnPropertyNames','17530ZPtJxw','../utils/logger','queueId','company-','parse','BROWSER_NAME','cacheMessage:\x20not\x20found\x20in\x20cache\x20-\x20fallback\x20to\x20database','getOwnPropertyDescriptor','Error\x20processing\x20presence\x20update:\x20','length','2RBvFqn','creds','BROWSER_CLIENT','@sentry/node','findAll','default','10025491KWoFkV','companyId','\x20for\x20number:\x20','402uyZFbT','initWASocket','__importStar','cacheMessage:\x20error\x20parsing\x20message\x20from\x20database\x20-\x20','call','endsWith','fromMe','474597kxyxWI','cacheMessage','\x20set','Received\x20new\x20group','findOne','qrcode','isPnUser','status','CONFIG_SESSION_WA_CONNECTION','../models/Whatsapp','@whiskeysockets/baileys','connection.update','end','../models/Contact','../helpers/authState','Erro\x20ao\x20inicializar\x20waVersion:','groupCache.get\x20','toString','close','PENDING','220QzyYOX','creds.update','cacheMessage:\x20recovered\x20from\x20database','isLegacy:\x20','configurable','41421AddCIR','prototype','split','../services/WbotServices/StartWhatsAppSession','\x20not\x20found','../services/BaileysServices/DeleteBaileysService','env','sequelize','__createBinding','Ignoring\x20presence\x20from\x20possible\x20group','2035288kPwyHw','dataJson','CONNECTED','\x20Connection\x20Update\x20','BROWSER_VERSION','getIO','10.0','Starting\x20session\x20','getPhoneNumberFromJid','(((.+)+)+)+$'];a298_0x99bc=function(){return _0x35ab41;};return a298_0x99bc();}