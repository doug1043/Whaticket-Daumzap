'use strict';const a295_0x362200=a295_0x3ddb;(function(_0x372e4d,_0x8b6e56){const _0x4cc64c=a295_0x3ddb,_0x3cee41=_0x372e4d();while(!![]){try{const _0x52f1a7=-parseInt(_0x4cc64c(0x156))/0x1*(parseInt(_0x4cc64c(0x172))/0x2)+parseInt(_0x4cc64c(0x15a))/0x3+parseInt(_0x4cc64c(0x185))/0x4*(parseInt(_0x4cc64c(0x168))/0x5)+-parseInt(_0x4cc64c(0x140))/0x6+-parseInt(_0x4cc64c(0x139))/0x7+-parseInt(_0x4cc64c(0x1a5))/0x8+-parseInt(_0x4cc64c(0x166))/0x9*(-parseInt(_0x4cc64c(0x18d))/0xa);if(_0x52f1a7===_0x8b6e56)break;else _0x3cee41['push'](_0x3cee41['shift']());}catch(_0x40a0ae){_0x3cee41['push'](_0x3cee41['shift']());}}}(a295_0x3859,0x3ca0e));var __createBinding=this&&this[a295_0x362200(0x135)]||(Object[a295_0x362200(0x149)]?function(_0x23f507,_0x330741,_0x12f452,_0x287943){const _0x46c300=a295_0x362200;if(_0x287943===undefined)_0x287943=_0x12f452;var _0x197d59=Object['getOwnPropertyDescriptor'](_0x330741,_0x12f452);(!_0x197d59||('get'in _0x197d59?!_0x330741[_0x46c300(0x18a)]:_0x197d59[_0x46c300(0x18e)]||_0x197d59[_0x46c300(0x1ac)]))&&(_0x197d59={'enumerable':!![],'get':function(){return _0x330741[_0x12f452];}}),Object[_0x46c300(0x14d)](_0x23f507,_0x287943,_0x197d59);}:function(_0x26b32a,_0x57c264,_0x514416,_0x54b410){if(_0x54b410===undefined)_0x54b410=_0x514416;_0x26b32a[_0x54b410]=_0x57c264[_0x514416];}),__setModuleDefault=this&&this[a295_0x362200(0x175)]||(Object[a295_0x362200(0x149)]?function(_0xa3d3d0,_0x31b0c6){const _0x17a07d=a295_0x362200;Object[_0x17a07d(0x14d)](_0xa3d3d0,_0x17a07d(0x138),{'enumerable':!![],'value':_0x31b0c6});}:function(_0x3e844e,_0x474a5a){const _0x4f36d3=a295_0x362200;_0x3e844e[_0x4f36d3(0x138)]=_0x474a5a;}),__importStar=this&&this['__importStar']||(function(){const _0x446555=(function(){let _0x1ab862=!![];return function(_0x4fe4ad,_0xcd52e6){const _0x31ed02=_0x1ab862?function(){const _0x195390=a295_0x3ddb;if(_0xcd52e6){const _0x326f0e=_0xcd52e6[_0x195390(0x16c)](_0x4fe4ad,arguments);return _0xcd52e6=null,_0x326f0e;}}:function(){};return _0x1ab862=![],_0x31ed02;};}()),_0x1b643e=_0x446555(this,function(){const _0xadcf91=a295_0x3ddb;return _0x1b643e['toString']()[_0xadcf91(0x1b0)]('(((.+)+)+)+$')[_0xadcf91(0x183)]()[_0xadcf91(0x178)](_0x1b643e)[_0xadcf91(0x1b0)](_0xadcf91(0x1bc));});_0x1b643e();var _0x4ec946=function(_0x486c1a){return _0x4ec946=Object['getOwnPropertyNames']||function(_0x4215e8){const _0x324d8e=a295_0x3ddb;var _0x1c585d=[];for(var _0x31e9b6 in _0x4215e8)if(Object[_0x324d8e(0x1ae)][_0x324d8e(0x1b4)][_0x324d8e(0x189)](_0x4215e8,_0x31e9b6))_0x1c585d[_0x1c585d[_0x324d8e(0x164)]]=_0x31e9b6;return _0x1c585d;},_0x4ec946(_0x486c1a);};return function(_0x46e4f4){const _0xd380cd=a295_0x3ddb;if(_0x46e4f4&&_0x46e4f4[_0xd380cd(0x18a)])return _0x46e4f4;var _0x2a21bd={};if(_0x46e4f4!=null){for(var _0x2b3f84=_0x4ec946(_0x46e4f4),_0x1d32ec=0x0;_0x1d32ec<_0x2b3f84['length'];_0x1d32ec++)if(_0x2b3f84[_0x1d32ec]!==_0xd380cd(0x138))__createBinding(_0x2a21bd,_0x46e4f4,_0x2b3f84[_0x1d32ec]);}return __setModuleDefault(_0x2a21bd,_0x46e4f4),_0x2a21bd;};}()),__importDefault=this&&this[a295_0x362200(0x1a9)]||function(_0x276e00){const _0x4ab7c8=a295_0x362200;return _0x276e00&&_0x276e00[_0x4ab7c8(0x18a)]?_0x276e00:{'default':_0x276e00};};Object[a295_0x362200(0x14d)](exports,'__esModule',{'value':!![]}),exports[a295_0x362200(0x1a7)]=exports[a295_0x362200(0x161)]=exports[a295_0x362200(0x1b9)]=exports[a295_0x362200(0x1ab)]=void 0x0;const Sentry=__importStar(require(a295_0x362200(0x148))),baileys_1=__importStar(require('@whiskeysockets/baileys')),node_cache_1=__importDefault(require('node-cache')),sequelize_1=require(a295_0x362200(0x17f)),Whatsapp_1=__importDefault(require(a295_0x362200(0x16e))),logger_1=require(a295_0x362200(0x1a8)),authState_1=__importDefault(require(a295_0x362200(0x1b1))),AppError_1=__importDefault(require(a295_0x362200(0x1a4))),socket_1=require(a295_0x362200(0x188)),StartWhatsAppSession_1=require('../services/WbotServices/StartWhatsAppSession'),DeleteBaileysService_1=__importDefault(require(a295_0x362200(0x190))),Contact_1=__importDefault(require(a295_0x362200(0x19c))),Ticket_1=__importDefault(require('../models/Ticket')),GetPublicSettingService_1=__importDefault(require(a295_0x362200(0x13c))),Message_1=__importDefault(require('../models/Message')),sessions=[],retriesQrCodeMap=new Map(),getWbot=_0x5e62df=>{const _0x75eb=a295_0x362200,_0x447859=sessions[_0x75eb(0x137)](_0x10090d=>_0x10090d['id']===_0x5e62df);if(_0x447859===-0x1)throw new AppError_1['default'](_0x75eb(0x16a));return sessions[_0x447859];};function a295_0x3859(){const _0x137b71=['getIO','Chrome','Reconnecting\x20','\x20set','env','push','group-participants.update','groupMetadata','endsWith','log','BROWSER_NAME','../models/Contact','stable','Received\x20group\x20update','cacheMessage','removeAllListeners','reload','BROWSER_VERSION','replace','../errors/AppError','3638928tZlYSi','10.0','initWASocket','../utils/logger','__importDefault','loggedOut','getWbot','configurable','connection.update','prototype','company-','search','../helpers/authState','set','flushAll','hasOwnProperty','pending','\x20in\x202\x20seconds','debug','contacts.upsert','removeWbot','then','groupCache.set\x20','(((.+)+)+)+$','cacheMessage:\x20saved','__createBinding','lastKnownPresence','findIndex','default','2639420bvHdnK','logger','key','../services/SettingServices/GetPublicSettingService','groupCache.del\x20','forEach','Formato\x20invÃ¡lido\x20para\x20versionWA.\x20Esperado:\x200.0000.0000000000','2267250tVRNKz','Erro\x20ao\x20obter\x20versionWA:','whatsappSession',',\x20isLatest:\x20','Error\x20processing\x20presence\x20update:\x20','output','CONNECTED','using\x20WA\x20v','@sentry/node','create','error','findOne','update','defineProperty','creds.update','PENDING','No\x20active\x20ticket\x20found\x20for\x20contact\x20','qrcode','map','statusCode','isLegacy:\x20','\x20Connection\x20Update\x20','1DCIRKq','presence.update','DisconnectReason','get','146694tCZWDt','Received\x20new\x20group','StartWhatsAppSession','Using\x20WA\x20v','status','groups.update','CONFIG_SESSION_WA_CONNECTION','restartWbot','\x20not\x20found','groups.upsert','length','keys','1818agpzoR','@newsletter','55stqloo','isJidBroadcast','ERR_WAPP_NOT_INITIALIZED','cacheMessage:\x20not\x20found\x20in\x20cache\x20-\x20fallback\x20to\x20database','apply','queue-','../models/Whatsapp','Received\x20group\x20participants\x20update','Erro\x20ao\x20inicializar\x20waVersion:','open','741728pBbwzl','info','Contact\x20not\x20found\x20for\x20','__setModuleDefault','findAll','close','constructor','-whatsappSession','del','message','cacheMessage:\x20error\x20parsing\x20message\x20from\x20database\x20-\x20','groupCache.get\x20','loggerBaileys','sequelize','makeCacheableSignalKeyStore','split','fromMe','toString','parse','158396eOWmWw','captureException','emit','./socket','call','__esModule','queueId','companyId','66560hxolLq','writable','creds','../services/BaileysServices/DeleteBaileysService'];a295_0x3859=function(){return _0x137b71;};return a295_0x3859();}exports[a295_0x362200(0x1ab)]=getWbot;const removeWbot=async(_0x266ea9,_0x3a8551=!![])=>{const _0x430071=a295_0x362200;try{const _0x6c6fe6=sessions[_0x430071(0x137)](_0x1d9125=>_0x1d9125['id']===_0x266ea9);_0x6c6fe6!==-0x1&&(_0x3a8551&&await sessions[_0x6c6fe6]['logout'](),sessions[_0x6c6fe6]['ev'][_0x430071(0x1a0)](_0x430071(0x1ad)),sessions[_0x6c6fe6]['ev']['removeAllListeners'](_0x430071(0x14e)),sessions[_0x6c6fe6]['ev'][_0x430071(0x1a0)]('presence.update'),sessions[_0x6c6fe6]['ev'][_0x430071(0x1a0)]('groups.upsert'),sessions[_0x6c6fe6]['ev'][_0x430071(0x1a0)](_0x430071(0x15f)),sessions[_0x6c6fe6]['ev'][_0x430071(0x1a0)](_0x430071(0x197)),sessions[_0x6c6fe6]['ev']['removeAllListeners'](_0x430071(0x1b8)),sessions[_0x6c6fe6]['end'](null),sessions[_0x6c6fe6]['ws'][_0x430071(0x1a0)](),await sessions[_0x6c6fe6]['ws']['close'](),sessions['splice'](_0x6c6fe6,0x1));}catch(_0x49af6b){logger_1[_0x430071(0x13a)][_0x430071(0x14a)](_0x49af6b);}};exports[a295_0x362200(0x1b9)]=removeWbot;const getVersionWA=async()=>{const _0x1bb50b=a295_0x362200;try{const _0x2928e4='versionWA',_0x8ba942=0x1,_0x2e4e84=await(0x0,GetPublicSettingService_1[_0x1bb50b(0x138)])({'key':_0x2928e4,'companyId':_0x8ba942});return _0x2e4e84||process[_0x1bb50b(0x195)]['CONFIG_SESSION_WA_CONNECTION'];}catch(_0x2c811a){return console[_0x1bb50b(0x14a)](_0x1bb50b(0x141),_0x2c811a),process['env'][_0x1bb50b(0x160)];}},restartWbot=async(_0x49ec73,_0x1d906a)=>{const _0x3db67f=a295_0x362200;try{const _0x11ae52={'where':{'companyId':_0x49ec73},'attributes':['id']},_0x37ef6e=await Whatsapp_1[_0x3db67f(0x138)][_0x3db67f(0x176)](_0x11ae52);_0x37ef6e[_0x3db67f(0x152)](async _0x4281f5=>{const _0x47955a=_0x3db67f,_0x5c3243=sessions[_0x47955a(0x137)](_0x272da6=>_0x272da6['id']===_0x4281f5['id']);_0x5c3243!==-0x1&&sessions[_0x5c3243]['ws'][_0x47955a(0x177)]();});}catch(_0x20f876){logger_1['logger'][_0x3db67f(0x14a)](_0x20f876);}};exports[a295_0x362200(0x161)]=restartWbot;function a295_0x3ddb(_0x5afc94,_0x51774d){const _0x566ed0=a295_0x3859();return a295_0x3ddb=function(_0x3bc76b,_0x59b85a){_0x3bc76b=_0x3bc76b-0x134;let _0x3859cf=_0x566ed0[_0x3bc76b];return _0x3859cf;},a295_0x3ddb(_0x5afc94,_0x51774d);}const initWASocket=async(_0x2c48f8,_0x223d1f)=>{return new Promise((_0x5d3d00,_0x35cb36)=>{const _0x5b9c96=a295_0x3ddb;try{((async()=>{const _0x57f2f8=a295_0x3ddb,_0x1919b2=(0x0,socket_1[_0x57f2f8(0x191)])(),_0x3556bc=await Whatsapp_1[_0x57f2f8(0x138)]['findOne']({'where':{'id':_0x2c48f8['id']}});if(!_0x3556bc)return;const {id:_0x1f7da7,name:_0x485b07,provider:_0x5b9414}=_0x3556bc;let _0x4fcdc0;const _0x5143bf=_0x5b9414===_0x57f2f8(0x19d);try{_0x4fcdc0=await getVersionWA(),logger_1[_0x57f2f8(0x13a)]['info'](_0x57f2f8(0x15d)+_0x4fcdc0+_0x57f2f8(0x143)+_0x5143bf);}catch(_0x29812b){console['error'](_0x57f2f8(0x170),_0x29812b);}const _0x40e52d=_0x4fcdc0[_0x57f2f8(0x181)]('.');if(_0x40e52d[_0x57f2f8(0x164)]!==0x3)throw new Error(_0x57f2f8(0x13f));const [_0xf6de63,_0x553bf8,_0x3466bd]=_0x40e52d[_0x57f2f8(0x152)](Number);logger_1[_0x57f2f8(0x13a)]['info'](_0x57f2f8(0x147)+_0x4fcdc0),logger_1[_0x57f2f8(0x13a)]['info'](_0x57f2f8(0x154)+_0x5143bf),logger_1['logger'][_0x57f2f8(0x173)]('Starting\x20session\x20'+_0x485b07);let _0x1cdd28=0x0,_0x2a0f33=null;const _0x508b5f=new node_cache_1[(_0x57f2f8(0x138))]({'stdTTL':0x78,'checkperiod':0x1e,'useClones':![]});async function _0x466972(_0x367fe3){const _0x18cc74=_0x57f2f8;if(!_0x367fe3['id'])return null;const _0x1bb022=_0x508b5f[_0x18cc74(0x159)](_0x367fe3['id']);if(_0x1bb022)return logger_1[_0x18cc74(0x13a)][_0x18cc74(0x1b7)]({'message':_0x1bb022},'cacheMessage:\x20recovered\x20from\x20cache'),_0x1bb022;logger_1[_0x18cc74(0x13a)][_0x18cc74(0x1b7)]({'key':_0x367fe3},_0x18cc74(0x16b));const _0x2181ea=await Message_1[_0x18cc74(0x138)]['findOne']({'where':{'id':_0x367fe3['id'],'fromMe':!![]}});try{const _0x3332a3=JSON[_0x18cc74(0x184)](_0x2181ea['dataJson']);return logger_1[_0x18cc74(0x13a)][_0x18cc74(0x1b7)]({'key':_0x367fe3,'data':_0x3332a3},'cacheMessage:\x20recovered\x20from\x20database'),_0x508b5f[_0x18cc74(0x1b2)](_0x367fe3['id'],_0x3332a3['message']),_0x3332a3['message']||undefined;}catch(_0x52a3ee){logger_1[_0x18cc74(0x13a)]['error']({'key':_0x367fe3},_0x18cc74(0x17c)+_0x52a3ee[_0x18cc74(0x17b)]);}return undefined;}const {state:_0x32dfd0,saveState:_0x211c47}=await(0x0,authState_1[_0x57f2f8(0x138)])(_0x2c48f8),_0x23e15b=new node_cache_1['default'](),_0x3afcd9=new node_cache_1[(_0x57f2f8(0x138))](),_0x2576a4=new node_cache_1[(_0x57f2f8(0x138))]({'stdTTL':0x5*0x3c,'useClones':![]}),_0x1ce60f={'get':_0x20dafb=>{const _0x1e3c7f=_0x57f2f8;logger_1['logger'][_0x1e3c7f(0x1b7)](_0x1e3c7f(0x17d)+_0x20dafb);const _0x170fef=_0x2576a4['get'](_0x20dafb);return!_0x170fef&&(logger_1[_0x1e3c7f(0x13a)][_0x1e3c7f(0x1b7)](_0x1e3c7f(0x17d)+_0x20dafb+_0x1e3c7f(0x162)),_0x2a0f33[_0x1e3c7f(0x198)](_0x20dafb)[_0x1e3c7f(0x1ba)](async _0x37d18c=>{const _0x25f2a2=_0x1e3c7f;logger_1[_0x25f2a2(0x13a)][_0x25f2a2(0x1b7)]({'key':_0x20dafb,'metadata':_0x37d18c},_0x25f2a2(0x17d)+_0x20dafb+_0x25f2a2(0x194)),_0x2576a4[_0x25f2a2(0x1b2)](_0x20dafb,_0x37d18c);})),_0x170fef;},'set':(_0x4ecc77,_0x490fa3)=>{const _0xe81e21=_0x57f2f8;return logger_1[_0xe81e21(0x13a)]['debug']({'key':_0x4ecc77,'value':_0x490fa3},_0xe81e21(0x1bb)+_0x4ecc77),_0x2576a4[_0xe81e21(0x1b2)](_0x4ecc77,_0x490fa3);},'del':_0x172930=>{const _0x5700a9=_0x57f2f8;return logger_1[_0x5700a9(0x13a)][_0x5700a9(0x1b7)](_0x5700a9(0x13d)+_0x172930),_0x2576a4[_0x5700a9(0x17a)](_0x172930);},'flushAll':()=>{const _0x47676f=_0x57f2f8;return logger_1[_0x47676f(0x13a)][_0x47676f(0x1b7)]('groupCache.flushAll'),_0x2576a4[_0x47676f(0x1b3)]();}};_0x2a0f33=(0x0,baileys_1[_0x57f2f8(0x138)])({'logger':logger_1[_0x57f2f8(0x17e)],'printQRInTerminal':![],'emitOwnEvents':![],'browser':[process[_0x57f2f8(0x195)]['BROWSER_CLIENT']||'Daumzap',process[_0x57f2f8(0x195)][_0x57f2f8(0x19b)]||_0x57f2f8(0x192),process[_0x57f2f8(0x195)][_0x57f2f8(0x1a2)]||_0x57f2f8(0x1a6)],'auth':{'creds':_0x32dfd0[_0x57f2f8(0x18f)],'keys':(0x0,baileys_1[_0x57f2f8(0x180)])(_0x32dfd0[_0x57f2f8(0x165)],logger_1['loggerBaileys'])},'version':[_0xf6de63,_0x553bf8,_0x3466bd],'defaultQueryTimeoutMs':0xea60,'msgRetryCounterCache':_0x23e15b,'generateHighQualityLinkPreview':!![],'userDevicesCache':_0x3afcd9,'getMessage':_0x466972,'agent':_0x223d1f,'fetchAgent':_0x223d1f,'cachedGroupMetadata':async _0x15e2e3=>_0x1ce60f[_0x57f2f8(0x159)](_0x15e2e3),'shouldIgnoreJid':_0x1e1d6b=>(0x0,baileys_1[_0x57f2f8(0x169)])(_0x1e1d6b)||_0x1e1d6b?.[_0x57f2f8(0x199)](_0x57f2f8(0x167)),'transactionOpts':{'maxCommitRetries':0x1,'delayBetweenTriesMs':0xa}}),_0x2a0f33[_0x57f2f8(0x19f)]=_0x530bb6=>{const _0x5bd251=_0x57f2f8;if(!_0x530bb6[_0x5bd251(0x13b)][_0x5bd251(0x182)])return;logger_1['logger'][_0x5bd251(0x1b7)]({'message':_0x530bb6[_0x5bd251(0x17b)]},_0x5bd251(0x134)),_0x508b5f[_0x5bd251(0x1b2)](_0x530bb6[_0x5bd251(0x13b)]['id'],_0x530bb6[_0x5bd251(0x17b)]);},_0x2a0f33['ev']['on'](_0x57f2f8(0x1ad),async({connection:_0x526036,lastDisconnect:_0x3c8197,qr:_0x253667})=>{const _0x140f9f=_0x57f2f8;logger_1[_0x140f9f(0x13a)][_0x140f9f(0x173)]({'lastDisconnect':_0x3c8197},'Socket\x20\x20'+_0x485b07+_0x140f9f(0x155)+(_0x526036||''));_0x526036===_0x140f9f(0x177)&&(_0x3c8197?.['error']?.[_0x140f9f(0x145)]?.[_0x140f9f(0x153)]===0x193&&(await _0x2c48f8[_0x140f9f(0x14c)]({'status':_0x140f9f(0x14f),'session':''}),await(0x0,DeleteBaileysService_1['default'])(_0x2c48f8['id']),_0x1919b2[_0x140f9f(0x187)](_0x140f9f(0x1af)+_0x2c48f8[_0x140f9f(0x18c)]+_0x140f9f(0x179),{'action':_0x140f9f(0x14c),'session':_0x2c48f8}),(0x0,exports[_0x140f9f(0x1b9)])(_0x1f7da7,![])),_0x3c8197?.[_0x140f9f(0x14a)]?.[_0x140f9f(0x145)]?.[_0x140f9f(0x153)]!==baileys_1[_0x140f9f(0x158)][_0x140f9f(0x1aa)]?(await _0x2c48f8['update']({'status':_0x140f9f(0x14f)}),_0x1919b2[_0x140f9f(0x187)](_0x140f9f(0x1af)+_0x2c48f8[_0x140f9f(0x18c)]+_0x140f9f(0x179),{'action':_0x140f9f(0x14c),'session':_0x2c48f8}),(0x0,exports[_0x140f9f(0x1b9)])(_0x1f7da7,![])[_0x140f9f(0x1ba)](()=>{const _0x54ecdd=_0x140f9f;logger_1['logger'][_0x54ecdd(0x173)]('Reconnecting\x20'+_0x485b07+_0x54ecdd(0x1b6)),setTimeout(async()=>{const _0x44162a=_0x54ecdd;await _0x2c48f8['reload'](),await(0x0,StartWhatsAppSession_1[_0x44162a(0x15c)])(_0x2c48f8,_0x2c48f8[_0x44162a(0x18c)]);},0x7d0);})):(await _0x2c48f8[_0x140f9f(0x14c)]({'status':_0x140f9f(0x14f),'session':''}),await(0x0,DeleteBaileysService_1[_0x140f9f(0x138)])(_0x2c48f8['id']),_0x1919b2[_0x140f9f(0x187)](_0x140f9f(0x1af)+_0x2c48f8[_0x140f9f(0x18c)]+_0x140f9f(0x179),{'action':'update','session':_0x2c48f8}),(0x0,exports[_0x140f9f(0x1b9)])(_0x1f7da7,![])['then'](()=>{const _0xdf0027=_0x140f9f;logger_1['logger']['info'](_0xdf0027(0x193)+_0x485b07+_0xdf0027(0x1b6)),setTimeout(async()=>{const _0x5ad7a0=_0xdf0027;await _0x2c48f8[_0x5ad7a0(0x1a1)](),await(0x0,StartWhatsAppSession_1[_0x5ad7a0(0x15c)])(_0x2c48f8,_0x2c48f8[_0x5ad7a0(0x18c)]);},0x7d0);})));if(_0x526036===_0x140f9f(0x171)){await _0x2c48f8[_0x140f9f(0x14c)]({'status':_0x140f9f(0x146),'qrcode':'','retries':0x0}),_0x1919b2[_0x140f9f(0x187)](_0x140f9f(0x1af)+_0x2c48f8[_0x140f9f(0x18c)]+_0x140f9f(0x179),{'action':_0x140f9f(0x14c),'session':_0x2c48f8});const _0x457b87=sessions[_0x140f9f(0x137)](_0x3dc21d=>_0x3dc21d['id']===_0x2c48f8['id']);_0x457b87===-0x1&&(_0x2a0f33['id']=_0x2c48f8['id'],sessions['push'](_0x2a0f33)),_0x5d3d00(_0x2a0f33);}if(_0x253667!==undefined){if(retriesQrCodeMap[_0x140f9f(0x159)](_0x1f7da7)&&retriesQrCodeMap[_0x140f9f(0x159)](_0x1f7da7)>=0x3)await _0x3556bc['update']({'status':'DISCONNECTED','qrcode':''}),await(0x0,DeleteBaileysService_1[_0x140f9f(0x138)])(_0x3556bc['id']),_0x1919b2[_0x140f9f(0x187)](_0x140f9f(0x142),{'action':_0x140f9f(0x14c),'session':_0x3556bc}),_0x2a0f33['ev'][_0x140f9f(0x1a0)](_0x140f9f(0x1ad)),_0x2a0f33['ws']['close'](),_0x2a0f33=null,retriesQrCodeMap['delete'](_0x1f7da7);else{logger_1['logger'][_0x140f9f(0x173)]('Session\x20QRCode\x20Generate\x20'+_0x485b07),retriesQrCodeMap[_0x140f9f(0x1b2)](_0x1f7da7,_0x1cdd28+=0x1),await _0x2c48f8[_0x140f9f(0x14c)]({'qrcode':_0x253667,'status':_0x140f9f(0x151),'retries':0x0});const _0x32cc89=sessions['findIndex'](_0x3e68c7=>_0x3e68c7['id']===_0x2c48f8['id']);_0x32cc89===-0x1&&(_0x2a0f33['id']=_0x2c48f8['id'],sessions[_0x140f9f(0x196)](_0x2a0f33)),_0x1919b2[_0x140f9f(0x187)](_0x140f9f(0x1af)+_0x2c48f8[_0x140f9f(0x18c)]+'-whatsappSession',{'action':'update','session':_0x2c48f8});}}}),_0x2a0f33['ev']['on'](_0x57f2f8(0x14e),_0x211c47),_0x2a0f33['ev']['on'](_0x57f2f8(0x157),async({id:_0x5a1f00,presences:_0x2857ca})=>{const _0xdb535d=_0x57f2f8;try{const _0x16d7cd=_0x2857ca[_0x5a1f00]?.[_0xdb535d(0x136)];if(!_0x16d7cd){logger_1['logger'][_0xdb535d(0x1b7)]('Ignoring\x20presence\x20from\x20possible\x20group');return;}const _0x1795c3=await Contact_1[_0xdb535d(0x138)]['findOne']({'where':{'number':_0x5a1f00[_0xdb535d(0x1a3)](/\D/g,''),'companyId':_0x2c48f8[_0xdb535d(0x18c)]}});if(!_0x1795c3){logger_1[_0xdb535d(0x13a)][_0xdb535d(0x1b7)](_0xdb535d(0x174)+_0x5a1f00);return;}logger_1[_0xdb535d(0x13a)][_0xdb535d(0x1b7)]('Found\x20contact\x20ID:\x20'+_0x1795c3['id']+'\x20for\x20number:\x20'+_0x5a1f00);const _0x197269=await Ticket_1['default'][_0xdb535d(0x14b)]({'where':{'contactId':_0x1795c3['id'],'whatsappId':_0x2c48f8['id'],'status':{[sequelize_1['Op']['or']]:[_0xdb535d(0x171),_0xdb535d(0x1b5)]}}});if(!_0x197269){logger_1['logger']['debug'](_0xdb535d(0x150)+_0x1795c3['id']);return;}const _0x4dccdd=(0x0,socket_1['getIO'])();_0x4dccdd['to'](_0x197269['id'][_0xdb535d(0x183)]())['to']('company-'+_0x2c48f8[_0xdb535d(0x18c)]+'-'+_0x197269[_0xdb535d(0x15e)])['to'](_0xdb535d(0x16d)+_0x197269[_0xdb535d(0x18b)]+'-'+_0x197269[_0xdb535d(0x15e)])[_0xdb535d(0x187)](_0xdb535d(0x1af)+_0x2c48f8[_0xdb535d(0x18c)]+'-presence',{'ticketId':_0x197269['id'],'presence':_0x16d7cd});}catch(_0x43e5a9){logger_1['logger'][_0xdb535d(0x14a)](_0xdb535d(0x144)+_0x43e5a9['message']),Sentry[_0xdb535d(0x186)](_0x43e5a9);}}),_0x2a0f33['ev']['on'](_0x57f2f8(0x163),_0x53a211=>{const _0x4472d2=_0x57f2f8;logger_1['logger'][_0x4472d2(0x1b7)](_0x4472d2(0x15b)),_0x53a211[_0x4472d2(0x13e)](_0xd8aa63=>{const _0x196d30=_0x4472d2;_0x1ce60f[_0x196d30(0x1b2)](_0xd8aa63['id'],_0xd8aa63);});}),_0x2a0f33['ev']['on'](_0x57f2f8(0x15f),async([_0x37461f])=>{const _0x2eaf5b=_0x57f2f8;logger_1[_0x2eaf5b(0x13a)][_0x2eaf5b(0x1b7)](_0x2eaf5b(0x19e));const _0x1a7b59=await _0x2a0f33['groupMetadata'](_0x37461f['id']);_0x1ce60f[_0x2eaf5b(0x1b2)](_0x37461f['id'],_0x1a7b59);}),_0x2a0f33['ev']['on'](_0x57f2f8(0x197),async _0x238bef=>{const _0x2b757b=_0x57f2f8;logger_1['logger'][_0x2b757b(0x1b7)](_0x2b757b(0x16f));try{const _0x2c1291=await _0x2a0f33[_0x2b757b(0x198)](_0x238bef['id']);_0x1ce60f[_0x2b757b(0x1b2)](_0x238bef['id'],_0x2c1291);}catch(_0x2929ba){_0x1ce60f[_0x2b757b(0x17a)](_0x238bef['id']);}});})());}catch(_0x46f40a){Sentry[_0x5b9c96(0x186)](_0x46f40a),console[_0x5b9c96(0x19a)](_0x46f40a),_0x35cb36(_0x46f40a);}});};exports[a295_0x362200(0x1a7)]=initWASocket;