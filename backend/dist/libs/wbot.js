'use strict';const a289_0x32018c=a289_0x2498;(function(_0x483642,_0x16d62c){const _0x5873cd=a289_0x2498,_0x4e00cd=_0x483642();while(!![]){try{const _0x1442a0=parseInt(_0x5873cd(0x1f3))/0x1+-parseInt(_0x5873cd(0x1f6))/0x2*(parseInt(_0x5873cd(0x1a8))/0x3)+parseInt(_0x5873cd(0x19d))/0x4*(parseInt(_0x5873cd(0x1c7))/0x5)+parseInt(_0x5873cd(0x180))/0x6+-parseInt(_0x5873cd(0x1c8))/0x7+-parseInt(_0x5873cd(0x198))/0x8*(-parseInt(_0x5873cd(0x1ca))/0x9)+parseInt(_0x5873cd(0x18c))/0xa*(-parseInt(_0x5873cd(0x17a))/0xb);if(_0x1442a0===_0x16d62c)break;else _0x4e00cd['push'](_0x4e00cd['shift']());}catch(_0x1aaa9a){_0x4e00cd['push'](_0x4e00cd['shift']());}}}(a289_0x3b30,0x7bb6e));var __createBinding=this&&this[a289_0x32018c(0x1cd)]||(Object[a289_0x32018c(0x1ed)]?function(_0x1a135b,_0x2eb2c0,_0x586f75,_0x36f614){const _0x531668=a289_0x32018c;if(_0x36f614===undefined)_0x36f614=_0x586f75;var _0xb651ad=Object[_0x531668(0x1bd)](_0x2eb2c0,_0x586f75);(!_0xb651ad||(_0x531668(0x1aa)in _0xb651ad?!_0x2eb2c0[_0x531668(0x1f9)]:_0xb651ad[_0x531668(0x1ba)]||_0xb651ad[_0x531668(0x17c)]))&&(_0xb651ad={'enumerable':!![],'get':function(){return _0x2eb2c0[_0x586f75];}}),Object['defineProperty'](_0x1a135b,_0x36f614,_0xb651ad);}:function(_0x2de345,_0x2ca4f2,_0x32036e,_0x3447a8){if(_0x3447a8===undefined)_0x3447a8=_0x32036e;_0x2de345[_0x3447a8]=_0x2ca4f2[_0x32036e];}),__setModuleDefault=this&&this[a289_0x32018c(0x1c6)]||(Object['create']?function(_0x4b1f08,_0x41bdcb){const _0x577c06=a289_0x32018c;Object[_0x577c06(0x177)](_0x4b1f08,'default',{'enumerable':!![],'value':_0x41bdcb});}:function(_0x2e2d43,_0x1984ba){const _0x2b097a=a289_0x32018c;_0x2e2d43[_0x2b097a(0x19a)]=_0x1984ba;}),__importStar=this&&this['__importStar']||(function(){const _0x49c01b=(function(){let _0x15c060=!![];return function(_0x5c344a,_0x2d6a70){const _0x3556dd=_0x15c060?function(){const _0x147c6b=a289_0x2498;if(_0x2d6a70){const _0x3fe79b=_0x2d6a70[_0x147c6b(0x182)](_0x5c344a,arguments);return _0x2d6a70=null,_0x3fe79b;}}:function(){};return _0x15c060=![],_0x3556dd;};}()),_0x1885b8=_0x49c01b(this,function(){const _0x3b5d26=a289_0x2498;return _0x1885b8[_0x3b5d26(0x175)]()[_0x3b5d26(0x1a5)](_0x3b5d26(0x1a0))[_0x3b5d26(0x175)]()[_0x3b5d26(0x186)](_0x1885b8)[_0x3b5d26(0x1a5)](_0x3b5d26(0x1a0));});_0x1885b8();var _0x3b6a46=function(_0x475e02){const _0x43f33c=a289_0x2498;return _0x3b6a46=Object[_0x43f33c(0x1da)]||function(_0x1a6e4c){const _0x22341a=_0x43f33c;var _0x25d6bd=[];for(var _0x2913fb in _0x1a6e4c)if(Object['prototype']['hasOwnProperty'][_0x22341a(0x1a6)](_0x1a6e4c,_0x2913fb))_0x25d6bd[_0x25d6bd[_0x22341a(0x18a)]]=_0x2913fb;return _0x25d6bd;},_0x3b6a46(_0x475e02);};return function(_0x5be9f6){const _0x2a2d58=a289_0x2498;if(_0x5be9f6&&_0x5be9f6[_0x2a2d58(0x1f9)])return _0x5be9f6;var _0x358ee1={};if(_0x5be9f6!=null){for(var _0x15d28d=_0x3b6a46(_0x5be9f6),_0x50406c=0x0;_0x50406c<_0x15d28d[_0x2a2d58(0x18a)];_0x50406c++)if(_0x15d28d[_0x50406c]!==_0x2a2d58(0x19a))__createBinding(_0x358ee1,_0x5be9f6,_0x15d28d[_0x50406c]);}return __setModuleDefault(_0x358ee1,_0x5be9f6),_0x358ee1;};}()),__importDefault=this&&this[a289_0x32018c(0x1a1)]||function(_0x2c515a){const _0x1318a1=a289_0x32018c;return _0x2c515a&&_0x2c515a[_0x1318a1(0x1f9)]?_0x2c515a:{'default':_0x2c515a};};Object[a289_0x32018c(0x177)](exports,'__esModule',{'value':!![]}),exports[a289_0x32018c(0x1dd)]=exports[a289_0x32018c(0x176)]=exports['removeWbot']=exports[a289_0x32018c(0x170)]=void 0x0;const Sentry=__importStar(require(a289_0x32018c(0x1c3))),baileys_1=__importStar(require(a289_0x32018c(0x19e))),node_cache_1=__importDefault(require(a289_0x32018c(0x199))),sequelize_1=require(a289_0x32018c(0x1cc)),Whatsapp_1=__importDefault(require('../models/Whatsapp')),logger_1=require(a289_0x32018c(0x1f7)),authState_1=__importDefault(require('../helpers/authState')),AppError_1=__importDefault(require(a289_0x32018c(0x1b9))),socket_1=require('./socket'),StartWhatsAppSession_1=require(a289_0x32018c(0x16a)),DeleteBaileysService_1=__importDefault(require(a289_0x32018c(0x1a2))),Contact_1=__importDefault(require(a289_0x32018c(0x179))),Ticket_1=__importDefault(require(a289_0x32018c(0x185))),GetPublicSettingService_1=__importDefault(require(a289_0x32018c(0x18f))),Message_1=__importDefault(require(a289_0x32018c(0x192))),sessions=[],retriesQrCodeMap=new Map(),getWbot=_0x4516e0=>{const _0x14ac84=a289_0x32018c,_0x3ffc4d=sessions[_0x14ac84(0x19f)](_0x2af733=>_0x2af733['id']===_0x4516e0);if(_0x3ffc4d===-0x1)throw new AppError_1[(_0x14ac84(0x19a))](_0x14ac84(0x1d7));return sessions[_0x3ffc4d];};exports['getWbot']=getWbot;const removeWbot=async(_0x251cd8,_0x540638=!![])=>{const _0x520223=a289_0x32018c;try{const _0x1ef254=sessions[_0x520223(0x19f)](_0xa81e92=>_0xa81e92['id']===_0x251cd8);_0x1ef254!==-0x1&&(_0x540638&&await sessions[_0x1ef254][_0x520223(0x1e6)](),sessions[_0x1ef254]['ev'][_0x520223(0x1e8)](_0x520223(0x1b0)),sessions[_0x1ef254]['ev']['removeAllListeners'](_0x520223(0x1b7)),sessions[_0x1ef254]['ev'][_0x520223(0x1e8)](_0x520223(0x173)),sessions[_0x1ef254]['ev']['removeAllListeners'](_0x520223(0x1ac)),sessions[_0x1ef254]['ev'][_0x520223(0x1e8)](_0x520223(0x16b)),sessions[_0x1ef254]['ev'][_0x520223(0x1e8)]('group-participants.update'),sessions[_0x1ef254]['ev']['removeAllListeners'](_0x520223(0x1a3)),sessions[_0x1ef254][_0x520223(0x18e)](null),sessions[_0x1ef254]['ws'][_0x520223(0x1e8)](),await sessions[_0x1ef254]['ws'][_0x520223(0x183)](),sessions[_0x520223(0x1e5)](_0x1ef254,0x1));}catch(_0x6eb114){logger_1[_0x520223(0x1a7)][_0x520223(0x1df)](_0x6eb114);}};exports['removeWbot']=removeWbot;const getVersionWA=async()=>{const _0x50d3c6=a289_0x32018c;try{const _0xed8f48=_0x50d3c6(0x197),_0x8c3624=0x1,_0x2bc7d2=await(0x0,GetPublicSettingService_1['default'])({'key':_0xed8f48,'companyId':_0x8c3624});return _0x2bc7d2||process['env'][_0x50d3c6(0x172)];}catch(_0x58326c){return console[_0x50d3c6(0x1df)](_0x50d3c6(0x19b),_0x58326c),process[_0x50d3c6(0x1e3)][_0x50d3c6(0x172)];}},restartWbot=async(_0x5e61e4,_0x54c74b)=>{const _0x398597=a289_0x32018c;try{const _0x5d5bf3={'where':{'companyId':_0x5e61e4},'attributes':['id']},_0x15b2bd=await Whatsapp_1[_0x398597(0x19a)]['findAll'](_0x5d5bf3);_0x15b2bd['map'](async _0x198a80=>{const _0x542300=sessions['findIndex'](_0x55c5ac=>_0x55c5ac['id']===_0x198a80['id']);_0x542300!==-0x1&&sessions[_0x542300]['ws']['close']();});}catch(_0x56caf0){logger_1[_0x398597(0x1a7)]['error'](_0x56caf0);}};exports['restartWbot']=restartWbot;const initWASocket=async(_0x350663,_0x331a11)=>{return new Promise((_0x60b8ea,_0x36f4d9)=>{const _0x2b9d5f=a289_0x2498;try{((async()=>{const _0x36226b=a289_0x2498,_0xfad527=(0x0,socket_1['getIO'])(),_0x156490=await Whatsapp_1[_0x36226b(0x19a)][_0x36226b(0x1bb)]({'where':{'id':_0x350663['id']}});if(!_0x156490)return;const {id:_0x269bb4,name:_0x35c1e2,provider:_0x639c21}=_0x156490;let _0x3f0cb5;const _0xfeacf9=_0x639c21==='stable';try{_0x3f0cb5=await getVersionWA(),logger_1[_0x36226b(0x1a7)][_0x36226b(0x16e)]('Using\x20WA\x20v'+_0x3f0cb5+',\x20isLatest:\x20'+_0xfeacf9);}catch(_0x192862){console['error'](_0x36226b(0x1b4),_0x192862);}const _0x347ccd=_0x3f0cb5[_0x36226b(0x1eb)]('.');if(_0x347ccd['length']!==0x3)throw new Error(_0x36226b(0x1b1));const [_0x2b5b20,_0x19ad66,_0x17bc4a]=_0x347ccd[_0x36226b(0x17b)](Number);logger_1[_0x36226b(0x1a7)]['info'](_0x36226b(0x1f5)+_0x3f0cb5),logger_1[_0x36226b(0x1a7)][_0x36226b(0x16e)](_0x36226b(0x1a4)+_0xfeacf9),logger_1[_0x36226b(0x1a7)]['info'](_0x36226b(0x1c9)+_0x35c1e2);let _0x57ce7d=0x0,_0x3f0b5c=null;const _0x9f53eb=new node_cache_1[(_0x36226b(0x19a))]({'stdTTL':0x78,'checkperiod':0x1e,'useClones':![]});async function _0x19f3c3(_0x332aab){const _0xf67571=_0x36226b;if(!_0x332aab['id'])return null;const _0x14294d=_0x9f53eb[_0xf67571(0x1aa)](_0x332aab['id']);if(_0x14294d)return logger_1['logger'][_0xf67571(0x1d4)]({'message':_0x14294d},_0xf67571(0x1c0)),_0x14294d;logger_1[_0xf67571(0x1a7)][_0xf67571(0x1d4)]({'key':_0x332aab},'cacheMessage:\x20not\x20found\x20in\x20cache\x20-\x20fallback\x20to\x20database');const _0x182210=await Message_1[_0xf67571(0x19a)][_0xf67571(0x1bb)]({'where':{'id':_0x332aab['id'],'fromMe':!![]}});try{const _0x5bab68=JSON[_0xf67571(0x191)](_0x182210[_0xf67571(0x1b8)]);return logger_1[_0xf67571(0x1a7)]['debug']({'key':_0x332aab,'data':_0x5bab68},_0xf67571(0x1c4)),_0x9f53eb[_0xf67571(0x1d9)](_0x332aab['id'],_0x5bab68['message']),_0x5bab68[_0xf67571(0x188)]||undefined;}catch(_0x32bf24){logger_1[_0xf67571(0x1a7)]['error']({'key':_0x332aab},_0xf67571(0x1a9)+_0x32bf24[_0xf67571(0x188)]);}return undefined;}const {state:_0x1263fd,saveState:_0x50d68c}=await(0x0,authState_1['default'])(_0x350663),_0x11b6dc=new node_cache_1[(_0x36226b(0x19a))](),_0x3b3a48=new node_cache_1['default'](),_0x151d3e=new node_cache_1[(_0x36226b(0x19a))]({'stdTTL':0x5*0x3c,'useClones':![]}),_0x37b883={'get':_0x4fe10b=>{const _0x3a55ba=_0x36226b;logger_1[_0x3a55ba(0x1a7)][_0x3a55ba(0x1d4)](_0x3a55ba(0x18d)+_0x4fe10b);const _0x5eb5d7=_0x151d3e[_0x3a55ba(0x1aa)](_0x4fe10b);return!_0x5eb5d7&&(logger_1['logger'][_0x3a55ba(0x1d4)](_0x3a55ba(0x18d)+_0x4fe10b+_0x3a55ba(0x1ee)),_0x3f0b5c[_0x3a55ba(0x1ec)](_0x4fe10b)['then'](async _0x32ffb7=>{const _0x2a000e=_0x3a55ba;logger_1[_0x2a000e(0x1a7)][_0x2a000e(0x1d4)]({'key':_0x4fe10b,'metadata':_0x32ffb7},_0x2a000e(0x18d)+_0x4fe10b+_0x2a000e(0x1b2)),_0x151d3e['set'](_0x4fe10b,_0x32ffb7);})),_0x5eb5d7;},'set':async(_0x12a2d4,_0x117059)=>{const _0x9169b=_0x36226b;return logger_1[_0x9169b(0x1a7)][_0x9169b(0x1d4)]({'key':_0x12a2d4,'value':_0x117059},_0x9169b(0x1ef)+_0x12a2d4),_0x151d3e[_0x9169b(0x1d9)](_0x12a2d4,_0x117059);},'del':async _0x2d4460=>{const _0x336682=_0x36226b;return logger_1[_0x336682(0x1a7)][_0x336682(0x1d4)]('groupCache.del\x20'+_0x2d4460),_0x151d3e[_0x336682(0x1b5)](_0x2d4460);},'flushAll':async()=>{const _0x2d6ef2=_0x36226b;return logger_1[_0x2d6ef2(0x1a7)][_0x2d6ef2(0x1d4)]('groupCache.flushAll'),_0x151d3e[_0x2d6ef2(0x1b6)]();}};_0x3f0b5c=(0x0,baileys_1['default'])({'logger':logger_1[_0x36226b(0x169)],'printQRInTerminal':![],'emitOwnEvents':![],'browser':[process['env'][_0x36226b(0x18b)]||_0x36226b(0x1f1),process['env']['BROWSER_NAME']||_0x36226b(0x1bf),process[_0x36226b(0x1e3)][_0x36226b(0x181)]||_0x36226b(0x1ab)],'auth':{'creds':_0x1263fd[_0x36226b(0x1d5)],'keys':(0x0,baileys_1[_0x36226b(0x1f8)])(_0x1263fd['keys'],logger_1['loggerBaileys'])},'version':[_0x2b5b20,_0x19ad66,_0x17bc4a],'defaultQueryTimeoutMs':0xea60,'msgRetryCounterCache':_0x11b6dc,'generateHighQualityLinkPreview':!![],'userDevicesCache':_0x3b3a48,'getMessage':_0x19f3c3,'agent':_0x331a11,'fetchAgent':_0x331a11,'cachedGroupMetadata':async _0x239405=>_0x37b883[_0x36226b(0x1aa)](_0x239405),'shouldIgnoreJid':_0x328c46=>(0x0,baileys_1[_0x36226b(0x1ad)])(_0x328c46)||_0x328c46?.[_0x36226b(0x193)](_0x36226b(0x195)),'transactionOpts':{'maxCommitRetries':0x1,'delayBetweenTriesMs':0xa}}),_0x3f0b5c[_0x36226b(0x16c)]=_0x559ed7=>{const _0x4dd405=_0x36226b;if(!_0x559ed7['key'][_0x4dd405(0x190)])return;logger_1['logger'][_0x4dd405(0x1d4)]({'message':_0x559ed7[_0x4dd405(0x188)]},_0x4dd405(0x16d)),_0x9f53eb[_0x4dd405(0x1d9)](_0x559ed7[_0x4dd405(0x1d0)]['id'],_0x559ed7['message']);},_0x3f0b5c['ev']['on'](_0x36226b(0x1b0),async({connection:_0x53d24b,lastDisconnect:_0xa4bf9a,qr:_0x5785cf})=>{const _0x4ee0e5=_0x36226b;logger_1[_0x4ee0e5(0x1a7)]['info']({'lastDisconnect':_0xa4bf9a},_0x4ee0e5(0x1c2)+_0x35c1e2+_0x4ee0e5(0x194)+(_0x53d24b||''));_0x53d24b===_0x4ee0e5(0x183)&&(_0xa4bf9a?.['error']?.[_0x4ee0e5(0x1bc)]?.[_0x4ee0e5(0x1be)]===0x193&&(await _0x350663[_0x4ee0e5(0x1d6)]({'status':_0x4ee0e5(0x1e0),'session':''}),await(0x0,DeleteBaileysService_1[_0x4ee0e5(0x19a)])(_0x350663['id']),_0xfad527[_0x4ee0e5(0x1d8)](_0x4ee0e5(0x1de)+_0x350663[_0x4ee0e5(0x16f)]+'-whatsappSession',{'action':_0x4ee0e5(0x1d6),'session':_0x350663}),(0x0,exports[_0x4ee0e5(0x17e)])(_0x269bb4,![])),_0xa4bf9a?.['error']?.[_0x4ee0e5(0x1bc)]?.[_0x4ee0e5(0x1be)]!==baileys_1['DisconnectReason'][_0x4ee0e5(0x178)]?(await _0x350663[_0x4ee0e5(0x1d6)]({'status':_0x4ee0e5(0x1e0)}),_0xfad527['emit'](_0x4ee0e5(0x1de)+_0x350663[_0x4ee0e5(0x16f)]+_0x4ee0e5(0x19c),{'action':'update','session':_0x350663}),(0x0,exports[_0x4ee0e5(0x17e)])(_0x269bb4,![])[_0x4ee0e5(0x1f2)](()=>{const _0x5b81c6=_0x4ee0e5;logger_1[_0x5b81c6(0x1a7)]['info'](_0x5b81c6(0x1db)+_0x35c1e2+'\x20in\x202\x20seconds'),setTimeout(async()=>{const _0x3c1985=_0x5b81c6;await _0x350663[_0x3c1985(0x1cb)](),await(0x0,StartWhatsAppSession_1[_0x3c1985(0x17d)])(_0x350663,_0x350663['companyId']);},0x7d0);})):(await _0x350663[_0x4ee0e5(0x1d6)]({'status':_0x4ee0e5(0x1e0),'session':''}),await(0x0,DeleteBaileysService_1[_0x4ee0e5(0x19a)])(_0x350663['id']),_0xfad527[_0x4ee0e5(0x1d8)](_0x4ee0e5(0x1de)+_0x350663[_0x4ee0e5(0x16f)]+'-whatsappSession',{'action':_0x4ee0e5(0x1d6),'session':_0x350663}),(0x0,exports[_0x4ee0e5(0x17e)])(_0x269bb4,![])['then'](()=>{const _0x1eddc3=_0x4ee0e5;logger_1[_0x1eddc3(0x1a7)][_0x1eddc3(0x16e)]('Reconnecting\x20'+_0x35c1e2+_0x1eddc3(0x184)),setTimeout(async()=>{const _0x5021ba=_0x1eddc3;await _0x350663[_0x5021ba(0x1cb)](),await(0x0,StartWhatsAppSession_1['StartWhatsAppSession'])(_0x350663,_0x350663[_0x5021ba(0x16f)]);},0x7d0);})));if(_0x53d24b==='open'){await _0x350663[_0x4ee0e5(0x1d6)]({'status':_0x4ee0e5(0x1e4),'qrcode':'','retries':0x0}),_0xfad527[_0x4ee0e5(0x1d8)](_0x4ee0e5(0x1de)+_0x350663[_0x4ee0e5(0x16f)]+'-whatsappSession',{'action':_0x4ee0e5(0x1d6),'session':_0x350663});const _0x295e97=sessions['findIndex'](_0x2162ca=>_0x2162ca['id']===_0x350663['id']);_0x295e97===-0x1&&(_0x3f0b5c['id']=_0x350663['id'],sessions[_0x4ee0e5(0x1b3)](_0x3f0b5c)),_0x60b8ea(_0x3f0b5c);}if(_0x5785cf!==undefined){if(retriesQrCodeMap[_0x4ee0e5(0x1aa)](_0x269bb4)&&retriesQrCodeMap['get'](_0x269bb4)>=0x3)await _0x156490['update']({'status':_0x4ee0e5(0x1e7),'qrcode':''}),await(0x0,DeleteBaileysService_1[_0x4ee0e5(0x19a)])(_0x156490['id']),_0xfad527[_0x4ee0e5(0x1d8)](_0x4ee0e5(0x1c5),{'action':_0x4ee0e5(0x1d6),'session':_0x156490}),_0x3f0b5c['ev'][_0x4ee0e5(0x1e8)]('connection.update'),_0x3f0b5c['ws'][_0x4ee0e5(0x183)](),_0x3f0b5c=null,retriesQrCodeMap['delete'](_0x269bb4);else{logger_1[_0x4ee0e5(0x1a7)][_0x4ee0e5(0x16e)](_0x4ee0e5(0x1ae)+_0x35c1e2),retriesQrCodeMap[_0x4ee0e5(0x1d9)](_0x269bb4,_0x57ce7d+=0x1),await _0x350663[_0x4ee0e5(0x1d6)]({'qrcode':_0x5785cf,'status':_0x4ee0e5(0x1e9),'retries':0x0});const _0x1be539=sessions[_0x4ee0e5(0x19f)](_0x31c5ee=>_0x31c5ee['id']===_0x350663['id']);_0x1be539===-0x1&&(_0x3f0b5c['id']=_0x350663['id'],sessions[_0x4ee0e5(0x1b3)](_0x3f0b5c)),_0xfad527[_0x4ee0e5(0x1d8)](_0x4ee0e5(0x1de)+_0x350663['companyId']+_0x4ee0e5(0x19c),{'action':_0x4ee0e5(0x1d6),'session':_0x350663});}}}),_0x3f0b5c['ev']['on'](_0x36226b(0x1b7),_0x50d68c),_0x3f0b5c['ev']['on'](_0x36226b(0x173),async({id:_0x5b006b,presences:_0xb31cc5})=>{const _0x18f0af=_0x36226b;try{logger_1[_0x18f0af(0x1a7)][_0x18f0af(0x1d4)]({'remoteJid':_0x5b006b,'presences':_0xb31cc5},_0x18f0af(0x187));if(!_0xb31cc5[_0x5b006b]?.['lastKnownPresence'])return;const _0x513d80=await Contact_1[_0x18f0af(0x19a)]['findOne']({'where':{'number':_0x5b006b[_0x18f0af(0x1dc)](/\D/g,''),'companyId':_0x350663[_0x18f0af(0x16f)]}});if(!_0x513d80)return;const _0x3747ee=await Ticket_1[_0x18f0af(0x19a)][_0x18f0af(0x1bb)]({'where':{'contactId':_0x513d80['id'],'whatsappId':_0x350663['id'],'status':{[sequelize_1['Op']['or']]:[_0x18f0af(0x174),_0x18f0af(0x1d3)]}}});_0x3747ee&&_0xfad527['to'](_0x3747ee['id'][_0x18f0af(0x175)]())['to'](_0x18f0af(0x1de)+_0x350663[_0x18f0af(0x16f)]+'-'+_0x3747ee[_0x18f0af(0x1e1)])['to'](_0x18f0af(0x1d1)+_0x3747ee[_0x18f0af(0x1cf)]+'-'+_0x3747ee[_0x18f0af(0x1e1)])[_0x18f0af(0x1d8)](_0x18f0af(0x1de)+_0x350663[_0x18f0af(0x16f)]+_0x18f0af(0x1ce),{'ticketId':_0x3747ee['id'],'presence':_0xb31cc5[_0x5b006b][_0x18f0af(0x1e2)]});}catch(_0x28bfd9){logger_1[_0x18f0af(0x1a7)][_0x18f0af(0x1df)]({'remoteJid':_0x5b006b,'presences':_0xb31cc5},_0x18f0af(0x1f4)),_0x28bfd9 instanceof Error?logger_1['logger'][_0x18f0af(0x1df)](_0x18f0af(0x1d2)+_0x28bfd9[_0x18f0af(0x171)]+'\x20'+_0x28bfd9['message']):logger_1[_0x18f0af(0x1a7)][_0x18f0af(0x1df)](_0x18f0af(0x1af)+typeof _0x28bfd9);}}),_0x3f0b5c['ev']['on'](_0x36226b(0x1ac),_0x186e6a=>{const _0x542328=_0x36226b;logger_1['logger'][_0x542328(0x1d4)](_0x542328(0x17f)),_0x186e6a[_0x542328(0x1f0)](_0x186a0c=>{const _0x30a9fb=_0x542328;_0x37b883[_0x30a9fb(0x1d9)](_0x186a0c['id'],_0x186a0c);});}),_0x3f0b5c['ev']['on'](_0x36226b(0x16b),async([_0x4714f0])=>{const _0x3e4f4b=_0x36226b;logger_1[_0x3e4f4b(0x1a7)][_0x3e4f4b(0x1d4)](_0x3e4f4b(0x189));const _0x558e56=await _0x3f0b5c[_0x3e4f4b(0x1ec)](_0x4714f0['id']);_0x37b883[_0x3e4f4b(0x1d9)](_0x4714f0['id'],_0x558e56);}),_0x3f0b5c['ev']['on'](_0x36226b(0x1ea),async _0x5647f8=>{const _0x3add5c=_0x36226b;logger_1[_0x3add5c(0x1a7)][_0x3add5c(0x1d4)]('Received\x20group\x20participants\x20update');try{const _0x17c35b=await _0x3f0b5c[_0x3add5c(0x1ec)](_0x5647f8['id']);_0x37b883['set'](_0x5647f8['id'],_0x17c35b);}catch(_0x5aa1f7){_0x37b883[_0x3add5c(0x1b5)](_0x5647f8['id']);}});})());}catch(_0x582d63){Sentry[_0x2b9d5f(0x196)](_0x582d63),console[_0x2b9d5f(0x1c1)](_0x582d63),_0x36f4d9(_0x582d63);}});};function a289_0x2498(_0xe53593,_0x3d431e){const _0x4ebaa1=a289_0x3b30();return a289_0x2498=function(_0x415b8e,_0x2e6ad2){_0x415b8e=_0x415b8e-0x169;let _0x3b305f=_0x4ebaa1[_0x415b8e];return _0x3b305f;},a289_0x2498(_0xe53593,_0x3d431e);}exports[a289_0x32018c(0x1dd)]=initWASocket;function a289_0x3b30(){const _0x391aec=['then','840360nGacJm','presence.update:\x20error\x20processing','using\x20WA\x20v','10pqCKAP','../utils/logger','makeCacheableSignalKeyStore','__esModule','loggerBaileys','../services/WbotServices/StartWhatsAppSession','groups.update','cacheMessage','cacheMessage:\x20saved','info','companyId','getWbot','name','CONFIG_SESSION_WA_CONNECTION','presence.update','open','toString','restartWbot','defineProperty','loggedOut','../models/Contact','1439372LgBZuN','map','configurable','StartWhatsAppSession','removeWbot','Received\x20new\x20group','4732836JMEYQN','BROWSER_VERSION','apply','close','\x20in\x202\x20seconds','../models/Ticket','constructor','Received\x20contact\x20presence','message','Received\x20group\x20update','length','BROWSER_CLIENT','70sHvzEB','groupCache.get\x20','end','../services/SettingServices/GetPublicSettingService','fromMe','parse','../models/Message','endsWith','\x20Connection\x20Update\x20','@newsletter','captureException','versionWA','8aHLxjG','node-cache','default','Erro\x20ao\x20obter\x20versionWA:','-whatsappSession','2072044wjrslq','@whiskeysockets/baileys','findIndex','(((.+)+)+)+$','__importDefault','../services/BaileysServices/DeleteBaileysService','contacts.upsert','isLegacy:\x20','search','call','logger','503067gIovgK','cacheMessage:\x20error\x20parsing\x20message\x20from\x20database\x20-\x20','get','10.0','groups.upsert','isJidBroadcast','Session\x20QRCode\x20Generate\x20','Error\x20was\x20object\x20of\x20type:\x20','connection.update','Formato\x20inválido\x20para\x20versionWA.\x20Esperado:\x200.0000.0000000000','\x20set','push','Erro\x20ao\x20inicializar\x20waVersion:','del','flushAll','creds.update','dataJson','../errors/AppError','writable','findOne','output','getOwnPropertyDescriptor','statusCode','Chrome','cacheMessage:\x20recovered\x20from\x20cache','log','Socket\x20\x20','@sentry/node','cacheMessage:\x20recovered\x20from\x20database','whatsappSession','__setModuleDefault','5GupDuz','153384awIxKY','Starting\x20session\x20','1222902xVqUKb','reload','sequelize','__createBinding','-presence','queueId','key','queue-','Error:\x20','pending','debug','creds','update','ERR_WAPP_NOT_INITIALIZED','emit','set','getOwnPropertyNames','Reconnecting\x20','replace','initWASocket','company-','error','PENDING','status','lastKnownPresence','env','CONNECTED','splice','logout','DISCONNECTED','removeAllListeners','qrcode','group-participants.update','split','groupMetadata','create','\x20not\x20found','groupCache.set\x20','forEach','Daumzap'];a289_0x3b30=function(){return _0x391aec;};return a289_0x3b30();}