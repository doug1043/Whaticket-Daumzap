'use strict';var a0_0xf80909=a0_0x44a7;function a0_0x44a7(_0x2a57cf,_0x3a5d2e){var _0xcb8d34=a0_0x5227();return a0_0x44a7=function(_0x31834e,_0xdfa3e2){_0x31834e=_0x31834e-0x182;var _0x5227f6=_0xcb8d34[_0x31834e];return _0x5227f6;},a0_0x44a7(_0x2a57cf,_0x3a5d2e);}(function(_0x14f6cb,_0x9b48e4){var _0x444925=a0_0x44a7,_0x223273=_0x14f6cb();while(!![]){try{var _0x4d1f32=parseInt(_0x444925(0x184))/0x1*(-parseInt(_0x444925(0x1b6))/0x2)+-parseInt(_0x444925(0x1bc))/0x3*(parseInt(_0x444925(0x1b9))/0x4)+parseInt(_0x444925(0x1a0))/0x5*(parseInt(_0x444925(0x1a3))/0x6)+-parseInt(_0x444925(0x190))/0x7+parseInt(_0x444925(0x187))/0x8+-parseInt(_0x444925(0x18c))/0x9+parseInt(_0x444925(0x1be))/0xa*(parseInt(_0x444925(0x19b))/0xb);if(_0x4d1f32===_0x9b48e4)break;else _0x223273['push'](_0x223273['shift']());}catch(_0x59aae1){_0x223273['push'](_0x223273['shift']());}}}(a0_0x5227,0xa0896));var __createBinding=this&&this[a0_0xf80909(0x193)]||(Object[a0_0xf80909(0x19a)]?function(_0x4f952a,_0x259000,_0x480c9e,_0x5a3d03){var _0x5e3303=a0_0xf80909;if(_0x5a3d03===undefined)_0x5a3d03=_0x480c9e;var _0x1a4460=Object[_0x5e3303(0x19f)](_0x259000,_0x480c9e);(!_0x1a4460||(_0x5e3303(0x1b7)in _0x1a4460?!_0x259000[_0x5e3303(0x195)]:_0x1a4460[_0x5e3303(0x199)]||_0x1a4460['configurable']))&&(_0x1a4460={'enumerable':!![],'get':function(){return _0x259000[_0x480c9e];}}),Object[_0x5e3303(0x1ac)](_0x4f952a,_0x5a3d03,_0x1a4460);}:function(_0x1b7e0b,_0x1f03a9,_0xac143c,_0x3f4b36){if(_0x3f4b36===undefined)_0x3f4b36=_0xac143c;_0x1b7e0b[_0x3f4b36]=_0x1f03a9[_0xac143c];}),__setModuleDefault=this&&this[a0_0xf80909(0x197)]||(Object[a0_0xf80909(0x19a)]?function(_0x3cba47,_0x2f226b){var _0x166ba5=a0_0xf80909;Object[_0x166ba5(0x1ac)](_0x3cba47,_0x166ba5(0x18d),{'enumerable':!![],'value':_0x2f226b});}:function(_0x5cf4fb,_0x584e13){var _0x699048=a0_0xf80909;_0x5cf4fb[_0x699048(0x18d)]=_0x584e13;}),__importStar=this&&this[a0_0xf80909(0x1b0)]||(function(){var _0x5256ef=(function(){var _0x53ef59=!![];return function(_0x5d475b,_0x44d7e4){var _0x5707d1=_0x53ef59?function(){var _0x17ce11=a0_0x44a7;if(_0x44d7e4){var _0x4fb44d=_0x44d7e4[_0x17ce11(0x18b)](_0x5d475b,arguments);return _0x44d7e4=null,_0x4fb44d;}}:function(){};return _0x53ef59=![],_0x5707d1;};}()),_0x4b96aa=_0x5256ef(this,function(){var _0x80c6a3=a0_0x44a7;return _0x4b96aa[_0x80c6a3(0x1a8)]()[_0x80c6a3(0x18a)](_0x80c6a3(0x1b8))[_0x80c6a3(0x1a8)]()[_0x80c6a3(0x183)](_0x4b96aa)[_0x80c6a3(0x18a)](_0x80c6a3(0x1b8));});_0x4b96aa();var _0x422c8c=function(_0x3fcb1a){var _0x32bb12=a0_0x44a7;return _0x422c8c=Object[_0x32bb12(0x18f)]||function(_0x4c5e7b){var _0x57b776=_0x32bb12,_0x1c2466=[];for(var _0x20602d in _0x4c5e7b)if(Object[_0x57b776(0x1b1)][_0x57b776(0x1a6)][_0x57b776(0x1a2)](_0x4c5e7b,_0x20602d))_0x1c2466[_0x1c2466[_0x57b776(0x1ad)]]=_0x20602d;return _0x1c2466;},_0x422c8c(_0x3fcb1a);};return function(_0x501b9f){var _0x2173ad=a0_0x44a7;if(_0x501b9f&&_0x501b9f[_0x2173ad(0x195)])return _0x501b9f;var _0x3a5e39={};if(_0x501b9f!=null){for(var _0x4d289a=_0x422c8c(_0x501b9f),_0x3e4e43=0x0;_0x3e4e43<_0x4d289a[_0x2173ad(0x1ad)];_0x3e4e43++)if(_0x4d289a[_0x3e4e43]!==_0x2173ad(0x18d))__createBinding(_0x3a5e39,_0x501b9f,_0x4d289a[_0x3e4e43]);}return __setModuleDefault(_0x3a5e39,_0x501b9f),_0x3a5e39;};}()),__importDefault=this&&this[a0_0xf80909(0x1bd)]||function(_0x32cb5f){return _0x32cb5f&&_0x32cb5f['__esModule']?_0x32cb5f:{'default':_0x32cb5f};};Object[a0_0xf80909(0x1ac)](exports,'__esModule',{'value':!![]}),require(a0_0xf80909(0x1b5)),require(a0_0xf80909(0x1bb)),require(a0_0xf80909(0x185));const express_1=__importDefault(require(a0_0xf80909(0x1bf))),cors_1=__importDefault(require(a0_0xf80909(0x1ae))),cookie_parser_1=__importDefault(require(a0_0xf80909(0x192))),Sentry=__importStar(require('@sentry/node'));require(a0_0xf80909(0x186));const upload_1=__importDefault(require(a0_0xf80909(0x196))),AppError_1=__importDefault(require('./errors/AppError')),routes_1=__importDefault(require(a0_0xf80909(0x1b3))),logger_1=require(a0_0xf80909(0x1ba)),queues_1=require('./queues');function a0_0x5227(){var _0x5662d7=['set','toString','static','requestHandler','queues','defineProperty','length','cors','FRONTEND_URL','__importStar','prototype','Handlers','./routes','env','./bootstrap','2353718bDKUwV','get','(((.+)+)+)+$','322540dMEHHp','./utils/logger','reflect-metadata','33ffOLZw','__importDefault','10HmkMIK','express','message','constructor','1YkyuZx','express-async-errors','./database','7347984ZGGMSK','logger','status','search','apply','1392975PdcCEK','default','level','getOwnPropertyNames','5491808ZpqLzG','init','cookie-parser','__createBinding','json','__esModule','./config/upload','__setModuleDefault','SENTRY_DSN','writable','create','17027901TpoHMJ','/public','error','messageQueue','getOwnPropertyDescriptor','2985580PQzbOD','use','call','12qLWkHT','Internal\x20server\x20error','statusCode','hasOwnProperty'];a0_0x5227=function(){return _0x5662d7;};return a0_0x5227();}Sentry[a0_0xf80909(0x191)]({'dsn':process['env'][a0_0xf80909(0x198)]});const app=(0x0,express_1[a0_0xf80909(0x18d)])();app[a0_0xf80909(0x1a7)](a0_0xf80909(0x1ab),{'messageQueue':queues_1[a0_0xf80909(0x19e)],'sendScheduledMessages':queues_1['sendScheduledMessages']}),app[a0_0xf80909(0x1a1)]((0x0,cors_1[a0_0xf80909(0x18d)])({'credentials':!![],'origin':process[a0_0xf80909(0x1b4)][a0_0xf80909(0x1af)]})),app[a0_0xf80909(0x1a1)]((0x0,cookie_parser_1['default'])()),app[a0_0xf80909(0x1a1)](express_1[a0_0xf80909(0x18d)]['json']()),app[a0_0xf80909(0x1a1)](Sentry[a0_0xf80909(0x1b2)][a0_0xf80909(0x1aa)]()),app[a0_0xf80909(0x1a1)](a0_0xf80909(0x19c),express_1[a0_0xf80909(0x18d)][a0_0xf80909(0x1a9)](upload_1['default']['directory'])),app[a0_0xf80909(0x1a1)](routes_1[a0_0xf80909(0x18d)]),app['use'](Sentry[a0_0xf80909(0x1b2)]['errorHandler']()),app[a0_0xf80909(0x1a1)](async(_0x13565c,_0x2a1d66,_0x48f8ff,_0x283c45)=>{var _0x30a20c=a0_0xf80909;if(_0x13565c instanceof AppError_1['default'])return logger_1[_0x30a20c(0x188)][_0x13565c[_0x30a20c(0x18e)]](_0x13565c),_0x48f8ff[_0x30a20c(0x189)](_0x13565c[_0x30a20c(0x1a5)])[_0x30a20c(0x194)]({'error':_0x13565c[_0x30a20c(0x182)]});return logger_1['logger'][_0x30a20c(0x19d)](_0x13565c),_0x48f8ff[_0x30a20c(0x189)](0x1f4)[_0x30a20c(0x194)]({'error':_0x30a20c(0x1a4)});}),exports['default']=app;