'use strict';var a0_0x594e45=a0_0x20c9;function a0_0x20c9(_0x4089ee,_0x122029){var _0x433dc0=a0_0x5f46();return a0_0x20c9=function(_0x32caec,_0x4d7a1d){_0x32caec=_0x32caec-0xa6;var _0x5f467b=_0x433dc0[_0x32caec];return _0x5f467b;},a0_0x20c9(_0x4089ee,_0x122029);}(function(_0xdcb5f0,_0x1c96d0){var _0x799745=a0_0x20c9,_0x41fcd4=_0xdcb5f0();while(!![]){try{var _0x4164a4=parseInt(_0x799745(0xcc))/0x1+-parseInt(_0x799745(0xa6))/0x2*(parseInt(_0x799745(0xc8))/0x3)+parseInt(_0x799745(0xb0))/0x4*(-parseInt(_0x799745(0xa8))/0x5)+parseInt(_0x799745(0xdc))/0x6*(parseInt(_0x799745(0xaa))/0x7)+parseInt(_0x799745(0xac))/0x8+parseInt(_0x799745(0xb3))/0x9*(parseInt(_0x799745(0xc2))/0xa)+parseInt(_0x799745(0xd4))/0xb*(-parseInt(_0x799745(0xbb))/0xc);if(_0x4164a4===_0x1c96d0)break;else _0x41fcd4['push'](_0x41fcd4['shift']());}catch(_0x46aa22){_0x41fcd4['push'](_0x41fcd4['shift']());}}}(a0_0x5f46,0x9abd7));var __createBinding=this&&this['__createBinding']||(Object[a0_0x594e45(0xc4)]?function(_0x1de538,_0x1ebd02,_0x55300a,_0x4f4b75){var _0x45a667=a0_0x594e45;if(_0x4f4b75===undefined)_0x4f4b75=_0x55300a;var _0x2ce52e=Object['getOwnPropertyDescriptor'](_0x1ebd02,_0x55300a);(!_0x2ce52e||(_0x45a667(0xb9)in _0x2ce52e?!_0x1ebd02[_0x45a667(0xb5)]:_0x2ce52e['writable']||_0x2ce52e['configurable']))&&(_0x2ce52e={'enumerable':!![],'get':function(){return _0x1ebd02[_0x55300a];}}),Object['defineProperty'](_0x1de538,_0x4f4b75,_0x2ce52e);}:function(_0x273ade,_0x1efccd,_0x5e8d2f,_0xa536d5){if(_0xa536d5===undefined)_0xa536d5=_0x5e8d2f;_0x273ade[_0xa536d5]=_0x1efccd[_0x5e8d2f];}),__setModuleDefault=this&&this[a0_0x594e45(0xd5)]||(Object['create']?function(_0x19db49,_0x2c6b3a){var _0x140b5c=a0_0x594e45;Object[_0x140b5c(0xcd)](_0x19db49,'default',{'enumerable':!![],'value':_0x2c6b3a});}:function(_0x537dc6,_0xb47537){var _0xdc8547=a0_0x594e45;_0x537dc6[_0xdc8547(0xd8)]=_0xb47537;}),__importStar=this&&this[a0_0x594e45(0xb6)]||(function(){var _0xeb0e43=(function(){var _0x22ec97=!![];return function(_0xcc255c,_0x14f447){var _0x2d84f1=_0x22ec97?function(){if(_0x14f447){var _0xf1c659=_0x14f447['apply'](_0xcc255c,arguments);return _0x14f447=null,_0xf1c659;}}:function(){};return _0x22ec97=![],_0x2d84f1;};}()),_0x9d21aa=_0xeb0e43(this,function(){var _0x35582f=a0_0x20c9;return _0x9d21aa[_0x35582f(0xc9)]()[_0x35582f(0xd7)](_0x35582f(0xc1))['toString']()[_0x35582f(0xad)](_0x9d21aa)[_0x35582f(0xd7)](_0x35582f(0xc1));});_0x9d21aa();var _0x5072ae=function(_0x224863){var _0x18b0ff=a0_0x20c9;return _0x5072ae=Object[_0x18b0ff(0xde)]||function(_0x4bdab1){var _0x17a015=_0x18b0ff,_0x18f6ef=[];for(var _0x33affe in _0x4bdab1)if(Object[_0x17a015(0xca)][_0x17a015(0xd9)][_0x17a015(0xd6)](_0x4bdab1,_0x33affe))_0x18f6ef[_0x18f6ef[_0x17a015(0xab)]]=_0x33affe;return _0x18f6ef;},_0x5072ae(_0x224863);};return function(_0x9387fb){var _0x5da189=a0_0x20c9;if(_0x9387fb&&_0x9387fb[_0x5da189(0xb5)])return _0x9387fb;var _0x4b16a9={};if(_0x9387fb!=null){for(var _0x415bba=_0x5072ae(_0x9387fb),_0x4e66f0=0x0;_0x4e66f0<_0x415bba[_0x5da189(0xab)];_0x4e66f0++)if(_0x415bba[_0x4e66f0]!==_0x5da189(0xd8))__createBinding(_0x4b16a9,_0x9387fb,_0x415bba[_0x4e66f0]);}return __setModuleDefault(_0x4b16a9,_0x9387fb),_0x4b16a9;};}()),__importDefault=this&&this[a0_0x594e45(0xb1)]||function(_0x679df9){var _0xf5276d=a0_0x594e45;return _0x679df9&&_0x679df9[_0xf5276d(0xb5)]?_0x679df9:{'default':_0x679df9};};Object['defineProperty'](exports,a0_0x594e45(0xb5),{'value':!![]}),require(a0_0x594e45(0xc3)),require(a0_0x594e45(0xdd)),require(a0_0x594e45(0xd2));const express_1=__importDefault(require('express')),cors_1=__importDefault(require(a0_0x594e45(0xc5))),cookie_parser_1=__importDefault(require('cookie-parser')),Sentry=__importStar(require('@sentry/node'));require(a0_0x594e45(0xd0));function a0_0x5f46(){var _0x255f07=['queues','9kLLDwl','./routes','__esModule','__importStar','json','directory','get','Handlers','5520264QjnKmD','use','set','FRONTEND_URL','Internal\x20server\x20error','sendScheduledMessages','(((.+)+)+)+$','12626140LGzuVK','./bootstrap','create','cors','./errors/AppError','message','9rfoyyE','toString','prototype','env','36530oQQtvj','defineProperty','statusCode','errorHandler','./database','messageQueue','express-async-errors','./config/upload','11DXyaDa','__setModuleDefault','call','search','default','hasOwnProperty','status','SENTRY_DSN','1590XjjpyE','reflect-metadata','getOwnPropertyNames','error','348286qzVIKU','init','3230XpuvjA','requestHandler','25459FAMLQJ','length','2211608AgVHgZ','constructor','logger','static','5716PgspIk','__importDefault'];a0_0x5f46=function(){return _0x255f07;};return a0_0x5f46();}const upload_1=__importDefault(require(a0_0x594e45(0xd3))),AppError_1=__importDefault(require(a0_0x594e45(0xc6))),routes_1=__importDefault(require(a0_0x594e45(0xb4))),logger_1=require('./utils/logger'),queues_1=require('./queues');Sentry[a0_0x594e45(0xa7)]({'dsn':process[a0_0x594e45(0xcb)][a0_0x594e45(0xdb)]});const app=(0x0,express_1[a0_0x594e45(0xd8)])();app[a0_0x594e45(0xbd)](a0_0x594e45(0xb2),{'messageQueue':queues_1[a0_0x594e45(0xd1)],'sendScheduledMessages':queues_1[a0_0x594e45(0xc0)]}),app[a0_0x594e45(0xbc)]((0x0,cors_1[a0_0x594e45(0xd8)])({'credentials':!![],'origin':process[a0_0x594e45(0xcb)][a0_0x594e45(0xbe)]})),app[a0_0x594e45(0xbc)]((0x0,cookie_parser_1['default'])()),app[a0_0x594e45(0xbc)](express_1[a0_0x594e45(0xd8)][a0_0x594e45(0xb7)]()),app['use'](Sentry[a0_0x594e45(0xba)][a0_0x594e45(0xa9)]()),app[a0_0x594e45(0xbc)]('/public',express_1[a0_0x594e45(0xd8)][a0_0x594e45(0xaf)](upload_1['default'][a0_0x594e45(0xb8)])),app[a0_0x594e45(0xbc)](routes_1[a0_0x594e45(0xd8)]),app[a0_0x594e45(0xbc)](Sentry[a0_0x594e45(0xba)][a0_0x594e45(0xcf)]()),app[a0_0x594e45(0xbc)](async(_0x346232,_0x1be1f5,_0xc21275,_0x2c89aa)=>{var _0x4e1fc7=a0_0x594e45;if(_0x346232 instanceof AppError_1[_0x4e1fc7(0xd8)])return logger_1[_0x4e1fc7(0xae)][_0x346232['level']](_0x346232),_0xc21275['status'](_0x346232[_0x4e1fc7(0xce)])['json']({'error':_0x346232[_0x4e1fc7(0xc7)]});return logger_1[_0x4e1fc7(0xae)][_0x4e1fc7(0xdf)](_0x346232),_0xc21275[_0x4e1fc7(0xda)](0x1f4)['json']({'error':_0x4e1fc7(0xbf)});}),exports['default']=app;