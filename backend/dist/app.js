'use strict';function a0_0x50cc(){var _0x5af0a9=['default','./routes','4054374GOYkLG','level','configurable','FRONTEND_URL','error','defineProperty','queues','./errors/AppError','length','messageQueue','search','187027HLzUoa','constructor','statusCode','logger','toString','cookie-parser','json','./bootstrap','1478736WCxrqg','env','315046VGuqZu','requestHandler','getOwnPropertyDescriptor','9JVlDJW','reflect-metadata','use','message','cors','SENTRY_DSN','apply','call','./utils/logger','getOwnPropertyNames','errorHandler','express','express-async-errors','sendScheduledMessages','__createBinding','./config/upload','2945152JmkcMH','(((.+)+)+)+$','get','__esModule','init','4sLsIJc','status','__setModuleDefault','1341832bTpxYH','2380545ZonMEv','Handlers','./queues','@sentry/node'];a0_0x50cc=function(){return _0x5af0a9;};return a0_0x50cc();}var a0_0x3787e3=a0_0x3279;(function(_0x5a304f,_0x1b2d13){var _0x24d6d6=a0_0x3279,_0x45fe20=_0x5a304f();while(!![]){try{var _0xfbce04=parseInt(_0x24d6d6(0x17a))/0x1+parseInt(_0x24d6d6(0x184))/0x2*(-parseInt(_0x24d6d6(0x187))/0x3)+parseInt(_0x24d6d6(0x19c))/0x4*(parseInt(_0x24d6d6(0x1a0))/0x5)+parseInt(_0x24d6d6(0x182))/0x6+parseInt(_0x24d6d6(0x197))/0x7+-parseInt(_0x24d6d6(0x19f))/0x8+-parseInt(_0x24d6d6(0x1a6))/0x9;if(_0xfbce04===_0x1b2d13)break;else _0x45fe20['push'](_0x45fe20['shift']());}catch(_0x33111e){_0x45fe20['push'](_0x45fe20['shift']());}}}(a0_0x50cc,0x3a7b8));var __createBinding=this&&this[a0_0x3787e3(0x195)]||(Object['create']?function(_0x903544,_0x1d3850,_0x517b99,_0x15bd80){var _0x191c6c=a0_0x3787e3;if(_0x15bd80===undefined)_0x15bd80=_0x517b99;var _0x405bce=Object[_0x191c6c(0x186)](_0x1d3850,_0x517b99);(!_0x405bce||(_0x191c6c(0x199)in _0x405bce?!_0x1d3850[_0x191c6c(0x19a)]:_0x405bce['writable']||_0x405bce[_0x191c6c(0x1a8)]))&&(_0x405bce={'enumerable':!![],'get':function(){return _0x1d3850[_0x517b99];}}),Object[_0x191c6c(0x174)](_0x903544,_0x15bd80,_0x405bce);}:function(_0x1636c2,_0x721542,_0x34012a,_0x50fd1f){if(_0x50fd1f===undefined)_0x50fd1f=_0x34012a;_0x1636c2[_0x50fd1f]=_0x721542[_0x34012a];}),__setModuleDefault=this&&this[a0_0x3787e3(0x19e)]||(Object['create']?function(_0x3e537b,_0x20b313){var _0x3f733a=a0_0x3787e3;Object[_0x3f733a(0x174)](_0x3e537b,_0x3f733a(0x1a4),{'enumerable':!![],'value':_0x20b313});}:function(_0x4f12e2,_0x5c3c09){_0x4f12e2['default']=_0x5c3c09;}),__importStar=this&&this['__importStar']||(function(){var _0x594e96=(function(){var _0x244573=!![];return function(_0x170754,_0x19973d){var _0x345c1a=_0x244573?function(){var _0x18c77c=a0_0x3279;if(_0x19973d){var _0xcb19ad=_0x19973d[_0x18c77c(0x18d)](_0x170754,arguments);return _0x19973d=null,_0xcb19ad;}}:function(){};return _0x244573=![],_0x345c1a;};}()),_0x347ccb=_0x594e96(this,function(){var _0x25ccde=a0_0x3279;return _0x347ccb[_0x25ccde(0x17e)]()[_0x25ccde(0x179)](_0x25ccde(0x198))[_0x25ccde(0x17e)]()[_0x25ccde(0x17b)](_0x347ccb)[_0x25ccde(0x179)](_0x25ccde(0x198));});_0x347ccb();var _0x5b519c=function(_0x18d96c){var _0x1a0771=a0_0x3279;return _0x5b519c=Object[_0x1a0771(0x190)]||function(_0x443aeb){var _0x27b31b=_0x1a0771,_0x478882=[];for(var _0x3a3951 in _0x443aeb)if(Object['prototype']['hasOwnProperty'][_0x27b31b(0x18e)](_0x443aeb,_0x3a3951))_0x478882[_0x478882[_0x27b31b(0x177)]]=_0x3a3951;return _0x478882;},_0x5b519c(_0x18d96c);};return function(_0x367757){var _0x4fd06b=a0_0x3279;if(_0x367757&&_0x367757[_0x4fd06b(0x19a)])return _0x367757;var _0x155da2={};if(_0x367757!=null){for(var _0x5a7917=_0x5b519c(_0x367757),_0x898d9f=0x0;_0x898d9f<_0x5a7917[_0x4fd06b(0x177)];_0x898d9f++)if(_0x5a7917[_0x898d9f]!=='default')__createBinding(_0x155da2,_0x367757,_0x5a7917[_0x898d9f]);}return __setModuleDefault(_0x155da2,_0x367757),_0x155da2;};}()),__importDefault=this&&this['__importDefault']||function(_0x2ee3cc){var _0x426d97=a0_0x3787e3;return _0x2ee3cc&&_0x2ee3cc[_0x426d97(0x19a)]?_0x2ee3cc:{'default':_0x2ee3cc};};function a0_0x3279(_0x403501,_0x3e7e31){var _0x48398d=a0_0x50cc();return a0_0x3279=function(_0x627967,_0x284854){_0x627967=_0x627967-0x173;var _0x50cc21=_0x48398d[_0x627967];return _0x50cc21;},a0_0x3279(_0x403501,_0x3e7e31);}Object[a0_0x3787e3(0x174)](exports,a0_0x3787e3(0x19a),{'value':!![]}),require(a0_0x3787e3(0x181)),require(a0_0x3787e3(0x188)),require(a0_0x3787e3(0x193));const express_1=__importDefault(require(a0_0x3787e3(0x192))),cors_1=__importDefault(require(a0_0x3787e3(0x18b))),cookie_parser_1=__importDefault(require(a0_0x3787e3(0x17f))),Sentry=__importStar(require(a0_0x3787e3(0x1a3)));require('./database');const upload_1=__importDefault(require(a0_0x3787e3(0x196))),AppError_1=__importDefault(require(a0_0x3787e3(0x176))),routes_1=__importDefault(require(a0_0x3787e3(0x1a5))),logger_1=require(a0_0x3787e3(0x18f)),queues_1=require(a0_0x3787e3(0x1a2));Sentry[a0_0x3787e3(0x19b)]({'dsn':process[a0_0x3787e3(0x183)][a0_0x3787e3(0x18c)]});const app=(0x0,express_1['default'])();app['set'](a0_0x3787e3(0x175),{'messageQueue':queues_1[a0_0x3787e3(0x178)],'sendScheduledMessages':queues_1[a0_0x3787e3(0x194)]}),app[a0_0x3787e3(0x189)]((0x0,cors_1[a0_0x3787e3(0x1a4)])({'credentials':!![],'origin':process[a0_0x3787e3(0x183)][a0_0x3787e3(0x1a9)]})),app[a0_0x3787e3(0x189)]((0x0,cookie_parser_1[a0_0x3787e3(0x1a4)])()),app['use'](express_1[a0_0x3787e3(0x1a4)][a0_0x3787e3(0x180)]()),app[a0_0x3787e3(0x189)](Sentry[a0_0x3787e3(0x1a1)][a0_0x3787e3(0x185)]()),app[a0_0x3787e3(0x189)]('/public',express_1[a0_0x3787e3(0x1a4)]['static'](upload_1['default']['directory'])),app[a0_0x3787e3(0x189)](routes_1[a0_0x3787e3(0x1a4)]),app[a0_0x3787e3(0x189)](Sentry[a0_0x3787e3(0x1a1)][a0_0x3787e3(0x191)]()),app[a0_0x3787e3(0x189)](async(_0x38d6da,_0x74cbcd,_0x17a754,_0x1f08b5)=>{var _0xe457f0=a0_0x3787e3;if(_0x38d6da instanceof AppError_1['default'])return logger_1[_0xe457f0(0x17d)][_0x38d6da[_0xe457f0(0x1a7)]](_0x38d6da),_0x17a754[_0xe457f0(0x19d)](_0x38d6da[_0xe457f0(0x17c)])[_0xe457f0(0x180)]({'error':_0x38d6da[_0xe457f0(0x18a)]});return logger_1[_0xe457f0(0x17d)][_0xe457f0(0x173)](_0x38d6da),_0x17a754[_0xe457f0(0x19d)](0x1f4)[_0xe457f0(0x180)]({'error':'Internal\x20server\x20error'});}),exports[a0_0x3787e3(0x1a4)]=app;