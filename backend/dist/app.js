'use strict';function a0_0xad34(_0x13688f,_0x74aa86){var _0x103d5f=a0_0x1fcf();return a0_0xad34=function(_0x288a1a,_0x45e3c6){_0x288a1a=_0x288a1a-0x1b9;var _0x1fcf2a=_0x103d5f[_0x288a1a];return _0x1fcf2a;},a0_0xad34(_0x13688f,_0x74aa86);}function a0_0x1fcf(){var _0x1e13f9=['apply','./bootstrap','13839fbmrGc','search','get','queues','1806gevxsG','862641oKfeWM','use','/public','(((.+)+)+)+$','toString','reflect-metadata','defineProperty','messageQueue','5551080RDpznJ','express-async-errors','512181dwHhZr','155FMVYJP','__importStar','hasOwnProperty','Internal\x20server\x20error','call','cookie-parser','./config/upload','sendScheduledMessages','1715590RrWQGk','./database','level','writable','static','./utils/logger','express','json','error','create','configurable','cors','length','SENTRY_DSN','errorHandler','FRONTEND_URL','Handlers','status','__importDefault','./errors/AppError','prototype','__esModule','message','default','46684XLZprf','env','13754259UWWWEZ','requestHandler','statusCode','./routes'];a0_0x1fcf=function(){return _0x1e13f9;};return a0_0x1fcf();}var a0_0x9348ca=a0_0xad34;(function(_0x2a22df,_0x4ba2d7){var _0x35f20e=a0_0xad34,_0x23aa4d=_0x2a22df();while(!![]){try{var _0x28e3a7=-parseInt(_0x35f20e(0x1cb))/0x1+parseInt(_0x35f20e(0x1d4))/0x2+parseInt(_0x35f20e(0x1c1))/0x3+parseInt(_0x35f20e(0x1ec))/0x4*(-parseInt(_0x35f20e(0x1cc))/0x5)+-parseInt(_0x35f20e(0x1c0))/0x6*(parseInt(_0x35f20e(0x1bc))/0x7)+-parseInt(_0x35f20e(0x1c9))/0x8+parseInt(_0x35f20e(0x1ee))/0x9;if(_0x28e3a7===_0x4ba2d7)break;else _0x23aa4d['push'](_0x23aa4d['shift']());}catch(_0x2b30d7){_0x23aa4d['push'](_0x23aa4d['shift']());}}}(a0_0x1fcf,0x7cab9));var __createBinding=this&&this['__createBinding']||(Object[a0_0x9348ca(0x1dd)]?function(_0x4187a4,_0x566174,_0x5086f8,_0x1258c9){var _0x443942=a0_0x9348ca;if(_0x1258c9===undefined)_0x1258c9=_0x5086f8;var _0xd3f2b=Object['getOwnPropertyDescriptor'](_0x566174,_0x5086f8);(!_0xd3f2b||(_0x443942(0x1be)in _0xd3f2b?!_0x566174['__esModule']:_0xd3f2b[_0x443942(0x1d7)]||_0xd3f2b[_0x443942(0x1de)]))&&(_0xd3f2b={'enumerable':!![],'get':function(){return _0x566174[_0x5086f8];}}),Object[_0x443942(0x1c7)](_0x4187a4,_0x1258c9,_0xd3f2b);}:function(_0xe14155,_0x294054,_0x1cdc8,_0x2ff818){if(_0x2ff818===undefined)_0x2ff818=_0x1cdc8;_0xe14155[_0x2ff818]=_0x294054[_0x1cdc8];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a0_0x9348ca(0x1dd)]?function(_0x5853cd,_0x1d372d){var _0x2e03c8=a0_0x9348ca;Object[_0x2e03c8(0x1c7)](_0x5853cd,_0x2e03c8(0x1eb),{'enumerable':!![],'value':_0x1d372d});}:function(_0x60cb34,_0x26ae2e){var _0x4ec0af=a0_0x9348ca;_0x60cb34[_0x4ec0af(0x1eb)]=_0x26ae2e;}),__importStar=this&&this[a0_0x9348ca(0x1cd)]||(function(){var _0x2522d9=(function(){var _0x2602b9=!![];return function(_0x59b5e1,_0x196391){var _0x11abb4=_0x2602b9?function(){var _0x157830=a0_0xad34;if(_0x196391){var _0x3e2623=_0x196391[_0x157830(0x1ba)](_0x59b5e1,arguments);return _0x196391=null,_0x3e2623;}}:function(){};return _0x2602b9=![],_0x11abb4;};}()),_0x24d32d=_0x2522d9(this,function(){var _0x4826f0=a0_0xad34;return _0x24d32d[_0x4826f0(0x1c5)]()['search'](_0x4826f0(0x1c4))['toString']()['constructor'](_0x24d32d)[_0x4826f0(0x1bd)](_0x4826f0(0x1c4));});_0x24d32d();var _0x3f86b3=function(_0x349849){return _0x3f86b3=Object['getOwnPropertyNames']||function(_0x36c30d){var _0x32643c=a0_0xad34,_0x4934d4=[];for(var _0x5269c5 in _0x36c30d)if(Object[_0x32643c(0x1e8)][_0x32643c(0x1ce)][_0x32643c(0x1d0)](_0x36c30d,_0x5269c5))_0x4934d4[_0x4934d4[_0x32643c(0x1e0)]]=_0x5269c5;return _0x4934d4;},_0x3f86b3(_0x349849);};return function(_0xb9e380){var _0x1eecfe=a0_0xad34;if(_0xb9e380&&_0xb9e380['__esModule'])return _0xb9e380;var _0xebb7a1={};if(_0xb9e380!=null){for(var _0x37a300=_0x3f86b3(_0xb9e380),_0xb12e65=0x0;_0xb12e65<_0x37a300[_0x1eecfe(0x1e0)];_0xb12e65++)if(_0x37a300[_0xb12e65]!=='default')__createBinding(_0xebb7a1,_0xb9e380,_0x37a300[_0xb12e65]);}return __setModuleDefault(_0xebb7a1,_0xb9e380),_0xebb7a1;};}()),__importDefault=this&&this[a0_0x9348ca(0x1e6)]||function(_0x1dc6a8){var _0x2ae84b=a0_0x9348ca;return _0x1dc6a8&&_0x1dc6a8[_0x2ae84b(0x1e9)]?_0x1dc6a8:{'default':_0x1dc6a8};};Object[a0_0x9348ca(0x1c7)](exports,a0_0x9348ca(0x1e9),{'value':!![]}),require(a0_0x9348ca(0x1bb)),require(a0_0x9348ca(0x1c6)),require(a0_0x9348ca(0x1ca));const express_1=__importDefault(require(a0_0x9348ca(0x1da))),cors_1=__importDefault(require(a0_0x9348ca(0x1df))),cookie_parser_1=__importDefault(require(a0_0x9348ca(0x1d1))),Sentry=__importStar(require('@sentry/node'));require(a0_0x9348ca(0x1d5));const upload_1=__importDefault(require(a0_0x9348ca(0x1d2))),AppError_1=__importDefault(require(a0_0x9348ca(0x1e7))),routes_1=__importDefault(require(a0_0x9348ca(0x1b9))),logger_1=require(a0_0x9348ca(0x1d9)),queues_1=require('./queues');Sentry['init']({'dsn':process['env'][a0_0x9348ca(0x1e1)]});const app=(0x0,express_1[a0_0x9348ca(0x1eb)])();app['set'](a0_0x9348ca(0x1bf),{'messageQueue':queues_1[a0_0x9348ca(0x1c8)],'sendScheduledMessages':queues_1[a0_0x9348ca(0x1d3)]}),app[a0_0x9348ca(0x1c2)]((0x0,cors_1[a0_0x9348ca(0x1eb)])({'credentials':!![],'origin':process[a0_0x9348ca(0x1ed)][a0_0x9348ca(0x1e3)]})),app[a0_0x9348ca(0x1c2)]((0x0,cookie_parser_1[a0_0x9348ca(0x1eb)])()),app['use'](express_1['default'][a0_0x9348ca(0x1db)]()),app[a0_0x9348ca(0x1c2)](Sentry[a0_0x9348ca(0x1e4)][a0_0x9348ca(0x1ef)]()),app[a0_0x9348ca(0x1c2)](a0_0x9348ca(0x1c3),express_1[a0_0x9348ca(0x1eb)][a0_0x9348ca(0x1d8)](upload_1['default']['directory'])),app[a0_0x9348ca(0x1c2)](routes_1['default']),app[a0_0x9348ca(0x1c2)](Sentry['Handlers'][a0_0x9348ca(0x1e2)]()),app[a0_0x9348ca(0x1c2)](async(_0x4c6a7f,_0x3ee1aa,_0x1da4f3,_0x28ff7c)=>{var _0x326aa5=a0_0x9348ca;if(_0x4c6a7f instanceof AppError_1[_0x326aa5(0x1eb)])return logger_1['logger'][_0x4c6a7f[_0x326aa5(0x1d6)]](_0x4c6a7f),_0x1da4f3[_0x326aa5(0x1e5)](_0x4c6a7f[_0x326aa5(0x1f0)])[_0x326aa5(0x1db)]({'error':_0x4c6a7f[_0x326aa5(0x1ea)]});return logger_1['logger'][_0x326aa5(0x1dc)](_0x4c6a7f),_0x1da4f3[_0x326aa5(0x1e5)](0x1f4)[_0x326aa5(0x1db)]({'error':_0x326aa5(0x1cf)});}),exports['default']=app;