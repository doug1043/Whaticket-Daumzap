'use strict';var a0_0x52b652=a0_0x48ff;function a0_0x19f9(){var _0x2c47a1=['21164fCbVOh','316GCjjfx','status','errorHandler','5919848HTYkOR','getOwnPropertyDescriptor','error','logger','json','init','toString','hasOwnProperty','length','7sZJvNk','express','apply','configurable','132wOrvCR','level','env','./routes','3266CNeYWg','set','constructor','getOwnPropertyNames','use','2800bcrsgd','/public','Internal\x20server\x20error','4SvXxTg','@sentry/node','FRONTEND_URL','message','express-async-errors','reflect-metadata','static','cookie-parser','./errors/AppError','17750ZLOjeO','SENTRY_DSN','writable','defineProperty','create','./bootstrap','default','call','directory','2858091AWrZbs','messageQueue','search','Handlers','__esModule','./config/upload','(((.+)+)+)+$','372978vghROu','__importDefault','__setModuleDefault','./utils/logger','1233EfhEuq','./queues'];a0_0x19f9=function(){return _0x2c47a1;};return a0_0x19f9();}(function(_0x3a816b,_0x45bb2d){var _0x33e2e6=a0_0x48ff,_0x55e1ff=_0x3a816b();while(!![]){try{var _0x1830fa=-parseInt(_0x33e2e6(0x19a))/0x1*(-parseInt(_0x33e2e6(0x1ae))/0x2)+-parseInt(_0x33e2e6(0x18c))/0x3*(-parseInt(_0x33e2e6(0x1b6))/0x4)+parseInt(_0x33e2e6(0x1b3))/0x5+parseInt(_0x33e2e6(0x193))/0x6+-parseInt(_0x33e2e6(0x1a6))/0x7*(parseInt(_0x33e2e6(0x19d))/0x8)+-parseInt(_0x33e2e6(0x197))/0x9*(parseInt(_0x33e2e6(0x1bf))/0xa)+parseInt(_0x33e2e6(0x199))/0xb*(-parseInt(_0x33e2e6(0x1aa))/0xc);if(_0x1830fa===_0x45bb2d)break;else _0x55e1ff['push'](_0x55e1ff['shift']());}catch(_0x694501){_0x55e1ff['push'](_0x55e1ff['shift']());}}}(a0_0x19f9,0x80b18));function a0_0x48ff(_0x178b58,_0xb3a7da){var _0x595dd8=a0_0x19f9();return a0_0x48ff=function(_0x1b5bb3,_0x44ef28){_0x1b5bb3=_0x1b5bb3-0x189;var _0x19f9e9=_0x595dd8[_0x1b5bb3];return _0x19f9e9;},a0_0x48ff(_0x178b58,_0xb3a7da);}var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x3e11c9,_0x139c91,_0x53e50c,_0x3dc59d){var _0x3490e3=a0_0x48ff;if(_0x3dc59d===undefined)_0x3dc59d=_0x53e50c;var _0x4a0aa3=Object[_0x3490e3(0x19e)](_0x139c91,_0x53e50c);(!_0x4a0aa3||('get'in _0x4a0aa3?!_0x139c91['__esModule']:_0x4a0aa3[_0x3490e3(0x1c1)]||_0x4a0aa3[_0x3490e3(0x1a9)]))&&(_0x4a0aa3={'enumerable':!![],'get':function(){return _0x139c91[_0x53e50c];}}),Object[_0x3490e3(0x1c2)](_0x3e11c9,_0x3dc59d,_0x4a0aa3);}:function(_0x5c0b0,_0x2e0ae8,_0x1a40a4,_0x3182ec){if(_0x3182ec===undefined)_0x3182ec=_0x1a40a4;_0x5c0b0[_0x3182ec]=_0x2e0ae8[_0x1a40a4];}),__setModuleDefault=this&&this[a0_0x52b652(0x195)]||(Object[a0_0x52b652(0x1c3)]?function(_0x9d3a99,_0x11a72e){var _0x355d2b=a0_0x52b652;Object[_0x355d2b(0x1c2)](_0x9d3a99,_0x355d2b(0x189),{'enumerable':!![],'value':_0x11a72e});}:function(_0x35d433,_0x6e6179){_0x35d433['default']=_0x6e6179;}),__importStar=this&&this['__importStar']||(function(){var _0x5c33d7=(function(){var _0x456d76=!![];return function(_0x41780a,_0x293b2b){var _0x222fc8=_0x456d76?function(){var _0x184592=a0_0x48ff;if(_0x293b2b){var _0xf8a28c=_0x293b2b[_0x184592(0x1a8)](_0x41780a,arguments);return _0x293b2b=null,_0xf8a28c;}}:function(){};return _0x456d76=![],_0x222fc8;};}()),_0x351804=_0x5c33d7(this,function(){var _0xa4acd8=a0_0x48ff;return _0x351804[_0xa4acd8(0x1a3)]()[_0xa4acd8(0x18e)](_0xa4acd8(0x192))[_0xa4acd8(0x1a3)]()[_0xa4acd8(0x1b0)](_0x351804)[_0xa4acd8(0x18e)](_0xa4acd8(0x192));});_0x351804();var _0x2d69cc=function(_0x320631){var _0x4b5d13=a0_0x48ff;return _0x2d69cc=Object[_0x4b5d13(0x1b1)]||function(_0x3ebac9){var _0x531888=_0x4b5d13,_0x5b1200=[];for(var _0x11121e in _0x3ebac9)if(Object['prototype'][_0x531888(0x1a4)][_0x531888(0x18a)](_0x3ebac9,_0x11121e))_0x5b1200[_0x5b1200['length']]=_0x11121e;return _0x5b1200;},_0x2d69cc(_0x320631);};return function(_0x24d62f){var _0x4b97d5=a0_0x48ff;if(_0x24d62f&&_0x24d62f[_0x4b97d5(0x190)])return _0x24d62f;var _0x448d41={};if(_0x24d62f!=null){for(var _0x1a6799=_0x2d69cc(_0x24d62f),_0x4d06d7=0x0;_0x4d06d7<_0x1a6799[_0x4b97d5(0x1a5)];_0x4d06d7++)if(_0x1a6799[_0x4d06d7]!==_0x4b97d5(0x189))__createBinding(_0x448d41,_0x24d62f,_0x1a6799[_0x4d06d7]);}return __setModuleDefault(_0x448d41,_0x24d62f),_0x448d41;};}()),__importDefault=this&&this[a0_0x52b652(0x194)]||function(_0x3cab0f){return _0x3cab0f&&_0x3cab0f['__esModule']?_0x3cab0f:{'default':_0x3cab0f};};Object[a0_0x52b652(0x1c2)](exports,a0_0x52b652(0x190),{'value':!![]}),require(a0_0x52b652(0x1c4)),require(a0_0x52b652(0x1bb)),require(a0_0x52b652(0x1ba));const express_1=__importDefault(require(a0_0x52b652(0x1a7))),cors_1=__importDefault(require('cors')),cookie_parser_1=__importDefault(require(a0_0x52b652(0x1bd))),Sentry=__importStar(require(a0_0x52b652(0x1b7)));require('./database');const upload_1=__importDefault(require(a0_0x52b652(0x191))),AppError_1=__importDefault(require(a0_0x52b652(0x1be))),routes_1=__importDefault(require(a0_0x52b652(0x1ad))),logger_1=require(a0_0x52b652(0x196)),queues_1=require(a0_0x52b652(0x198));Sentry[a0_0x52b652(0x1a2)]({'dsn':process[a0_0x52b652(0x1ac)][a0_0x52b652(0x1c0)]});const app=(0x0,express_1[a0_0x52b652(0x189)])();app[a0_0x52b652(0x1af)]('queues',{'messageQueue':queues_1[a0_0x52b652(0x18d)],'sendScheduledMessages':queues_1['sendScheduledMessages']}),app['use']((0x0,cors_1[a0_0x52b652(0x189)])({'credentials':!![],'origin':process[a0_0x52b652(0x1ac)][a0_0x52b652(0x1b8)]})),app[a0_0x52b652(0x1b2)]((0x0,cookie_parser_1['default'])()),app['use'](express_1[a0_0x52b652(0x189)]['json']()),app['use'](Sentry[a0_0x52b652(0x18f)]['requestHandler']()),app[a0_0x52b652(0x1b2)](a0_0x52b652(0x1b4),express_1[a0_0x52b652(0x189)][a0_0x52b652(0x1bc)](upload_1[a0_0x52b652(0x189)][a0_0x52b652(0x18b)])),app[a0_0x52b652(0x1b2)](routes_1['default']),app[a0_0x52b652(0x1b2)](Sentry[a0_0x52b652(0x18f)][a0_0x52b652(0x19c)]()),app[a0_0x52b652(0x1b2)](async(_0x2849ae,_0x14a728,_0x332fc4,_0x11df83)=>{var _0x53fb72=a0_0x52b652;if(_0x2849ae instanceof AppError_1[_0x53fb72(0x189)])return logger_1[_0x53fb72(0x1a0)][_0x2849ae[_0x53fb72(0x1ab)]](_0x2849ae),_0x332fc4[_0x53fb72(0x19b)](_0x2849ae['statusCode'])[_0x53fb72(0x1a1)]({'error':_0x2849ae[_0x53fb72(0x1b9)]});return logger_1[_0x53fb72(0x1a0)][_0x53fb72(0x19f)](_0x2849ae),_0x332fc4[_0x53fb72(0x19b)](0x1f4)[_0x53fb72(0x1a1)]({'error':_0x53fb72(0x1b5)});}),exports[a0_0x52b652(0x189)]=app;