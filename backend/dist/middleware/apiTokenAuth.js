const a290_0x40afbc=a290_0x3821;(function(_0x139a47,_0x1cb830){const _0x54f2fa=a290_0x3821,_0xef2c35=_0x139a47();while(!![]){try{const _0x5d3dd2=parseInt(_0x54f2fa(0x9e))/0x1+parseInt(_0x54f2fa(0xb3))/0x2*(parseInt(_0x54f2fa(0xac))/0x3)+-parseInt(_0x54f2fa(0xad))/0x4*(parseInt(_0x54f2fa(0xa1))/0x5)+parseInt(_0x54f2fa(0xa2))/0x6+-parseInt(_0x54f2fa(0x9d))/0x7*(parseInt(_0x54f2fa(0x9c))/0x8)+parseInt(_0x54f2fa(0xb6))/0x9*(-parseInt(_0x54f2fa(0xa5))/0xa)+parseInt(_0x54f2fa(0xa0))/0xb*(-parseInt(_0x54f2fa(0xa7))/0xc);if(_0x5d3dd2===_0x1cb830)break;else _0xef2c35['push'](_0xef2c35['shift']());}catch(_0x144d41){_0xef2c35['push'](_0xef2c35['shift']());}}}(a290_0x5567,0xe1470));const a290_0x3cf12c=(function(){let _0x55bcfa=!![];return function(_0x56f322,_0x460614){const _0x45b596=_0x55bcfa?function(){const _0x5cdc2f=a290_0x3821;if(_0x460614){const _0xe4124c=_0x460614[_0x5cdc2f(0xb1)](_0x56f322,arguments);return _0x460614=null,_0xe4124c;}}:function(){};return _0x55bcfa=![],_0x45b596;};}()),a290_0x575e57=a290_0x3cf12c(this,function(){const _0x2c5732=a290_0x3821;return a290_0x575e57[_0x2c5732(0xb2)]()['search'](_0x2c5732(0xb0))[_0x2c5732(0xb2)]()[_0x2c5732(0xa4)](a290_0x575e57)[_0x2c5732(0xa9)](_0x2c5732(0xb0));});a290_0x575e57();function a290_0x3821(_0x477498,_0x425686){const _0x5425a0=a290_0x5567();return a290_0x3821=function(_0x575e57,_0x3cf12c){_0x575e57=_0x575e57-0x9a;let _0x556742=_0x5425a0[_0x575e57];return _0x556742;},a290_0x3821(_0x477498,_0x425686);}'use strict';var __importDefault=this&&this[a290_0x40afbc(0xaf)]||function(_0xae8850){return _0xae8850&&_0xae8850['__esModule']?_0xae8850:{'default':_0xae8850};};Object[a290_0x40afbc(0xb7)](exports,a290_0x40afbc(0x9a),{'value':!![]});function a290_0x5567(){const _0x3e95b4=['companyId','search','../errors/AppError','authorization','318zXQWCO','4TYntYw','replace','__importDefault','(((.+)+)+)+$','apply','toString','33214EVVAyV','profile','../models/Setting','163818sIuKRV','defineProperty','Bearer\x20','__esModule','Token\x20invÃ¡lido','1552uSzAjt','13097cqgumm','676514wNhqTW','default','33mKHFpv','4549385XqAAuQ','10107096OPEPbQ','user','constructor','730MWKtja','findOne','2388156imDvOc'];a290_0x5567=function(){return _0x3e95b4;};return a290_0x5567();}const AppError_1=__importDefault(require(a290_0x40afbc(0xaa))),User_1=__importDefault(require('../models/User')),Setting_1=__importDefault(require(a290_0x40afbc(0xb5))),apiTokenAuth=async(_0x37bb35,_0x566617,_0x549ee4)=>{const _0x52366b=a290_0x40afbc;try{const _0x255744=_0x37bb35['headers'][_0x52366b(0xab)][_0x52366b(0xae)](_0x52366b(0xb8),'');if(!_0x255744)return _0x549ee4();const _0x4fe6ba=await Setting_1['default'][_0x52366b(0xa6)]({'where':{'key':'apiToken','value':_0x255744}});if(!_0x4fe6ba)return _0x549ee4();const _0x1dde20=await User_1[_0x52366b(0x9f)][_0x52366b(0xa6)]({'where':{'profile':'admin','companyId':_0x4fe6ba[_0x52366b(0xa8)]}});return _0x1dde20&&(_0x37bb35[_0x52366b(0xa3)]={'id':''+_0x1dde20['id'],'profile':_0x1dde20[_0x52366b(0xb4)],'isSuper':![],'companyId':_0x4fe6ba[_0x52366b(0xa8)]}),_0x549ee4();}catch(_0xfbd08a){console['log'](_0xfbd08a);}throw new AppError_1[(_0x52366b(0x9f))](_0x52366b(0x9b),0x193);};exports[a290_0x40afbc(0x9f)]=apiTokenAuth;