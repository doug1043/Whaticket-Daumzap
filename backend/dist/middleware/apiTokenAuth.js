const a299_0x1574fc=a299_0x57b6;(function(_0x407cff,_0x31f6c7){const _0x44600a=a299_0x57b6,_0x3d4715=_0x407cff();while(!![]){try{const _0x38b8e8=parseInt(_0x44600a(0x15a))/0x1*(parseInt(_0x44600a(0x165))/0x2)+parseInt(_0x44600a(0x14d))/0x3+-parseInt(_0x44600a(0x157))/0x4*(parseInt(_0x44600a(0x15e))/0x5)+-parseInt(_0x44600a(0x15c))/0x6*(-parseInt(_0x44600a(0x158))/0x7)+-parseInt(_0x44600a(0x154))/0x8*(parseInt(_0x44600a(0x152))/0x9)+parseInt(_0x44600a(0x14e))/0xa+-parseInt(_0x44600a(0x159))/0xb;if(_0x38b8e8===_0x31f6c7)break;else _0x3d4715['push'](_0x3d4715['shift']());}catch(_0x543ce0){_0x3d4715['push'](_0x3d4715['shift']());}}}(a299_0x16f9,0x791aa));function a299_0x57b6(_0x845b19,_0x16a9ef){const _0x54f475=a299_0x16f9();return a299_0x57b6=function(_0x2d0164,_0x2d2938){_0x2d0164=_0x2d0164-0x14c;let _0x16f926=_0x54f475[_0x2d0164];return _0x16f926;},a299_0x57b6(_0x845b19,_0x16a9ef);}const a299_0x2d2938=(function(){let _0xb75d7b=!![];return function(_0x3434c5,_0x2235cf){const _0x45c064=_0xb75d7b?function(){const _0x2c9452=a299_0x57b6;if(_0x2235cf){const _0x3177f2=_0x2235cf[_0x2c9452(0x15b)](_0x3434c5,arguments);return _0x2235cf=null,_0x3177f2;}}:function(){};return _0xb75d7b=![],_0x45c064;};}()),a299_0x2d0164=a299_0x2d2938(this,function(){const _0x28ccc4=a299_0x57b6;return a299_0x2d0164[_0x28ccc4(0x164)]()[_0x28ccc4(0x166)]('(((.+)+)+)+$')['toString']()[_0x28ccc4(0x14f)](a299_0x2d0164)['search'](_0x28ccc4(0x163));});a299_0x2d0164();function a299_0x16f9(){const _0x5a5ddb=['../errors/AppError','(((.+)+)+)+$','toString','2UaxOrP','search','companyId','362715hJQPtc','5289140qWVyvK','constructor','replace','__esModule','27EnyGWn','findOne','2262256HfIIUi','log','user','128trJyox','1052541wfsPxr','7378712WHMFrS','814927ErDjnz','apply','36AIYDqx','../models/User','54960YJVbTw','__importDefault','apiToken','default'];a299_0x16f9=function(){return _0x5a5ddb;};return a299_0x16f9();}'use strict';var __importDefault=this&&this[a299_0x1574fc(0x15f)]||function(_0x3a3e5d){const _0x44a5b3=a299_0x1574fc;return _0x3a3e5d&&_0x3a3e5d[_0x44a5b3(0x151)]?_0x3a3e5d:{'default':_0x3a3e5d};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require(a299_0x1574fc(0x162))),User_1=__importDefault(require(a299_0x1574fc(0x15d))),Setting_1=__importDefault(require('../models/Setting')),apiTokenAuth=async(_0x1a70ad,_0x9ef066,_0x2ced3e)=>{const _0x8b81ad=a299_0x1574fc;try{const _0x1fe35d=_0x1a70ad['headers']['authorization'][_0x8b81ad(0x150)]('Bearer\x20','');if(!_0x1fe35d)return _0x2ced3e();const _0x117236=await Setting_1[_0x8b81ad(0x161)][_0x8b81ad(0x153)]({'where':{'key':_0x8b81ad(0x160),'value':_0x1fe35d}});if(!_0x117236)return _0x2ced3e();const _0x6c8c72=await User_1[_0x8b81ad(0x161)][_0x8b81ad(0x153)]({'where':{'profile':'admin','companyId':_0x117236['companyId']}});return _0x6c8c72&&(_0x1a70ad[_0x8b81ad(0x156)]={'id':''+_0x6c8c72['id'],'profile':_0x6c8c72['profile'],'isSuper':![],'companyId':_0x117236[_0x8b81ad(0x14c)]}),_0x2ced3e();}catch(_0x12c344){console[_0x8b81ad(0x155)](_0x12c344);}throw new AppError_1['default']('Token\x20inv√°lido',0x193);};exports[a299_0x1574fc(0x161)]=apiTokenAuth;