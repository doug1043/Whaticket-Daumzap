const a363_0x3fadb0=a363_0x28af;function a363_0x483a(){const _0x1ce845=['13586544jORIUa','693UWFTsD','6788696ERTeSS','../models/User','(((.+)+)+)+$','__esModule','Bearer\x20','../models/Setting','3992730OwpXHS','19746jcyXzJ','__importDefault','1940982uaLnSP','replace','apply','findOne','toString','headers','defineProperty','Token\x20invÃ¡lido','companyId','admin','default','963574vgVsXF','460097xqDsDO','search','4sgmXzj'];a363_0x483a=function(){return _0x1ce845;};return a363_0x483a();}(function(_0x46e686,_0x552369){const _0x36b023=a363_0x28af,_0x4bbb7a=_0x46e686();while(!![]){try{const _0x3b837e=-parseInt(_0x36b023(0x199))/0x1+parseInt(_0x36b023(0x198))/0x2+parseInt(_0x36b023(0x18d))/0x3*(parseInt(_0x36b023(0x181))/0x4)+parseInt(_0x36b023(0x18a))/0x5+-parseInt(_0x36b023(0x18b))/0x6*(parseInt(_0x36b023(0x183))/0x7)+parseInt(_0x36b023(0x184))/0x8+-parseInt(_0x36b023(0x182))/0x9;if(_0x3b837e===_0x552369)break;else _0x4bbb7a['push'](_0x4bbb7a['shift']());}catch(_0x4c0c28){_0x4bbb7a['push'](_0x4bbb7a['shift']());}}}(a363_0x483a,0x75488));const a363_0x2ca86d=(function(){let _0x3c3596=!![];return function(_0x5f5354,_0x3c7d0e){const _0x18dd9c=_0x3c3596?function(){const _0x277e4d=a363_0x28af;if(_0x3c7d0e){const _0xb19537=_0x3c7d0e[_0x277e4d(0x18f)](_0x5f5354,arguments);return _0x3c7d0e=null,_0xb19537;}}:function(){};return _0x3c3596=![],_0x18dd9c;};}()),a363_0x37fc1d=a363_0x2ca86d(this,function(){const _0x76ae8a=a363_0x28af;return a363_0x37fc1d[_0x76ae8a(0x191)]()[_0x76ae8a(0x19a)](_0x76ae8a(0x186))[_0x76ae8a(0x191)]()['constructor'](a363_0x37fc1d)[_0x76ae8a(0x19a)](_0x76ae8a(0x186));});function a363_0x28af(_0x125dc8,_0x3a3cd2){const _0x17b45c=a363_0x483a();return a363_0x28af=function(_0x37fc1d,_0x2ca86d){_0x37fc1d=_0x37fc1d-0x181;let _0x483a5d=_0x17b45c[_0x37fc1d];return _0x483a5d;},a363_0x28af(_0x125dc8,_0x3a3cd2);}a363_0x37fc1d();'use strict';var __importDefault=this&&this[a363_0x3fadb0(0x18c)]||function(_0x41ed39){return _0x41ed39&&_0x41ed39['__esModule']?_0x41ed39:{'default':_0x41ed39};};Object[a363_0x3fadb0(0x193)](exports,a363_0x3fadb0(0x187),{'value':!![]});const AppError_1=__importDefault(require('../errors/AppError')),User_1=__importDefault(require(a363_0x3fadb0(0x185))),Setting_1=__importDefault(require(a363_0x3fadb0(0x189))),apiTokenAuth=async(_0x14cf4d,_0x416f52,_0x19668d)=>{const _0x261429=a363_0x3fadb0;try{const _0x21beb9=_0x14cf4d[_0x261429(0x192)]['authorization'][_0x261429(0x18e)](_0x261429(0x188),'');if(!_0x21beb9)return _0x19668d();const _0x10b6d0=await Setting_1[_0x261429(0x197)][_0x261429(0x190)]({'where':{'key':'apiToken','value':_0x21beb9}});if(!_0x10b6d0)return _0x19668d();const _0x16a72c=await User_1['default'][_0x261429(0x190)]({'where':{'profile':_0x261429(0x196),'companyId':_0x10b6d0['companyId']}});return _0x16a72c&&(_0x14cf4d['user']={'id':''+_0x16a72c['id'],'profile':_0x16a72c['profile'],'isSuper':![],'companyId':_0x10b6d0[_0x261429(0x195)]}),_0x19668d();}catch(_0x318ebd){console['log'](_0x318ebd);}throw new AppError_1[(_0x261429(0x197))](_0x261429(0x194),0x193);};exports[a363_0x3fadb0(0x197)]=apiTokenAuth;