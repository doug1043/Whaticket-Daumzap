const a257_0x39b224=a257_0x2171;(function(_0x4805ac,_0x1fe7c8){const _0x33dc06=a257_0x2171,_0x40ba08=_0x4805ac();while(!![]){try{const _0x28bf32=parseInt(_0x33dc06(0x1a0))/0x1+-parseInt(_0x33dc06(0x1a4))/0x2+parseInt(_0x33dc06(0x1ab))/0x3+-parseInt(_0x33dc06(0x1a7))/0x4+parseInt(_0x33dc06(0x19d))/0x5+parseInt(_0x33dc06(0x1ad))/0x6*(-parseInt(_0x33dc06(0x197))/0x7)+-parseInt(_0x33dc06(0x1a8))/0x8;if(_0x28bf32===_0x1fe7c8)break;else _0x40ba08['push'](_0x40ba08['shift']());}catch(_0x51d681){_0x40ba08['push'](_0x40ba08['shift']());}}}(a257_0x1c70,0x64526));const a257_0x54920f=(function(){let _0x1dda0e=!![];return function(_0x5b8e1f,_0x11a4ce){const _0x324779=_0x1dda0e?function(){if(_0x11a4ce){const _0x5bb4d6=_0x11a4ce['apply'](_0x5b8e1f,arguments);return _0x11a4ce=null,_0x5bb4d6;}}:function(){};return _0x1dda0e=![],_0x324779;};}()),a257_0xa1a1b9=a257_0x54920f(this,function(){const _0x4fbf5e=a257_0x2171;return a257_0xa1a1b9[_0x4fbf5e(0x1ac)]()[_0x4fbf5e(0x19c)](_0x4fbf5e(0x19f))[_0x4fbf5e(0x1ac)]()['constructor'](a257_0xa1a1b9)[_0x4fbf5e(0x19c)](_0x4fbf5e(0x19f));});a257_0xa1a1b9();function a257_0x1c70(){const _0x317d61=['replace','Token\x20invÃ¡lido','1593492XXdelf','toString','3597276vpvsev','admin','../models/Setting','7EfDivQ','findOne','apiToken','authorization','Bearer\x20','search','4002620NrDZhZ','default','(((.+)+)+)+$','611901AwWAgn','../errors/AppError','user','__esModule','859216svVdsJ','companyId','../models/User','344640THPHta','3338856dqJLVh'];a257_0x1c70=function(){return _0x317d61;};return a257_0x1c70();}'use strict';function a257_0x2171(_0x170332,_0x352366){const _0x28bae1=a257_0x1c70();return a257_0x2171=function(_0xa1a1b9,_0x54920f){_0xa1a1b9=_0xa1a1b9-0x196;let _0x1c70cf=_0x28bae1[_0xa1a1b9];return _0x1c70cf;},a257_0x2171(_0x170332,_0x352366);}var __importDefault=this&&this['__importDefault']||function(_0x1fd1cb){const _0x4c40d2=a257_0x2171;return _0x1fd1cb&&_0x1fd1cb[_0x4c40d2(0x1a3)]?_0x1fd1cb:{'default':_0x1fd1cb};};Object['defineProperty'](exports,a257_0x39b224(0x1a3),{'value':!![]});const AppError_1=__importDefault(require(a257_0x39b224(0x1a1))),User_1=__importDefault(require(a257_0x39b224(0x1a6))),Setting_1=__importDefault(require(a257_0x39b224(0x196))),apiTokenAuth=async(_0x360d6f,_0x51d494,_0x26a7b7)=>{const _0x17302d=a257_0x39b224;try{const _0x57d773=_0x360d6f['headers'][_0x17302d(0x19a)][_0x17302d(0x1a9)](_0x17302d(0x19b),'');if(!_0x57d773)return _0x26a7b7();const _0x474b78=await Setting_1[_0x17302d(0x19e)][_0x17302d(0x198)]({'where':{'key':_0x17302d(0x199),'value':_0x57d773}});if(!_0x474b78)return _0x26a7b7();const _0x4d97ad=await User_1[_0x17302d(0x19e)][_0x17302d(0x198)]({'where':{'profile':_0x17302d(0x1ae),'companyId':_0x474b78[_0x17302d(0x1a5)]}});return _0x4d97ad&&(_0x360d6f[_0x17302d(0x1a2)]={'id':''+_0x4d97ad['id'],'profile':_0x4d97ad['profile'],'isSuper':![],'companyId':_0x474b78['companyId']}),_0x26a7b7();}catch(_0x3e56f2){console['log'](_0x3e56f2);}throw new AppError_1['default'](_0x17302d(0x1aa),0x193);};exports['default']=apiTokenAuth;