'use strict';function a349_0x1055(_0x7bcb8a,_0x16b47c){const _0x386499=a349_0x1e59();return a349_0x1055=function(_0x31bc5e,_0x29b85e){_0x31bc5e=_0x31bc5e-0x1b9;let _0x1e59c2=_0x386499[_0x31bc5e];return _0x1e59c2;},a349_0x1055(_0x7bcb8a,_0x16b47c);}const a349_0x47a24b=a349_0x1055;(function(_0x47ede5,_0x230120){const _0x34fcaf=a349_0x1055,_0x1d626b=_0x47ede5();while(!![]){try{const _0xe849bd=parseInt(_0x34fcaf(0x282))/0x1*(parseInt(_0x34fcaf(0x27e))/0x2)+-parseInt(_0x34fcaf(0x1c7))/0x3*(-parseInt(_0x34fcaf(0x243))/0x4)+parseInt(_0x34fcaf(0x1e6))/0x5+-parseInt(_0x34fcaf(0x1ef))/0x6+parseInt(_0x34fcaf(0x1c4))/0x7*(-parseInt(_0x34fcaf(0x1ed))/0x8)+parseInt(_0x34fcaf(0x2a0))/0x9+-parseInt(_0x34fcaf(0x277))/0xa;if(_0xe849bd===_0x230120)break;else _0x1d626b['push'](_0x1d626b['shift']());}catch(_0x38b8eb){_0x1d626b['push'](_0x1d626b['shift']());}}}(a349_0x1e59,0xedd59));var __createBinding=this&&this[a349_0x47a24b(0x267)]||(Object['create']?function(_0x168b59,_0x5b6323,_0x437dad,_0x317567){const _0x157f53=a349_0x47a24b;if(_0x317567===undefined)_0x317567=_0x437dad;var _0xd57cc7=Object[_0x157f53(0x22e)](_0x5b6323,_0x437dad);(!_0xd57cc7||('get'in _0xd57cc7?!_0x5b6323[_0x157f53(0x1f7)]:_0xd57cc7[_0x157f53(0x1ca)]||_0xd57cc7['configurable']))&&(_0xd57cc7={'enumerable':!![],'get':function(){return _0x5b6323[_0x437dad];}}),Object['defineProperty'](_0x168b59,_0x317567,_0xd57cc7);}:function(_0x5e5792,_0x4011c7,_0x123dfc,_0x4b20cd){if(_0x4b20cd===undefined)_0x4b20cd=_0x123dfc;_0x5e5792[_0x4b20cd]=_0x4011c7[_0x123dfc];}),__setModuleDefault=this&&this[a349_0x47a24b(0x22b)]||(Object[a349_0x47a24b(0x1e3)]?function(_0x1b2e68,_0x343404){const _0x3cdaf5=a349_0x47a24b;Object[_0x3cdaf5(0x27f)](_0x1b2e68,_0x3cdaf5(0x23b),{'enumerable':!![],'value':_0x343404});}:function(_0x2b2152,_0x3e7925){_0x2b2152['default']=_0x3e7925;}),__importStar=this&&this['__importStar']||(function(){const _0x55abb0=(function(){let _0x3b1348=!![];return function(_0x479f5a,_0x30c47d){const _0x14f0f9=_0x3b1348?function(){const _0x215c0e=a349_0x1055;if(_0x30c47d){const _0x1dcfd4=_0x30c47d[_0x215c0e(0x2a5)](_0x479f5a,arguments);return _0x30c47d=null,_0x1dcfd4;}}:function(){};return _0x3b1348=![],_0x14f0f9;};}()),_0x3f518e=_0x55abb0(this,function(){const _0x4a4e34=a349_0x1055;return _0x3f518e[_0x4a4e34(0x27b)]()['search']('(((.+)+)+)+$')['toString']()[_0x4a4e34(0x227)](_0x3f518e)[_0x4a4e34(0x22a)]('(((.+)+)+)+$');});_0x3f518e();var _0x18c27a=function(_0x488306){const _0x558b70=a349_0x1055;return _0x18c27a=Object[_0x558b70(0x280)]||function(_0x52df24){const _0x508350=_0x558b70;var _0x588b25=[];for(var _0x44a124 in _0x52df24)if(Object[_0x508350(0x1d2)][_0x508350(0x1c1)]['call'](_0x52df24,_0x44a124))_0x588b25[_0x588b25[_0x508350(0x289)]]=_0x44a124;return _0x588b25;},_0x18c27a(_0x488306);};return function(_0x56db1b){const _0x298d06=a349_0x1055;if(_0x56db1b&&_0x56db1b['__esModule'])return _0x56db1b;var _0x4218d4={};if(_0x56db1b!=null){for(var _0x338519=_0x18c27a(_0x56db1b),_0x564e45=0x0;_0x564e45<_0x338519['length'];_0x564e45++)if(_0x338519[_0x564e45]!==_0x298d06(0x23b))__createBinding(_0x4218d4,_0x56db1b,_0x338519[_0x564e45]);}return __setModuleDefault(_0x4218d4,_0x56db1b),_0x4218d4;};}()),__importDefault=this&&this[a349_0x47a24b(0x1cc)]||function(_0x5a6a7e){const _0x23acb0=a349_0x47a24b;return _0x5a6a7e&&_0x5a6a7e[_0x23acb0(0x1f7)]?_0x5a6a7e:{'default':_0x5a6a7e};};function a349_0x1e59(){const _0x34ac7a=['confirmationMessage5','companyId','UserMonitor','*\x20*\x20*\x20*\x20*','createdAt','contactList','info','CONNECTED','milliseconds','mediaName','constructor','confirmationMessage3',',\x20Delay\x20Inicial=','search','__setModuleDefault','\x27,\x20\x27','updatedAt','getOwnPropertyDescriptor','scheduleMonitor','captureException','emit','months','QueryTypes','isNil','lid','add','parse','parseToMilliseconds','handleWhatsappAutoRestart','./libs/socket','default','Verify','\x27,\x20\x27open\x27,\x20\x27','shipping','cron','save','Campanha\x20enviada\x20para\x20a\x20fila\x20de\x20processamento:\x20Campanha=','./services/WbotServices/SendWhatsAppMessage','1979696aRsRiz','update','AutoRestart','TicketMonitor','Disparo\x20agendado\x20para:\x20','lte','DispatchCampaign','Erro\x20ao\x20reiniciar\x20conexões\x20WhatsApp\x20periodicamente:\x20','clean','completed','0\x20*\x20*\x20*\x20*\x20*','Reiniciando\x20conexão\x20WhatsApp\x20','includes','./models/Whatsapp','message2','variables','\x20AND\x20\x22dueDate\x22::text\x20LIKE\x20\x27','error','SELECT','ProcessCampaign','isEmpty','contact','campaignQueue','SendMessage','path','ticketInactiveWarningQueue','confirmationRequestedAt','env',';Registro=','delivered','./helpers/SendMessage','Usuário\x20passado\x20para\x20offline:\x20','message1','removeWbot','./models/CampaignSetting','select\x20id\x20from\x20\x22Users\x22\x20where\x20\x22updatedAt\x22\x20<\x20now()\x20-\x20\x275\x20minutes\x27::interval\x20and\x20online\x20=\x20true','__createBinding','./models/Contact','dataValues','./models/ContactListItem','userMonitor','./services/WbotServices/wbotMessageListener','deliveredAt','confirmationMessage1','{nome}','query','mensalmente','scheduledAt','./models/User','subtract','ERRO','confirmation','14978750TjkrKp','findByPk','gte','./models/CampaignShipping','toString','confirmationMessage','key','1190FyMhmr','defineProperty','getOwnPropertyNames','handleMessage','1171YgIQFn','inactiveMessage','./models/Ticket','data','lastRestartAt','Campanhas\x20encontradas:\x20','contactId','length','saveMessage','campaignId','./helpers/GetDefaultWhatsApp','\x20segundos\x20finalizado:\x20','company-','\x20segundos\x20iniciado:\x20','closed','replace','whatsappId','findAll','public','then','open','CampaignQueue','sendScheduledMessages','Sleep\x20de\x20','sendMessage','DD/MM/yyyy','seconds','WhatsappRestartQueue','PENDENTE','HH:mm:ss','5185404igMGCK','%\x27;','set','confirmationMessage4','*/20\x20*\x20*\x20*\x20*\x20*','apply','\x20(ID:\x20','Erro\x20ao\x20enviar\x20aviso\x20de\x20inatividade:\x20','./services/CampaignService/ShowService','MessageQueue','AGENDADA','findOrCreate','message5','period','hasOwnProperty','-closed','days','794339vneBAD','push','SendScheduledMessage\x20->\x20Verify:\x20error','3PUoHQx','./helpers/GetWhatsappWbot','number','writable',';Contato=','__importDefault','Campanha\x20enviada\x20para:\x20Campanha=','start','getMessageOptions','\x20minutos.','whatsapp','prototype','message3','floor','\x27,\x20','REDIS_URI','isArray','random','-campaign','valids','confirmationMessage2','expiresInactiveMessage',')\x20de\x20acordo\x20com\x20o\x20período\x20(','contacts','Whatsapp\x20não\x20identificado','diff','email','name','create','StartWhatsAppSession','ticketMonitor','7075440iLFDRs','expiresTicket','getIO','SELECT\x20COUNT(*)\x20mycount\x20FROM\x20\x22Invoices\x22\x20WHERE\x20\x22companyId\x22\x20=\x20','keys','process','\x20fechado\x20por\x20inatividade\x20após\x20','24Cebthf','mediaPath','2222628fSTfKV','format','MessageQueue\x20->\x20SendMessage:\x20error','DispatchConfirmedCampaign','whatsappRestartQueue','moment','ENVIADA','Mensagem\x20agendada\x20enviada\x20para:\x20','__esModule','Erro\x20ao\x20tentar\x20consultar\x20agendamento:\x20','INSERT','body','-ticket','./models/Company','logger','minutes','Aviso\x20de\x20inatividade\x20enviado\x20para\x20o\x20ticket\x20#','randomValue','longerIntervalAfter','FINALIZADA','agent','message','SELECT\x20id,\x20\x22expiresTicket\x22,\x20\x22companyId\x22,\x20\x22whenExpireTicket\x22,\x0a\x20\x20\x20\x22expiresInactiveMessage\x22,\x20\x22inactiveMessage\x22,\x20\x22inactiveMessageTime\x22\x0a\x20\x20\x20FROM\x20\x22Whatsapps\x22\x20WHERE\x20\x22expiresTicket\x22\x20>\x200','VerifyLoginStatus','value','Registro\x20enviado\x20pra\x20fila\x20de\x20disparo:\x20Campanha=','VerifyCampaignsDaatabase','duration','bull','select\x20id,\x20\x22scheduledAt\x22\x20from\x20\x22Campaigns\x22\x20c\x0a\x20\x20\x20\x20where\x20\x22scheduledAt\x22\x20between\x20now()\x20and\x20now()\x20+\x20\x271\x20hour\x27::interval\x20and\x20status\x20=\x20\x27PROGRAMADA\x27','forEach','isWhatsappValid','toDate','VerifyTicketExpiration','messageInterval','messageQueue','map','INSERT\x20INTO\x20\x22Invoices\x22\x20(detail,\x20status,\x20value,\x20\x22updatedAt\x22,\x20\x22createdAt\x22,\x20\x22dueDate\x22,\x20\x22companyId\x22)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(\x27','0\x20*\x20*\x20*\x20*','@sentry/node','SendScheduledMessage\x20->\x20SendMessage:\x20error','planId','./models/Plan','greaterInterval','diariamente','message4'];a349_0x1e59=function(){return _0x34ac7a;};return a349_0x1e59();}Object['defineProperty'](exports,a349_0x47a24b(0x1f7),{'value':!![]}),exports[a349_0x47a24b(0x259)]=exports[a349_0x47a24b(0x1f3)]=exports[a349_0x47a24b(0x1e5)]=exports['ticketInactiveWarningQueue']=exports['sendScheduledMessages']=exports[a349_0x47a24b(0x22f)]=exports['messageQueue']=exports['userMonitor']=void 0x0,exports[a349_0x47a24b(0x239)]=handleWhatsappAutoRestart,exports[a349_0x47a24b(0x238)]=parseToMilliseconds,exports['sleep']=sleep,exports[a349_0x47a24b(0x200)]=randomValue,exports['startQueueProcess']=startQueueProcess;const Sentry=__importStar(require(a349_0x47a24b(0x216))),bull_1=__importDefault(require(a349_0x47a24b(0x20b))),moment_1=__importDefault(require(a349_0x47a24b(0x1f4))),sequelize_1=require('sequelize'),lodash_1=require('lodash'),path_1=__importDefault(require(a349_0x47a24b(0x25b))),cron_1=require(a349_0x47a24b(0x23f)),SendMessage_1=require(a349_0x47a24b(0x261)),Whatsapp_1=__importDefault(require(a349_0x47a24b(0x250))),logger_1=require('./utils/logger'),Schedule_1=__importDefault(require('./models/Schedule')),Contact_1=__importDefault(require(a349_0x47a24b(0x268))),GetDefaultWhatsApp_1=__importDefault(require(a349_0x47a24b(0x28c))),Campaign_1=__importDefault(require('./models/Campaign')),ContactList_1=__importDefault(require('./models/ContactList')),ContactListItem_1=__importDefault(require(a349_0x47a24b(0x26a))),CampaignSetting_1=__importDefault(require(a349_0x47a24b(0x265))),CampaignShipping_1=__importDefault(require(a349_0x47a24b(0x27a))),GetWhatsappWbot_1=__importDefault(require(a349_0x47a24b(0x1c8))),database_1=__importDefault(require('./database')),SendWhatsAppMedia_1=require('./services/WbotServices/SendWhatsAppMedia'),socket_1=require(a349_0x47a24b(0x23a)),User_1=__importDefault(require(a349_0x47a24b(0x273))),Company_1=__importDefault(require(a349_0x47a24b(0x1fc))),Plan_1=__importDefault(require(a349_0x47a24b(0x219))),wbotMessageListener_1=require(a349_0x47a24b(0x26c)),ShowService_1=__importDefault(require(a349_0x47a24b(0x1bb))),Ticket_1=__importDefault(require(a349_0x47a24b(0x284))),SendWhatsAppMessage_1=__importDefault(require(a349_0x47a24b(0x242))),wbot_1=require('./libs/wbot'),StartWhatsAppSession_1=require('./services/WbotServices/StartWhatsAppSession'),connection=process[a349_0x47a24b(0x25e)][a349_0x47a24b(0x1d6)]||'',limiterMax=process[a349_0x47a24b(0x25e)]['REDIS_OPT_LIMITER_MAX']||0x1,limiterDuration=process[a349_0x47a24b(0x25e)]['REDIS_OPT_LIMITER_DURATION']||0xbb8;exports[a349_0x47a24b(0x26b)]=new bull_1[(a349_0x47a24b(0x23b))](a349_0x47a24b(0x21f),connection),exports[a349_0x47a24b(0x212)]=new bull_1[(a349_0x47a24b(0x23b))](a349_0x47a24b(0x1bc),connection,{'limiter':{'max':limiterMax,'duration':limiterDuration}}),exports[a349_0x47a24b(0x22f)]=new bull_1[(a349_0x47a24b(0x23b))]('ScheduleMonitor',connection),exports[a349_0x47a24b(0x298)]=new bull_1[(a349_0x47a24b(0x23b))]('SendSacheduledMessages',connection),exports[a349_0x47a24b(0x25c)]=new bull_1[(a349_0x47a24b(0x23b))]('TicketInactiveWarning',connection);async function handleWhatsappAutoRestart(){const _0x153173=a349_0x47a24b;try{const _0x511ab9=await Whatsapp_1[_0x153173(0x23b)][_0x153173(0x293)]({'where':{'automaticRestart':!![],'status':_0x153173(0x224)}}),_0x563a58=new Date();for(const _0x59117e of _0x511ab9){const _0x4d01c9=_0x59117e[_0x153173(0x286)]||_0x59117e[_0x153173(0x22d)]||_0x59117e[_0x153173(0x221)];shouldRestart(_0x563a58,_0x4d01c9,_0x59117e[_0x153173(0x1c0)])&&(logger_1['logger'][_0x153173(0x223)](_0x153173(0x24e)+_0x59117e[_0x153173(0x1e2)]+_0x153173(0x1b9)+_0x59117e['id']+_0x153173(0x1dd)+_0x59117e[_0x153173(0x1c0)]+')'),await(0x0,wbot_1[_0x153173(0x264)])(_0x59117e['id'],![]),await new Promise(_0x75626=>setTimeout(_0x75626,0xbb8)),await(0x0,StartWhatsAppSession_1[_0x153173(0x1e4)])(_0x59117e,_0x59117e[_0x153173(0x21e)]),await _0x59117e['update']({'lastRestartAt':new Date()}));}}catch(_0x2ca827){logger_1[_0x153173(0x1fd)]['error'](_0x153173(0x24a)+_0x2ca827[_0x153173(0x204)]);}}exports[a349_0x47a24b(0x1e5)]=new bull_1[(a349_0x47a24b(0x23b))](a349_0x47a24b(0x246),connection),exports[a349_0x47a24b(0x1f3)]=new bull_1['default'](a349_0x47a24b(0x29d),connection);function shouldRestart(_0x390d39,_0x16259f,_0x16526f){const _0x58385b=a349_0x47a24b;if(_0x16526f===_0x58385b(0x21b))return(0x0,moment_1[_0x58385b(0x23b)])(_0x390d39)[_0x58385b(0x1e0)]((0x0,moment_1[_0x58385b(0x23b)])(_0x16259f),_0x58385b(0x1c3))>=0x1;if(_0x16526f==='semanalmente')return(0x0,moment_1[_0x58385b(0x23b)])(_0x390d39)[_0x58385b(0x1e0)]((0x0,moment_1[_0x58385b(0x23b)])(_0x16259f),'weeks')>=0x1;if(_0x16526f===_0x58385b(0x271))return(0x0,moment_1[_0x58385b(0x23b)])(_0x390d39)[_0x58385b(0x1e0)]((0x0,moment_1[_0x58385b(0x23b)])(_0x16259f),_0x58385b(0x232))>=0x1;return![];}async function handleVerifyTicketExpiration(){const _0x388941=a349_0x47a24b;try{const _0x26b2d4=await database_1[_0x388941(0x23b)][_0x388941(0x270)](_0x388941(0x205),{'type':sequelize_1[_0x388941(0x233)][_0x388941(0x255)]});for(const _0x1d5083 of _0x26b2d4){let _0xdcc269={};_0x1d5083['whenExpireTicket']===_0x388941(0x203)&&(_0xdcc269={'fromMe':!![]});if(_0x1d5083['inactiveMessageTime']>0x0&&_0x1d5083['inactiveMessage']){const _0x23e1db=_0x1d5083[_0x388941(0x1e7)]-_0x1d5083['inactiveMessageTime'];if(_0x23e1db>0x0){const _0x37640f=await Ticket_1['default'][_0x388941(0x293)]({'where':{'status':'open','whatsappId':_0x1d5083['id'],'companyId':_0x1d5083[_0x388941(0x21e)],'ticketsWithWarning':![],..._0xdcc269,'updatedAt':{[sequelize_1['Op']['lt']]:(0x0,moment_1[_0x388941(0x23b)])()['subtract'](_0x23e1db,_0x388941(0x1fe))[_0x388941(0x20f)](),[sequelize_1['Op']['gt']]:(0x0,moment_1[_0x388941(0x23b)])()[_0x388941(0x274)](_0x1d5083[_0x388941(0x1e7)],_0x388941(0x1fe))[_0x388941(0x20f)]()}},'include':[{'model':Contact_1[_0x388941(0x23b)],'as':_0x388941(0x258)}]});for(const _0x56a678 of _0x37640f){try{await(0x0,SendWhatsAppMessage_1[_0x388941(0x23b)])({'ticket':_0x56a678,'body':_0x1d5083[_0x388941(0x283)]}),await Ticket_1['default'][_0x388941(0x244)]({'ticketsWithWarning':!![]},{'where':{'id':_0x56a678['id']},'silent':!![]}),logger_1['logger'][_0x388941(0x223)](_0x388941(0x1ff)+_0x56a678['id']);}catch(_0x4cf18f){Sentry['captureException'](_0x4cf18f),logger_1[_0x388941(0x1fd)][_0x388941(0x254)](_0x388941(0x1ba)+_0x4cf18f['message']);}}}}const _0x40a935=await Ticket_1[_0x388941(0x23b)]['findAll']({'where':{'status':_0x388941(0x296),'whatsappId':_0x1d5083['id'],'companyId':_0x1d5083[_0x388941(0x21e)],..._0xdcc269,'updatedAt':{[sequelize_1['Op']['lt']]:(0x0,moment_1[_0x388941(0x23b)])()[_0x388941(0x274)](_0x1d5083['expiresTicket'],_0x388941(0x1fe))[_0x388941(0x20f)]()}},'include':[{'model':Contact_1[_0x388941(0x23b)],'as':'contact'}]});for(const _0x55044a of _0x40a935){try{_0x1d5083[_0x388941(0x1dc)]&&(await(0x0,SendWhatsAppMessage_1[_0x388941(0x23b)])({'ticket':_0x55044a,'body':_0x1d5083[_0x388941(0x1dc)]}),await new Promise(_0x12dbdb=>setTimeout(_0x12dbdb,0x3e8)));await _0x55044a['update']({'status':_0x388941(0x290),'amountUsedBotQueues':0x0,'ticketsWithWarning':![]});const _0x23625e=(0x0,socket_1[_0x388941(0x1e8)])();_0x23625e['to'](_0x388941(0x28e)+_0x55044a['companyId']+'-open')['to']('queue-'+_0x55044a['queueId']+'-open')['emit'](_0x388941(0x28e)+_0x55044a[_0x388941(0x21e)]+_0x388941(0x1fb),{'action':'update','ticket':{..._0x55044a[_0x388941(0x269)],'status':_0x388941(0x290)}}),_0x23625e['to'](_0x388941(0x28e)+_0x55044a[_0x388941(0x21e)]+_0x388941(0x1c2))[_0x388941(0x231)](_0x388941(0x28e)+_0x55044a[_0x388941(0x21e)]+_0x388941(0x1fb),{'action':'update','ticket':{..._0x55044a[_0x388941(0x269)],'status':_0x388941(0x290)}}),logger_1[_0x388941(0x1fd)][_0x388941(0x223)]('Ticket\x20#'+_0x55044a['id']+_0x388941(0x1ec)+_0x1d5083['expiresTicket']+_0x388941(0x1d0));}catch(_0x53f74e){Sentry[_0x388941(0x230)](_0x53f74e),logger_1[_0x388941(0x1fd)][_0x388941(0x254)]({'error':_0x53f74e},'Erro\x20ao\x20fechar\x20ticket\x20por\x20inatividade');}}_0x40a935['length']>0x0&&logger_1[_0x388941(0x1fd)][_0x388941(0x223)](_0x40a935[_0x388941(0x289)]+'\x20tickets\x20fechados\x20por\x20inatividade\x20para\x20a\x20empresa\x20'+_0x1d5083[_0x388941(0x21e)]);}}catch(_0x1688c5){Sentry['captureException'](_0x1688c5),logger_1[_0x388941(0x1fd)][_0x388941(0x254)]({'error':_0x1688c5},'TicketMonitor\x20->\x20VerifyTicketExpiration:\x20erro');}}exports[a349_0x47a24b(0x259)]=new bull_1[(a349_0x47a24b(0x23b))](a349_0x47a24b(0x297),connection);async function handleSendMessage(_0x5b2633){const _0x425e22=a349_0x47a24b;try{const {data:_0x2b0744}=_0x5b2633,_0x10722d=await Whatsapp_1[_0x425e22(0x23b)][_0x425e22(0x278)](_0x2b0744[_0x425e22(0x292)]);if(_0x10722d==null)throw Error(_0x425e22(0x1df));const _0x37fef3=_0x2b0744[_0x425e22(0x285)];await(0x0,SendMessage_1['SendMessage'])(_0x10722d,_0x37fef3);}catch(_0x14eae3){Sentry[_0x425e22(0x230)](_0x14eae3),logger_1['logger']['error']({'error':_0x14eae3},_0x425e22(0x1f1));throw _0x14eae3;}}async function handleVerifySchedules(){const _0x1f6d13=a349_0x47a24b;try{const {count:_0x17c147,rows:_0xf19969}=await Schedule_1[_0x1f6d13(0x23b)]['findAndCountAll']({'where':{'status':_0x1f6d13(0x29e),'sentAt':null,'sendAt':{[sequelize_1['Op'][_0x1f6d13(0x279)]]:(0x0,moment_1['default'])()['format']('YYYY-MM-DD\x20HH:mm:ss'),[sequelize_1['Op'][_0x1f6d13(0x248)]]:(0x0,moment_1[_0x1f6d13(0x23b)])()[_0x1f6d13(0x236)]('30',_0x1f6d13(0x29c))['format']('YYYY-MM-DD\x20HH:mm:ss')}},'include':[{'model':Contact_1[_0x1f6d13(0x23b)],'as':'contact'}]});_0x17c147>0x0&&_0xf19969[_0x1f6d13(0x213)](async _0x1c9890=>{const _0x56293c=_0x1f6d13;await _0x1c9890[_0x56293c(0x244)]({'status':_0x56293c(0x1bd)}),exports[_0x56293c(0x298)][_0x56293c(0x236)](_0x56293c(0x25a),{'schedule':_0x1c9890},{'delay':0x9c40}),logger_1[_0x56293c(0x1fd)][_0x56293c(0x223)](_0x56293c(0x247)+_0x1c9890[_0x56293c(0x258)][_0x56293c(0x1e2)]);});}catch(_0x5f43ba){Sentry[_0x1f6d13(0x230)](_0x5f43ba),logger_1[_0x1f6d13(0x1fd)][_0x1f6d13(0x254)]({'error':_0x5f43ba},_0x1f6d13(0x1c6));throw _0x5f43ba;}}async function handleSendScheduledMessage(_0x2ed5df){const _0x386a4e=a349_0x47a24b,{data:{schedule:_0x54d1e6}}=_0x2ed5df;let _0xdcdfcf=null;try{_0xdcdfcf=await Schedule_1[_0x386a4e(0x23b)][_0x386a4e(0x278)](_0x54d1e6['id']);}catch(_0x358fbf){Sentry[_0x386a4e(0x230)](_0x358fbf),logger_1['logger'][_0x386a4e(0x223)](_0x386a4e(0x1f8)+_0x54d1e6['id']);}try{const _0x20e228=await(0x0,GetDefaultWhatsApp_1[_0x386a4e(0x23b)])(_0x54d1e6[_0x386a4e(0x21e)]),_0x414493=await(0x0,SendMessage_1[_0x386a4e(0x25a)])(_0x20e228,{'number':_0x54d1e6['contact'][_0x386a4e(0x1c9)],'body':_0x54d1e6[_0x386a4e(0x1fa)]});_0x54d1e6[_0x386a4e(0x28a)]&&(0x0,wbotMessageListener_1[_0x386a4e(0x281)])(_0x414493,await(0x0,GetWhatsappWbot_1[_0x386a4e(0x23b)])(_0x20e228),_0x54d1e6[_0x386a4e(0x21e)]),await _0xdcdfcf?.['update']({'sentAt':new Date(),'status':_0x386a4e(0x1f5)}),logger_1[_0x386a4e(0x1fd)]['info'](_0x386a4e(0x1f6)+_0x54d1e6[_0x386a4e(0x258)][_0x386a4e(0x1e2)]),exports[_0x386a4e(0x298)][_0x386a4e(0x24b)](0x3a98,_0x386a4e(0x24c));}catch(_0x4478e5){Sentry[_0x386a4e(0x230)](_0x4478e5),await _0xdcdfcf?.['update']({'status':_0x386a4e(0x275)}),logger_1[_0x386a4e(0x1fd)]['error']({'error':_0x4478e5},_0x386a4e(0x217));throw _0x4478e5;}}async function handleVerifyCampaigns(){const _0x4b392c=a349_0x47a24b,_0x1085d8=await database_1[_0x4b392c(0x23b)][_0x4b392c(0x270)](_0x4b392c(0x20c),{'type':sequelize_1[_0x4b392c(0x233)][_0x4b392c(0x255)]});_0x1085d8[_0x4b392c(0x289)]&&logger_1[_0x4b392c(0x1fd)][_0x4b392c(0x223)](_0x4b392c(0x287)+_0x1085d8[_0x4b392c(0x289)]),_0x1085d8[_0x4b392c(0x20d)](_0x2cb947=>{const _0x2119ce=_0x4b392c;try{const _0x34d829=(0x0,moment_1[_0x2119ce(0x23b)])(),_0x6fb36d=(0x0,moment_1[_0x2119ce(0x23b)])(_0x2cb947[_0x2119ce(0x272)]),_0x127988=_0x6fb36d[_0x2119ce(0x1e0)](_0x34d829,_0x2119ce(0x225));logger_1[_0x2119ce(0x1fd)][_0x2119ce(0x223)](_0x2119ce(0x241)+_0x2cb947['id']+_0x2119ce(0x229)+_0x127988),exports['campaignQueue'][_0x2119ce(0x236)](_0x2119ce(0x256),{'id':_0x2cb947['id'],'delay':_0x127988},{'removeOnComplete':!![]});}catch(_0x1623fd){Sentry[_0x2119ce(0x230)](_0x1623fd);}});}async function getCampaign(_0x2fd979){const _0x1e11a0=a349_0x47a24b;return Campaign_1[_0x1e11a0(0x23b)][_0x1e11a0(0x278)](_0x2fd979,{'include':[{'model':ContactList_1[_0x1e11a0(0x23b)],'as':_0x1e11a0(0x222),'attributes':['id','name'],'include':[{'model':ContactListItem_1[_0x1e11a0(0x23b)],'as':_0x1e11a0(0x1de),'attributes':['id',_0x1e11a0(0x1e2),_0x1e11a0(0x1c9),_0x1e11a0(0x1e1),_0x1e11a0(0x20e)],'where':{'isWhatsappValid':!![]}}]},{'model':Whatsapp_1['default'],'as':_0x1e11a0(0x1d1),'attributes':['id','name']},{'model':CampaignShipping_1[_0x1e11a0(0x23b)],'as':_0x1e11a0(0x23e),'include':[{'model':ContactListItem_1[_0x1e11a0(0x23b)],'as':_0x1e11a0(0x258)}]}]});}async function getSettings(_0x232e77){const _0x4555cf=a349_0x47a24b,_0xa4c2ed=await CampaignSetting_1['default'][_0x4555cf(0x293)]({'where':{'companyId':_0x232e77[_0x4555cf(0x21e)]},'attributes':[_0x4555cf(0x27d),_0x4555cf(0x207)]});let _0x79d04d=0x14,_0x55614f=0x14,_0x2d246a=0x3c,_0x4adb03=[];return _0xa4c2ed[_0x4555cf(0x20d)](_0xd9a4ac=>{const _0xcac2a1=_0x4555cf;_0xd9a4ac[_0xcac2a1(0x27d)]===_0xcac2a1(0x211)&&(_0x79d04d=JSON[_0xcac2a1(0x237)](_0xd9a4ac[_0xcac2a1(0x207)])),_0xd9a4ac['key']===_0xcac2a1(0x201)&&(_0x55614f=JSON[_0xcac2a1(0x237)](_0xd9a4ac[_0xcac2a1(0x207)])),_0xd9a4ac[_0xcac2a1(0x27d)]===_0xcac2a1(0x21a)&&(_0x2d246a=JSON[_0xcac2a1(0x237)](_0xd9a4ac[_0xcac2a1(0x207)])),_0xd9a4ac[_0xcac2a1(0x27d)]===_0xcac2a1(0x252)&&(_0x4adb03=JSON[_0xcac2a1(0x237)](_0xd9a4ac[_0xcac2a1(0x207)]));}),{'messageInterval':_0x79d04d,'longerIntervalAfter':_0x55614f,'greaterInterval':_0x2d246a,'variables':_0x4adb03};}function parseToMilliseconds(_0xc96321){return _0xc96321*0x3e8;}async function sleep(_0x49fde7){const _0x33bff0=a349_0x47a24b;return logger_1[_0x33bff0(0x1fd)]['info'](_0x33bff0(0x299)+_0x49fde7+_0x33bff0(0x28f)+(0x0,moment_1[_0x33bff0(0x23b)])()[_0x33bff0(0x1f0)](_0x33bff0(0x29f))),new Promise(_0xe2c369=>{setTimeout(()=>{const _0x3b5936=a349_0x1055;logger_1[_0x3b5936(0x1fd)]['info']('Sleep\x20de\x20'+_0x49fde7+_0x3b5936(0x28d)+(0x0,moment_1[_0x3b5936(0x23b)])()['format'](_0x3b5936(0x29f))),_0xe2c369(!![]);},parseToMilliseconds(_0x49fde7));});}function getCampaignValidMessages(_0x5b8988){const _0x110133=a349_0x47a24b,_0x490d83=[];return!(0x0,lodash_1['isEmpty'])(_0x5b8988['message1'])&&!(0x0,lodash_1[_0x110133(0x234)])(_0x5b8988[_0x110133(0x263)])&&_0x490d83['push'](_0x5b8988[_0x110133(0x263)]),!(0x0,lodash_1[_0x110133(0x257)])(_0x5b8988['message2'])&&!(0x0,lodash_1['isNil'])(_0x5b8988['message2'])&&_0x490d83[_0x110133(0x1c5)](_0x5b8988[_0x110133(0x251)]),!(0x0,lodash_1[_0x110133(0x257)])(_0x5b8988['message3'])&&!(0x0,lodash_1[_0x110133(0x234)])(_0x5b8988['message3'])&&_0x490d83['push'](_0x5b8988[_0x110133(0x1d3)]),!(0x0,lodash_1[_0x110133(0x257)])(_0x5b8988[_0x110133(0x21c)])&&!(0x0,lodash_1['isNil'])(_0x5b8988[_0x110133(0x21c)])&&_0x490d83[_0x110133(0x1c5)](_0x5b8988['message4']),!(0x0,lodash_1[_0x110133(0x257)])(_0x5b8988['message5'])&&!(0x0,lodash_1[_0x110133(0x234)])(_0x5b8988[_0x110133(0x1bf)])&&_0x490d83['push'](_0x5b8988['message5']),_0x490d83;}function getCampaignValidConfirmationMessages(_0x291188){const _0x188e55=a349_0x47a24b,_0x6c1bd0=[];return!(0x0,lodash_1[_0x188e55(0x257)])(_0x291188[_0x188e55(0x26e)])&&!(0x0,lodash_1['isNil'])(_0x291188[_0x188e55(0x26e)])&&_0x6c1bd0['push'](_0x291188['confirmationMessage1']),!(0x0,lodash_1[_0x188e55(0x257)])(_0x291188['confirmationMessage2'])&&!(0x0,lodash_1[_0x188e55(0x234)])(_0x291188[_0x188e55(0x1db)])&&_0x6c1bd0['push'](_0x291188[_0x188e55(0x1db)]),!(0x0,lodash_1[_0x188e55(0x257)])(_0x291188[_0x188e55(0x228)])&&!(0x0,lodash_1[_0x188e55(0x234)])(_0x291188[_0x188e55(0x228)])&&_0x6c1bd0[_0x188e55(0x1c5)](_0x291188[_0x188e55(0x228)]),!(0x0,lodash_1['isEmpty'])(_0x291188['confirmationMessage4'])&&!(0x0,lodash_1[_0x188e55(0x234)])(_0x291188[_0x188e55(0x2a3)])&&_0x6c1bd0[_0x188e55(0x1c5)](_0x291188[_0x188e55(0x2a3)]),!(0x0,lodash_1[_0x188e55(0x257)])(_0x291188[_0x188e55(0x21d)])&&!(0x0,lodash_1['isNil'])(_0x291188[_0x188e55(0x21d)])&&_0x6c1bd0['push'](_0x291188['confirmationMessage5']),_0x6c1bd0;}function getProcessedMessage(_0x45d078,_0x2b7b09,_0x4a01e0){const _0x494bfb=a349_0x47a24b;let _0x315ecd=_0x45d078;return _0x315ecd['includes'](_0x494bfb(0x26f))&&(_0x315ecd=_0x315ecd['replace'](/{nome}/g,_0x4a01e0['name'])),_0x315ecd['includes']('{email}')&&(_0x315ecd=_0x315ecd[_0x494bfb(0x291)](/{email}/g,_0x4a01e0[_0x494bfb(0x1e1)])),_0x315ecd[_0x494bfb(0x24f)]('{numero}')&&(_0x315ecd=_0x315ecd[_0x494bfb(0x291)](/{numero}/g,_0x4a01e0[_0x494bfb(0x1c9)])),_0x2b7b09['forEach'](_0x38e407=>{const _0x3f5993=_0x494bfb;if(_0x315ecd[_0x3f5993(0x24f)]('{'+_0x38e407['key']+'}')){const _0x468e0b=new RegExp('{'+_0x38e407[_0x3f5993(0x27d)]+'}','g');_0x315ecd=_0x315ecd[_0x3f5993(0x291)](_0x468e0b,_0x38e407['value']);}}),_0x315ecd;}function randomValue(_0x3eea9f,_0x5ed6af){const _0x3ecce2=a349_0x47a24b;return Math[_0x3ecce2(0x1d4)](Math[_0x3ecce2(0x1d8)]()*_0x5ed6af)+_0x3eea9f;}async function verifyAndFinalizeCampaign(_0x35c98b){const _0x4efe77=a349_0x47a24b,_0x2539f5=await(0x0,ShowService_1[_0x4efe77(0x23b)])(_0x35c98b['id']);_0x2539f5[_0x4efe77(0x1da)]===_0x2539f5[_0x4efe77(0x260)]&&await _0x35c98b[_0x4efe77(0x244)]({'status':_0x4efe77(0x202),'completedAt':(0x0,moment_1[_0x4efe77(0x23b)])()});const _0x1a26cc=(0x0,socket_1[_0x4efe77(0x1e8)])();_0x1a26cc['emit'](_0x4efe77(0x28e)+_0x35c98b[_0x4efe77(0x21e)]+'-campaign',_0x2539f5);}async function prepareContact(_0x168ad3,_0x4f3f67,_0x2f0cc8,_0x5c9dff,_0x5b2839,_0x519eb5){const _0x553143=a349_0x47a24b,_0x10cae9={};_0x10cae9['number']=_0x2f0cc8[_0x553143(0x1c9)],_0x10cae9['contactId']=_0x2f0cc8['id'],_0x10cae9[_0x553143(0x28b)]=_0x168ad3['id'];if(_0x5b2839[_0x553143(0x289)]){const _0x127150=randomValue(0x0,_0x5b2839[_0x553143(0x289)]),_0x5f4cb3=getProcessedMessage(_0x5b2839[_0x127150],_0x4f3f67,_0x2f0cc8);_0x10cae9[_0x553143(0x204)]=''+_0x5f4cb3;}if(_0x168ad3[_0x553143(0x276)]){if(_0x519eb5[_0x553143(0x289)]){const _0x28bd29=randomValue(0x0,_0x519eb5['length']),_0x21e330=getProcessedMessage(_0x519eb5[_0x28bd29],_0x4f3f67,_0x2f0cc8);_0x10cae9[_0x553143(0x27c)]=''+_0x21e330;}}const [_0x20b5e8,_0x417497]=await CampaignShipping_1[_0x553143(0x23b)][_0x553143(0x1be)]({'where':{'campaignId':_0x10cae9[_0x553143(0x28b)],'contactId':_0x10cae9[_0x553143(0x288)]},'defaults':_0x10cae9});!_0x417497&&_0x20b5e8['deliveredAt']===null&&_0x20b5e8[_0x553143(0x25d)]===null&&(_0x20b5e8[_0x553143(0x2a2)](_0x10cae9),await _0x20b5e8[_0x553143(0x240)]());if(_0x20b5e8[_0x553143(0x26d)]===null&&_0x20b5e8[_0x553143(0x25d)]===null){const _0x148125=await exports[_0x553143(0x259)][_0x553143(0x236)](_0x553143(0x249),{'campaignId':_0x168ad3['id'],'campaignShippingId':_0x20b5e8['id'],'contactListItemId':_0x2f0cc8['id']},{'delay':_0x5c9dff});await _0x20b5e8[_0x553143(0x244)]({'jobId':''+_0x148125['id']});}}async function handleProcessCampaign(_0x3ae7e5){const _0x420669=a349_0x47a24b;try{const {id:_0x17b4d0}=_0x3ae7e5[_0x420669(0x285)];let {delay:_0x21c8b1}=_0x3ae7e5['data'];const _0xf7bdf1=await getCampaign(_0x17b4d0),_0x6acc4c=await getSettings(_0xf7bdf1);if(_0xf7bdf1){const {contacts:_0x41bb7f}=_0xf7bdf1['contactList'],_0x319274=getCampaignValidMessages(_0xf7bdf1),_0x50beb0=_0xf7bdf1[_0x420669(0x276)]?getCampaignValidConfirmationMessages(_0xf7bdf1):null;if((0x0,lodash_1[_0x420669(0x1d7)])(_0x41bb7f)){let _0x6fd7b2=0x0;_0x41bb7f[_0x420669(0x20d)](_0x475aad=>{const _0x118ba9=_0x420669;prepareContact(_0xf7bdf1,_0x6acc4c['variables'],_0x475aad,_0x21c8b1,_0x319274,_0x50beb0)[_0x118ba9(0x295)](()=>{const _0x5dd0cb=_0x118ba9;logger_1['logger'][_0x5dd0cb(0x223)](_0x5dd0cb(0x208)+_0xf7bdf1['id']+';Contato='+_0x475aad[_0x5dd0cb(0x1e2)]+';Delay='+_0x21c8b1);}),_0x6fd7b2+=0x1,_0x6fd7b2%_0x6acc4c[_0x118ba9(0x201)]===0x0?_0x21c8b1+=parseToMilliseconds(_0x6acc4c[_0x118ba9(0x21a)]):_0x21c8b1+=parseToMilliseconds(randomValue(0x0,_0x6acc4c[_0x118ba9(0x211)]));}),await _0xf7bdf1[_0x420669(0x244)]({'status':'EM_ANDAMENTO'});}}}catch(_0x15125c){Sentry[_0x420669(0x230)](_0x15125c);}}async function handleDispatchCampaign(_0x60b50c){const _0x659c58=a349_0x47a24b;try{const {data:_0x488a91}=_0x60b50c,{campaignShippingId:_0x471748,campaignId:_0x33733b}=_0x488a91,_0x558765=await Campaign_1['default'][_0x659c58(0x278)](_0x33733b,{'include':[{'model':Whatsapp_1[_0x659c58(0x23b)],'as':_0x659c58(0x1d1)}]});if(!_0x558765){logger_1[_0x659c58(0x1fd)][_0x659c58(0x254)]({'data':_0x488a91},'Campaign\x20not\x20found');return;}const _0x1976e2=await(0x0,GetWhatsappWbot_1[_0x659c58(0x23b)])(_0x558765[_0x659c58(0x1d1)]);logger_1[_0x659c58(0x1fd)][_0x659c58(0x223)]('Disparo\x20de\x20campanha\x20solicitado:\x20Campanha='+_0x33733b+_0x659c58(0x25f)+_0x471748);const _0x4704fe=await CampaignShipping_1[_0x659c58(0x23b)][_0x659c58(0x278)](_0x471748,{'include':[{'model':ContactListItem_1['default'],'as':_0x659c58(0x258)}]}),_0x5dca72=_0x4704fe[_0x659c58(0x1c9)]+'@'+(_0x4704fe[_0x659c58(0x1c9)][_0x659c58(0x289)]>0xd?_0x659c58(0x235):'s.whatsapp.net');if(_0x558765[_0x659c58(0x276)]&&_0x4704fe[_0x659c58(0x276)]===null)await _0x1976e2[_0x659c58(0x29a)](_0x5dca72,{'text':_0x4704fe[_0x659c58(0x27c)]}),await _0x4704fe['update']({'confirmationRequestedAt':(0x0,moment_1['default'])()});else{await _0x1976e2['sendMessage'](_0x5dca72,{'text':_0x4704fe[_0x659c58(0x204)]});if(_0x558765[_0x659c58(0x1ee)]){const _0x29ad48=path_1['default']['resolve'](_0x659c58(0x294),_0x558765[_0x659c58(0x1ee)]),_0x31d25c=await(0x0,SendWhatsAppMedia_1[_0x659c58(0x1cf)])(_0x558765[_0x659c58(0x226)],_0x29ad48);Object[_0x659c58(0x1ea)](_0x31d25c)['length']&&await _0x1976e2[_0x659c58(0x29a)](_0x5dca72,{..._0x31d25c});}await _0x4704fe[_0x659c58(0x244)]({'deliveredAt':(0x0,moment_1[_0x659c58(0x23b)])()});}await verifyAndFinalizeCampaign(_0x558765);const _0x485ee2=(0x0,socket_1[_0x659c58(0x1e8)])();_0x485ee2['emit']('company-'+_0x558765['companyId']+_0x659c58(0x1d9),{'action':_0x659c58(0x244),'record':_0x558765}),logger_1[_0x659c58(0x1fd)][_0x659c58(0x223)](_0x659c58(0x1cd)+_0x33733b+_0x659c58(0x1cb)+_0x4704fe[_0x659c58(0x258)][_0x659c58(0x1e2)]);}catch(_0xa5b7ab){Sentry[_0x659c58(0x230)](_0xa5b7ab),logger_1['logger'][_0x659c58(0x254)](_0xa5b7ab['message']);}}async function handleLoginStatus(){const _0x156785=a349_0x47a24b,_0x3a8cf0=await database_1[_0x156785(0x23b)][_0x156785(0x270)](_0x156785(0x266),{'type':sequelize_1['QueryTypes'][_0x156785(0x255)]});_0x3a8cf0[_0x156785(0x20d)](async _0xfec6e8=>{const _0x41b7ad=_0x156785;try{const _0x2071cf=await User_1[_0x41b7ad(0x23b)][_0x41b7ad(0x278)](_0xfec6e8['id']);await _0x2071cf[_0x41b7ad(0x244)]({'online':![]}),logger_1['logger'][_0x41b7ad(0x223)](_0x41b7ad(0x262)+_0xfec6e8['id']);}catch(_0x216d48){Sentry[_0x41b7ad(0x230)](_0x216d48);}});}async function handleInvoiceCreate(){const _0x296cb7=a349_0x47a24b,_0x5d860f=new cron_1['CronJob'](_0x296cb7(0x24d),async()=>{const _0x1f3e17=_0x296cb7,_0x1aedb7=await Company_1['default'][_0x1f3e17(0x293)]();_0x1aedb7['map'](async _0x2a1b83=>{const _0x360322=_0x1f3e17,{dueDate:_0x480234}=_0x2a1b83,_0x614cc0=(0x0,moment_1['default'])(_0x480234)['format'](),_0x144fd4=(0x0,moment_1[_0x360322(0x23b)])()[_0x360322(0x1f0)](),_0x4df464=(0x0,moment_1[_0x360322(0x23b)])((0x0,moment_1['default'])())[_0x360322(0x1f0)](_0x360322(0x29b)),_0x3f86e3=(0x0,moment_1[_0x360322(0x23b)])(_0x480234)[_0x360322(0x1f0)]('DD/MM/yyyy'),_0x2d7860=(0x0,moment_1[_0x360322(0x23b)])(_0x3f86e3,_0x360322(0x29b))[_0x360322(0x1e0)]((0x0,moment_1[_0x360322(0x23b)])(_0x4df464,_0x360322(0x29b))),_0x13dd6c=moment_1['default'][_0x360322(0x20a)](_0x2d7860)['asDays']();if(_0x13dd6c<0x14){const _0x578ff7=await Plan_1[_0x360322(0x23b)]['findByPk'](_0x2a1b83[_0x360322(0x218)]),_0x30a4ea=_0x360322(0x1e9)+_0x2a1b83['id']+_0x360322(0x253)+(0x0,moment_1['default'])(_0x480234)[_0x360322(0x1f0)]('yyyy-MM-DD')+_0x360322(0x2a1),_0xb78e32=await database_1[_0x360322(0x23b)]['query'](_0x30a4ea,{'type':sequelize_1[_0x360322(0x233)][_0x360322(0x255)]});if(+_0xb78e32[0x0]['mycount']===0x0){const _0x4422c3=_0x360322(0x214)+_0x578ff7[_0x360322(0x1e2)]+_0x360322(0x23d)+_0x578ff7['value']+_0x360322(0x22c)+_0x144fd4+_0x360322(0x22c)+_0x144fd4+_0x360322(0x22c)+_0x614cc0+_0x360322(0x1d5)+_0x2a1b83['id']+');';await database_1['default'][_0x360322(0x270)](_0x4422c3,{'type':sequelize_1[_0x360322(0x233)][_0x360322(0x1f9)]});}}});});_0x5d860f[_0x296cb7(0x1ce)]();}handleInvoiceCreate();async function startQueueProcess(){const _0x491804=a349_0x47a24b;logger_1['logger']['info']('Iniciando\x20processamento\x20de\x20filas'),exports[_0x491804(0x212)][_0x491804(0x1eb)](_0x491804(0x25a),handleSendMessage),exports[_0x491804(0x22f)][_0x491804(0x1eb)](_0x491804(0x23c),handleVerifySchedules),exports[_0x491804(0x298)][_0x491804(0x1eb)](_0x491804(0x25a),handleSendScheduledMessage),exports['campaignQueue'][_0x491804(0x1eb)](_0x491804(0x209),handleVerifyCampaigns),exports['campaignQueue'][_0x491804(0x1eb)](_0x491804(0x256),handleProcessCampaign),exports[_0x491804(0x259)][_0x491804(0x1eb)](_0x491804(0x249),handleDispatchCampaign),exports[_0x491804(0x26b)][_0x491804(0x1eb)](_0x491804(0x206),handleLoginStatus),exports['campaignQueue'][_0x491804(0x1eb)](_0x491804(0x1f2),handleDispatchCampaign),exports[_0x491804(0x1e5)][_0x491804(0x1eb)](_0x491804(0x210),handleVerifyTicketExpiration),exports[_0x491804(0x1f3)][_0x491804(0x1eb)]('AutoRestart',handleWhatsappAutoRestart),exports[_0x491804(0x22f)][_0x491804(0x236)]('Verify',{},{'repeat':{'cron':'*/5\x20*\x20*\x20*\x20*\x20*'},'removeOnComplete':!![]}),exports[_0x491804(0x259)][_0x491804(0x236)](_0x491804(0x209),{},{'repeat':{'cron':_0x491804(0x2a4)},'removeOnComplete':!![]}),exports[_0x491804(0x26b)]['add'](_0x491804(0x206),{},{'repeat':{'cron':'*\x20*\x20*\x20*\x20*'},'removeOnComplete':!![]}),exports[_0x491804(0x1e5)]['add'](_0x491804(0x210),{},{'repeat':{'cron':_0x491804(0x220)},'removeOnComplete':!![]}),exports[_0x491804(0x1f3)]['add'](_0x491804(0x245),{},{'repeat':{'cron':_0x491804(0x215)},'removeOnComplete':!![]});}