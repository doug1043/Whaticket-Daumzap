'use strict';const a350_0x56def5=a350_0x100f;(function(_0x95cf5b,_0x54e6b6){const _0x20d491=a350_0x100f,_0x1a0fb5=_0x95cf5b();while(!![]){try{const _0x2cf3d0=parseInt(_0x20d491(0x24e))/0x1+parseInt(_0x20d491(0x2d7))/0x2+parseInt(_0x20d491(0x2a5))/0x3+-parseInt(_0x20d491(0x270))/0x4+parseInt(_0x20d491(0x28f))/0x5*(-parseInt(_0x20d491(0x2de))/0x6)+parseInt(_0x20d491(0x2d5))/0x7*(-parseInt(_0x20d491(0x22a))/0x8)+-parseInt(_0x20d491(0x28a))/0x9*(-parseInt(_0x20d491(0x21f))/0xa);if(_0x2cf3d0===_0x54e6b6)break;else _0x1a0fb5['push'](_0x1a0fb5['shift']());}catch(_0x169108){_0x1a0fb5['push'](_0x1a0fb5['shift']());}}}(a350_0x4151,0x869bb));var __createBinding=this&&this[a350_0x56def5(0x245)]||(Object[a350_0x56def5(0x2a0)]?function(_0x41063b,_0x5ddf21,_0x5744b5,_0x349ad9){const _0x271504=a350_0x56def5;if(_0x349ad9===undefined)_0x349ad9=_0x5744b5;var _0x81c1fc=Object[_0x271504(0x2a1)](_0x5ddf21,_0x5744b5);(!_0x81c1fc||(_0x271504(0x2c1)in _0x81c1fc?!_0x5ddf21[_0x271504(0x225)]:_0x81c1fc[_0x271504(0x23c)]||_0x81c1fc[_0x271504(0x287)]))&&(_0x81c1fc={'enumerable':!![],'get':function(){return _0x5ddf21[_0x5744b5];}}),Object[_0x271504(0x2d2)](_0x41063b,_0x349ad9,_0x81c1fc);}:function(_0x3f98ab,_0x44d6c7,_0x48f4c0,_0x4e1ab7){if(_0x4e1ab7===undefined)_0x4e1ab7=_0x48f4c0;_0x3f98ab[_0x4e1ab7]=_0x44d6c7[_0x48f4c0];}),__setModuleDefault=this&&this[a350_0x56def5(0x222)]||(Object[a350_0x56def5(0x2a0)]?function(_0x50a7d8,_0x3f845f){const _0x184cce=a350_0x56def5;Object[_0x184cce(0x2d2)](_0x50a7d8,_0x184cce(0x21d),{'enumerable':!![],'value':_0x3f845f});}:function(_0x1237e2,_0x2306dd){const _0x110233=a350_0x56def5;_0x1237e2[_0x110233(0x21d)]=_0x2306dd;}),__importStar=this&&this[a350_0x56def5(0x2cc)]||(function(){const _0x6a852=(function(){let _0x55cfde=!![];return function(_0x388888,_0x4d6369){const _0x51da13=_0x55cfde?function(){const _0x56572f=a350_0x100f;if(_0x4d6369){const _0x3cb461=_0x4d6369[_0x56572f(0x293)](_0x388888,arguments);return _0x4d6369=null,_0x3cb461;}}:function(){};return _0x55cfde=![],_0x51da13;};}()),_0x54740d=_0x6a852(this,function(){const _0x356e85=a350_0x100f;return _0x54740d[_0x356e85(0x29c)]()[_0x356e85(0x247)](_0x356e85(0x20c))[_0x356e85(0x29c)]()[_0x356e85(0x2b6)](_0x54740d)[_0x356e85(0x247)](_0x356e85(0x20c));});_0x54740d();var _0x365f18=function(_0x5eac36){const _0x1a89b4=a350_0x100f;return _0x365f18=Object[_0x1a89b4(0x2c2)]||function(_0x415648){const _0x5a275d=_0x1a89b4;var _0x4c5eff=[];for(var _0x104eb9 in _0x415648)if(Object['prototype'][_0x5a275d(0x262)][_0x5a275d(0x252)](_0x415648,_0x104eb9))_0x4c5eff[_0x4c5eff[_0x5a275d(0x263)]]=_0x104eb9;return _0x4c5eff;},_0x365f18(_0x5eac36);};return function(_0x15c423){const _0x3ec567=a350_0x100f;if(_0x15c423&&_0x15c423[_0x3ec567(0x225)])return _0x15c423;var _0x2c8b10={};if(_0x15c423!=null){for(var _0x4f07cb=_0x365f18(_0x15c423),_0x5627f8=0x0;_0x5627f8<_0x4f07cb[_0x3ec567(0x263)];_0x5627f8++)if(_0x4f07cb[_0x5627f8]!=='default')__createBinding(_0x2c8b10,_0x15c423,_0x4f07cb[_0x5627f8]);}return __setModuleDefault(_0x2c8b10,_0x15c423),_0x2c8b10;};}()),__importDefault=this&&this[a350_0x56def5(0x281)]||function(_0x4fb4bc){const _0x3711f4=a350_0x56def5;return _0x4fb4bc&&_0x4fb4bc[_0x3711f4(0x225)]?_0x4fb4bc:{'default':_0x4fb4bc};};Object[a350_0x56def5(0x2d2)](exports,a350_0x56def5(0x225),{'value':!![]}),exports['campaignQueue']=exports['whatsappRestartQueue']=exports['ticketMonitor']=exports[a350_0x56def5(0x2b8)]=exports[a350_0x56def5(0x265)]=exports[a350_0x56def5(0x2ab)]=exports[a350_0x56def5(0x203)]=exports[a350_0x56def5(0x2b1)]=void 0x0,exports[a350_0x56def5(0x2a3)]=handleWhatsappAutoRestart,exports['parseToMilliseconds']=parseToMilliseconds,exports[a350_0x56def5(0x2cf)]=sleep,exports[a350_0x56def5(0x2a8)]=randomValue,exports[a350_0x56def5(0x231)]=startQueueProcess;const Sentry=__importStar(require(a350_0x56def5(0x22d))),bull_1=__importDefault(require(a350_0x56def5(0x27b))),moment_1=__importDefault(require(a350_0x56def5(0x207))),sequelize_1=require('sequelize'),lodash_1=require('lodash'),path_1=__importDefault(require(a350_0x56def5(0x28b))),cron_1=require(a350_0x56def5(0x278)),SendMessage_1=require('./helpers/SendMessage'),Whatsapp_1=__importDefault(require('./models/Whatsapp')),logger_1=require(a350_0x56def5(0x201)),Schedule_1=__importDefault(require(a350_0x56def5(0x20a))),Contact_1=__importDefault(require('./models/Contact')),GetDefaultWhatsApp_1=__importDefault(require('./helpers/GetDefaultWhatsApp')),Campaign_1=__importDefault(require(a350_0x56def5(0x260))),ContactList_1=__importDefault(require(a350_0x56def5(0x2bf))),ContactListItem_1=__importDefault(require(a350_0x56def5(0x23d))),CampaignSetting_1=__importDefault(require('./models/CampaignSetting')),CampaignShipping_1=__importDefault(require(a350_0x56def5(0x217))),GetWhatsappWbot_1=__importDefault(require('./helpers/GetWhatsappWbot')),database_1=__importDefault(require(a350_0x56def5(0x1fd))),SendWhatsAppMedia_1=require(a350_0x56def5(0x276)),socket_1=require(a350_0x56def5(0x2c8)),User_1=__importDefault(require(a350_0x56def5(0x209))),Company_1=__importDefault(require(a350_0x56def5(0x26f))),Plan_1=__importDefault(require('./models/Plan')),wbotMessageListener_1=require('./services/WbotServices/wbotMessageListener'),ShowService_1=__importDefault(require('./services/CampaignService/ShowService')),Ticket_1=__importDefault(require('./models/Ticket')),SendWhatsAppMessage_1=__importDefault(require(a350_0x56def5(0x2bb))),wbot_1=require(a350_0x56def5(0x25e)),StartWhatsAppSession_1=require(a350_0x56def5(0x292)),connection=process[a350_0x56def5(0x235)][a350_0x56def5(0x2cb)]||'',limiterMax=process[a350_0x56def5(0x235)][a350_0x56def5(0x216)]||0x1,limiterDuration=process['env'][a350_0x56def5(0x2b0)]||0xbb8;exports[a350_0x56def5(0x2b1)]=new bull_1[(a350_0x56def5(0x21d))]('UserMonitor',connection),exports[a350_0x56def5(0x203)]=new bull_1[(a350_0x56def5(0x21d))](a350_0x56def5(0x2da),connection,{'limiter':{'max':limiterMax,'duration':limiterDuration}}),exports[a350_0x56def5(0x2ab)]=new bull_1[(a350_0x56def5(0x21d))](a350_0x56def5(0x2ca),connection),exports[a350_0x56def5(0x265)]=new bull_1[(a350_0x56def5(0x21d))](a350_0x56def5(0x254),connection),exports[a350_0x56def5(0x2b8)]=new bull_1['default'](a350_0x56def5(0x238),connection);async function handleWhatsappAutoRestart(){const _0x2fba90=a350_0x56def5;try{const _0x8cd9f9=await Whatsapp_1[_0x2fba90(0x21d)][_0x2fba90(0x20f)]({'where':{'automaticRestart':!![],'status':_0x2fba90(0x230)}}),_0x2b303e=new Date();for(const _0x4a456a of _0x8cd9f9){const _0x40a7ed=_0x4a456a[_0x2fba90(0x221)]||_0x4a456a[_0x2fba90(0x297)]||_0x4a456a[_0x2fba90(0x267)];shouldRestart(_0x2b303e,_0x40a7ed,_0x4a456a[_0x2fba90(0x2aa)])&&(logger_1[_0x2fba90(0x210)]['info'](_0x2fba90(0x1ff)+_0x4a456a[_0x2fba90(0x23f)]+_0x2fba90(0x29a)+_0x4a456a['id']+_0x2fba90(0x27f)+_0x4a456a[_0x2fba90(0x2aa)]+')'),await(0x0,wbot_1['removeWbot'])(_0x4a456a['id'],![]),await new Promise(_0x17c576=>setTimeout(_0x17c576,0xbb8)),await(0x0,StartWhatsAppSession_1[_0x2fba90(0x21e)])(_0x4a456a,_0x4a456a['companyId']),await _0x4a456a['update']({'lastRestartAt':new Date()}));}}catch(_0x299386){logger_1[_0x2fba90(0x210)]['error'](_0x2fba90(0x271)+_0x299386[_0x2fba90(0x220)]);}}exports['ticketMonitor']=new bull_1[(a350_0x56def5(0x21d))](a350_0x56def5(0x2b7),connection),exports[a350_0x56def5(0x282)]=new bull_1[(a350_0x56def5(0x21d))]('WhatsappRestartQueue',connection);function shouldRestart(_0x1668a7,_0x27459c,_0x3e46f5){const _0x5a8d0c=a350_0x56def5;if(_0x3e46f5==='diariamente')return(0x0,moment_1[_0x5a8d0c(0x21d)])(_0x1668a7)[_0x5a8d0c(0x294)]((0x0,moment_1[_0x5a8d0c(0x21d)])(_0x27459c),_0x5a8d0c(0x1f9))>=0x1;if(_0x3e46f5==='semanalmente')return(0x0,moment_1[_0x5a8d0c(0x21d)])(_0x1668a7)[_0x5a8d0c(0x294)]((0x0,moment_1[_0x5a8d0c(0x21d)])(_0x27459c),_0x5a8d0c(0x2cd))>=0x1;if(_0x3e46f5===_0x5a8d0c(0x24d))return(0x0,moment_1[_0x5a8d0c(0x21d)])(_0x1668a7)['diff']((0x0,moment_1[_0x5a8d0c(0x21d)])(_0x27459c),_0x5a8d0c(0x277))>=0x1;return![];}async function handleVerifyTicketExpiration(){const _0x321439=a350_0x56def5;try{const _0x18efc5=await database_1[_0x321439(0x21d)][_0x321439(0x291)](_0x321439(0x2bd),{'type':sequelize_1[_0x321439(0x1fa)]['SELECT']});for(const _0x18dec2 of _0x18efc5){let _0x2faad3={};_0x18dec2[_0x321439(0x2d9)]===_0x321439(0x22b)&&(_0x2faad3={'fromMe':!![]});if(_0x18dec2[_0x321439(0x206)]>0x0&&_0x18dec2['inactiveMessage']){const _0x3514ef=_0x18dec2['expiresTicket']-_0x18dec2[_0x321439(0x206)];if(_0x3514ef>0x0){const _0x22a3b8=await Ticket_1[_0x321439(0x21d)][_0x321439(0x20f)]({'where':{'status':_0x321439(0x290),'whatsappId':_0x18dec2['id'],'companyId':_0x18dec2[_0x321439(0x26e)],'ticketsWithWarning':![],..._0x2faad3,'updatedAt':{[sequelize_1['Op']['lt']]:(0x0,moment_1['default'])()['subtract'](_0x3514ef,'minutes')[_0x321439(0x2c7)](),[sequelize_1['Op']['gt']]:(0x0,moment_1[_0x321439(0x21d)])()['subtract'](_0x18dec2[_0x321439(0x275)],_0x321439(0x286))[_0x321439(0x2c7)]()}},'include':[{'model':Contact_1[_0x321439(0x21d)],'as':_0x321439(0x200)}]});for(const _0x460489 of _0x22a3b8){try{await(0x0,SendWhatsAppMessage_1[_0x321439(0x21d)])({'ticket':_0x460489,'body':_0x18dec2[_0x321439(0x24f)]}),await Ticket_1[_0x321439(0x21d)][_0x321439(0x24a)]({'ticketsWithWarning':!![]},{'where':{'id':_0x460489['id']},'silent':!![]}),logger_1['logger'][_0x321439(0x229)](_0x321439(0x224)+_0x460489['id']);}catch(_0x246864){Sentry[_0x321439(0x2db)](_0x246864),logger_1[_0x321439(0x210)][_0x321439(0x253)](_0x321439(0x280)+_0x246864[_0x321439(0x220)]);}}}}const _0x17761b=await Ticket_1[_0x321439(0x21d)]['findAll']({'where':{'status':_0x321439(0x290),'whatsappId':_0x18dec2['id'],'companyId':_0x18dec2['companyId'],..._0x2faad3,'updatedAt':{[sequelize_1['Op']['lt']]:(0x0,moment_1[_0x321439(0x21d)])()['subtract'](_0x18dec2['expiresTicket'],_0x321439(0x286))[_0x321439(0x2c7)]()}},'include':[{'model':Contact_1['default'],'as':'contact'}]});for(const _0x4ea29d of _0x17761b){try{_0x18dec2[_0x321439(0x239)]&&(await(0x0,SendWhatsAppMessage_1[_0x321439(0x21d)])({'ticket':_0x4ea29d,'body':_0x18dec2[_0x321439(0x239)]}),await new Promise(_0x3a2124=>setTimeout(_0x3a2124,0x3e8)));await _0x4ea29d[_0x321439(0x24a)]({'status':_0x321439(0x2af),'amountUsedBotQueues':0x0,'ticketsWithWarning':![]});const _0x3cc279=(0x0,socket_1[_0x321439(0x2a7)])();_0x3cc279['to'](_0x321439(0x20b)+_0x4ea29d[_0x321439(0x26e)]+_0x321439(0x296))['to'](_0x321439(0x2ad)+_0x4ea29d[_0x321439(0x234)]+'-open')[_0x321439(0x264)]('company-'+_0x4ea29d[_0x321439(0x26e)]+'-ticket',{'action':_0x321439(0x24a),'ticket':{..._0x4ea29d[_0x321439(0x2d3)],'status':_0x321439(0x2af)}}),_0x3cc279['to'](_0x321439(0x20b)+_0x4ea29d[_0x321439(0x26e)]+_0x321439(0x269))[_0x321439(0x264)](_0x321439(0x20b)+_0x4ea29d[_0x321439(0x26e)]+_0x321439(0x27e),{'action':_0x321439(0x24a),'ticket':{..._0x4ea29d[_0x321439(0x2d3)],'status':_0x321439(0x2af)}}),logger_1['logger'][_0x321439(0x229)]('Ticket\x20#'+_0x4ea29d['id']+_0x321439(0x208)+_0x18dec2[_0x321439(0x275)]+_0x321439(0x213));}catch(_0x34f1f3){Sentry[_0x321439(0x2db)](_0x34f1f3),logger_1['logger']['error']({'error':_0x34f1f3},_0x321439(0x23a));}}_0x17761b[_0x321439(0x263)]>0x0&&logger_1['logger'][_0x321439(0x229)](_0x17761b[_0x321439(0x263)]+_0x321439(0x2ce)+_0x18dec2[_0x321439(0x26e)]);}}catch(_0x50fd28){Sentry['captureException'](_0x50fd28),logger_1[_0x321439(0x210)]['error']({'error':_0x50fd28},_0x321439(0x256));}}exports[a350_0x56def5(0x24c)]=new bull_1['default']('CampaignQueue',connection);async function handleSendMessage(_0x5b4cb4){const _0x485592=a350_0x56def5;try{const {data:_0x503722}=_0x5b4cb4,_0x4b89ef=await Whatsapp_1[_0x485592(0x21d)]['findByPk'](_0x503722[_0x485592(0x259)]);if(_0x4b89ef==null)throw Error(_0x485592(0x1fe));const _0x402362=_0x503722[_0x485592(0x2d4)];await(0x0,SendMessage_1[_0x485592(0x284)])(_0x4b89ef,_0x402362);}catch(_0x31dbe6){Sentry[_0x485592(0x2db)](_0x31dbe6),logger_1[_0x485592(0x210)]['error']({'error':_0x31dbe6},_0x485592(0x2a2));throw _0x31dbe6;}}async function handleVerifySchedules(){const _0x230fc1=a350_0x56def5;try{const {count:_0x3d4fac,rows:_0x247301}=await Schedule_1[_0x230fc1(0x21d)][_0x230fc1(0x1f8)]({'where':{'status':'PENDENTE','sentAt':null,'sendAt':{[sequelize_1['Op']['gte']]:(0x0,moment_1['default'])()[_0x230fc1(0x2b2)](_0x230fc1(0x219)),[sequelize_1['Op']['lte']]:(0x0,moment_1[_0x230fc1(0x21d)])()[_0x230fc1(0x2d8)]('30','seconds')[_0x230fc1(0x2b2)](_0x230fc1(0x219))}},'include':[{'model':Contact_1[_0x230fc1(0x21d)],'as':_0x230fc1(0x200)}]});_0x3d4fac>0x0&&_0x247301[_0x230fc1(0x243)](async _0x6f815c=>{const _0x4b948a=_0x230fc1;await _0x6f815c['update']({'status':_0x4b948a(0x226)}),exports[_0x4b948a(0x265)][_0x4b948a(0x2d8)](_0x4b948a(0x284),{'schedule':_0x6f815c},{'delay':0x9c40}),logger_1[_0x4b948a(0x210)]['info']('Disparo\x20agendado\x20para:\x20'+_0x6f815c[_0x4b948a(0x200)][_0x4b948a(0x23f)]);});}catch(_0x5b7d38){Sentry['captureException'](_0x5b7d38),logger_1[_0x230fc1(0x210)][_0x230fc1(0x253)]({'error':_0x5b7d38},_0x230fc1(0x2d6));throw _0x5b7d38;}}async function handleSendScheduledMessage(_0x17477b){const _0x1004d1=a350_0x56def5,{data:{schedule:_0x104809}}=_0x17477b;let _0x4612fe=null;try{_0x4612fe=await Schedule_1[_0x1004d1(0x21d)]['findByPk'](_0x104809['id']);}catch(_0x8ea20d){Sentry[_0x1004d1(0x2db)](_0x8ea20d),logger_1[_0x1004d1(0x210)]['info'](_0x1004d1(0x23b)+_0x104809['id']);}try{const _0x397fe7=await(0x0,GetDefaultWhatsApp_1[_0x1004d1(0x21d)])(_0x104809[_0x1004d1(0x26e)]),_0x5e9f1b=await(0x0,SendMessage_1[_0x1004d1(0x284)])(_0x397fe7,{'number':_0x104809['contact'][_0x1004d1(0x2c3)],'body':_0x104809[_0x1004d1(0x223)]});_0x104809['saveMessage']&&(0x0,wbotMessageListener_1[_0x1004d1(0x242)])(_0x5e9f1b,await(0x0,GetWhatsappWbot_1[_0x1004d1(0x21d)])(_0x397fe7),_0x104809[_0x1004d1(0x26e)]),await _0x4612fe?.['update']({'sentAt':new Date(),'status':_0x1004d1(0x22f)}),logger_1[_0x1004d1(0x210)][_0x1004d1(0x229)](_0x1004d1(0x26d)+_0x104809[_0x1004d1(0x200)]['name']),exports[_0x1004d1(0x265)][_0x1004d1(0x1fb)](0x3a98,_0x1004d1(0x257));}catch(_0x3def23){Sentry[_0x1004d1(0x2db)](_0x3def23),await _0x4612fe?.[_0x1004d1(0x24a)]({'status':'ERRO'}),logger_1[_0x1004d1(0x210)][_0x1004d1(0x253)]({'error':_0x3def23},_0x1004d1(0x22e));throw _0x3def23;}}async function handleVerifyCampaigns(){const _0xc03188=a350_0x56def5,_0x5d8016=await database_1[_0xc03188(0x21d)][_0xc03188(0x291)](_0xc03188(0x250),{'type':sequelize_1['QueryTypes']['SELECT']});_0x5d8016[_0xc03188(0x263)]&&logger_1[_0xc03188(0x210)][_0xc03188(0x229)](_0xc03188(0x2a6)+_0x5d8016['length']),_0x5d8016[_0xc03188(0x258)](_0x4813d2=>{const _0x4f17d6=_0xc03188;try{const _0x10072c=(0x0,moment_1[_0x4f17d6(0x21d)])(),_0x3a9947=(0x0,moment_1['default'])(_0x4813d2[_0x4f17d6(0x289)]),_0x34fa54=_0x3a9947[_0x4f17d6(0x294)](_0x10072c,_0x4f17d6(0x20e));logger_1['logger'][_0x4f17d6(0x229)](_0x4f17d6(0x27c)+_0x4813d2['id']+_0x4f17d6(0x21a)+_0x34fa54),exports[_0x4f17d6(0x24c)][_0x4f17d6(0x2d8)](_0x4f17d6(0x205),{'id':_0x4813d2['id'],'delay':_0x34fa54},{'removeOnComplete':!![]});}catch(_0x379385){Sentry[_0x4f17d6(0x2db)](_0x379385);}});}async function getCampaign(_0x12f890){const _0x54ea5a=a350_0x56def5;return Campaign_1[_0x54ea5a(0x21d)][_0x54ea5a(0x288)](_0x12f890,{'include':[{'model':ContactList_1[_0x54ea5a(0x21d)],'as':'contactList','attributes':['id','name'],'include':[{'model':ContactListItem_1['default'],'as':_0x54ea5a(0x21c),'attributes':['id',_0x54ea5a(0x23f),_0x54ea5a(0x2c3),_0x54ea5a(0x274),_0x54ea5a(0x2b9)],'where':{'isWhatsappValid':!![]}}]},{'model':Whatsapp_1['default'],'as':_0x54ea5a(0x255),'attributes':['id','name']},{'model':CampaignShipping_1['default'],'as':_0x54ea5a(0x249),'include':[{'model':ContactListItem_1[_0x54ea5a(0x21d)],'as':_0x54ea5a(0x200)}]}]});}async function getSettings(_0x1d971f){const _0x159db0=a350_0x56def5,_0x2508a1=await CampaignSetting_1['default']['findAll']({'where':{'companyId':_0x1d971f[_0x159db0(0x26e)]},'attributes':[_0x159db0(0x28d),_0x159db0(0x215)]});let _0x45bd83=0x14,_0xb368f3=0x14,_0x3365ee=0x3c,_0x1d4036=[];return _0x2508a1['forEach'](_0x5b5e49=>{const _0x2ef3fd=_0x159db0;_0x5b5e49[_0x2ef3fd(0x28d)]==='messageInterval'&&(_0x45bd83=JSON[_0x2ef3fd(0x22c)](_0x5b5e49[_0x2ef3fd(0x215)])),_0x5b5e49[_0x2ef3fd(0x28d)]==='longerIntervalAfter'&&(_0xb368f3=JSON['parse'](_0x5b5e49['value'])),_0x5b5e49['key']==='greaterInterval'&&(_0x3365ee=JSON[_0x2ef3fd(0x22c)](_0x5b5e49[_0x2ef3fd(0x215)])),_0x5b5e49[_0x2ef3fd(0x28d)]==='variables'&&(_0x1d4036=JSON[_0x2ef3fd(0x22c)](_0x5b5e49['value']));}),{'messageInterval':_0x45bd83,'longerIntervalAfter':_0xb368f3,'greaterInterval':_0x3365ee,'variables':_0x1d4036};}function parseToMilliseconds(_0x2ea476){return _0x2ea476*0x3e8;}async function sleep(_0x39815a){const _0x712af2=a350_0x56def5;return logger_1[_0x712af2(0x210)][_0x712af2(0x229)]('Sleep\x20de\x20'+_0x39815a+_0x712af2(0x29f)+(0x0,moment_1[_0x712af2(0x21d)])()[_0x712af2(0x2b2)](_0x712af2(0x232))),new Promise(_0x4c58f8=>{setTimeout(()=>{const _0x5dd313=a350_0x100f;logger_1['logger'][_0x5dd313(0x229)]('Sleep\x20de\x20'+_0x39815a+_0x5dd313(0x25c)+(0x0,moment_1['default'])()[_0x5dd313(0x2b2)]('HH:mm:ss')),_0x4c58f8(!![]);},parseToMilliseconds(_0x39815a));});}function getCampaignValidMessages(_0x343536){const _0x24c365=a350_0x56def5,_0x15a33a=[];return!(0x0,lodash_1[_0x24c365(0x2ae)])(_0x343536['message1'])&&!(0x0,lodash_1[_0x24c365(0x25f)])(_0x343536[_0x24c365(0x29d)])&&_0x15a33a['push'](_0x343536[_0x24c365(0x29d)]),!(0x0,lodash_1[_0x24c365(0x2ae)])(_0x343536[_0x24c365(0x1f5)])&&!(0x0,lodash_1['isNil'])(_0x343536[_0x24c365(0x1f5)])&&_0x15a33a['push'](_0x343536[_0x24c365(0x1f5)]),!(0x0,lodash_1[_0x24c365(0x2ae)])(_0x343536[_0x24c365(0x233)])&&!(0x0,lodash_1[_0x24c365(0x25f)])(_0x343536['message3'])&&_0x15a33a[_0x24c365(0x26b)](_0x343536[_0x24c365(0x233)]),!(0x0,lodash_1[_0x24c365(0x2ae)])(_0x343536[_0x24c365(0x23e)])&&!(0x0,lodash_1['isNil'])(_0x343536[_0x24c365(0x23e)])&&_0x15a33a['push'](_0x343536[_0x24c365(0x23e)]),!(0x0,lodash_1['isEmpty'])(_0x343536['message5'])&&!(0x0,lodash_1[_0x24c365(0x25f)])(_0x343536[_0x24c365(0x2dd)])&&_0x15a33a[_0x24c365(0x26b)](_0x343536[_0x24c365(0x2dd)]),_0x15a33a;}function getCampaignValidConfirmationMessages(_0x44200d){const _0x3b9b37=a350_0x56def5,_0x485156=[];return!(0x0,lodash_1[_0x3b9b37(0x2ae)])(_0x44200d['confirmationMessage1'])&&!(0x0,lodash_1[_0x3b9b37(0x25f)])(_0x44200d[_0x3b9b37(0x266)])&&_0x485156[_0x3b9b37(0x26b)](_0x44200d[_0x3b9b37(0x266)]),!(0x0,lodash_1[_0x3b9b37(0x2ae)])(_0x44200d['confirmationMessage2'])&&!(0x0,lodash_1['isNil'])(_0x44200d[_0x3b9b37(0x2c4)])&&_0x485156[_0x3b9b37(0x26b)](_0x44200d['confirmationMessage2']),!(0x0,lodash_1[_0x3b9b37(0x2ae)])(_0x44200d[_0x3b9b37(0x1fc)])&&!(0x0,lodash_1[_0x3b9b37(0x25f)])(_0x44200d[_0x3b9b37(0x1fc)])&&_0x485156[_0x3b9b37(0x26b)](_0x44200d[_0x3b9b37(0x1fc)]),!(0x0,lodash_1[_0x3b9b37(0x2ae)])(_0x44200d[_0x3b9b37(0x202)])&&!(0x0,lodash_1[_0x3b9b37(0x25f)])(_0x44200d[_0x3b9b37(0x202)])&&_0x485156[_0x3b9b37(0x26b)](_0x44200d[_0x3b9b37(0x202)]),!(0x0,lodash_1[_0x3b9b37(0x2ae)])(_0x44200d[_0x3b9b37(0x25d)])&&!(0x0,lodash_1['isNil'])(_0x44200d[_0x3b9b37(0x25d)])&&_0x485156[_0x3b9b37(0x26b)](_0x44200d[_0x3b9b37(0x25d)]),_0x485156;}function getProcessedMessage(_0x124258,_0x3e1d6d,_0x528d23){const _0x3421b1=a350_0x56def5;let _0x31ce52=_0x124258;return _0x31ce52[_0x3421b1(0x2b5)](_0x3421b1(0x26c))&&(_0x31ce52=_0x31ce52[_0x3421b1(0x251)](/{nome}/g,_0x528d23['name'])),_0x31ce52['includes'](_0x3421b1(0x240))&&(_0x31ce52=_0x31ce52[_0x3421b1(0x251)](/{email}/g,_0x528d23['email'])),_0x31ce52['includes'](_0x3421b1(0x2ac))&&(_0x31ce52=_0x31ce52['replace'](/{numero}/g,_0x528d23[_0x3421b1(0x2c3)])),_0x3e1d6d[_0x3421b1(0x258)](_0x126aaf=>{const _0x210c5f=_0x3421b1;if(_0x31ce52['includes']('{'+_0x126aaf[_0x210c5f(0x28d)]+'}')){const _0x505c41=new RegExp('{'+_0x126aaf[_0x210c5f(0x28d)]+'}','g');_0x31ce52=_0x31ce52[_0x210c5f(0x251)](_0x505c41,_0x126aaf['value']);}}),_0x31ce52;}function randomValue(_0x14abd5,_0x233712){const _0x58fb1a=a350_0x56def5;return Math[_0x58fb1a(0x211)](Math[_0x58fb1a(0x228)]()*_0x233712)+_0x14abd5;}async function verifyAndFinalizeCampaign(_0x5abefa){const _0x1f43fa=a350_0x56def5,_0x36d10c=await(0x0,ShowService_1[_0x1f43fa(0x21d)])(_0x5abefa['id']);_0x36d10c[_0x1f43fa(0x214)]===_0x36d10c[_0x1f43fa(0x25a)]&&await _0x5abefa[_0x1f43fa(0x24a)]({'status':_0x1f43fa(0x268),'completedAt':(0x0,moment_1[_0x1f43fa(0x21d)])()});const _0x47951d=(0x0,socket_1[_0x1f43fa(0x2a7)])();_0x47951d[_0x1f43fa(0x264)](_0x1f43fa(0x20b)+_0x5abefa[_0x1f43fa(0x26e)]+'-campaign',_0x36d10c);}async function prepareContact(_0x2eeba9,_0xfcb8e4,_0x167e5c,_0x22e3c1,_0x12290e,_0xb5de49){const _0x63cf76=a350_0x56def5,_0x55c03a={};_0x55c03a[_0x63cf76(0x2c3)]=_0x167e5c[_0x63cf76(0x2c3)],_0x55c03a[_0x63cf76(0x1f6)]=_0x167e5c['id'],_0x55c03a[_0x63cf76(0x28c)]=_0x2eeba9['id'];if(_0x12290e[_0x63cf76(0x263)]){const _0x201d88=randomValue(0x0,_0x12290e[_0x63cf76(0x263)]),_0x1c114d=getProcessedMessage(_0x12290e[_0x201d88],_0xfcb8e4,_0x167e5c);_0x55c03a[_0x63cf76(0x220)]=''+_0x1c114d;}if(_0x2eeba9[_0x63cf76(0x27d)]){if(_0xb5de49[_0x63cf76(0x263)]){const _0x2f7002=randomValue(0x0,_0xb5de49['length']),_0x2af5fb=getProcessedMessage(_0xb5de49[_0x2f7002],_0xfcb8e4,_0x167e5c);_0x55c03a['confirmationMessage']=''+_0x2af5fb;}}const [_0x155c39,_0x5a334e]=await CampaignShipping_1[_0x63cf76(0x21d)]['findOrCreate']({'where':{'campaignId':_0x55c03a[_0x63cf76(0x28c)],'contactId':_0x55c03a[_0x63cf76(0x1f6)]},'defaults':_0x55c03a});!_0x5a334e&&_0x155c39[_0x63cf76(0x25b)]===null&&_0x155c39[_0x63cf76(0x236)]===null&&(_0x155c39['set'](_0x55c03a),await _0x155c39['save']());if(_0x155c39['deliveredAt']===null&&_0x155c39[_0x63cf76(0x236)]===null){const _0x1fd2b3=await exports[_0x63cf76(0x24c)][_0x63cf76(0x2d8)](_0x63cf76(0x244),{'campaignId':_0x2eeba9['id'],'campaignShippingId':_0x155c39['id'],'contactListItemId':_0x167e5c['id']},{'delay':_0x22e3c1});await _0x155c39['update']({'jobId':''+_0x1fd2b3['id']});}}async function handleProcessCampaign(_0x330515){const _0x2a71ba=a350_0x56def5;try{const {id:_0xbeced}=_0x330515['data'];let {delay:_0x85cc13}=_0x330515['data'];const _0x5b74cb=await getCampaign(_0xbeced),_0x54723b=await getSettings(_0x5b74cb);if(_0x5b74cb){const {contacts:_0x34f25b}=_0x5b74cb[_0x2a71ba(0x212)],_0x110cb4=getCampaignValidMessages(_0x5b74cb),_0x21153c=_0x5b74cb[_0x2a71ba(0x27d)]?getCampaignValidConfirmationMessages(_0x5b74cb):null;if((0x0,lodash_1[_0x2a71ba(0x279)])(_0x34f25b)){let _0x2f60a1=0x0;_0x34f25b['forEach'](_0x60be84=>{const _0x239454=_0x2a71ba;prepareContact(_0x5b74cb,_0x54723b[_0x239454(0x2c5)],_0x60be84,_0x85cc13,_0x110cb4,_0x21153c)[_0x239454(0x2a4)](()=>{const _0x128526=_0x239454;logger_1[_0x128526(0x210)][_0x128526(0x229)](_0x128526(0x227)+_0x5b74cb['id']+_0x128526(0x273)+_0x60be84[_0x128526(0x23f)]+';Delay='+_0x85cc13);}),_0x2f60a1+=0x1,_0x2f60a1%_0x54723b[_0x239454(0x2bc)]===0x0?_0x85cc13+=parseToMilliseconds(_0x54723b['greaterInterval']):_0x85cc13+=parseToMilliseconds(randomValue(0x0,_0x54723b[_0x239454(0x204)]));}),await _0x5b74cb[_0x2a71ba(0x24a)]({'status':_0x2a71ba(0x2c6)});}}}catch(_0x44f1b2){Sentry[_0x2a71ba(0x2db)](_0x44f1b2);}}async function handleDispatchCampaign(_0x2ae359){const _0x113907=a350_0x56def5;try{const {data:_0x20225e}=_0x2ae359,{campaignShippingId:_0x41e883,campaignId:_0x4b3693}=_0x20225e,_0x46a723=await Campaign_1[_0x113907(0x21d)][_0x113907(0x288)](_0x4b3693,{'include':[{'model':Whatsapp_1[_0x113907(0x21d)],'as':_0x113907(0x255)}]});if(!_0x46a723){logger_1[_0x113907(0x210)][_0x113907(0x253)]({'data':_0x20225e},_0x113907(0x283));return;}const _0x326833=await(0x0,GetWhatsappWbot_1['default'])(_0x46a723[_0x113907(0x255)]);logger_1['logger'][_0x113907(0x229)](_0x113907(0x24b)+_0x4b3693+';Registro='+_0x41e883);const _0x16297a=await CampaignShipping_1['default'][_0x113907(0x288)](_0x41e883,{'include':[{'model':ContactListItem_1[_0x113907(0x21d)],'as':_0x113907(0x200)}]}),_0x4eec81=_0x16297a[_0x113907(0x2c3)]+_0x113907(0x299);if(_0x46a723['confirmation']&&_0x16297a['confirmation']===null)await _0x326833['sendMessage'](_0x4eec81,{'text':_0x16297a['confirmationMessage']}),await _0x16297a[_0x113907(0x24a)]({'confirmationRequestedAt':(0x0,moment_1[_0x113907(0x21d)])()});else{await _0x326833[_0x113907(0x2d1)](_0x4eec81,{'text':_0x16297a[_0x113907(0x220)]});if(_0x46a723['mediaPath']){const _0x374f73=path_1[_0x113907(0x21d)]['resolve'](_0x113907(0x20d),_0x46a723['mediaPath']),_0x4bd8f8=await(0x0,SendWhatsAppMedia_1[_0x113907(0x26a)])(_0x46a723[_0x113907(0x237)],_0x374f73);Object[_0x113907(0x2c0)](_0x4bd8f8)[_0x113907(0x263)]&&await _0x326833[_0x113907(0x2d1)](_0x4eec81,{..._0x4bd8f8});}await _0x16297a[_0x113907(0x24a)]({'deliveredAt':(0x0,moment_1[_0x113907(0x21d)])()});}await verifyAndFinalizeCampaign(_0x46a723);const _0x38a003=(0x0,socket_1[_0x113907(0x2a7)])();_0x38a003[_0x113907(0x264)](_0x113907(0x20b)+_0x46a723[_0x113907(0x26e)]+'-campaign',{'action':_0x113907(0x24a),'record':_0x46a723}),logger_1[_0x113907(0x210)]['info']('Campanha\x20enviada\x20para:\x20Campanha='+_0x4b3693+_0x113907(0x273)+_0x16297a[_0x113907(0x200)][_0x113907(0x23f)]);}catch(_0x308217){Sentry['captureException'](_0x308217),logger_1['logger'][_0x113907(0x253)](_0x308217['message']);}}function a350_0x4151(){const _0x25b3cc=['map','DispatchCampaign','__createBinding','Iniciando\x20processamento\x20de\x20filas','search','yyyy-MM-DD','shipping','update','Disparo\x20de\x20campanha\x20solicitado:\x20Campanha=','campaignQueue','mensalmente','335596SWIqHk','inactiveMessage','select\x20id,\x20\x22scheduledAt\x22\x20from\x20\x22Campaigns\x22\x20c\x0a\x20\x20\x20\x20where\x20\x22scheduledAt\x22\x20between\x20now()\x20and\x20now()\x20+\x20\x271\x20hour\x27::interval\x20and\x20status\x20=\x20\x27PROGRAMADA\x27','replace','call','error','SendSacheduledMessages','whatsapp','TicketMonitor\x20->\x20VerifyTicketExpiration:\x20erro','completed','forEach','whatsappId','delivered','deliveredAt','\x20segundos\x20finalizado:\x20','confirmationMessage5','./libs/wbot','isNil','./models/Campaign','*\x20*\x20*\x20*\x20*','hasOwnProperty','length','emit','sendScheduledMessages','confirmationMessage1','createdAt','FINALIZADA','-closed','getMessageOptions','push','{nome}','Mensagem\x20agendada\x20enviada\x20para:\x20','companyId','./models/Company','83972ziMmro','Erro\x20ao\x20reiniciar\x20conexões\x20WhatsApp\x20periodicamente:\x20','DD/MM/yyyy',';Contato=','email','expiresTicket','./services/WbotServices/SendWhatsAppMedia','months','cron','isArray','asDays','bull','Campanha\x20enviada\x20para\x20a\x20fila\x20de\x20processamento:\x20Campanha=','confirmation','-ticket',')\x20de\x20acordo\x20com\x20o\x20período\x20(','Erro\x20ao\x20enviar\x20aviso\x20de\x20inatividade:\x20','__importDefault','whatsappRestartQueue','Campaign\x20not\x20found','SendMessage','Verify','minutes','configurable','findByPk','scheduledAt','9PwxSfv','path','campaignId','key','AutoRestart','5CclhdY','open','query','./services/WbotServices/StartWhatsAppSession','apply','diff','Usuário\x20passado\x20para\x20offline:\x20','-open','updatedAt','process','@s.whatsapp.net','\x20(ID:\x20','\x27,\x20','toString','message1','CronJob','\x20segundos\x20iniciado:\x20','create','getOwnPropertyDescriptor','MessageQueue\x20->\x20SendMessage:\x20error','handleWhatsappAutoRestart','then','1336083RpcuVD','Campanhas\x20encontradas:\x20','getIO','randomValue','VerifyTicketExpiration','period','scheduleMonitor','{numero}','queue-','isEmpty','closed','REDIS_OPT_LIMITER_DURATION','userMonitor','format','\x20AND\x20\x22dueDate\x22::text\x20LIKE\x20\x27','0\x20*\x20*\x20*\x20*','includes','constructor','TicketMonitor','ticketInactiveWarningQueue','isWhatsappValid','SELECT\x20COUNT(*)\x20mycount\x20FROM\x20\x22Invoices\x22\x20WHERE\x20\x22companyId\x22\x20=\x20','./services/WbotServices/SendWhatsAppMessage','longerIntervalAfter','SELECT\x20id,\x20\x22expiresTicket\x22,\x20\x22companyId\x22,\x20\x22whenExpireTicket\x22,\x0a\x20\x20\x20\x22expiresInactiveMessage\x22,\x20\x22inactiveMessage\x22,\x20\x22inactiveMessageTime\x22\x0a\x20\x20\x20FROM\x20\x22Whatsapps\x22\x20WHERE\x20\x22expiresTicket\x22\x20>\x200','VerifyCampaignsDaatabase','./models/ContactList','keys','get','getOwnPropertyNames','number','confirmationMessage2','variables','EM_ANDAMENTO','toDate','./libs/socket','VerifyLoginStatus','ScheduleMonitor','REDIS_URI','__importStar','weeks','\x20tickets\x20fechados\x20por\x20inatividade\x20para\x20a\x20empresa\x20','sleep','SELECT','sendMessage','defineProperty','dataValues','data','6909098jVRZBW','SendScheduledMessage\x20->\x20Verify:\x20error','732238UIPfFH','add','whenExpireTicket','MessageQueue','captureException','DispatchConfirmedCampaign','message5','5527806UfxMKm','duration','message2','contactId','0\x20*\x20*\x20*\x20*\x20*','findAndCountAll','days','QueryTypes','clean','confirmationMessage3','./database','Whatsapp\x20não\x20identificado','Reiniciando\x20conexão\x20WhatsApp\x20','contact','./utils/logger','confirmationMessage4','messageQueue','messageInterval','ProcessCampaign','inactiveMessageTime','moment','\x20fechado\x20por\x20inatividade\x20após\x20','./models/User','./models/Schedule','company-','(((.+)+)+)+$','public','milliseconds','findAll','logger','floor','contactList','\x20minutos.','valids','value','REDIS_OPT_LIMITER_MAX','./models/CampaignShipping','ticketMonitor','YYYY-MM-DD\x20HH:mm:ss',',\x20Delay\x20Inicial=','\x27,\x20\x27','contacts','default','StartWhatsAppSession','13335870fBaeAy','message','lastRestartAt','__setModuleDefault','body','Aviso\x20de\x20inatividade\x20enviado\x20para\x20o\x20ticket\x20#','__esModule','AGENDADA','Registro\x20enviado\x20pra\x20fila\x20de\x20disparo:\x20Campanha=','random','info','8YQONlK','agent','parse','@sentry/node','SendScheduledMessage\x20->\x20SendMessage:\x20error','ENVIADA','CONNECTED','startQueueProcess','HH:mm:ss','message3','queueId','env','confirmationRequestedAt','mediaName','TicketInactiveWarning','expiresInactiveMessage','Erro\x20ao\x20fechar\x20ticket\x20por\x20inatividade','Erro\x20ao\x20tentar\x20consultar\x20agendamento:\x20','writable','./models/ContactListItem','message4','name','{email}','%\x27;','handleMessage'];a350_0x4151=function(){return _0x25b3cc;};return a350_0x4151();}async function handleLoginStatus(){const _0x3a29fe=a350_0x56def5,_0x2039e0=await database_1[_0x3a29fe(0x21d)][_0x3a29fe(0x291)]('select\x20id\x20from\x20\x22Users\x22\x20where\x20\x22updatedAt\x22\x20<\x20now()\x20-\x20\x275\x20minutes\x27::interval\x20and\x20online\x20=\x20true',{'type':sequelize_1['QueryTypes']['SELECT']});_0x2039e0[_0x3a29fe(0x258)](async _0xe5e153=>{const _0x166a2d=_0x3a29fe;try{const _0x2783a8=await User_1[_0x166a2d(0x21d)]['findByPk'](_0xe5e153['id']);await _0x2783a8[_0x166a2d(0x24a)]({'online':![]}),logger_1['logger'][_0x166a2d(0x229)](_0x166a2d(0x295)+_0xe5e153['id']);}catch(_0x2912fb){Sentry[_0x166a2d(0x2db)](_0x2912fb);}});}function a350_0x100f(_0x37aff3,_0x41fa7b){const _0x21863d=a350_0x4151();return a350_0x100f=function(_0x491531,_0x486606){_0x491531=_0x491531-0x1f4;let _0x4151e1=_0x21863d[_0x491531];return _0x4151e1;},a350_0x100f(_0x37aff3,_0x41fa7b);}async function handleInvoiceCreate(){const _0x3e7ef5=a350_0x56def5,_0x36333f=new cron_1[(_0x3e7ef5(0x29e))](_0x3e7ef5(0x1f7),async()=>{const _0x272770=_0x3e7ef5,_0x2bb95d=await Company_1[_0x272770(0x21d)]['findAll']();_0x2bb95d['map'](async _0x11c5f4=>{const _0x317e19=_0x272770,{dueDate:_0x102b83}=_0x11c5f4,_0x33a395=(0x0,moment_1[_0x317e19(0x21d)])(_0x102b83)[_0x317e19(0x2b2)](),_0x53a7c7=(0x0,moment_1['default'])()[_0x317e19(0x2b2)](),_0x1b0ecc=(0x0,moment_1[_0x317e19(0x21d)])((0x0,moment_1[_0x317e19(0x21d)])())[_0x317e19(0x2b2)](_0x317e19(0x272)),_0x4bbc61=(0x0,moment_1['default'])(_0x102b83)[_0x317e19(0x2b2)](_0x317e19(0x272)),_0x10961d=(0x0,moment_1['default'])(_0x4bbc61,_0x317e19(0x272))['diff']((0x0,moment_1['default'])(_0x1b0ecc,_0x317e19(0x272))),_0x1e99d0=moment_1[_0x317e19(0x21d)][_0x317e19(0x1f4)](_0x10961d)[_0x317e19(0x27a)]();if(_0x1e99d0<0x14){const _0x55b9f6=await Plan_1[_0x317e19(0x21d)][_0x317e19(0x288)](_0x11c5f4['planId']),_0x20497b=_0x317e19(0x2ba)+_0x11c5f4['id']+_0x317e19(0x2b3)+(0x0,moment_1['default'])(_0x102b83)[_0x317e19(0x2b2)](_0x317e19(0x248))+_0x317e19(0x241),_0x17e6dd=await database_1[_0x317e19(0x21d)][_0x317e19(0x291)](_0x20497b,{'type':sequelize_1[_0x317e19(0x1fa)][_0x317e19(0x2d0)]});if(+_0x17e6dd[0x0]['mycount']===0x0){const _0x1c6424='INSERT\x20INTO\x20\x22Invoices\x22\x20(detail,\x20status,\x20value,\x20\x22updatedAt\x22,\x20\x22createdAt\x22,\x20\x22dueDate\x22,\x20\x22companyId\x22)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(\x27'+_0x55b9f6['name']+'\x27,\x20\x27open\x27,\x20\x27'+_0x55b9f6[_0x317e19(0x215)]+_0x317e19(0x21b)+_0x53a7c7+_0x317e19(0x21b)+_0x53a7c7+_0x317e19(0x21b)+_0x33a395+_0x317e19(0x29b)+_0x11c5f4['id']+');';await database_1[_0x317e19(0x21d)][_0x317e19(0x291)](_0x1c6424,{'type':sequelize_1[_0x317e19(0x1fa)]['INSERT']});}}});});_0x36333f['start']();}handleInvoiceCreate();async function startQueueProcess(){const _0x5783ae=a350_0x56def5;logger_1[_0x5783ae(0x210)][_0x5783ae(0x229)](_0x5783ae(0x246)),exports[_0x5783ae(0x203)][_0x5783ae(0x298)](_0x5783ae(0x284),handleSendMessage),exports[_0x5783ae(0x2ab)]['process'](_0x5783ae(0x285),handleVerifySchedules),exports['sendScheduledMessages'][_0x5783ae(0x298)](_0x5783ae(0x284),handleSendScheduledMessage),exports['campaignQueue'][_0x5783ae(0x298)]('VerifyCampaignsDaatabase',handleVerifyCampaigns),exports['campaignQueue'][_0x5783ae(0x298)]('ProcessCampaign',handleProcessCampaign),exports[_0x5783ae(0x24c)][_0x5783ae(0x298)]('DispatchCampaign',handleDispatchCampaign),exports[_0x5783ae(0x2b1)]['process']('VerifyLoginStatus',handleLoginStatus),exports[_0x5783ae(0x24c)]['process'](_0x5783ae(0x2dc),handleDispatchCampaign),exports[_0x5783ae(0x218)][_0x5783ae(0x298)]('VerifyTicketExpiration',handleVerifyTicketExpiration),exports[_0x5783ae(0x282)]['process'](_0x5783ae(0x28e),handleWhatsappAutoRestart),exports[_0x5783ae(0x2ab)][_0x5783ae(0x2d8)]('Verify',{},{'repeat':{'cron':'*/5\x20*\x20*\x20*\x20*\x20*'},'removeOnComplete':!![]}),exports[_0x5783ae(0x24c)]['add'](_0x5783ae(0x2be),{},{'repeat':{'cron':'*/20\x20*\x20*\x20*\x20*\x20*'},'removeOnComplete':!![]}),exports[_0x5783ae(0x2b1)]['add'](_0x5783ae(0x2c9),{},{'repeat':{'cron':_0x5783ae(0x261)},'removeOnComplete':!![]}),exports[_0x5783ae(0x218)][_0x5783ae(0x2d8)](_0x5783ae(0x2a9),{},{'repeat':{'cron':_0x5783ae(0x261)},'removeOnComplete':!![]}),exports[_0x5783ae(0x282)][_0x5783ae(0x2d8)](_0x5783ae(0x28e),{},{'repeat':{'cron':_0x5783ae(0x2b4)},'removeOnComplete':!![]});}